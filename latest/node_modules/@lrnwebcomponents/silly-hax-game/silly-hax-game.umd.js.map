{"version":3,"file":"silly-hax-game.umd.js","sources":["silly-hax-game.umd.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@lrnwebcomponents/simple-timer/simple-timer.js\";\nimport \"@lrnwebcomponents/simple-modal/simple-modal.js\";\nimport \"@lrnwebcomponents/to-do/to-do.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@polymer/paper-button/paper-button.js\";\n/**\n`silly-hax-game`\nAn example web component of gamifying HAX to make it more fun and challenging.\n\n@demo demo/index.html\n\n*/\nlet SillyHaxGame = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <paper-card heading=\"[[haxText]]\" elevation=\"1\">\n      <simple-timer\n        id=\"timer\"\n        start-time=\"60\"\n        count-up=\"\"\n        hidden=\"\"\n        current-time=\"{{timer}}\"\n      ></simple-timer>\n      <div class=\"card-content\">\n        <to-do\n          items=\"{{tasks}}\"\n          hide-form=\"\"\n          id=\"todo\"\n          name=\"Hax Challenge\"\n        ></to-do>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button id=\"play\" raised=\"\" on-tap=\"_playButton\"\n          >Play</paper-button\n        >\n        <paper-button raised=\"\" on-tap=\"_resetTimer\">Reset</paper-button>\n      </div>\n    </paper-card>\n  `,\n\n  is: \"silly-hax-game\",\n\n  properties: {\n    /**\n     * tasks to accomplish\n     */\n    tasks: {\n      type: Array,\n      value: []\n    },\n    /**\n     * haxText\n     */\n    haxText: {\n      type: String,\n      computed: \"_haxTextValue(timer)\"\n    },\n    /**\n     * __score board\n     */\n    __score: {\n      type: Array,\n      value: []\n    },\n    /**\n     * tweet\n     */\n    tweet: {\n      type: String\n    },\n    /**\n     * Timer as updated via downstream\n     */\n    timer: {\n      type: Number\n    },\n    /**\n     * Playing the game or not.\n     */\n    playing: {\n      type: Boolean,\n      value: false,\n      observer: \"_playGame\",\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Play button\n   */\n  _playButton: function(e) {\n    if (!this.playing) {\n      this.playing = true;\n      this.$.timer.start();\n    }\n  },\n\n  /**\n   * _playGame\n   */\n  _playGame: function(newValue, oldValue) {\n    if (newValue) {\n      this.__started = true;\n      this.set(\"tasks\", []);\n      this.push(\n        \"tasks\",\n        {\n          value: false,\n          label: \"Start to edit with HAX\",\n          disabled: true,\n          id: \"play\"\n        },\n        {\n          value: false,\n          label: \"Embed a video by Searching for it\",\n          disabled: true,\n          id: \"youtube\"\n        },\n        {\n          value: false,\n          label: \"Turn a NASA image into a meme\",\n          disabled: true,\n          id: \"nasa\"\n        },\n        {\n          value: false,\n          label: \"Saved content!!!\",\n          disabled: true,\n          id: \"saved\"\n        }\n      );\n    }\n  },\n\n  /**\n   * Reset the timer to play again\n   */\n  _resetTimer: function(e) {\n    this.$.timer.pause();\n    this.playing = false;\n    this.timer = 0;\n    this.set(\"tasks\", []);\n  },\n\n  _haxTextValue: function(time) {\n    if (typeof time === typeof undefined || time == 60) {\n      return \"Take the HAX challenge\";\n    } else {\n      return time.toFixed(2);\n    }\n  },\n\n  /**\n   * Attached to the DOM, now fire.\n   */\n  attached: function() {\n    document.body.addEventListener(\n      \"hax-body-tag-added\",\n      this._verifyAction.bind(this)\n    );\n    document.body.addEventListener(\n      \"hax-store-property-updated\",\n      this._propertyUpdated.bind(this)\n    );\n  },\n\n  /**\n   * Property updated in the hax store.\n   */\n  _propertyUpdated: function(e) {\n    switch (e.detail.property) {\n      case \"editMode\":\n        if (\n          this.playing &&\n          this.__started &&\n          e.detail.value &&\n          typeof this.tasks[0].label !== typeof undefined\n        ) {\n          this.set(\"tasks.0.value\", true);\n          this.set(\n            \"tasks.0.label\",\n            this.tasks[0].label + \" - \" + this.timer.toFixed(2) + \" seconds\"\n          );\n        } else if (e.detail.value === false && this.__started && this.playing) {\n          this.set(\n            \"tasks.\" + (parseInt(this.tasks.length) - 1) + \".value\",\n            true\n          );\n          this.set(\n            \"tasks.\" + (parseInt(this.tasks.length) - 1) + \".label\",\n            this.tasks[parseInt(this.tasks.length) - 1].label +\n              \" - \" +\n              this.timer.toFixed(2) +\n              \" seconds\"\n          );\n          this.$.timer.pause();\n          this._verifyWin();\n        }\n        break;\n    }\n  },\n\n  /**\n   * Verify if they won!\n   */\n  _verifyWin: function() {\n    let win = true;\n    let winning = 0;\n    this.set(\"__score\", this.tasks);\n    for (var i in this.tasks) {\n      if (!this.tasks[i].value) {\n        win = false;\n      } else {\n        winning++;\n      }\n    }\n    if (this.timer === 0) {\n      win = false;\n      this.push(\"__score\", {\n        value: false,\n        label: \"You ran out of time :(\",\n        disabled: true,\n        id: \"time\"\n      });\n    } else if (!win) {\n      this.push(\"__score\", {\n        value: false,\n        label: \"You didn't complete everything. CHEATER!\",\n        disabled: true,\n        id: \"cheater\"\n      });\n    } else {\n      this.push(\"__score\", {\n        value: true,\n        label: \"You did it!!! <(:) Much Success!\",\n        disabled: true,\n        id: \"time\"\n      });\n      winning++;\n    }\n    if (!win) {\n      this.__successText =\n        \":( You have much sadness by only completing \" +\n        winning +\n        \" of the available \" +\n        this.tasks.length +\n        \" challenges. If you experienced confusion when using the interface for certain tasks please let us know! We want everyone to be able to master HAX.\";\n      this.tweet =\n        \"http://twitter.com/home?status=\" +\n        encodeURIComponent(\n          \"I took the #HaxtheWeb Challenge and finished \" +\n            winning +\n            \" challenges! Take the challenge at http://haxtheweb.org/ !\"\n        );\n    } else {\n      this.__successText =\n        \"YOU ARE A HAX MASTER! YOU BEAT ALL \" +\n        this.tasks.length +\n        \" CHALLENGES. AM I USING ENOUGH CAPSLOCK!? YOU BET I AM! TWEET YOUR SUCCESS NOW!\";\n      this.tweet =\n        \"http://twitter.com/home?status=\" +\n        encodeURIComponent(\n          \"I are winning! I beat the #HaxtheWeb Challenge in \" +\n            this.timer.toFixed(2) +\n            \" seconds. Now I drink more coffee and code less! Take the challenge at http://haxtheweb.org/ !\"\n        );\n    }\n    let c = document.createElement(\"div\");\n    c.innerHTML = `<p>${this.__successText}\n      <a href=\"https://github.com/elmsln/lrnwebcomponents/issues/new\" target=\"_blank\" style=\"text-decoration: none;text-transform: none;\"><paper-button raised=\"\">Give us feedback to improve</paper-button></a>\n      <a href=\"${\n        this.tweet\n      }\" target=\"_blank\" style=\"text-decoration: none;text-transform: none;\"><paper-button raised=\"\">Tweet your score</paper-button></a>\n    </p>`;\n    let todo = document.createElement(\"to-do\");\n    todo.setAttribute(\"hide-form\", \"hide-form\");\n    todo.setAttribute(\"name\", \"Report card\");\n    todo.setAttribute(\"items\", JSON.stringify(this.__score, null, 2));\n    c.appendChild(todo);\n    const evt = new CustomEvent(\"simple-modal-show\", {\n      bubbles: true,\n      cancelable: true,\n      detail: {\n        title: \"HAX Challenge score\",\n        elements: {\n          content: c\n        },\n        invokedBy: this.$.play,\n        clone: true\n      }\n    });\n    this.dispatchEvent(evt);\n  },\n\n  /**\n   * Verify that different tasks have been completed.\n   */\n  _verifyAction: function(e) {\n    if (this.playing && this.__started) {\n      if (e.detail.node.tagName === \"VIDEO-PLAYER\") {\n        this.set(\"tasks.1.value\", true);\n        this.set(\n          \"tasks.1.label\",\n          this.tasks[1].label + \" - \" + this.timer.toFixed(2) + \" seconds\"\n        );\n      } else if (e.detail.node.tagName === \"MEME-MAKER\") {\n        this.set(\"tasks.2.value\", true);\n        this.set(\n          \"tasks.2.label\",\n          this.tasks[2].label + \" - \" + this.timer.toFixed(2) + \" seconds\"\n        );\n      }\n    }\n  }\n});\nexport { SillyHaxGame };\n"],"names":["SillyHaxGame","Polymer","_template","html","is","properties","tasks","type","Array","value","haxText","String","computed","__score","tweet","timer","Number","playing","Boolean","observer","reflectToAttribute","_playButton","e","this","$","start","_playGame","newValue","oldValue","__started","set","push","label","disabled","id","_resetTimer","pause","_haxTextValue","time","_typeof","toFixed","attached","document","body","addEventListener","_verifyAction","bind","_propertyUpdated","detail","property","parseInt","length","_verifyWin","win","winning","i","__successText","encodeURIComponent","c","createElement","innerHTML","todo","setAttribute","JSON","stringify","appendChild","evt","CustomEvent","bubbles","cancelable","title","elements","content","invokedBy","play","clone","dispatchEvent","node","tagName"],"mappings":"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"}