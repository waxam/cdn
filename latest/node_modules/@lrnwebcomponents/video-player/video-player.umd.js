!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@lrnwebcomponents/materializecss-styles/materializecss-styles.js"),require("@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js"),require("@lrnwebcomponents/schema-behaviors/schema-behaviors.js"),require("@lrnwebcomponents/a11y-behaviors/a11y-behaviors.js"),require("@lrnwebcomponents/media-behaviors/media-behaviors.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/a11y-media-player/a11y-media-player.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@lrnwebcomponents/materializecss-styles/materializecss-styles.js","@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","@lrnwebcomponents/schema-behaviors/schema-behaviors.js","@lrnwebcomponents/a11y-behaviors/a11y-behaviors.js","@lrnwebcomponents/media-behaviors/media-behaviors.js","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/a11y-media-player/a11y-media-player.js"],t):t(e.VideoPlayer={},e.polymerLegacy_js,e.polymer_dom_js)}(this,function(e,t,o){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(){var e,t,o=(e=['\n    <custom-style>\n      <style>\n        :host {\n          display: block;\n          margin: 0 0 15px;\n        }\n        .video-caption {\n          font-style: italic;\n          margin: 0;\n          padding: 8px;\n          @apply --video-player-caption-theme;\n        }\n      </style>\n    </custom-style>\n\n    <template is="dom-if" if="[[isA11yMedia]]" restamp="">\n      <a11y-media-player\n        accent-color$="[[accentColor]]"\n        dark$="[[dark]]"\n        dark-transcript$="[[darkTranscript]]"\n        disable-interactive$="[[disableInteractive]]"\n        hide-timestamps$="[[hideTimestamps]]"\n        lang$="[[lang]]"\n        media-type$="[[sourceType]]"\n        preload$="[[preload]]"\n        media-title$="[[mediaTitle]]"\n        stand-alone$="[[__standAlone]]"\n        sticky-corner$="[[stickyCorner]]"\n        thumbnail-src$="[[thumbnailSrc]]"\n        crossorigin$="[[crossorigin]]"\n        youtube-id$="[[youtubeId]]"\n      >\n        <slot name="source"></slot> <slot name="track"></slot>\n        <template id="sources" is="dom-repeat" items="[[sourceData]]" as="sd">\n          <source src$="[[sd.src]]" type$="[[sd.type]]" />\n        </template>\n        <template id="tracks" is="dom-repeat" items="[[tracks]]" as="track">\n          <track\n            src$="[[track.src]]"\n            kind$="[[track.kind]]"\n            label$="[[track.label]]"\n            srclang$="[[track.lang]]"\n          />\n        </template>\n        <slot name="caption"></slot>\n      </a11y-media-player>\n    </template>\n    <template is="dom-if" if="[[!isA11yMedia]]">\n      <template is="dom-if" if="[[sandboxed]]">\n        <div class="responsive-video-container" lang$="[[lang]]">\n          <webview\n            resource$="[[schemaResourceID]]-video"\n            src$="[[sourceData.0.src]]"\n            width$="[[width]]"\n            height$="[[height]]"\n            frameborder="0"\n          ></webview>\n        </div>\n      </template>\n      <template is="dom-if" if="[[!sandboxed]]">\n        <template is="dom-if" if="[[iframed]]">\n          <div class="responsive-video-container" lang$="[[lang]]">\n            <iframe\n              resource$="[[schemaResourceID]]-video"\n              src$="[[sourceData.0.src]]"\n              width$="[[width]]"\n              height$="[[height]]"\n              frameborder="0"\n              webkitallowfullscreen=""\n              mozallowfullscreen=""\n              allowfullscreen=""\n            ></iframe>\n          </div>\n        </template>\n      </template>\n      <div id="videocaption" class$="video-caption">\n        <p>\n          [[mediaTitle]]\n          <span class="media-type print-only">(embedded media)</span>\n        </p>\n        <slot name="caption"></slot>\n      </div>\n    </template>\n  '],(t=['\n    <custom-style>\n      <style>\n        :host {\n          display: block;\n          margin: 0 0 15px;\n        }\n        .video-caption {\n          font-style: italic;\n          margin: 0;\n          padding: 8px;\n          @apply --video-player-caption-theme;\n        }\n      </style>\n    </custom-style>\n\n    <template is="dom-if" if="[[isA11yMedia]]" restamp="">\n      <a11y-media-player\n        accent-color\\$="[[accentColor]]"\n        dark\\$="[[dark]]"\n        dark-transcript\\$="[[darkTranscript]]"\n        disable-interactive\\$="[[disableInteractive]]"\n        hide-timestamps\\$="[[hideTimestamps]]"\n        lang\\$="[[lang]]"\n        media-type\\$="[[sourceType]]"\n        preload\\$="[[preload]]"\n        media-title\\$="[[mediaTitle]]"\n        stand-alone\\$="[[__standAlone]]"\n        sticky-corner\\$="[[stickyCorner]]"\n        thumbnail-src\\$="[[thumbnailSrc]]"\n        crossorigin\\$="[[crossorigin]]"\n        youtube-id\\$="[[youtubeId]]"\n      >\n        <slot name="source"></slot> <slot name="track"></slot>\n        <template id="sources" is="dom-repeat" items="[[sourceData]]" as="sd">\n          <source src\\$="[[sd.src]]" type\\$="[[sd.type]]" />\n        </template>\n        <template id="tracks" is="dom-repeat" items="[[tracks]]" as="track">\n          <track\n            src\\$="[[track.src]]"\n            kind\\$="[[track.kind]]"\n            label\\$="[[track.label]]"\n            srclang\\$="[[track.lang]]"\n          />\n        </template>\n        <slot name="caption"></slot>\n      </a11y-media-player>\n    </template>\n    <template is="dom-if" if="[[!isA11yMedia]]">\n      <template is="dom-if" if="[[sandboxed]]">\n        <div class="responsive-video-container" lang\\$="[[lang]]">\n          <webview\n            resource\\$="[[schemaResourceID]]-video"\n            src\\$="[[sourceData.0.src]]"\n            width\\$="[[width]]"\n            height\\$="[[height]]"\n            frameborder="0"\n          ></webview>\n        </div>\n      </template>\n      <template is="dom-if" if="[[!sandboxed]]">\n        <template is="dom-if" if="[[iframed]]">\n          <div class="responsive-video-container" lang\\$="[[lang]]">\n            <iframe\n              resource\\$="[[schemaResourceID]]-video"\n              src\\$="[[sourceData.0.src]]"\n              width\\$="[[width]]"\n              height\\$="[[height]]"\n              frameborder="0"\n              webkitallowfullscreen=""\n              mozallowfullscreen=""\n              allowfullscreen=""\n            ></iframe>\n          </div>\n        </template>\n      </template>\n      <div id="videocaption" class\\$="video-caption">\n        <p>\n          [[mediaTitle]]\n          <span class="media-type print-only">(embedded media)</span>\n        </p>\n        <slot name="caption"></slot>\n      </div>\n    </template>\n  '])||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}})));return r=function(){return o},o}var n=t.Polymer({_template:t.html(r()),is:"video-player",behaviors:[HAXBehaviors.PropertiesBehaviors,MaterializeCSSBehaviors.ColorBehaviors,SchemaBehaviors.Schema,A11yBehaviors.A11y,MediaBehaviors.Video],properties:{accentColor:{type:String,value:null,reflectToAttribute:!0},dark:{type:Boolean,value:!1,reflectToAttribute:!0},darkTranscript:{type:Boolean,value:!1},disableInteractive:{type:Boolean,value:!1},height:{type:String,value:null},hideTimestamps:{type:Boolean,value:!1},iframed:{type:Boolean,computed:"_computeIframed(sourceData, sandboxed)"},isA11yMedia:{type:Boolean,computed:"_computeA11yMedia(sourceType, sandboxed)"},lang:{type:String,value:"en"},mediaTitle:{type:String},preload:{type:String,value:"metadata"},sandboxed:{type:Boolean,computed:"_computeSandboxed(sourceData)"},source:{type:String,value:null},sources:{type:Array,value:[]},sourceData:{type:Array,computed:"_getSourceData(source,sources,tracks)",reflectToAttribute:!0},sourceType:{type:String,computed:"_computeSourceType(sourceData)"},youtubeId:{type:String,computed:"_computeYoutubeId(source,sourceType)"},isYoutube:{type:Boolean,computed:"_computeYoutube(sourceType)"},stickyCorner:{type:String,value:"top-right",reflectToAttribute:!0},tracks:{type:Array,value:[]},thumbnailSrc:{type:String,value:null,reflectToAttribute:!0},width:{type:String,value:null},crossorigin:{type:Boolean,value:!1}},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Video player",description:"This can present video in a highly accessible manner regardless of source.",icon:"av:play-circle-filled",color:"red",groups:["Video","Media"],handles:[{type:"video",source:"source",title:"caption",caption:"caption",description:"caption",color:"primaryColor"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],configure:[{property:"source",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"track",title:"Closed captions",description:"The URL for the captions file.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"thumbnailSrc",title:"Thumbnail image",description:"Optional. The URL for a thumbnail/poster image.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"mediaTitle",title:"Title",description:"Simple title for under video",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"},{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],advanced:[{property:"darkTranscript",title:"Dark theme for transcript",description:"Enable dark theme for the transcript.",inputMethod:"boolean"},{property:"hideTimestamps",title:"Hide timestamps",description:"Hide the time stamps on the transcript.",inputMethod:"boolean"},{property:"preload",title:"Preload source(s).",description:"How the sources should be preloaded, i.e. auto, metadata (default), or none.",inputMethod:"select",options:{preload:"Preload all media",metadata:"Preload media metadata only",none:"Don't preload anything"}},{property:"stickyCorner",title:"Sticky Corner",description:"Set the corner where a video plays when scrolled out of range, or choose none to disable sticky video.",inputMethod:"select",options:{none:"none","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right"}},{property:"sources",title:"Other sources",description:"List of other sources",inputMethod:"array",properties:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield"},{property:"type",title:"Type",description:"Media type data",inputMethod:"select",options:{"audio/aac":"acc audio","audio/flac":"flac audio","audio/mp3":"mp3 audio","video/mp4":"mp4 video","video/mov":"mov video","audio/ogg":"ogg audio","video/ogg":"ogg video","audio/wav":"wav audio","audio/webm":"webm audio","video/webm":"webm video"}}]},{property:"tracks",title:"Track list",description:"Tracks of different languages of closed captions",inputMethod:"array",properties:[{property:"kind",title:"Kind",description:"Kind of track",inputMethod:"select",options:{subtitles:"subtitles"}},{property:"label",title:"Label",description:'The human-readable name for this track, eg. "English Subtitles"',inputMethod:"textfield"},{property:"src",title:"Source",description:"Source of the track",inputMethod:"textfield"},{property:"srclang",title:'Two letter, language code, eg. "en" for English, "de" for German, "es" for Spanish, etc.',description:"Label",inputMethod:"textfield"}]}]}})},_computeYoutubeId:function(e,t){return void 0!==e&&"youtube"===t&&this._computeSRC(e).replace(/(https?:\/\/)?(www.)?youtube(-nocookie)?.com\/embed\//,"")},_computeYoutube:function(e){return"youtube"===e},_computeA11yMedia:function(e,t){return!(t||"youtube"!=e&&"local"!=e)},_computeIframed:function(e,t){return!(!(e.length>0&&void 0!==e[0]&&this._sourceIsIframe(e[0].src))||t)},_getSourceData:function(e,t,i){for(var r=o.dom(this).querySelector("track"),n=t.slice(),a=0;a<n.length;a++)n[a].type=void 0!==n[a].type&&null!==n[a].type?n[a].type:this._computeMediaType(n[a].src),n[a].src=this._computeSRC(n[a].src);if(null!==e){var s=this._computeSRC(e);this.sourceType=this._computeSourceType(s),"youtube"!==this.sourceType&&n.unshift({src:s,type:this._computeMediaType(s)})}return this.__standAlone=null==i||0===i.length&&null===r,n},_computeMediaType:function(e){var t="",o=function(o,i){for(var r=0;r<i.length;r++)""===t&&null!==e&&e.toLowerCase().indexOf("."+i[r])>-1&&(t=o+"/"+i[r])};return o("audio",["aac","flac","mp3","oga","wav"]),o("video",["mov","mp4","ogv","webm"]),t},_computeSandboxed:function(e){if(e.length>0&&void 0!==e[0]&&this._sourceIsIframe(e[0].src)&&"function"==typeof document.createElement("webview").reload)return!0;return!1},_computeSourceType:function(e){var t=o.dom(this).querySelector("source");if(e.length>0&&void 0!==e[0]&&"undefined"!==i(e[0].src))return this.getVideoType(e[0].src);if(null!==t){var r=this._computeSRC(t.getAttribute("src"));return this.getVideoType(r)}return null},_computeSRC:function(e){if(null!==e&&void 0!==i(e)){var t=void 0!==this.sourceType?this.sourceType:this.getVideoType(e);e=this.cleanVideoSource(e,t),"vimeo"==t?(this.vimeoTitle?e+="?title=1":e+="?title=0",this.vimeoByline?e+="&byline=1":e+="&byline=0",this.vimeoPortrait?e+="&portrait=1":e+="&portrait=0","undefined"!==i(this.videoColor)&&(e+="&color="+this.videoColor)):"dailymotion"==t&&(e+="&ui-start-screen-info=false",e+="&ui-logo=false",e+="&sharing-enable=false",e+="&endscreen-enable=false","undefined"!==i(this.videoColor)&&(e+="&ui-highlight="+this.videoColor))}return e}});e.VideoPlayer=n,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=video-player.umd.js.map
