{"version":3,"file":"eco-json-schema-form.umd.js","sources":["lib/eco-json-schema-boolean.js","lib/eco-json-schema-enum.js","lib/eco-json-schema-input.js","lib/eco-json-schema-file.js","lib/eco-json-schema-array.js","lib/eco-json-schema-object.js","lib/eco-json-schema-wizard.js"],"sourcesContent":["import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-checkbox/paper-checkbox.js\";\nPolymer({\n  is: \"eco-json-schema-boolean\",\n  _template: html`\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-checkbox {\n        color: #737373;\n        padding: 2px;\n        display: block;\n        font-size: 16px;\n        white-space: normal;\n      }\n    </style>\n\n    <paper-checkbox\n      id=\"checkbox\"\n      class=\"flex\"\n      checked=\"{{value}}\"\n      invalid=\"[[error]]\"\n      >[[_label]]</paper-checkbox\n    >\n  `,\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: Boolean,\n      notify: true,\n      value: false\n    },\n    error: {\n      type: Boolean,\n      value: false\n    },\n    _label: {\n      type: String,\n      notify: true,\n      value: \"\"\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.checkbox;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    if (schema.title) {\n      this._label = schema.title;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/paper-dropdown-menu/paper-dropdown-menu.js\";\nimport \"@polymer/paper-item/paper-item.js\";\nimport \"@polymer/paper-listbox/paper-listbox.js\";\nimport { IronValidatableBehavior } from \"@polymer/iron-validatable-behavior/iron-validatable-behavior.js\";\n\nPolymer({\n  _template: html`\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      paper-dropdown-menu {\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n        --paper-dropdown-menu-button: {\n          padding: 2px;\n        }\n      }\n    </style>\n\n    <paper-dropdown-menu\n      id=\"dropdown\"\n      class=\"layout horizontal vertical\"\n      value=\"{{value}}\"\n      required=\"\"\n    >\n      <paper-dropdown-menu class=\"dropdown-content\">\n        <paper-listbox slot=\"dropdown-content\" selected=\"0\">\n          <template is=\"dom-repeat\" items=\"[[_items]]\">\n            <paper-item class=\"flex\" label=\"[[item]]\">[[item]]</paper-item>\n          </template>\n        </paper-listbox>\n      </paper-dropdown-menu>\n    </paper-dropdown-menu>\n  `,\n  is: \"eco-json-schema-enum\",\n  behaviors: [IronValidatableBehavior],\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: String,\n      notify: true,\n      value: null\n    },\n    error: {\n      type: String,\n      observer: \"_errorChanged\",\n      value: null\n    },\n    _items: {\n      type: Object,\n      value: function() {\n        return {};\n      }\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.dropdown;\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    this._items = schema.enum.filter(function(item) {\n      return item !== null;\n    });\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  },\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.dropdown.invalid = true;\n    } else {\n      this.$.dropdown.invalid = false;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/paper-styles/typography.js\";\n/**\n`eco-json-schema-input` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-input\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-input\",\n  _template: html`\n    <custom-style>\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        paper-input {\n          padding: 2px;\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 16px;\n            color: #212121;\n          }\n          --paper-input-container: {\n            width: 100%;\n          }\n          --paper-input-container-input: {\n            width: 100% !important;\n            background-color: transparent !important;\n            border: none !important;\n          }\n          --paper-input-container-shared-input-style: {\n            width: 100% !important;\n            background-color: transparent !important;\n            border: none !important;\n          }\n        }\n      </style>\n    </custom-style>\n    <paper-input\n      id=\"input\"\n      class=\"flex\"\n      value=\"{{value}}\"\n      auto-validate\n    ></paper-input>\n  `,\n  behaviors: [AppLocalizeBehavior],\n\n  properties: {\n    language: {\n      value: \"en\"\n    },\n    resources: {\n      value: function() {\n        return {};\n      }\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: String,\n      notify: true,\n      value: function() {\n        return \"\";\n      }\n    },\n    error: {\n      type: String,\n      observer: \"_errorChanged\",\n      value: null\n    }\n  },\n  ready: function() {},\n  detached: function() {},\n  _schemaChanged: function() {\n    var schema = this.schema;\n    var inputEl = this.$.input;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    if (this._isSchemaNumber(schema.type)) {\n      inputEl.type = \"number\";\n\n      if (schema.multipleOf) {\n        inputEl.step = schema.multipleOf;\n      }\n\n      if (!isNaN(schema.maximum)) {\n        if (schema.exclusiveMaximum) {\n          inputEl.max = schema.maximum - (schema.multipleOf || 1);\n        } else {\n          inputEl.max = schema.maximum;\n        }\n      }\n\n      if (!isNaN(schema.minimum)) {\n        if (schema.exclusiveMinimum) {\n          inputEl.min = schema.minimum + (schema.multipleOf || 1);\n        } else {\n          inputEl.min = schema.minimum;\n        }\n      }\n    }\n\n    if (this._isSchemaString(schema.type)) {\n      if (schema.format === \"date-time\") {\n        inputEl.type = \"datetime-local\";\n        inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n      } else if (schema.format === \"date\") {\n        inputEl.type = \"date\";\n      } else if (schema.format === \"email\") {\n        inputEl.type = \"email\";\n      } else if (schema.format === \"hostname\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv4\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"ipv6\") {\n        inputEl.type = \"text\";\n      } else if (schema.format === \"uri\") {\n        inputEl.type = \"url\";\n      } else {\n        inputEl.type = \"text\";\n      }\n\n      /*\n        if (schema.maxLength || schema.minLength) {\n          inputEl.charCounter = true;\n        }\n       */\n\n      if (schema.maxLength) {\n        inputEl.maxlength = schema.maxLength;\n      }\n\n      if (schema.minLength) {\n        inputEl.minlength = schema.minLength;\n      }\n\n      if (schema.pattern) {\n        inputEl.pattern = schema.pattern;\n      }\n    }\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n  },\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.input.errorMessage = this.error;\n      this.$.input.invalid = true;\n    } else {\n      this.$.input.invalid = false;\n      this.$.input.errorMessage = null;\n    }\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type)\n    );\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport * as async from \"@polymer/polymer/lib/utils/async.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@polymer/paper-input/paper-input.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\n/**\n`eco-json-schema-file` takes in a JSON schema of type number and string and\ncontains a `paper-input`, exposing a `value` property that represents the schema.\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-file\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-file\",\n  _template: html`\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      :host {\n        display: inline-block;\n      }\n\n      .enabled {\n        border: 1px dashed #555;\n        @apply --file-upload-upload-border-enabled;\n      }\n\n      .hover {\n        opacity: 0.7;\n        border: 1px dashed #111;\n        @apply --file-upload-upload-border-hover;\n      }\n\n      #UploadBorder {\n        vertical-align: middle;\n        color: #555;\n        padding: 20px;\n        max-height: 300px;\n        overflow-y: auto;\n        display: inline-block;\n        @apply --file-upload-upload-border;\n      }\n\n      #dropArea {\n        text-align: center;\n        @apply --file-upload-drop-area;\n      }\n\n      paper-button#button {\n        margin-bottom: 20px;\n        @apply --file-upload-button;\n      }\n\n      .file {\n        padding: 10px 0px;\n        @apply --file-upload-file;\n      }\n\n      .commands {\n        float: right;\n        @apply --file-upload-commands;\n      }\n\n      .commands iron-icon:not([icon=\"check-circle\"]) {\n        cursor: pointer;\n        opacity: 0.9;\n        @apply --file-upload-commands-faded;\n      }\n\n      .commands iron-icon:hover {\n        opacity: 1;\n        @apply --file-upload-commands-hovered;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      .error {\n        color: #f40303;\n        font-size: 11px;\n        margin-top: 2px;\n        @apply --file-upload-error;\n      }\n\n      .progress-bar {\n        margin-top: 2px;\n      }\n\n      paper-progress {\n        --paper-progress-active-color: #03a9f4;\n      }\n\n      paper-progress[error] {\n        --paper-progress-active-color: #f40303;\n      }\n    </style>\n\n    <div class=\"layout horizontal nowrap\">\n      <div>\n        <paper-button\n          id=\"button\"\n          on-click=\"_fileClick\"\n          alt=\"{{paperButtonAlt}}\"\n          raised=\"\"\n        >\n          <iron-icon icon=\"editor:attach-file\"></iron-icon\n          >{{paperButtonTitle}}</paper-button\n        >\n        <div id=\"UploadBorder\">\n          <div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n          <template is=\"dom-repeat\" items=\"{{files}}\">\n            <div class=\"file\">\n              <div class=\"name\">\n                <span>{{item.name}}</span>\n                <div class=\"commands\">\n                  <iron-icon\n                    icon=\"autorenew\"\n                    title=\"{{retryText}}\"\n                    on-click=\"_retryUpload\"\n                    hidden\\$=\"{{!item.error}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"cancel\"\n                    title=\"{{removeText}}\"\n                    on-click=\"_cancelUpload\"\n                    hidden\\$=\"{{item.complete}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"check-circle\"\n                    title=\"{{successText}}\"\n                    hidden\\$=\"{{!item.complete}}\"\n                  ></iron-icon>\n                </div>\n              </div>\n              <div class=\"error\" hidden\\$=\"{{!item.error}}\">{{errorText}}</div>\n            </div>\n          </template>\n        </div>\n      </div>\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        on-change=\"_fileChange\"\n        hidden=\"\"\n        multiple=\"{{multi}}\"\n        accept=\"{{accept}}\"\n      />\n    </div>\n  `,\n  behaviors: [AppLocalizeBehavior],\n\n  properties: {\n    language: {\n      value: \"en\",\n      notify: true\n    },\n    resources: {\n      value: function() {\n        return {};\n      },\n      notify: true\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      },\n      observer: \"_valueChanged\"\n    },\n    /**\n    error: {\n      type: String,\n      observer: '_errorChanged',\n      value: null\n    },\n    */\n\n    /**\n     * `target` is the target url to upload the files to.\n     * Additionally by adding '<name>' in your url, it will be replaced by\n     * the file name.\n     */\n    target: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `accept` is the set of comma separated file extensions or mime types\n     * to filter as accepted.\n     */\n    accept: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `droppable` indicates whether or not to allow file drop.\n     */\n    droppable: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `dropText` is the  text to display in the file drop area.\n     */\n    dropText: {\n      type: String,\n      value: \"Drop Files Here\"\n    },\n\n    /**\n     * `multi` indicates whether or not to allow multiple files to be uploaded.\n     */\n    multi: {\n      type: Boolean,\n      value: true\n    },\n\n    /**\n     * `files` is the list of files to be uploaded\n     */\n    files: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    },\n\n    /**\n     * `raised` indicates whether or not the button should be raised\n     */\n    raised: {\n      type: Boolean,\n      value: true\n    },\n\n    /**\n     * `noink` indicates that the button should not have an ink effect\n     */\n    noink: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `headers` is a key value map of header names and values\n     */\n    headers: {\n      type: Object,\n      value: {}\n    },\n\n    /**\n     * `retryText` is the text for the tooltip to retry an upload\n     */\n    retryText: {\n      type: String,\n      value: \"Retry Upload\"\n    },\n\n    /**\n     * `removeText` is the text for the tooltip to remove an upload\n     */\n    removeText: {\n      type: String,\n      value: \"Remove\"\n    },\n\n    /**\n     * `successText` is the text for the tooltip of a successful upload\n     */\n    successText: {\n      type: String,\n      value: \"Success\"\n    },\n\n    /**\n     * `errorText` is the text to display for a failed upload\n     */\n    errorText: {\n      type: String,\n      value: \"Error uploading file...\"\n    },\n\n    /**\n     * `_shownDropText` indicates whether or not the drop text should be shown\n     */\n    _shownDropText: {\n      type: Boolean,\n      value: false\n    },\n\n    /**\n     * `additional` object of key-pair values to send additional values along with file.\n     */\n    additional: {\n      type: Object,\n      value: {}\n    },\n\n    /**\n     * `fileDataName` is the name for the file data in the `formData` object.\n     */\n    fileDataName: {\n      type: String,\n      value: \"file\"\n    },\n\n    /**\n     * `paperButtonAlt` allows changing the alt property on the paper button\n     */\n    paperButtonAlt: {\n      type: String,\n      value: \"\"\n    },\n\n    /**\n     * `paperButtonTitle` allows changing the title property on the paper button\n     */\n    paperButtonTitle: {\n      type: String,\n      value: \"\"\n    }\n  },\n  /**\n   * Clears the list of files\n   */\n  clear: function() {\n    this.set(\"files\", []);\n    this.$.fileInput.value = \"\";\n    this._showDropText();\n  },\n\n  ready: function() {\n    if (this.raised) {\n      this.toggleAttribute(\"raised\", true, this.$.button);\n    }\n    if (this.noink) {\n      this.toggleAttribute(\"noink\", true, this.$.button);\n    }\n    if (this.droppable) {\n      this._showDropText();\n      this.setupDrop();\n    }\n  },\n\n  /**\n   * A function to set up a drop area for drag-and-drop file uploads\n   */\n  setupDrop: function() {\n    var uploadBorder = this.$.UploadBorder;\n    this.toggleClass(\"enabled\", true, uploadBorder);\n\n    this.ondragover = function(e) {\n      e.stopPropagation();\n      this.toggleClass(\"hover\", true, uploadBorder);\n\n      // Workaround for allowgin drop from Chome's download footer on OSX\n      // See https://bugs.chromium.org/p/chromium/issues/detail?id=234931\n      var effect = e.dataTransfer && e.dataTransfer.dropEffect;\n      var effectAllowed = e.dataTransfer && e.dataTransfer.effectAllowed;\n      if (effect === \"none\" && effectAllowed !== \"none\") {\n        e.dataTransfer.dropEffect = effectAllowed === \"move\" ? \"move\" : \"copy\";\n      }\n      // end of workaround\n\n      return false;\n    };\n\n    this.ondragleave = function() {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      return false;\n    };\n\n    this.ondrop = function(event) {\n      this.toggleClass(\"hover\", false, uploadBorder);\n      event.preventDefault();\n\n      // Check if multiple upload is allowed\n      if (!this.multi && this.files.length !== 0) {\n        return;\n      }\n\n      var length = event.dataTransfer.files.length;\n      for (var i = 0; i < length; i++) {\n        var file = event.dataTransfer.files[i];\n        //if (this.value.indexOf(window.btoa(unescape(encodeURIComponent(file.name)))) >= 0 ) {\n        //  continue;\n        //}\n        // Check if filetype is accepted\n        var mimeType =\n          file.type !== \"\" ? file.type.match(/^[^\\/]*\\//)[0] : null;\n        var fileType = file.name.match(/\\.[^\\.]*$/)[0];\n        if (\n          this.accept !== \"\" &&\n          !(\n            this.accept.indexOf(mimeType) > -1 ||\n            this.accept.indexOf(fileType) > -1\n          )\n        ) {\n          continue;\n        }\n\n        file.progress = 0;\n        file.error = false;\n        file.complete = false;\n        this.push(\"files\", file);\n        this.uploadFile(file);\n      }\n    };\n  },\n\n  /**\n   * Clicks the invisible file input\n   */\n  _fileClick: function() {\n    var elem = this.$.fileInput;\n    if (elem && document.createEvent) {\n      // sanity check\n      var evt = document.createEvent(\"MouseEvents\");\n      evt.initEvent(\"click\", true, false);\n      elem.dispatchEvent(evt);\n    }\n  },\n\n  /**\n   * Called whenever the list of selected files changes\n   *\n   * @param {object} e An event object\n   */\n  _fileChange: function(e) {\n    var length = e.target.files.length;\n    for (var i = 0; i < length; i++) {\n      var file = e.target.files[i];\n      file.progress = 0;\n      file.error = false;\n      file.complete = false;\n      this.push(\"files\", file);\n      if (!this.multi && this.files.length !== 0) {\n        this.set(\"files\", []);\n        this.set(\"value\", {});\n      }\n      this.uploadFile(file);\n    }\n  },\n\n  /**\n   * Cancels the file upload for a specific file\n   *\n   * @param {object} file An element of the files array\n   */\n  cancel: function(file) {\n    if (file) {\n      if (file.xhr) {\n        file.xhr.abort();\n      }\n      this.splice(\"files\", this.files.indexOf(file), 1);\n      this._showDropText();\n    }\n  },\n\n  /**\n   * Cancels the file upload\n   *\n   * @param {object} e An event object\n   */\n  _cancelUpload: function(e) {\n    this.cancel(e.model.__data__.item);\n  },\n\n  /**\n   * Retries to upload the file\n   *\n   * @param {object} e An event object\n   */\n  _retryUpload: function(e) {\n    e.model.set(\"item.error\", false);\n    e.model.set(\"item.progress\", 0);\n    // The async helps give visual feedback of a retry occurring, even though it's less efficient.\n    var self = this;\n    async.microTask.run(() => {\n      self.uploadFile(e.model.__data__.item);\n    });\n  },\n\n  /**\n   * Whether or not to display the drop text\n   */\n  _showDropText: function() {\n    this.set(\"_shownDropText\", !this.files.length && this.droppable);\n  },\n\n  /**\n   * Uploads a file\n   *\n   * @param {object} file An element of the files array\n   */\n  uploadFile: function(file) {\n    if (!file) {\n      return;\n    }\n    this.fire(\"before-upload\");\n    this._showDropText();\n    var prefix = \"files.\" + this.files.indexOf(file);\n    var self = this;\n\n    var reader = new FileReader();\n\n    reader.addEventListener(\n      \"load\",\n      function() {\n        var r = reader.result;\n        //self.push('value', {\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //self.value.push({\"name\": unescape(encodeURIComponent( file.name )),\"content\":r});\n        //console.log('value.'+self.files.indexOf(file));\n        self.set(\n          \"value.\" +\n            self.attributes.name.value +\n            \".\" +\n            self.files.indexOf(file),\n          r\n        );\n        //self.notifyPath('value');\n      },\n      false\n    );\n\n    if (!self.value.hasOwnProperty(self.attributes.name.value)) {\n      this.set(\"value.\" + self.attributes.name.value, {});\n    }\n    reader.readAsDataURL(file);\n  },\n  _valueChanged: function() {\n    console.log(\"this.value: \" + JSON.stringify(this.value));\n  },\n  _schemaChanged: function() {\n    var schema = this.schema;\n    /*\n    var inputEl = this.$.fileInput;\n    if (schema.required) {\n      inputEl.required = true;\n    }\n    //inputEl.type = 'file';\n\n    if (schema.component && schema.component.properties) {\n      Object.keys(schema.component.properties).forEach(function(prop) {\n        inputEl[prop] = schema.component.properties[prop];\n      });\n    }\n    */\n\n    /*\n    inputEl.alwaysFloatLabel = true; // label doesn't float when value not set\n\n    if (schema.title) {\n      inputEl.label = schema.title;\n    }\n    */\n  },\n  /*\n  _errorChanged: function() {\n    if (this.error) {\n      this.$.fileInput.errorMessage = this.error;\n      this.$.fileInput.invalid = true;\n    } else {\n      this.$.fileInput.invalid = false;\n      this.$.fileInput.errorMessage = null;\n    }\n  },\n  */\n  _isSchemaValue: function(type) {\n    return this._isSchemaFile(type);\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  },\n  stringify: function(s) {\n    return JSON.stringify(s);\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"paper-collapse-item/paper-collapse-item.js\";\nimport \"paper-collapse-item/paper-collapse-group.js\";\nimport \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-input.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-file.js\";\n/**\n`eco-json-schema-array` takes in a JSON schema of type array and builds a form,\nexposing a `value` property that represents an array described by the schema.\n\nPlease see the `eco-json-schema-object` documentation for further information.\n\n@group eco Elements\n@element eco-json-schema-array\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-array\",\n  _template: html`\n    <custom-style>\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        paper-input {\n          padding: 2px;\n\n          --paper-input-container-label: {\n            white-space: normal;\n            position: static;\n            font-size: 22px;\n            color: #212121;\n          }\n        }\n\n        paper-collapse-item {\n          --paper-collapse-item-header: {\n            font-weight: bold;\n            padding: 8px 0 0 8px;\n          }\n        }\n\n        #form {\n          border: 1px solid #aaaaaa;\n        }\n\n        #form div:nth-child(odd) {\n          background-color: #f2f2f2;\n          padding: 4px;\n        }\n\n        #form div:nth-child(even) {\n          background-color: #e2e2e2;\n          border-top: 1px solid #aaaaaa;\n          border-bottom: 1px solid #aaaaaa;\n          padding: 4px;\n        }\n\n        #form div:focus,\n        #form div:hover,\n        #form div:active {\n          background-color: #ffffff !important;\n        }\n\n        paper-icon-button {\n          float: right;\n          border-radius: 50%;\n        }\n\n        .array-add {\n          color: #34e79a;\n          background-color: #f8f8f8;\n        }\n\n        .array-remove-element {\n          color: #f44336;\n          background-color: #f8f8f8;\n        }\n\n        .label {\n          @apply --paper-input-container-label;\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n\n        :host {\n          display: block;\n        }\n        .label {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n          @apply --paper-input-container-label;\n        }\n      </style>\n    </custom-style>\n    <div class=\"horizontal layout\">\n      <div class=\"flex\" hidden\\$=\"[[!label]]\">[[label]]</div>\n      <paper-icon-button\n        id=\"addarray\"\n        title=\"Add another item\"\n        class=\"array-add\"\n        icon=\"add\"\n        on-click=\"_onAddItem\"\n        role=\"button\"\n        aria-label=\"Add another item\"\n      ></paper-icon-button>\n    </div>\n\n    <paper-collapse-group\n      id=\"form\"\n      class=\"vertical flex layout\"\n    ></paper-collapse-group>\n  `,\n  properties: {\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      },\n      observer: \"_valueChanged\"\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    _schemaArrayItems: {\n      type: Array,\n      notify: true,\n      value: function() {\n        return [];\n      }\n    }\n  },\n  observers: [\"_schemaArraySplicesChanged(_schemaArrayItems.splices)\"],\n  /**\n   * Notice values have changed and rebuild the form\n   * to match (potentially).\n   */\n  _valueChanged: function(newValue, oldValue) {\n    if (\n      newValue !== oldValue &&\n      typeof newValue !== typeof undefined &&\n      typeof this.schema !== typeof undefined\n    ) {\n      setTimeout(() => {\n        this._buildSchemaArrayItems();\n        // wipe schema array and go from there\n        // this only fires when the element initially builds\n        for (var i in newValue) {\n          this._onAddItemWithValue(newValue[i], parseInt(i));\n        }\n      }, 100);\n    }\n  },\n  ready: function() {},\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaArrayItems: function() {\n    this._schemaArrayItems = [];\n  },\n  _setValue: function() {\n    this.value = [];\n    this.value = this._schemaArrayItems.map(function(item) {\n      return item.value;\n    });\n  },\n  _schemaArraySplicesChanged: function(detail) {\n    if (!detail) {\n      return console.warn(\"detail is undefined\");\n    }\n\n    var ctx = this;\n\n    if (detail.keySplices) {\n      console.warn(\"Got keySplices, don't know what to do with them!\");\n    }\n\n    detail.indexSplices.forEach(function(splice) {\n      var args = [\"value\", splice.index, splice.removed.length];\n\n      if (splice.removed && splice.removed.length) {\n        for (\n          var i = splice.index, ii = splice.index + splice.removed.length;\n          i < ii;\n          i++\n        ) {\n          ctx._removeArrayEl(ctx.$.form.children[i]);\n        }\n      }\n\n      if (splice.addedCount) {\n        for (\n          var i = splice.index, ii = splice.index + splice.addedCount;\n          i < ii;\n          i++\n        ) {\n          var item = splice.object[i];\n\n          var componentEl = ctx.create(item.component.name, {\n            label: item.label,\n            schema: item.schema,\n            schemaArrayItem: item\n          });\n          var containerEl = ctx.create(\"paper-collapse-item\", {\n            header: \"Item \" + (i + 1)\n          });\n          var buttonEl = ctx.create(\"paper-icon-button\", {\n            icon: \"remove\",\n            title: \"Remove item\"\n          });\n          ctx.listen(buttonEl, \"tap\", \"_onRemoveItem\");\n          buttonEl.classList.add(\"array-remove-element\");\n          componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n          dom(containerEl).appendChild(componentEl);\n          dom(containerEl).appendChild(buttonEl);\n\n          var beforeEl = ctx.$.form.children[i];\n\n          if (beforeEl) {\n            dom(ctx.$.form).insertBefore(containerEl, beforeEl);\n          } else {\n            dom(ctx.$.form).appendChild(containerEl);\n          }\n\n          ctx.listen(\n            componentEl,\n            item.component.valueProperty\n              .replace(/([A-Z])/g, \"-$1\")\n              .toLowerCase() + \"-changed\",\n            \"_schemaArrayItemChanged\"\n          );\n          args.push(ctx._deepClone(componentEl[item.component.valueProperty]));\n        }\n      }\n      ctx.splice.apply(ctx, args);\n    });\n  },\n  _schemaArrayItemChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var item = event.target.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    var path = [\"value\", index];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      path = path.concat(detail.path.split(\".\").slice(1, -1));\n\n      if (detail.value.keySplices) {\n        console.warn(\"Got keySplices, don't know what to do with them!\");\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (\n            var i = splice.index, ii = splice.index + splice.addedCount;\n            i < ii;\n            i++\n          ) {\n            args.push(ctx._deepClone(splice.object[i]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      path = path.concat(detail.path.split(\".\").slice(1));\n      this.set(path, this._deepClone(detail.value));\n      this.notifyPath(\"path\");\n    } else {\n      this.splice(\"value\", index, 1, this._deepClone(detail.value));\n      this.notifyPath(\"value.1\");\n    }\n  },\n  _removeArrayEl: function(el) {\n    var polyEl = dom(el);\n    if (typeof polyEl.childNodes[0] !== typeof undefined) {\n      this.unlisten(\n        polyEl.childNodes[0],\n        polyEl.firstChild.schemaArrayItem.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaArrayItemChanged\"\n      );\n      if (typeof polyEl.childNodes[1] !== typeof undefined) {\n        this.unlisten(polyEl.childNodes[1], \"tap\", \"_onRemoveItem\");\n      }\n    }\n    el.schemaArrayItem = null;\n    dom(this.$.form).removeChild(el);\n  },\n  _clearForm: function() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removeArrayEl(formEl.firstChild);\n    }\n  },\n  _schemaChanged: function() {\n    this._clearForm();\n    this._buildSchemaArrayItems();\n    this._setValue();\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(rowEl, idx) {\n      if (ctx.error && ctx.error[idx]) {\n        dom(rowEl).childNodes[0].error = ctx.error[idx];\n      } else {\n        dom(rowEl).childNodes[0].error = null;\n      }\n    });\n  },\n  _onAddItemWithValue: function(values, pointer) {\n    var schema = this.schema.items;\n    // try to set values if we have them\n    if (typeof values !== typeof undefined) {\n      for (var i in values) {\n        if (typeof schema.properties[i] !== typeof undefined) {\n          schema.properties[i].value = values[i];\n        }\n      }\n    }\n    var item = {\n      label: schema.title,\n      schema: schema,\n      component: schema.component || {}\n    };\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    var ctx = this;\n    var componentEl = ctx.create(item.component.name, {\n      label: item.label,\n      schema: item.schema,\n      schemaArrayItem: item\n    });\n    var containerEl = ctx.create(\"paper-collapse-item\", {\n      header: \"Item \" + (i + 1)\n    });\n    var buttonEl = ctx.create(\"paper-icon-button\", {\n      icon: \"remove\",\n      title: \"Remove item\"\n    });\n    ctx.listen(buttonEl, \"tap\", \"_onRemoveItem\");\n    buttonEl.classList.add(\"array-remove-element\");\n    componentEl.classList.add(\"flex\", \"horizontal\", \"layout\");\n\n    dom(containerEl).appendChild(componentEl);\n    dom(containerEl).appendChild(buttonEl);\n\n    var beforeEl = ctx.$.form.children[i];\n\n    if (beforeEl) {\n      dom(ctx.$.form).insertBefore(containerEl, beforeEl);\n    } else {\n      dom(ctx.$.form).appendChild(containerEl);\n    }\n    ctx.listen(\n      componentEl,\n      item.component.valueProperty.replace(/([A-Z])/g, \"-$1\").toLowerCase() +\n        \"-changed\",\n      \"_schemaArrayItemChanged\"\n    );\n    // this will add it to the array but not force a splice mutation\n    this._schemaArrayItems.push(item);\n  },\n  _onAddItem: function() {\n    var schema = this.schema.items;\n    var item = {\n      label: schema.title,\n      schema: schema,\n      component: schema.component || {}\n    };\n\n    if (!item.component.valueProperty) {\n      item.component.valueProperty = \"value\";\n    }\n\n    if (!item.component.name) {\n      if (this._isSchemaEnum(schema)) {\n        item.component.name = \"eco-json-schema-enum\";\n      } else if (this._isSchemaBoolean(schema.type)) {\n        item.component.name = \"eco-json-schema-boolean\";\n      } else if (this._isSchemaFile(schema.type)) {\n        item.component.name = \"eco-json-schema-file\";\n      } else if (this._isSchemaValue(schema.type)) {\n        item.component.name = \"eco-json-schema-input\";\n      } else if (this._isSchemaObject(schema.type)) {\n        item.component.name = \"eco-json-schema-object\";\n      } else if (this._isSchemaArray(schema.type)) {\n        item.component.name = \"eco-json-schema-array\";\n      } else {\n        return console.error(\"Unknown item type %s\", schema.type);\n      }\n    }\n    this.push(\"_schemaArrayItems\", item);\n  },\n  _onRemoveItem: function(e) {\n    var item = dom(e).localTarget.previousSibling.schemaArrayItem;\n    var index = this._schemaArrayItems.indexOf(item);\n    this.splice(\"_schemaArrayItems\", index, 1);\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n/**\n`eco-json-schema-object` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-object schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-object>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-object\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-object\",\n  _template: html`\n    <custom-style>\n      <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n        div.layout {\n          height: auto;\n        }\n        #form {\n          display: block;\n          @apply --eco-json-schema-object-form;\n          @apply --layout-vertical;\n          @apply --layout-wrap;\n        }\n        #form ::slotted(paper-input) {\n          --paper-input-container-shared-input-style: {\n            border: none !important;\n            width: 100% !important;\n            background-color: transparent !important;\n          }\n        }\n      </style>\n    </custom-style>\n\n    <template is=\"dom-if\" if=\"{{!wizard}}\">\n      <div class=\"header\" hidden\\$=\"[[!label]]\">[[label]]</div>\n    </template>\n    <div class=\"layout vertical flex start-justified\">\n      <div id=\"form\" class=\"layout horizontal flex start-justified\">\n        <slot></slot>\n      </div>\n    </div>\n  `,\n  behaviors: [AppLocalizeBehavior],\n  properties: {\n    language: {\n      value: \"en\"\n    },\n    resources: {\n      value: function() {\n        return {};\n      }\n    },\n    schema: {\n      type: Object,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      }\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    wizard: {\n      type: Boolean,\n      notify: true\n    }\n  },\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaProperties: function() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n        if (!property.component.slot) {\n          property.component.slot = \"\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = false;\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = \"\";\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = {};\n          }\n          property.value = schema.value;\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          if (typeof schema.value === typeof undefined) {\n            schema.value = [];\n          }\n          property.value = schema.value;\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n\n        return property;\n      }\n    );\n  },\n  _schemaPropertyChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      if (detail.value) {\n        detail.value.indexSplices.forEach(function(splice) {\n          var args = [path.join(\".\"), splice.index, splice.removed.length];\n          if (splice.addedCount) {\n            for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n              if (splice.addedKeys && splice.addedKeys[i]) {\n                property.keyMap = property.keyMap || {};\n                property.keyMap[\n                  path.concat([splice.addedKeys[i]]).join(\".\")\n                ] = path.concat([i + splice.index]).join(\".\");\n              }\n              args.push(ctx._deepClone(splice.object[i + splice.index]));\n            }\n          }\n          ctx.splice.apply(ctx, args);\n        });\n      }\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n        this.notifyPath(\"value.\" + property.property);\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n      this.notifyPath(path.join(\".\"));\n    } else {\n      property.value = detail.value;\n      this.set(path, this._deepClone(detail.value));\n      this.notifyPath(path);\n    }\n  },\n  _setValue: function() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      if (typeof property.value !== typeof undefined) {\n        value[property.property] = ctx._deepClone(property.value);\n      }\n    });\n    this.value = value;\n  },\n  _buildForm: function() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n      if (property.component.name === \"paper-input\") {\n        el.style[\"background-color\"] = \"transparent\";\n        el.style[\"width\"] = \"100%\";\n      }\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n      // set the element's default value to be what was passed into the schema\n      el[property.component.valueProperty] = property.value;\n      // support component attribute overrides\n      for (var attr in property.component.attributes) {\n        el.setAttribute(attr, property.component.attributes[attr]);\n      }\n      // support component property overrides\n      for (var prop in property.component.properties) {\n        el[prop] = property.component.properties[prop];\n      }\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      if (typeof ctx.$ !== typeof undefined) {\n        dom(this).appendChild(el);\n      }\n      // support for slot injection too!\n      if (property.component.slot != \"\") {\n        var temp = document.createElement(\"template\");\n        temp.innerHTML = property.component.slot;\n        dom(el).appendChild(temp);\n      }\n    });\n  },\n  _removePropertyEl: function(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this).removeChild(el);\n  },\n  _clearForm: function() {\n    if (typeof this.$ !== typeof undefined) {\n      var formEl = dom(this);\n      while (formEl.firstChild) {\n        this._removePropertyEl(formEl.firstChild);\n      }\n    }\n  },\n  _schemaChanged: function(newValue, oldValue) {\n    if (newValue && typeof oldValue !== typeof undefined) {\n      this._clearForm();\n      this._buildSchemaProperties();\n      this._buildForm();\n      this._setValue();\n    }\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this).childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n","import { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-flex-layout/iron-flex-layout-classes.js\";\nimport \"@polymer/iron-icons/image-icons.js\";\nimport \"@polymer/iron-icons/iron-icons.js\";\nimport \"@polymer/iron-icons/editor-icons.js\";\nimport \"@polymer/iron-pages/iron-pages.js\";\nimport \"@polymer/app-layout/app-toolbar/app-toolbar.js\";\nimport \"@polymer/paper-menu-button/paper-menu-button.js\";\nimport \"@polymer/paper-icon-button/paper-icon-button.js\";\nimport \"@polymer/paper-ripple/paper-ripple.js\";\nimport { AppLocalizeBehavior } from \"@polymer/app-localize-behavior/app-localize-behavior.js\";\nimport \"./eco-json-schema-object.js\";\nimport \"./eco-json-schema-array.js\";\nimport \"./eco-json-schema-boolean.js\";\nimport \"./eco-json-schema-enum.js\";\nimport \"./eco-json-schema-file.js\";\nimport \"./eco-json-schema-input.js\";\n\n/**\n`eco-json-schema-wizard` takes in a JSON schema of type object and builds a form,\nexposing a `value` property that represents an object described by the schema.\n\nGiven the element:\n\n```\n<eco-json-schema-wizard schema=\"[[schema]]\" value=\"{{value}}\"></eco-json-schema-wizard>\n```\n\nAnd a JSON schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\"\n    }\n  }\n}\n```\n\nA form will be generated, with the elements `value` looking something like this:\n\n```\n> this.value\n{\n  \"name\": \"Eric\"\n}\n```\n\nDeep / nested schemas are supported for type array and object:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nValidation is handled for strings and number/integers by mapping JSON schema\nvalidation keywords to `paper-input` attributes; form elements will automatically\ntry and validate themselves as users provide input:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\"\n    },\n    \"email\": {\n      \"title\": \"email\",\n      \"type\": \"string\",\n      \"format\": \"email\"\n    }\n  }\n}\n```\n\nCustomizing components for schema properties is supported by extending your JSON\nschema. For any schema sub-property (`properties` for `\"type\": \"object\"` and\n`items` for `\"type\": \"array\"`) a `component` property may be specified, with\nthe following options:\n\n- `component.name` - specifies the name of the custom component to use\n- `component.valueProperty` - specifies which property of the custom element\n  represents its value\n- `component.properties` - properties that will be set on the element\n\nExample schema using custom components (note that `\"valueProperty\": \"value\"` is\nredundant in this case, `\"valueProperty\": \"value\"` will be the default if not specified):\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"phoneNumber\": {\n      \"title\": \"Phone Number\",\n      \"type\": \"string\",\n      \"component\": {\n        \"name\": \"gold-phone-input\",\n        \"valueProperty\": \"value\",\n        \"properties\": {\n          \"countryCode\": \"1\"\n        }\n      }\n    }\n  }\n}\n```\n\nItems set in `component.properties` will override any attributes / properties set\nby `eco-json-schema-form` elements, making it possible to override JSON schema\nvalidation properties mapped to `paper-input` attributes:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    }\n  }\n}\n```\n\nPutting it all together, this schema:\n\n```\n> this.schema = {\n  \"$schema\": \"http://json-schema.org/schema#\",\n  \"title\": \"Contact\",\n  \"type\": \"object\",\n  \"properties\": {\n    \"name\": {\n      \"title\": \"Name\",\n      \"type\": \"string\",\n      \"minLength\": 2\n    },\n    \"age\": {\n      \"type\": \"integer\",\n      \"minimum\": 0,\n      \"exclusiveMinimum\": true\n    },\n    \"postalCode\": {\n      \"title\": \"Postal/Zip Code\",\n      \"type\": \"string\",\n      \"pattern\": \"[a-zA-Z][0-9][a-zA-Z]\\\\s*[0-9][a-zA-Z][0-9]|[0-9]{5}(-[0-9]{4})?\",\n      \"component\": {\n        \"properties\": {\n          \"autoValidate\": false\n        }\n      }\n    },\n    \"phoneNumbers\": {\n      \"title\": \"Phone numbers\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"phoneNumber\": {\n            \"title\": \"Phone Number\",\n            \"type\": \"string\",\n            \"component\": {\n              \"name\": \"gold-phone-input\",\n              \"valueProperty\": \"value\",\n              \"properties\": {\n                \"countryCode\": \"1\"\n              }\n            }\n          }\n        }\n      }\n    },\n    \"emailAddresses\": {\n      \"title\": \"Emails\",\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"object\",\n        \"properties\": {\n          \"type\": {\n            \"title\": \"Type\",\n            \"type\": \"string\"\n          },\n          \"email\": {\n            \"title\": \"email\",\n            \"type\": \"string\",\n            \"format\": \"email\"\n          }\n        }\n      }\n    }\n  }\n}\n```\n\nWill build a form describing an object:\n\n```\n> this.value\n{\n  \"name\": \"Eric\",\n  \"age\": 28,\n  \"postalCode\": \"H1W 2C5\",\n  \"phoneNumbers\": [\n    {\n      \"type\": \"Mobile\",\n      \"phoneNumber\": \"123-456-7890\"\n    }\n  ]\n  \"emailAddresses\": [\n    {\n      \"type\": \"Personal\",\n      \"email\": \"eric@wat.com\"\n    }\n  ]\n}\n```\n\nExternal validation is supported via the `error` property. By providing an\nobject tree with each leaf representing an error message for properties, the\nmessage will be attached to the appropriate element.\n\nExample, for the Contact schema:\n\n```\nel.error = {\n  \"name\": \"String is too short (0 chars) minimum 2\",\n  \"phoneNumbers\": [\n    {\n      \"phoneNumber\": \"String does not match required format\"\n    }\n  ]\n}\n```\n\n@group eco Elements\n@element eco-json-schema-wizard\n@demo demo/index.html\n*/\nPolymer({\n  is: \"eco-json-schema-wizard\",\n  behaviors: [AppLocalizeBehavior],\n  _template: html`\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      :host {\n        display: block;\n        @apply --layout-vertical;\n      }\n\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #fff;\n        }\n      }\n\n      .box,\n      #form {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -moz-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-align: center;\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .fullbleed {\n        z-index: 1;\n      }\n\n      app-toolbar.bottom {\n        --app-toolbar-color: var(--app-primary-color);\n        --app-toolbar-background: var(--dark-theme-text-color);\n      }\n\n      app-toolbar.bottom paper-icon-button {\n        --app-toolbar-color: var(--dark-theme-text-color);\n        --app-toolbar-background: var(--app-primary-color);\n      }\n    </style>\n    <div class=\"vertical flex layout fullbleed\">\n      <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n      <app-toolbar>\n        <paper-icon-button\n          id=\"prevButton\"\n          icon=\"arrow-back\"\n          hidden\\$=\"{{!hasPrev}}\"\n          on-tap=\"prev\"\n          raised=\"\"\n          >{{localize('prev')}}</paper-icon-button\n        ><span class=\"title layout horizontal flex\" style=\"white-space: normal\"\n          >[[title]]</span\n        >\n        <paper-icon-button\n          id=\"nextButton\"\n          icon=\"arrow-forward\"\n          hidden\\$=\"{{!hasNext}}\"\n          on-tap=\"next\"\n          raised=\"\"\n          >{{localize('next')}}</paper-icon-button\n        >\n        <paper-icon-button\n          id=\"submitButton\"\n          icon=\"cloud-upload\"\n          on-tap=\"submit\"\n          raised=\"\"\n          >{{localize('submit')}}</paper-icon-button\n        >\n      </app-toolbar>\n      <iron-pages\n        id=\"form\"\n        class=\"layout horizontal flex start-justified\"\n        role=\"main\"\n        selected=\"[[page]]\"\n        attr-for-selected=\"name\"\n      ></iron-pages>\n      <app-toolbar class=\"bottom\">\n        <div hidden\\$=\"{{!hasPrev}}\" on-tap=\"prev\">\n          <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          >\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('prev')}}</span\n          >\n        </div>\n        <span\n          class=\"title layout horizontal flex\"\n          style=\"white-space: normal\"\n        ></span>\n        <div hidden\\$=\"{{!hasNext}}\" on-tap=\"next\">\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('next')}}</span\n          >\n          <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n        </div>\n      </app-toolbar>\n    </div>\n  `,\n\n  properties: {\n    language: {\n      type: String,\n      notify: true\n    },\n    resources: {\n      type: Object,\n      notify: true\n    },\n    schema: {\n      type: Object,\n      notify: true,\n      observer: \"_schemaChanged\"\n    },\n    label: {\n      type: String\n    },\n    value: {\n      type: Object,\n      notify: true,\n      value: function() {\n        return {};\n      }\n    },\n    page: {\n      type: String,\n      notify: true,\n      observer: \"_pageChanged\"\n    },\n    pages: {\n      type: Array,\n      notify: true,\n      value: []\n    },\n    error: {\n      type: Object,\n      observer: \"_errorChanged\"\n    },\n    isReview: {\n      type: Boolean,\n      value: false,\n      notify: true\n    },\n    canSubmit: {\n      type: Boolean,\n      notify: true\n    },\n    hasNext: {\n      type: Boolean,\n      notify: true\n    },\n    hasPrev: {\n      type: Boolean,\n      notify: true\n    },\n    titles: {\n      type: Array,\n      notify: true,\n      value: []\n    },\n    title: {\n      type: String,\n      value: \"\",\n      notify: true\n    }\n  },\n  detached: function() {\n    this._clearForm();\n  },\n  _buildSchemaProperties: function() {\n    var ctx = this;\n\n    this._schemaProperties = Object.keys(this.schema.properties || []).map(\n      function(key) {\n        var schema = ctx.schema.properties[key];\n        var property = {\n          property: key,\n          label: schema.title || key,\n          schema: schema,\n          component: schema.component || {}\n        };\n\n        if (!property.component.valueProperty) {\n          property.component.valueProperty = \"value\";\n        }\n\n        if (ctx._isSchemaEnum(schema)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-enum\";\n          property.value = \"\";\n        } else if (ctx._isSchemaBoolean(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-boolean\";\n          property.value = false;\n        } else if (ctx._isSchemaFile(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-file\";\n          property.value = \"\";\n        } else if (ctx._isSchemaValue(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-input\";\n          property.value = \"\";\n        } else if (ctx._isSchemaObject(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-object\";\n          property.component.wizard = true;\n          property.value = {};\n        } else if (ctx._isSchemaArray(schema.type)) {\n          property.component.name =\n            property.component.name || \"eco-json-schema-array\";\n          property.value = [];\n        } else {\n          return console.error(\"Unknown property type %s\", schema.type);\n        }\n        ctx.push(\"pages\", key);\n        ctx.push(\"titles\", schema.title);\n\n        return property;\n      }\n    );\n  },\n  _schemaPropertyChanged: function(event, detail) {\n    if (detail.path && /\\.length$/.test(detail.path)) {\n      return;\n    }\n\n    var ctx = this;\n    var property = event.target.schemaProperty;\n    var path = [\"value\", property.property];\n\n    if (detail.path && /\\.splices$/.test(detail.path)) {\n      var parts = detail.path.split(\".\").slice(1, -1);\n      while (parts.length) {\n        path.push(parts.shift());\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n\n      if (detail.value.keySplices) {\n        if (property.keyMap) {\n          detail.value.keySplices.forEach(function(splice) {\n            splice.removed.forEach(function(k) {\n              delete property.keyMap[path.concat([k]).join(\".\")];\n            });\n          });\n        }\n      }\n\n      detail.value.indexSplices.forEach(function(splice) {\n        var args = [path.join(\".\"), splice.index, splice.removed.length];\n        if (splice.addedCount) {\n          for (var i = 0, ii = splice.addedCount; i < ii; i++) {\n            if (splice.addedKeys && splice.addedKeys[i]) {\n              property.keyMap = property.keyMap || {};\n              property.keyMap[\n                path.concat([splice.addedKeys[i]]).join(\".\")\n              ] = path.concat([i + splice.index]).join(\".\");\n            }\n            args.push(ctx._deepClone(splice.object[i + splice.index]));\n          }\n        }\n        ctx.splice.apply(ctx, args);\n      });\n    } else if (detail.path) {\n      var parts = detail.path.split(\".\").slice(1);\n      var v = this.value;\n      if (!v.hasOwnProperty(property.property)) {\n        this.set(\"value.\" + property.property, {});\n      }\n      while (parts.length) {\n        var k = parts.shift();\n        path.push(k);\n        if (property.keyMap && property.keyMap[path.join(\".\")]) {\n          path = property.keyMap[path.join(\".\")].split(\".\");\n        }\n      }\n      this.set(path.join(\".\"), this._deepClone(detail.value));\n\n      console.log(\"value: \" + JSON.stringify(this.value));\n    }\n  },\n  _setValue: function() {\n    var ctx = this;\n    var value = {};\n    this._schemaProperties.forEach(function(property) {\n      value[property.property] = ctx._deepClone(property.value);\n    });\n    this.value = value;\n  },\n  _buildForm: function() {\n    var ctx = this;\n    this._schemaProperties.forEach(property => {\n      var el = ctx.create(property.component.name, {\n        label: property.label,\n        schema: property.schema,\n        schemaProperty: property,\n        language: this.language,\n        resources: this.resources\n      });\n\n      el.setAttribute(\"name\", property.property);\n      el.className = \"flex start-justified\";\n\n      property.value = el[property.component.valueProperty];\n      ctx.listen(\n        el,\n        property.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n      dom(ctx.$.form).appendChild(el);\n    });\n  },\n  _removePropertyEl: function(el) {\n    if (typeof el.schemaProperty !== typeof undefined) {\n      this.unlisten(\n        el,\n        el.schemaProperty.component.valueProperty\n          .replace(/([A-Z])/g, \"-$1\")\n          .toLowerCase() + \"-changed\",\n        \"_schemaPropertyChanged\"\n      );\n    }\n    el.schemaProperty = null;\n    dom(this.$.form).removeChild(el);\n  },\n  _clearForm: function() {\n    var formEl = dom(this.$.form);\n    while (formEl.firstChild) {\n      this._removePropertyEl(formEl.firstChild);\n    }\n  },\n  _schemaChanged: function() {\n    this._clearForm();\n    this._buildSchemaProperties();\n    this._buildForm();\n    this._setValue();\n    if (this.pages.length > 0) {\n      this.set(\"page\", this.pages[0]);\n    }\n    this.set(\"title\", this.titles[0]);\n  },\n  next: function() {\n    var current = this.pages.indexOf(this.page);\n    var next = current;\n    if (current !== -1) {\n      if (current < this.pages.length - 1) {\n        next = current + 1;\n      }\n      this.set(\"page\", this.pages[next]);\n      this.set(\"title\", this.titles[next]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  },\n  prev: function() {\n    var current = this.pages.indexOf(this.page);\n    var prev = current;\n    if (current !== -1) {\n      if (current > 0) {\n        prev = current - 1;\n      }\n      this.set(\"page\", this.pages[prev]);\n      this.set(\"title\", this.titles[prev]);\n    } else {\n      console.log(\"Invalid current page in wizard\");\n    }\n  },\n  submit: function() {\n    this.fire(\"submit\");\n  },\n  _pageChanged: function() {\n    var current = this.pages.indexOf(this.page);\n    if (current === 0) {\n      this.set(\"hasPrev\", false);\n    } else {\n      this.set(\"hasPrev\", true);\n    }\n    if (current === this.pages.length - 1) {\n      this.set(\"hasNext\", false);\n    } else {\n      this.set(\"hasNext\", true);\n    }\n  },\n  _errorChanged: function() {\n    var ctx = this;\n    dom(this.$.form).childNodes.forEach(function(el) {\n      var name = el.getAttribute(\"name\");\n      if (ctx.error && ctx.error[name]) {\n        el.error = ctx.error[name];\n      } else {\n        el.error = null;\n      }\n    });\n  },\n  _deepClone: function(o) {\n    return JSON.parse(JSON.stringify(o));\n  },\n  _isSchemaValue: function(type) {\n    return (\n      this._isSchemaBoolean(type) ||\n      this._isSchemaNumber(type) ||\n      this._isSchemaString(type) ||\n      this._isSchemaFile(type)\n    );\n  },\n  _isSchemaFile: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"file\") !== -1;\n    } else {\n      return type === \"file\";\n    }\n  },\n  _isSchemaBoolean: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"boolean\") !== -1;\n    } else {\n      return type === \"boolean\";\n    }\n  },\n  _isSchemaEnum: function(schema) {\n    return !!schema.enum;\n  },\n  _isSchemaNumber: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"number\") !== -1 || type.indexOf(\"integer\") !== -1;\n    } else {\n      return type === \"number\" || type === \"integer\";\n    }\n  },\n  _isSchemaString: function(type) {\n    if (Array.isArray(type)) {\n      return type.indexOf(\"string\") !== -1;\n    } else {\n      return type === \"string\";\n    }\n  },\n  _isSchemaObject: function(type) {\n    return type === \"object\";\n  },\n  _isSchemaArray: function(type) {\n    return type === \"array\";\n  }\n});\n"],"names":["is","_template","html","properties","schema","type","Object","observer","value","Boolean","notify","error","_label","String","ready","detached","_schemaChanged","this","inputEl","$","checkbox","component","keys","forEach","prop","title","_isSchemaValue","_isSchemaBoolean","_isSchemaNumber","_isSchemaString","Array","isArray","indexOf","_isSchemaObject","_isSchemaArray","behaviors","IronValidatableBehavior","_items","dropdown","enum","filter","item","label","_errorChanged","invalid","AppLocalizeBehavior","language","resources","input","required","multipleOf","step","isNaN","maximum","exclusiveMaximum","max","minimum","exclusiveMinimum","min","format","alwaysFloatLabel","maxLength","maxlength","minLength","minlength","pattern","errorMessage","target","accept","droppable","dropText","multi","files","raised","noink","headers","retryText","removeText","successText","errorText","_shownDropText","additional","fileDataName","paperButtonAlt","paperButtonTitle","clear","set","fileInput","_showDropText","toggleAttribute","button","setupDrop","uploadBorder","UploadBorder","toggleClass","ondragover","e","stopPropagation","effect","dataTransfer","dropEffect","effectAllowed","ondragleave","ondrop","event","preventDefault","length","i","file","mimeType","match","fileType","name","progress","complete","push","uploadFile","_fileClick","elem","document","createEvent","evt","initEvent","dispatchEvent","_fileChange","cancel","xhr","abort","splice","_cancelUpload","model","__data__","_retryUpload","self","async","run","fire","reader","FileReader","addEventListener","r","result","attributes","hasOwnProperty","readAsDataURL","_valueChanged","console","log","JSON","stringify","_isSchemaFile","s","_schemaArrayItems","observers","newValue","oldValue","_typeof","setTimeout","_this","_buildSchemaArrayItems","_onAddItemWithValue","parseInt","_clearForm","_setValue","map","_schemaArraySplicesChanged","detail","warn","ctx","keySplices","indexSplices","args","index","removed","ii","_removeArrayEl","form","children","addedCount","object","componentEl","create","schemaArrayItem","containerEl","header","buttonEl","icon","listen","classList","add","dom","appendChild","beforeEl","insertBefore","valueProperty","replace","toLowerCase","_deepClone","apply","_schemaArrayItemChanged","path","test","concat","split","slice","join","notifyPath","el","polyEl","childNodes","unlisten","firstChild","removeChild","formEl","rowEl","idx","values","pointer","items","_isSchemaEnum","_onAddItem","_onRemoveItem","localTarget","previousSibling","o","parse","wizard","_buildSchemaProperties","_schemaProperties","key","property","slot","_schemaPropertyChanged","schemaProperty","parts","shift","keyMap","k","addedKeys","_buildForm","attr","style","setAttribute","className","temp","createElement","innerHTML","_removePropertyEl","getAttribute","page","pages","isReview","canSubmit","hasNext","hasPrev","titles","next","current","prev","submit","_pageChanged"],"mappings":"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"}