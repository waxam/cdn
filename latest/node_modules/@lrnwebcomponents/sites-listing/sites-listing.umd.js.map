{"version":3,"file":"sites-listing.umd.js","sources":["lib/site-card.js","sites-listing.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/paper-card/paper-card.js\";\nimport \"@polymer/iron-icon/iron-icon.js\";\nimport \"@polymer/iron-image/iron-image.js\";\n/**\n * `site-card`\n * `A simple card for representing a site`\n * @demo demo/index.html\n */\nPolymer({\n  _template: html`\n    <style>\n      :host {\n        display: inline-flex;\n        min-width: 250px;\n      }\n      :host(:focus) {\n        outline: none;\n      }\n\n      :host([size=\"micro\"]) {\n        transform: scale(0.5);\n      }\n\n      :host([size=\"small\"]) {\n        transform: scale(0.8);\n      }\n\n      paper-card {\n        border-radius: 4px;\n        margin: 0;\n        width: 100%;\n      }\n\n      .card-actions {\n        background-color: #f5f5f5;\n        border-radius: 0 0 4px 4px;\n        padding: 0 8px;\n      }\n\n      .card-actions .card-action-details {\n        display: inline-block;\n        vertical-align: middle;\n        vertical-align: -webkit-baseline-middle;\n        width: 80%;\n      }\n\n      .card-control-height {\n        height: 240px;\n      }\n\n      [elevation=\"0\"] {\n        border: solid 1px #eeeeee;\n      }\n\n      .text-right {\n        text-align: right;\n      }\n\n      .text-left {\n        text-align: left;\n      }\n\n      .name,\n      .title {\n        color: #222;\n        font-size: 12.8px;\n        font-weight: 600;\n        line-height: 20px;\n        padding: 0 12px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin-top: 8px;\n      }\n\n      .title {\n        font-size: 11.2px;\n        font-weight: 400;\n      }\n\n      .divider {\n        height: 1px;\n        width: 100%;\n        background: #efefef;\n      }\n\n      .site-icon {\n        display: inline-block;\n        vertical-align: text-top;\n        transform: scale(0.8);\n        --iron-icon-height: 100%;\n        --iron-icon-width: 100%;\n        overflow: hidden;\n        color: grey;\n        margin: -16px 8px 0 0;\n        position: absolute;\n        right: 0;\n      }\n\n      .site-icon:hover,\n      .site-icon:focus {\n        color: black;\n      }\n\n      .center {\n        margin: auto;\n        width: 80%;\n        padding: 16px;\n      }\n\n      .link {\n        font-size: 16px;\n        line-height: 16px;\n      }\n\n      .site-info {\n        width: 100%;\n      }\n\n      .site-preview {\n        height: 160px;\n      }\n      .card-content {\n        padding: 0;\n        margin: 0;\n        overflow: hidden;\n      }\n\n      .inline {\n        display: inline;\n      }\n    </style>\n    <paper-card elevation=\"[[elevation]]\">\n      <div class=\"card-content card-control-height card-control-center\">\n        <div class=\"site-preview\">\n          <iron-image\n            style=\"width:100%; height:100%; background-color: lightgray;\"\n            sizing=\"cover\"\n            preload=\"\"\n            fade=\"\"\n            src=\"[[image]]\"\n            hidden\\$=\"[[!image]]\"\n          ></iron-image>\n        </div>\n        <iron-icon\n          class=\"site-icon\"\n          icon=\"[[icon]]\"\n          hidden\\$=\"[[!icon]]\"\n        ></iron-icon>\n        <div class=\"site-info\">\n          <div class=\"divider\"></div>\n          <div class=\"name\">[[name]]</div>\n          <div class=\"title\">[[title]]</div>\n        </div>\n      </div>\n      <div class=\"card-actions\" hidden=\"\">\n        <div class=\"card-action-details\"></div>\n      </div>\n    </paper-card>\n  `,\n\n  is: \"site-card\",\n\n  listeners: {\n    mouseover: \"_mouseEnter\",\n    mousedown: \"_mouseEnter\",\n    mouseleave: \"_mouseLeave\",\n    mouseout: \"_mouseLeave\",\n    focusin: \"_mouseEnter\",\n    focusout: \"_mouseLeave\"\n  },\n\n  properties: {\n    /**\n     * Scale of the card.\n     */\n    size: {\n      type: String,\n      reflectToAttribute: true\n    },\n    /**\n     * Cover image src.\n     */\n    image: {\n      type: String\n    },\n    /**\n     * Icon to use if image isn't there.\n     */\n    icon: {\n      type: String,\n      value: false\n    },\n    /**\n     * name of the course like sing100\n     */\n    name: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * title of the course like Intro to studies\n     */\n    title: {\n      type: String,\n      value: \"\"\n    },\n    /**\n     * Visual elevation of the item off the UI via paper element height\n     */\n    elevation: {\n      type: Number,\n      value: 1,\n      reflectToAttribute: true\n    }\n  },\n\n  /**\n   * Increase elevation while hovering.\n   */\n  _mouseEnter: function(e) {\n    this.__oldElevation = this.elevation;\n    if (this.elevation + 2 > 5) {\n      this.elevation = 5;\n    } else {\n      this.elevation += 2;\n    }\n  },\n\n  /**\n   * Reset the elevation.\n   */\n  _mouseLeave: function(e) {\n    this.elevation = this.__oldElevation;\n  }\n});\n","/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport { dom } from \"@polymer/polymer/lib/legacy/polymer.dom.js\";\nimport \"@polymer/iron-ajax/iron-ajax.js\";\nimport \"@polymer/iron-list/iron-list.js\";\nimport \"@polymer/paper-button/paper-button.js\";\nimport \"@lrnwebcomponents/elmsln-loading/elmsln-loading.js\";\nimport \"./lib/site-card.js\";\n/**\n * `sites-listing`\n * A LRN element\n *\n * @demo demo/index.html\n *\n * @microcopy - the mental model for this element\n * -\n */\nlet SitesListing = Polymer({\n  _template: html`\n    <style>\n      :host {\n        height: 100vh;\n        display: flex;\n        flex-direction: column;\n      }\n      iron-list {\n        flex: 1 1 auto;\n      }\n      #loading {\n        width: 100%;\n        z-index: 1000;\n        opacity: 0.8;\n        padding: 16px;\n        text-align: center;\n        align-content: center;\n        justify-content: center;\n        height: 100vh;\n        position: absolute;\n        background-color: rgba(250, 250, 250, 0.8);\n        transition: all linear 0.8s;\n        visibility: visible;\n      }\n      #loading div {\n        font-size: 32px;\n        font-weight: bold;\n        padding: 16px;\n      }\n      #loading[data-loading] {\n        background-color: rgba(0, 0, 0, 0);\n        opacity: 0;\n        visibility: hidden;\n      }\n      site-card {\n        padding: 16px;\n      }\n      paper-button.site-card-wrapper {\n        margin: 0;\n        padding: 0;\n      }\n    </style>\n    <iron-ajax\n      auto=\"\"\n      loading=\"{{__loading}}\"\n      url=\"[[dataSource]]\"\n      handle-as=\"json\"\n      debounce-duration=\"250\"\n      last-response=\"{{sites}}\"\n    ></iron-ajax>\n    <div id=\"loading\" data-loading\\$=\"[[!__loading]]\">\n      <elmsln-loading></elmsln-loading>\n      <div>Loading..</div>\n    </div>\n    <iron-list id=\"list\" items=\"[[sites]]\" as=\"site\" grid=\"\">\n      <template>\n        <paper-button\n          on-focusin=\"_mouseEnter\"\n          on-focusout=\"_mouseLeave\"\n          data-site-id\\$=\"[[site.id]]\"\n          class=\"site-card-wrapper\"\n          on-tap=\"_siteClicked\"\n        >\n          <site-card\n            data-site-id\\$=\"[[site.id]]\"\n            size=\"[[size]]\"\n            image=\"[[site.image]]\"\n            icon=\"[[site.icon]]\"\n            name=\"[[site.name]]\"\n            title=\"[[site.title]]\"\n            elevation=\"2\"\n          ></site-card>\n        </paper-button>\n      </template>\n    </iron-list>\n  `,\n  is: \"sites-listing\",\n  properties: {\n    /**\n     * Array of site objects\n     */\n    sites: {\n      type: Array\n    },\n    /**\n     * Size of the cards\n     */\n    size: {\n      type: String,\n      value: \"large\"\n    },\n    /**\n     * Data Source to power the loading of sites in JSON Outline Schema format.\n     */\n    dataSource: {\n      type: String\n    }\n  },\n  /**\n   * Handle tap on paper-button above to redirect to the correct data.\n   */\n  _siteClicked: function(e) {\n    var normalizedEvent = dom(e);\n    var local = normalizedEvent.localTarget;\n    // this will have the id of the current course\n    var active = local.getAttribute(\"data-site-id\");\n    // find the course by it's unique id and filter just to it\n    let findSite = this.sites.filter(site => {\n      if (site.id !== active) {\n        return false;\n      }\n      return true;\n    });\n    // if we found one, make it the top level item\n    if (findSite.length > 0) {\n      findSite = findSite.pop();\n    }\n    // double check we have a URI\n    if (typeof findSite.location !== typeof undefined) {\n      window.location.href = findSite.location;\n    }\n  },\n  /**\n   * Increase elevation while hovering.\n   */\n  _mouseEnter: function(e) {\n    let card = dom(e.target).querySelectorAll(\"site-card\")[0];\n    card.__oldElevation = card.elevation;\n    if (card.elevation + 2 > 5) {\n      card.elevation = 5;\n    } else {\n      card.elevation += 2;\n    }\n  },\n\n  /**\n   * Reset the elevation.\n   */\n  _mouseLeave: function(e) {\n    let card = dom(e.target).querySelectorAll(\"site-card\")[0];\n    card.elevation = card.__oldElevation;\n  }\n});\nexport { SitesListing };\n"],"names":["_template","html","is","listeners","mouseover","mousedown","mouseleave","mouseout","focusin","focusout","properties","size","type","String","reflectToAttribute","image","icon","value","name","title","elevation","Number","_mouseEnter","e","__oldElevation","this","_mouseLeave","SitesListing","Polymer","sites","Array","dataSource","_siteClicked","active","dom","localTarget","getAttribute","findSite","filter","site","id","length","pop","_typeof","location","window","href","card","target","querySelectorAll"],"mappings":"6+WAaQ,CACNA,UAAWC,YAuJXC,GAAI,YAEJC,UAAW,CACTC,UAAW,cACXC,UAAW,cACXC,WAAY,cACZC,SAAU,cACVC,QAAS,cACTC,SAAU,eAGZC,WAAY,CAIVC,KAAM,CACJC,KAAMC,OACNC,oBAAoB,GAKtBC,MAAO,CACLH,KAAMC,QAKRG,KAAM,CACJJ,KAAMC,OACNI,OAAO,GAKTC,KAAM,CACJN,KAAMC,OACNI,MAAO,IAKTE,MAAO,CACLP,KAAMC,OACNI,MAAO,IAKTG,UAAW,CACTR,KAAMS,OACNJ,MAAO,EACPH,oBAAoB,IAOxBQ,YAAa,SAASC,QACfC,eAAiBC,KAAKL,UACvBK,KAAKL,UAAY,EAAI,OAClBA,UAAY,OAEZA,WAAa,GAOtBM,YAAa,SAASH,QACfH,UAAYK,KAAKD,sBCzNtBG,EAAeC,UAAQ,CACzB5B,UAAWC,YA4EXC,GAAI,gBACJQ,WAAY,CAIVmB,MAAO,CACLjB,KAAMkB,OAKRnB,KAAM,CACJC,KAAMC,OACNI,MAAO,SAKTc,WAAY,CACVnB,KAAMC,SAMVmB,aAAc,SAAST,OAIjBU,EAHkBC,MAAIX,GACEY,YAETC,aAAa,gBAE5BC,EAAWZ,KAAKI,MAAMS,OAAO,SAAAC,UAC3BA,EAAKC,KAAOP,IAMdI,EAASI,OAAS,IACpBJ,EAAWA,EAASK,qBAGlBC,EAAON,EAASO,YAClBC,OAAOD,SAASE,KAAOT,EAASO,WAMpCtB,YAAa,SAASC,OAChBwB,EAAOb,MAAIX,EAAEyB,QAAQC,iBAAiB,aAAa,GACvDF,EAAKvB,eAAiBuB,EAAK3B,UACvB2B,EAAK3B,UAAY,EAAI,EACvB2B,EAAK3B,UAAY,EAEjB2B,EAAK3B,WAAa,GAOtBM,YAAa,SAASH,OAChBwB,EAAOb,MAAIX,EAAEyB,QAAQC,iBAAiB,aAAa,GACvDF,EAAK3B,UAAY2B,EAAKvB"}