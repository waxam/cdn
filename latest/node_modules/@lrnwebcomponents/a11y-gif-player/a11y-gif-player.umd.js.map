{"version":3,"file":"a11y-gif-player.umd.js","sources":["a11y-gif-player.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\nimport \"@polymer/iron-a11y-keys/iron-a11y-keys.js\";\nimport \"@polymer/iron-image/iron-image.js\";\nimport \"@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js\";\nimport \"@lrnwebcomponents/schema-behaviors/schema-behaviors.js\";\n/**\n * `a11y-gif-player`\n * `Play gifs in an accessible way by having the user click to play their animation`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @polymerLegacy\n * @demo demo/index.html\n */\nlet A11yGifPlayer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n      :host #gifbutton > * {\n        position: relative;\n      }\n      :host #svg {\n        position: absolute;\n        top: 35%;\n        left: 35%;\n      }\n      :host #gifbutton:active,\n      :host #gifbutton:focus,\n      :host #gifbutton:hover {\n        cursor: pointer;\n        outline: 1px solid blue;\n      }\n      :host #preload {\n        display: none;\n      }\n    </style>\n    <div id=\"gifbutton\" aria-role=\"button\" aria-controls=\"gif\" tabindex=\"0\">\n      <div>\n        <img\n          id=\"gif\"\n          alt\\$=\"[[alt]]\"\n          src\\$=\"[[srcWithoutAnimation]]\"\n          style=\"width:100%;height:100%;\"\n        />\n        <svg\n          id=\"svg\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 200 200\"\n          width=\"30%\"\n          height=\"30%\"\n        >\n          <g opacity=\".5\">\n            <polygon\n              points=\"30,20 30,180 170,100\"\n              fill=\"#000000\"\n              stroke=\"#ffffff\"\n              stroke-width=\"15px\"\n            ></polygon>\n            <text x=\"50\" y=\"115\" fill=\"#ffffff\" font-size=\"40px\">GIF</text>\n          </g>\n        </svg>\n      </div>\n    </div>\n    <iron-image id=\"preload\" src\\$=\"[[src]]\" hidden=\"\"></iron-image>\n    <iron-a11y-keys\n      id=\"a11y\"\n      keys=\"enter space\"\n      on-keys-pressed=\"toggleAnimation\"\n    ></iron-a11y-keys>\n  `,\n\n  is: \"a11y-gif-player\",\n  behaviors: [HAXBehaviors.PropertiesBehaviors, SchemaBehaviors.Schema],\n\n  listeners: {\n    tap: \"toggleAnimation\"\n  },\n\n  properties: {\n    /**\n     * Source of the animated gif\n     */\n    src: {\n      type: String,\n      value: null\n    },\n    /**\n     * Source of a version that is not animated\n     */\n    srcWithoutAnimation: {\n      type: String,\n      value: null\n    },\n    /**\n     * Alt text of the gif\n     */\n    alt: {\n      type: String,\n      value: null\n    }\n  },\n\n  /**\n   * Ready life cycle\n   */\n  ready: function() {\n    this.stop();\n    this.$.a11y.target = this.$.gifbutton;\n  },\n\n  /**\n   * plays the animation regarless of previous state\n   */\n  play: function() {\n    this.__stopped = true;\n    this.toggleAnimation();\n  },\n\n  /**\n   * stops the animation regarless of previous state\n   */\n  stop: function() {\n    this.__stopped = false;\n    this.toggleAnimation();\n  },\n\n  /**\n   * toggles the animation based on current state\n   */\n  toggleAnimation: function() {\n    if (this.__stopped) {\n      this.__stopped = false;\n      this.$.svg.style.visibility = \"hidden\";\n      if (this.src != null) {\n        this.$.gif.src = this.src;\n      }\n      this.$.gif.alt = this.alt + \" (Stop animation.)\";\n    } else {\n      this.__stopped = true;\n      this.$.svg.style.visibility = \"visible\";\n      if (this.srcWithoutAnimation != null) {\n        this.$.gif.src = this.srcWithoutAnimation;\n      }\n      this.$.gif.alt = this.alt + \" (Play animation.)\";\n    }\n  },\n\n  /**\n   * wire it for hax-body\n   */\n  attached: function() {\n    // Establish hax properties if they exist\n    let props = {\n      canScale: true,\n      canPosition: true,\n      canEditSource: false,\n      gizmo: {\n        title: \"Accessible GIF\",\n        description: \"Makes animated GIFs accessible.\",\n        icon: \"gif\",\n        color: \"grey\",\n        groups: [\"Images\", \"Media\"],\n        handles: [\n          {\n            type: \"image\",\n            source: \"src\",\n            source2: \"srcWithoutAnimation\",\n            alt: \"alt\"\n          }\n        ],\n        meta: {\n          author: \"LRNWebComponents\"\n        }\n      },\n      settings: {\n        quick: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"textfield\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        configure: [\n          {\n            property: \"src\",\n            title: \"Animated GIF\",\n            description: \"The URL to your animated GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"srcWithoutAnimation\",\n            title: \"Still Image\",\n            description: \"The URL to a still image version of your GIF.\",\n            inputMethod: \"textfield\",\n            icon: \"link\",\n            validationType: \"url\",\n            required: true\n          },\n          {\n            property: \"alt\",\n            title: \"Alt Text\",\n            description: \"Alternative text for the image.\",\n            inputMethod: \"textfield\",\n            icon: \"accessibility\",\n            required: true\n          }\n        ],\n        advanced: []\n      }\n    };\n    this.setHaxProperties(props);\n  }\n});\nexport { A11yGifPlayer };\n"],"names":["A11yGifPlayer","Polymer","_template","html","is","behaviors","HAXBehaviors","PropertiesBehaviors","SchemaBehaviors","Schema","listeners","tap","properties","src","type","String","value","srcWithoutAnimation","alt","ready","stop","$","a11y","target","this","gifbutton","play","__stopped","toggleAnimation","svg","style","visibility","gif","attached","setHaxProperties","canScale","canPosition","canEditSource","gizmo","title","description","icon","color","groups","handles","source","source2","meta","author","settings","quick","property","inputMethod","validationType","required","configure","advanced"],"mappings":"grHAqBIA,EAAgBC,UAAQ,CAC1BC,UAAWC,YA0DXC,GAAI,kBACJC,UAAW,CAACC,aAAaC,oBAAqBC,gBAAgBC,QAE9DC,UAAW,CACTC,IAAK,mBAGPC,WAAY,CAIVC,IAAK,CACHC,KAAMC,OACNC,MAAO,MAKTC,oBAAqB,CACnBH,KAAMC,OACNC,MAAO,MAKTE,IAAK,CACHJ,KAAMC,OACNC,MAAO,OAOXG,MAAO,gBACAC,YACAC,EAAEC,KAAKC,OAASC,KAAKH,EAAEI,WAM9BC,KAAM,gBACCC,WAAY,OACZC,mBAMPR,KAAM,gBACCO,WAAY,OACZC,mBAMPA,gBAAiB,WACXJ,KAAKG,gBACFA,WAAY,OACZN,EAAEQ,IAAIC,MAAMC,WAAa,SACd,MAAZP,KAAKX,WACFQ,EAAEW,IAAInB,IAAMW,KAAKX,UAEnBQ,EAAEW,IAAId,IAAMM,KAAKN,IAAM,4BAEvBS,WAAY,OACZN,EAAEQ,IAAIC,MAAMC,WAAa,UACE,MAA5BP,KAAKP,2BACFI,EAAEW,IAAInB,IAAMW,KAAKP,0BAEnBI,EAAEW,IAAId,IAAMM,KAAKN,IAAM,uBAOhCe,SAAU,gBAoFHC,iBAlFO,CACVC,UAAU,EACVC,aAAa,EACbC,eAAe,EACfC,MAAO,CACLC,MAAO,iBACPC,YAAa,kCACbC,KAAM,MACNC,MAAO,OACPC,OAAQ,CAAC,SAAU,SACnBC,QAAS,CACP,CACE9B,KAAM,QACN+B,OAAQ,MACRC,QAAS,sBACT5B,IAAK,QAGT6B,KAAM,CACJC,OAAQ,qBAGZC,SAAU,CACRC,MAAO,CACL,CACEC,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,YACbX,KAAM,gBACNa,UAAU,IAGdC,UAAW,CACT,CACEJ,SAAU,MACVZ,MAAO,eACPC,YAAa,gCACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,sBACVZ,MAAO,cACPC,YAAa,gDACbY,YAAa,YACbX,KAAM,OACNY,eAAgB,MAChBC,UAAU,GAEZ,CACEH,SAAU,MACVZ,MAAO,WACPC,YAAa,kCACbY,YAAa,YACbX,KAAM,gBACNa,UAAU,IAGdE,SAAU"}