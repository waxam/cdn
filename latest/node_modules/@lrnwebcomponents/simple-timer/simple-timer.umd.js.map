{"version":3,"file":"simple-timer.umd.js","sources":["simple-timer.umd.js"],"sourcesContent":["/**\n * Copyright 2018 The Pennsylvania State University\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, Polymer } from \"@polymer/polymer/polymer-legacy.js\";\n\n/**\n * `simple-timer`\n * `Automated conversion of simple-timer/`\n *\n * @microcopy - language worth noting:\n *  -\n *\n * @customElement\n * @polymer\n * @demo demo/index.html\n */\nlet SimpleTimer = Polymer({\n  _template: html`\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    {{_formattedTime}}\n  `,\n  is: \"simple-timer\",\n  properties: {\n    /**\n     * Start time for the timer in seconds\n     */\n    startTime: {\n      type: Number,\n      value: 60\n    },\n    /**\n     * Current time of the timer, in seconds\n     */\n    currentTime: {\n      type: Number,\n      notify: true\n    },\n    /**\n     * True if the timer is currently running\n     */\n    isRunning: {\n      type: Boolean,\n      reflectToAttribute: true,\n      notify: true,\n      value: false\n    },\n    /**\n     * Set to true to have timer count up\n     */\n    countUp: {\n      type: Boolean,\n      value: false\n    },\n    /**\n     * Time the timer has spent running since it was started\n     */\n    _elapsedTime: {\n      type: Number,\n      value: 0\n    },\n    _formattedTime: {\n      type: String,\n      value: \"0\"\n    }\n  },\n  ready: function() {\n    if (this.countUp) {\n      this.set(\"currentTime\", 0);\n      this.set(\"_formattedTime\", \"0\");\n    } else {\n      this.set(\"currentTime\", this.startTime);\n      this.set(\"_formattedTime\", this.startTime.toString());\n    }\n  },\n  start: function() {\n    if (\n      (this.currentTime <= 0 && !this.countUp) ||\n      (this.currentTime >= this.startTime && this.countUp)\n    ) {\n      // timer is over\n      this.currentTime = this.countUp ? this.startTime : 0;\n    }\n    if (!this.startTime || this.isRunning) {\n      this.pause();\n      return;\n    }\n    this._elapsed = performance.now() / 1000;\n    this.isRunning = true;\n    window.requestAnimationFrame(this._decreaseTimer.bind(this));\n  },\n  pause: function() {\n    this.isRunning = false;\n  },\n  _decreaseTimer: function(timestamp) {\n    if (!this.isRunning) {\n      return;\n    }\n    if (\n      (this.currentTime <= 0 && !this.countUp) ||\n      (this.currentTime >= this.startTime && this.countUp)\n    ) {\n      // timer is over\n      this.currentTime = this.countUp ? this.startTime : 0;\n      this.pause();\n      this.fire(\"simple-timer-end\");\n      return;\n    }\n    var now = timestamp / 1000;\n    // Compute the relative progress based on the time spent running\n    var progress = now - this._elapsed;\n    this.currentTime = this.countUp\n      ? this.currentTime + progress\n      : this.currentTime - progress;\n    this._formattedTime = this._formatTime(this.currentTime);\n    this._elapsed = now;\n    window.requestAnimationFrame(this._decreaseTimer.bind(this));\n  },\n  _formatTime: function(time) {\n    var timeString = time.toString().split(\".\");\n    return timeString[0].indexOf(\"-\") === 0\n      ? 0\n      : timeString[0] + \".\" + timeString[1].substring(0, 2);\n  }\n});\nexport { SimpleTimer };\n"],"names":["SimpleTimer","Polymer","_template","html","is","properties","startTime","type","Number","value","currentTime","notify","isRunning","Boolean","reflectToAttribute","countUp","_elapsedTime","_formattedTime","String","ready","this","set","toString","start","_elapsed","performance","now","window","requestAnimationFrame","_decreaseTimer","bind","pause","timestamp","fire","progress","_formatTime","time","timeString","split","indexOf","substring"],"mappings":"6iBAiBIA,EAAcC,UAAQ,CACxBC,UAAWC,YAQXC,GAAI,eACJC,WAAY,CAIVC,UAAW,CACTC,KAAMC,OACNC,MAAO,IAKTC,YAAa,CACXH,KAAMC,OACNG,QAAQ,GAKVC,UAAW,CACTL,KAAMM,QACNC,oBAAoB,EACpBH,QAAQ,EACRF,OAAO,GAKTM,QAAS,CACPR,KAAMM,QACNJ,OAAO,GAKTO,aAAc,CACZT,KAAMC,OACNC,MAAO,GAETQ,eAAgB,CACdV,KAAMW,OACNT,MAAO,MAGXU,MAAO,WACDC,KAAKL,cACFM,IAAI,cAAe,QACnBA,IAAI,iBAAkB,YAEtBA,IAAI,cAAeD,KAAKd,gBACxBe,IAAI,iBAAkBD,KAAKd,UAAUgB,cAG9CC,MAAO,YAEFH,KAAKV,aAAe,IAAMU,KAAKL,SAC/BK,KAAKV,aAAeU,KAAKd,WAAac,KAAKL,gBAGvCL,YAAcU,KAAKL,QAAUK,KAAKd,UAAY,GAEhDc,KAAKd,YAAac,KAAKR,gBAIvBY,SAAWC,YAAYC,MAAQ,SAC/Bd,WAAY,EACjBe,OAAOC,sBAAsBR,KAAKS,eAAeC,KAAKV,aAL/CW,SAOTA,MAAO,gBACAnB,WAAY,GAEnBiB,eAAgB,SAASG,MAClBZ,KAAKR,cAIPQ,KAAKV,aAAe,IAAMU,KAAKL,SAC/BK,KAAKV,aAAeU,KAAKd,WAAac,KAAKL,oBAGvCL,YAAcU,KAAKL,QAAUK,KAAKd,UAAY,OAC9CyB,kBACAE,KAAK,wBAGRP,EAAMM,EAAY,IAElBE,EAAWR,EAAMN,KAAKI,cACrBd,YAAcU,KAAKL,QACpBK,KAAKV,YAAcwB,EACnBd,KAAKV,YAAcwB,OAClBjB,eAAiBG,KAAKe,YAAYf,KAAKV,kBACvCc,SAAWE,EAChBC,OAAOC,sBAAsBR,KAAKS,eAAeC,KAAKV,SAExDe,YAAa,SAASC,OAChBC,EAAaD,EAAKd,WAAWgB,MAAM,YACD,IAA/BD,EAAW,GAAGE,QAAQ,KACzB,EACAF,EAAW,GAAK,IAAMA,EAAW,GAAGG,UAAU,EAAG"}