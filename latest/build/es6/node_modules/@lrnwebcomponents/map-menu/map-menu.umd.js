!function(j,k){"object"==typeof exports&&"undefined"!=typeof module?k(exports,require("@lrnwebcomponents/smooth-scroll/smooth-scroll.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js"),require("@polymer/iron-icon/iron-icon.js"),require("@polymer/iron-behaviors/iron-button-state.js"),require("@polymer/iron-collapse/iron-collapse.js"),require("@polymer/paper-button/paper-button.js"),require("@polymer/polymer/polymer-legacy.js")):"function"==typeof define&&define.amd?define(["exports","@lrnwebcomponents/smooth-scroll/smooth-scroll.js","@polymer/iron-icons/iron-icons.js","@polymer/polymer/lib/legacy/polymer.dom.js","@lrnwebcomponents/lrndesign-avatar/lrndesign-avatar.js","@polymer/iron-icon/iron-icon.js","@polymer/iron-behaviors/iron-button-state.js","@polymer/iron-collapse/iron-collapse.js","@polymer/paper-button/paper-button.js","@polymer/polymer/polymer-legacy.js"],k):k(j.MapMenu={},null,null,j.polymer_dom_js,null,null,null,null,null,j.polymerLegacy_js)}(this,function(j,k,q,w,x,z,A,B,C,D){"use strict";function E(O,P,Q){return P in O?Object.defineProperty(O,P,{value:Q,enumerable:!0,configurable:!0,writable:!0}):O[P]=Q,O}function F(O,P){return P||(P=O.slice(0)),Object.freeze(Object.defineProperties(O,{raw:{value:Object.freeze(P)}}))}function G(){var O=F(["\n    <style>\n      :host {\n        display: block;\n        --map-menu-item-height: 16px;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      iron-icon {\n        display: inline-block;\n        --iron-icon-height: var(--map-menu-item-height);\n      }\n\n      #title {\n        font-size: 14.4px;\n        text-transform: none;\n      }\n    </style>\n    <paper-button\n      id=\"wrapper\"\n      href$=\"[[url]]\"\n      role=\"link\"\n      noink\n      on-tap=\"_click\"\n    >\n      <template is=\"dom-if\" if=\"[[__hasIcon(icon)]]\">\n        <iron-icon icon=\"[[icon]]\"></iron-icon>\n      </template>\n      <span id=\"title\">[[title]]</span>\n    </paper-button>\n  "]);return G=function(){return O},O}function H(){var O=F(["\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: 16px;\n        transform: translateX(10px);\n      }\n    </style>\n    <div id=\"container\">\n      <template is=\"dom-if\" if=\"[[avatarLabel]]\">\n        <div id=\"avatarLabel\">\n          <lrndesign-avatar label=\"[[avatarLabel]]\"></lrndesign-avatar>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[icon]]\">\n        <div id=\"icon\"><iron-icon icon=\"[[icon]]\"></iron-icon></div>\n      </template>\n      <div id=\"center\">\n        <paper-button\n          id=\"title\"\n          noink=\"\"\n          role$=\"[[__titleRole()]]\"\n          on-tap=\"__linkClickHandler\"\n        >\n          <div id=\"label\">[[label]]</div>\n          <div id=\"title\">[[title]]</div>\n        </paper-button>\n      </div>\n      <div id=\"right\">\n        <template is=\"dom-if\" if=\"[[!opened]]\">\n          <iron-icon\n            id=\"toggle\"\n            icon=\"arrow-drop-down\"\n            aria-role=\"button\"\n            aria-label=\"expand menu\"\n            tabindex=\"0\"\n          ></iron-icon>\n        </template>\n        <template is=\"dom-if\" if=\"[[opened]]\">\n          <iron-icon\n            id=\"toggle\"\n            icon=\"arrow-drop-up\"\n            aria-role=\"button\"\n            aria-label=\"collapse menu\"\n            tabindex=\"0\"\n          ></iron-icon>\n        </template>\n      </div>\n    </div>\n  "],["\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([active]) {\n        background: var(--map-menu-active-color);\n      }\n\n      #container {\n        display: flex;\n        align-items: center;\n      }\n\n      #avatarLabel {\n        margin-right: 10px;\n      }\n\n      #center {\n        flex: 1 1 auto;\n      }\n\n      lrndesign-avatar {\n        display: inline-block;\n        background: #fff;\n        border-radius: 50%;\n        box-shadow: 0 1px 1px rgba(0, 0, 0, 0.3);\n        padding: 2px;\n        position: relative;\n        margin-top: -2px;\n        transform: translateY(2px);\n      }\n\n      #link {\n        display: flex;\n        justify-content: flex-start;\n        align-items: flex-start;\n        flex-direction: column;\n      }\n\n      #title {\n        font-size: 16px;\n      }\n\n      #right iron-icon {\n        display: inline-block;\n        color: gray;\n      }\n\n      /* @todo this is a hack */\n      #icon iron-icon {\n        display: inline-block;\n        --iron-icon-height: 16px;\n        transform: translateX(10px);\n      }\n    </style>\n    <div id=\"container\">\n      <template is=\"dom-if\" if=\"[[avatarLabel]]\">\n        <div id=\"avatarLabel\">\n          <lrndesign-avatar label=\"[[avatarLabel]]\"></lrndesign-avatar>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[icon]]\">\n        <div id=\"icon\"><iron-icon icon=\"[[icon]]\"></iron-icon></div>\n      </template>\n      <div id=\"center\">\n        <paper-button\n          id=\"title\"\n          noink=\"\"\n          role\\$=\"[[__titleRole()]]\"\n          on-tap=\"__linkClickHandler\"\n        >\n          <div id=\"label\">[[label]]</div>\n          <div id=\"title\">[[title]]</div>\n        </paper-button>\n      </div>\n      <div id=\"right\">\n        <template is=\"dom-if\" if=\"[[!opened]]\">\n          <iron-icon\n            id=\"toggle\"\n            icon=\"arrow-drop-down\"\n            aria-role=\"button\"\n            aria-label=\"expand menu\"\n            tabindex=\"0\"\n          ></iron-icon>\n        </template>\n        <template is=\"dom-if\" if=\"[[opened]]\">\n          <iron-icon\n            id=\"toggle\"\n            icon=\"arrow-drop-up\"\n            aria-role=\"button\"\n            aria-label=\"collapse menu\"\n            tabindex=\"0\"\n          ></iron-icon>\n        </template>\n      </div>\n    </div>\n  "]);return H=function(){return O},O}function I(){var O=F(["\n    <style>\n      :host {\n        display: block;\n      }\n\n      :host([collapsable]) > map-menu-header {\n        cursor: pointer;\n        display: block;\n      }\n\n      #container {\n        margin-left: 16px;\n      }\n\n      #container ::slotted(map-menu-item) {\n        margin-top: 0.4em;\n      }\n    </style>\n    <map-menu-header\n      avatar-label=\"[[avatarLabel]]\"\n      id=\"[[id]]\"\n      title=\"[[title]]\"\n      label=\"[[label]]\"\n      opened=\"[[opened]]\"\n      url=\"[[url]]\"\n      icon=\"[[icon]]\"\n    ></map-menu-header>\n    <iron-collapse id=\"container\"> <slot></slot> </iron-collapse>\n  "]);return I=function(){return O},O}function J(){var O=F(["\n    <style>\n      :host {\n        display: block;\n      }\n      #container {\n        padding: 16px 32px;\n      }\n      :host > ::slotted(map-menu-submenu + map-menu-submenu) {\n        margin-top: 16px;\n      }\n    </style>\n    <slot></slot>\n  "]);return J=function(){return O},O}function K(){var O=F(["\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n\n    <template id=\"domRepeat\" is=\"dom-repeat\" items=\"[[items]]\" as=\"item\">\n      <template is=\"dom-if\" if=\"[[__hasChildren(item)]]\">\n        <map-menu-submenu\n          title=\"[[item.title]]\"\n          id=\"[[item.id]]\"\n          url=\"[[item.url]]\"\n          icon=\"[[item.metadata.icon]]\"\n          open=\"[[item.active]]\"\n          avatar-label=\"[[item.avatarLabel]]\"\n        >\n          <map-menu-builder items=\"[[item.children]]\"></map-menu-builder>\n        </map-menu-submenu>\n      </template>\n      <template is=\"dom-if\" if=\"[[!__hasChildren(item)]]\">\n        <map-menu-item\n          title=\"[[item.title]]\"\n          id=\"[[item.id]]\"\n          url=\"[[item.url]]\"\n          icon=\"[[item.metadata.icon]]\"\n          active-path=\"[[activePath]]\"\n        ></map-menu-item>\n      </template>\n    </template>\n  "]);return K=function(){return O},O}function L(){var O=F(["\n    <style>\n      :host {\n        --map-menu-active-color: rgba(0, 0, 0, 0.1);\n        display: block;\n        overflow-y: scroll;\n        position: relative;\n        height: 100%;\n      }\n\n      #activeIndicator {\n        background: var(--map-menu-active-color);\n        transition: all 0.3s ease-in-out;\n        position: absolute;\n      }\n\n      map-menu-container {\n        padding: 32px;\n        @apply --map-menu-container;\n      }\n\n      /* turn default active color if indicator is on */\n      :host([active-indicator]) map-menu-builder {\n        --map-menu-active-color: transparent;\n      }\n    </style>\n    <div id=\"itemslist\">\n      <map-menu-container>\n        <div id=\"activeIndicator\"></div>\n        <map-menu-builder id=\"builder\" items=\"[[items]]\"></map-menu-builder>\n      </map-menu-container>\n    </div>\n    <smooth-scroll id=\"smoothScroll\"></smooth-scroll>\n  "]);return L=function(){return O},O}var M;D.Polymer({_template:D.html(G()),is:"map-menu-item",properties:(M={icon:{type:String,value:""},title:{type:String,value:""},url:{type:String,value:""}},E(M,"icon",{type:String}),E(M,"id",{type:String,reflectToAttribute:!0}),E(M,"active",{type:Boolean,value:!1,observer:"__activeChanged"}),M),_click:function(){this.fire("link-clicked",{id:this.id})},attached:function(){this.fire("child-attached",{id:this.id})},__activeChanged:function(O,P){O!==P&&!0===O&&this.fire("active-item",{id:this.id})},__hasIcon:function(O){return O||""===O}}),D.Polymer({_template:D.html(H()),is:"map-menu-header",properties:{title:{type:String},label:{type:String},avatarLabel:{type:String,value:""},opened:{type:Boolean},url:{type:String,value:""},id:{type:String,reflectToAttribute:!0},icon:{type:String},active:{type:Boolean,value:!1,observer:"__activeChanged"}},listeners:{tap:"__tap",keypress:"__keypress"},__titleRole:function(){return!!this.url&&"link"},__linkClickHandler:function(){this.id&&this.fire("link-clicked",{id:this.id})},attached:function(){this.fire("child-attached",{id:this.id})},__activeChanged:function(O,P){O!==P&&!0===O&&this.fire("active-item",{id:this.id})},__tap:function(O){this.__toggleEventHandler(O)},__keypress:function(O){"Enter"===O.code&&this.__toggleEventHandler(O)},__toggleEventHandler:function(O){var P=w.dom(O).rootTarget;void 0!==P&&void 0!==P.id&&"toggle"===P.id&&this.fire("toggle-header")}}),D.Polymer({_template:D.html(I()),is:"map-menu-submenu",properties:{id:{type:String},title:{type:String},avatarLabel:{type:String},label:{type:String},icon:{type:String},opened:{type:Boolean,value:!1},collapsable:{type:Boolean,value:!0},expandChildren:{type:Boolean,value:!1}},observers:["_openChanged(opened)"],listeners:{"child-deactivated":"__childDeactivated","child-activated":"__childActivated","active-item":"__activeChanged","toggle-header":"__toggleHeader","link-clicked":"_headerClickHandler"},_openChanged:function(O){var P=this.$.container;O&&P.show(),O||P.hide()},_headerClickHandler:function(){this.opened||(this.opened=!this.opened)},__toggleHeader:function(O){O.stopPropagation(),this.opened=!this.opened,this.fire("toggle-updated")},__activeChanged:function(){this.opened=!0}}),D.Polymer({_template:D.html(J()),is:"map-menu-container",properties:{}}),D.Polymer({_template:D.html(K()),is:"map-menu-builder",properties:{items:{type:Array,value:[]}},__hasChildren:function(O){return 0<O.children.length},_hasActiveChildren:function(){}});var N=D.Polymer({_template:D.html(L()),is:"map-menu",properties:{title:{type:String,value:"Content Outline"},data:{type:Array,value:null},items:{type:Array,value:null,notify:!0},selected:{type:String,notify:!0,observer:"__selectedChanged"},autoScroll:{type:Boolean,value:!1},activeIndicator:{type:Boolean,value:!1}},observers:["_dataChanged(data)"],listeners:{"link-clicked":"__linkClickedHandler","child-attached":"__childAttached","toggle-updated":"__toggleUpdated"},__selectedChanged:function(O,P){O!==P&&this.refreshActiveChildren(O)},refreshActiveChildren:function(O){var P=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,Q=this.querySelector("[active]");if(O&&""!==O){var R=this.querySelector("#".concat(O));R&&(R.setAttribute("active",!0),this.activeIndicator&&this.__updateActiveIndicator(R,P),this.autoScroll&&this.$.smoothScroll.scroll(R,{duration:300,scrollElement:this}))}Q&&Q.removeAttribute("active")},setData:function(O){this.set("data",[]),this.set("data",O)},_dataChanged:function(O){var P=this,Q=[];O&&(O.forEach(function(R){R.parent||Q.push(R)}),Q.forEach(function(R){P._setChildren(R,O)}),this.set("items",[]),this.set("items",Q))},_setChildren:function(O,P){var Q=this,R=P.filter(function(S){return O.id===S.parent});O.children=R,0<O.children.length&&O.children.forEach(function(S){Q._setChildren(S,P)})},__hasChildren:function(O){return 0<O.children.length},__linkClickedHandler:function(O){this.selected=O.detail.id,this.fire("selected",O.detail.id)},__childAttached:function(O){O.detail.id===this.selected&&this.refreshActiveChildren(this.selected)},__toggleUpdated:function(){this.refreshActiveChildren(this.selected,300)},__isInViewport:function(O){var P=this.__getScrollParent(O);if(!P)return!1;var Q=O.offsetTop,R=Q+O.offsetHeight,S=P.offsetTop,T=S+P.offsetHeight;return R>S&&Q<T},__getScrollParent:function(O){return null==O?null:O.scrollHeight>O.clientHeight?O:this.__getScrollParent(O.parentNode)},__updateActiveIndicator:function(O){var P=this,Q=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100;setTimeout(function(){var R=P.$.activeIndicator,S=P.__parentsHidden(O),T=O.offsetLeft,U=(O.offsetBottom,O.offsetTop),V=O.offsetWidth,W=S?0:O.offsetHeight;Q=0<W?Q:10,R.setAttribute("style","width:".concat(V,"px;height:").concat(W,"px;top:").concat(U,"px;left:").concat(T,"px"))},Q)},__parentsHidden:function(O){var P=O.parentNode;return null==P?null:"MAP-MENU-SUBMENU"===P.tagName&&!P.opened||"MAP-MENU"!==P.tagName&&this.__parentsHidden(P)}});j.MapMenu=N,Object.defineProperty(j,"__esModule",{value:!0})});