import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import{dom}from"@polymer/polymer/lib/legacy/polymer.dom.js";import{FlattenedNodesObserver}from"@polymer/polymer/lib/utils/flattened-nodes-observer.js";import*as async from"@polymer/polymer/lib/utils/async.js";import"@polymer/iron-selector/iron-selector.js";import"@polymer/iron-list/iron-list.js";import"@polymer/paper-icon-button/paper-icon-button.js";import{NeonAnimationRunnerBehavior}from"@polymer/neon-animation/neon-animation-runner-behavior.js";import"@polymer/neon-animation/neon-animated-pages.js";import"./lib/app-datepicker-icons.js";import"./lib/app-datepicker-animations.js";let AppDatepicker=Polymer({_template:html`
    <style>
      :host {
        display: block;
        position: relative;
        box-sizing: border-box;

        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        background: var(--app-datepicker-bg, #fafafa);

        @apply --app-datepicker;
      }

      * {
        box-sizing: border-box;
      }

      .datepicker {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;

        position: relative;
        width: 300px;
        height: 384px;
        max-height: 384px;
      }
      .datepicker.with-buttons {
        height: 431px;
        max-height: 431px;
      }

      iron-selector.selected-fulldate {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;

        min-height: 84px;
        padding: 8px 16px;
        color: var(--app-datepicker-selection-color, #b2dfdb);
        background-color: var(--app-datepicker-selection-bg, #009688);
      }
      .selected-year.iron-selected,
      .selected-date.iron-selected {
        color: var(--app-datepicker-iron-selected, #fefefe);
      }
      .selected-year {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;

        font-size: 14px;
        font-weight: 800;
        height: 34px;

        @apply --app-datepicker-selected-year;
      }
      .selected-date {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;

        font-size: 32px;
        font-weight: 800;

        @apply --app-datepicker-selected-date;
      }
      .selected-year:hover,
      .selected-date > div:hover {
        cursor: pointer;
      }

      neon-animated-pages.fullcalendar {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: column;
        -webkit-flex-direction: column;
        flex-direction: column;

        width: 100%;
        height: 100%;
        overflow: hidden;
        color: var(--app-datepicker-calendar-color, #000);
        background-color: var(--app-datepicker-calendar-bg, #fafafa);
      }
      .navigator {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        max-height: 46px;
        padding: 3px 10px;
        position: relative;
        margin-top: 8px;
      }
      .nav-month-year {
        -ms-flex: 1 1 auto;
        -webkit-flex: 1 1 auto;
        flex: 1 1 auto;

        font-size: 14px;
        font-weight: 500;
        text-align: center;

        @apply --app-datepicker-nav-month-year;
      }
      .days-of-week {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        color: var(--app-datepicker-weekdays-color, #848484);
        font-size: 12px;

        @apply --app-datepicker-days-of-week;
      }
      .each-days-of-week {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        padding: 13px;
        max-height: 32px;
        width: 41px;
      }
      .days-of-month {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-wrap: wrap;
        -webkit-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        font-size: 13px;

        @apply --app-datepicker-days-of-month;
      }
      .each-days-of-month {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        position: relative;
        height: 35px;
        width: 35px;
        margin-left: 3px;
        margin-right: 3px;
      }
      div > .days-of-month > .each-days-of-month.chosen-days-of-month {
        border-radius: 50%;
        background-color: var(--app-datepicker-selected-day-bg, #009688);
        color: var(--app-datepicker-selected-day-color, #fff);
      }
      .days-of-month > .each-days-of-month.is-today {
        color: var(--app-datepicker-today-color, #009688);
      }
      .days-of-month > .each-days-of-month.is-disabled-day {
        color: var(--app-datepicker-disabled-color, #9e9e9e);
      }

      /* outline: none for non-selectable and disabled days */
      .days-of-month > .each-days-of-month.is-disabled-day,
      .days-of-month > .each-days-of-month.is-non-selectable {
        outline: none;
      }
      /* Date hover styling */
      .days-of-month
        > .each-days-of-month:hover:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month),
      .days-of-month
        > .each-days-of-month:focus:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month) {
        color: var(--app-datepicker-date-hover-color, #f5f5f5);
        background-color: var(
          --app-datepicker-date-hover-background-color,
          #80cbc4
        );
        border-radius: 50%;
        cursor: pointer;
      }
      :host(.dark-theme)
        .days-of-month
        > .each-days-of-month:hover:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month),
      :host(.dark-theme)
        .days-of-month
        > .each-days-of-month:focus:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month) {
        color: var(--app-datepicker-date-hover-color, #777);
        background-color: var(
          --app-datepicker-date-hover-background-color,
          #b2dfdb
        );
      }
      :host(.goog-theme)
        .days-of-month
        > .each-days-of-month:hover:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month),
      :host(.goog-theme)
        .days-of-month
        > .each-days-of-month:focus:not(.is-disabled-day):not(.is-non-selectable):not(.chosen-days-of-month) {
        color: var(--app-datepicker-date-hover-color, #f5f5f5);
        background-color: var(
          --app-datepicker-date-hover-background-color,
          #e57373
        );
      }

      /* Focus ring styling - replace outline with background-color */
      .each-list-of-years:focus,
      .each-days-of-month:focus {
        outline: 0;
      }
      .each-list-of-years:focus,
      .each-list-of-years:hover,
      .each-list-of-years.is-selected:focus,
      .each-list-of-years.is-selected:hover {
        font-weight: 700;
        background-color: var(
          --app-datepicker-year-hover-background-color,
          #e0e0e0
        );

        @apply --app-datepicker-year-hover;
      }
      :host(.dark-theme) .each-list-of-years:focus,
      :host(.dark-theme) .each-list-of-years:hover,
      :host(.dark-theme) .each-list-of-years.is-selected:focus,
      :host(.dark-theme) .each-list-of-years.is-selected:hover {
        font-weight: 700;
        background-color: var(
          --app-datepicker-year-hover-background-color,
          #616161
        );

        @apply --app-datepicker-year-hover;
      }
      :host(.goog-theme) .each-list-of-years:focus,
      :host(.goog-theme) .each-list-of-years:hover,
      :host(.goog-theme) .each-list-of-years.is-selected:focus,
      :host(.goog-theme) .each-list-of-years.is-selected:hover {
        font-weight: 700;
        background-color: var(
          --app-datepicker-year-hover-background-color,
          #424242
        );

        @apply --app-datepicker-year-hover;
      }

      .each-list-of-years {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-align: center;
        -webkit-align-items: center;
        align-items: center;
        -ms-flex-pack: center;
        -webkit-justify-content: center;
        justify-content: center;

        height: 64px;
        font-size: 16px;

        @apply --app-datepicker-each-list-of-years;
      }
      .each-list-of-years:hover {
        cursor: pointer;
      }
      .each-list-of-years.is-selected {
        font-size: 24px;
        font-weight: 700;
        color: var(--app-datepicker-selected-year-color, #009688);
        background-color: var(--app-datepicker-selected-year-bg);

        @apply --app-datepicker-selected-each-list-of-years;
      }

      /* paper-icon-button */
      paper-icon-button {
        color: var(--app-datepicker-icon-button-color, #737373);
        --paper-icon-button-ink-color: var(
          --app-datepicker-icon-button-ink-color,
          #737373
        );
      }

      /* content tag selector */
      .buttons {
        display: -ms-flexbox;
        display: -webkit-flex;
        display: flex;
        -ms-flex-direction: row;
        -webkit-flex-direction: row;
        flex-direction: row;
        -ms-flex-pack: end;
        -webkit-justify-content: flex-end;
        justify-content: flex-end;

        color: var(--app-datepicker-button-color, #009688);
        position: relative;
        padding: 8px 8px 8px 24px;
        margin: 0;
        font-size: 12px;
        font-weight: 500;

        --paper-button-ink-color: var(
          --app-datepicker-button-ink-color,
          #737373
        );

        @apply --app-datepicker-buttons;
      }

      /* will-change: transform, however lag on the first time */
      .nav-month-year,
      .days-of-week,
      .days-of-month {
        will-change: transform;
        -webkit-transform: translate3d(0px, 0px, 0px);
        transform: translate3d(0px, 0px, 0px);
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
      }

      iron-list {
        --iron-list-items-container: {
          -webkit-transform: translate3d(0px, 0px, 0px);
          transform: translate3d(0px, 0px, 0px);
          -webkit-backface-visibility: hidden;
          backface-visibility: hidden;
        }
      }

      /* landscape */
      @media all and (orientation: landscape) {
        :host(.horizontal-view) #dp.datepicker,
        :host(:not(.vertical-view)) #dp.datepicker {
          display: -ms-flexbox;
          display: -webkit-flex;
          display: flex;
          -ms-flex-direction: row;
          -webkit-flex-direction: row;
          flex-direction: row;

          width: 512px;
          height: 241px;
        }
        :host(.horizontal-view) #dp.datepicker.with-buttons,
        :host(:not(.vertical-view)) #dp.datepicker.with-buttons {
          height: 288px;
        }
        :host(.horizontal-view) iron-selector.selected-fulldate,
        :host(:not(.vertical-view)) iron-selector.selected-fulldate {
          /* Fixed for IE11, Edge */
          min-width: 164px;
          width: calc(100% / 3 + 48px);
          max-width: 164px;
          height: 100%;
        }
        :host(:not(.vertical-view)) .selected-date {
          display: -ms-flexbox;
          display: -webkit-flex;
          display: flex;
          -ms-flex-direction: column;
          -webkit-flex-direction: column;
          flex-direction: column;
          -ms-flex-align: start;
          -webkit-align-items: flex-start;
          align-items: flex-start;
          -ms-flex-pack: start;
          -webkit-justify-content: flex-start;
          justify-content: flex-start;
        }
        /* Fix for IE11 */
        :host(:not(.vertical-view)) .selected-date > div {
          width: 100%;
          word-wrap: break-word;
        }
        /* Hack for Edge 12+ */
        @supports (-ms-accelerator: true) {
          :host(:not(.vertical-view)) .selected-date > div {
            white-space: pre-wrap;
          }
        }

        :host(.horizontal-view) neon-animated-pages.fullcalendar,
        :host(:not(.vertical-view)) neon-animated-pages.fullcalendar {
          height: 100%;
        }
        :host(.horizontal-view) .calendar-view,
        :host(:not(.vertical-view)) .calendar-view {
          padding-bottom: 0;
        }
        :host(.horizontal-view) .navigator,
        :host(:not(.vertical-view)) .navigator {
          padding: 2px 10px;
          margin-top: 0;
        }
        :host(.horizontal-view) .each-days-of-week,
        :host(:not(.vertical-view)) .each-days-of-week {
          width: calc(100% / 7 - 20px);
          padding: 0;
          margin-left: 10px;
          margin-right: 10px;
        }
        :host(:not(.vertical-view)) .days-of-month {
          margin-top: 8px;
        }
        :host(.horizontal-view) .each-days-of-month,
        :host(:not(.vertical-view)) .each-days-of-month {
          height: 29px;
          margin-left: 10px;
          margin-right: 10px;
          width: calc(100% / 7 - 20px);
        }
      }
      /* End of landscape @media */

      /* dark-theme */
      :host(.dark-theme) {
        background-color: var(--app-datepicker-bg, #424242);
      }
      :host(.dark-theme) iron-selector.selected-fulldate {
        color: var(--app-datepicker-selection-color, #9e9e9e);
        background-color: var(--app-datepicker-selection-bg, #555);
      }
      :host(.dark-theme) .selected-year.iron-selected,
      :host(.dark-theme) .selected-date.iron-selected {
        color: var(--app-datepicker-iron-selected, #f5f5f5);
      }
      :host(.dark-theme) neon-animated-pages.fullcalendar {
        color: var(--app-datepicker-calendar-color, #f5f5f5);
        background-color: var(--app-datepicker-calendar-bg, #424242);
      }
      :host(.dark-theme) .days-of-week {
        color: var(--app-datepicker-weekdays-color, #7c7c7c);
      }
      :host(.dark-theme)
        div
        > .days-of-month
        > .each-days-of-month.chosen-days-of-month {
        color: var(--app-datepicker-selected-day-color, #555);
        background-color: var(--app-datepicker-selected-day-bg, #80cbc4);
      }
      :host(.dark-theme) .days-of-month > .each-days-of-month.is-today {
        color: var(--app-datepicker-today-color, #80cbc4);
      }
      :host(.dark-theme) .days-of-month > .each-days-of-month.is-disabled-day {
        color: var(--app-datepicker-disabled-color, #ffff00);
      }
      :host(.dark-theme) .each-list-of-years.is-selected {
        background-color: var(
          --app-datepicker-selected-year-bg,
          rgba(0, 0, 0, 0)
        );
        color: var(--app-datepicker-selected-year-color, #80cbc4);
        font-size: 26px;
        font-weight: 500;
      }
      :host(.dark-theme) paper-icon-button {
        color: var(--app-datepicker-icon-button-color, #ffff00);
        --paper-icon-button-ink-color: var(
          --app-datepicker-icon-button-ink-color,
          #212121
        );
      }
      :host(.dark-theme) ::slotted(paper-button) {
        color: var(--app-datepicker-button-color, #80cbc4);
        --paper-button-ink-color: var(
          --app-datepicker-button-ink-color,
          #bcbcbc
        );
      }

      /* goog theme */
      :host(.goog-theme) {
        background-color: var(--app-datepicker-bg, #212121);
      }

      :host(.goog-theme) iron-selector.selected-fulldate {
        color: var(--app-datepicker-selection-color, #fff);
        background-color: var(--app-datepicker-selection-bg, #212121);
      }
      :host(.goog-theme) .selected-year.iron-selected,
      :host(.goog-theme) .selected-date.iron-selected {
        color: var(--app-datepicker-iron-selected, #da4336);
      }
      :host(.goog-theme) neon-animated-pages.fullcalendar {
        color: var(--app-datepicker-calendar-color, #fff);
        background-color: var(--app-datepicker-calendar-bg, #212121);
      }
      :host(.goog-theme) .days-of-week {
        color: var(--app-datepicker-weekdays-color, #9e9e9e);
      }
      :host(.goog-theme)
        div
        > .days-of-month
        > .each-days-of-month.chosen-days-of-month {
        color: var(--app-datepicker-selected-day-color, #fff);
        background-color: var(--app-datepicker-selected-day-bg, #da4336);
      }
      :host(.goog-theme) .days-of-month > .each-days-of-month.is-today {
        color: var(--app-datepicker-today-color, #da4336);
      }
      :host(.goog-theme) .days-of-month > .each-days-of-month.is-disabled-day {
        color: var(--app-datepicker-disabled-color, #646464);
      }
      :host(.goog-theme) .each-list-of-years.is-selected {
        background-color: var(
          --app-datepicker-selected-year-bg,
          rgba(0, 0, 0, 0)
        );
        color: var(--app-datepicker-selected-year-color, #da4336);
        font-size: 26px;
        font-weight: 500;
      }
      :host(.goog-theme) paper-icon-button {
        color: var(--app-datepicker-icon-button-color, #da4336);
        --paper-icon-button-ink-color: var(
          --app-datepicker-icon-button-ink-color,
          #616161
        );
      }
      :host(.goog-theme) ::slotted(paper-button) {
        color: var(--app-datepicker-button-color, #da4336);
        --paper-button-ink-color: var(
          --app-datepicker-button-ink-color,
          #616161
        );
      }
    </style>

    <div id="dp" class="datepicker">
      <iron-selector
        class="selected-fulldate"
        selected="{{_activeView}}"
        attr-for-selected="view"
        on-selected-changed="_onIronSelectorSelectedChanged"
        fallback-selection="calendar"
      >
        <div
          id="showSelectedYear"
          class="selected-year"
          tabindex="0"
          view="year"
          aria-label="year view"
        >
          [[_showSelectedYear]]
        </div>
        <div class="selected-date" view="calendar" tabindex="0">
          <div aria-label="calendar view">[[_shortSelectedDate]]</div>
        </div>
      </iron-selector>

      <neon-animated-pages
        class="fullcalendar"
        selected="[[_activeView]]"
        attr-for-selected="view"
        entry-animation="[[pageEntryAnimation]]"
        exit-animation="[[pageExitAnimation]]"
        on-neon-animation-finish="_onAnimationFinish"
      >
        <div class="calendar-view" view="calendar">
          <div class="navigator">
            <paper-icon-button
              icon="datepicker:chevron-left"
              on-tap="_decrementMonth"
              noink="[[noAnimation]]"
            ></paper-icon-button>
            <div id="navMonthYear" class="nav-month-year">
              [[_activeMonthYear]]
            </div>
            <paper-icon-button
              icon="datepicker:chevron-right"
              on-tap="_incrementMonth"
              noink="[[noAnimation]]"
            ></paper-icon-button>
          </div>

          <div id="daysOfWeek" class="days-of-week">
            <template
              is="dom-repeat"
              items="[[_daysOfWeek]]"
              index-as="index"
              strip-whitespace=""
            >
              <div class="each-days-of-week">[[item]]</div>
            </template>
          </div>

          <div
            id="daysOfMonth"
            class="days-of-month"
            on-tap="_chooseDaysOfMonth"
          >
            <template
              is="dom-repeat"
              items="[[_daysOfMonth]]"
              index-as="index"
              strip-whitespace=""
            >
              <div
                class\$="each-days-of-month[[_isToday(item.index, _activeYear, _activeMonth)]][[_isEmptyDate(item.index)]][[_isChosenDaysOfMonth(item.index, _selectedYear, _selectedMonth, _selectedDate)]][[_isDisableDays(index, firstDayOfWeek, minDate, maxDate, item.index, _shiftedDisableDays.*, disableDates.*)]]"
                index="[[index]]"
                date="[[item.index]]"
                tabindex\$="[[_shouldTabIndex(index, firstDayOfWeek, minDate, maxDate, item.index, _shiftedDisableDays.*, disableDates.*)]]"
                aria-disabled\$="[[_shouldAriaDisabled(index, firstDayOfWeek, minDate, maxDate, item.index, _shiftedDisableDays.*, disableDates.*)]]"
                aria-label\$="[[item.index]]"
              >
                [[item.date]]
              </div>
            </template>
          </div>

          <div class="buttons">
            <slot name="dismiss-button"></slot>
            <slot name="confirm-button"></slot>
          </div>
        </div>

        <template
          is="dom-if"
          if="[[_isListRendered]]"
          restamp="true"
          on-dom-change="_onListRendered"
          strip-whitespace=""
        >
          <iron-list
            id="listOfYears"
            items="[[_listOfYears]]"
            view="year"
            on-neon-animation-finish="_onAnimationFinish"
            selection-enabled=""
          >
            <template strip-whitespace="">
              <div
                class\$="each-list-of-years[[_isListOfYearsSelected(_selectedYear, item.year)]]"
                tabindex\$="[[tabIndex]]"
                aria-label\$="[[item.year]]"
                label\$="[[item.year]]"
                on-tap="_goCalendar"
                on-keydown="_goCalendar"
              >
                [[item.year]]
              </div>
            </template>
          </iron-list>
        </template>
      </neon-animated-pages>
    </div>
  `,is:"app-datepicker",behaviors:[NeonAnimationRunnerBehavior],properties:{locale:{type:String,value:function(){return window.Intl?window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US":"en-US"}},view:String,theme:String,firstDayOfWeek:{type:Number,value:0},disableDays:{type:Array,value:function(){return[6,0]}},disableDates:{type:Array,value:function(){return[]}},minDate:{type:String,value:"1000/00/01"},maxDate:{type:String,value:"9999/99/99"},format:{type:String,value:"yyyy/mm/dd"},date:{type:String,notify:!0,readOnly:!0},inputDate:String,noAnimation:Boolean,pageEntryAnimation:String,pageExitAnimation:String,showLongDate:{type:Boolean,value:!1},invalidDate:{type:Boolean,notify:!0,readOnly:!0},autoUpdateDate:{type:Boolean,value:!1},alwaysResetSelectedDateOnDialogClose:Boolean,_monthNames:{type:Array,value:function(){return["January","February","March","April","May","June","July","August","September","October","November","December"]}},_shiftedDisableDays:{type:Array,value:[6,0]},_activeMonthYear:String,_shortSelectedDate:String,_showSelectedYear:String,_daysOfWeek:Array,_daysOfMonth:Array,_listOfYears:Array,_activeView:{type:String,value:"calendar"},_activeYear:{type:Number,value:function(){return new Date().getFullYear()}},_activeMonth:{type:Number,value:function(){return new Date().getMonth()}},_isIncrementMonth:Boolean,_isDecrementMonth:Boolean,_selectedYear:{type:Number,value:function(){return new Date().getFullYear()}},_selectedMonth:{type:Number,value:function(){return new Date().getMonth()}},_selectedDate:{type:Number,value:function(){return new Date().getDate()}},_chosenDaysOfMonth:{type:Number,value:function(){return new Date().getDate()}},_isListRendered:{type:Boolean,value:!1},_isSelectedDateConfirmed:Boolean,_format:{type:Object,value:function(){return{y:"yyyy",m:"mm",d:"dd",s1:"/",s2:"/"}}}},observers:["_computeDaysOfMonth(_activeYear, _activeMonth, firstDayOfWeek, locale)","_computeSeparateFormat(format)","_computeShowLongDate(showLongDate, locale)","_updateToReflectExternalChange(inputDate)","_updateThemeColor(theme)","_updateDatepickerView(view)","_computeDaysOfWeek(firstDayOfWeek, locale)","_computeActiveMonthYear(_activeYear, _activeMonth, locale)","_computeShortSelectedDate(_selectedYear, _selectedMonth, _selectedDate, locale)","_computeShowSelectedYear(_selectedYear, locale)","_computeShiftedDisableDays(firstDayOfWeek, disableDays.*)"],attached:function(){this.noAnimation||(this.set("animationConfig",{incrementEntry:[{name:"slide-from-right-animation",node:this.$.daysOfWeek},{name:"slide-from-right-animation",node:this.$.daysOfMonth},{name:"datepicker-slide-from-right-animation",node:this.$.navMonthYear}],decrementEntry:[{name:"slide-from-left-animation",node:this.$.daysOfWeek},{name:"slide-from-left-animation",node:this.$.daysOfMonth},{name:"datepicker-slide-from-left-animation",node:this.$.navMonthYear}]}),this.set("pageEntryAnimation","fade-in-animation"),this.set("pageExitAnimation","fade-out-animation"));let a=FlattenedNodesObserver.getFlattenedNodes(this).filter(c=>c.nodeType===Node.ELEMENT_NODE);if(a&&0<a.length){for(var b=0;b<a.length;b++)a[b].hasAttribute("dialog-confirm")&&(a[b].addEventListener("tap",this._updateBindDate.bind(this)),a[b].addEventListener("transitionend",this._updateBindDate.bind(this))),this._updateDistributedButtonInkColorCustomProp(a[b],"#737373");this.$.dp.classList.add("with-buttons")}else this.$.dp.classList.remove("with-buttons");this.fire("app-datepicker-attached")},_computeDaysOfMonth:function(a,b,c,d){function e(r,s){var t=new Date(r,s+1,0).getDate();return t}if(window.Intl){var f=new Date(a,b,1).getDay(),g=[],h=e(a,b);0<c&&7>c&&(f-=c,f=0>f?7+f:f),d=d||window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US";for(var k=window.Intl&&window.Intl.DateTimeFormat?new window.Intl.DateTimeFormat(d,{timeZone:"UTC",day:"numeric"}).format:function(s){return s.getDate()},l=0,o=1-f;42>l;l++,o++){var p=k(Date.UTC(a,b,o)),q={date:"",index:""};l>=f&l<f+h&&(q.date=p,q.index=o),g.push(q)}this.set("_chosenDaysOfMonth",this._computeChosenDaysOfMonth(g,this._selectedDate)),this.set("_daysOfMonth",g)}},_computeShiftedDisableDays:function(a){a=0<a&&7>a?a:0;var c=this.disableDays.map(function(d){return d-=a,0>d?7+d:d});this.set("_shiftedDisableDays",c)},_incrementMonth:function(){this.debounce("_incrementMonth",function(){this.set("_isIncrementMonth",!0),window.requestAnimationFrame(function(){var b=this._activeMonth;0===++b%12&&this._activeYear++,this.set("_activeMonth",b%12),this.noAnimation||(this.cancelAnimation(),this.playAnimation("incrementEntry")),this.set("_isIncrementMonth",!1)}.bind(this))},100)},_decrementMonth:function(){this.debounce("_decrementMonth",function(){this.set("_isDecrementMonth",!0),window.requestAnimationFrame(function(){var b=this._activeMonth;0>--b&&(this._activeYear--,b=11),this.set("_activeMonth",b),this.noAnimation||(this.cancelAnimation(),this.playAnimation("decrementEntry")),this.set("_isDecrementMonth",!1)}.bind(this))},100)},_computeActiveMonthYear:function(a,b,c){if(window.Intl){c=c||window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US";var d=new window.Intl.DateTimeFormat(c,{timeZone:"UTC",month:"short",year:"numeric"}).format(Date.UTC(a,b,1));this.set("_activeMonthYear",d)}},_computeShortSelectedDate:function(a,b,c,d){if(window.Intl){d=d||window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US";var e=new window.Intl.DateTimeFormat(d,{timeZone:"UTC",weekday:"short",month:"short",day:"numeric"}).format(Date.UTC(a,b,c));this.set("_shortSelectedDate",e),this.autoUpdateDate&&this.enforceDateChange()}},_computeShowSelectedYear:function(a,b){if(window.Intl){b=b||window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US";var c=new window.Intl.DateTimeFormat(b,{timeZone:"UTC",year:"numeric"}).format(Date.UTC(a,0,1));this.set("_showSelectedYear",c)}},_chooseDaysOfMonth:function(a){var b=a.target;b&&this._isNumber(b.date)&&!b.classList.contains("is-disabled-day")&&(this.set("_chosenDaysOfMonth",b.index),this.set("_selectedYear",this._activeYear),this.set("_selectedDate",b.date),this.set("_selectedMonth",this._activeMonth))},_isToday:function(a,b,c){var d=new Date,e=a===d.getDate()&&b===d.getFullYear()&&c===d.getMonth();return e?" is-today":""},_isEmptyDate:function(a){return this._isNumber(a)?"":" is-non-selectable"},_isChosenDaysOfMonth:function(a,b,c,d){var e=0<=this._chosenDaysOfMonth&&this._activeYear===b&&this._activeMonth===c&&a===d;return e?" chosen-days-of-month":""},_isDisableDays:function(a,b,c,d,e){var f=!1,g=!1,h=!1,k=!1,l=this._shiftedDisableDays.some(function(r){return r===a%7});if(this._isNumber(e)){var o=this._convertDateStringToDateObject(c),p=this._convertDateStringToDateObject(d),q=new Date(this._activeYear,this._activeMonth,e);o&&(f=q.getTime()<o.getTime()),p&&(g=q.getTime()>p.getTime()),k=this.disableDates&&this.disableDates.length&&this.disableDates.some(function(r){var s=this._convertDateStringToDateObject(r);return s&&q.getTime()===s.getTime()}.bind(this))}return h=l||k||f||g,h?" is-disabled-day is-non-selectable":""},_isListOfYearsSelected:function(a,b){return+a===+b?" is-selected":""},_computeDaysOfWeek:function(a,b){var c=["S","M","T","W","T","F","S"],a=0<a&&7>a?a:0;if(b&&window.Intl){c=[];for(var d=new Date,e=d.getDate()-d.getDay(),f=new window.Intl.DateTimeFormat(b,{timeZone:"UTC",weekday:"narrow"}).format,g=null,h=0;7>h;h++)g=Date.UTC(d.getFullYear(),d.getMonth(),e+h),c.push(f(g))}var k=c.slice(a),l=c.slice(0,a),o=Array.prototype.concat(k,l);this.set("_daysOfWeek",o)},_computeChosenDaysOfMonth:function(a,b){for(var c=a.length,d=0;d<c;d++)if(0<=d&&a[d].index===b)return d},_convertDateStringToDateObject:function(a){var b=a instanceof Date||"string"!==typeof a?a:new Date(a),c="Invalid Date"!==b.toDateString();return c?b:null},_updateList:function(){for(var b=[],d=1900;2100>=d;d++)b.push({year:d});this.set("_listOfYears",b)},_onAnimationFinish:function(a){var b=a.detail;if(b&&"IRON-LIST"===b.toPage.tagName){var c=this._updateListScroller(b.toPage);async.microTask.run(()=>{b.toPage._focusPhysicalItem(c)})}else async.microTask.run(()=>{this.$.showSelectedYear.focus()})},_updateListScroller:function(a){var b=dom(a.root).querySelector("#items"),c=b.getBoundingClientRect().height||12863.994140625,d=Math.floor(c/201*(this._activeYear-1900-2))+1;return!this.$.dp.classList.contains("with-buttons")&&window.matchMedia("(orientation: landscape)").matches&&(d=Math.floor(c/201*(this._activeYear-1900-1))+1),async.microTask.run(()=>{a.scroll(0,d),a.selectItem(this._activeYear-1900)}),this._activeYear-1900},_onIronSelectorSelectedChanged:function(a){"year"===a.detail.value&&(this._isListRendered?this.noAnimation&&this._updateListScroller(this.shadowRoot.querySelector("#listOfYears")):(this._updateList(),this.set("_isListRendered",!0)))},_onListRendered:function(a){a.target.if&&this.noAnimation&&async.microTask.run(()=>{this._updateListScroller(this.shadowRoot.querySelector("#listOfYears"))})},_goCalendar:function(a){if("keydown"!==a.type||13===a.keyCode){var b=a.model.item.year;this.set("_activeYear",b),this.set("_selectedYear",b),this.shadowRoot.querySelector("#listOfYears").selectItem(b-1900),this.set("_activeView","calendar")}},_computeSeparateFormat:function(a){var b=/^(yyyy|yy|m{1,4}|d{1,2}|do)\W+(yyyy|yy|m{1,4}|d{1,2}|do)\W+(yyyy|yy|m{1,4}|d{1,2}|do)$/g,c=b.exec(a),d={},e=[];if(null!==c){e.push(c[1]),e.push(c[2]),e.push(c[3]);for(var g,f=0;3>f;f++)g=e[f],0<=g.indexOf("y")?d.y=g:0<=g.indexOf("m")?d.m=g:0<=g.indexOf("d")&&(d.d=g)}"d"in d&&"m"in d&&"y"in d&&this.set("_format",d),d=null},_bindSelectedFulldate:function(a,b,c,d){if(this.showLongDate)return this._computeShowLongDate(this.showLongDate,this.locale,!0);var e=a,f=this._monthNames[b],g=c,h=this.format;if("yy"===d.y&&(e=a%100),"mmm"===d.m?f=f.slice(0,3):"mm"===d.m?f=this._padStart(b+1,2,"0"):"m"===d.m&&(f=b+1),"do"===d.d){var k=g%10,l=3<k?"th":["th","st","nd","rd"][k];(11===g||12==g||13===g)&&(l="th"),g+=l}else"dd"===d.d&&(g=this._padStart(g,2,"0"));return h=h.replace(d.y,e),h=h.replace(d.m,f),h=h.replace(d.d,g),h},_updateBindDate:function(a){this.debounce("_updateBindDate",function(){var b=a.type;if("tap"===b&&this.set("_isSelectedDateConfirmed",!0),("transitionend"===b||this.noAnimation)&&this._isSelectedDateConfirmed){var c=this._selectedYear,d=this._selectedMonth,e=this._selectedDate,f=this._format,g=this._bindSelectedFulldate(c,d,e,f);this._setDate(g),this.set("_isSelectedDateConfirmed",!1),this.alwaysResetSelectedDateOnDialogClose&&this.resetDate()}},1)},_computeShowLongDate:function(a,b,c){if(window.Intl&&this._selectedDate&&"undefined"!==typeof this._selectedDate){var d=this._selectedDate,e=Date.UTC(this._selectedYear,this._selectedMonth,d);if(a){b=b||window.Intl&&window.Intl.DateTimeFormat&&window.Intl.DateTimeFormat().resolvedOptions&&window.Intl.DateTimeFormat().resolvedOptions().locale||"en-US";var f={timeZone:"UTC",weekday:this.showLongDate?"short":void 0,year:"numeric",month:this.showLongDate?"short":"2-digit",day:"2-digit"};if(e=new window.Intl.DateTimeFormat(b,f).format(e),c)return e;window.navigator.msManipulationViewsEnabled&&(b||""===b)&&(e=decodeURIComponent(encodeURIComponent(e).replace(/\%E2\%80\%8[0-9A-F]/gi,""))),this._setDate(e)}else{if(e=this._bindSelectedFulldate(this._selectedYear,this._selectedMonth,d,this._format),c)return e;this._setDate(e)}}},_updateToReflectExternalChange:function(a){if(this.showLongDate&&0>this.locale.indexOf("en"))return void this._setInvalidDate(!0);var c=this.showLongDate,d=0,e=0,g=function(k,l){var o={valid:!1,result:""};if(l){var p=k.split(", ");if(2<p.length){p=p[1].split(" ").join("/")+", "+p[2];var q=new Date(p);return"Invalid Date"===q.toString()?o:{valid:!0,result:q}}return o}var r=/^(\d{4})\W+(\d{1,2})\W+(\d{1,2})$/i,s=/^(\d{4})[ ](\w+)[ ](\d{1,2})$/i,t=r.exec(k),u=s.exec(k);if(null===t&&null===u)return o;var v=null;return null===t?v=new Date(u[1]+" "+u[2]+" "+u[3]):null===u&&(v=new Date(+t[1],+t[2]-1,+t[3])),{valid:!0,result:v}}(a,c);if(g.valid){if(this.alwaysResetSelectedDateOnDialogClose)return;var h=new Date(g.result),d=h.getFullYear(),e=h.getMonth();this._setInvalidDate(!1),this.set("_activeYear",d),this.set("_activeMonth",e),this.set("_selectedYear",d),this.set("_selectedMonth",e),this.set("_selectedDate",h.getDate())}else this.set("_selectedDate",this._selectedDate||new Date().getDate()),this._computeShowLongDate(c,this.locale),this._setInvalidDate(!0)},enforceDateChange:function(){this._setInvalidDate(!1),this._computeShowLongDate(this.showLongDate,this.locale)},resetDate:function(){if(!this._isSelectedDateConfirmed){var a=new Date,b=a.getFullYear(),c=a.getMonth(),d=a.getDate();this.set("_activeYear",b),this.set("_activeMonth",c),this.set("_selectedYear",b),this.set("_selectedMonth",c),this.set("_selectedDate",d),this._setInvalidDate(!1)}},_shouldTabIndex:function(a,b,c,d,e){var f=this._isDisableDays(a,b,c,d,e);return e&&0<=e&&!f?0:-1},_shouldAriaDisabled:function(a,b,c,d,e){var f=this._isDisableDays(a,b,c,d,e);return!(e&&0<=e&&!f)},_padStart:function(a,b,c){var e=(c+a).slice(-b);return e},_isNumber:function(a){return"number"==typeof a||!isNaN(parseFloat(a))&&isFinite(a)},_updateThemeColor:function(a){var b=["dark-theme","light-theme","goog-theme"],c=b.indexOf(a),d=dom(this).querySelectorAll("paper-button"),e=d.length,f=["#bcbcbc","#737373","#616161"][c];0<=c?(b.splice(c,1),this.toggleClass(b[0],!1,this),this.toggleClass(b[1],!1,this),this.toggleClass(a,!0,this)):(this.toggleClass("dark-theme",!1,this),this.toggleClass("light-theme",!1,this),this.toggleClass("goog-theme",!1,this));for(var g=0;g<e;g++)this._updateDistributedButtonInkColorCustomProp(d[g],f||"#737373");this.updateStyles()},_updateDatepickerView:function(a){this.toggleClass("horizontal-view","horizontal"===a,this),this.toggleClass("vertical-view","vertical"===a,this)},_updateDistributedButtonInkColorCustomProp:function(a,b){this.updateStyles({"--paper-button-ink-color":b})}});export{AppDatepicker};