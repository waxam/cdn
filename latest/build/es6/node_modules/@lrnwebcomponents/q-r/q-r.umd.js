!function(b,f){"object"==typeof exports&&"undefined"!=typeof module?f(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/utils/resolve-url.js"),require("@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js"),require("@lrnwebcomponents/es-global-bridge/es-global-bridge.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/utils/resolve-url.js","@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","@lrnwebcomponents/es-global-bridge/es-global-bridge.js"],f):f(b.QR={},b.polymerLegacy_js,b.resolveUrl_js)}(this,function(b,f,g){"use strict";function h(y,z){for(var B,A=0;A<z.length;A++)B=z[A],B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(y,B.key,B)}function j(y){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(z){return z.__proto__||Object.getPrototypeOf(z)})(y)}function k(y,z){return(k=Object.setPrototypeOf||function(A,B){return A.__proto__=B,A})(y,z)}function m(){return(m=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(B){return!1}}()?Reflect.construct:function(B,C,D){var E=[null];E.push.apply(E,C);var F=new(Function.bind.apply(B,E));return D&&k(F,D.prototype),F}).apply(null,arguments)}function p(y){var z="function"==typeof Map?new Map:void 0;return(p=function(A){function B(){return m(A,arguments,j(this).constructor)}if(null===A||(C=A,-1===Function.toString.call(C).indexOf("[native code]")))return A;var C;if("function"!=typeof A)throw new TypeError("Super expression must either be null or a function");if(void 0!==z){if(z.has(A))return z.get(A);z.set(A,B)}return B.prototype=Object.create(A.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),k(B,A)})(y)}function q(y){if(void 0===y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function v(){var y,z,A=(y=["\n    <style>\n      :host {\n        display: block;\n      }\n      #link {\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <qr-code\n      id=\"qr\"\n      data$=\"[[data]]\"\n      modulesize$=\"[[modulesize]]\"\n      margin$=\"[[margin]]\"\n      format$=\"[[format]]\"\n    ></qr-code>\n    <a href$=\"[[data]]\" id=\"link\">[[title]]</a>\n  "],z||(z=y.slice(0)),Object.freeze(Object.defineProperties(y,{raw:{value:Object.freeze(z)}})));return v=function(){return A},A}var w=f.Polymer({_template:f.html(v()),is:"q-r",behaviors:[HAXBehaviors.PropertiesBehaviors],properties:{data:{type:String},title:{type:String},modulesize:{type:Number,value:4},margin:{type:Number,value:2},format:{type:String,value:"png"}},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"QR Code",description:"A code to scan from a smartphone.",icon:"hardware:developer-board",color:"grey",groups:["QR"],handles:[{type:"video",source:"data",title:"title"},{type:"image",source:"data",title:"title"},{type:"link",source:"data",title:"title"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"data",title:"QR data",description:"Source of the data for the QR code.",inputMethod:"textfield",icon:"hardware:developer-board"},{property:"title",title:"Alternate title",description:"An alternate title to go to the source of the QR code.",inputMethod:"textfield",icon:"editor:title"},{property:"modulesize",title:"Size",description:"Size of the QR code",inputMethod:"textfield",icon:"image:photo-size-select-small"},{property:"margin",title:"Margin",description:"Wrapper to the code.",inputMethod:"textfield",icon:"icons:settings-overscan"},{property:"format",title:"Output format",description:"Format to put it out.",inputMethod:"select",options:{png:"PNG",html:"HTML",svg:"SVG"},icon:"editor:bubble-chart"}],configure:[{property:"data",title:"QR data",description:"Source of the data for the QR code.",inputMethod:"textfield",icon:"hardware:developer-board"},{property:"title",title:"Alternate title",description:"An alternate title to go to the source of the QR code.",inputMethod:"textfield",icon:"editor:title"},{property:"modulesize",title:"Size",description:"Size of the QR code",inputMethod:"number",icon:"image:photo-size-select-small"},{property:"margin",title:"Margin",description:"Wrapper to the code.",inputMethod:"number",icon:"icons:settings-overscan"},{property:"format",title:"Output format",description:"Format to put it out.",inputMethod:"select",options:{png:"PNG",html:"HTML",svg:"SVG"},icon:"editor:bubble-chart"}],advanced:[]}})}}),x=function(){function z(){var D,E,F;!function(I,J){if(!(I instanceof J))throw new TypeError("Cannot call a class as a function")}(this,z),E=this,(D=(F=j(z).call(this))&&("object"==typeof F||"function"==typeof F)?F:q(E))._defineProperty=D._defineProperty.bind(q(q(D))),D.attachShadow({mode:"open"}),Object.keys(z.defaultAttributes).map(D._defineProperty);var G=g.pathFromUrl("undefined"==typeof document?new("undefined"==typeof URL?require("url").URL:URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||document.baseURI),H="".concat(G,"lib/qr.js");return window.addEventListener("es-bridge-".concat("qr","-loaded"),D._qrLoaded.bind(q(q(D)))),window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.instance.load("qr",H),D}var A,B,C;return function(D,E){if("function"!=typeof E&&null!==E)throw new TypeError("Super expression must either be null or a function");D.prototype=Object.create(E&&E.prototype,{constructor:{value:D,writable:!0,configurable:!0}}),E&&k(D,E)}(z,p(HTMLElement)),A=z,C=[{key:"defaultAttributes",get:function(){return{data:null,format:"png",modulesize:5,margin:4}}},{key:"observedAttributes",get:function(){return Object.keys(z.defaultAttributes)}}],(B=[{key:"_qrLoaded",value:function(){this.generate()}},{key:"attributeChangedCallback",value:function(D,E,F){var G=this[D+"Changed"];G&&"function"==typeof G&&G.call(this,E,F),window.ESGlobalBridge.imports.qr&&this.generate()}},{key:"_defineProperty",value:function(D){var E=this;Object.defineProperty(this,D,{get:function(){var F=E.getAttribute(D);return null===F?z.defaultAttributes[D]:F},set:function(F){E.setAttribute(D,F)}})}},{key:"getOptions",value:function(){var D=this.modulesize,E=this.margin;return{modulesize:null===D?D:parseInt(D),margin:null===E?E:parseInt(E)}}},{key:"generate",value:function(){null===this.data?this.shadowRoot.innerHTML="<div>qr-code: no data!</div>":"png"===this.format?this.generatePNG():"html"===this.format?this.generateHTML():"svg"===this.format?this.generateSVG():this.shadowRoot.innerHTML="<div>qr-code: "+this.format+" not supported!</div>"}},{key:"generatePNG",value:function(){try{var D=document.createElement("img");D.src=window.QRCode.generatePNG(this.data,this.getOptions()),this.clear(),this.shadowRoot.appendChild(D)}catch(E){this.shadowRoot.innerHTML="<div>qr-code: no canvas support!</div>"}}},{key:"generateHTML",value:function(){var D=window.QRCode.generateHTML(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(D)}},{key:"generateSVG",value:function(){var D=window.QRCode.generateSVG(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(D)}},{key:"clear",value:function(){for(;this.shadowRoot.lastChild;)this.shadowRoot.removeChild(this.shadowRoot.lastChild)}}])&&h(A.prototype,B),C&&h(A,C),z}();window.customElements.define("qr-code",x),b.QRCodeElement=x,b.QR=w,Object.defineProperty(b,"__esModule",{value:!0})});