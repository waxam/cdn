import{html,Polymer}from"./node_modules/@polymer/polymer/polymer-legacy.js";import{addDebouncer,dom,flush}from"./node_modules/@polymer/polymer/lib/legacy/polymer.dom.js";import{Templatizer}from"./node_modules/@polymer/polymer/lib/legacy/templatizer-behavior.js";import{OptionalMutableDataBehavior}from"./node_modules/@polymer/polymer/lib/legacy/mutable-data-behavior.js";let GrafittoFilter=Polymer({_template:html`
    <div id="dom"><slot></slot></div>
  `,is:"grafitto-filter",behaviors:[Templatizer,OptionalMutableDataBehavior],properties:{items:{type:Array,value:[]},like:{type:String,value:""},where:{type:String,value:"name"},caseSensitive:{type:Boolean,value:!1,reflectToAttribute:!0},as:{type:String,value:"items"},filtered:{type:Array,computed:"_computeFiltered(items, where, like, caseSensitive)",observer:"_onFilter"},f:{type:Function,notify:!0}},observers:["_populateUserTemplate(filtered)"],filter:function(){this.where=""},_computeFiltered:function(c,d,e,f){var g=null;g=f?new RegExp(e):new RegExp(e,"i");var h=[];if(this.f){var i=this.f.bind(this);h=c.filter(i)}else{var j=this._decomposeWhere.bind(this);h=c.filter(function(k){if("object"==typeof k){var l=j(d,k);return"undefined"==typeof l&&""!=d&&console.warn("grafitto-filter was unable to find a property in '"+d+"'"),g.test(l)}return"string"==typeof k?g.test(k):"number"==typeof k?g.test(k.toString()):void 0})}return h},_populateUserTemplate:function(c){return this.ctor?void(this.__clone[this.as]=c):void(this._userTemplate=this.querySelector("template"),!this._userTemplate&&console.warn("grafitto-filter requires a template to be provided in light-dom"),this.templatize(this._userTemplate),this.__clone=this.stamp(null),this.__clone[this.as]=c,dom(this).appendChild(this.__clone.root))},_decomposeWhere:function(c,d){return c.split(".").reduce(function(e,f){return e&&e[f]},d)},_onFilter:function(){this.fire("filter")}});export{GrafittoFilter};