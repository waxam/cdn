!function(b,d){"object"==typeof exports&&"undefined"!=typeof module?d(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/utils/resolve-url.js"),require("@polymer/paper-material/paper-material.js"),require("@polymer/paper-fab/paper-fab.js"),require("@polymer/paper-icon-button/paper-icon-button.js"),require("@polymer/iron-icons/iron-icons.js"),require("@polymer/iron-icons/av-icons.js"),require("@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js"),require("@lrnwebcomponents/schema-behaviors/schema-behaviors.js"),require("@lrnwebcomponents/es-global-bridge/es-global-bridge.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/utils/resolve-url.js","@polymer/paper-material/paper-material.js","@polymer/paper-fab/paper-fab.js","@polymer/paper-icon-button/paper-icon-button.js","@polymer/iron-icons/iron-icons.js","@polymer/iron-icons/av-icons.js","@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","@lrnwebcomponents/schema-behaviors/schema-behaviors.js","@lrnwebcomponents/es-global-bridge/es-global-bridge.js"],d):d(b.WavePlayer={},b.polymerLegacy_js,b.resolveUrl_js)}(this,function(b,d,f){"use strict";function g(k){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(m){return typeof m}:function(m){return m&&"function"==typeof Symbol&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m})(k)}function h(){var k,m,p=(k=["\n    <style>\n      :host {\n        height: 150px;\n        background-color: var(--dark-primary-color);\n        display: block;\n      }\n\n      paper-icon-button {\n        position: absolute;\n      }\n\n      .title,\n      .subtitle {\n        transition: all 0.5s ease;\n        padding: 10px 10px 10px 0;\n        left: 160px;\n        position: absolute;\n      }\n\n      .subtitle {\n        bottom: 0;\n      }\n\n      .controls {\n        height: 50px;\n        width: 100%;\n        top: 0;\n        background: var(--accent-color);\n        z-index: 20;\n      }\n\n      paper-fab {\n        transition: all 0.5s ease;\n        top: -25px;\n        z-index: 25;\n        border-radius: 0;\n      }\n\n      .albuminfo {\n        position: relative;\n        transition: all 0.5s ease;\n        top: -156px;\n        margin-bottom: -150px;\n        z-index: 20;\n        height: 150px;\n        background-color: rgba(0, 0, 0, 0.4);\n        color: #fff;\n        font-family: Roboto, sans-serif;\n      }\n\n      .albuminfoActive {\n        top: -25;\n        height: 25px;\n        width: 100%;\n        margin-bottom: -19px;\n      }\n\n      .waveContainer {\n        top: -31px;\n        transition: all 0.5s ease;\n        background-color: var(--dark-primary-color);\n        transform: scaleY(1.5);\n      }\n\n      .circleAnimation {\n        border-radius: 50%;\n        overflow: auto;\n        -moz-box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.4);\n        box-shadow: 0 2px 5px 0 rgba(0, 0, 0, 0.4);\n      }\n\n      .circleAnimation:active {\n        -moz-box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2);\n        box-shadow: 0 8px 17px 0 rgba(0, 0, 0, 0.2);\n      }\n\n      .playActive {\n        top: 0;\n        width: 100%;\n        height: 50px;\n      }\n\n      .waveActive {\n        top: 0px;\n        transform: scaleY(1);\n      }\n\n      .centred,\n      .titleActive {\n        transform: scaleY(0);\n      }\n\n      .titleActive {\n        opacity: 0;\n      }\n\n      #playbutton {\n        transition: all 0.5s ease;\n      }\n\n      .coverart {\n        transition: all 0.5s ease;\n        width: 150px;\n        height: 150px;\n      }\n\n      .title {\n        font-size: 24px;\n      }\n\n      .coverartActive {\n        width: 25px;\n        height: 25px;\n      }\n\n      .nameActive {\n        font-size: 19px;\n        padding: 3px 3px 3px 0;\n        left: 30px;\n      }\n\n      .centred {\n        top: calc(50% - 20px);\n        left: calc(50% - 20px);\n        transition: all 0.3s ease;\n      }\n\n      .left,\n      .middle,\n      .right {\n        transform: scale(1);\n      }\n\n      .left {\n        left: calc(25% - 20px);\n      }\n\n      .right {\n        left: calc(75% - 20px);\n      }\n\n      .hidden {\n        display: none;\n      }\n\n      @media only screen and (max-width: 500px) {\n        .albuminfo {\n          width: 100%;\n        }\n      }\n    </style>\n    <paper-fab\n      id=\"playbutton\"\n      class=\"circleAnimation\"\n      disabled=\"\"\n      icon=\"av:play-arrow\"\n      on-click=\"togglePlay\"\n    ></paper-fab>\n    <paper-material id=\"controls\" class=\"controls hidden\" elevation=\"2\">\n      <paper-icon-button\n        class=\"centred middle\"\n        style=\"color: white;\"\n        icon=\"av:pause\"\n        on-click=\"togglePlay\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"replay\"\n        class=\"centred\"\n        style=\"color: white;\"\n        icon=\"av:replay-30\"\n        on-click=\"throwBack\"\n      ></paper-icon-button>\n      <paper-icon-button\n        id=\"mute\"\n        class=\"centred\"\n        style=\"color: white;\"\n        icon=\"av:volume-up\"\n        on-click=\"toggleMute\"\n      ></paper-icon-button>\n    </paper-material>\n    <div id=\"container\" class=\"waveContainer\" elevation=\"0\"></div>\n    <div id=\"albuminfo\" class=\"albuminfo\">\n      <img class=\"coverart\" src=\"[[coverart]]\" />\n      <span class=\"title\">[[title]]</span>\n      <span class=\"subtitle\">[[subtitle]]</span>\n    </div>\n  "],m||(m=k.slice(0)),Object.freeze(Object.defineProperties(k,{raw:{value:Object.freeze(m)}})));return h=function(){return p},p}var j=d.Polymer({_template:d.html(h()),is:"wave-player",behaviors:[HAXBehaviors.PropertiesBehaviors,SchemaBehaviors.Schema],properties:{src:{type:String,notify:!0,observer:"_srcChanged"},title:{type:String,value:"",notify:!0},subtitle:{type:String,value:"",notify:!0},coverart:{type:String,value:"",notify:!0},wavesurfer:{type:Object},lean:{type:String,value:"left",notify:!0},wavecolor:{type:String,value:"#ffffff",notify:!0},progresscolor:{type:String,value:"#CFD8DC",notify:!0}},_srcChanged:function(k){"undefined"!==g(k)&&this.__wavesurfer&&window.wavesurferobject.load(k)},created:function(){var k=f.pathFromUrl("undefined"==typeof document?new("undefined"==typeof URL?require("url").URL:URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||document.baseURI),m="".concat(k,"lib/wavesurfer.js/dist/wavesurfer.js");window.addEventListener("es-bridge-".concat("wavesurfer","-loaded"),this._wavesurferLoaded.bind(this)),window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.instance.load("wavesurfer",m)},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Audio player",description:"Audio that is just like spotify.",icon:"av:play-circle-filled",color:"purple",groups:["Video","Media"],handles:[{type:"audio",source:"src",title:"title",caption:"subtitle"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],configure:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"title",title:"Title",description:"A simple title",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"}],advanced:[]}})},ready:function(){if("right"===this.lean?(this.$.playbutton.style.right="25",this.$.controls.style.right="0"):(this.$.playbutton.style.left="25",this.$.controls.style.left="0"),""===this.name&&this.$.albuminfo.classList.add("hidden"),""===this.coverart){var k=f.pathFromUrl("undefined"==typeof document?new("undefined"==typeof URL?require("url").URL:URL)("file:"+__filename).href:document.currentScript&&document.currentScript.src||document.baseURI);this.coverart="".concat(k,"lib/art.jpg")}},_wavesurferLoaded:function(){this.__wavesurfer=!0,this.initWaveSurfer()},activateAnimation:function(){var k=this.$.container,m=this.$.playbutton,p=this.$.controls,q=this.$.mute,u=this.$.replay,v=this.$.albuminfo,w=v.querySelector(".coverart"),x=v.querySelector(".title"),y=v.querySelector(".subtitle");m.setAttribute("icon","av:pause"),m.classList.remove("circleAnimation"),m.classList.add("playActive"),v.classList.add("albuminfoActive"),w.classList.add("coverartActive"),x.classList.add("nameActive"),y.classList.add("titleActive"),"right"===this.lean?this.$.playbutton.style.right="0":this.$.playbutton.style.left="0",k.classList.add("waveActive"),setTimeout(function(){p.classList.remove("hidden"),m.classList.add("hidden")},500),setTimeout(function(){q.classList.add("right"),u.classList.add("left")},600)},deactivateAnimation:function(){var k=this,m=this.$.container,p=this.$.playbutton,q=this.$.controls,u=this.$.mute,v=this.$.replay,w=this.$.albuminfo,x=w.querySelector(".coverart"),y=w.querySelector(".title"),z=w.querySelector(".subtitle");u.classList.remove("right"),v.classList.remove("left"),setTimeout(function(){q.classList.add("hidden"),p.classList.remove("hidden")},100),setTimeout(function(){p.setAttribute("icon","av:play-arrow"),p.classList.add("circleAnimation"),p.classList.remove("playActive"),w.classList.remove("albuminfoActive"),x.classList.remove("coverartActive"),y.classList.remove("nameActive"),z.classList.remove("titleActive"),"right"===k.lean?p.style.right="25":p.style.left="25",m.classList.remove("waveActive")},200)},initWaveSurfer:function(){var k=this;window.wavesurferobject=new WaveSurfer({container:this.$.container,waveColor:this.wavecolor,progressColor:this.progresscolor,fillParent:!0,height:100}),window.wavesurferobject.init(),"undefined"!==g(this.src)&&window.wavesurferobject.load(this.src),window.wavesurferobject.on("ready",function(){k.$.playbutton.removeAttribute("disabled")}),window.wavesurferobject.on("finish",function(){k.deactivateAnimation()})},togglePlay:function(){window.wavesurferobject.playPause(),"av:play-arrow"===this.$.playbutton.getAttribute("icon")?this.activateAnimation():this.deactivateAnimation()},toggleMute:function(){var m=this.$.mute,p=m.getAttribute("icon");window.wavesurferobject.toggleMute(),"av:volume-up"===p?m.setAttribute("icon","av:volume-off"):m.setAttribute("icon","av:volume-up")},throwBack:function(){window.wavesurferobject.skipBackward(30)}});b.WavePlayer=j,Object.defineProperty(b,"__esModule",{value:!0})});