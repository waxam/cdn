import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import"./a11y-media-behaviors.js";Polymer({_template:html`
    <style>
      #video {
        width: 100%;
        max-width: 100%;
        max-height: 80vh;
      }
    </style>
    <video
      id="video"
      autoplay\$="[[autoplay]]"
      crossorigin\$="[[crossorigin]]"
      hidden\$="[[audioOnly]]"
      lang\$="[[lang]]"
      src\$="[[manifest]]"
      preload="metadata"
    >
      HTML5 video not supported
    </video>
    <audio
      id="audio"
      autoplay\$="[[autoplay]]"
      crossorigin\$="[[crossorigin]]"
      hidden\$="[[!audioOnly]]"
      lang\$="[[lang]]"
      src\$="[[manifest]]"
      preload="metadata"
    >
      HTML5 audio not supported
    </audio>
  `,is:"a11y-media-loader",behaviors:[a11yMediaBehaviors.MediaProps,a11yMediaBehaviors.GeneralFunctions],ready:function(){let a=this;a.media=a.$.video===void 0?a.$.audio:a.$.video,a.media.addEventListener("loadedmetadata",function(){a.duration=0<a.media.duration?a.media.duration:0,a.tracks=[],a.volume=a.muted?0:Math.max(this.volume,10),a.seekable=a.media.seekable,a.setVolume(a.volume),a.setMute(a.muted,a.volume),a.setCC(a.cc),a.setLoop(a.loop),a.setPlaybackRate(a.playbackRate),a.aspectRatio=a.media.videoWidth/a.media.videoHeight,a.fire("media-loaded",this)})},getBufferedTime:function(){return 0<this.media.buffered.length?this.media.buffered.end(0):this.getCurrentTime()},getCurrentTime:function(){return this.media.currentTime},selectTrack:function(a){this.selectedTrack=this.media.textTracks[a];for(let b=0;b<this.media.textTracks.length;b++)parseInt(a)===b?this.media.textTracks[b].mode="showing":null!==this.media.textTracks[b]&&(this.media.textTracks[b].mode="hidden")},play:function(){this.media.play()},pause:function(){this.media.pause()},stop:function(){this.pause(),this.seek(0)},restart:function(){this.seek(0),this.play()},seek:function(a){this.media.currentTime=a},setCC:function(a){this.media.cc=a,this.selectedTrack!==void 0&&!0==a?(this.selectedTrack.mode="showing",this.$.video.textTracks.value=this.selectedTrackId):this.selectedTrack!==void 0&&null!==this.selectedTrack&&(this.selectedTrack.mode="hidden",this.$.video.textTracks.value="")},setVolume:function(a){this.media.volume=a/100},setPlaybackRate:function(a){this.media.playbackRate=null===a?1:a},setAutoplay:function(a){this.media.autoplay=a},setLoop:function(a){this.media.loop=a},setMute:function(a){this.media.muted=a}});