var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      :host {\n        display: block;\n        @apply --layout-vertical;\n      }\n\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #fff;\n        }\n      }\n\n      .box,\n      #form {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -moz-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-align: center;\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .fullbleed {\n        z-index: 1;\n      }\n\n      app-toolbar.bottom {\n        --app-toolbar-color: var(--app-primary-color);\n        --app-toolbar-background: var(--dark-theme-text-color);\n      }\n\n      app-toolbar.bottom paper-icon-button {\n        --app-toolbar-color: var(--dark-theme-text-color);\n        --app-toolbar-background: var(--app-primary-color);\n      }\n    </style>\n    <div class=\"vertical flex layout fullbleed\">\n      <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n      <app-toolbar>\n        <paper-icon-button\n          id=\"prevButton\"\n          icon=\"arrow-back\"\n          hidden$=\"{{!hasPrev}}\"\n          on-tap=\"prev\"\n          raised=\"\"\n          >{{localize('prev')}}</paper-icon-button\n        ><span class=\"title layout horizontal flex\" style=\"white-space: normal\"\n          >[[title]]</span\n        >\n        <paper-icon-button\n          id=\"nextButton\"\n          icon=\"arrow-forward\"\n          hidden$=\"{{!hasNext}}\"\n          on-tap=\"next\"\n          raised=\"\"\n          >{{localize('next')}}</paper-icon-button\n        >\n        <paper-icon-button\n          id=\"submitButton\"\n          icon=\"cloud-upload\"\n          on-tap=\"submit\"\n          raised=\"\"\n          >{{localize('submit')}}</paper-icon-button\n        >\n      </app-toolbar>\n      <iron-pages\n        id=\"form\"\n        class=\"layout horizontal flex start-justified\"\n        role=\"main\"\n        selected=\"[[page]]\"\n        attr-for-selected=\"name\"\n      ></iron-pages>\n      <app-toolbar class=\"bottom\">\n        <div hidden$=\"{{!hasPrev}}\" on-tap=\"prev\">\n          <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          >\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('prev')}}</span\n          >\n        </div>\n        <span\n          class=\"title layout horizontal flex\"\n          style=\"white-space: normal\"\n        ></span>\n        <div hidden$=\"{{!hasNext}}\" on-tap=\"next\">\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('next')}}</span\n          >\n          <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n        </div>\n      </app-toolbar>\n    </div>\n  "],["\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      :host {\n        display: block;\n        @apply --layout-vertical;\n      }\n\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #fff;\n        }\n      }\n\n      .box,\n      #form {\n        display: -webkit-box;\n        display: -webkit-flex;\n        display: -moz-box;\n        display: -ms-flexbox;\n        display: flex;\n        -webkit-flex-align: center;\n        -ms-flex-align: center;\n        -webkit-align-items: center;\n        align-items: center;\n      }\n\n      .fullbleed {\n        z-index: 1;\n      }\n\n      app-toolbar.bottom {\n        --app-toolbar-color: var(--app-primary-color);\n        --app-toolbar-background: var(--dark-theme-text-color);\n      }\n\n      app-toolbar.bottom paper-icon-button {\n        --app-toolbar-color: var(--dark-theme-text-color);\n        --app-toolbar-background: var(--app-primary-color);\n      }\n    </style>\n    <div class=\"vertical flex layout fullbleed\">\n      <!--\n        paper-icon-button id=\"camButton\" icon=\"editor:insert-photo\" raised>add photo</paper-icon-button\n      -->\n      <app-toolbar>\n        <paper-icon-button\n          id=\"prevButton\"\n          icon=\"arrow-back\"\n          hidden\\$=\"{{!hasPrev}}\"\n          on-tap=\"prev\"\n          raised=\"\"\n          >{{localize('prev')}}</paper-icon-button\n        ><span class=\"title layout horizontal flex\" style=\"white-space: normal\"\n          >[[title]]</span\n        >\n        <paper-icon-button\n          id=\"nextButton\"\n          icon=\"arrow-forward\"\n          hidden\\$=\"{{!hasNext}}\"\n          on-tap=\"next\"\n          raised=\"\"\n          >{{localize('next')}}</paper-icon-button\n        >\n        <paper-icon-button\n          id=\"submitButton\"\n          icon=\"cloud-upload\"\n          on-tap=\"submit\"\n          raised=\"\"\n          >{{localize('submit')}}</paper-icon-button\n        >\n      </app-toolbar>\n      <iron-pages\n        id=\"form\"\n        class=\"layout horizontal flex start-justified\"\n        role=\"main\"\n        selected=\"[[page]]\"\n        attr-for-selected=\"name\"\n      ></iron-pages>\n      <app-toolbar class=\"bottom\">\n        <div hidden\\$=\"{{!hasPrev}}\" on-tap=\"prev\">\n          <paper-icon-button id=\"prevButton\" icon=\"arrow-back\" raised=\"\"\n            >{{localize('prev')}}</paper-icon-button\n          >\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('prev')}}</span\n          >\n        </div>\n        <span\n          class=\"title layout horizontal flex\"\n          style=\"white-space: normal\"\n        ></span>\n        <div hidden\\$=\"{{!hasNext}}\" on-tap=\"next\">\n          <span class=\"title layout\" style=\"white-space: normal\"\n            >{{localize('next')}}</span\n          >\n          <paper-icon-button id=\"nextButton\" icon=\"arrow-forward\" raised=\"\"\n            >{{localize('next')}}</paper-icon-button\n          >\n        </div>\n      </app-toolbar>\n    </div>\n  "]);import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import{dom}from"@polymer/polymer/lib/legacy/polymer.dom.js";import"@polymer/iron-flex-layout/iron-flex-layout-classes.js";import"@polymer/iron-icons/image-icons.js";import"@polymer/iron-icons/iron-icons.js";import"@polymer/iron-icons/editor-icons.js";import"@polymer/iron-pages/iron-pages.js";import"@polymer/app-layout/app-toolbar/app-toolbar.js";import"@polymer/paper-menu-button/paper-menu-button.js";import"@polymer/paper-icon-button/paper-icon-button.js";import"@polymer/paper-ripple/paper-ripple.js";import{AppLocalizeBehavior}from"@polymer/app-localize-behavior/app-localize-behavior.js";import"./eco-json-schema-object.js";import"./eco-json-schema-array.js";import"./eco-json-schema-boolean.js";import"./eco-json-schema-enum.js";import"./eco-json-schema-file.js";import"./eco-json-schema-input.js";Polymer({is:"eco-json-schema-wizard",behaviors:[AppLocalizeBehavior],_template:html(_templateObject),properties:{language:{type:String,notify:!0},resources:{type:Object,notify:!0},schema:{type:Object,notify:!0,observer:"_schemaChanged"},label:{type:String},value:{type:Object,notify:!0,value:function(){return{}}},page:{type:String,notify:!0,observer:"_pageChanged"},pages:{type:Array,notify:!0,value:[]},error:{type:Object,observer:"_errorChanged"},isReview:{type:Boolean,value:!1,notify:!0},canSubmit:{type:Boolean,notify:!0},hasNext:{type:Boolean,notify:!0},hasPrev:{type:Boolean,notify:!0},titles:{type:Array,notify:!0,value:[]},title:{type:String,value:"",notify:!0}},detached:function(){this._clearForm()},_buildSchemaProperties:function(){var b=this;this._schemaProperties=Object.keys(this.schema.properties||[]).map(function(c){var d=b.schema.properties[c],e={property:c,label:d.title||c,schema:d,component:d.component||{}};if(e.component.valueProperty||(e.component.valueProperty="value"),b._isSchemaEnum(d))e.component.name=e.component.name||"eco-json-schema-enum",e.value="";else if(b._isSchemaBoolean(d.type))e.component.name=e.component.name||"eco-json-schema-boolean",e.value=!1;else if(b._isSchemaFile(d.type))e.component.name=e.component.name||"eco-json-schema-file",e.value="";else if(b._isSchemaValue(d.type))e.component.name=e.component.name||"eco-json-schema-input",e.value="";else if(b._isSchemaObject(d.type))e.component.name=e.component.name||"eco-json-schema-object",e.component.wizard=!0,e.value={};else if(b._isSchemaArray(d.type))e.component.name=e.component.name||"eco-json-schema-array",e.value=[];else return console.error("Unknown property type %s",d.type);return b.push("pages",c),b.push("titles",d.title),e})},_schemaPropertyChanged:function(b,c){if(!(c.path&&/\.length$/.test(c.path))){var d=this,e=b.target.schemaProperty,f=["value",e.property];if(c.path&&/\.splices$/.test(c.path)){for(var g=c.path.split(".").slice(1,-1);g.length;)f.push(g.shift()),e.keyMap&&e.keyMap[f.join(".")]&&(f=e.keyMap[f.join(".")].split("."));c.value.keySplices&&e.keyMap&&c.value.keySplices.forEach(function(l){l.removed.forEach(function(m){delete e.keyMap[f.concat([m]).join(".")]})}),c.value.indexSplices.forEach(function(l){var m=[f.join("."),l.index,l.removed.length];if(l.addedCount)for(var n=0,p=l.addedCount;n<p;n++)l.addedKeys&&l.addedKeys[n]&&(e.keyMap=e.keyMap||{},e.keyMap[f.concat([l.addedKeys[n]]).join(".")]=f.concat([n+l.index]).join(".")),m.push(d._deepClone(l.object[n+l.index]));d.splice.apply(d,m)})}else if(c.path){var g=c.path.split(".").slice(1),h=this.value;for(h.hasOwnProperty(e.property)||this.set("value."+e.property,{});g.length;){var j=g.shift();f.push(j),e.keyMap&&e.keyMap[f.join(".")]&&(f=e.keyMap[f.join(".")].split("."))}this.set(f.join("."),this._deepClone(c.value)),console.log("value: "+JSON.stringify(this.value))}}},_setValue:function(){var b=this,c={};this._schemaProperties.forEach(function(d){c[d.property]=b._deepClone(d.value)}),this.value=c},_buildForm:function(){var b=this,c=this;this._schemaProperties.forEach(function(d){var e=c.create(d.component.name,{label:d.label,schema:d.schema,schemaProperty:d,language:b.language,resources:b.resources});e.setAttribute("name",d.property),e.className="flex start-justified",d.value=e[d.component.valueProperty],c.listen(e,d.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),dom(c.$.form).appendChild(e)})},_removePropertyEl:function(b){babelHelpers.typeof(b.schemaProperty)!=="undefined"&&this.unlisten(b,b.schemaProperty.component.valueProperty.replace(/([A-Z])/g,"-$1").toLowerCase()+"-changed","_schemaPropertyChanged"),b.schemaProperty=null,dom(this.$.form).removeChild(b)},_clearForm:function(){for(var b=dom(this.$.form);b.firstChild;)this._removePropertyEl(b.firstChild)},_schemaChanged:function(){this._clearForm(),this._buildSchemaProperties(),this._buildForm(),this._setValue(),0<this.pages.length&&this.set("page",this.pages[0]),this.set("title",this.titles[0])},next:function(){var b=this.pages.indexOf(this.page),a=b;-1===b?console.log("Invalid current page in wizard"):(b<this.pages.length-1&&(a=b+1),this.set("page",this.pages[a]),this.set("title",this.titles[a]))},prev:function(){var b=this.pages.indexOf(this.page),a=b;-1===b?console.log("Invalid current page in wizard"):(0<b&&(a=b-1),this.set("page",this.pages[a]),this.set("title",this.titles[a]))},submit:function(){this.fire("submit")},_pageChanged:function(){var b=this.pages.indexOf(this.page);0===b?this.set("hasPrev",!1):this.set("hasPrev",!0),b===this.pages.length-1?this.set("hasNext",!1):this.set("hasNext",!0)},_errorChanged:function(){var b=this;dom(this.$.form).childNodes.forEach(function(c){var d=c.getAttribute("name");c.error=b.error&&b.error[d]?b.error[d]:null})},_deepClone:function(b){return JSON.parse(JSON.stringify(b))},_isSchemaValue:function(b){return this._isSchemaBoolean(b)||this._isSchemaNumber(b)||this._isSchemaString(b)||this._isSchemaFile(b)},_isSchemaFile:function(b){return Array.isArray(b)?-1!==b.indexOf("file"):"file"===b},_isSchemaBoolean:function(b){return Array.isArray(b)?-1!==b.indexOf("boolean"):"boolean"===b},_isSchemaEnum:function(b){return!!b.enum},_isSchemaNumber:function(b){return Array.isArray(b)?-1!==b.indexOf("number")||-1!==b.indexOf("integer"):"number"===b||"integer"===b},_isSchemaString:function(b){return Array.isArray(b)?-1!==b.indexOf("string"):"string"===b},_isSchemaObject:function(b){return"object"===b},_isSchemaArray:function(b){return"array"===b}});