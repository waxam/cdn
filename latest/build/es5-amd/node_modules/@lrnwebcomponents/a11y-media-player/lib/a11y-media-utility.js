var _Polymer;import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import"@polymer/iron-resizable-behavior/iron-resizable-behavior.js";window.A11yMediaUtility={},Polymer((_Polymer={is:"a11y-media-utility",properties:{players:{type:Array,value:[]},stickyPlayer:{type:Object,value:null}},created:function(){var b=this;this.__playerLoader=function(c){b.players.push(c.detail)},window.A11yMediaUtility.instance||(window.A11yMediaUtility.instance=this,document.body.addEventListener("a11y-player",b.__playerLoader))},attached:function(){var b=this;this.__stickyManager=function(c){b.setStickyPlayer(c.detail)},this.__scrollChecker=function(){b._checkScroll()},document.body.addEventListener("a11y-player-playing",b.__stickyManager),window.addEventListener("scroll",b.__scrollChecker)},detached:function(){var b=this;document.body.removeEventListener("a11y-player",b.__playerLoader),document.body.removeEventListener("a11y-player-playing",b.__stickyManager),window.removeEventListener("scroll",b.__scrollChecker)},checkConcurrentPlayers:function(){for(var f,b=this,c=b.stickyPlayer,d=0;d<b.players.length;d++)f=b.players[d],f===c||c.allowConcurrent&&f.allowConcurrent||f.pause()}},babelHelpers.defineProperty(_Polymer,"checkConcurrentPlayers",function(){for(var f,b=this,c=b.stickyPlayer,d=0;d<b.players.length;d++)f=b.players[d],f===c||c.allowConcurrent&&f.allowConcurrent||f.pause()}),babelHelpers.defineProperty(_Polymer,"setStickyPlayer",function(b){var c=this,d=c._getParentNode(b);c.__playerTop=d.offsetTop,c.__playerUpperMiddle=c.__playerTop+0.9*d.offsetHeight,c.__playerLowerMiddle=c.__playerTop+0.1*d.offsetHeight,b!==c.stickyPlayer&&c.stickyPlayer!==void 0&&null!==c.stickyPlayer&&(c.stickyPlayer.toggleSticky(!1),c.__parent.style.height="unset"),d.style.height=d.offsetHeight+"px",c.__parent=d,c.stickyPlayer=b,b.allowConcurrent||c.checkConcurrentPlayers(),c._checkScroll()}),babelHelpers.defineProperty(_Polymer,"_checkScroll",function(){var b=this,c=window.pageYOffset,d=c+window.innerHeight;b.stickyPlayer!==void 0&&null!==b.stickyPlayer&&(b.stickyPlayer.__playing&&(b.__playerLowerMiddle>d||b.__playerUpperMiddle<c)?b.stickyPlayer.toggleSticky(!0):b.stickyPlayer.toggleSticky(!1))}),babelHelpers.defineProperty(_Polymer,"_getParentNode",function(b){var c=b.parentNode;return void 0!==c&&null!==c&&c.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(c=c.host),c}),_Polymer)),window.A11yMediaUtility.instance=null,window.A11yMediaUtility.requestAvailability=function(){window.A11yMediaUtility.instance||(window.A11yMediaUtility.instance=document.createElement("a11y-media-utility")),document.body.appendChild(window.A11yMediaUtility.instance)};