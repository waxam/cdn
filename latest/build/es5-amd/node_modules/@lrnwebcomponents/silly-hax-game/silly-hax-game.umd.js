!function(b,c){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?c(exports,require("@polymer/polymer/polymer-legacy.js"),require("@lrnwebcomponents/simple-timer/simple-timer.js"),require("@lrnwebcomponents/simple-modal/simple-modal.js"),require("@lrnwebcomponents/to-do/to-do.js"),require("@polymer/paper-card/paper-card.js"),require("@polymer/paper-button/paper-button.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@lrnwebcomponents/simple-timer/simple-timer.js","@lrnwebcomponents/simple-modal/simple-modal.js","@lrnwebcomponents/to-do/to-do.js","@polymer/paper-card/paper-card.js","@polymer/paper-button/paper-button.js"],c):c(b.SillyHaxGame={},b.polymerLegacy_js)}(this,function(b,c){"use strict";function d(h){return(d="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(j){return"undefined"===typeof j?"undefined":babelHelpers.typeof(j)}:function(j){return j&&"function"==typeof Symbol&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":"undefined"===typeof j?"undefined":babelHelpers.typeof(j)})(h)}function f(){var h,j,k=(h=["\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <paper-card heading=\"[[haxText]]\" elevation=\"1\">\n      <simple-timer\n        id=\"timer\"\n        start-time=\"60\"\n        count-up=\"\"\n        hidden=\"\"\n        current-time=\"{{timer}}\"\n      ></simple-timer>\n      <div class=\"card-content\">\n        <to-do\n          items=\"{{tasks}}\"\n          hide-form=\"\"\n          id=\"todo\"\n          name=\"Hax Challenge\"\n        ></to-do>\n      </div>\n      <div class=\"card-actions\">\n        <paper-button id=\"play\" raised=\"\" on-tap=\"_playButton\"\n          >Play</paper-button\n        >\n        <paper-button raised=\"\" on-tap=\"_resetTimer\">Reset</paper-button>\n      </div>\n    </paper-card>\n  "],j||(j=h.slice(0)),Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(j)}})));return f=function(){return k},k}var g=c.Polymer({_template:c.html(f()),is:"silly-hax-game",properties:{tasks:{type:Array,value:[]},haxText:{type:String,computed:"_haxTextValue(timer)"},__score:{type:Array,value:[]},tweet:{type:String},timer:{type:Number},playing:{type:Boolean,value:!1,observer:"_playGame",reflectToAttribute:!0}},_playButton:function(){this.playing||(this.playing=!0,this.$.timer.start())},_playGame:function(j){j&&(this.__started=!0,this.set("tasks",[]),this.push("tasks",{value:!1,label:"Start to edit with HAX",disabled:!0,id:"play"},{value:!1,label:"Embed a video by Searching for it",disabled:!0,id:"youtube"},{value:!1,label:"Turn a NASA image into a meme",disabled:!0,id:"nasa"},{value:!1,label:"Saved content!!!",disabled:!0,id:"saved"}))},_resetTimer:function(){this.$.timer.pause(),this.playing=!1,this.timer=0,this.set("tasks",[])},_haxTextValue:function(j){return"undefined"===d(j)||60==j?"Take the HAX challenge":j.toFixed(2)},attached:function(){document.body.addEventListener("hax-body-tag-added",this._verifyAction.bind(this)),document.body.addEventListener("hax-store-property-updated",this._propertyUpdated.bind(this))},_propertyUpdated:function(j){switch(j.detail.property){case"editMode":this.playing&&this.__started&&j.detail.value&&"undefined"!==d(this.tasks[0].label)?(this.set("tasks.0.value",!0),this.set("tasks.0.label",this.tasks[0].label+" - "+this.timer.toFixed(2)+" seconds")):!1===j.detail.value&&this.__started&&this.playing&&(this.set("tasks."+(parseInt(this.tasks.length)-1)+".value",!0),this.set("tasks."+(parseInt(this.tasks.length)-1)+".label",this.tasks[parseInt(this.tasks.length)-1].label+" - "+this.timer.toFixed(2)+" seconds"),this.$.timer.pause(),this._verifyWin());}},_verifyWin:function(){var j=!0,k=0;for(var l in this.set("__score",this.tasks),this.tasks)this.tasks[l].value?k++:j=!1;0===this.timer?(j=!1,this.push("__score",{value:!1,label:"You ran out of time :(",disabled:!0,id:"time"})):j?(this.push("__score",{value:!0,label:"You did it!!! <(:) Much Success!",disabled:!0,id:"time"}),k++):this.push("__score",{value:!1,label:"You didn't complete everything. CHEATER!",disabled:!0,id:"cheater"}),j?(this.__successText="YOU ARE A HAX MASTER! YOU BEAT ALL "+this.tasks.length+" CHALLENGES. AM I USING ENOUGH CAPSLOCK!? YOU BET I AM! TWEET YOUR SUCCESS NOW!",this.tweet="http://twitter.com/home?status="+encodeURIComponent("I are winning! I beat the #HaxtheWeb Challenge in "+this.timer.toFixed(2)+" seconds. Now I drink more coffee and code less! Take the challenge at http://haxtheweb.org/ !")):(this.__successText=":( You have much sadness by only completing "+k+" of the available "+this.tasks.length+" challenges. If you experienced confusion when using the interface for certain tasks please let us know! We want everyone to be able to master HAX.",this.tweet="http://twitter.com/home?status="+encodeURIComponent("I took the #HaxtheWeb Challenge and finished "+k+" challenges! Take the challenge at http://haxtheweb.org/ !"));var m=document.createElement("div");m.innerHTML="<p>".concat(this.__successText,"\n      <a href=\"https://github.com/elmsln/lrnwebcomponents/issues/new\" target=\"_blank\" style=\"text-decoration: none;text-transform: none;\"><paper-button raised=\"\">Give us feedback to improve</paper-button></a>\n      <a href=\"").concat(this.tweet,"\" target=\"_blank\" style=\"text-decoration: none;text-transform: none;\"><paper-button raised=\"\">Tweet your score</paper-button></a>\n    </p>");var o=document.createElement("to-do");o.setAttribute("hide-form","hide-form"),o.setAttribute("name","Report card"),o.setAttribute("items",JSON.stringify(this.__score,null,2)),m.appendChild(o);var p=new CustomEvent("simple-modal-show",{bubbles:!0,cancelable:!0,detail:{title:"HAX Challenge score",elements:{content:m},invokedBy:this.$.play,clone:!0}});this.dispatchEvent(p)},_verifyAction:function(j){this.playing&&this.__started&&("VIDEO-PLAYER"===j.detail.node.tagName?(this.set("tasks.1.value",!0),this.set("tasks.1.label",this.tasks[1].label+" - "+this.timer.toFixed(2)+" seconds")):"MEME-MAKER"===j.detail.node.tagName&&(this.set("tasks.2.value",!0),this.set("tasks.2.label",this.tasks[2].label+" - "+this.timer.toFixed(2)+" seconds")))}});b.SillyHaxGame=g,Object.defineProperty(b,"__esModule",{value:!0})});