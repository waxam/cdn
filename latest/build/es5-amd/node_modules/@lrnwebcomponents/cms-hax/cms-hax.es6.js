var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        font-size: 16px;\n        box-sizing: content-box;\n      }\n    </style>\n    <iron-ajax\n      id=\"pageupdateajax\"\n      url=\"[[endPoint]]\"\n      method=\"[[method]]\"\n      body=\"[[updatePageData]]\"\n      content-type=\"application/json\"\n      handle-as=\"json\"\n      on-response=\"_handleUpdateResponse\"\n    ></iron-ajax>\n    <paper-toast id=\"toast\" horizontal-align=\"left\"></paper-toast>\n    <hax-store\n      hidden=\"\"\n      app-store=\"[[appStoreConnection]]\"\n      valid-tag-list=\"[[allowedTags]]\"\n    ></hax-store>\n    <hax-autoloader id=\"loader\" hidden=\"\"></hax-autoloader>\n    <hax-panel\n      id=\"panel\"\n      hide-export-button=\"{{hideExportButton}}\"\n      hide-panel-ops=\"[[hidePanelOps]]\"\n      hide-preferences-button=\"[[hidePreferencesButton]]\"\n      align=\"[[align]]\"\n    ></hax-panel>\n    <hax-body id=\"body\" context-offset-left=\"[[bodyOffsetLeft]]\"></hax-body>\n    <hax-manager></hax-manager>\n    <hax-app-picker></hax-app-picker>\n    <hax-export-dialog></hax-export-dialog>\n    <cms-token></cms-token>\n    <cms-views></cms-views>\n    <cms-block></cms-block>\n    <cms-entity></cms-entity>\n  "],["\n    <style>\n      :host {\n        display: block;\n        font-size: 16px;\n        box-sizing: content-box;\n      }\n    </style>\n    <iron-ajax\n      id=\"pageupdateajax\"\n      url=\"[[endPoint]]\"\n      method=\"[[method]]\"\n      body=\"[[updatePageData]]\"\n      content-type=\"application/json\"\n      handle-as=\"json\"\n      on-response=\"_handleUpdateResponse\"\n    ></iron-ajax>\n    <paper-toast id=\"toast\" horizontal-align=\"left\"></paper-toast>\n    <hax-store\n      hidden=\"\"\n      app-store=\"[[appStoreConnection]]\"\n      valid-tag-list=\"[[allowedTags]]\"\n    ></hax-store>\n    <hax-autoloader id=\"loader\" hidden=\"\"></hax-autoloader>\n    <hax-panel\n      id=\"panel\"\n      hide-export-button=\"{{hideExportButton}}\"\n      hide-panel-ops=\"[[hidePanelOps]]\"\n      hide-preferences-button=\"[[hidePreferencesButton]]\"\n      align=\"[[align]]\"\n    ></hax-panel>\n    <hax-body id=\"body\" context-offset-left=\"[[bodyOffsetLeft]]\"></hax-body>\n    <hax-manager></hax-manager>\n    <hax-app-picker></hax-app-picker>\n    <hax-export-dialog></hax-export-dialog>\n    <cms-token></cms-token>\n    <cms-views></cms-views>\n    <cms-block></cms-block>\n    <cms-entity></cms-entity>\n  "]);import{html,Polymer}from"./node_modules/@polymer/polymer/polymer-legacy.js";import{dom}from"./node_modules/@polymer/polymer/lib/legacy/polymer.dom.js";import{FlattenedNodesObserver}from"./node_modules/@polymer/polymer/lib/utils/flattened-nodes-observer.js";import"./node_modules/@polymer/iron-ajax/iron-ajax.js";import"./node_modules/@polymer/paper-toast/paper-toast.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-store.js";import"./node_modules/@lrnwebcomponents/hax-body/hax-body.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-autoloader.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-manager.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-panel.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-app-picker.js";import"./node_modules/@lrnwebcomponents/hax-body/lib/hax-export-dialog.js";import"./lib/cms-token.js";import"./lib/cms-block.js";import"./lib/cms-views.js";import"./lib/cms-entity.js";var CmsHax=Polymer({_template:html(_templateObject),is:"cms-hax",properties:{openDefault:{type:Boolean,value:!1},hideExportButton:{type:Boolean,value:!0},hidePanelOps:{type:Boolean,value:!1},hidePreferencesButton:{type:Boolean,value:!1},align:{type:String,value:"right"},allowedTags:{type:Array},endPoint:{type:String},method:{type:String,value:"PUT"},updatePageData:{type:String},appStoreConnection:{type:Object},bodyOffsetLeft:{type:Number,value:-164},editMode:{type:Boolean,reflectToAttribute:!0},syncBody:{type:Boolean,value:!1},bodyValue:{type:String,value:""},hideMessage:{type:Boolean,value:!1},redirectLocation:{type:String},redirectOnSave:{type:Boolean,computed:"_computeRedirectOnSave(redirectLocation)"},activeHaxBody:{type:Object,observer:"_activeHaxBodyUpdated"},__imported:{type:Boolean,value:!1}},_activeHaxBodyUpdated:function(b){if(null!=b&&!this.__imported){this.__imported=!0;var d=this.queryEffectiveChildren("template");("undefined"===typeof d?"undefined":babelHelpers.typeof(d))!==babelHelpers.typeof(void 0)&&b.importContent(d.innerHTML)}},_computeRedirectOnSave:function(b){return("undefined"===typeof b?"undefined":babelHelpers.typeof(b))!==babelHelpers.typeof(void 0)},created:function(){document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))},attached:function(){var b=this;this.__lock=!1,document.body.addEventListener("hax-save",this._saveFired.bind(this)),this.openDefault&&window.HaxStore.write("editMode",!0,this),this.syncBody&&FlattenedNodesObserver(this.$.body,function(){b.__lock||(b.__lock=!0,b.fire("hax-body-content-changed",window.HaxStore.instance.activeHaxBody.haxToContent()),setTimeout(function(){b.__lock=!1},100))})},_haxStorePropertyUpdated:function(b){b.detail&&babelHelpers.typeof(b.detail.value)!==babelHelpers.typeof(void 0)&&b.detail.property&&("object"===babelHelpers.typeof(b.detail.value)&&this.set(b.detail.property,null),this.set(b.detail.property,b.detail.value),this.notifyPath(b.detail.property))},_saveFired:function(){this.updatePageData=window.HaxStore.instance.activeHaxBody.haxToContent(),this.$.pageupdateajax.generateRequest()},_handleUpdateResponse:function(){var c=this;this.hideMessage||(this.$.toast.show("Saved!"),this.redirectOnSave&&setTimeout(function(){c.$.panel.toggle(),window.location=c.redirectLocation},1e3))}});export{CmsHax};