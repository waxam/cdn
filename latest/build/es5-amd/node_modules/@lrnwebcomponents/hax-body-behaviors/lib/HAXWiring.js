import{dom}from"@polymer/polymer/lib/legacy/polymer.dom.js";export var HAXWiring=function a(){var b=this;babelHelpers.classCallCheck(this,a),this.haxProperties={canScale:!1,canPosition:!1,canEditSource:!1,settings:{quick:[],configure:[],advanced:[]},wipeSlot:{}},this.setup=function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:b;return babelHelpers.typeof(b.tagName)!=="undefined"&&(d=b.tagName.toLowerCase()),window.addEventListener("hax-store-ready",b._haxStoreReady.bind(b)),babelHelpers.typeof(window.HaxStore)!=="undefined"&&null!=window.HaxStore.instance&&window.HaxStore.ready?b.setHaxProperties(c,d,f,!0):b.setHaxProperties(c,d,f,!1)},this._haxStoreReady=function(c){if(c.detail&&babelHelpers.typeof(b.tagName)!=="undefined"&&babelHelpers.typeof(b.haxProperties)!=="undefined"){var d=b.tagName,f=b.haxProperties,g=b;if(""!==d&&babelHelpers.typeof(window.HaxStore)==="undefined"){var h=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:d.toLowerCase(),properties:f,polymer:!1}});g.dispatchEvent(h)}else if(""!==d&&babelHelpers.typeof(window.HaxStore)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance)!=="undefined"&&null!=window.HaxStore.instance&&babelHelpers.typeof(window.HaxStore.instance.elementList)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance.elementList[d.toLowerCase()])==="undefined"){var j=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:d.toLowerCase(),properties:f}});g.dispatchEvent(j)}else if(babelHelpers.typeof(b.tagName)!=="undefined"&&babelHelpers.typeof(window.HaxStore)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance)!=="undefined"&&null!=window.HaxStore.instance&&babelHelpers.typeof(window.HaxStore.instance.elementList)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance.elementList[b.tagName.toLowerCase()])==="undefined"){var k=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:b.tagName.toLowerCase(),properties:f}});g.dispatchEvent(k)}}},this.setHaxProperties=function(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,g=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if(babelHelpers.typeof(c.api)==="undefined"&&(c.api="1"),"1"==c.api){if(babelHelpers.typeof(c.canPosition)==="undefined"&&(c.canPosition=!0),babelHelpers.typeof(c.canScale)==="undefined"&&(c.canScale=!0),babelHelpers.typeof(c.canEditSource)==="undefined"&&(c.canEditSource=!1),babelHelpers.typeof(c.gizmo)==="undefined"&&(c.gizmo=!1),babelHelpers.typeof(c.settings)!=="undefined"){babelHelpers.typeof(c.settings.quick)==="undefined"&&(c.settings.quick=[]);for(var h=0;h<c.settings.quick.length;h++)c.settings.quick[h]=b.validateSetting(c.settings.quick[h]),c.settings.quick[h]||c.settings.quick.splice(h,1);babelHelpers.typeof(c.settings.configure)==="undefined"&&(c.settings.configure=[]);for(var j=0;j<c.settings.configure.length;j++)c.settings.configure[j]=b.validateSetting(c.settings.configure[j]),c.settings.configure[j]||c.settings.configure.splice(j,1);babelHelpers.typeof(c.settings.advanced)==="undefined"&&(c.settings.advanced=[]);for(var k=0;k<c.settings.advanced.length;k++)c.settings.advanced[k]=b.validateSetting(c.settings.advanced[k]),c.settings.advanced[k]||c.settings.advanced.splice(k,1);c.settings.advanced.push({attribute:"class",title:"Classes",description:"CSS classes applied manually to the element",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"style",title:"Styles",description:"Custom CSS styles as applied to the element",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"prefix",title:"Schema: prefix",description:"Schema prefixes",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"typeof",title:"Schema: TypeOf",description:"typeof definition for Schema usage",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"property",title:"Schema: Property",description:"typeof definition for Schema usage",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"resource",title:"Schema: Resource ID",description:"Schema resource identifier",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"id",title:"ID",description:"element ID, only set this if you know why",inputMethod:"textfield"}),c.settings.advanced.push({attribute:"slot",title:"slot",description:"DOM slot area",inputMethod:"textfield"})}if(babelHelpers.typeof(c.saveOptions)==="undefined"&&(c.saveOptions={wipeSlot:!1}),g)if(""!==d&&babelHelpers.typeof(window.HaxStore)==="undefined"){var l=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:d.toLowerCase(),properties:c,polymer:!1}});f.dispatchEvent(l)}else if(""!==d&&babelHelpers.typeof(window.HaxStore)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance)!=="undefined"&&null!=window.HaxStore.instance&&babelHelpers.typeof(window.HaxStore.instance.elementList)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance.elementList[d.toLowerCase()])==="undefined"){var m=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:d.toLowerCase(),properties:c}});f.dispatchEvent(m)}else if(babelHelpers.typeof(b.tagName)!=="undefined"&&babelHelpers.typeof(window.HaxStore)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance)!=="undefined"&&null!=window.HaxStore.instance&&babelHelpers.typeof(window.HaxStore.instance.elementList)!=="undefined"&&babelHelpers.typeof(window.HaxStore.instance.elementList[b.tagName.toLowerCase()])==="undefined"){var n=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:b.tagName.toLowerCase(),properties:c}});f.dispatchEvent(n)}""===d&&("function"===typeof b._setHaxProperties?b._setHaxProperties(c):b.haxProperties=c)}else console.warn("This is't a valid usage of hax API. See hax-body-behaviors/lib/HAXWiring.js for more details on how to implement the API. Most likely your hax item just was placed in an iframe as a fallback as opposed to a custom element.")},this.validateSetting=function(c){return babelHelpers.typeof(c.property)==="undefined"&&babelHelpers.typeof(c.slot)==="undefined"&&babelHelpers.typeof(c.attribute)==="undefined"?!1:(babelHelpers.typeof(c.title)==="undefined"&&(babelHelpers.typeof(c.attribute)==="undefined"?c.title=c.property:c.title=c.attribute),babelHelpers.typeof(c.description)==="undefined"&&(c.description=""),babelHelpers.typeof(c.inputMethod)==="undefined"&&(c.inputMethod="textfield"),babelHelpers.typeof(c.type)==="undefined"&&(c.type="settings"),babelHelpers.typeof(c.icon)==="undefined"&&(c.icon="android"),babelHelpers.typeof(c.options)==="undefined"&&(c.options={}),babelHelpers.typeof(c.required)==="undefined"&&(c.required=!1),babelHelpers.typeof(c.validation)==="undefined"&&(c.validation=".*"),babelHelpers.typeof(c.validationType)==="undefined"&&(c.validationType=""),c)},this.getHaxProperties=function(){return b.haxProperties},this.getHaxJSONSchema=function(c,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:b;("undefined"===typeof c?"undefined":babelHelpers.typeof(c))==="undefined"&&(c="configure"),("undefined"===typeof d?"undefined":babelHelpers.typeof(d))==="undefined"&&(d=f.haxProperties);var g=d.settings[c],h={$schema:"http://json-schema.org/schema#",title:"HAX "+c+" form schema",type:"object",properties:{}};return h.properties=f._getHaxJSONSchemaProperty(g,f),h=f.postProcessgetHaxJSONSchema(h),h},this.postProcessgetHaxJSONSchema=function(c){return c},this._getHaxJSONSchemaProperty=function(c,d){var f={};for(var g in c)if(c.hasOwnProperty(g))if(babelHelpers.typeof(c[g].property)!=="undefined")switch(f[c[g].property]={title:c[g].title,type:d.getHaxJSONSchemaType(c[g].inputMethod)},babelHelpers.typeof(d[c[g].property])!=="undefined"&&(f[c[g].property].value=d[c[g].property]),"url"==c[g].validationType&&(f[c[g].property].format="uri"),"datepicker"==c[g].inputMethod&&(f[c[g].property].format="date-time"),".*"!=c[g].validation&&(f[c[g].property].pattern=c[g].validation),c[g].inputMethod){case"number":f[c[g].property].component={name:"paper-input",valueProperty:"value",properties:{required:c[g].required},attributes:{type:"number"}};break;case"select":var h="";if(babelHelpers.typeof(c[g].options)!=="undefined")for(var j in c[g].options)h+="<paper-item value=\""+j+"\">"+c[g].options[j]+"</paper-item>\n";f[c[g].property].component={name:"dropdown-select",valueProperty:"value",slot:h,properties:{required:c[g].required}};break;case"textarea":f[c[g].property].component={name:"paper-textarea",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate","char-counter":"char-counter"}};break;case"code-editor":f[c[g].property].component={name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:c[g].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}};break;case"array":f[c[g].property].items={type:"object",properties:d._getHaxJSONSchemaProperty(c[g].properties,d)};break;case"textfield":f[c[g].property].component={name:"paper-input",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate"}};break;case"alt":f[c[g].property].component={name:"paper-input-flagged",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate"}};break;case"colorpicker":f[c[g].property].component={name:"paper-swatch-picker",valueProperty:"color",properties:{required:c[g].required}};break;case"iconpicker":f[c[g].property].component={name:"paper-icon-picker",valueProperty:"icon",properties:{required:c[g].required}},c[g].options.constructor===Array&&(f[c[g].property].component.properties.iconList=c[g].options);break;case"datepicker":f[c[g].property].component={name:"app-datepicker",valueProperty:"date",properties:{required:c[g].required,autoUpdateDate:!0}};}else if(babelHelpers.typeof(c[g].attribute)!=="undefined")switch(f[c[g].attribute]={title:c[g].title,type:d.getHaxJSONSchemaType(c[g].inputMethod)},"class"===c[g].attribute?f[c[g].attribute].value=d.className:"style"===c[g].attribute?f[c[g].attribute].value=d.style.cssText:babelHelpers.typeof(d.attributes[c[g].attribute])!=="undefined"&&(f[c[g].attribute].value=d.getAttribute(c[g].attribute)),("href"==g||"src"==g)&&(f[c[g].attribute].format="uri"),"url"==c[g].validationType&&(f[c[g].attribute].format="uri"),"datepicker"==c[g].inputMethod&&(f[c[g].attribute].format="date-time"),".*"!=c[g].validation&&(f[c[g].attribute].pattern=c[g].validation),c[g].inputMethod){case"number":f[c[g].attribute].component={name:"paper-input",valueProperty:"value",properties:{required:c[g].required},attributes:{type:"number"}};break;case"select":var h="";if(babelHelpers.typeof(c[g].options)!=="undefined")for(var j in c[g].options)h+="<paper-item value=\""+j+"\">"+c[g].options[j]+"</paper-item>\n";f[c[g].attribute].component={name:"dropdown-select",valueProperty:"value",slot:h,properties:{required:c[g].required}};break;case"textarea":f[c[g].attribute].component={name:"paper-textarea",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate","char-counter":"char-counter"}};break;case"code-editor":f[c[g].attribute].component={name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:c[g].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}};break;case"textfield":f[c[g].attribute].component={name:"paper-input",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate"}};break;case"alt":f[c[g].attribute].component={name:"paper-input-flagged",valueProperty:"value",properties:{required:c[g].required},attributes:{"auto-validate":"auto-validate"}};break;case"colorpicker":f[c[g].attribute].component={name:"paper-swatch-picker",valueProperty:"color",properties:{required:c[g].required}};}else{f[c[g].slot]={title:c[g].title,type:d.getHaxJSONSchemaType(c[g].inputMethod),value:"",component:{name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:c[g].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}}};var h="";for(var k in dom(d).childNodes)babelHelpers.typeof(dom(d).childNodes[k])!=="undefined"&&(1===dom(d).childNodes[k].nodeType?h+=dom(d).childNodes[k].innerHTML:1!==dom(d).childNodes[k].nodeType&&babelHelpers.typeof(dom(d).childNodes[k].textContent)!=="undefined"&&""!==dom(d).childNodes[k].textContent&&(h+=dom(d).childNodes[k].textContent));f[c[g].slot].component.slot="<template>"+h+"</template>"}return f},this.getHaxJSONSchemaType=function(c){var d=b.validHAXPropertyInputMethod();if(d.includes(c))switch(c){case"flipboolean":case"boolean":return"boolean";break;case"number":return"number";break;case"select":case"textarea":case"colorpicker":case"iconpicker":case"datepicker":case"textfield":case"alt":return"string";break;case"array":return"array";break;default:return"string";}},this.validHAXPropertyInputMethod=function(){return["flipboolean","boolean","select","textfield","textarea","datepicker","colorpicker","iconpicker","alt","number","code-editor","array"]},this.prototypeHaxProperties=function(){return{api:"1",canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Tag name",description:"A description",icon:"av:play-circle-filled",color:"blue",groups:["Content"],handles:[{type:"data",url:"src"}],meta:{author:""}},settings:{quick:[{property:"title",title:"Title",inputMethod:"textfield",icon:"android"},{property:"primaryColor",title:"Primary color",inputMethod:"colorpicker",icon:"color"}],configure:[{slot:"",title:"Inner content",description:"The slotted content that lives inside the tag",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{slot:"button",title:"Button content",description:"The content that can override the button",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"title",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"primaryColor",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!1,validation:".*",validationType:"text"}],advanced:[{property:"secondaryColor",title:"Secondary color",description:"An optional secondary color used in certain edge cases.",inputMethod:"colorpicker",icon:"color"},{property:"endPoint",title:"API endpoint",description:"An optional endpoint to hit and load in more data dymaically.",inputMethod:"textfield",icon:"android",validation:"[a-z0-9]",validationType:"url"}]},saveOptions:{wipeSlot:!1,unsetAttributes:["end-point","secondary-color"]}}}};window.HAXWiring=new HAXWiring,window.HAXBehaviors=window.HAXBehaviors||{},window.HAXBehaviors.PropertiesBehaviors={properties:{haxProperties:window.HAXWiring.haxProperties},setHaxProperties:function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this;return babelHelpers.typeof(this.tagName)!=="undefined"&&(c=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),babelHelpers.typeof(window.HaxStore)!=="undefined"&&null!=window.HaxStore.instance&&window.HaxStore.ready?window.HAXWiring.setHaxProperties(b,c,d,!0):window.HAXWiring.setHaxProperties(b,c,d,!1)},_haxStoreReady:function(b){return window.HAXWiring._haxStoreReady(b)},validateSetting:function(b){return window.HAXWiring.validateSetting(b)},getHaxProperties:function(){return this.haxProperties},getHaxJSONSchema:function(b,c){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:this;return window.HAXWiring.getHaxJSONSchema(b,c,d)},postProcessgetHaxJSONSchema:function(b){return window.HAXWiring.postProcessgetHaxJSONSchema(b)},_getHaxJSONSchemaProperty:function(b,c){return window.HAXWiring._getHaxJSONSchemaProperty(b,c)},getHaxJSONSchemaType:function(b){return window.HAXWiring.getHaxJSONSchemaType(b)},validHAXPropertyInputMethod:function(){return window.HAXWiring.validHAXPropertyInputMethod()},prototypeHaxProperties:function(){return window.HAXWiring.prototypeHaxProperties()}};