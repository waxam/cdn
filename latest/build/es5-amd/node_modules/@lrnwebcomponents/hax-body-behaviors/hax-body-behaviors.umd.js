!function(b,f){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?f(exports,require("@polymer/polymer/lib/legacy/polymer.dom.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/lib/legacy/polymer.dom.js"],f):f(b.HaxBodyBehaviors={},b.polymer_dom_js)}(this,function(b,f){"use strict";function g(j){return(g="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(k){return"undefined"===typeof k?"undefined":babelHelpers.typeof(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":"undefined"===typeof k?"undefined":babelHelpers.typeof(k)})(j)}var h=function j(){var k=this;!function(l,m){if(!(l instanceof m))throw new TypeError("Cannot call a class as a function")}(this,j),this.haxProperties={canScale:!1,canPosition:!1,canEditSource:!1,settings:{quick:[],configure:[],advanced:[]},wipeSlot:{}},this.setup=function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:k;return"undefined"!==g(k.tagName)&&(m=k.tagName.toLowerCase()),window.addEventListener("hax-store-ready",k._haxStoreReady.bind(k)),"undefined"!==g(window.HaxStore)&&null!=window.HaxStore.instance&&window.HaxStore.ready?k.setHaxProperties(l,m,q,!0):k.setHaxProperties(l,m,q,!1)},this._haxStoreReady=function(l){if(l.detail&&"undefined"!==g(k.tagName)&&"undefined"!==g(k.haxProperties)){var m=k.tagName,q=k.haxProperties,v=k;if(""!==m&&"undefined"===g(window.HaxStore)){var w=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:m.toLowerCase(),properties:q,polymer:!1}});v.dispatchEvent(w)}else if(""!==m&&"undefined"!==g(window.HaxStore)&&"undefined"!==g(window.HaxStore.instance)&&null!=window.HaxStore.instance&&"undefined"!==g(window.HaxStore.instance.elementList)&&"undefined"===g(window.HaxStore.instance.elementList[m.toLowerCase()])){var x=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:m.toLowerCase(),properties:q}});v.dispatchEvent(x)}else if("undefined"!==g(k.tagName)&&"undefined"!==g(window.HaxStore)&&"undefined"!==g(window.HaxStore.instance)&&null!=window.HaxStore.instance&&"undefined"!==g(window.HaxStore.instance.elementList)&&"undefined"===g(window.HaxStore.instance.elementList[k.tagName.toLowerCase()])){var y=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:k.tagName.toLowerCase(),properties:q}});v.dispatchEvent(y)}}},this.setHaxProperties=function(l){var m=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:document,v=3<arguments.length&&void 0!==arguments[3]&&arguments[3];if("undefined"===g(l.api)&&(l.api="1"),"1"==l.api){if("undefined"===g(l.canPosition)&&(l.canPosition=!0),"undefined"===g(l.canScale)&&(l.canScale=!0),"undefined"===g(l.canEditSource)&&(l.canEditSource=!1),"undefined"===g(l.gizmo)&&(l.gizmo=!1),"undefined"!==g(l.settings)){"undefined"===g(l.settings.quick)&&(l.settings.quick=[]);for(var w=0;w<l.settings.quick.length;w++)l.settings.quick[w]=k.validateSetting(l.settings.quick[w]),l.settings.quick[w]||l.settings.quick.splice(w,1);"undefined"===g(l.settings.configure)&&(l.settings.configure=[]);for(var x=0;x<l.settings.configure.length;x++)l.settings.configure[x]=k.validateSetting(l.settings.configure[x]),l.settings.configure[x]||l.settings.configure.splice(x,1);"undefined"===g(l.settings.advanced)&&(l.settings.advanced=[]);for(var y=0;y<l.settings.advanced.length;y++)l.settings.advanced[y]=k.validateSetting(l.settings.advanced[y]),l.settings.advanced[y]||l.settings.advanced.splice(y,1);l.settings.advanced.push({attribute:"class",title:"Classes",description:"CSS classes applied manually to the element",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"style",title:"Styles",description:"Custom CSS styles as applied to the element",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"prefix",title:"Schema: prefix",description:"Schema prefixes",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"typeof",title:"Schema: TypeOf",description:"typeof definition for Schema usage",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"property",title:"Schema: Property",description:"typeof definition for Schema usage",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"resource",title:"Schema: Resource ID",description:"Schema resource identifier",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"id",title:"ID",description:"element ID, only set this if you know why",inputMethod:"textfield"}),l.settings.advanced.push({attribute:"slot",title:"slot",description:"DOM slot area",inputMethod:"textfield"})}if("undefined"===g(l.saveOptions)&&(l.saveOptions={wipeSlot:!1}),v)if(""!==m&&"undefined"===g(window.HaxStore)){var z=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:m.toLowerCase(),properties:l,polymer:!1}});q.dispatchEvent(z)}else if(""!==m&&"undefined"!==g(window.HaxStore)&&"undefined"!==g(window.HaxStore.instance)&&null!=window.HaxStore.instance&&"undefined"!==g(window.HaxStore.instance.elementList)&&"undefined"===g(window.HaxStore.instance.elementList[m.toLowerCase()])){var A=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:m.toLowerCase(),properties:l}});q.dispatchEvent(A)}else if("undefined"!==g(k.tagName)&&"undefined"!==g(window.HaxStore)&&"undefined"!==g(window.HaxStore.instance)&&null!=window.HaxStore.instance&&"undefined"!==g(window.HaxStore.instance.elementList)&&"undefined"===g(window.HaxStore.instance.elementList[k.tagName.toLowerCase()])){var B=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,detail:{tag:k.tagName.toLowerCase(),properties:l}});q.dispatchEvent(B)}""===m&&("function"==typeof k._setHaxProperties?k._setHaxProperties(l):k.haxProperties=l)}else console.warn("This is't a valid usage of hax API. See hax-body-behaviors/lib/HAXWiring.js for more details on how to implement the API. Most likely your hax item just was placed in an iframe as a fallback as opposed to a custom element.")},this.validateSetting=function(l){return("undefined"!==g(l.property)||"undefined"!==g(l.slot)||"undefined"!==g(l.attribute))&&("undefined"===g(l.title)&&("undefined"===g(l.attribute)?l.title=l.property:l.title=l.attribute),"undefined"===g(l.description)&&(l.description=""),"undefined"===g(l.inputMethod)&&(l.inputMethod="textfield"),"undefined"===g(l.type)&&(l.type="settings"),"undefined"===g(l.icon)&&(l.icon="android"),"undefined"===g(l.options)&&(l.options={}),"undefined"===g(l.required)&&(l.required=!1),"undefined"===g(l.validation)&&(l.validation=".*"),"undefined"===g(l.validationType)&&(l.validationType=""),l)},this.getHaxProperties=function(){return k.haxProperties},this.getHaxJSONSchema=function(l,m){var q=2<arguments.length&&void 0!==arguments[2]?arguments[2]:k;"undefined"===g(l)&&(l="configure"),"undefined"===g(m)&&(m=q.haxProperties);var v=m.settings[l],w={$schema:"http://json-schema.org/schema#",title:"HAX "+l+" form schema",type:"object",properties:{}};return w.properties=q._getHaxJSONSchemaProperty(v,q),w=q.postProcessgetHaxJSONSchema(w)},this.postProcessgetHaxJSONSchema=function(l){return l},this._getHaxJSONSchemaProperty=function(l,m){var q={};for(var v in l)if(l.hasOwnProperty(v))if("undefined"!==g(l[v].property))switch(q[l[v].property]={title:l[v].title,type:m.getHaxJSONSchemaType(l[v].inputMethod)},"undefined"!==g(m[l[v].property])&&(q[l[v].property].value=m[l[v].property]),"url"==l[v].validationType&&(q[l[v].property].format="uri"),"datepicker"==l[v].inputMethod&&(q[l[v].property].format="date-time"),".*"!=l[v].validation&&(q[l[v].property].pattern=l[v].validation),l[v].inputMethod){case"number":q[l[v].property].component={name:"paper-input",valueProperty:"value",properties:{required:l[v].required},attributes:{type:"number"}};break;case"select":var w="";if("undefined"!==g(l[v].options))for(var x in l[v].options)w+="<paper-item value=\""+x+"\">"+l[v].options[x]+"</paper-item>\n";q[l[v].property].component={name:"dropdown-select",valueProperty:"value",slot:w,properties:{required:l[v].required}};break;case"textarea":q[l[v].property].component={name:"paper-textarea",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate","char-counter":"char-counter"}};break;case"code-editor":q[l[v].property].component={name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:l[v].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}};break;case"array":q[l[v].property].items={type:"object",properties:m._getHaxJSONSchemaProperty(l[v].properties,m)};break;case"textfield":q[l[v].property].component={name:"paper-input",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate"}};break;case"alt":q[l[v].property].component={name:"paper-input-flagged",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate"}};break;case"colorpicker":q[l[v].property].component={name:"paper-swatch-picker",valueProperty:"color",properties:{required:l[v].required}};break;case"iconpicker":q[l[v].property].component={name:"paper-icon-picker",valueProperty:"icon",properties:{required:l[v].required}},l[v].options.constructor===Array&&(q[l[v].property].component.properties.iconList=l[v].options);break;case"datepicker":q[l[v].property].component={name:"app-datepicker",valueProperty:"date",properties:{required:l[v].required,autoUpdateDate:!0}};}else if("undefined"!==g(l[v].attribute))switch(q[l[v].attribute]={title:l[v].title,type:m.getHaxJSONSchemaType(l[v].inputMethod)},"class"===l[v].attribute?q[l[v].attribute].value=m.className:"style"===l[v].attribute?q[l[v].attribute].value=m.style.cssText:"undefined"!==g(m.attributes[l[v].attribute])&&(q[l[v].attribute].value=m.getAttribute(l[v].attribute)),"href"!=v&&"src"!=v||(q[l[v].attribute].format="uri"),"url"==l[v].validationType&&(q[l[v].attribute].format="uri"),"datepicker"==l[v].inputMethod&&(q[l[v].attribute].format="date-time"),".*"!=l[v].validation&&(q[l[v].attribute].pattern=l[v].validation),l[v].inputMethod){case"number":q[l[v].attribute].component={name:"paper-input",valueProperty:"value",properties:{required:l[v].required},attributes:{type:"number"}};break;case"select":if(w="","undefined"!==g(l[v].options))for(var x in l[v].options)w+="<paper-item value=\""+x+"\">"+l[v].options[x]+"</paper-item>\n";q[l[v].attribute].component={name:"dropdown-select",valueProperty:"value",slot:w,properties:{required:l[v].required}};break;case"textarea":q[l[v].attribute].component={name:"paper-textarea",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate","char-counter":"char-counter"}};break;case"code-editor":q[l[v].attribute].component={name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:l[v].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}};break;case"textfield":q[l[v].attribute].component={name:"paper-input",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate"}};break;case"alt":q[l[v].attribute].component={name:"paper-input-flagged",valueProperty:"value",properties:{required:l[v].required},attributes:{"auto-validate":"auto-validate"}};break;case"colorpicker":q[l[v].attribute].component={name:"paper-swatch-picker",valueProperty:"color",properties:{required:l[v].required}};}else{for(var y in q[l[v].slot]={title:l[v].title,type:m.getHaxJSONSchemaType(l[v].inputMethod),value:"",component:{name:"code-editor",valueProperty:"editorValue",attributes:{id:"haxcodeeditor"},properties:{title:l[v].title,readOnly:!1,theme:"ace/theme/monokai",mode:"ace/mode/html",fontsize:"16px",className:"hax-code-editor"}}},w="",f.dom(m).childNodes)"undefined"!==g(f.dom(m).childNodes[y])&&(1===f.dom(m).childNodes[y].nodeType?w+=f.dom(m).childNodes[y].innerHTML:1!==f.dom(m).childNodes[y].nodeType&&"undefined"!==g(f.dom(m).childNodes[y].textContent)&&""!==f.dom(m).childNodes[y].textContent&&(w+=f.dom(m).childNodes[y].textContent));q[l[v].slot].component.slot="<template>"+w+"</template>"}return q},this.getHaxJSONSchemaType=function(l){if(k.validHAXPropertyInputMethod().includes(l))return"flipboolean"===l||"boolean"===l?"boolean":"number"===l?"number":"select"===l||"textarea"===l||"colorpicker"===l||"iconpicker"===l||"datepicker"===l||"textfield"===l||"alt"===l?"string":"array"===l?"array":"string"},this.validHAXPropertyInputMethod=function(){return["flipboolean","boolean","select","textfield","textarea","datepicker","colorpicker","iconpicker","alt","number","code-editor","array"]},this.prototypeHaxProperties=function(){return{api:"1",canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Tag name",description:"A description",icon:"av:play-circle-filled",color:"blue",groups:["Content"],handles:[{type:"data",url:"src"}],meta:{author:""}},settings:{quick:[{property:"title",title:"Title",inputMethod:"textfield",icon:"android"},{property:"primaryColor",title:"Primary color",inputMethod:"colorpicker",icon:"color"}],configure:[{slot:"",title:"Inner content",description:"The slotted content that lives inside the tag",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{slot:"button",title:"Button content",description:"The content that can override the button",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"title",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!0,validationType:"text"},{property:"primaryColor",title:"Title",description:"",inputMethod:"textfield",icon:"android",required:!1,validation:".*",validationType:"text"}],advanced:[{property:"secondaryColor",title:"Secondary color",description:"An optional secondary color used in certain edge cases.",inputMethod:"colorpicker",icon:"color"},{property:"endPoint",title:"API endpoint",description:"An optional endpoint to hit and load in more data dymaically.",inputMethod:"textfield",icon:"android",validation:"[a-z0-9]",validationType:"url"}]},saveOptions:{wipeSlot:!1,unsetAttributes:["end-point","secondary-color"]}}}};window.HAXWiring=new h,window.HAXBehaviors=window.HAXBehaviors||{},window.HAXBehaviors.PropertiesBehaviors={properties:{haxProperties:window.HAXWiring.haxProperties},setHaxProperties:function(k){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this;return"undefined"!==g(this.tagName)&&(l=this.tagName.toLowerCase()),window.addEventListener("hax-store-ready",this._haxStoreReady.bind(this)),"undefined"!==g(window.HaxStore)&&null!=window.HaxStore.instance&&window.HaxStore.ready?window.HAXWiring.setHaxProperties(k,l,m,!0):window.HAXWiring.setHaxProperties(k,l,m,!1)},_haxStoreReady:function(k){return window.HAXWiring._haxStoreReady(k)},validateSetting:function(k){return window.HAXWiring.validateSetting(k)},getHaxProperties:function(){return this.haxProperties},getHaxJSONSchema:function(k,l){var m=2<arguments.length&&void 0!==arguments[2]?arguments[2]:this;return window.HAXWiring.getHaxJSONSchema(k,l,m)},postProcessgetHaxJSONSchema:function(k){return window.HAXWiring.postProcessgetHaxJSONSchema(k)},_getHaxJSONSchemaProperty:function(k,l){return window.HAXWiring._getHaxJSONSchemaProperty(k,l)},getHaxJSONSchemaType:function(k){return window.HAXWiring.getHaxJSONSchemaType(k)},validHAXPropertyInputMethod:function(){return window.HAXWiring.validHAXPropertyInputMethod()},prototypeHaxProperties:function(){return window.HAXWiring.prototypeHaxProperties()}},b.HAXWiring=h,Object.defineProperty(b,"__esModule",{value:!0})});