!function(b,c){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?c(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@polymer/polymer/lib/legacy/templatizer-behavior.js"),require("@polymer/polymer/lib/legacy/mutable-data-behavior.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@polymer/polymer/lib/legacy/templatizer-behavior.js","@polymer/polymer/lib/legacy/mutable-data-behavior.js"],c):c(b.GrafittoFilter={},b.polymerLegacy_js,b.polymer_dom_js,b.templatizerBehavior_js,b.mutableDataBehavior_js)}(this,function(b,c,d,f,g){"use strict";function h(m){return(h="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(p){return"undefined"===typeof p?"undefined":babelHelpers.typeof(p)}:function(p){return p&&"function"==typeof Symbol&&p.constructor===Symbol&&p!==Symbol.prototype?"symbol":"undefined"===typeof p?"undefined":babelHelpers.typeof(p)})(m)}function j(){var m,p,q=(m=["\n    <div id=\"dom\"><slot></slot></div>\n  "],p||(p=m.slice(0)),Object.freeze(Object.defineProperties(m,{raw:{value:Object.freeze(p)}})));return j=function(){return q},q}var k=c.Polymer({_template:c.html(j()),is:"grafitto-filter",behaviors:[f.Templatizer,g.OptionalMutableDataBehavior],properties:{items:{type:Array,value:[]},like:{type:String,value:""},where:{type:String,value:"name"},caseSensitive:{type:Boolean,value:!1,reflectToAttribute:!0},as:{type:String,value:"items"},filtered:{type:Array,computed:"_computeFiltered(items, where, like, caseSensitive)",observer:"_onFilter"},f:{type:Function,notify:!0}},observers:["_populateUserTemplate(filtered)"],filter:function(){this.where=""},_computeFiltered:function(p,q,u,v){var w=null;w=v?new RegExp(u):new RegExp(u,"i");var x=[];if(this.f){var y=this.f.bind(this);x=p.filter(y)}else{var z=this._decomposeWhere.bind(this);x=p.filter(function(A){if("object"==h(A)){var B=z(q,A);return void 0===B&&""!=q&&console.warn("grafitto-filter was unable to find a property in '"+q+"'"),w.test(B)}return"string"==typeof A?w.test(A):"number"==typeof A?w.test(A.toString()):void 0})}return x},_populateUserTemplate:function(p){this.ctor?this.__clone[this.as]=p:(this._userTemplate=this.querySelector("template"),this._userTemplate||console.warn("grafitto-filter requires a template to be provided in light-dom"),this.templatize(this._userTemplate),this.__clone=this.stamp(null),this.__clone[this.as]=p,d.dom(this).appendChild(this.__clone.root))},_decomposeWhere:function(p,q){return p.split(".").reduce(function(u,v){return u&&u[v]},q)},_onFilter:function(){this.fire("filter")}});b.GrafittoFilter=k,Object.defineProperty(b,"__esModule",{value:!0})});