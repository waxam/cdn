var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: none;\n      }\n    </style>\n    <slot></slot>\n    <iron-ajax\n      id=\"appstore\"\n      url=\"[[appStore.url]]\"\n      params=\"[[appStore.params]]\"\n      method=\"GET\"\n      content-type=\"application/json\"\n      handle-as=\"json\"\n      last-response=\"{{__appStoreData}}\"\n    ></iron-ajax>\n  "],["\n    <style>\n      :host {\n        display: none;\n      }\n    </style>\n    <slot></slot>\n    <iron-ajax\n      id=\"appstore\"\n      url=\"[[appStore.url]]\"\n      params=\"[[appStore.params]]\"\n      method=\"GET\"\n      content-type=\"application/json\"\n      handle-as=\"json\"\n      last-response=\"{{__appStoreData}}\"\n    ></iron-ajax>\n  "]);import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import{dom}from"@polymer/polymer/lib/legacy/polymer.dom.js";import"@polymer/paper-toast/paper-toast.js";import"@lrnwebcomponents/media-behaviors/media-behaviors.js";import"@lrnwebcomponents/hax-body-behaviors/hax-body-behaviors.js";import"@polymer/iron-ajax/iron-ajax.js";import"./hax-app.js";import"./hax-stax.js";import"./hax-stax-browser.js";import"./hax-blox.js";import"./hax-blox-browser.js";window.HaxStore={},window.HaxStore.instance=null,window.HaxStore.requestAvailability=function(){window.HaxStore.instance||(window.HaxStore.instance=document.createElement("hax-store")),document.body.appendChild(window.HaxStore.instance)},Polymer({_template:html(_templateObject),is:"hax-store",behaviors:[MediaBehaviors.Video,HAXBehaviors.PropertiesBehaviors],observers:["_loadAppStoreData(__appStoreData, haxAutoloader)"],properties:{haxAppPicker:{type:Object},haxStaxPicker:{type:Object},haxManager:{type:Object},haxAutoloader:{type:Object},haxBodies:{type:Array,value:[]},activePlaceHolder:{type:Object,value:null},activeHaxBody:{type:Object},appStore:{type:Object,observer:"_appStoreChanged"},haxToast:{type:Object},haxPanel:{type:Object},haxExport:{type:Object},haxPreferences:{type:Object},activeHaxElement:{type:Object},activeNode:{type:Object},activeContainerNode:{type:Object},editMode:{type:Boolean,value:!1},canSupportUploads:{type:Boolean,value:!1},skipExitTrap:{type:Boolean,value:!1},defaults:{type:Object,value:{image:{src:"stock.jpg",alt:"A beachfront deep in the heart of Alaska."},iframe:{src:"https://www.wikipedia.org/"}}},gizmoList:{type:Array,value:[]},elementList:{type:Object,value:{}},appList:{type:Array,value:[]},staxList:{type:Array,value:[]},bloxList:{type:Array,value:[]},globalPreferences:{type:Object,value:{}},activeApp:{type:Object,value:{}},validTagList:{type:Array,value:["p","div","ol","ul","li","a","strong","kbd","em","i","b","hr","h1","h2","h3","h4","h5","h6","blockquote","code","figure","img","iframe","video","audio","section","grid-plate","template","webview"]},validGizmoTypes:{type:Array,value:["data","video","audio","text","link","file","pdf","image","csv","doc","content","text","inline","*"]},_isSandboxed:{type:Boolean,value:function(){var b=document.createElement("webview");return!("function"!==typeof b.reload)}},__appStoreData:{type:Object}},isTextElement:function(b){return null!=b&&this.validTagList.includes(b.tagName.toLowerCase())&&["p","ol","ul","li","a","h1","h2","h3","h4","h5","h6","blockquote","code","figure"].includes(b.tagName.toLowerCase())},isGridPlateElement:function(b){var c=b.tagName.toLowerCase();return this.validTagList.includes(c)&&["p","ol","ul","li","h1","h2","h3","h4","h5","h6","blockquote","code","figure","grid-plate"].includes(c)},_appStoreChanged:function(b){("undefined"===typeof b?"undefined":babelHelpers.typeof(b))!=="undefined"&&(babelHelpers.typeof(b.apps)==="undefined"?this.$.appstore.generateRequest():this.__appStoreData=b)},_loadAppStoreData:function(b,c){var d=this;if(("undefined"===typeof b?"undefined":babelHelpers.typeof(b))!=="undefined"&&null!=b){if(babelHelpers.typeof(b.autoloader)!=="undefined")for(var h,f=0;f<b.autoloader.length;f++)h=document.createElement(b.autoloader[f]),dom(c).appendChild(h);if(babelHelpers.typeof(b.apps)!=="undefined")for(var m,k=b.apps,f=0;f<k.length;f++)m=document.createElement("hax-app"),m.data=k[f],babelHelpers.typeof(k[f].connection.operations.add)!=="undefined"&&async.microTask.run(function(){window.HaxStore.write("canSupportUploads",!0,d)}),window.HaxStore.instance.appendChild(m);if(babelHelpers.typeof(b.stax)!=="undefined")for(var o,n=b.stax,f=0;f<n.length;f++)o=document.createElement("hax-stax"),o.data=n[f],window.HaxStore.instance.appendChild(o);if(babelHelpers.typeof(b.blox)!=="undefined")for(var r,q=b.blox,f=0;f<q.length;f++)r=document.createElement("hax-blox"),r.data=q[f],window.HaxStore.instance.appendChild(r)}},detached:function(){document.body.removeEventListener("hax-register-properties",this._haxStoreRegisterProperties.bind(this)),document.body.removeEventListener("hax-register-app",this._haxStoreRegisterApp.bind(this)),document.body.removeEventListener("hax-register-stax",this._haxStoreRegisterStax.bind(this)),document.body.removeEventListener("hax-register-blox",this._haxStoreRegisterBlox.bind(this)),document.body.removeEventListener("hax-store-write",this._writeHaxStore.bind(this)),document.body.removeEventListener("hax-register-manager",this._haxStoreRegisterManager.bind(this)),document.body.removeEventListener("hax-register-autoloader",this._haxStoreRegisterAutoloader.bind(this)),document.body.removeEventListener("hax-register-body",this._haxStoreRegisterBody.bind(this)),document.body.removeEventListener("hax-register-panel",this._haxStoreRegisterPanel.bind(this)),document.body.removeEventListener("hax-register-app-picker",this._haxStoreRegisterAppPicker.bind(this)),document.body.removeEventListener("hax-register-stax-picker",this._haxStoreRegisterStaxPicker.bind(this)),document.body.removeEventListener("hax-register-blox-picker",this._haxStoreRegisterBloxPicker.bind(this)),document.body.removeEventListener("hax-register-preferences",this._haxStoreRegisterPreferences.bind(this)),document.body.removeEventListener("hax-register-export",this._haxStoreRegisterExport.bind(this)),document.body.removeEventListener("hax-insert-content",this._haxStoreInsertContent.bind(this))},attached:function(){var b=this;window.onbeforeunload=function(){if(!window.HaxStore.instance.skipExitTrap&&window.HaxStore.instance.editMode)return"Are you sure you want to leave? Your work will not be saved!"},window.addEventListener("paste",function(c){if(b.isTextElement(window.HaxStore.instance.activeNode)&&!b.haxManager.opened){c.preventDefault();var d="";c.clipboardData||c.originalEvent.clipboardData?d=(c.originalEvent||c).clipboardData.getData("text/plain"):window.clipboardData&&(d=window.clipboardData.getData("Text"));var f,h;window.getSelection?(f=window.getSelection(),f.getRangeAt&&f.rangeCount&&(h=f.getRangeAt(0),h.deleteContents(),h.insertNode(document.createTextNode(d)))):document.selection&&document.selection.createRange&&(document.selection.createRange().text=d)}}),window.addEventListener("keypress",function(c){var d=c.key;if(babelHelpers.typeof(window.HaxStore.instance.activeContainerNode)!=="undefined"&&"Enter"===d&&window.HaxStore.instance.editMode&&null!==window.HaxStore.instance.activeNode&&window.HaxStore.instance.activeContainerNode===window.HaxStore.instance.activeNode&&!window.HaxStore.instance.haxAppPicker.opened){var f=window.HaxStore.instance.activeContainerNode.tagName,h=window.getSelection(),k=h.getRangeAt(0).cloneRange(),m=k.commonAncestorContainer.tagName;if(("undefined"===typeof m?"undefined":babelHelpers.typeof(m))==="undefined"&&(m=k.commonAncestorContainer.parentNode.tagName),["P","H1","H2","H3","H4","H5","H6"].includes(f)&&!["UL","OL","LI"].includes(m))if(k.endOffset!==b.activeContainerNode.textContent.length){c.preventDefault(),k.setStart(h.focusNode,k.startOffset);var n=document.createRange().createContextualFragment("<hax-split-point></hax-split-point>");k.insertNode(n);var o=window.HaxStore.instance.activeContainerNode,q=dom(window.HaxStore.instance.activeContainerNode).querySelector("hax-split-point");if(null!=q)try{b.__splitNode(q,o)}catch(r){}}else c.preventDefault(),window.HaxStore.instance.fire("hax-insert-content",{tag:"p",content:""})}}),this._injectToast(),this._buildPrimitiveDefinitions(),this.fire("hax-store-ready",!0),window.HaxStore.ready=!0},__splitNode:function(b,c){var d=this;window.HaxStore.write("activeNode",null,this),setTimeout(function(){var f=c.parentNode,h=d.__getNodeIndex(f,c),k=b.ownerDocument,m=k.createRange();m.setStart(f,h),m.setEndBefore(b);var n=m.extractContents();dom(d.activeHaxBody).insertBefore(n,c),b.parentNode.removeChild(b),window.HaxStore.write("activeNode",c,d)},100)},__getNodeIndex:function(b,c){for(var d=b.childNodes.length;d--&&!(c===b.childNodes[d]););return d},created:function(){window.__startedSelection=!1,null==window.HaxStore.instance&&(window.HaxStore.instance=this),document.body.addEventListener("hax-register-properties",this._haxStoreRegisterProperties.bind(this)),document.body.addEventListener("hax-register-app",this._haxStoreRegisterApp.bind(this)),document.body.addEventListener("hax-register-stax",this._haxStoreRegisterStax.bind(this)),document.body.addEventListener("hax-register-blox",this._haxStoreRegisterBlox.bind(this)),document.body.addEventListener("hax-store-write",this._writeHaxStore.bind(this)),document.body.addEventListener("hax-register-manager",this._haxStoreRegisterManager.bind(this)),document.body.addEventListener("hax-register-autoloader",this._haxStoreRegisterAutoloader.bind(this)),document.body.addEventListener("hax-register-body",this._haxStoreRegisterBody.bind(this)),document.body.addEventListener("hax-register-panel",this._haxStoreRegisterPanel.bind(this)),document.body.addEventListener("hax-register-app-picker",this._haxStoreRegisterAppPicker.bind(this)),document.body.addEventListener("hax-register-stax-picker",this._haxStoreRegisterStaxPicker.bind(this)),document.body.addEventListener("hax-register-blox-picker",this._haxStoreRegisterBloxPicker.bind(this)),document.body.addEventListener("hax-register-preferences",this._haxStoreRegisterPreferences.bind(this)),document.body.addEventListener("hax-register-export",this._haxStoreRegisterExport.bind(this)),document.body.addEventListener("hax-insert-content",this._haxStoreInsertContent.bind(this)),document.body.style.setProperty("--hax-ui-headings","#d4ff77")},_buildPrimitiveDefinitions:function(){if(window.HaxStore.instance._isSandboxed){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,settings:{quick:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[]}},"webview")}this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!0,gizmo:{title:"Basic iframe",description:"A basic iframe",icon:"icons:fullscreen",color:"grey",groups:["Content"],handles:[{type:"link",source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{quick:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"}],advanced:[]}},"iframe");this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Basic image",description:"A basic img tag",icon:"image:image",color:"grey",groups:["Image","Media"],handles:[{type:"link",source:"src"},{type:"image",source:"src",height:"height",width:"width"}],meta:{author:"W3C"}},settings:{quick:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{attribute:"alt",title:"Alt text",description:"Useful for screen readers and improved SEO.",inputMethod:"alt",icon:"accessibility"},{attribute:"height",title:"Height",description:"height in pixels of the item",inputMethod:"textfield",icon:"icons:swap-vert"},{attribute:"width",title:"Width",description:"width in pixels of the item",inputMethod:"textfield",icon:"icons:swap-horiz"}],configure:[{attribute:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{attribute:"alt",title:"Alt text",description:"Useful for screen readers and improved SEO.",inputMethod:"alt",icon:"accessibility"},{attribute:"height",title:"Height",description:"height in pixels of the item",inputMethod:"textfield",icon:"icons:swap-vert"},{attribute:"width",title:"Width",description:"width in pixels of the item",inputMethod:"textfield",icon:"icons:swap-horiz"}],advanced:[]}},"img");this.setHaxProperties({canScale:!1,canPosition:!1,canEditSource:!1,gizmo:{title:"Basic link",description:"A basic a tag",icon:"icons:link",color:"grey",groups:["Link"],handles:[{type:"link",source:"href",title:"innerText",alt:"title"}],meta:{author:"W3C"}},settings:{quick:[{attribute:"href",title:"Link",description:"The URL for this video.",inputMethod:"textfield",icon:"icons:link",required:!0,validationType:"url"},{attribute:"title",title:"Title text",description:"Useful for screen readers and improved SEO.",inputMethod:"textfield",icon:"icons:accessibility"}],configure:[{attribute:"innerText",title:"Text",description:"Text of the link",inputMethod:"textfield",required:!0},{attribute:"href",title:"Link",description:"The URL for this video.",inputMethod:"textfield",icon:"icons:link",required:!0,validationType:"url"},{attribute:"title",title:"Title text",description:"Useful for screen readers and improved SEO.",inputMethod:"textfield",icon:"icons:accessibility"},{attribute:"target",title:"Target",description:"Where to place the link.",inputMethod:"select",icon:"icons:launch",options:{"":"Same window",_blank:"New window",_top:"Top window",_parent:"Parent window"}}],advanced:[]}},"a");this.setHaxProperties({canScale:!1,canPosition:!1,canEditSource:!0,settings:{quick:[],configure:[],advanced:[]}},"p");this.setHaxProperties({canScale:!0,canPosition:!1,canEditSource:!1,settings:{quick:[],configure:[],advanced:[]}},"hr")},_injectToast:function(){var b=document.createElement("paper-toast");b.id="haxtoast",b.duration=3e3,document.body.appendChild(b),this.haxToast=b},_haxStoreRegisterManager:function(b){b.detail&&babelHelpers.typeof(this.haxManager)==="undefined"&&(this.haxManager=b.detail)},_haxStoreRegisterAutoloader:function(b){b.detail&&babelHelpers.typeof(this.haxAutoloader)==="undefined"&&(this.haxAutoloader=b.detail)},_haxStoreRegisterAppPicker:function(b){b.detail&&babelHelpers.typeof(this.haxAppPicker)==="undefined"&&(this.haxAppPicker=b.detail)},_haxStoreRegisterStaxPicker:function(b){b.detail&&babelHelpers.typeof(this.haxStaxPicker)==="undefined"&&(this.haxStaxPicker=b.detail)},_haxStoreRegisterBloxPicker:function(b){b.detail&&babelHelpers.typeof(this.haxBloxPicker)==="undefined"&&(this.haxBloxPicker=b.detail)},closeAllDrawers:function(){var b=0<arguments.length&&arguments[0]!==void 0&&arguments[0],c=["haxManager","haxBloxPicker","haxStaxPicker","haxPreferences","haxExport"];for(var d in c)b===this[c[d]]?(b.open(),"haxManager"===c[d]?setTimeout(function(){null!=b.querySelector("#activepage .iron-selected paper-input")&&b.querySelector("#activepage .iron-selected paper-input").focus()},200):setTimeout(function(){null!=b.querySelector("paper-checkbox,paper-input,textarea,paper-button")&&b.querySelector("paper-checkbox,paper-input,textarea,paper-button").focus()},100)):this[c[d]].close()},_haxStoreInsertContent:function(b){if(b.detail){var c={};if(babelHelpers.typeof(b.detail.properties)!=="undefined"&&(c=b.detail.properties),b.detail.replace&&b.detail.replacement){var d=window.HaxStore.haxElementToNode(b.detail.tag,b.detail.content,c);this.activeNode===this.activeContainerNode?this.activeHaxBody.haxReplaceNode(this.activeNode,d):this.activeHaxBody.haxReplaceNode(this.activeNode,d,this.activeContainerNode)}else if(babelHelpers.typeof(b.detail.__type)!=="undefined"&&"inline"===b.detail.__type){var f=window.HaxStore.haxElementToNode(b.detail.tag,b.detail.content,c);null!==this.activePlaceHolder&&(this.activePlaceHolder.deleteContents(),this.activePlaceHolder.insertNode(f)),this.activePlaceHolder=null}else this.activeHaxBody.haxInsert(b.detail.tag,b.detail.content,c)}},_haxStoreRegisterBody:function(b){b.detail&&(this.haxBodies.push(b.detail),this.activeHaxBody=b.detail,window.HaxStore.write("activeHaxBody",this.activeHaxBody,this),window.HaxStore.write("editMode",this.editMode,this))},_haxStoreRegisterPanel:function(b){b.detail&&babelHelpers.typeof(this.haxPanel)==="undefined"&&(this.haxPanel=b.detail)},_haxStoreRegisterExport:function(b){b.detail&&babelHelpers.typeof(this.haxExport)==="undefined"&&(this.haxExport=b.detail)},_haxStoreRegisterPreferences:function(b){b.detail&&babelHelpers.typeof(this.haxPreferences)==="undefined"&&(this.haxPreferences=b.detail)},computePolyfillSafe:function(){return document.head.createShadowRoot||document.head.attachShadow||(console.log("Shadow DOM missing, can't safely use list operations."),!1)},_writeHaxStore:function(b){b.detail&&babelHelpers.typeof(b.detail.value)!=="undefined"&&b.detail.property&&b.detail.owner&&(this.set(b.detail.property,b.detail.value),this.fire("hax-store-property-updated",{property:b.detail.property,value:b.detail.value,owner:b.detail.owner}))},_haxStoreRegisterApp:function(b){b.detail&&(b.detail.index=this.appList.length,this.push("appList",b.detail),window.HaxStore.write("appList",this.appList,this),babelHelpers.typeof(b.target.parentElement)!=="undefined"&&"HAX-STORE"===b.target.parentElement.tagName&&dom(b.target.parentElement).removeChild(b.target))},_haxStoreRegisterStax:function(b){b.detail&&(b.detail.index=this.staxList.length,this.push("staxList",b.detail),window.HaxStore.write("staxList",this.staxList,this),babelHelpers.typeof(b.target.parentElement)!=="undefined"&&"HAX-STORE"===b.target.parentElement.tagName&&dom(b.target.parentElement).removeChild(b.target))},_haxStoreRegisterBlox:function(b){b.detail&&(b.detail.index=this.bloxList.length,this.push("bloxList",b.detail),window.HaxStore.write("bloxList",this.bloxList,this),babelHelpers.typeof(b.target.parentElement)!=="undefined"&&"HAX-STORE"===b.target.parentElement.tagName&&dom(b.target.parentElement).removeChild(b.target))},_haxStoreRegisterProperties:function(b){if(b.detail&&b.detail.properties&&b.detail.tag&&babelHelpers.typeof(this.elementList[b.detail.tag])==="undefined"){var c=b.detail.properties.gizmo;if(c){c.tag=b.detail.tag;var d=this.gizmoList;d.push(c),window.HaxStore.write("gizmoList",d,this),babelHelpers.typeof(b.target.parentElement)!=="undefined"&&"HAX-AUTOLOADER"===b.target.parentElement.tagName&&dom(this.haxAutoloader).removeChild(b.target)}this.set("elementList."+b.detail.tag,b.detail.properties),this.validTagList.find(function(f){return f===b.detail.tag})||this.push("validTagList",b.detail.tag)}}}),window.HaxStore.toArray=function(a){return Object.keys(a).map(function(b){return a[b]})},window.HaxStore.camelToDash=function(a){return a.replace(/\W+/g,"-").replace(/([a-z\d])([A-Z])/g,"$1-$2").toLowerCase()},window.HaxStore.dashToCamel=function(a){return a.replace(/-([a-z])/g,function(b){return b[1].toUpperCase()})},window.HaxStore.htmlToHaxElements=function(a){var b=[],c=window.HaxStore.instance.validTagList,d=document.createElement("div");d.innerHTML=a;for(var f=d.childNodes,h=0;h<f.length;h++)babelHelpers.typeof(f[h].tagName)!=="undefined"&&c.includes(f[h].tagName.toLowerCase())&&b.push(window.HaxStore.nodeToHaxElement(f[h],null));return b},window.HaxStore.nodeToHaxElement=function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"insert-element",c={};if(babelHelpers.typeof(a.style)!=="undefined"&&(c.style=a.getAttribute("style")),(null===c.style||"null"===c.style)&&delete c.style,babelHelpers.typeof(a.attributes.class)!=="undefined"&&(c.class=a.attributes.class.nodeValue.replace("hax-active","")),babelHelpers.typeof(a.attributes.id)!=="undefined"&&(c.id=a.getAttribute("id")),babelHelpers.typeof(a.properties)!=="undefined"){for(var d in a.properties)"class"!=d&&"style"!=d&&a.properties.hasOwnProperty(d)&&void 0!==babelHelpers.typeof(a[d])&&null!=a[d]&&""!=a[d]?c[d]=a[d]:!1===a[d]&&(c[d]=a[d]);for(var f in a.attributes)if(babelHelpers.typeof(a.attributes[f].name)!=="undefined"&&"class"!=a.attributes[f].name&&"style"!=a.attributes[f].name&&"id"!=a.attributes[f].name&&a.attributes.hasOwnProperty(f)&&void 0!==babelHelpers.typeof(a.attributes[f].value)&&null!=a.attributes[f].value&&""!=a.attributes[f].value&&!a.properties.hasOwnProperty(window.HaxStore.dashToCamel(a.attributes[f].name)))c[window.HaxStore.dashToCamel(a.attributes[f].name)]=a.attributes[f].value;else;}else for(var f in a.attributes)babelHelpers.typeof(a.attributes[f].name)!=="undefined"&&"class"!=a.attributes[f].name&&"style"!=a.attributes[f].name&&"id"!=a.attributes[f].name&&a.attributes.hasOwnProperty(f)&&void 0!==babelHelpers.typeof(a.attributes[f].value)&&null!=a.attributes[f].value&&""!=a.attributes[f].value&&(c[window.HaxStore.dashToCamel(a.attributes[f].name)]=a.attributes[f].value);var h=a.tagName.toLowerCase();window.HaxStore.instance._isSandboxed&&"iframe"===h&&(h="webview");var k=window.HaxStore.getHAXSlot(a);"a"===h?c.innerText=k:("p"===h||"ol"===h||"ul"===h||"div"===h)&&(c.innerHTML=k);var m={tag:h,properties:c,content:k};return null!==b&&(m.eventName=b),m},window.HaxStore.haxElementToNode=function(a,b,c){window.HaxStore.instance._isSandboxed&&"iframe"===a&&(a="webview");var d=document.createElement(a);d.innerHTML=b;var f=d.cloneNode(!0);for(var h in c){var k=window.HaxStore.camelToDash(h);c.hasOwnProperty(h)&&(!0===c[h]?f.setAttribute(k,c[h]):!1===c[h]?f.removeAttribute(k):null==c[h]||c[h].constructor!==Array||d.properties[h].readOnly?null==c[h]||c[h].constructor!==Object||d.properties[h].readOnly?f.setAttribute(k,c[h]):f.set(k,c[h]):f.set(k,c[h]))}return f},window.HaxStore.haxNodeToContent=function(a){window.HaxStore.instance.activeHaxBody.globalPreferences.haxDeveloperMode&&console.log(a);var b=Object.getPrototypeOf(a);if(babelHelpers.typeof(b.preProcessHaxNodeToContent)!=="undefined"){var c=a.cloneNode();a=b.preProcessHaxNodeToContent(c)}var d=a.tagName.toLowerCase();window.HaxStore.instance._isSandboxed&&"webview"===d&&(d="iframe");var f="";f+="<"+d;for(var h=window.HaxStore.instance.elementList[d],k={},m=0,n=a.attributes.length;m<n;++m){var o=a.attributes.item(m).nodeName,q=a.attributes.item(m).value;"style"!=o&&(("undefined"===typeof q?"undefined":babelHelpers.typeof(q))===("undefined"===typeof Object?"undefined":babelHelpers.typeof(Object))||q.constructor===Array)?k[o]=JSON.stringify(q).replace(/"/g,"&quot;"):null!=q&&"null"!=q&&(!0===q||"true"===q?k[o]=!0:!1===q||("string"===typeof q&&""!==q?(q=q.replace(/"/g,"&quot;"),k[o]=q):""===q?(""==q&&""!=a.attributes.item(m).value&&(q=a.attributes.item(m).value),k[o]=q):k[o]=q))}if(babelHelpers.typeof(a.properties)!=="undefined")for(var m in a.properties){var o=window.HaxStore.camelToDash(m),q=null;babelHelpers.typeof(a[m])!=="undefined"&&(q=a[m]),a.properties[m].readOnly||q===a.properties[m].value||(null!=q&&(("undefined"===typeof q?"undefined":babelHelpers.typeof(q))===("undefined"===typeof Object?"undefined":babelHelpers.typeof(Object))||q.constructor===Array)?k[o]=JSON.stringify(q).replace(/"/g,"&quot;"):null!=q&&"null"!=q&&(!0===q||"true"===q?k[o]=!0:!1===q||("string"===typeof q&&""!==q?(q=q.replace(/"/g,"&quot;"),k[o]=q):""===q?""==q&&""!=a.properties[m].value?q=a.properties[m].value:""===q&&""==a.properties[m].value:k[o]=q)))}if(("undefined"===typeof h?"undefined":babelHelpers.typeof(h))!=="undefined"&&babelHelpers.typeof(h.saveOptions.unsetAttributes)!=="undefined")for(var r in h.saveOptions.unsetAttributes)delete k[h.saveOptions.unsetAttributes[r]];var s=["inner-text","tabindex","guestinstance"];for(var t in s)babelHelpers.typeof(k[s[t]])!=="undefined"&&delete k[s[t]];for(var r in babelHelpers.typeof(k.id)!=="undefined"&&""===k.id&&delete k.id,k)f+=!0===k[r]?" "+r:" "+r+"=\""+k[r]+"\"";if(f+=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].includes(d)?"/>":">",("undefined"===typeof h?"undefined":babelHelpers.typeof(h))==="undefined"||!h.saveOptions.wipeSlot){var v=dom(a).getEffectiveChildNodes();if(0<v.length)for(var m=0,w=v.length;m<w;m++)babelHelpers.typeof(v[m].tagName)==="undefined"?8===v[m].nodeType?f+="<!-- "+v[m].textContent+" -->":1!==v[m].nodeType&&babelHelpers.typeof(v[m].textContent)!=="undefined"&&"undefined"!==v[m].textContent&&(f+=v[m].textContent):window.HaxStore.HTMLPrimativeTest(v[m].tagName)||"TEMPLATE"===v[m].tagName?(v[m].setAttribute("data-editable",!1),v[m].removeAttribute("data-hax-ray"),v[m].contentEditable=!1,f+=v[m].outerHTML):f+=window.HaxStore.haxNodeToContent(v[m])}return"span"===d?f+="</"+d+">":"hr"===d||"br"===d||"img"===d||(f+="</"+d+">\n"),window.HaxStore.instance.activeHaxBody.globalPreferences.haxDeveloperMode&&console.log(f),"function"===a.postProcesshaxNodeToContent&&(f=a.postProcesshaxNodeToContent(f)),f},window.HaxStore.HTMLPrimativeTest=function(a){return babelHelpers.typeof(a.tagName)!=="undefined"&&-1==a.tagName.indexOf("-")},window.HaxStore.getHAXSlot=function(a){var b="",c=dom(a).children;if(0<c.length)for(var d=0,f=c.length;d<f;d++)babelHelpers.typeof(c[d].tagName)==="undefined"?8===c[d].nodeType?b+="<!-- "+c[d].textContent+" -->":1!==c[d].nodeType&&babelHelpers.typeof(c[d].textContent)!=="undefined"&&"undefined"!==c[d].textContent&&(b+=c[d].textContent):b+=0<c[d].tagName.indexOf("-")?"  "+window.HaxStore.haxNodeToContent(c[d])+"\n":"  "+c[d].outerHTML+"\n";return b},window.HaxStore.write=function(a,b,c){c.fire("hax-store-write",{property:a,value:b,owner:c})},window.HaxStore.guessGizmoType=function(a){if(babelHelpers.typeof(a.source)!=="undefined")return-1==a.source.indexOf(".mp3")?-1!=a.source.indexOf(".png")||-1!=a.source.indexOf(".jpg")||-1!=a.source.indexOf(".jpeg")||-1!=a.source.indexOf(".gif")?"image":-1==a.source.indexOf(".pdf")?-1==a.source.indexOf(".svg")?-1==a.source.indexOf(".csv")?"external"==window.HaxStore.instance.getVideoType(a.source)?"*":"video":"csv":"svg":"pdf":"audio"},window.HaxStore.guessGizmo=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0&&arguments[2],d=[];if(("undefined"===typeof a?"undefined":babelHelpers.typeof(a))!=="undefined"){var f=window.HaxStore.instance;if(f.validGizmoTypes.includes(a))for(var h in f.gizmoList)for(var k=f.gizmoList[h],m={},n=!1,o=0;o<k.handles.length;o++)if(a===k.handles[o].type||"*"===a&&!n){for(var q in k.handles[o])"type"!==q&&babelHelpers.typeof(b[q])!=="undefined"&&(n=!0,m[k.handles[o][q]]=b[q]);(n||c)&&d.push(window.HaxStore.haxElementPrototype(k,m,""))}}return d},window.HaxStore.getHaxAppStoreTargets=function(a){var b=window.HaxStore.instance.appList.filter(function(c){if(babelHelpers.typeof(c.connection.operations.add)!=="undefined"){var d=c.connection.operations.add;if(babelHelpers.typeof(d.acceptsGizmoTypes)!=="undefined"&&d.acceptsGizmoTypes.includes(a))return!0}return!1});return b},window.HaxStore.haxElementPrototype=function(a,b){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"";return{tag:a.tag,properties:b,content:c,gizmo:a}},window.HaxStore.wipeSlot=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";if("*"===b)for(;null!==dom(a).firstChild;)dom(a).removeChild(dom(a).firstChild);else for(var c in dom(a).childNodes)babelHelpers.typeof(dom(a).childNodes[c])!=="undefined"&&dom(a).childNodes[c].slot===b&&dom(a).removeChild(dom(a).childNodes[c])},window.HaxStore.encapScript=function(a){return a=a.replace(/<script[\s\S]*?>/gi,"&lt;script&gt;"),a=a.replace(/<\/script>/gi,"&lt;/script&gt;"),a=a.replace(/<style[\s\S]*?>/gi,"&lt;style&gt;"),a=a.replace(/<\/style>/gi,"&lt;/style&gt;"),a=a.replace(/<template[\s\S]*?>[\s\S]*?&lt;script[\s\S]*?&gt;[\s\S]*?&lt;\/script&gt;/gi,function(b){return b=b.replace("&lt;script&gt;","<script>"),b=b.replace("&lt;/script&gt;","</script>"),b=b.replace("&lt;style&gt;","<style>"),b=b.replace("&lt;/style&gt;","</style>"),b}),a},window.HaxStore.toast=function(a){var b=1<arguments.length&&arguments[1]!==void 0?arguments[1]:3e3;window.HaxStore.instance.haxToast.duration=b,window.HaxStore.instance.haxToast.show(a)};