(function(t){if("object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!==typeof module)module.exports=t();else if("function"===typeof define&&define.amd)define([],t);else{var r;r="undefined"===typeof window?"undefined"===typeof global?"undefined"===typeof self?this:self:global:window,r.AFRAME=t()}})(function(){var g=Number.MAX_VALUE,y=Math.tan,o=Math.atan,E=Math.acos,a=Math.round,ma=Math.sign,C=Math.max,r=Math.LN2,l=Math.log,T=Math.abs,s=String.fromCharCode,O=Math.min,D=Math.floor,S=Math.sqrt,A=Math.pow,z=Math.sin,I=Math.cos,ga=Math.PI,n;return function d(c,t,n){function r(i,o){if(!t[i]){if(!c[i]){var p="function"==typeof require&&require;if(!o&&p)return p(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var m=t[i]={exports:{}};c[i][0].call(m.exports,function(t){var a=c[i][1][t];return r(a?a:t)},m,m.exports,d,c,t,n)}return t[i].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,r,a){(function(o){var t=function(){this._tweens={},this._tweensAddedDuringUpdate={}};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(r){return this._tweens[r]}.bind(this))},removeAll:function(){this._tweens={}},add:function(r){this._tweens[r.getId()]=r,this._tweensAddedDuringUpdate[r.getId()]=r},remove:function(r){delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()]},update:function(r,t){var a=Object.keys(this._tweens);if(0===a.length)return!1;for(r=void 0===r?l.now():r;0<a.length;){this._tweensAddedDuringUpdate={};for(var o=0;o<a.length;o++)!1===this._tweens[a[o]].update(r)&&(this._tweens[a[o]]._isPlaying=!1,t||delete this._tweens[a[o]]);a=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var l=new t;l.Group=t,l._nextId=0,l.nextId=function(){return l._nextId++},l.now="undefined"==typeof window&&"undefined"!=typeof o?function(){var r=o.hrtime();return 1e3*r[0]+r[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0===Date.now?function(){return new Date().getTime()}:Date.now,l.Tween=function(r,t){this._object=r,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||l,this._id=l.nextId()},l.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(r,t){return this._valuesEnd=r,void 0!==t&&(this._duration=t),this},start:function(r){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0===r?l.now():r,this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],!1==this._valuesStart[t]instanceof Array&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var r=0,t=this._chainedTweens.length;r<t;r++)this._chainedTweens[r].stop()},delay:function(r){return this._delayTime=r,this},repeat:function(r){return this._repeat=r,this},repeatDelay:function(r){return this._repeatDelayTime=r,this},yoyo:function(r){return this._yoyo=r,this},easing:function(r){return this._easingFunction=r,this},interpolation:function(r){return this._interpolationFunction=r,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(r){return this._onStartCallback=r,this},onUpdate:function(r){return this._onUpdateCallback=r,this},onComplete:function(r){return this._onCompleteCallback=r,this},onStop:function(r){return this._onStopCallback=r,this},update:function(l){var t,n,d;if(l<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),n=(l-this._startTime)/this._duration,n=1<n?1:n,d=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,r=this._valuesEnd[t];r instanceof Array?this._object[t]=this._interpolationFunction(r,d):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?i+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[t]=i+(r-i)*d))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,d),1===n){if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]+=parseFloat(this._valuesEnd[t])),this._yoyo){var c=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=c}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0===this._repeatDelayTime?l+this._delayTime:l+this._repeatDelayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var s=0,o=this._chainedTweens.length;s<o;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},l.Easing={Linear:{None:function(r){return r}},Quadratic:{In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return 1>(r*=2)?.5*r*r:-.5*(--r*(r-2)-1)}},Cubic:{In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return 1>(r*=2)?.5*r*r*r:.5*((r-=2)*r*r+2)}},Quartic:{In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return 1>(r*=2)?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}},Quintic:{In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return 1>(r*=2)?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}},Sinusoidal:{In:function(r){return 1-I(r*ga/2)},Out:function(r){return z(r*ga/2)},InOut:function(r){return .5*(1-I(ga*r))}},Exponential:{In:function(r){return 0===r?0:A(1024,r-1)},Out:function(r){return 1===r?1:1-A(2,-10*r)},InOut:function(r){return 0===r?0:1===r?1:1>(r*=2)?.5*A(1024,r-1):.5*(2-A(2,-10*(r-1)))}},Circular:{In:function(r){return 1-S(1-r*r)},Out:function(r){return S(1- --r*r)},InOut:function(r){return 1>(r*=2)?-.5*(S(1-r*r)-1):.5*(S(1-(r-=2)*r)+1)}},Elastic:{In:function(r){return 0===r?0:1===r?1:-A(2,10*(r-1))*z(5*(r-1.1)*ga)},Out:function(r){return 0===r?0:1===r?1:A(2,-10*r)*z(5*(r-.1)*ga)+1},InOut:function(r){return 0===r?0:1===r?1:(r*=2,1>r?-.5*A(2,10*(r-1))*z(5*(r-1.1)*ga):.5*A(2,-10*(r-1))*z(5*(r-1.1)*ga)+1)}},Back:{In:function(r){var t=1.70158;return r*r*((t+1)*r-t)},Out:function(r){var t=1.70158;return--r*r*((t+1)*r+t)+1},InOut:function(r){var t=2.5949095;return 1>(r*=2)?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)}},Bounce:{In:function(r){return 1-l.Easing.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return .5>r?.5*l.Easing.Bounce.In(2*r):.5*l.Easing.Bounce.Out(2*r-1)+.5}}},l.Interpolation={Linear:function(o,t){var n=o.length-1,s=n*t,i=D(s),r=l.Interpolation.Utils.Linear;return 0>t?r(o[0],o[1],s):1<t?r(o[n],o[n-1],n-s):r(o[i],o[i+1>n?n:i+1],s-i)},Bezier:function(o,t){for(var n=0,d=o.length-1,i=A,r=l.Interpolation.Utils.Bernstein,a=0;a<=d;a++)n+=i(1-t,d-a)*i(t,a)*o[a]*r(d,a);return n},CatmullRom:function(o,t){var n=o.length-1,s=n*t,d=D(s),r=l.Interpolation.Utils.CatmullRom;return o[0]===o[n]?(0>t&&(d=D(s=n*(1+t))),r(o[(d-1+n)%n],o[d],o[(d+1)%n],o[(d+2)%n],s-d)):0>t?o[0]-(r(o[0],o[0],o[1],o[1],-s)-o[0]):1<t?o[n]-(r(o[n],o[n],o[n-1],o[n-1],s-n)-o[n]):r(o[d?d-1:0],o[d],o[n<d+1?n:d+1],o[n<d+2?n:d+2],s-d)},Utils:{Linear:function(r,t,a){return(t-r)*a+r},Bernstein:function(r,t){var a=l.Interpolation.Utils.Factorial;return a(r)/a(t)/a(r-t)},Factorial:function(){var r=[1];return function(t){var a=1;if(r[t])return r[t];for(var o=t;1<o;o--)a*=o;return r[t]=a,a}}(),CatmullRom:function(l,t,n,d,i){var r=.5*(n-l),a=.5*(d-t),s=i*i;return(2*t-2*n+r+a)*(i*s)+(-3*t+3*n-2*r-a)*s+r*i+t}}},function(o){"function"==typeof n&&n.amd?n([],function(){return l}):"undefined"!=typeof r&&"object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))?r.exports=l:void 0!==o&&(o.TWEEN=l)}(this)}).call(this,t("_process"))},{_process:6}],2:[function(t,r){var a=Object.prototype.toString;r.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===a.call(t.buffer)||Array.isArray(t)}},{}],3:[function(t,r){r.exports=function(t,r){return"number"==typeof t?t:"number"==typeof r?r:0}},{}],4:[function(t,r,a){"use strict";function s(t){var a=t.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[a-2]?2:"="===t[a-1]?1:0}function l(t){return c[63&t>>18]+c[63&t>>12]+c[63&t>>6]+c[63&t]}function d(a,o,r){for(var i=[],s=o,n;s<r;s+=3)n=(a[s]<<16)+(a[s+1]<<8)+a[s+2],i.push(l(n));return i.join("")}a.byteLength=function(t){return 3*t.length/4-s(t)},a.toByteArray=function(i){var o=i.length,l,r,d,t,c;t=s(i),c=new g(3*o/4-t),r=0<t?o-4:o;var n=0;for(l=0;l<r;l+=4)d=m[i.charCodeAt(l)]<<18|m[i.charCodeAt(l+1)]<<12|m[i.charCodeAt(l+2)]<<6|m[i.charCodeAt(l+3)],c[n++]=255&d>>16,c[n++]=255&d>>8,c[n++]=255&d;return 2===t?(d=m[i.charCodeAt(l)]<<2|m[i.charCodeAt(l+1)]>>4,c[n++]=255&d):1===t&&(d=m[i.charCodeAt(l)]<<10|m[i.charCodeAt(l+1)]<<4|m[i.charCodeAt(l+2)]>>2,c[n++]=255&d>>8,c[n++]=255&d),c},a.fromByteArray=function(i){for(var o=i.length,s=o%3,t="",l=[],n=0,p=o-s,a;n<p;n+=16383)l.push(d(i,n,n+16383>p?p:n+16383));return 1===s?(a=i[o-1],t+=c[a>>2],t+=c[63&a<<4],t+="=="):2===s&&(a=(i[o-2]<<8)+i[o-1],t+=c[a>>10],t+=c[63&a>>4],t+=c[63&a<<2],t+="="),l.push(t),l.join("")};for(var c=[],m=[],g="undefined"==typeof Uint8Array?Array:Uint8Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=o.length;n<i;++n)c[n]=o[n],m[o.charCodeAt(n)]=n;m[45]=62,m[95]=63},{}],5:[function(t,r){"use strict";r.exports={createLink:function(o,i){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("link");for(var n in a.href=o,a.rel="stylesheet",i)if(i.hasOwnProperty(n)){var s=i[n];a.setAttribute("data-"+n,s)}t.appendChild(a)},createStyle:function(o,i){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");for(var n in a.type="text/css",i)if(i.hasOwnProperty(n)){var s=i[n];a.setAttribute("data-"+n,s)}a.sheet?(a.innerHTML=o,a.sheet.cssText=o,t.appendChild(a)):a.styleSheet?(t.appendChild(a),a.styleSheet.cssText=o):(a.appendChild(document.createTextNode(o)),t.appendChild(a))}}},{}],6:[function(t,r){function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function n(t){if(u===setTimeout)return setTimeout(t,0);if((u===a||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(r){try{return u.call(null,t,0)}catch(r){return u.call(this,t,0)}}}function i(t){if(m===clearTimeout)return clearTimeout(t);if((m===o||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(t);try{return m(t)}catch(r){try{return m.call(null,t)}catch(r){return m.call(this,t)}}}function s(){h&&f&&(h=!1,f.length?g=f.concat(g):y=-1,g.length&&l())}function l(){if(!h){var r=n(s);h=!0;for(var a=g.length;a;){for(f=g,g=[];++y<a;)f&&f[y].run();y=-1,a=g.length}f=null,h=!1,i(r)}}function d(r,a){this.fun=r,this.array=a}function c(){}var p=r.exports={},u,m;!function(){try{u="function"==typeof setTimeout?setTimeout:a}catch(t){u=a}try{m="function"==typeof clearTimeout?clearTimeout:o}catch(t){m=o}}();var g=[],h=!1,y=-1,f;p.nextTick=function(a){var o=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)o[t-1]=arguments[t];g.push(new d(a,o)),1!==g.length||h||n(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],7:[function(t,r){var a=t("buffer").Buffer;r.exports=function(t,o){if(a.isBuffer(t)&&a.isBuffer(o)){if("function"==typeof t.equals)return t.equals(o);if(t.length!==o.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==o[n])return!1;return!0}}},{buffer:8}],8:[function(t,r,a){(function(r){"use strict";function o(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(r,t){if(o()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=l.prototype):(null===r&&(r=new l(t)),r.length=t),r}function l(a,o,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(a,o,i);if("number"==typeof a){if("string"==typeof o)throw new Error("If encoding is specified then the first argument must be a string");return p(this,a)}return n(this,a,o,i)}function n(a,t,o,r){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?g(a,t,o,r):"string"==typeof t?u(a,t,o):h(a,t)}function d(r){if("number"!=typeof r)throw new TypeError("\"size\" argument must be a number");if(0>r)throw new RangeError("\"size\" argument must not be negative")}function c(a,t,o,r){return d(t),0>=t?i(a,t):void 0===o?i(a,t):"string"==typeof r?i(a,t).fill(o,r):i(a,t).fill(o)}function p(a,t){if(d(t),a=i(a,0>t?0:0|y(t)),!l.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)a[o]=0;return a}function u(a,t,o){if("string"==typeof o&&""!==o||(o="utf8"),!l.isEncoding(o))throw new TypeError("\"encoding\" must be a valid string encoding");var s=0|M(t,o);a=i(a,s);var n=a.write(t,o);return n!==s&&(a=a.slice(0,n)),a}function m(a,t){var o=0>t.length?0:0|y(t.length);a=i(a,o);for(var r=0;r<o;r+=1)a[r]=255&t[r];return a}function g(a,t,o,r){if(t.byteLength,0>o||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===o&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,o):new Uint8Array(t,o,r),l.TYPED_ARRAY_SUPPORT?(a=t,a.__proto__=l.prototype):a=m(a,t),a}function h(a,t){if(l.isBuffer(t)){var o=0|y(t.length);return a=i(a,o),0===a.length?a:(t.copy(a,0,0,o),a)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?i(a,0):m(a,t);if("Buffer"===t.type&&re(t.data))return m(a,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function y(r){if(r>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|r}function M(a,o){if(l.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var i=a.length;if(0===i)return 0;for(var r=!1;;)switch(o){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return X(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return J(a).length;default:if(r)return X(a).length;o=(""+o).toLowerCase(),r=!0;}}function f(a,t,o){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),0>=o)return"";if(o>>>=0,t>>>=0,o<=t)return"";for(a||(a="utf8");;)switch(a){case"hex":return R(this,t,o);case"utf8":case"utf-8":return I(this,t,o);case"ascii":return j(this,t,o);case"latin1":case"binary":return z(this,t,o);case"base64":return S(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,t,o);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),r=!0;}}function x(a,t,o){var r=a[t];a[t]=a[o],a[o]=r}function E(a,t,o,i,n){if(0===a.length)return-1;if("string"==typeof o?(i=o,o=0):2147483647<o?o=2147483647:-2147483648>o&&(o=-2147483648),o=+o,isNaN(o)&&(o=n?0:a.length-1),0>o&&(o=a.length+o),o>=a.length){if(n)return-1;o=a.length-1}else if(0>o){if(!n)return-1;o=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:v(a,t,o,i,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(a,t,o):Uint8Array.prototype.lastIndexOf.call(a,t,o):v(a,[t],o,i,n);throw new TypeError("val must be string, number or Buffer")}function v(d,t,p,r,n){function m(r,t){return 1===i?r[t]:r.readUInt16BE(t*i)}var i=1,o=d.length,u=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>d.length||2>t.length)return-1;i=2,o/=2,u/=2,p/=2}var s;if(n){var a=-1;for(s=p;s<o;s++)if(!(m(d,s)===m(t,-1===a?0:s-a)))-1!==a&&(s-=s-a),a=-1;else if(-1===a&&(a=s),s-a+1===u)return a*i}else for(p+u>o&&(p=o-u),s=p;0<=s;s--){for(var g=!0,c=0;c<u;c++)if(m(d,s+c)!==m(t,c)){g=!1;break}if(g)return s}return-1}function T(a,t,s,l){s=+s||0;var d=a.length-s;l?(l=+l)>d&&(l=d):l=d;var c=t.length;if(0!=c%2)throw new TypeError("Invalid hex string");l>c/2&&(l=c/2);for(var i=0,o;i<l;++i){if(o=parseInt(t.substr(2*i,2),16),isNaN(o))return i;a[s+i]=o}return i}function b(a,t,o,r){return K(X(t,a.length-o),a,o,r)}function L(a,t,o,r){return K(q(t),a,o,r)}function N(a,t,o,r){return L(a,t,o,r)}function w(a,t,o,r){return K(J(t),a,o,r)}function C(a,t,o,r){return K(Z(t,a.length-o),a,o,r)}function S(a,t,o){return 0===t&&o===a.length?ee.fromByteArray(a):ee.fromByteArray(a.slice(t,o))}function I(l,t,d){d=O(l.length,d);for(var r=[],n=t;n<d;){var p=l[n],i=null,o=239<p?4:223<p?3:191<p?2:1;if(n+o<=d){var u,s,a,m;1===o?128>p&&(i=p):2===o?(u=l[n+1],128==(192&u)&&127<(m=(31&p)<<6|63&u)&&(i=m)):3===o?(u=l[n+1],s=l[n+2],128==(192&u)&&128==(192&s)&&2047<(m=(15&p)<<12|(63&u)<<6|63&s)&&(55296>m||57343<m)&&(i=m)):4===o?(u=l[n+1],s=l[n+2],a=l[n+3],128==(192&u)&&128==(192&s)&&128==(192&a)&&65535<(m=(15&p)<<18|(63&u)<<12|(63&s)<<6|63&a)&&1114112>m&&(i=m)):void 0}null===i?(i=65533,o=1):65535<i&&(i-=65536,r.push(55296|1023&i>>>10),i=56320|1023&i),r.push(i),n+=o}return _(r)}function _(a){var t=a.length;if(t<=ae)return s.apply(String,a);for(var o="",r=0;r<t;)o+=s.apply(String,a.slice(r,r+=ae));return o}function j(a,t,o){var r="";o=O(a.length,o);for(var n=t;n<o;++n)r+=s(127&a[n]);return r}function z(a,t,o){var r="";o=O(a.length,o);for(var n=t;n<o;++n)r+=s(a[n]);return r}function R(a,t,o){var s=a.length;(!t||0>t)&&(t=0),(!o||0>o||o>s)&&(o=s);for(var n="",l=t;l<o;++l)n+=W(a[l]);return n}function B(a,t,o){for(var r=a.slice(t,o),n="",l=0;l<r.length;l+=2)n+=s(r[l]+256*r[l+1]);return n}function U(a,t,o){if(0!=a%1||0>a)throw new RangeError("offset is not uint");if(a+t>o)throw new RangeError("Trying to access beyond buffer length")}function P(a,t,o,r,n,s){if(!l.isBuffer(a))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>n||t<s)throw new RangeError("\"value\" argument is out of bounds");if(o+r>a.length)throw new RangeError("Index out of range")}function k(a,t,o,r){0>t&&(t=65535+t+1);for(var n=0,s=O(a.length-o,2);n<s;++n)a[o+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function F(a,t,o,r){0>t&&(t=4294967295+t+1);for(var n=0,s=O(a.length-o,4);n<s;++n)a[o+n]=255&t>>>8*(r?n:3-n)}function G(a,t,o,r){if(o+r>a.length)throw new RangeError("Index out of range");if(0>o)throw new RangeError("Index out of range")}function Q(a,t,o,r,n){return n||G(a,t,o,4,3.4028234663852886e38,-3.4028234663852886e38),te.write(a,t,o,r,23,4),o+4}function H(a,t,o,r,n){return n||G(a,t,o,8,1.7976931348623157e308,-1.7976931348623157e308),te.write(a,t,o,r,52,8),o+8}function V(r){if(r=Y(r).replace(oe,""),2>r.length)return"";for(;0!=r.length%4;)r+="=";return r}function Y(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function W(r){return 16>r?"0"+r.toString(16):r.toString(16)}function X(a,t){t=t||1/0;for(var s=a.length,n=null,l=[],i=0,o;i<s;++i){if(55295<(o=a.charCodeAt(i))&&57344>o){if(!n){if(56319<o){-1<(t-=3)&&l.push(239,191,189);continue}if(i+1===s){-1<(t-=3)&&l.push(239,191,189);continue}n=o;continue}if(56320>o){-1<(t-=3)&&l.push(239,191,189),n=o;continue}o=65536+(n-55296<<10|o-56320)}else n&&-1<(t-=3)&&l.push(239,191,189);if(n=null,128>o){if(0>(t-=1))break;l.push(o)}else if(2048>o){if(0>(t-=2))break;l.push(192|o>>6,128|63&o)}else if(65536>o){if(0>(t-=3))break;l.push(224|o>>12,128|63&o>>6,128|63&o)}else{if(!(1114112>o))throw new Error("Invalid code point");if(0>(t-=4))break;l.push(240|o>>18,128|63&o>>12,128|63&o>>6,128|63&o)}}return l}function q(a){for(var t=[],o=0;o<a.length;++o)t.push(255&a.charCodeAt(o));return t}function Z(a,t){for(var s=[],i=0,o,r,n;i<a.length&&!(0>(t-=2));++i)o=a.charCodeAt(i),r=o>>8,n=o%256,s.push(n),s.push(r);return s}function J(r){return ee.toByteArray(V(r))}function K(a,t,o,r){for(var n=0;n<r&&!(n+o>=t.length||n>=a.length);++n)t[n+o]=a[n];return n}function $(r){return r!==r}var ee=t("base64-js"),te=t("ieee754"),re=t("isarray");a.Buffer=l,a.SlowBuffer=function(r){return+r!=r&&(r=0),l.alloc(+r)},a.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0===r.TYPED_ARRAY_SUPPORT?function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(r){return!1}}():r.TYPED_ARRAY_SUPPORT,a.kMaxLength=o(),l.poolSize=8192,l._augment=function(r){return r.__proto__=l.prototype,r},l.from=function(a,t,o){return n(null,a,t,o)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(a,t,o){return c(null,a,t,o)},l.allocUnsafe=function(r){return p(null,r)},l.allocUnsafeSlow=function(r){return p(null,r)},l.isBuffer=function(r){return null!=r&&r._isBuffer},l.compare=function(a,t){if(!l.isBuffer(a)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(a===t)return 0;for(var o=a.length,r=t.length,n=0,s=O(o,r);n<s;++n)if(a[n]!==t[n]){o=a[n],r=t[n];break}return o<r?-1:r<o?1:0},l.isEncoding=function(r){switch((r+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},l.concat=function(a,t){if(!re(a))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===a.length)return l.alloc(0);var o;if(void 0===t)for(t=0,o=0;o<a.length;++o)t+=a[o].length;var r=l.allocUnsafe(t),n=0;for(o=0;o<a.length;++o){var s=a[o];if(!l.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(r,n),n+=s.length}return r},l.byteLength=M,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var r=this.length;if(0!=r%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<r;t+=2)x(this,t,t+1);return this},l.prototype.swap32=function(){var r=this.length;if(0!=r%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<r;t+=4)x(this,t,t+3),x(this,t+1,t+2);return this},l.prototype.swap64=function(){var r=this.length;if(0!=r%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<r;t+=8)x(this,t,t+7),x(this,t+1,t+6),x(this,t+2,t+5),x(this,t+3,t+4);return this},l.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?I(this,0,r):f.apply(this,arguments)},l.prototype.equals=function(r){if(!l.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===l.compare(this,r)},l.prototype.inspect=function(){var r="",t=a.INSPECT_MAX_BYTES;return 0<this.length&&(r=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(r+=" ... ")),"<Buffer "+r+">"},l.prototype.compare=function(d,t,c,r,n){if(!l.isBuffer(d))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===c&&(c=d?d.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),0>t||c>d.length||0>r||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=c)return 0;if(r>=n)return-1;if(t>=c)return 1;if(t>>>=0,c>>>=0,r>>>=0,n>>>=0,this===d)return 0;for(var p=n-r,i=c-t,o=O(p,i),u=this.slice(r,n),s=d.slice(t,c),a=0;a<o;++a)if(u[a]!==s[a]){p=u[a],i=s[a];break}return p<i?-1:i<p?1:0},l.prototype.includes=function(a,t,o){return-1!==this.indexOf(a,t,o)},l.prototype.indexOf=function(a,t,o){return E(this,a,t,o,!0)},l.prototype.lastIndexOf=function(a,t,o){return E(this,a,t,o,!1)},l.prototype.write=function(a,t,o,r){if(void 0===t)r="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)r=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===r&&(r="utf8")):(r=o,o=void 0)}var n=this.length-t;if((void 0===o||o>n)&&(o=n),0<a.length&&(0>o||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return T(this,a,t,o);case"utf8":case"utf-8":return b(this,a,t,o);case"ascii":return L(this,a,t,o);case"latin1":case"binary":return N(this,a,t,o);case"base64":return w(this,a,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,a,t,o);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0;}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;l.prototype.slice=function(a,o){var s=this.length;a=~~a,o=void 0===o?s:~~o,0>a?0>(a+=s)&&(a=0):a>s&&(a=s),0>o?0>(o+=s)&&(o=0):o>s&&(o=s),o<a&&(o=a);var r;if(l.TYPED_ARRAY_SUPPORT)r=this.subarray(a,o),r.__proto__=l.prototype;else{var n=o-a;r=new l(n,void 0);for(var d=0;d<n;++d)r[d]=this[d+a]}return r},l.prototype.readUIntLE=function(a,t,o){a|=0,t|=0,o||U(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return r},l.prototype.readUIntBE=function(a,t,o){a|=0,t|=0,o||U(a,t,this.length);for(var r=this[a+--t],n=1;0<t&&(n*=256);)r+=this[a+--t]*n;return r},l.prototype.readUInt8=function(r,t){return t||U(r,1,this.length),this[r]},l.prototype.readUInt16LE=function(r,t){return t||U(r,2,this.length),this[r]|this[r+1]<<8},l.prototype.readUInt16BE=function(r,t){return t||U(r,2,this.length),this[r]<<8|this[r+1]},l.prototype.readUInt32LE=function(r,t){return t||U(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},l.prototype.readUInt32BE=function(r,t){return t||U(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},l.prototype.readIntLE=function(a,t,o){a|=0,t|=0,o||U(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return n*=128,r>=n&&(r-=A(2,8*t)),r},l.prototype.readIntBE=function(a,t,o){a|=0,t|=0,o||U(a,t,this.length);for(var r=t,n=1,s=this[a+--r];0<r&&(n*=256);)s+=this[a+--r]*n;return n*=128,s>=n&&(s-=A(2,8*t)),s},l.prototype.readInt8=function(r,t){return t||U(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},l.prototype.readInt16LE=function(a,t){t||U(a,2,this.length);var o=this[a]|this[a+1]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt16BE=function(a,t){t||U(a,2,this.length);var o=this[a+1]|this[a]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt32LE=function(r,t){return t||U(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},l.prototype.readInt32BE=function(r,t){return t||U(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},l.prototype.readFloatLE=function(r,t){return t||U(r,4,this.length),te.read(this,r,!0,23,4)},l.prototype.readFloatBE=function(r,t){return t||U(r,4,this.length),te.read(this,r,!1,23,4)},l.prototype.readDoubleLE=function(r,t){return t||U(r,8,this.length),te.read(this,r,!0,52,8)},l.prototype.readDoubleBE=function(r,t){return t||U(r,8,this.length),te.read(this,r,!1,52,8)},l.prototype.writeUIntLE=function(a,o,s,r){(a=+a,o|=0,s|=0,!r)&&P(this,a,o,s,A(2,8*s)-1,0);var l=1,d=0;for(this[o]=255&a;++d<s&&(l*=256);)this[o+d]=255&a/l;return o+s},l.prototype.writeUIntBE=function(a,o,s,r){(a=+a,o|=0,s|=0,!r)&&P(this,a,o,s,A(2,8*s)-1,0);var l=s-1,d=1;for(this[o+l]=255&a;0<=--l&&(d*=256);)this[o+l]=255&a/d;return o+s},l.prototype.writeUInt8=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,1,255,0),l.TYPED_ARRAY_SUPPORT||(a=D(a)),this[o]=255&a,o+1},l.prototype.writeUInt16LE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):k(this,a,o,!0),o+2},l.prototype.writeUInt16BE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):k(this,a,o,!1),o+2},l.prototype.writeUInt32LE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[o+3]=a>>>24,this[o+2]=a>>>16,this[o+1]=a>>>8,this[o]=255&a):F(this,a,o,!0),o+4},l.prototype.writeUInt32BE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):F(this,a,o,!1),o+4},l.prototype.writeIntLE=function(a,s,l,r){if(a=+a,s|=0,!r){var d=A(2,8*l-1);P(this,a,s,l,d-1,-d)}var c=0,i=1,o=0;for(this[s]=255&a;++c<l&&(i*=256);)0>a&&0===o&&0!==this[s+c-1]&&(o=1),this[s+c]=255&(a/i>>0)-o;return s+l},l.prototype.writeIntBE=function(a,s,l,r){if(a=+a,s|=0,!r){var d=A(2,8*l-1);P(this,a,s,l,d-1,-d)}var c=l-1,i=1,o=0;for(this[s+c]=255&a;0<=--c&&(i*=256);)0>a&&0===o&&0!==this[s+c+1]&&(o=1),this[s+c]=255&(a/i>>0)-o;return s+l},l.prototype.writeInt8=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,1,127,-128),l.TYPED_ARRAY_SUPPORT||(a=D(a)),0>a&&(a=255+a+1),this[o]=255&a,o+1},l.prototype.writeInt16LE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):k(this,a,o,!0),o+2},l.prototype.writeInt16BE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):k(this,a,o,!1),o+2},l.prototype.writeInt32LE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8,this[o+2]=a>>>16,this[o+3]=a>>>24):F(this,a,o,!0),o+4},l.prototype.writeInt32BE=function(a,o,n){return a=+a,o|=0,n||P(this,a,o,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):F(this,a,o,!1),o+4},l.prototype.writeFloatLE=function(a,t,o){return Q(this,a,t,!0,o)},l.prototype.writeFloatBE=function(a,t,o){return Q(this,a,t,!1,o)},l.prototype.writeDoubleLE=function(a,t,o){return H(this,a,t,!0,o)},l.prototype.writeDoubleBE=function(a,t,o){return H(this,a,t,!1,o)},l.prototype.copy=function(a,t,o,r){if(o||(o=0),r||0===r||(r=this.length),t>=a.length&&(t=a.length),t||(t=0),0<r&&r<o&&(r=o),r===o)return 0;if(0===a.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>o||o>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),a.length-t<r-o&&(r=a.length-t+o);var n=r-o,i;if(this===a&&o<t&&t<r)for(i=n-1;0<=i;--i)a[i+t]=this[i+o];else if(1e3>n||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<n;++i)a[i+t]=this[i+o];else Uint8Array.prototype.set.call(a,this.subarray(o,o+n),t);return n},l.prototype.fill=function(a,s,d,c){if("string"==typeof a){if("string"==typeof s?(c=s,s=0,d=this.length):"string"==typeof d&&(c=d,d=this.length),1===a.length){var p=a.charCodeAt(0);256>p&&(a=p)}if(void 0!==c&&"string"!=typeof c)throw new TypeError("encoding must be a string");if("string"==typeof c&&!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c)}else"number"==typeof a&&(a&=255);if(0>s||this.length<s||this.length<d)throw new RangeError("Out of range index");if(d<=s)return this;s>>>=0,d=void 0===d?this.length:d>>>0,a||(a=0);var m;if("number"==typeof a)for(m=s;m<d;++m)this[m]=a;else{var i=l.isBuffer(a)?a:X(new l(a,c).toString()),o=i.length;for(m=0;m<d-s;++m)this[m+s]=i[m%o]}return this};var oe=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"base64-js":4,ieee754:18,isarray:9}],9:[function(t,r){var a={}.toString;r.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},{}],10:[function(t,r,a){function o(){var t;try{t=a.storage.debug}catch(t){}return t}a=r.exports=t("./debug"),a.log=function(){return"object"==("undefined"===typeof console?"undefined":babelHelpers.typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(){var a=arguments,o=this.useColors;if(a[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+a[0]+(o?"%c ":" "),!o)return a;var n="color: "+this.color;a=[a[0],n,"color: inherit"].concat(Array.prototype.slice.call(a,1));var r=0,t=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(r++,"%c"===a&&(t=r))}),a.splice(t,0,n),a},a.save=function(t){try{null==t?a.storage.removeItem("debug"):a.storage.debug=t}catch(t){}},a.load=o,a.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(t){return JSON.stringify(t)},a.enable(o())},{"./debug":11}],11:[function(t,r,a){function n(){return a.colors[o++%a.colors.length]}a=r.exports=function(t){function i(){}function l(){var t=l;null==t.useColors&&(t.useColors=a.useColors()),null==t.color&&t.useColors&&(t.color=n());var i=Array.prototype.slice.call(arguments);i[0]=a.coerce(i[0]),"string"!=typeof i[0]&&(i=["%o"].concat(i));var r=0;i[0]=i[0].replace(/%([a-z%])/g,function(s,o){if("%%"===s)return s;r++;var d=a.formatters[o];if("function"==typeof d){var c=i[r];s=d.call(t,c),i.splice(r,1),r--}return s}),"function"==typeof a.formatArgs&&(i=a.formatArgs.apply(t,i)),(l.log||a.log||console.log.bind(console)).apply(t,i)}i.enabled=!1,l.enabled=!0;var r=a.enabled(t)?l:i;return r.namespace=t,r},a.coerce=function(t){return t instanceof Error?t.stack||t.message:t},a.disable=function(){a.enable("")},a.enable=function(t){a.save(t);for(var n=(t||"").split(/[\s,]+/),r=n.length,o=0;o<r;o++)n[o]&&(t=n[o].replace(/\*/g,".*?"),"-"===t[0]?a.skips.push(new RegExp("^"+t.substr(1)+"$")):a.names.push(new RegExp("^"+t+"$")))},a.enabled=function(t){var n,r;for(n=0,r=a.skips.length;n<r;n++)if(a.skips[n].test(t))return!1;for(n=0,r=a.names.length;n<r;n++)if(a.names[n].test(t))return!0;return!1},a.names=[],a.skips=[],a.formatters={};var o=0},{}],12:[function(t,r){"use strict";function a(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function i(a,r,i){var n=r[i];if(void 0!==n&&null!==n){if(l.call(a,i)&&(void 0===a[i]||null===a[i]))throw new TypeError("Cannot convert undefined or null to object ("+i+")");a[i]=l.call(a,i)&&s(n)?o(Object(a[i]),r[i]):n}}function o(a,r){if(a===r)return a;for(var s in r=Object(r),r)l.call(r,s)&&i(a,r,s);if(Object.getOwnPropertySymbols)for(var d=Object.getOwnPropertySymbols(r),t=0;t<d.length;t++)n.call(r,d[t])&&i(a,r,d[t]);return a}var s=t("is-obj"),l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;r.exports=function(t){t=a(t);for(var r=1;r<arguments.length;r++)o(t,arguments[r]);return t}},{"is-obj":22}],13:[function(){!function(ge,ye,r,t){"use strict";function Ae(a,o){for(var t=0,r=a.length;t<r;t++)p(a[t],o)}function a(a){for(var i=0,r=a.length,n;i<r;i++)n=a[i],N(n,U[o(n)])}function i(r){return function(a){te(a)&&(p(a,r),Ae(a.querySelectorAll(H),r))}}function o(a){var o=ne.call(a,"is"),t=a.nodeName.toUpperCase(),r=V.call(S,o?_+o.toUpperCase():R+t);return o&&-1<r&&!u(t,o)?-1:r}function u(r,a){return-1<H.indexOf(r+"[is=\""+a+"\"]")}function c(o){var i=o.currentTarget,t=o.attrChange,r=o.attrName,n=o.target;fe&&(!n||n===i)&&i.attributeChangedCallback&&"style"!==r&&o.prevValue!==o.newValue&&i.attributeChangedCallback(r,t===o[M]?null:o.prevValue,t===o[w]?null:o.newValue)}function l(r){var a=i(r);return function(t){me.push(a,t.target)}}function d(t){pe&&(pe=!1,t.currentTarget.removeEventListener(D,d)),Ae((t.target||ye).querySelectorAll(H),t.detail===L?L:b),ee&&h()}function n(a,o){var t=this;oe.call(t,a,o),g.call(t,{target:t})}function s(r,a){Q(r,a),E?E.observe(r,se):(he&&(r.setAttribute=n,r[m]=A(r),r.addEventListener(P,g)),r.addEventListener(I,c)),r.createdCallback&&fe&&(r.created=!0,r.createdCallback(),r.created=!1)}function h(){for(var a=0,t=re.length,r;a<t;a++)r=re[a],x.contains(r)||(t--,re.splice(a--,1),p(r,L))}function f(t){throw new Error("A "+t+" type is already registered")}function p(a,i){var t=o(a),n;-1<t&&(O(a,U[t]),t=0,i!==b||a[b]?i===L&&!a[L]&&(a[b]=!1,a[L]=!0,t=1):(a[L]=!1,a[b]=!0,t=1,ee&&0>V.call(re,a)&&re.push(a)),t&&(n=a[i+"Callback"])&&n.call(a))}if(!(t in ye)){var m="__"+t+(1e5*Math.random()>>0),b="attached",L="detached",T="extends",M="ADDITION",v="MODIFICATION",w="REMOVAL",I="DOMAttrModified",D="DOMContentLoaded",P="DOMSubtreeModified",R="<",_="=",k=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,F=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],S=[],U=[],H="",x=ye.documentElement,V=S.indexOf||function(r){for(var a=this.length;a--&&this[a]!==r;);return a},G=r.prototype,j=G.hasOwnProperty,z=G.isPrototypeOf,q=r.defineProperty,W=r.getOwnPropertyDescriptor,X=r.getOwnPropertyNames,Y=r.getPrototypeOf,Z=r.setPrototypeOf,B=!!r.__proto__,J=r.create||function r(a){return a?(r.prototype=a,new r):this},Q=Z||(B?function(r,a){return r.__proto__=a,r}:X&&W?function(){function a(o,i){for(var t=X(i),n=0,a=t.length,s;n<a;n++)s=t[n],j.call(o,s)||q(o,s,W(i,s))}return function(o,t){do a(o,t);while((t=Y(t))&&!z.call(t,o));return o}}():function(a,o){for(var t in o)a[t]=o[t];return a}),K=ge.MutationObserver||ge.WebKitMutationObserver,$=(ge.HTMLElement||ge.Element||ge.Node).prototype,ee=!z.call($,x),te=ee?function(t){return 1===t.nodeType}:function(t){return z.call($,t)},re=ee&&[],ae=$.cloneNode,ne=$.getAttribute,oe=$.setAttribute,ie=$.removeAttribute,le=ye.createElement,se=K&&{attributes:!0,characterData:!0,attributeOldValue:!0},de=K||function(){he=!1,x.removeEventListener(I,de)},ce=ge.requestAnimationFrame||ge.webkitRequestAnimationFrame||ge.mozRequestAnimationFrame||ge.msRequestAnimationFrame||function(t){setTimeout(t,10)},ue=!1,he=!0,pe=!0,fe=!0,me,g,C,A,E,O,N;Z||B?(O=function(r,a){z.call(a,r)||s(r,a)},N=s):(O=function(a,o){a[m]||(a[m]=r(!0),s(a,o))},N=O),ee?(he=!1,function(){var o=W($,"addEventListener"),s=o.value,r=function(r){var a=new CustomEvent(I,{bubbles:!0});a.attrName=r,a.prevValue=ne.call(this,r),a.newValue=null,a[w]=a.attrChange=2,ie.call(this,r),this.dispatchEvent(a)},n=function(o,t){var r=this.hasAttribute(o),n=r&&ne.call(this,o);e=new CustomEvent(I,{bubbles:!0}),oe.call(this,o,t),e.attrName=o,e.prevValue=r?n:null,e.newValue=t,r?e[v]=e.attrChange=1:e[M]=e.attrChange=0,this.dispatchEvent(e)},a=function(o){var i=o.currentTarget,r=i[m],n=o.propertyName,a;r.hasOwnProperty(n)&&(r=r[n],a=new CustomEvent(I,{bubbles:!0}),a.attrName=r.name,a.prevValue=r.value||null,a.newValue=r.value=i[n]||null,null==a.prevValue?a[M]=a.attrChange=0:a[v]=a.attrChange=1,i.dispatchEvent(a))};o.value=function(o,l,t){o===I&&this.attributeChangedCallback&&this.setAttribute!==n&&(this[m]={className:{name:"class",value:this.className}},this.setAttribute=n,this.removeAttribute=r,s.call(this,"propertychange",a)),s.call(this,o,l,t)},q($,"addEventListener",o)}()):K||(x.addEventListener(I,de),x.setAttribute(m,1),x.removeAttribute(m),he&&(g=function(o){var i=this,a,t,r;if(i===o.target){for(r in a=i[m],i[m]=t=A(i),t){if(!(r in a))return C(0,i,r,a[r],t[r],M);if(t[r]!==a[r])return C(1,i,r,a[r],t[r],v)}for(r in a)if(!(r in t))return C(2,i,r,a[r],t[r],w)}},C=function(o,s,d,p,u,m){var l={attrChange:o,currentTarget:s,attrName:d,prevValue:p,newValue:u};l[m]=o,c(l)},A=function(o){for(var s={},n=o.attributes,a=0,l=n.length,i,t;a<l;a++)i=n[a],"setAttribute"!==(t=i.name)&&(s[t]=i.value);return s})),ye[t]=function(r,c){if(p=r.toUpperCase(),ue||(ue=!0,K?(E=function(s,d){function t(a,o){for(var t=0,i=a.length;t<i;o(a[t++]));}return new K(function(r){for(var n=0,o=r.length,c,a,l;n<o;n++)c=r[n],"childList"===c.type?(t(c.addedNodes,s),t(c.removedNodes,d)):(a=c.target,fe&&a.attributeChangedCallback&&"style"!==c.attributeName&&(l=ne.call(a,c.attributeName))!==c.oldValue&&a.attributeChangedCallback(c.attributeName,c.oldValue,l))})}(i(b),i(L)),E.observe(ye,{childList:!0,subtree:!0})):(me=[],ce(function t(){for(;me.length;)me.shift().call(null,me.shift());ce(t)}),ye.addEventListener("DOMNodeInserted",l(b)),ye.addEventListener("DOMNodeRemoved",l(L))),ye.addEventListener(D,d),ye.addEventListener("readystatechange",d),ye.createElement=function(r,o){var t=le.apply(ye,arguments),n=""+r,a=V.call(S,(o?_:R)+(o||n).toUpperCase()),s=-1<a;return o&&(t.setAttribute("is",o=o.toLowerCase()),s&&(s=u(n.toUpperCase(),o))),fe=!ye.createElement.innerHTMLHelper,s&&N(t,U[a]),t},$.cloneNode=function(n){var i=ae.call(this,!!n),t=o(i);return-1<t&&N(i,U[t]),n&&a(i.querySelectorAll(H)),i}),-2<V.call(S,_+p)+V.call(S,R+p)&&f(r),!k.test(p)||-1<V.call(F,p))throw new Error("The type "+r+" is invalid");var t=function(){return m?ye.createElement(g,p):ye.createElement(g)},s=c||G,m=j.call(s,T),g=m?c[T].toUpperCase():p,p,n;return m&&-1<V.call(S,R+g)&&f(g),n=S.push((m?_:R)+p)-1,H=H.concat(H.length?",":"",m?g+"[is=\""+r.toLowerCase()+"\"]":g),t.prototype=U[n]=j.call(s,"prototype")?s.prototype:J($),Ae(ye.querySelectorAll(H),b),t}}}(window,document,Object,"registerElement")},{}],14:[function(t,r){r.exports=function(t){return"int8"===t?Int8Array:"int16"===t?Int16Array:"int32"===t?Int32Array:"uint8"===t?Uint8Array:"uint16"===t?Uint16Array:"uint32"===t?Uint32Array:"float32"===t?Float32Array:"float64"===t?Float64Array:"array"===t?Array:"uint8_clamped"===t?Uint8ClampedArray:void 0}},{}],15:[function(t,r){var d=t("dtype");r.exports=function(c,p,u){if(!c)throw new TypeError("must specify data as first parameter");if(u=0|+(u||0),Array.isArray(c)&&Array.isArray(c[0])){var r=c[0].length,a=c.length*r;p&&"string"!=typeof p||(p=new(d(p||"float32"))(a+u));var n=p.length-u;if(a!==n)throw new Error("source length "+a+" ("+r+"x"+c.length+") does not match destination length "+n);for(var o=0,s=u;o<c.length;o++)for(var m=0;m<r;m++)p[s++]=c[o][m]}else if(p&&"string"!=typeof p)p.set(c,u);else{var l=d(p||"float32");0===u?p=new l(c):(p=new l(c.length+u),p.set(c,u))}return p}},{dtype:14}],16:[function(t,r){function a(i,r,t){for(var o=0,n=i.length;o<n;o++)d.call(i,o)&&r.call(t,i[o],o,i)}function n(i,r,t){for(var o=0,n=i.length;o<n;o++)r.call(t,i.charAt(o),o,i)}function i(a,r,t){for(var o in a)d.call(a,o)&&r.call(t,a[o],o,a)}var s=t("is-function");r.exports=function(d,c,t){if(!s(c))throw new TypeError("iterator must be a function");3>arguments.length&&(t=this),"[object Array]"===l.call(d)?a(d,c,t):"string"==typeof d?n(d,c,t):i(d,c,t)};var l=Object.prototype.toString,d=Object.prototype.hasOwnProperty},{"is-function":21}],17:[function(t,r){(function(t){var a;a="undefined"==typeof window?"undefined"==typeof t?"undefined"==typeof self?{}:self:t:window,r.exports=a}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],18:[function(t,a,o){o.read=function(l,a,o,t,r){var d=8*r-t-1,c=(1<<d)-1,u=c>>1,m=-7,g=o?r-1:0,h=o?-1:1,n=l[a+g],s,y;for(g+=h,s=n&(1<<-m)-1,n>>=-m,m+=d;0<m;s=256*s+l[a+g],g+=h,m-=8);for(y=s&(1<<-m)-1,s>>=-m,m+=t;0<m;y=256*y+l[a+g],g+=h,m-=8);if(0===s)s=1-u;else{if(s===c)return y?NaN:1/0*(n?-1:1);y+=A(2,t),s-=u}return(n?-1:1)*y*A(2,s-t)},o.write=function(d,a,o,t,c,m){var g=8*m-c-1,h=(1<<g)-1,i=h>>1,y=23===c?5.960464477539063e-8-6.617444900424222e-24:0,n=t?0:m-1,s=t?1:-1,u=0>a||0===a&&0>1/a?1:0,M,x,E;for(a=T(a),isNaN(a)||a===1/0?(x=isNaN(a)?1:0,M=h):(M=D(l(a)/r),1>a*(E=A(2,-M))&&(M--,E*=2),a+=1<=M+i?y/E:y*A(2,1-i),2<=a*E&&(M++,E/=2),M+i>=h?(x=0,M=h):1<=M+i?(x=(a*E-1)*A(2,c),M+=i):(x=a*A(2,i-1)*A(2,c),M=0));8<=c;d[o+n]=255&x,n+=s,x/=256,c-=8);for(M=M<<c|x,g+=c;0<g;d[o+n]=255&M,n+=s,M/=256,g-=8);d[o+n-s]|=128*u}},{}],19:[function(t,r){r.exports="function"==typeof Object.create?function(r,a){r.super_=a,r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(r,t){r.super_=t;var a=function(){};a.prototype=t.prototype,r.prototype=new a,r.prototype.constructor=r}},{}],20:[function(t,r){function a(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&a(t.slice(0,0))}r.exports=function(t){return null!=t&&(a(t)||o(t)||!!t._isBuffer)}},{}],21:[function(t,r){r.exports=function(r){var n=a.call(r);return"[object Function]"===n||"function"==typeof r&&"[object RegExp]"!==n||"undefined"!=typeof window&&(r===window.setTimeout||r===window.alert||r===window.confirm||r===window.prompt)};var a=Object.prototype.toString},{}],22:[function(t,r){"use strict";r.exports=function(r){var a="undefined"===typeof r?"undefined":babelHelpers.typeof(r);return null!==r&&("object"===a||"function"===a)}},{}],23:[function(t,r){function a(r){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(r)}function o(r){return new Function(["return function "+r+"() {","  return this._"+r,"}"].join("\n"))()}function n(a,t){if(!a.chars||0===a.chars.length)return null;var o=s(a.chars,t);return 0<=o?a.chars[o]:null}function m(a){for(var t=0;t<d.length;t++){var o=d[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r].height}return 0}function i(a){for(var t=0;t<c.length;t++){var o=c[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r]}return 0}function y(a){for(var t=0;t<p.length;t++){var o=p[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r].height}return 0}function l(o,t,s){if(!o.kernings||0===o.kernings.length)return 0;for(var r=o.kernings,n=0,i;n<r.length;n++)if(i=r[n],i.first===t&&i.second===s)return i.amount;return 0}function A(r){return"center"===r?v:"right"===r?b:h}function s(a,t,o){o=o||0;for(var r=o;r<a.length;r++)if(a[r].id===t)return r;return-1}var M=t("word-wrapper"),x=t("xtend"),E=t("as-number"),d=["x","e","a","o","n","s","r","c","u","m","v","w","z"],c=["m","w"],p=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],u=9,g=32,h=0,v=1,b=2;r.exports=function(r){return new a(r)},a.prototype.update=function(T){if(T=x({measure:this._measure},T),this._opt=T,this._opt.tabSize=E(this._opt.tabSize,4),!T.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,L=T.text||"",r=T.font;this._setupSpaceGlyphs(r);var n=M.lines(L,T),i=T.width||0;t.length=0;var D=n.reduce(function(r,t){return C(r,t.width,i)},0),h=0,o=0,s=E(T.lineHeight,r.common.lineHeight),a=r.common.base,c=s-a,u=T.letterSpacing||0,p=s*n.length-c,N=A(this._opt.align);o-=p,this._width=D,this._height=p,this._descender=s-a,this._baseline=a,this._xHeight=m(r),this._capHeight=y(r),this._lineHeight=s,this._ascender=s-c-this._xHeight;var d=this;n.forEach(function(n,c){for(var p=n.start,m=n.end,g=n.width,f=p,A;f<m;f++){var a=L.charCodeAt(f),y=d.getGlyph(r,a);if(y){A&&(h+=l(r,A.id,y.id));var M=h;N===v?M+=(D-g)/2:N===b&&(M+=D-g),t.push({position:[M,o],data:y,index:f,line:c}),h+=y.xadvance+u,A=y}}o+=s,h=0}),this._linesTotal=n.length},a.prototype._setupSpaceGlyphs=function(a){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,a.chars&&0!==a.chars.length){var t=n(a,g)||i(a)||a.chars[0],o=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=x(t,{x:0,y:0,xadvance:o,id:u,xoffset:0,yoffset:0,width:0,height:0})}},a.prototype.getGlyph=function(a,t){var o=n(a,t);return o||(t===u?this._fallbackTabGlyph:t===g?this._fallbackSpaceGlyph:null)},a.prototype.computeMetrics=function(m,t,g,r){var n=this._opt.letterSpacing||0,h=this._opt.font,o=0,s=0,y=0,u,i;if(!h.chars||0===h.chars.length)return{start:t,end:t,width:0};g=O(m.length,g);for(var a=t;a<g;a++){var A=m.charCodeAt(a),u=this.getGlyph(h,A);if(u){u.xoffset,o+=i?l(h,i.id,u.id):0;var p=o+u.xadvance+n,f=o+u.width;if(f>=r||p>=r)break;o=p,s=f,i=u}y++}return i&&(s+=i.xoffset),{start:t,end:t+y,width:s}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(r){Object.defineProperty(a.prototype,r,{get:o(r),configurable:!0})})},{"as-number":3,"word-wrapper":47,xtend:50}],24:[function(t,r){(function(l){function d(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}function a(t){if(s)return i(t,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var r=new self.XMLHttpRequest;return r.overrideMimeType("text/plain; charset=x-user-defined"),i({xhr:r},t)}var o=t("xhr"),n=function(){},c=t("parse-bmfont-ascii"),p=t("parse-bmfont-xml"),m=t("parse-bmfont-binary"),g=t("./lib/is-binary"),i=t("xtend"),s=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();r.exports=function(h,y){y="function"==typeof y?y:n,"string"==typeof h?h={uri:h}:h||(h={}),h.binary&&(h=a(h)),o(h,function(r,t,f){if(r)return y(r);if(!/^2/.test(t.statusCode))return y(new Error("http status code: "+t.statusCode));if(!f)return y(new Error("no body result"));var A=!1;if(d(f)){var o=new Uint8Array(f);f=new l(o,"binary")}g(f)&&(A=!0,"string"==typeof f&&(f=new l(f,"binary"))),A||(l.isBuffer(f)&&(f=f.toString(h.encoding)),f=f.trim());var a;try{var s=t.headers["content-type"];a=A?m(f):/json/.test(s)||"{"===f.charAt(0)?JSON.parse(f):/xml/.test(s)||"<"===f.charAt(0)?p(f):c(f)}catch(t){y(new Error("error parsing font "+t.message)),y=n}y(null,a)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":25,buffer:8,"parse-bmfont-ascii":27,"parse-bmfont-binary":28,"parse-bmfont-xml":29,xhr:48,xtend:50}],25:[function(t,r){(function(a){var o=t("buffer-equal"),n=new a([66,77,70,3]);r.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):4<t.length&&o(t.slice(0,4),n)}}).call(this,t("buffer").Buffer)},{buffer:8,"buffer-equal":7}],26:[function(t,r){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;r.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var o={},r=0;10>r;r++)o["_"+s(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(t){return o[t]}).join(""))return!1;var t={};return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"].forEach(function(r){t[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},t)).join("")}catch(t){return!1}}()?Object.assign:function(r){for(var d=i(r),o=1,p,t;o<arguments.length;o++){for(var u in p=Object(arguments[o]),p)n.call(p,u)&&(d[u]=p[u]);if(l){t=l(p);for(var s=0;s<t.length;s++)a.call(p,t[s])&&(d[t[s]]=p[t[s]])}}return d}},{}],27:[function(t,r){function o(l,d){if(!(l=l.replace(/\t+/g," ").trim()))return null;var r=l.indexOf(" ");if(-1===r)throw new Error("no named row at line "+d);var t=l.substring(0,r);l=l.substring(r+1),l=l.replace(/letter=[\'\"]\S+[\'\"]/gi,""),l=l.split("="),l=l.map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var c=[],n=0,i;n<l.length;n++)i=l[n],0===n?c.push({key:i[0],data:""}):n===l.length-1?c[c.length-1].data=a(i[0]):(c[c.length-1].data=a(i[0]),c.push({key:i[1],data:""}));var s={key:t,data:{}};return c.forEach(function(t){s.data[t.key]=t.data}),s}function a(t){return t&&0!==t.length?0===t.indexOf("\"")||0===t.indexOf("'")?t.substring(1,t.length-1):-1===t.indexOf(",")?parseInt(t,10):n(t):""}function n(t){return t.split(",").map(function(t){return parseInt(t,10)})}r.exports=function(i){if(!i)throw new Error("no data provided");i=i.toString().trim();var s={pages:[],chars:[],kernings:[]},r=i.split(/\r\n?|\n/g);if(0===r.length)throw new Error("no data in BMFont file");for(var t=0,a;t<r.length;t++)if(a=o(r[t],t),a)if("page"===a.key){if("number"!=typeof a.data.id)throw new Error("malformed file at line "+t+" -- needs page id=N");if("string"!=typeof a.data.file)throw new Error("malformed file at line "+t+" -- needs page file=\"path\"");s.pages[a.data.id]=a.data.file}else"chars"===a.key||"kernings"===a.key||("char"===a.key?s.chars.push(a.data):"kerning"===a.key?s.kernings.push(a.data):s[a.key]=a.data);return s}},{}],28:[function(t,r){function o(o,r,p){if(p>r.length-1)return 0;var n=r.readUInt8(p++),a=r.readInt32LE(p);switch(p+=4,n){case 1:o.info=i(r,p);break;case 2:o.common=s(r,p);break;case 3:o.pages=l(r,p,a);break;case 4:o.chars=d(r,p,a);break;case 5:o.kernings=c(r,p,a);}return 5+a}function i(t,r){var o={size:t.readInt16LE(r)},n=t.readUInt8(r+2);return o.smooth=1&n>>7,o.unicode=1&n>>6,o.italic=1&n>>5,o.bold=1&n>>4,1&n>>3&&(o.fixedHeight=1),o.charset=t.readUInt8(r+3)||"",o.stretchH=t.readUInt16LE(r+4),o.aa=t.readUInt8(r+6),o.padding=[t.readInt8(r+7),t.readInt8(r+8),t.readInt8(r+9),t.readInt8(r+10)],o.spacing=[t.readInt8(r+11),t.readInt8(r+12)],o.outline=t.readUInt8(r+13),o.face=u(t,r+14),o}function s(t,r){var a={};return a.lineHeight=t.readUInt16LE(r),a.base=t.readUInt16LE(r+2),a.scaleW=t.readUInt16LE(r+4),a.scaleH=t.readUInt16LE(r+6),a.pages=t.readUInt16LE(r+8),t.readUInt8(r+10),(a.packed=0,a.alphaChnl=t.readUInt8(r+11),a.redChnl=t.readUInt8(r+12),a.greenChnl=t.readUInt8(r+13),a.blueChnl=t.readUInt8(r+14),a)}function l(o,r,s){for(var n=[],a=p(o,r),t=a.length+1,l=0;l<s/t;l++)n[l]=o.slice(r,r+a.length).toString("utf8"),r+=t;return n}function d(t,r,s){for(var n=[],a=0;a<s/20;a++){var l={},o=20*a;l.id=t.readUInt32LE(r+0+o),l.x=t.readUInt16LE(r+4+o),l.y=t.readUInt16LE(r+6+o),l.width=t.readUInt16LE(r+8+o),l.height=t.readUInt16LE(r+10+o),l.xoffset=t.readInt16LE(r+12+o),l.yoffset=t.readInt16LE(r+14+o),l.xadvance=t.readInt16LE(r+16+o),l.page=t.readUInt8(r+18+o),l.chnl=t.readUInt8(r+19+o),n[a]=l}return n}function c(t,r,s){for(var n=[],a=0;a<s/10;a++){var l={},o=10*a;l.first=t.readUInt32LE(r+0+o),l.second=t.readUInt32LE(r+4+o),l.amount=t.readInt16LE(r+8+o),n[a]=l}return n}function p(t,r){for(var a=r;a<t.length&&0!==t[a];a++);return t.slice(r,a)}function u(t,r){return p(t,r).toString("utf8")}var m=[66,77,70];r.exports=function(t){if(6>t.length)throw new Error("invalid buffer length for BMFont");if(!m.every(function(r,a){return t.readUInt8(a)===r}))throw new Error("BMFont missing BMF byte header");var r=3;if(3<t.readUInt8(r++))throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var i={kernings:[],chars:[]},n=0;5>n;n++)r+=o(i,t,r);return i}},{}],29:[function(t,r){function o(t){return a(t).reduce(function(r,a){return r[n(a.nodeName)]=a.nodeValue,r},{})}function a(a){for(var o=[],t=0;t<a.attributes.length;t++)o.push(a.attributes[t]);return o}function n(t){return i[t.toLowerCase()]||t}var l=t("./parse-attribs"),d=t("xml-parse-from-string"),i={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};r.exports=function(c){c=c.toString();var p=d(c),t={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(r){var n=p.getElementsByTagName(r)[0];n&&(t[r]=l(o(n)))});var r=p.getElementsByTagName("pages")[0];if(!r)throw new Error("malformed file -- no <pages> element");for(var u=r.getElementsByTagName("page"),n=0;n<u.length;n++){var i=u[n],s=parseInt(i.getAttribute("id"),10),m=i.getAttribute("file");if(isNaN(s))throw new Error("malformed file -- page \"id\" attribute is NaN");if(!m)throw new Error("malformed file -- needs page \"file\" attribute");t.pages[parseInt(s,10)]=m}return["chars","kernings"].forEach(function(r){var d=p.getElementsByTagName(r)[0];if(d)for(var a=r.substring(0,r.length-1),n=d.getElementsByTagName(a),i=0,s;i<n.length;i++)s=n[i],t[r].push(l(o(s)))}),t}},{"./parse-attribs":30,"xml-parse-from-string":49}],30:[function(t,r){function a(r){return r.split(",").map(function(r){return parseInt(r,10)})}var o="chasrset";r.exports=function(r){for(var t in o in r&&(r.charset=r[o],delete r[o]),r)"face"!==t&&"charset"!==t&&(r[t]="padding"===t||"spacing"===t?a(r[t]):parseInt(r[t],10));return r}},{}],31:[function(t,r){var a=t("trim"),o=t("for-each"),n=function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.exports=function(i){if(!i)return{};var s={};return o(a(i).split("\n"),function(t){var r=t.indexOf(":"),i=a(t.slice(0,r)).toLowerCase(),l=a(t.slice(r+1));void 0===s[i]?s[i]=l:n(s[i])?s[i].push(l):s[i]=[s[i],l]}),s}},{"for-each":16,trim:45}],32:[function(t,r){(function(t){var a=t.performance||{},o=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"],i;t.length;)if(i=t.shift(),i in a)return a[i].bind(a);var n=Date.now||function(){return new Date().getTime()},r=(a.timing||{}).navigationStart||n();return function(){return n()-r}}();o.performanceNow=a.now,o.noConflict=function(){a.now=o.performanceNow},o.conflict=function(){a.now=o},o.conflict(),r.exports=o}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],33:[function(t,a){!function(d){function p(r,t){return function(){r.apply(t,arguments)}}function m(a){if("object"!=babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(a,p(o,this),p(r,this))}function g(r){var t=this;return null===this._state?void this._deferreds.push(r):void s(function(){var a=t._state?r.onFulfilled:r.onRejected;if(null===a)return void(t._state?r.resolve:r.reject)(t._value);var n;try{n=a(t._value)}catch(t){return void r.reject(t)}r.resolve(n)})}function o(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void c(p(s,a),p(o,this),p(r,this))}this._state=!0,this._value=a,i.call(this)}catch(a){r.call(this,a)}}function r(r){this._state=!1,this._value=r,i.call(this)}function i(){for(var r=0,t=this._deferreds.length;r<t;r++)g.call(this,this._deferreds[r]);this._deferreds=null}function u(r,a,i,n){this.onFulfilled="function"==typeof r?r:null,this.onRejected="function"==typeof a?a:null,this.resolve=i,this.reject=n}function c(r,a,i){var n=!1;try{r(function(r){n||(n=!0,a(r))},function(r){n||(n=!0,i(r))})}catch(r){if(n)return;n=!0,i(r)}}var n=setTimeout,s="function"==typeof setImmediate&&setImmediate||function(r){n(r,1)},l=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};m.prototype.catch=function(r){return this.then(null,r)},m.prototype.then=function(a,t){var o=this;return new m(function(r,n){g.call(o,new u(a,t,r,n))})},m.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new m(function(t,s){function n(r,i){try{if(i&&("object"==("undefined"===typeof i?"undefined":babelHelpers.typeof(i))||"function"==typeof i)){var l=i.then;if("function"==typeof l)return void l.call(i,function(a){n(r,a)},s)}a[r]=i,0==--o&&t(a)}catch(r){s(r)}}if(0===a.length)return t([]);for(var o=a.length,r=0;r<a.length;r++)n(r,a[r])})},m.resolve=function(r){return r&&"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&r.constructor===m?r:new m(function(t){t(r)})},m.reject=function(r){return new m(function(t,a){a(r)})},m.race=function(a){return new m(function(t,i){for(var n=0,o=a.length;n<o;n++)a[n].then(t,i)})},m._setImmediateFn=function(r){s=r},"undefined"!=typeof a&&a.exports?a.exports=m:d.Promise||(d.Promise=m)}(this)},{}],34:[function(t,r){var l=t("dtype"),d=t("an-array"),m=t("is-buffer"),g=[0,2,3],h=[2,1,3];r.exports=function(A,r){A&&(d(A)||m(A))||(r=A||{},A=null),r="number"==typeof r?{count:r}:r||{};for(var M="string"==typeof r.type?r.type:"uint16",t="number"==typeof r.count?r.count:1,u=r.start||0,n=!1===r.clockwise?h:g,a=n[0],f=n[1],o=n[2],y=6*t,i=A||new(l(M))(y),p=0,s=0,c;p<y;p+=6,s+=4)c=p+u,i[c+0]=s+0,i[c+1]=s+1,i[c+2]=s+2,i[c+3]=s+a,i[c+4]=s+f,i[c+5]=s+o;return i}},{"an-array":2,dtype:14,"is-buffer":20}],35:[function(t,r){function a(t,r){r=r||{};var a=r.preserveNumbers,n={};return s(t).map(function(t){return t.trim()}).filter(Boolean).forEach(function(i){var r=i.indexOf(":"),s=i.substr(0,r).trim(),t=i.substr(r+1).trim();a&&o(t)&&(t=+t),n[s]=t}),n}function o(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(a){for(var r=[],o=0,t=/url\([^\)]+$/,n="",i;o<a.length;)i=a.indexOf(";",o),-1===i&&(i=a.length),n+=a.substring(o,i),t.test(n)?(n+=";",o=i+1):(r.push(n),n="",o=i+1);return r}function n(t){return Object.keys(t).map(function(r){return r+":"+t[r]}).join(";")}r.exports.parse=a,r.exports.stringify=n,r.exports.normalize=function(t,r){return n(a(t,r))}},{}],36:[function(t,r){function a(t){i.call(this),"string"==typeof t&&(t={text:t}),this._opt=p({},t),t&&this.update(t)}var l=t("layout-bmfont-text"),o=t("inherits"),d=t("quad-indices"),c=t("three-buffer-vertex-data"),p=t("object-assign"),m=t("./lib/vertices"),n=t("./lib/utils"),i=THREE.BufferGeometry;r.exports=function(t){return new a(t)},o(a,i),a.prototype.update=function(g){if("string"==typeof g&&(g={text:g}),g=p({},this._opt,g),!g.font)throw new TypeError("must specify a { font } in options");this.layout=l(g);var y=!1!==g.flipY,t=g.font,i=t.common.scaleW,r=t.common.scaleH,o=this.layout.glyphs.filter(function(r){var a=r.data;return 0<a.width*a.height});this.visibleGlyphs=o;var s=m.positions(o),n=m.uvs(o,i,r,y),u=d({clockwise:!0,type:"uint16",count:o.length});if(c.index(this,u,1,"uint16"),c.attr(this,"position",s,2),c.attr(this,"uv",n,2),!g.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(g.multipage){var a=m.pages(o);c.attr(this,"page",a,1)}},a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var r=this.attributes.position.array,a=this.attributes.position.itemSize;return r&&a&&!(2>r.length)?void(n.computeSphere(r,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.")):(this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0))},a.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var r=this.boundingBox,a=this.attributes.position.array,t=this.attributes.position.itemSize;return a&&t&&!(2>a.length)?void n.computeBox(a,r):void r.makeEmpty()}},{"./lib/utils":37,"./lib/vertices":38,inherits:19,"layout-bmfont-text":23,"object-assign":26,"quad-indices":34,"three-buffer-vertex-data":39}],37:[function(t,r){function s(t){var r=t.length/n;l.min[0]=t[0],l.min[1]=t[1],l.max[0]=t[0],l.max[1]=t[1];for(var s=0;s<r;s++){var o=t[s*n+0],i=t[s*n+1];l.min[0]=O(o,l.min[0]),l.min[1]=O(i,l.min[1]),l.max[0]=C(o,l.max[0]),l.max[1]=C(i,l.max[1])}}var n=2,l={min:[0,0],max:[0,0]};r.exports.computeBox=function(t,r){s(t),r.min.set(l.min[0],l.min[1],0),r.max.set(l.max[0],l.max[1],0)},r.exports.computeSphere=function(r,d){s(r);var c=l.min[0],o=l.min[1],i=l.max[0],a=l.max[1],n=i-c,p=a-o,u=S(n*n+p*p);d.center.set(c+n/2,o+p/2,0),d.radius=u/2}},{}],38:[function(t,r){r.exports.pages=function(r){var a=new Float32Array(1*(4*r.length)),o=0;return r.forEach(function(n){var t=n.data.page||0;a[o++]=t,a[o++]=t,a[o++]=t,a[o++]=t}),a},r.exports.uvs=function(i,d,o,n){var r=new Float32Array(2*(4*i.length)),a=0;return i.forEach(function(p){var t=p.data,i=t.x+t.width,m=t.y+t.height,u=t.x/d,g=t.y/o,s=i/d,c=m/o;n&&(g=(o-t.y)/o,c=(o-m)/o),r[a++]=u,r[a++]=g,r[a++]=u,r[a++]=c,r[a++]=s,r[a++]=c,r[a++]=s,r[a++]=g}),r},r.exports.positions=function(r){var s=new Float32Array(2*(4*r.length)),o=0;return r.forEach(function(n){var t=n.data,r=n.position[0]+t.xoffset,a=n.position[1]+t.yoffset,l=t.width,i=t.height;s[o++]=r,s[o++]=a,s[o++]=r,s[o++]=a+i,s[o++]=r+l,s[o++]=a+i,s[o++]=r+l,s[o++]=a}),s}},{}],39:[function(t,r){function o(o,d,t,r){if(d=d||[],!o||a(o,d,t)){d=s(d,r);var n=o&&"function"!=typeof o.setArray;return o&&!n||(n&&!l&&(l=!0,console.warn("A WebGL buffer is being updated with a new size or itemSize, however this version of ThreeJS only supports fixed-size buffers.\nThe old buffer may still be kept in memory.\nTo avoid memory leaks, it is recommended that you dispose your geometries and create new ones, or update to ThreeJS r82 or newer.\nSee here for discussion:\nhttps://github.com/mrdoob/three.js/pull/9631")),o=new THREE.BufferAttribute(d,t)),o.itemSize=t,o.needsUpdate=!0,"function"==typeof o.setArray&&o.setArray(d),o}return s(d,o.array),o.needsUpdate=!0,null}function a(a,o,t){if(a.itemSize!==t)return!0;if(!a.array)return!0;var r=a.array.length;return Array.isArray(o)&&Array.isArray(o[0])?r!==o.length*t:r!==o.length}var s=t("flatten-vertex-data"),l=!1;r.exports.attr=function(s,l,t,r,d){if("number"!=typeof r&&(r=3),"string"!=typeof d&&(d="float32"),Array.isArray(t)&&Array.isArray(t[0])&&t[0].length!==r)throw new Error("Nested vertex array has unexpected size; expected "+r+" but found "+t[0].length);var c=s.getAttribute(l),a=o(c,t,r,d);a&&s.addAttribute(l,a)},r.exports.index=function(s,l,t,d){"number"!=typeof t&&(t=1),"string"!=typeof d&&(d="uint16");var c=!s.index&&"function"!=typeof s.setIndex,i=c?s.getAttribute("index"):s.index,a=o(i,l,t,d);a&&(c?s.addAttribute("index",a):s.index=a)}},{"flatten-vertex-data":15}],40:[function(t,i,d){!function(r,t){"object"==("undefined"===typeof d?"undefined":babelHelpers.typeof(d))&&"undefined"!=typeof i?t(d):"function"==typeof n&&n.amd?n(["exports"],t):t(r.THREE={})}(this,function(ya){"use strict";function t(){}function Aa(r,t){this.x=r||0,this.y=t||0}function Ma(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function xa(a,t,o,n){this._x=a||0,this._y=t||0,this._z=o||0,this._w=void 0===n?1:n}function Ea(r,t,a){this.x=r||0,this.y=t||0,this.z=a||0}function va(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function Ta(o,t,i,r,n,a,s,d,l,c){Object.defineProperty(this,"id",{value:lc++}),this.uuid=zp.generateUUID(),this.name="",this.image=void 0===o?Ta.DEFAULT_IMAGE:o,this.mipmaps=[],this.mapping=void 0===t?Ta.DEFAULT_MAPPING:t,this.wrapS=void 0===i?Tp:i,this.wrapT=void 0===r?Tp:r,this.magFilter=void 0===n?wp:n,this.minFilter=void 0===a?Sp:a,this.anisotropy=void 0===l?1:l,this.format=void 0===s?_p:s,this.type=void 0===d?Ip:d,this.offset=new Aa(0,0),this.repeat=new Aa(1,1),this.center=new Aa(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new va,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===c?tc:c,this.version=0,this.onUpdate=null}function ba(a,t,o,n){this.x=a||0,this.y=t||0,this.z=o||0,this.w=void 0===n?1:n}function n(r,t,a){this.uuid=zp.generateUUID(),this.width=r,this.height=t,this.scissor=new ba(0,0,r,t),this.scissorTest=!1,this.viewport=new ba(0,0,r,t),a=a||{},void 0===a.minFilter&&(a.minFilter=wp),this.texture=new Ta(void 0,void 0,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,this.stencilBuffer=void 0===a.stencilBuffer||a.stencilBuffer,this.depthTexture=void 0===a.depthTexture?null:a.depthTexture}function La(r,t,a){n.call(this,r,t,a),this.activeCubeFace=0,this.activeMipMapLevel=0}function c(s,d,m,g,r,n,a,o,c,h,l,y){Ta.call(this,null,n,a,o,c,h,g,r,l,y),this.image={data:s,width:d,height:m},this.magFilter=void 0===c?Lp:c,this.minFilter=void 0===h?Lp:h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function u(s,t,d,i,r,n,a,o,c,p){s=void 0===s?[]:s,t=void 0===t?jo:t,Ta.call(this,s,t,d,i,r,n,a,o,c,p),this.flipY=!1}function p(){this.seq=[],this.map={}}function i(l,t,d){var i=l[0];if(0>=i||0<i)return l;var r=t*d,n=dc[r];if(void 0===n&&(n=new Float32Array(r),dc[r]=n),0!==t){i.toArray(n,0);for(var a=1,o=0;a!==t;++a)o+=d,l[a].toArray(n,o)}return n}function d(a,t){var o=fc[t];void 0===o&&(o=new Int32Array(t),fc[t]=o);for(var n=0;n!==t;++n)o[n]=a.allocTextureUnit();return o}function m(r,t){r.uniform1f(this.addr,t)}function f(r,t){r.uniform1i(this.addr,t)}function v(r,t){void 0===t.x?r.uniform2fv(this.addr,t):r.uniform2f(this.addr,t.x,t.y)}function Na(r,t){void 0===t.x?void 0===t.r?r.uniform3fv(this.addr,t):r.uniform3f(this.addr,t.r,t.g,t.b):r.uniform3f(this.addr,t.x,t.y,t.z)}function x(r,t){void 0===t.x?r.uniform4fv(this.addr,t):r.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function b(r,t){r.uniformMatrix2fv(this.addr,!1,t.elements||t)}function _(r,t){void 0===t.elements?r.uniformMatrix3fv(this.addr,!1,t):(vc.set(t.elements),r.uniformMatrix3fv(this.addr,!1,vc))}function w(r,t){void 0===t.elements?r.uniformMatrix4fv(this.addr,!1,t):(mc.set(t.elements),r.uniformMatrix4fv(this.addr,!1,mc))}function M(a,t,o){var n=o.allocTextureUnit();a.uniform1i(this.addr,n),o.setTexture2D(t||uc,n)}function wa(a,t,o){var n=o.allocTextureUnit();a.uniform1i(this.addr,n),o.setTextureCube(t||pc,n)}function Ca(r,t){r.uniform2iv(this.addr,t)}function Sa(r,t){r.uniform3iv(this.addr,t)}function Ia(r,t){r.uniform4iv(this.addr,t)}function L(r){return 5126===r?m:35664===r?v:35665===r?Na:35666===r?x:35674===r?b:35675===r?_:35676===r?w:35678===r||36198===r?M:35680===r?wa:5124===r||35670===r?f:35667===r||35671===r?Ca:35668===r||35672===r?Sa:35669===r||35673===r?Ia:void 0}function R(r,t){r.uniform1fv(this.addr,t)}function _a(r,t){r.uniform1iv(this.addr,t)}function P(r,t){r.uniform2fv(this.addr,i(t,this.size,2))}function ja(r,t){r.uniform3fv(this.addr,i(t,this.size,3))}function Oa(r,t){r.uniform4fv(this.addr,i(t,this.size,4))}function N(r,t){r.uniformMatrix2fv(this.addr,!1,i(t,this.size,4))}function U(r,t){r.uniformMatrix3fv(this.addr,!1,i(t,this.size,9))}function za(r,t){r.uniformMatrix4fv(this.addr,!1,i(t,this.size,16))}function B(o,t,s){var i=t.length,r=d(s,i);o.uniform1iv(this.addr,r);for(var n=0;n!==i;++n)s.setTexture2D(t[n]||uc,r[n])}function F(o,t,s){var i=t.length,r=d(s,i);o.uniform1iv(this.addr,r);for(var n=0;n!==i;++n)s.setTextureCube(t[n]||pc,r[n])}function Ra(r){return 5126===r?R:35664===r?P:35665===r?ja:35666===r?Oa:35674===r?N:35675===r?U:35676===r?za:35678===r?B:35680===r?F:5124===r||35670===r?_a:35667===r||35671===r?Ca:35668===r||35672===r?Sa:35669===r||35673===r?Ia:void 0}function G(r,t,a){this.id=r,this.addr=a,this.setValue=L(t.type)}function H(r,t,a){this.id=r,this.addr=a,this.size=t.size,this.setValue=Ra(t.type)}function V(r){this.id=r,p.call(this)}function k(r,t){r.seq.push(t),r.map[t.id]=t}function j(d,t,p){var i=d.name,r=i.length;for(gc.lastIndex=0;;){var n=gc.exec(i),a=gc.lastIndex,o=n[1],s="]"===n[2],c=n[3];if(s&&(o|=0),void 0===c||"["===c&&a+2===r){k(p,void 0===c?new G(o,d,t):new H(o,d,t));break}var m=p.map,l=m[o];void 0===l&&(l=new V(o),k(p,l)),p=l}}function W(s,t,l){p.call(this),this.renderer=l;for(var i=s.getProgramParameter(t,s.ACTIVE_UNIFORMS),r=0;r<i;++r){var n=s.getActiveUniform(t,r),a=n.name;j(n,s.getUniformLocation(t,a),this)}}function X(r,t,a){return void 0===t&&void 0===a?this.set(r):this.setRGB(r,t,a)}function q(s,t,l,i,r,n,a,o,d){Ta.call(this,s,t,l,i,r,n,a,o,d),this.needsUpdate=!0}function Y(n,L,t,i,a){function r(){var a=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);y=L.createBuffer(),l=L.createBuffer(),L.bindBuffer(L.ARRAY_BUFFER,y),L.bufferData(L.ARRAY_BUFFER,a,L.STATIC_DRAW),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,l),L.bufferData(L.ELEMENT_ARRAY_BUFFER,t,L.STATIC_DRAW),u=o(),p={position:L.getAttribLocation(u,"position"),uv:L.getAttribLocation(u,"uv")},d={uvOffset:L.getUniformLocation(u,"uvOffset"),uvScale:L.getUniformLocation(u,"uvScale"),rotation:L.getUniformLocation(u,"rotation"),center:L.getUniformLocation(u,"center"),scale:L.getUniformLocation(u,"scale"),color:L.getUniformLocation(u,"color"),map:L.getUniformLocation(u,"map"),opacity:L.getUniformLocation(u,"opacity"),modelViewMatrix:L.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:L.getUniformLocation(u,"projectionMatrix"),fogType:L.getUniformLocation(u,"fogType"),fogDensity:L.getUniformLocation(u,"fogDensity"),fogNear:L.getUniformLocation(u,"fogNear"),fogFar:L.getUniformLocation(u,"fogFar"),fogColor:L.getUniformLocation(u,"fogColor"),fogDepth:L.getUniformLocation(u,"fogDepth"),alphaTest:L.getUniformLocation(u,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var r=i.getContext("2d");r.fillStyle="white",r.fillRect(0,0,8,8),f=new q(i)}function o(){var o=L.createProgram(),t=L.createShader(L.VERTEX_SHADER),n=L.createShader(L.FRAGMENT_SHADER);return L.shaderSource(t,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 center;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvUV = uvOffset + uv * uvScale;","\tvec2 alignedPosition = ( position - center ) * scale;","\tvec2 rotatedPosition;","\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","\tvec4 mvPosition;","\tmvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","\tmvPosition.xy += rotatedPosition;","\tgl_Position = projectionMatrix * mvPosition;","\tfogDepth = - mvPosition.z;","}"].join("\n")),L.shaderSource(n,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","varying float fogDepth;","void main() {","\tvec4 texture = texture2D( map, vUV );","\tgl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","\tif ( gl_FragColor.a < alphaTest ) discard;","\tif ( fogType > 0 ) {","\t\tfloat fogFactor = 0.0;","\t\tif ( fogType == 1 ) {","\t\t\tfogFactor = smoothstep( fogNear, fogFar, fogDepth );","\t\t} else {","\t\t\tconst float LOG2 = 1.442695;","\t\t\tfogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );","\t\t\tfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","\t\t}","\t\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );","\t}","}"].join("\n")),L.compileShader(t),L.compileShader(n),L.attachShader(o,t),L.attachShader(o,n),L.linkProgram(o),o}function s(r,t){return r.renderOrder===t.renderOrder?r.z===t.z?t.id-r.id:t.z-r.z:r.renderOrder-t.renderOrder}var h=new Ea,v=new xa,g=new Ea,y,l,u,p,d,f;this.render=function(m,D,a){if(0!==m.length){void 0===u&&r(),t.useProgram(u),t.initAttributes(),t.enableAttribute(p.position),t.enableAttribute(p.uv),t.disableUnusedAttributes(),t.disable(L.CULL_FACE),t.enable(L.BLEND),L.bindBuffer(L.ARRAY_BUFFER,y),L.vertexAttribPointer(p.position,2,L.FLOAT,!1,16,0),L.vertexAttribPointer(p.uv,2,L.FLOAT,!1,16,8),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,l),L.uniformMatrix4fv(d.projectionMatrix,!1,a.projectionMatrix.elements),t.activeTexture(L.TEXTURE0),L.uniform1i(d.map,0);var o=0,c=0,x=D.fog;x?(L.uniform3f(d.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(L.uniform1f(d.fogNear,x.near),L.uniform1f(d.fogFar,x.far),L.uniform1i(d.fogType,1),o=1,c=1):x.isFogExp2&&(L.uniform1f(d.fogDensity,x.density),L.uniform1i(d.fogType,2),o=2,c=2)):(L.uniform1i(d.fogType,0),o=0,c=0);for(var b=0,N=m.length,w;b<N;b++)w=m[b],w.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,w.matrixWorld),w.z=-w.modelViewMatrix.elements[14];m.sort(s);for(var M=[],E=[],b=0,N=m.length;b<N;b++){var w=m[b],T=w.material;if(!1!==T.visible){w.onBeforeRender(n,D,a,void 0,T,void 0),L.uniform1f(d.alphaTest,T.alphaTest),L.uniformMatrix4fv(d.modelViewMatrix,!1,w.modelViewMatrix.elements),w.matrixWorld.decompose(h,v,g),M[0]=g.x,M[1]=g.y,E[0]=w.center.x-.5,E[1]=w.center.y-.5;var C=0;D.fog&&T.fog&&(C=c),o!==C&&(L.uniform1i(d.fogType,C),o=C),null===T.map?(L.uniform2f(d.uvOffset,0,0),L.uniform2f(d.uvScale,1,1)):(L.uniform2f(d.uvOffset,T.map.offset.x,T.map.offset.y),L.uniform2f(d.uvScale,T.map.repeat.x,T.map.repeat.y)),L.uniform1f(d.opacity,T.opacity),L.uniform3f(d.color,T.color.r,T.color.g,T.color.b),L.uniform1f(d.rotation,T.rotation),L.uniform2fv(d.center,E),L.uniform2fv(d.scale,M),t.setBlending(T.blending,T.blendEquation,T.blendSrc,T.blendDst,T.blendEquationAlpha,T.blendSrcAlpha,T.blendDstAlpha,T.premultipliedAlpha),t.buffers.depth.setTest(T.depthTest),t.buffers.depth.setMask(T.depthWrite),t.buffers.color.setMask(T.colorWrite),i.setTexture2D(T.map||f,0),L.drawElements(L.TRIANGLES,6,L.UNSIGNED_SHORT,0),w.onAfterRender(n,D,a,void 0,T,void 0)}}t.enable(L.CULL_FACE),t.reset()}}}function Z(){Object.defineProperty(this,"id",{value:Mc++}),this.uuid=zp.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=cp,this.side=$a,this.flatShading=!1,this.vertexColors=sp,this.opacity=1,this.transparent=!1,this.blendSrc=_o,this.blendDst=wo,this.blendEquation=hp,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Po,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function Pa(r){Z.call(this),this.type="MeshDepthMaterial",this.depthPacking=sc,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(r)}function ka(r){Z.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ea,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(r)}function Fa(r,t){this.min=void 0===r?new Ea(1/0,1/0,1/0):r,this.max=void 0===t?new Ea(-1/0,-1/0,-1/0):t}function $(r,t){this.center=void 0===r?new Ea:r,this.radius=void 0===t?0:t}function tt(r,t){this.normal=void 0===r?new Ea(1,0,0):r,this.constant=void 0===t?0:t}function Ga(o,t,s,i,r,n){this.planes=[void 0===o?new tt:o,void 0===t?new tt:t,void 0===s?new tt:s,void 0===i?new tt:i,void 0===r?new tt:r,void 0===n?new tt:n]}function it(D,t,r){function y(t,A,i,r,n,E){var T=t.geometry,s=null,c=g,b=t.customDepthMaterial;if(i&&(c=x,b=t.customDistanceMaterial),b)s=b;else{var l=!1;A.morphTargets&&(T&&T.isBufferGeometry?l=T.morphAttributes&&T.morphAttributes.position&&0<T.morphAttributes.position.length:T&&T.isGeometry&&(l=T.morphTargets&&0<T.morphTargets.length)),t.isSkinnedMesh&&!1===A.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var u=t.isSkinnedMesh&&A.skinning,p=0;l&&(p|=a),u&&(p|=m),s=c[p]}if(D.localClippingEnabled&&!0===A.clipShadows&&0!==A.clippingPlanes.length){var d=s.uuid,f=A.uuid,L=h[d];void 0===L&&(L={},h[d]=L);var y=L[f];void 0===y&&(y=s.clone(),L[f]=y),s=y}return s.visible=A.visible,s.wireframe=A.wireframe,s.side=null==A.shadowSide?v[A.side]:A.shadowSide,s.clipShadows=A.clipShadows,s.clippingPlanes=A.clippingPlanes,s.clipIntersection=A.clipIntersection,s.wireframeLinewidth=A.wireframeLinewidth,s.linewidth=A.linewidth,i&&s.isMeshDistanceMaterial&&(s.referencePosition.copy(r),s.nearDistance=n,s.farDistance=E),s}function o(l,i,r,n){if(!1!==l.visible){if(l.layers.test(i.layers)&&(l.isMesh||l.isLine||l.isPoints)&&l.castShadow&&(!l.frustumCulled||s.intersectsObject(l))){l.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,l.matrixWorld);var a=t.update(l),c=l.material;if(Array.isArray(c))for(var m=a.groups,h=0,p=m.length;h<p;h++){var d=m[h],f=c[d.materialIndex];if(f&&f.visible){var A=y(l,f,n,u,r.near,r.far);D.renderBufferDirect(r,null,a,A,l,d)}}else if(c.visible){var A=y(l,c,n,u,r.near,r.far);D.renderBufferDirect(r,null,a,A,l,null)}}for(var g=l.children,M=0,x=g.length;M<x;M++)o(g[M],i,r,n)}}for(var s=new Ga,l=new Ma,c=new Aa,p=new Aa(r,r),d=new Ea,u=new Ea,a=1,m=2,g=[,,,,],x=[,,,,],h={},v={0:np,1:$a,2:ip},i=[new Ea(1,0,0),new Ea(-1,0,0),new Ea(0,0,1),new Ea(0,0,-1),new Ea(0,1,0),new Ea(0,-1,0)],f=[new Ea(0,1,0),new Ea(0,1,0),new Ea(0,1,0),new Ea(0,1,0),new Ea(0,0,1),new Ea(0,0,-1)],M=[new ba,new ba,new ba,new ba,new ba,new ba],E=0;E!==1+(a|m);++E){var T=0!=(E&a),b=0!=(E&m),N=new Pa({depthPacking:cc,morphTargets:T,skinning:b});g[E]=N;var w=new ka({morphTargets:T,skinning:b});x[E]=w}var S=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Qa,this.render=function(t,m,h){if(!1!==S.enabled&&(!1!==S.autoUpdate||!1!==S.needsUpdate)&&0!==t.length){var r=D.context,E=D.state;E.disable(r.BLEND),E.buffers.color.setClear(1,1,1,1),E.buffers.depth.setTest(!0),E.setScissorTest(!1);for(var a=0,T=t.length,v;a<T;a++){var N=t[a],g=N.shadow,y=N&&N.isPointLight;if(void 0!==g){var x=g.camera;if(c.copy(g.mapSize),c.min(p),y){var b=c.x,I=c.y;M[0].set(2*b,I,b,I),M[1].set(0,I,b,I),M[2].set(3*b,I,b,I),M[3].set(b,I,b,I),M[4].set(3*b,0,b,I),M[5].set(b,0,b,I),c.x*=4,c.y*=2}if(null===g.map){g.map=new n(c.x,c.y,{minFilter:Lp,magFilter:Lp,format:_p}),g.map.texture.name=N.name+".shadowMap",x.updateProjectionMatrix()}g.isSpotLightShadow&&g.update(N);var w=g.map,A=g.matrix;u.setFromMatrixPosition(N.matrixWorld),x.position.copy(u),y?(v=6,A.makeTranslation(-u.x,-u.y,-u.z)):(v=1,d.setFromMatrixPosition(N.target.matrixWorld),x.lookAt(d),x.updateMatrixWorld(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(x.projectionMatrix),A.multiply(x.matrixWorldInverse)),D.setRenderTarget(w),D.clear();for(var L=0;L<v;L++){if(y){d.copy(x.position),d.add(i[L]),x.up.copy(f[L]),x.lookAt(d),x.updateMatrixWorld();var _=M[L];E.viewport(_)}l.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),s.setFromMatrix(l),o(m,h,x,y)}}else console.warn("THREE.WebGLShadowMap:",N,"has no shadow.")}S.needsUpdate=!1}}}function et(s){function a(t,l){var i=t.array,r=t.dynamic?s.DYNAMIC_DRAW:s.STATIC_DRAW,n=s.createBuffer();s.bindBuffer(l,n),s.bufferData(l,i,r),t.onUploadCallback();var d=s.FLOAT;return i instanceof Float32Array?d=s.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?d=s.UNSIGNED_SHORT:i instanceof Int16Array?d=s.SHORT:i instanceof Uint32Array?d=s.UNSIGNED_INT:i instanceof Int32Array?d=s.INT:i instanceof Int8Array?d=s.BYTE:i instanceof Uint8Array&&(d=s.UNSIGNED_BYTE),{buffer:n,type:d,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function l(t,o,l){var r=o.array,n=o.updateRange;s.bindBuffer(l,t),!1===o.dynamic?s.bufferData(l,r,s.STATIC_DRAW):-1===n.count?s.bufferSubData(l,0,r):0===n.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(s.bufferSubData(l,n.offset*r.BYTES_PER_ELEMENT,r.subarray(n.offset,n.offset+n.count)),n.count=-1)}var d={};return{get:function(r){return r.isInterleavedBufferAttribute&&(r=r.data),d[r.uuid]},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=d[t.uuid];r&&(s.deleteBuffer(r.buffer),delete d[t.uuid])},update:function(o,t){o.isInterleavedBufferAttribute&&(o=o.data);var r=d[o.uuid];void 0===r?d[o.uuid]=a(o,t):r.version<o.version&&(l(r.buffer,o,t),r.version=o.version)}}}function rt(a,t,o,n){this._x=a||0,this._y=t||0,this._z=o||0,this._order=n||rt.DefaultOrder}function at(){this.mask=1}function ot(){Object.defineProperty(this,"id",{value:Ec++}),this.uuid=zp.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ot.DefaultUp.clone();var t=new Ea,r=new rt,a=new xa,o=new Ea(1,1,1);r.onChange(function(){a.setFromEuler(r,!1)}),a.onChange(function(){r.setFromQuaternion(a,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:r},quaternion:{enumerable:!0,value:a},scale:{enumerable:!0,value:o},modelViewMatrix:{value:new Ma},normalMatrix:{value:new va}}),this.matrix=new Ma,this.matrixWorld=new Ma,this.matrixAutoUpdate=ot.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new at,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function nt(){ot.call(this),this.type="Camera",this.matrixWorldInverse=new Ma,this.projectionMatrix=new Ma}function Ha(o,t,s,i,r,n){nt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=t,this.top=s,this.bottom=i,this.near=void 0===r?.1:r,this.far=void 0===n?2e3:n,this.updateProjectionMatrix()}function Va(a,t,s,i,r,n){this.a=a,this.b=t,this.c=s,this.normal=i&&i.isVector3?i:new Ea,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new X,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0===n?0:n}function lt(){Object.defineProperty(this,"id",{value:Tc+=2}),this.uuid=zp.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Ya(r,t,a){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=zp.generateUUID(),this.name="",this.array=r,this.itemSize=t,this.count=void 0===r?0:r.length/t,this.normalized=!0===a,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function pt(r,t,a){Ya.call(this,new Int8Array(r),t,a)}function dt(r,t,a){Ya.call(this,new Uint8Array(r),t,a)}function ft(r,t,a){Ya.call(this,new Uint8ClampedArray(r),t,a)}function mt(r,t,a){Ya.call(this,new Int16Array(r),t,a)}function vt(r,t,a){Ya.call(this,new Uint16Array(r),t,a)}function gt(r,t,a){Ya.call(this,new Int32Array(r),t,a)}function yt(r,t,a){Ya.call(this,new Uint32Array(r),t,a)}function xt(r,t,a){Ya.call(this,new Float32Array(r),t,a)}function bt(r,t,a){Ya.call(this,new Float64Array(r),t,a)}function _t(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function wt(a){if(0===a.length)return-1/0;for(var t=a[0],o=1,n=a.length;o<n;++o)a[o]>t&&(t=a[o]);return t}function Mt(){Object.defineProperty(this,"id",{value:Sc+=2}),this.uuid=zp.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Wa(o,s,l,d,c,p){lt.call(this),this.type="BoxGeometry",this.parameters={width:o,height:s,depth:l,widthSegments:d,heightSegments:c,depthSegments:p},this.fromBufferGeometry(new Xa(o,s,l,d,c,p)),this.mergeVertices()}function Xa(a,m,g,y,A,M){function x(a,t,h,i,r,n,o,f,m,A,g){var y=m+1,M=0,v=0,T=new Ea,L,x;for(x=0;x<A+1;x++){var b=x*(o/A)-o/2;for(L=0;L<y;L++){var w=L*(n/m)-n/2;T[a]=w*i,T[t]=b*r,T[h]=f/2,c.push(T.x,T.y,T.z),T[a]=0,T[t]=0,T[h]=0<f?1:-1,l.push(T.x,T.y,T.z),u.push(L/m),u.push(1-x/A),M+=1}}for(x=0;x<A;x++)for(L=0;L<m;L++){var C=p+L+y*x,S=p+L+y*(x+1),N=p+(L+1)+y*(x+1),I=p+(L+1)+y*x;s.push(C,S,I),s.push(S,N,I),v+=6}E.addGroup(d,v,g),d+=v,p+=M}Mt.call(this),this.type="BoxBufferGeometry",this.parameters={width:a,height:m,depth:g,widthSegments:y,heightSegments:A,depthSegments:M};var E=this;a=a||1,m=m||1,g=g||1,y=D(y)||1,A=D(A)||1,M=D(M)||1;var s=[],c=[],l=[],u=[],p=0,d=0;x("z","y","x",-1,-1,g,m,a,M,A,0),x("z","y","x",1,-1,g,m,-a,M,A,1),x("x","z","y",1,1,a,g,m,y,M,2),x("x","z","y",1,-1,a,g,-m,y,M,3),x("x","y","z",1,-1,a,m,g,y,A,4),x("x","y","z",-1,-1,a,m,-g,y,A,5),this.setIndex(s),this.addAttribute("position",new xt(c,3)),this.addAttribute("normal",new xt(l,3)),this.addAttribute("uv",new xt(u,2))}function Es(a,o,n,s){lt.call(this),this.type="PlaneGeometry",this.parameters={width:a,height:o,widthSegments:n,heightSegments:s},this.fromBufferGeometry(new el(a,o,n,s)),this.mergeVertices()}function el(u,A,E,T){Mt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:u,height:A,widthSegments:E,heightSegments:T},u=u||1,A=A||1;var L=u/2,o=A/2,s=D(E)||1,c=D(T)||1,h=s+1,l=u/s,p=A/c,d=[],f=[],m=[],v=[],g,n;for(n=0;n<c+1;n++){var a=n*p-o;for(g=0;g<h;g++){var N=g*l-L;f.push(N,-a,0),m.push(0,0,1),v.push(g/s),v.push(1-n/c)}}for(n=0;n<c;n++)for(g=0;g<s;g++){var x=g+h*n,b=g+h*(n+1),C=g+1+h*(n+1),w=g+1+h*n;d.push(x,b,w),d.push(b,C,w)}this.setIndex(d),this.addAttribute("position",new xt(f,3)),this.addAttribute("normal",new xt(m,3)),this.addAttribute("uv",new xt(v,2))}function tl(r){Z.call(this),this.type="MeshBasicMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Do,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(r)}function rl(r){Z.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}function al(r,t){this.origin=void 0===r?new Ea:r,this.direction=void 0===t?new Ea:t}function Pt(r,t){this.start=void 0===r?new Ea:r,this.end=void 0===t?new Ea:t}function It(r,t,a){this.a=void 0===r?new Ea:r,this.b=void 0===t?new Ea:t,this.c=void 0===a?new Ea:a}function Ot(r,t){ot.call(this),this.type="Mesh",this.geometry=void 0===r?new Mt:r,this.material=void 0===t?new tl({color:16777215*Math.random()}):t,this.drawMode=Op,this.updateMorphTargets()}function ol(d,p,t,u){function r(c,g,r,h){var u=g.background;null===u?i(a,m):u&&u.isColor&&(i(u,1),h=!0),(d.autoClear||h)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil),u&&u.isCubeTexture?(void 0===s&&(s=new Ot(new Xa(1,1,1),new rl({uniforms:wc.cube.uniforms,vertexShader:wc.cube.vertexShader,fragmentShader:wc.cube.fragmentShader,side:np,depthTest:!0,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(r,t,a){this.matrixWorld.copyPosition(a.matrixWorld)},t.update(s.geometry)),s.material.uniforms.tCube.value=u,c.push(s,s.geometry,s.material,0,null)):u&&u.isTexture&&(void 0===l&&(l=new Ha(-1,1,1,-1,0,1),o=new Ot(new el(2,2),new tl({depthTest:!1,depthWrite:!1,fog:!1})),t.update(o.geometry)),o.material.map=u,d.renderBufferDirect(l,null,o.geometry,o.material,o,null))}function i(r,t){p.buffers.color.setClear(r.r,r.g,r.b,t,u)}var a=new X(0),m=0,l,o,s;return{getClearColor:function(){return a},setClearColor:function(r,t){a.set(r),m=void 0===t?1:t,i(a,m)},getClearAlpha:function(){return m},setClearAlpha:function(r){m=r,i(a,m)},render:r}}function Ut(r,t){return r.renderOrder===t.renderOrder?r.program&&t.program&&r.program!==t.program?r.program.id-t.program.id:r.material.id===t.material.id?r.z===t.z?r.id-t.id:r.z-t.z:r.material.id-t.material.id:r.renderOrder-t.renderOrder}function Dt(r,t){return r.renderOrder===t.renderOrder?r.z===t.z?r.id-t.id:t.z-r.z:r.renderOrder-t.renderOrder}function Bt(){function t(a,o,p,u,m){var g=l[r];void 0===g?(g={id:a.id,object:a,geometry:o,material:p,program:p.program,renderOrder:a.renderOrder,z:u,group:m},l[r]=g):(g.id=a.id,g.object=a,g.geometry=o,g.material=p,g.program=p.program,g.renderOrder=a.renderOrder,g.z=u,g.group=m),(!0===p.transparent?d:n).push(g),r++}var l=[],r=0,n=[],d=[];return{opaque:n,transparent:d,init:function(){r=0,n.length=0,d.length=0},push:t,sort:function(){1<n.length&&n.sort(Ut),1<d.length&&d.sort(Dt)}}}function nl(){function r(o,i){var s=o.id+","+i.id,r=a[s];return void 0===r&&(r=new Bt,a[s]=r),r}var a={};return{get:r,dispose:function(){a={}}}}function zt(r,t){return T(t[1])-T(r[1])}function il(g){function t(t,r,n,a){var o=t.morphTargetInfluences,s=o.length,c=y[r.id];if(void 0===c){c=[];for(var h=0;h<s;h++)c[h]=[h,0];y[r.id]=c}for(var l=n.morphTargets&&r.morphAttributes.position,u=n.morphNormals&&r.morphAttributes.normal,h=0,p;h<s;h++)p=c[h],0!==p[1]&&(l&&r.removeAttribute("morphTarget"+h),u&&r.removeAttribute("morphNormal"+h));for(var h=0,p;h<s;h++)p=c[h],p[0]=h,p[1]=o[h];c.sort(zt);for(var h=0,p;8>h;h++){if(p=c[h],p){var d=p[0],f=p[1];if(f){l&&r.addAttribute("morphTarget"+h,l[d]),u&&r.addAttribute("morphNormal"+h,u[d]),i[h]=f;continue}}i[h]=0}a.getUniforms().setValue(g,"morphTargetInfluences",i)}var y={},i=new Float32Array(8);return{update:t}}function Ht(l,t,d){function r(p,r,n){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):void(a.drawElementsInstancedANGLE(i,n,s,r*c,p.maxInstancedCount),d.calls++,d.vertices+=n*p.maxInstancedCount,i===l.TRIANGLES?d.faces+=p.maxInstancedCount*n/3:i===l.POINTS&&(d.points+=p.maxInstancedCount*n))}var i,s,c;this.setMode=function(r){i=r},this.setIndex=function(r){s=r.type,c=r.bytesPerElement},this.render=function(t,a){l.drawElements(i,a,s,t*c),d.calls++,d.vertices+=a,i===l.TRIANGLES?d.faces+=a/3:i===l.POINTS&&(d.points+=a)},this.renderInstances=r}function Vt(l,t,d){function r(o,r,n){var p=t.get("ANGLE_instanced_arrays");if(null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=o.attributes.position;s.isInterleavedBufferAttribute?(n=s.data.count,p.drawArraysInstancedANGLE(i,0,n,o.maxInstancedCount)):p.drawArraysInstancedANGLE(i,r,n,o.maxInstancedCount),d.calls++,d.vertices+=n*o.maxInstancedCount,i===l.TRIANGLES?d.faces+=o.maxInstancedCount*n/3:i===l.POINTS&&(d.points+=o.maxInstancedCount*n)}var i;this.setMode=function(r){i=r},this.render=function(t,a){l.drawArrays(i,t,a),d.calls++,d.vertices+=a,i===l.TRIANGLES?d.faces+=a/3:i===l.POINTS&&(d.points+=a)},this.renderInstances=r}function kt(m,g,l){function i(r){var t=r.target,n=p[t.id];for(var a in null!==n.index&&g.remove(n.index),n.attributes)g.remove(n.attributes[a]);t.removeEventListener("dispose",i),delete p[t.id];var o=y[t.id];o&&(g.remove(o),delete y[t.id]),o=y[n.id],o&&(g.remove(o),delete y[n.id]),l.geometries--}function t(r,t){var a=p[t.id];return a||(t.addEventListener("dispose",i),t.isBufferGeometry?a=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new Mt().setFromObject(r)),a=t._bufferGeometry),p[t.id]=a,l.geometries++,a)}function r(t){var i=t.index,r=t.attributes;for(var n in null!==i&&g.update(i,m.ELEMENT_ARRAY_BUFFER),r)g.update(r[n],m.ARRAY_BUFFER);var l=t.morphAttributes;for(var n in l)for(var o=l[n],s=0,d=o.length;s<d;s++)g.update(o[s],m.ARRAY_BUFFER)}function d(t){var i=y[t.id];if(i)return i;var r=[],n=t.index,a=t.attributes;if(null!==n)for(var c=n.array,s=0,h=c.length;s<h;s+=3){var l=c[s+0],u=c[s+1],p=c[s+2];r.push(l,u,u,p,p,l)}else for(var c=a.position.array,s=0,h=c.length/3-1;s<h;s+=3){var l=s+0,u=s+1,p=s+2;r.push(l,u,u,p,p,l)}return i=new(65535<wt(r)?yt:vt)(r,1),g.update(i,m.ELEMENT_ARRAY_BUFFER),y[t.id]=i,i}var p={},y={};return{get:t,update:r,getWireframeAttribute:d}}function jt(s,t){function r(n){var d=t.frame,r=n.geometry,a=s.get(n,r);return l[a.id]!==d&&(r.isGeometry&&a.updateFromObject(n),s.update(a),l[a.id]=d),a}var l={};return{update:r,dispose:function(){l={}}}}function Ft(r){for(var t=r.split("\n"),a=0;a<t.length;a++)t[a]=a+1+": "+t[a];return t.join("\n")}function Gt(a,t,o){var n=a.createShader(t);return a.shaderSource(n,o),a.compileShader(n),!1===a.getShaderParameter(n,a.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==a.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===a.VERTEX_SHADER?"vertex":"fragment",a.getShaderInfoLog(n),Ft(o)),n}function Wt(r){switch(r){case tc:return["Linear","( value )"];case ec:return["sRGB","( value )"];case rc:return["RGBE","( value )"];case nc:return["RGBM","( value, 7.0 )"];case ac:return["RGBM","( value, 16.0 )"];case oc:return["RGBD","( value, 256.0 )"];case ic:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+r);}}function Yt(r,t){var a=Wt(t);return"vec4 "+r+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function Xt(r,t){var a=Wt(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function qt(r,t){var a;switch(t){case Go:a="Linear";break;case Ho:a="Reinhard";break;case Vo:a="Uncharted2";break;case ko:a="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+r+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function Qt(r,t,a){return r=r||{},[r.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(r.fragDepth||t.logarithmicDepthBuffer)&&a.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",r.drawBuffers&&a.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(r.shaderTextureLOD||t.envMap)&&a.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(te).join("\n")}function Zt(a){var t=[];for(var o in a){var n=a[o];!1!==n&&t.push("#define "+o+" "+n)}return t.join("\n")}function Jt(s,t){for(var l={},i=s.getProgramParameter(t,s.ACTIVE_ATTRIBUTES),r=0;r<i;r++){var n=s.getActiveAttrib(t,r),a=n.name;l[a]=s.getAttribLocation(t,a)}return l}function te(r){return""!==r}function ee(r,t){return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ie(r,t){return r.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function re(r){function t(r,t){var a=_c[t];if(void 0===a)throw new Error("Can not resolve #include <"+t+">");return re(a)}var a=/^[ \t]*#include +<([\w\d.]+)>/gm;return r.replace(a,t)}function ne(r){function t(o,t,s,i){for(var r="",n=parseInt(t);n<parseInt(s);n++)r+=i.replace(/\[ i \]/g,"[ "+n+" ]");return r}var a=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return r.replace(a,t)}function ae(D,t,N,i,I,n){var a=D.context,o=i.defines,s=I.vertexShader,c=I.fragmentShader,h="SHADOWMAP_TYPE_BASIC";n.shadowMapType===Qa?h="SHADOWMAP_TYPE_PCF":n.shadowMapType===Ka&&(h="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(n.envMap){switch(i.envMap.mapping){case jo:case yp:l="ENVMAP_TYPE_CUBE";break;case xp:case Ep:l="ENVMAP_TYPE_CUBE_UV";break;case fp:case Ap:l="ENVMAP_TYPE_EQUIREC";break;case Mp:l="ENVMAP_TYPE_SPHERE";}switch(i.envMap.mapping){case yp:case Ap:u="ENVMAP_MODE_REFRACTION";}switch(i.combine){case Do:p="ENVMAP_BLENDING_MULTIPLY";break;case Bo:p="ENVMAP_BLENDING_MIX";break;case Fo:p="ENVMAP_BLENDING_ADD";}}var d=0<D.gammaFactor?D.gammaFactor:1,v=Qt(i.extensions,n,t),g=Zt(o),y=a.createProgram(),x,j;i.isRawShaderMaterial?(x=[g].filter(te).join("\n"),0<x.length&&(x+="\n"),j=[v,g].filter(te).join("\n"),0<j.length&&(j+="\n")):(x=["precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+I.name,g,n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(te).join("\n"),j=[v,"precision "+n.precision+" float;","precision "+n.precision+" int;","#define SHADER_NAME "+I.name,g,n.alphaTest?"#define ALPHATEST "+n.alphaTest:"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.vertexColors?"#define USE_COLOR":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+h:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",n.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",n.toneMapping===zo?"":"#define TONE_MAPPING",n.toneMapping===zo?"":_c.tonemapping_pars_fragment,n.toneMapping===zo?"":qt("toneMapping",n.toneMapping),n.dithering?"#define DITHERING":"",n.outputEncoding||n.mapEncoding||n.envMapEncoding||n.emissiveMapEncoding?_c.encodings_pars_fragment:"",n.mapEncoding?Yt("mapTexelToLinear",n.mapEncoding):"",n.envMapEncoding?Yt("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMapEncoding?Yt("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.outputEncoding?Xt("linearToOutputTexel",n.outputEncoding):"",n.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(te).join("\n")),s=re(s),s=ee(s,n),s=ie(s,n),c=re(c),c=ee(c,n),c=ie(c,n),s=ne(s),c=ne(c);var O=x+s,b=j+c,_=Gt(a,a.VERTEX_SHADER,O),w=Gt(a,a.FRAGMENT_SHADER,b);a.attachShader(y,_),a.attachShader(y,w),void 0===i.index0AttributeName?!0===n.morphTargets&&a.bindAttribLocation(y,0,"position"):a.bindAttribLocation(y,0,i.index0AttributeName),a.linkProgram(y);var M=a.getProgramInfoLog(y).trim(),z=a.getShaderInfoLog(_).trim(),B=a.getShaderInfoLog(w).trim(),U=!0,P=!0;!1===a.getProgramParameter(y,a.LINK_STATUS)?(U=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(y,a.VALIDATE_STATUS),"gl.getProgramInfoLog",M,z,B)):""===M?""!==z&&""!==B||(P=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M),P&&(this.diagnostics={runnable:U,material:i,programLog:M,vertexShader:{log:z,prefix:x},fragmentShader:{log:B,prefix:j}}),a.deleteShader(_),a.deleteShader(w);var L;this.getUniforms=function(){return void 0===L&&(L=new W(a,y,D)),L};var R;return this.getAttributes=function(){return void 0===R&&(R=Jt(a,y)),R},this.destroy=function(){a.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Ac++,this.code=N,this.usedTimes=1,this.program=y,this.vertexShader=_,this.fragmentShader=w,this}function oe(g,t,y){function i(i){var t=i.skeleton,s=t.bones;if(y.floatVertexTextures)return 1024;var l=y.maxVertexUniforms,n=D((l-20)/4),a=O(n,s.length);return a<s.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+s.length+" bones. This GPU supports "+a+"."),0):a}function r(r,t){var a;return r?r.isTexture?a=r.encoding:r.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),a=r.texture.encoding):a=tc,a===tc&&t&&(a=ic),a}var d=[],n={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,a,s,A,M,x){var u=n[t.type],E=x.isSkinnedMesh?i(x):0,v=y.precision;null!==t.precision&&(v=y.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",v,"instead.");var T=g.getRenderTarget();return{shaderID:u,precision:v,supportsVertexTextures:y.vertexTextures,outputEncoding:r(T?T.texture:null,g.gammaOutput),map:!!t.map,mapEncoding:r(t.map,g.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:r(t.envMap,g.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===xp||t.envMap.mapping===Ep),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:r(t.emissiveMap,g.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:y.logarithmicDepthBuffer,skinning:t.skinning&&0<E,maxBones:E,useVertexTexture:y.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:g.maxMorphTargets,maxMorphNormals:g.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:A,numClipIntersection:M,dithering:t.dithering,shadowMapEnabled:g.shadowMap.enabled&&x.receiveShadow&&0<a.length,shadowMapType:g.shadowMap.type,toneMapping:g.toneMapping,physicallyCorrectLights:g.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===ip,flipSided:t.side===np,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,s){var i=[];if(s.shaderID?i.push(s.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)i.push(r),i.push(t.defines[r]);for(var n=0;n<o.length;n++)i.push(s[o[n]]);return i.push(t.onBeforeCompile.toString()),i.push(g.gammaOutput),i.join()},this.acquireProgram=function(a,i,r,n){for(var o=0,c=d.length,p,s;o<c;o++)if(s=d[o],s.code===n){p=s,++p.usedTimes;break}return void 0===p&&(p=new ae(g,t,n,a,i,r),d.push(p)),p},this.releaseProgram=function(r){if(0==--r.usedTimes){var t=d.indexOf(r);d[t]=d[d.length-1],d.pop(),r.destroy()}},this.programs=d}function se(A,t,L,N,j,z,i,r){function a(a,t){if(a.width>t||a.height>t){var o=t/C(a.width,a.height),n=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return n.width=D(a.width*o),n.height=D(a.height*o),(n.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,n.width,n.height),console.warn("THREE.WebGLRenderer: image is too big ("+a.width+"x"+a.height+"). Resized to "+n.width+"x"+n.height,a),n)}return a}function B(r){return zp.isPowerOfTwo(r.width)&&zp.isPowerOfTwo(r.height)}function o(r){return r instanceof HTMLImageElement||r instanceof HTMLCanvasElement||r instanceof ImageBitmap?(void 0===w&&(w=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),w.width=zp.floorPowerOfTwo(r.width),w.height=zp.floorPowerOfTwo(r.height),(w.getContext("2d").drawImage(r,0,0,w.width,w.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+r.width+"x"+r.height+"). Resized to "+w.width+"x"+w.height,r),w)):r}function n(r){return r.wrapS!==Tp||r.wrapT!==Tp||r.minFilter!==Lp&&r.minFilter!==wp}function h(r,t){return r.generateMipmaps&&t&&r.minFilter!==Lp&&r.minFilter!==wp}function l(t){return t===Lp||t===Dp||t===Np?A.NEAREST:A.LINEAR}function c(r){var t=r.target;t.removeEventListener("dispose",c),s(t),t.isVideoTexture&&delete b[t.id],i.textures--}function d(r){var t=r.target;t.removeEventListener("dispose",d),p(t),i.textures--}function s(t){var r=N.get(t);if(t.image&&r.__image__webglTextureCube)A.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;A.deleteTexture(r.__webglTexture)}N.remove(t)}function p(t){var r=N.get(t),o=N.get(t.texture);if(t){if(void 0!==o.__webglTexture&&A.deleteTexture(o.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var n=0;6>n;n++)A.deleteFramebuffer(r.__webglFramebuffer[n]),r.__webglDepthbuffer&&A.deleteRenderbuffer(r.__webglDepthbuffer[n]);else A.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&A.deleteRenderbuffer(r.__webglDepthbuffer);N.remove(t.texture),N.remove(t)}}function u(t,r){var n=N.get(t);if(t.isVideoTexture&&v(t),0<t.version&&n.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==a.complete)return void g(n,t,r);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}L.activeTexture(A.TEXTURE0+r),L.bindTexture(A.TEXTURE_2D,n.__webglTexture)}function m(t,r){var o=N.get(t);if(6===t.image.length)if(0<t.version&&o.__version!==t.version){o.__image__webglTextureCube||(t.addEventListener("dispose",c),o.__image__webglTextureCube=A.createTexture(),i.textures++),L.activeTexture(A.TEXTURE0+r),L.bindTexture(A.TEXTURE_CUBE_MAP,o.__image__webglTextureCube),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var n=t&&t.isCompressedTexture,s=t.image[0]&&t.image[0].isDataTexture,l=[],d=0;6>d;d++)l[d]=n||s?s?t.image[d].image:t.image[d]:a(t.image[d],j.maxCubemapSize);var p=l[0],u=B(p),m=z.convert(t.format),g=z.convert(t.type);f(A.TEXTURE_CUBE_MAP,t,u);for(var d=0;6>d;d++)if(n)for(var y=l[d].mipmaps,M=0,E=y.length,v;M<E;M++)v=y[M],t.format!==_p&&t.format!==xs?-1<L.getCompressedTextureFormats().indexOf(m)?L.compressedTexImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+d,M,m,v.width,v.height,0,v.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):L.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+d,M,m,v.width,v.height,0,m,g,v.data);else s?L.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,l[d].width,l[d].height,0,m,g,l[d].data):L.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+d,0,m,m,g,l[d]);h(t,u)&&A.generateMipmap(A.TEXTURE_CUBE_MAP),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else L.activeTexture(A.TEXTURE0+r),L.bindTexture(A.TEXTURE_CUBE_MAP,o.__image__webglTextureCube)}function f(r,a,o){var n;if(o?(A.texParameteri(r,A.TEXTURE_WRAP_S,z.convert(a.wrapS)),A.texParameteri(r,A.TEXTURE_WRAP_T,z.convert(a.wrapT)),A.texParameteri(r,A.TEXTURE_MAG_FILTER,z.convert(a.magFilter)),A.texParameteri(r,A.TEXTURE_MIN_FILTER,z.convert(a.minFilter))):(A.texParameteri(r,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(r,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),a.wrapS===Tp&&a.wrapT===Tp||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),A.texParameteri(r,A.TEXTURE_MAG_FILTER,l(a.magFilter)),A.texParameteri(r,A.TEXTURE_MIN_FILTER,l(a.minFilter)),a.minFilter!==Lp&&a.minFilter!==wp&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),n=t.get("EXT_texture_filter_anisotropic")){if(a.type===ps&&null===t.get("OES_texture_float_linear"))return;if(a.type===ds&&null===t.get("OES_texture_half_float_linear"))return;(1<a.anisotropy||N.get(a).__currentAnisotropy)&&(A.texParameterf(r,n.TEXTURE_MAX_ANISOTROPY_EXT,O(a.anisotropy,j.getMaxAnisotropy())),N.get(a).__currentAnisotropy=a.anisotropy)}}function g(t,l,r){void 0===t.__webglInit&&(t.__webglInit=!0,l.addEventListener("dispose",c),t.__webglTexture=A.createTexture(),i.textures++),L.activeTexture(A.TEXTURE0+r),L.bindTexture(A.TEXTURE_2D,t.__webglTexture),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,l.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,l.unpackAlignment);var s=a(l.image,j.maxTextureSize);n(l)&&!1===B(s)&&(s=o(s));var d=B(s),p=z.convert(l.format),u=z.convert(l.type);f(A.TEXTURE_2D,l,d);var m=l.mipmaps,g;if(l.isDepthTexture){var y=A.DEPTH_COMPONENT;if(l.type===ps){if(!T)throw new Error("Float Depth Texture only supported in WebGL2.0");y=A.DEPTH_COMPONENT32F}else T&&(y=A.DEPTH_COMPONENT16);l.format===Ms&&y===A.DEPTH_COMPONENT&&l.type!==hs&&l.type!==us&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),l.type=hs,u=z.convert(l.type)),l.format===Ts&&(y=A.DEPTH_STENCIL,l.type!==gs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),l.type=gs,u=z.convert(l.type))),L.texImage2D(A.TEXTURE_2D,0,y,s.width,s.height,0,p,u,null)}else if(l.isDataTexture){if(0<m.length&&d){for(var x=0,E=m.length;x<E;x++)g=m[x],L.texImage2D(A.TEXTURE_2D,x,p,g.width,g.height,0,p,u,g.data);l.generateMipmaps=!1}else L.texImage2D(A.TEXTURE_2D,0,p,s.width,s.height,0,p,u,s.data);}else if(l.isCompressedTexture)for(var x=0,E=m.length;x<E;x++)g=m[x],l.format!==_p&&l.format!==xs?-1<L.getCompressedTextureFormats().indexOf(p)?L.compressedTexImage2D(A.TEXTURE_2D,x,p,g.width,g.height,0,g.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):L.texImage2D(A.TEXTURE_2D,x,p,g.width,g.height,0,p,u,g.data);else if(0<m.length&&d){for(var x=0,E=m.length;x<E;x++)g=m[x],L.texImage2D(A.TEXTURE_2D,x,p,p,u,g);l.generateMipmaps=!1}else L.texImage2D(A.TEXTURE_2D,0,p,p,u,s);h(l,d)&&A.generateMipmap(A.TEXTURE_2D),t.__version=l.version,l.onUpdate&&l.onUpdate(l)}function y(t,r,a,o){var n=z.convert(r.texture.format),i=z.convert(r.texture.type);L.texImage2D(o,0,n,r.width,r.height,0,n,i,null),A.bindFramebuffer(A.FRAMEBUFFER,t),A.framebufferTexture2D(A.FRAMEBUFFER,a,o,N.get(r.texture).__webglTexture,0),A.bindFramebuffer(A.FRAMEBUFFER,null)}function M(t,r){A.bindRenderbuffer(A.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,r.width,r.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,r.width,r.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,t)):A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,r.width,r.height),A.bindRenderbuffer(A.RENDERBUFFER,null)}function x(t,r){if(r&&r.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(A.bindFramebuffer(A.FRAMEBUFFER,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");N.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),u(r.depthTexture,0);var a=N.get(r.depthTexture).__webglTexture;if(r.depthTexture.format===Ms)A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,a,0);else{if(r.depthTexture.format!==Ts)throw new Error("Unknown depthTexture format");A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,a,0)}}function E(t){var r=N.get(t),o=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(o)throw new Error("target.depthTexture not supported in Cube render targets");x(r.__webglFramebuffer,t)}else if(o){r.__webglDepthbuffer=[];for(var n=0;6>n;n++)A.bindFramebuffer(A.FRAMEBUFFER,r.__webglFramebuffer[n]),r.__webglDepthbuffer[n]=A.createRenderbuffer(),M(r.__webglDepthbuffer[n],t)}else A.bindFramebuffer(A.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=A.createRenderbuffer(),M(r.__webglDepthbuffer,t);A.bindFramebuffer(A.FRAMEBUFFER,null)}function v(a){var t=a.id,o=r.frame;b[t]!==o&&(b[t]=o,a.update())}var T="undefined"!=typeof WebGL2RenderingContext&&A instanceof WebGL2RenderingContext,b={},w;this.setTexture2D=u,this.setTextureCube=m,this.setTextureCubeDynamic=function(t,r){L.activeTexture(A.TEXTURE0+r),L.bindTexture(A.TEXTURE_CUBE_MAP,N.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=N.get(t),o=N.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=A.createTexture(),i.textures++;var a=!0===t.isWebGLRenderTargetCube,n=B(t);if(a){r.__webglFramebuffer=[];for(var s=0;6>s;s++)r.__webglFramebuffer[s]=A.createFramebuffer()}else r.__webglFramebuffer=A.createFramebuffer();if(a){L.bindTexture(A.TEXTURE_CUBE_MAP,o.__webglTexture),f(A.TEXTURE_CUBE_MAP,t.texture,n);for(var s=0;6>s;s++)y(r.__webglFramebuffer[s],t,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+s);h(t.texture,n)&&A.generateMipmap(A.TEXTURE_CUBE_MAP),L.bindTexture(A.TEXTURE_CUBE_MAP,null)}else L.bindTexture(A.TEXTURE_2D,o.__webglTexture),f(A.TEXTURE_2D,t.texture,n),y(r.__webglFramebuffer,t,A.COLOR_ATTACHMENT0,A.TEXTURE_2D),h(t.texture,n)&&A.generateMipmap(A.TEXTURE_2D),L.bindTexture(A.TEXTURE_2D,null);t.depthBuffer&&E(t)},this.updateRenderTargetMipmap=function(t){var r=t.texture;if(h(r,B(t))){var n=t.isWebGLRenderTargetCube?A.TEXTURE_CUBE_MAP:A.TEXTURE_2D,a=N.get(r).__webglTexture;L.bindTexture(n,a),A.generateMipmap(n),L.bindTexture(n,null)}}}function ce(){function r(r){var a=r.uuid,n=o[a];return void 0===n&&(n={},o[a]=n),n}function a(a,t,n){var s=a.uuid;o[s][t]=n}var o={};return{get:r,remove:function(r){delete o[r.uuid]},update:a,dispose:function(){o={}}}}function he(l,t,u){function i(){var a=!1,t=new ba,o=null,i=new ba(0,0,0,0);return{setMask:function(t){o===t||a||(l.colorMask(t,t,t,t),o=t)},setLocked:function(r){a=r},setClear:function(n,d,r,a,o){!0===o&&(n*=a,d*=a,r*=a),t.set(n,d,r,a),!1===i.equals(t)&&(l.clearColor(n,d,r,a),i.copy(t))},reset:function(){a=!1,o=null,i.set(-1,0,0,0)}}}function r(){var a=!1,t=null,o=null,r=null;return{setTest:function(t){t?m(l.DEPTH_TEST):g(l.DEPTH_TEST)},setMask:function(o){t===o||a||(l.depthMask(o),t=o)},setFunc:function(t){o!==t&&(t?t===Lo?l.depthFunc(l.NEVER):t===Ro?l.depthFunc(l.ALWAYS):t===Co?l.depthFunc(l.LESS):t===Po?l.depthFunc(l.LEQUAL):t===Io?l.depthFunc(l.EQUAL):t===Oo?l.depthFunc(l.GEQUAL):t===No?l.depthFunc(l.GREATER):t===Uo?l.depthFunc(l.NOTEQUAL):l.depthFunc(l.LEQUAL):l.depthFunc(l.LEQUAL),o=t)},setLocked:function(r){a=r},setClear:function(t){r!==t&&(l.clearDepth(t),r=t)},reset:function(){a=!1,t=null,o=null,r=null}}}function n(){var d=!1,t=null,p=null,r=null,n=null,u=null,o=null,s=null,i=null;return{setTest:function(t){t?m(l.STENCIL_TEST):g(l.STENCIL_TEST)},setMask:function(a){t===a||d||(l.stencilMask(a),t=a)},setFunc:function(t,a,i){p===t&&r===a&&n===i||(l.stencilFunc(t,a,i),p=t,r=a,n=i)},setOp:function(t,a,n){u===t&&o===a&&s===n||(l.stencilOp(t,a,n),u=t,o=a,s=n)},setLocked:function(r){d=r},setClear:function(t){i!==t&&(l.clearStencil(t),i=t)},reset:function(){d=!1,t=null,p=null,r=null,n=null,u=null,o=null,s=null,i=null}}}function a(t,s,i){var r=new Uint8Array(4),n=l.createTexture();l.bindTexture(t,n),l.texParameteri(t,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(t,l.TEXTURE_MAG_FILTER,l.NEAREST);for(var a=0;a<i;a++)l.texImage2D(s+a,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,r);return n}function m(t){!0!==D[t]&&(l.enable(t),D[t]=!0)}function g(t){!1!==D[t]&&(l.disable(t),D[t]=!1)}function o(t,i,r,n,a,o,s,d){(t===dp?g(l.BLEND):m(l.BLEND),t!==gp)?((t!==z||d!==G)&&(t===pp?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.SRC_ALPHA,l.ONE)):t===up?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ZERO,l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ONE_MINUS_SRC_ALPHA)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.ONE_MINUS_SRC_COLOR)):t===mp?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ZERO,l.SRC_COLOR,l.ZERO,l.SRC_ALPHA)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.SRC_COLOR)):d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA)):(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA))),R=null,B=null,U=null,k=null,j=null,F=null):(a=a||i,o=o||r,s=s||n,i===R&&a===k||(l.blendEquationSeparate(u.convert(i),u.convert(a)),R=i,k=a),r===B&&n===U&&o===j&&s===F||(l.blendFuncSeparate(u.convert(r),u.convert(n),u.convert(o),u.convert(s)),B=r,U=n,j=o,F=s));z=t,G=d}function s(t){H!==t&&(t?l.frontFace(l.CW):l.frontFace(l.CCW),H=t)}function c(t){t===qa?g(l.CULL_FACE):(m(l.CULL_FACE),t!==V&&(t===Za?l.cullFace(l.BACK):t===Ja?l.cullFace(l.FRONT):l.cullFace(l.FRONT_AND_BACK))),V=t}function h(t,a,o){t?(m(l.POLYGON_OFFSET_FILL),W===a&&Q===o||(l.polygonOffset(a,o),W=a,Q=o)):g(l.POLYGON_OFFSET_FILL)}function f(t){void 0===t&&(t=l.TEXTURE0+X-1),K!==t&&(l.activeTexture(t),K=t)}var A=new i,E=new r,T=new n,b=l.getParameter(l.MAX_VERTEX_ATTRIBS),L=new Uint8Array(b),N=new Uint8Array(b),w=new Uint8Array(b),D={},S=null,O=null,z=null,R=null,B=null,U=null,k=null,j=null,F=null,G=!1,H=null,V=null,Y=null,W=null,Q=null,X=l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS),q=!1,Z=0,J=l.getParameter(l.VERSION);-1===J.indexOf("WebGL")?-1!==J.indexOf("OpenGL ES")&&(Z=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(J)[1]),q=2<=Z):(Z=parseFloat(/^WebGL\ ([0-9])/.exec(J)[1]),q=1<=Z);var K=null,$={},ee=new ba,te=new ba,re={};return re[l.TEXTURE_2D]=a(l.TEXTURE_2D,l.TEXTURE_2D,1),re[l.TEXTURE_CUBE_MAP]=a(l.TEXTURE_CUBE_MAP,l.TEXTURE_CUBE_MAP_POSITIVE_X,6),A.setClear(0,0,0,1),E.setClear(1),T.setClear(0),m(l.DEPTH_TEST),E.setFunc(Po),s(!1),c(Za),m(l.CULL_FACE),m(l.BLEND),o(cp),{buffers:{color:A,depth:E,stencil:T},initAttributes:function(){for(var r=0,t=L.length;r<t;r++)L[r]=0},enableAttribute:function(r){(L[r]=1,0===N[r]&&(l.enableVertexAttribArray(r),N[r]=1),0!==w[r])&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),w[r]=0)},enableAttributeAndDivisor:function(a,o){(L[a]=1,0===N[a]&&(l.enableVertexAttribArray(a),N[a]=1),w[a]!==o)&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(a,o),w[a]=o)},disableUnusedAttributes:function(){for(var t=0,r=N.length;t!==r;++t)N[t]!==L[t]&&(l.disableVertexAttribArray(t),N[t]=0)},enable:m,disable:g,getCompressedTextureFormats:function(){if(null===S&&(S=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var a=l.getParameter(l.COMPRESSED_TEXTURE_FORMATS),o=0;o<a.length;o++)S.push(a[o]);return S},useProgram:function(t){return O!==t&&(l.useProgram(t),O=t,!0)},setBlending:o,setMaterial:function(t,a){t.side===ip?g(l.CULL_FACE):m(l.CULL_FACE);var n=t.side===np;a&&(n=!n),s(n),!0===t.transparent?o(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):o(dp),E.setFunc(t.depthFunc),E.setTest(t.depthTest),E.setMask(t.depthWrite),A.setMask(t.colorWrite),h(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:s,setCullFace:c,setLineWidth:function(t){t!==Y&&(q&&l.lineWidth(t),Y=t)},setPolygonOffset:h,setScissorTest:function(t){t?m(l.SCISSOR_TEST):g(l.SCISSOR_TEST)},activeTexture:f,bindTexture:function(t,a){null===K&&f();var o=$[K];void 0===o&&(o={type:void 0,texture:void 0},$[K]=o),o.type===t&&o.texture===a||(l.bindTexture(t,a||re[t]),o.type=t,o.texture=a)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(r){console.error("THREE.WebGLState:",r)}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(r){console.error("THREE.WebGLState:",r)}},scissor:function(t){!1===ee.equals(t)&&(l.scissor(t.x,t.y,t.z,t.w),ee.copy(t))},viewport:function(t){!1===te.equals(t)&&(l.viewport(t.x,t.y,t.z,t.w),te.copy(t))},reset:function(){for(var t=0;t<N.length;t++)1===N[t]&&(l.disableVertexAttribArray(t),N[t]=0);D={},S=null,K=null,$={},O=null,z=null,H=null,V=null,A.reset(),E.reset(),T.reset()}}}function le(r,t,A){function i(t){if("highp"===t){if(0<r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.HIGH_FLOAT).precision&&0<r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<r.getShaderPrecisionFormat(r.VERTEX_SHADER,r.MEDIUM_FLOAT).precision&&0<r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.MEDIUM_FLOAT).precision?"mediump":"lowp"}var M=void 0===A.precision?"highp":A.precision,x=i(M),s;x!==M&&(console.warn("THREE.WebGLRenderer:",M,"not supported, using",x,"instead."),M=x);var a=!0===A.logarithmicDepthBuffer,E=r.getParameter(r.MAX_TEXTURE_IMAGE_UNITS),T=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=r.getParameter(r.MAX_TEXTURE_SIZE),L=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),D=r.getParameter(r.MAX_VERTEX_ATTRIBS),N=r.getParameter(r.MAX_VERTEX_UNIFORM_VECTORS),w=r.getParameter(r.MAX_VARYING_VECTORS),C=r.getParameter(r.MAX_FRAGMENT_UNIFORM_VECTORS),S=0<T,I=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==s)return s;var a=t.get("EXT_texture_filter_anisotropic");return s=null===a?0:r.getParameter(a.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},getMaxPrecision:i,precision:M,logarithmicDepthBuffer:a,maxTextures:E,maxVertexTextures:T,maxTextureSize:b,maxCubemapSize:L,maxAttributes:D,maxVertexUniforms:N,maxVaryings:w,maxFragmentUniforms:C,vertexTextures:S,floatFragmentTextures:I,floatVertexTextures:S&&I}}function ue(a,t,o,n){nt.call(this),this.type="PerspectiveCamera",this.fov=void 0===a?50:a,this.zoom=1,this.near=void 0===o?.1:o,this.far=void 0===n?2e3:n,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Kt(r){ue.call(this),this.cameras=r||[]}function sl(a){function t(){if(null!==i&&i.isPresenting){var t=i.getEyeParameters("left"),o=t.renderWidth,r=t.renderHeight;g=a.getPixelRatio(),c=a.getSize(),a.setDrawingBufferSize(2*o,r,1)}else A.enabled&&a.setDrawingBufferSize(c.width,c.height,g)}var A=this,i=null,o=null,s=null,h=new Ma,l=new Ma;"undefined"!=typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData);var u=new Ma,p=new xa,d=new Ea,f=new ue;f.bounds=new ba(0,0,.5,1),f.layers.enable(1);var m=new ue;m.bounds=new ba(.5,0,.5,1),m.layers.enable(2);var M=new Kt([f,m]);M.layers.enable(1),M.layers.enable(2);var c,g;"undefined"!=typeof window&&window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return i},this.setDevice=function(r){void 0!==r&&(i=r)},this.setPoseTarget=function(r){void 0!==r&&(s=r)},this.getCamera=function(g){if(null===i)return g;i.depthNear=g.near,i.depthFar=g.far,i.getFrameData(o);var t=i.stageParameters;t?h.fromArray(t.sittingToStandingTransform):h.makeTranslation(0,A.userHeight,0);var x=o.pose,r=null===s?g:s;if(r.matrix.copy(h),r.matrix.decompose(r.position,r.quaternion,r.scale),null!==x.orientation&&(p.fromArray(x.orientation),r.quaternion.multiply(p)),null!==x.position&&(p.setFromRotationMatrix(h),d.fromArray(x.position),d.applyQuaternion(p),r.position.add(d)),r.updateMatrixWorld(),!1===i.isPresenting)return g;f.near=g.near,m.near=g.near,f.far=g.far,m.far=g.far,M.matrixWorld.copy(g.matrixWorld),M.matrixWorldInverse.copy(g.matrixWorldInverse),f.matrixWorldInverse.fromArray(o.leftViewMatrix),m.matrixWorldInverse.fromArray(o.rightViewMatrix),l.getInverse(h),f.matrixWorldInverse.multiply(l),m.matrixWorldInverse.multiply(l);var n=r.parent;null!==n&&(u.getInverse(n.matrixWorld),f.matrixWorldInverse.multiply(u),m.matrixWorldInverse.multiply(u)),f.matrixWorld.getInverse(f.matrixWorldInverse),m.matrixWorld.getInverse(m.matrixWorldInverse),f.projectionMatrix.fromArray(o.leftProjectionMatrix),m.projectionMatrix.fromArray(o.rightProjectionMatrix),M.projectionMatrix.copy(f.projectionMatrix);var a=i.getLayers();if(a.length){var c=a[0];null!==c.leftBounds&&4===c.leftBounds.length&&f.bounds.fromArray(c.leftBounds),null!==c.rightBounds&&4===c.rightBounds.length&&m.bounds.fromArray(c.rightBounds)}return M},this.getStandingMatrix=function(){return h},this.submitFrame=function(){i&&i.isPresenting&&i.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function fe(a){var t={};return{get:function(o){if(void 0!==t[o])return t[o];var n;return n="WEBGL_depth_texture"===o?a.getExtension("WEBGL_depth_texture")||a.getExtension("MOZ_WEBGL_depth_texture")||a.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===o?a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===o?a.getExtension("WEBGL_compressed_texture_s3tc")||a.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===o?a.getExtension("WEBGL_compressed_texture_pvrtc")||a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===o?a.getExtension("WEBGL_compressed_texture_etc1"):a.getExtension(o),null===n&&console.warn("THREE.WebGLRenderer: "+o+" extension not supported."),t[o]=n,n}}}function me(){function g(){A.value!==d&&(A.value=d,A.needsUpdate=0<r),m.numPlanes=r,m.numIntersection=0}function y(l,t,g,r){var n=null===l?0:l.length,a=null;if(0!==n){if(a=A.value,!0!==r||null===a){var o=g+4*n,s=t.matrixWorldInverse;c.getNormalMatrix(s),(null===a||a.length<o)&&(a=new Float32Array(o));for(var u=0,p=g;u!==n;++u,p+=4)i.copy(l[u]).applyMatrix4(s,c),i.normal.toArray(a,p),a[p+3]=i.constant}A.value=a,A.needsUpdate=!0}return m.numPlanes=n,a}var m=this,d=null,r=0,n=!1,t=!1,i=new tt,c=new va,A={value:null,needsUpdate:!1};this.uniform=A,this.numPlanes=0,this.numIntersection=0,this.init=function(a,t,i){var o=0!==a.length||t||0!==r||n;return n=t,d=y(a,i,0),r=a.length,o},this.beginShadows=function(){t=!0,y(null)},this.endShadows=function(){t=!1,g()},this.setState=function(s,i,o,l,h,u){if(!n||null===s||0===s.length||t&&!o)t?y(null):g();else{var p=t?0:r,M=4*p,f=h.clippingState||null;A.value=f,f=y(s,l,M,u);for(var m=0;m!==M;++m)f[m]=d[m];h.clippingState=f,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=p}}}function ve(a,t){function r(o){var n;if(o===vp)return a.REPEAT;if(o===Tp)return a.CLAMP_TO_EDGE;if(o===bp)return a.MIRRORED_REPEAT;if(o===Lp)return a.NEAREST;if(o===Dp)return a.NEAREST_MIPMAP_NEAREST;if(o===Np)return a.NEAREST_MIPMAP_LINEAR;if(o===wp)return a.LINEAR;if(o===Cp)return a.LINEAR_MIPMAP_NEAREST;if(o===Sp)return a.LINEAR_MIPMAP_LINEAR;if(o===Ip)return a.UNSIGNED_BYTE;if(o===fs)return a.UNSIGNED_SHORT_4_4_4_4;if(o===ms)return a.UNSIGNED_SHORT_5_5_5_1;if(o===vs)return a.UNSIGNED_SHORT_5_6_5;if(o===ss)return a.BYTE;if(o===cs)return a.SHORT;if(o===hs)return a.UNSIGNED_SHORT;if(o===ls)return a.INT;if(o===us)return a.UNSIGNED_INT;if(o===ps)return a.FLOAT;if(o===ds&&null!==(n=t.get("OES_texture_half_float")))return n.HALF_FLOAT_OES;if(o===ys)return a.ALPHA;if(o===xs)return a.RGB;if(o===_p)return a.RGBA;if(o===jp)return a.LUMINANCE;if(o===ws)return a.LUMINANCE_ALPHA;if(o===Ms)return a.DEPTH_COMPONENT;if(o===Ts)return a.DEPTH_STENCIL;if(o===hp)return a.FUNC_ADD;if(o===po)return a.FUNC_SUBTRACT;if(o===fo)return a.FUNC_REVERSE_SUBTRACT;if(o===go)return a.ZERO;if(o===yo)return a.ONE;if(o===xo)return a.SRC_COLOR;if(o===bo)return a.ONE_MINUS_SRC_COLOR;if(o===_o)return a.SRC_ALPHA;if(o===wo)return a.ONE_MINUS_SRC_ALPHA;if(o===Mo)return a.DST_ALPHA;if(o===Eo)return a.ONE_MINUS_DST_ALPHA;if(o===To)return a.DST_COLOR;if(o===So)return a.ONE_MINUS_DST_COLOR;if(o===Ao)return a.SRC_ALPHA_SATURATE;if((o===Ss||o===As||o===Ls||o===Rs)&&null!==(n=t.get("WEBGL_compressed_texture_s3tc"))){if(o===Ss)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(o===As)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(o===Ls)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(o===Rs)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((o===Cs||o===Ps||o===Is||o===Os)&&null!==(n=t.get("WEBGL_compressed_texture_pvrtc"))){if(o===Cs)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(o===Ps)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(o===Is)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(o===Os)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(o===Ns&&null!==(n=t.get("WEBGL_compressed_texture_etc1")))return n.COMPRESSED_RGB_ETC1_WEBGL;if((o===Us||o===Ds||o===Bs||o===Fs||o===zs||o===Gs||o===Hs||o===Vs||o===ks||o===js||o===Ws||o===Xs||o===qs||o===Ys)&&null!==(n=t.get("WEBGL_compressed_texture_astc")))return o;if((o===mo||o===vo)&&null!==(n=t.get("EXT_blend_minmax"))){if(o===mo)return n.MIN_EXT;if(o===vo)return n.MAX_EXT}return o===gs&&null!==(n=t.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:0}return{convert:r}}function ge(){var a={};return{get:function(t){if(void 0!==a[t.id])return a[t.id];var o;switch(t.type){case"DirectionalLight":o={direction:new Ea,color:new X,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Aa};break;case"SpotLight":o={position:new Ea,direction:new Ea,color:new X,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Aa};break;case"PointLight":o={position:new Ea,color:new X,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Aa,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":o={direction:new Ea,skyColor:new X,groundColor:new X};break;case"RectAreaLight":o={color:new X,position:new Ea,halfWidth:new Ea,halfHeight:new Ea};}return a[t.id]=o,o}}}function ye(){function r(i,s,r){for(var L=0,c=0,h=0,D=0,u=0,p=0,d=0,f=0,m=r.matrixWorldInverse,v=0,g=i.length;v<g;v++){var y=i[v],x=y.color,b=y.intensity,N=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)L+=x.r*b,c+=x.g*b,h+=x.b*b;else if(y.isDirectionalLight){var M=a.get(y);if(M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),l.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(l),M.direction.transformDirection(m),M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}A.directionalShadowMap[D]=w,A.directionalShadowMatrix[D]=y.shadow.matrix,A.directional[D]=M,D++}else if(y.isSpotLight){var M=a.get(y);if(M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),M.color.copy(x).multiplyScalar(b),M.distance=N,M.direction.setFromMatrixPosition(y.matrixWorld),l.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(l),M.direction.transformDirection(m),M.coneCos=I(y.angle),M.penumbraCos=I(y.angle*(1-y.penumbra)),M.decay=0===y.distance?0:y.decay,M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}A.spotShadowMap[p]=w,A.spotShadowMatrix[p]=y.shadow.matrix,A.spot[p]=M,p++}else if(y.isRectAreaLight){var M=a.get(y);M.color.copy(x).multiplyScalar(b),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),o.identity(),n.copy(y.matrixWorld),n.premultiply(m),o.extractRotation(n),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(o),M.halfHeight.applyMatrix4(o),A.rectArea[d]=M,d++}else if(y.isPointLight){var M=a.get(y);if(M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=0===y.distance?0:y.decay,M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize,M.shadowCameraNear=E.camera.near,M.shadowCameraFar=E.camera.far}A.pointShadowMap[u]=w,A.pointShadowMatrix[u]=y.shadow.matrix,A.point[u]=M,u++}else if(y.isHemisphereLight){var M=a.get(y);M.direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(m),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(b),M.groundColor.copy(y.groundColor).multiplyScalar(b),A.hemi[f]=M,f++}}A.ambient[0]=L,A.ambient[1]=c,A.ambient[2]=h,A.directional.length=D,A.spot.length=p,A.rectArea.length=d,A.point.length=u,A.hemi.length=f,A.hash=A.id+","+D+","+u+","+p+","+d+","+f+","+s.length}var a=new ge,A={id:Lc++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},l=new Ea,n=new Ma,o=new Ma;return{setup:r,state:A}}function xe(){var r=new ye,n=[],i=[],l=[];return{init:function(){n.length=0,i.length=0,l.length=0},state:{lightsArray:n,shadowsArray:i,spritesArray:l,lights:r},setupLights:function(a){r.setup(n,i,a)},pushLight:function(r){n.push(r)},pushShadow:function(r){i.push(r)},pushSprite:function(r){l.push(r)}}}function be(){function r(o,i){var s=o.id+","+i.id,r=a[s];return void 0===r&&(r=new xe,a[s]=r),r}var a={};return{get:r,dispose:function(){a={}}}}function _e(a){function t(){return null===ye?Ie:1}function i(){Ve=new fe(Qe),Ve.get("WEBGL_depth_texture"),Ve.get("OES_texture_float"),Ve.get("OES_texture_float_linear"),Ve.get("OES_texture_half_float"),Ve.get("OES_texture_half_float_linear"),Ve.get("OES_standard_derivatives"),Ve.get("OES_element_index_uint"),Ve.get("ANGLE_instanced_arrays"),ct=new ve(Qe,Ve),Ye=new le(Qe,Ve,a),We=new he(Qe,Ve,ct),We.scissor(De.copy(je).multiplyScalar(Ie)),We.viewport(Le.copy(_e).multiplyScalar(Ie)),Xe=new ce,qe=new se(Qe,Ve,We,Xe,Ye,ct,Fe,Ge),Ze=new et(Qe),Je=new kt(Qe,Ze,Fe),Ke=new jt(Je,Ge),ot=new il(Qe),$e=new oe(Q,Ve,Ye),tt=new nl,rt=new be,at=new ol(Q,We,Je,de),nt=new Vt(Qe,Ve,Ge),st=new Ht(Qe,Ve,Ge),lt=new Y(Q,Qe,We,qe,Ye),Q.info.programs=$e.programs,Q.context=Qe,Q.capabilities=Ye,Q.extensions=Ve,Q.properties=Xe,Q.renderLists=tt,Q.state=We}function n(r){r.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1,i()}function F(r){var t=r.target;t.removeEventListener("dispose",F),s(t)}function s(r){h(r),Xe.remove(r)}function h(r){var t=Xe.get(r).program;r.program=void 0,void 0!==t&&$e.releaseProgram(t)}function p(r,a,o){r.render(function(r){Q.renderBufferImmediate(r,a,o)})}function X(A,t,M,i){if(M&&M.isInstancedBufferGeometry&&null===Ve.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),We.initAttributes();var r=M.attributes,n=t.getAttributes(),a=A.defaultAttributeValues;for(var o in n){var s=n[o];if(0<=s){var c=r[o];if(void 0!==c){var h=c.normalized,l=c.itemSize,u=Ze.get(c);if(void 0===u)continue;var p=u.buffer,d=u.type,E=u.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,v=m.stride,g=c.offset;m&&m.isInstancedInterleavedBuffer?(We.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===M.maxInstancedCount&&(M.maxInstancedCount=m.meshPerAttribute*m.count)):We.enableAttribute(s),Qe.bindBuffer(Qe.ARRAY_BUFFER,p),Qe.vertexAttribPointer(s,l,d,h,v*E,(i*v+g)*E)}else c.isInstancedBufferAttribute?(We.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===M.maxInstancedCount&&(M.maxInstancedCount=c.meshPerAttribute*c.count)):We.enableAttribute(s),Qe.bindBuffer(Qe.ARRAY_BUFFER,p),Qe.vertexAttribPointer(s,l,d,h,0,i*l*E)}else if(void 0!==a){var y=a[o];if(void 0!==y)switch(y.length){case 2:Qe.vertexAttrib2fv(s,y);break;case 3:Qe.vertexAttrib3fv(s,y);break;case 4:Qe.vertexAttrib4fv(s,y);break;default:Qe.vertexAttrib1fv(s,y);}}}}We.disableUnusedAttributes()}function d(){te||(m(),te=!0)}function u(){te=!1}function m(){var r=pt.getDevice();r&&r.isPresenting?r.requestAnimationFrame(g):window.requestAnimationFrame(g)}function g(r){!1!==te&&(ee(r),m())}function y(d,t,p){if(!1!==d.visible){if(d.layers.test(t.layers))if(d.isLight)J.pushLight(d),d.castShadow&&J.pushShadow(d);else if(d.isSprite)d.frustumCulled&&!ze.intersectsSprite(d)||J.pushSprite(d);else if(d.isImmediateRenderObject)p&&ke.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Pe),ge.push(d,null,d.material,ke.z,null);else if((d.isMesh||d.isLine||d.isPoints)&&(d.isSkinnedMesh&&d.skeleton.update(),!d.frustumCulled||ze.intersectsObject(d))){p&&ke.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Pe);var i=Ke.update(d),r=d.material;if(Array.isArray(r))for(var n=i.groups,a=0,o=n.length;a<o;a++){var s=n[a],c=r[s.materialIndex];c&&c.visible&&ge.push(d,i,c,ke.z,s)}else r.visible&&ge.push(d,i,r,ke.z,null)}for(var u=d.children,a=0,o=u.length;a<o;a++)y(u[a],t,p)}}function f(A,t,M,i){for(var r=0,n=A.length;r<n;r++){var a=A[r],o=a.object,s=a.geometry,c=void 0===i?a.material:i,h=a.group;if(M.isArrayCamera){Te=M;for(var l=M.cameras,u=0,p=l.length,d;u<p;u++)if(d=l[u],o.layers.test(d.layers)){var f=d.bounds,m=f.x*Ce,E=f.y*Se,g=f.z*Ce,y=f.w*Se;We.viewport(Le.set(m,E,g,y).multiplyScalar(Ie)),b(o,t,d,s,c,h)}}else Te=null,b(o,t,M,s,c,h)}}function b(l,t,d,i,r,n){if(l.onBeforeRender(Q,t,d,i,r,n),J=rt.get(t,Te||d),l.modelViewMatrix.multiplyMatrices(d.matrixWorldInverse,l.matrixWorld),l.normalMatrix.getNormalMatrix(l.modelViewMatrix),l.isImmediateRenderObject){var a=l.isMesh&&0>l.matrixWorld.determinant();We.setMaterial(r,a);var o=Z(d,t.fog,r,l);xe="",p(l,o,r)}else Q.renderBufferDirect(d,t.fog,i,r,l,n);l.onAfterRender(Q,t,d,i,r,n),J=rt.get(t,Te||d)}function _(p,t,y){var i=Xe.get(p),r=J.state.lights,n=J.state.shadowsArray,a=$e.getParameters(p,r.state,n,t,Re.numPlanes,Re.numIntersection,y),o=$e.getProgramCode(p,a),s=i.program,c=!0;if(void 0===s)p.addEventListener("dispose",F);else if(s.code!==o)h(p);else if(i.lightsHash!==r.state.hash)Xe.update(p,"lightsHash",r.state.hash),c=!1;else{if(void 0!==a.shaderID)return;c=!1}if(c){if(a.shaderID){var l=wc[a.shaderID];i.shader={name:p.type,uniforms:bc.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}}else i.shader={name:p.type,uniforms:p.uniforms,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader};p.onBeforeCompile(i.shader),s=$e.acquireProgram(p,i.shader,a,o),i.program=s,p.program=s}var u=s.getAttributes();if(p.morphTargets){p.numSupportedMorphTargets=0;for(var d=0;d<Q.maxMorphTargets;d++)0<=u["morphTarget"+d]&&p.numSupportedMorphTargets++}if(p.morphNormals){p.numSupportedMorphNormals=0;for(var d=0;d<Q.maxMorphNormals;d++)0<=u["morphNormal"+d]&&p.numSupportedMorphNormals++}var f=i.shader.uniforms;(p.isShaderMaterial||p.isRawShaderMaterial)&&!0!==p.clipping||(i.numClippingPlanes=Re.numPlanes,i.numIntersection=Re.numIntersection,f.clippingPlanes=Re.uniform),i.fog=t,i.lightsHash=r.state.hash,p.lights&&(f.ambientLightColor.value=r.state.ambient,f.directionalLights.value=r.state.directional,f.spotLights.value=r.state.spot,f.rectAreaLights.value=r.state.rectArea,f.pointLights.value=r.state.point,f.hemisphereLights.value=r.state.hemi,f.directionalShadowMap.value=r.state.directionalShadowMap,f.directionalShadowMatrix.value=r.state.directionalShadowMatrix,f.spotShadowMap.value=r.state.spotShadowMap,f.spotShadowMatrix.value=r.state.spotShadowMatrix,f.pointShadowMap.value=r.state.pointShadowMap,f.pointShadowMatrix.value=r.state.pointShadowMatrix);var m=i.program.getUniforms(),A=W.seqWithValue(m.seq,f);i.uniformsList=A}function Z(u,t,b,i){we=0;var j=Xe.get(b),n=J.state.lights;if(Be&&(Ue||u!==Ee)){var a=u===Ee&&b.id===Me;Re.setState(b.clippingPlanes,b.clipIntersection,b.clipShadows,u,j,a)}!1===b.needsUpdate&&(void 0===j.program?b.needsUpdate=!0:b.fog&&j.fog!==t?b.needsUpdate=!0:b.lights&&j.lightsHash!==n.state.hash?b.needsUpdate=!0:void 0===j.numClippingPlanes||j.numClippingPlanes===Re.numPlanes&&j.numIntersection===Re.numIntersection||(b.needsUpdate=!0)),b.needsUpdate&&(_(b,t,i),b.needsUpdate=!1);var o=!1,s=!1,O=!1,h=j.program,z=h.getUniforms(),p=j.shader.uniforms;if(We.useProgram(h.program)&&(o=!0,s=!0,O=!0),b.id!==Me&&(Me=b.id,s=!0),o||u!==Ee){if(z.setValue(Qe,"projectionMatrix",u.projectionMatrix),Ye.logarithmicDepthBuffer&&z.setValue(Qe,"logDepthBufFC",2/(l(u.far+1)/r)),Ee!==(Te||u)&&(Ee=Te||u,s=!0,O=!0),b.isShaderMaterial||b.isMeshPhongMaterial||b.isMeshStandardMaterial||b.envMap){var d=z.map.cameraPosition;void 0!==d&&d.setValue(Qe,ke.setFromMatrixPosition(u.matrixWorld))}(b.isMeshPhongMaterial||b.isMeshLambertMaterial||b.isMeshBasicMaterial||b.isMeshStandardMaterial||b.isShaderMaterial||b.skinning)&&z.setValue(Qe,"viewMatrix",u.matrixWorldInverse)}if(b.skinning){z.setOptional(Qe,i,"bindMatrix"),z.setOptional(Qe,i,"bindMatrixInverse");var f=i.skeleton;if(f){var m=f.bones;if(Ye.floatVertexTextures){if(void 0===f.boneTexture){var v=S(4*m.length);v=zp.ceilPowerOfTwo(v),v=C(v,4);var g=new Float32Array(4*(v*v));g.set(f.boneMatrices);var y=new c(g,v,v,_p,ps);y.needsUpdate=!0,f.boneMatrices=g,f.boneTexture=y,f.boneTextureSize=v}z.setValue(Qe,"boneTexture",f.boneTexture),z.setValue(Qe,"boneTextureSize",f.boneTextureSize)}else z.setOptional(Qe,f,"boneMatrices")}}return s&&(z.setValue(Qe,"toneMappingExposure",Q.toneMappingExposure),z.setValue(Qe,"toneMappingWhitePoint",Q.toneMappingWhitePoint),b.lights&&D(p,O),t&&b.fog&&A(p,t),b.isMeshBasicMaterial?M(p,b):b.isMeshLambertMaterial?(M(p,b),L(p,b)):b.isMeshPhongMaterial?(M(p,b),b.isMeshToonMaterial?re(p,b):R(p,b)):b.isMeshStandardMaterial?(M(p,b),b.isMeshPhysicalMaterial?I(p,b):P(p,b)):b.isMeshDepthMaterial?(M(p,b),ae(p,b)):b.isMeshDistanceMaterial?(M(p,b),N(p,b)):b.isMeshNormalMaterial?(M(p,b),U(p,b)):b.isLineBasicMaterial?(E(p,b),b.isLineDashedMaterial&&T(p,b)):b.isPointsMaterial?w(p,b):b.isShadowMaterial&&(p.color.value=b.color,p.opacity.value=b.opacity),void 0!==p.ltc_1&&(p.ltc_1.value=xc.LTC_1),void 0!==p.ltc_2&&(p.ltc_2.value=xc.LTC_2),W.upload(Qe,j.uniformsList,p,Q)),b.isShaderMaterial&&!0===b.uniformsNeedUpdate&&(W.upload(Qe,j.uniformsList,p,Q),b.uniformsNeedUpdate=!1),z.setValue(Qe,"modelViewMatrix",i.modelViewMatrix),z.setValue(Qe,"normalMatrix",i.normalMatrix),z.setValue(Qe,"modelMatrix",i.matrixWorld),h}function M(s,t){s.opacity.value=t.opacity,t.color&&(s.diffuse.value=t.color),t.emissive&&s.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(s.map.value=t.map),t.alphaMap&&(s.alphaMap.value=t.alphaMap),t.specularMap&&(s.specularMap.value=t.specularMap),t.envMap&&(s.envMap.value=t.envMap,s.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,s.reflectivity.value=t.reflectivity,s.refractionRatio.value=t.refractionRatio),t.lightMap&&(s.lightMap.value=t.lightMap,s.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(s.aoMap.value=t.aoMap,s.aoMapIntensity.value=t.aoMapIntensity);var l;if(t.map?l=t.map:t.specularMap?l=t.specularMap:t.displacementMap?l=t.displacementMap:t.normalMap?l=t.normalMap:t.bumpMap?l=t.bumpMap:t.roughnessMap?l=t.roughnessMap:t.metalnessMap?l=t.metalnessMap:t.alphaMap?l=t.alphaMap:t.emissiveMap&&(l=t.emissiveMap),void 0!==l){if(l.isWebGLRenderTarget&&(l=l.texture),!0===l.matrixAutoUpdate){var i=l.offset,r=l.repeat,n=l.rotation,a=l.center;l.matrix.setUvTransform(i.x,i.y,r.x,r.y,n,a.x,a.y)}s.uvTransform.value.copy(l.matrix)}}function E(r,t){r.diffuse.value=t.color,r.opacity.value=t.opacity}function T(r,t){r.dashSize.value=t.dashSize,r.totalSize.value=t.dashSize+t.gapSize,r.scale.value=t.scale}function w(o,t){if(o.diffuse.value=t.color,o.opacity.value=t.opacity,o.size.value=t.size*Ie,o.scale.value=.5*Se,o.map.value=t.map,null!==t.map){if(!0===t.map.matrixAutoUpdate){var s=t.map.offset,i=t.map.repeat,r=t.map.rotation,n=t.map.center;t.map.matrix.setUvTransform(s.x,s.y,i.x,i.y,r,n.x,n.y)}o.uvTransform.value.copy(t.map.matrix)}}function A(r,t){r.fogColor.value=t.color,t.isFog?(r.fogNear.value=t.near,r.fogFar.value=t.far):t.isFogExp2&&(r.fogDensity.value=t.density)}function L(r,t){t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap)}function R(r,t){r.specular.value=t.specular,r.shininess.value=C(t.shininess,1e-4),t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap),t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function re(r,t){R(r,t),t.gradientMap&&(r.gradientMap.value=t.gradientMap)}function P(r,t){r.roughness.value=t.roughness,r.metalness.value=t.metalness,t.roughnessMap&&(r.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(r.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap),t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias),t.envMap&&(r.envMapIntensity.value=t.envMapIntensity)}function I(r,t){r.clearCoat.value=t.clearCoat,r.clearCoatRoughness.value=t.clearCoatRoughness,P(r,t)}function ae(r,t){t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function N(r,t){t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias),r.referencePosition.value.copy(t.referencePosition),r.nearDistance.value=t.nearDistance,r.farDistance.value=t.farDistance}function U(r,t){t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function D(r,t){r.ambientLightColor.needsUpdate=t,r.directionalLights.needsUpdate=t,r.pointLights.needsUpdate=t,r.spotLights.needsUpdate=t,r.rectAreaLights.needsUpdate=t,r.hemisphereLights.needsUpdate=t}console.log("THREE.WebGLRenderer",op),a=a||{};var x=void 0===a.canvas?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):a.canvas,v=void 0===a.context?null:a.context,z=void 0!==a.alpha&&a.alpha,B=void 0===a.depth||a.depth,G=void 0===a.stencil||a.stencil,ne=void 0!==a.antialias&&a.antialias,de=void 0===a.premultipliedAlpha||a.premultipliedAlpha,pe=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,ue=void 0===a.powerPreference?"default":a.powerPreference,ge=null,J=null;this.domElement=x,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Go,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Q=this,K=!1,ye=null,Ae=null,Me=-1,xe="",Ee=null,Te=null,Le=new ba,De=new ba,Ne=null,we=0,Ce=x.width,Se=x.height,Ie=1,_e=new ba(0,0,Ce,Se),je=new ba(0,0,Ce,Se),Oe=!1,ze=new Ga,Re=new me,Be=!1,Ue=!1,Pe=new Ma,ke=new Ea,Fe={geometries:0,textures:0},Ge={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ge,memory:Fe,programs:null,autoReset:!0,reset:function(){Ge.frame++,Ge.calls=0,Ge.vertices=0,Ge.faces=0,Ge.points=0}};var Qe;try{var He={alpha:z,depth:B,stencil:G,antialias:ne,premultipliedAlpha:de,preserveDrawingBuffer:pe,powerPreference:ue};if(x.addEventListener("webglcontextlost",n,!1),x.addEventListener("webglcontextrestored",o,!1),null===(Qe=v||x.getContext("webgl",He)||x.getContext("experimental-webgl",He)))throw null===x.getContext("webgl")?new Error("Error creating WebGL context."):new Error("Error creating WebGL context with your selected attributes.");void 0===Qe.getShaderPrecisionFormat&&(Qe.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(r){console.error("THREE.WebGLRenderer: "+r.message)}var Ve,Ye,We,Xe,qe,Ze,Je,Ke,$e,tt,rt,at,ot,nt,st,lt,ct;i();var pt=new sl(Q);this.vr=pt;var ut=new it(Q,Ke,Ye.maxTextureSize);this.shadowMap=ut,this.getContext=function(){return Qe},this.getContextAttributes=function(){return Qe.getContextAttributes()},this.forceContextLoss=function(){var r=Ve.get("WEBGL_lose_context");r&&r.loseContext()},this.forceContextRestore=function(){var r=Ve.get("WEBGL_lose_context");r&&r.restoreContext()},this.getPixelRatio=function(){return Ie},this.setPixelRatio=function(r){void 0!==r&&(Ie=r,this.setSize(Ce,Se,!1))},this.getSize=function(){return{width:Ce,height:Se}},this.setSize=function(a,t,o){var n=pt.getDevice();return n&&n.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):void(Ce=a,Se=t,x.width=a*Ie,x.height=t*Ie,!1!==o&&(x.style.width=a+"px",x.style.height=t+"px"),this.setViewport(0,0,a,t))},this.getDrawingBufferSize=function(){return{width:Ce*Ie,height:Se*Ie}},this.setDrawingBufferSize=function(r,t,a){Ce=r,Se=t,Ie=a,x.width=r*a,x.height=t*a,this.setViewport(0,0,r,t)},this.getCurrentViewport=function(){return Le},this.setViewport=function(a,t,o,n){_e.set(a,Se-t-n,o,n),We.viewport(Le.copy(_e).multiplyScalar(Ie))},this.setScissor=function(a,t,o,n){je.set(a,Se-t-n,o,n),We.scissor(De.copy(je).multiplyScalar(Ie))},this.setScissorTest=function(r){We.setScissorTest(Oe=r)},this.getClearColor=function(){return at.getClearColor()},this.setClearColor=function(){at.setClearColor.apply(at,arguments)},this.getClearAlpha=function(){return at.getClearAlpha()},this.setClearAlpha=function(){at.setClearAlpha.apply(at,arguments)},this.clear=function(a,t,o){var n=0;(void 0===a||a)&&(n|=Qe.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=Qe.DEPTH_BUFFER_BIT),(void 0===o||o)&&(n|=Qe.STENCIL_BUFFER_BIT),Qe.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(a,t,o,n){this.setRenderTarget(a),this.clear(t,o,n)},this.dispose=function(){x.removeEventListener("webglcontextlost",n,!1),x.removeEventListener("webglcontextrestored",o,!1),tt.dispose(),rt.dispose(),Xe.dispose(),Ke.dispose(),pt.dispose(),u()},this.renderBufferImmediate=function(d,t,p){We.initAttributes();var i=Xe.get(d);d.hasPositions&&!i.position&&(i.position=Qe.createBuffer()),d.hasNormals&&!i.normal&&(i.normal=Qe.createBuffer()),d.hasUvs&&!i.uv&&(i.uv=Qe.createBuffer()),d.hasColors&&!i.color&&(i.color=Qe.createBuffer());var r=t.getAttributes();if(d.hasPositions&&(Qe.bindBuffer(Qe.ARRAY_BUFFER,i.position),Qe.bufferData(Qe.ARRAY_BUFFER,d.positionArray,Qe.DYNAMIC_DRAW),We.enableAttribute(r.position),Qe.vertexAttribPointer(r.position,3,Qe.FLOAT,!1,0,0)),d.hasNormals){if(Qe.bindBuffer(Qe.ARRAY_BUFFER,i.normal),!p.isMeshPhongMaterial&&!p.isMeshStandardMaterial&&!p.isMeshNormalMaterial&&!0===p.flatShading)for(var n=0,a=3*d.count;n<a;n+=9){var o=d.normalArray,s=(o[n+0]+o[n+3]+o[n+6])/3,c=(o[n+1]+o[n+4]+o[n+7])/3,u=(o[n+2]+o[n+5]+o[n+8])/3;o[n+0]=s,o[n+1]=c,o[n+2]=u,o[n+3]=s,o[n+4]=c,o[n+5]=u,o[n+6]=s,o[n+7]=c,o[n+8]=u}Qe.bufferData(Qe.ARRAY_BUFFER,d.normalArray,Qe.DYNAMIC_DRAW),We.enableAttribute(r.normal),Qe.vertexAttribPointer(r.normal,3,Qe.FLOAT,!1,0,0)}d.hasUvs&&p.map&&(Qe.bindBuffer(Qe.ARRAY_BUFFER,i.uv),Qe.bufferData(Qe.ARRAY_BUFFER,d.uvArray,Qe.DYNAMIC_DRAW),We.enableAttribute(r.uv),Qe.vertexAttribPointer(r.uv,2,Qe.FLOAT,!1,0,0)),d.hasColors&&p.vertexColors!==sp&&(Qe.bindBuffer(Qe.ARRAY_BUFFER,i.color),Qe.bufferData(Qe.ARRAY_BUFFER,d.colorArray,Qe.DYNAMIC_DRAW),We.enableAttribute(r.color),Qe.vertexAttribPointer(r.color,3,Qe.FLOAT,!1,0,0)),We.disableUnusedAttributes(),Qe.drawArrays(Qe.TRIANGLES,0,d.count),d.count=0},this.renderBufferDirect=function(i,f,A,r,n,a){var o=n.isMesh&&0>n.matrixWorld.determinant();We.setMaterial(r,o);var s=Z(i,f,r,n),c=A.id+"_"+s.id+"_"+(!0===r.wireframe),h=!1;c!==xe&&(xe=c,h=!0),n.morphTargetInfluences&&(ot.update(n,A,r,s),h=!0);var l=A.index,u=A.attributes.position,p=1;!0===r.wireframe&&(l=Je.getWireframeAttribute(A),p=2);var d=nt,M;null!==l&&(M=Ze.get(l),d=st,d.setIndex(M)),h&&(X(r,s,A),null!==l&&Qe.bindBuffer(Qe.ELEMENT_ARRAY_BUFFER,M.buffer));var m=1/0;null===l?void 0!==u&&(m=u.count):m=l.count;var g=A.drawRange.start*p,y=A.drawRange.count*p,x=null===a?0:a.start*p,v=null===a?1/0:a.count*p,b=C(g,x),L=O(m,g+y,x+v)-1,E=C(0,L-b+1);if(0!==E){if(n.isMesh){if(!0===r.wireframe)We.setLineWidth(r.wireframeLinewidth*t()),d.setMode(Qe.LINES);else switch(n.drawMode){case Op:d.setMode(Qe.TRIANGLES);break;case Ks:d.setMode(Qe.TRIANGLE_STRIP);break;case $s:d.setMode(Qe.TRIANGLE_FAN);}}else if(n.isLine){var T=r.linewidth;void 0===T&&(T=1),We.setLineWidth(T*t()),n.isLineSegments?d.setMode(Qe.LINES):n.isLineLoop?d.setMode(Qe.LINE_LOOP):d.setMode(Qe.LINE_STRIP)}else n.isPoints&&d.setMode(Qe.POINTS);A&&A.isInstancedBufferGeometry?0<A.maxInstancedCount&&d.renderInstances(A,b,E):d.render(b,E)}},this.compile=function(r,t){J=rt.get(r,t),J.init(),r.traverse(function(r){r.isLight&&(J.pushLight(r),r.castShadow&&J.pushShadow(r))}),J.setupLights(t),r.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var a=0;a<t.material.length;a++)_(t.material[a],r.fog,t);else _(t.material,r.fog,t)})};var te=!1,ee=null;this.animate=function(r){ee=r,null===ee?u():d()},this.render=function(l,t,d,i){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!K){xe="",Me=-1,Ee=null,!0===l.autoUpdate&&l.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),pt.enabled&&(t=pt.getCamera(t)),J=rt.get(l,t),J.init(),l.onBeforeRender(Q,l,t,d),Pe.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),ze.setFromMatrix(Pe),Ue=this.localClippingEnabled,Be=Re.init(this.clippingPlanes,Ue,t),ge=tt.get(l,t),ge.init(),y(l,t,Q.sortObjects),!0===Q.sortObjects&&ge.sort(),Be&&Re.beginShadows();var r=J.state.shadowsArray;ut.render(r,l,t),J.setupLights(t),Be&&Re.endShadows(),this.info.autoReset&&this.info.reset(),void 0===d&&(d=null),this.setRenderTarget(d),at.render(ge,l,t,i);var n=ge.opaque,a=ge.transparent;if(l.overrideMaterial){var o=l.overrideMaterial;n.length&&f(n,l,t,o),a.length&&f(a,l,t,o)}else n.length&&f(n,l,t),a.length&&f(a,l,t);var s=J.state.spritesArray;lt.render(s,l,t),d&&qe.updateRenderTargetMipmap(d),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1),l.onAfterRender(Q,l,t),pt.enabled&&pt.submitFrame(),ge=null,J=null}},this.allocTextureUnit=function(){var r=we;return r>=Ye.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+r+" texture units while this GPU supports only "+Ye.maxTextures),we+=1,r},this.setTexture2D=function(){var r=!1;return function(t,a){t&&t.isWebGLRenderTarget&&(r||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),r=!0),t=t.texture),qe.setTexture2D(t,a)}}(),this.setTexture=function(){var r=!1;return function(t,a){r||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),r=!0),qe.setTexture2D(t,a)}}(),this.setTextureCube=function(){var r=!1;return function(t,a){t&&t.isWebGLRenderTargetCube&&(r||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),r=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?qe.setTextureCube(t,a):qe.setTextureCubeDynamic(t,a)}}(),this.getRenderTarget=function(){return ye},this.setRenderTarget=function(a){ye=a,a&&void 0===Xe.get(a).__webglFramebuffer&&qe.setupRenderTarget(a);var t=null,o=!1;if(a){var i=Xe.get(a).__webglFramebuffer;a.isWebGLRenderTargetCube?(t=i[a.activeCubeFace],o=!0):t=i,Le.copy(a.viewport),De.copy(a.scissor),Ne=a.scissorTest}else Le.copy(_e).multiplyScalar(Ie),De.copy(je).multiplyScalar(Ie),Ne=Oe;if(Ae!==t&&(Qe.bindFramebuffer(Qe.FRAMEBUFFER,t),Ae=t),We.viewport(Le),We.scissor(De),We.setScissorTest(Ne),o){var r=Xe.get(a.texture);Qe.framebufferTexture2D(Qe.FRAMEBUFFER,Qe.COLOR_ATTACHMENT0,Qe.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,r.__webglTexture,a.activeMipMapLevel)}},this.readRenderTargetPixels=function(d,p,u,i,r,n){if(!d||!d.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Xe.get(d).__webglFramebuffer;if(a){var o=!1;a!==Ae&&(Qe.bindFramebuffer(Qe.FRAMEBUFFER,a),o=!0);try{var s=d.texture,c=s.format,m=s.type;if(c!==_p&&ct.convert(c)!==Qe.getParameter(Qe.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(m===Ip||ct.convert(m)===Qe.getParameter(Qe.IMPLEMENTATION_COLOR_READ_TYPE)||m===ps&&(Ve.get("OES_texture_float")||Ve.get("WEBGL_color_buffer_float"))||m===ds&&Ve.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");Qe.checkFramebufferStatus(Qe.FRAMEBUFFER)===Qe.FRAMEBUFFER_COMPLETE?0<=p&&p<=d.width-i&&0<=u&&u<=d.height-r&&Qe.readPixels(p,u,i,r,ct.convert(c),ct.convert(m),n):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&Qe.bindFramebuffer(Qe.FRAMEBUFFER,Ae)}}},this.copyFramebufferToTexture=function(o,t,s){var i=t.image.width,r=t.image.height,n=ct.convert(t.format);this.setTexture2D(t,0),Qe.copyTexImage2D(Qe.TEXTURE_2D,s||0,n,o.x,o.y,i,r,0)}}function we(r,t){this.name="",this.color=new X(r),this.density=void 0===t?25e-5:t}function Me(r,t,a){this.name="",this.color=new X(r),this.near=void 0===t?1:t,this.far=void 0===a?1e3:a}function Ee(){ot.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function $t(r){Z.call(this),this.type="SpriteMaterial",this.color=new X(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(r)}function ll(r){ot.call(this),this.type="Sprite",this.material=void 0===r?new $t:r,this.center=new Aa(.5,.5)}function dl(){ot.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function cl(r,t){if(r=r||[],this.bones=r.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var a=0,o=this.bones.length;a<o;a++)this.boneInverses.push(new Ma)}}function Re(){ot.call(this),this.type="Bone"}function pl(r,t){Ot.call(this,r,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ma,this.bindMatrixInverse=new Ma;var a=this.initBones(),o=new cl(a);this.bind(o,this.matrixWorld),this.normalizeSkinWeights()}function ul(r){Z.call(this),this.type="LineBasicMaterial",this.color=new X(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(r)}function ml(r,t,a){return 1===a?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new gl(r,t)):void(ot.call(this),this.type="Line",this.geometry=void 0===r?new Mt:r,this.material=void 0===t?new ul({color:16777215*Math.random()}):t)}function gl(r,t){ml.call(this,r,t),this.type="LineSegments"}function hl(r,t){ml.call(this,r,t),this.type="LineLoop"}function yl(r){Z.call(this),this.type="PointsMaterial",this.color=new X(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(r)}function fl(r,t){ot.call(this),this.type="Points",this.geometry=void 0===r?new Mt:r,this.material=void 0===t?new yl({color:16777215*Math.random()}):t}function Al(){ot.call(this),this.type="Group"}function Ml(s,t,l,i,r,n,a,o,d){Ta.call(this,s,t,l,i,r,n,a,o,d),this.generateMipmaps=!1}function xl(s,t,d,m,r,n,a,o,c,g,l,u){Ta.call(this,null,n,a,o,c,g,m,r,l,u),this.image={width:t,height:d},this.mipmaps=s,this.flipY=!1,this.generateMipmaps=!1}function Ge(s,d,p,i,r,n,a,o,c,u){if((u=void 0===u?Ms:u)!==Ms&&u!==Ts)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&u===Ms&&(p=hs),void 0===p&&u===Ts&&(p=gs),Ta.call(this,null,i,r,n,a,o,u,p,c),this.image={width:s,height:d},this.magFilter=void 0===a?Lp:a,this.minFilter=void 0===o?Lp:o,this.flipY=!1,this.generateMipmaps=!1}function He(a){Mt.call(this),this.type="WireframeGeometry";var t=[],p=[0,0],d={},f=["a","b","c"],m,A,i,r,n,o,s,c,h,l;if(a&&a.isGeometry){var u=a.faces;for(m=0,i=u.length;m<i;m++){var v=u[m];for(A=0;3>A;A++)s=v[f[A]],c=v[f[(A+1)%3]],p[0]=O(s,c),p[1]=C(s,c),h=p[0]+","+p[1],void 0===d[h]&&(d[h]={index1:p[0],index2:p[1]})}for(h in d)o=d[h],l=a.vertices[o.index1],t.push(l.x,l.y,l.z),l=a.vertices[o.index2],t.push(l.x,l.y,l.z)}else if(a&&a.isBufferGeometry){var g,y,x,b,L,D,M,E;if(l=new Ea,null!==a.index){for(g=a.attributes.position,y=a.index,x=a.groups,0===x.length&&(x=[{start:0,count:y.count,materialIndex:0}]),r=0,n=x.length;r<n;++r)for(b=x[r],L=b.start,D=b.count,m=L,i=L+D;m<i;m+=3)for(A=0;3>A;A++)s=y.getX(m+A),c=y.getX(m+(A+1)%3),p[0]=O(s,c),p[1]=C(s,c),h=p[0]+","+p[1],void 0===d[h]&&(d[h]={index1:p[0],index2:p[1]});for(h in d)o=d[h],l.fromBufferAttribute(g,o.index1),t.push(l.x,l.y,l.z),l.fromBufferAttribute(g,o.index2),t.push(l.x,l.y,l.z)}else for(g=a.attributes.position,m=0,i=g.count/3;m<i;m++)for(A=0;3>A;A++)M=3*m+A,l.fromBufferAttribute(g,M),t.push(l.x,l.y,l.z),E=3*m+(A+1)%3,l.fromBufferAttribute(g,E),t.push(l.x,l.y,l.z)}this.addAttribute("position",new xt(t,3))}function El(r,a,o){lt.call(this),this.type="ParametricGeometry",this.parameters={func:r,slices:a,stacks:o},this.fromBufferGeometry(new vl(r,a,o)),this.mergeVertices()}function vl(a,A,M){Mt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:a,slices:A,stacks:M};var E=[],o=[],s=[],c=[],h=new Ea,l=new Ea,u=new Ea,p=new Ea,d=new Ea,f=A+1,m,r;for(m=0;m<=M;m++){var n=m/M;for(r=0;r<=A;r++){var v=r/A;l=a(v,n,l),o.push(l.x,l.y,l.z),0<=v-1e-5?(u=a(v-1e-5,n,u),p.subVectors(l,u)):(u=a(v+1e-5,n,u),p.subVectors(u,l)),0<=n-1e-5?(u=a(v,n-1e-5,u),d.subVectors(l,u)):(u=a(v,n+1e-5,u),d.subVectors(u,l)),h.crossVectors(p,d).normalize(),s.push(h.x,h.y,h.z),c.push(v,n)}}for(m=0;m<M;m++)for(r=0;r<A;r++){var g=m*f+r,y=m*f+r+1,x=(m+1)*f+r+1,T=(m+1)*f+r;E.push(g,y,T),E.push(y,x,T)}this.setIndex(E),this.addAttribute("position",new xt(o,3)),this.addAttribute("normal",new xt(s,3)),this.addAttribute("uv",new xt(c,2))}function Tl(a,o,n,s){lt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:a,indices:o,radius:n,detail:s},this.fromBufferGeometry(new bl(a,o,n,s)),this.mergeVertices()}function bl(a,g,i,y){function M(d,t,c,i){var r=A(2,i),m=[],s,n;for(s=0;s<=r;s++){m[s]=[];var a=d.clone().lerp(c,s/r),g=t.clone().lerp(c,s/r),l=r-s;for(n=0;n<=l;n++)m[s][n]=0===n&&s===r?a:a.clone().lerp(g,n/l)}for(s=0;s<r;s++)for(n=0;n<2*(r-s)-1;n++){var u=D(n/2);0==n%2?(x(m[s][u+1]),x(m[s+1][u]),x(m[s][u])):(x(m[s][u+1]),x(m[s+1][u+1]),x(m[s+1][u]))}}function o(){for(var o=0;o<f.length;o+=6){var t=f[o+0],s=f[o+2],i=f[o+4],r=C(t,s,i),n=O(t,s,i);.9<r&&.1>n&&(.2>t&&(f[o+0]+=1),.2>s&&(f[o+2]+=1),.2>i&&(f[o+4]+=1))}}function x(r){p.push(r.x,r.y,r.z)}function c(t,o){var n=3*t;o.x=a[n+0],o.y=a[n+1],o.z=a[n+2]}function s(){for(var a=new Ea,t=new Ea,i=new Ea,r=new Ea,n=new Aa,o=new Aa,s=new Aa,c=0,m=0;c<p.length;c+=9,m+=6){a.set(p[c+0],p[c+1],p[c+2]),t.set(p[c+3],p[c+4],p[c+5]),i.set(p[c+6],p[c+7],p[c+8]),n.set(f[m+0],f[m+1]),o.set(f[m+2],f[m+3]),s.set(f[m+4],f[m+5]),r.copy(a).add(t).add(i).divideScalar(3);var g=u(r);E(n,m+0,a,g),E(o,m+2,t,g),E(s,m+4,i,g)}}function E(a,t,o,n){0>n&&1===a.x&&(f[t]=a.x-1),0===o.x&&0===o.z&&(f[t]=n/2/ga+.5)}function u(r){return ap(r.z,-r.x)}function l(r){return ap(-r.y,S(r.x*r.x+r.z*r.z))}Mt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:a,indices:g,radius:i,detail:y},i=i||1,y=y||0;var p=[],f=[];!function(a){for(var t=new Ea,o=new Ea,r=new Ea,n=0;n<g.length;n+=3)c(g[n+0],t),c(g[n+1],o),c(g[n+2],r),M(t,o,r,a)}(y),function(r){for(var t=new Ea,a=0;a<p.length;a+=3)t.x=p[a+0],t.y=p[a+1],t.z=p[a+2],t.normalize().multiplyScalar(r),p[a+0]=t.x,p[a+1]=t.y,p[a+2]=t.z}(i),function(){for(var a=new Ea,t=0;t<p.length;t+=3){a.x=p[t+0],a.y=p[t+1],a.z=p[t+2];var n=u(a)/2/ga+.5,i=l(a)/ga+.5;f.push(n,1-i)}s(),o()}(),this.addAttribute("position",new xt(p,3)),this.addAttribute("normal",new xt(p.slice(),3)),this.addAttribute("uv",new xt(f,2)),0===y?this.computeVertexNormals():this.normalizeNormals()}function Ll(r,a){lt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new Dl(r,a)),this.mergeVertices()}function Dl(r,a){bl.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,a),this.type="TetrahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Nl(r,a){lt.call(this),this.type="OctahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new wl(r,a)),this.mergeVertices()}function wl(r,a){bl.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,a),this.type="OctahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Cl(r,a){lt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new Sl(r,a)),this.mergeVertices()}function Sl(r,a){var o=(1+2.23606797749979)/2;bl.call(this,[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,a),this.type="IcosahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Il(r,a){lt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new _l(r,a)),this.mergeVertices()}function _l(a,o){var n=(1+2.23606797749979)/2,s=1/n;bl.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-n,0,-s,n,0,s,-n,0,s,n,-s,-n,0,-s,n,0,s,-n,0,s,n,0,-n,0,-s,n,0,-s,-n,0,s,n,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],a,o),this.type="DodecahedronBufferGeometry",this.parameters={radius:a,detail:o}}function jl(s,l,d,c,p,u){lt.call(this),this.type="TubeGeometry",this.parameters={path:s,tubularSegments:l,radius:d,radialSegments:c,closed:p},void 0!==u&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Ol(s,l,d,c,p);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Ol(A,M,i,E,a){function T(t){m=A.getPointAt(t/M,m);var r=L.normals[t],a=L.binormals[t];for(u=0;u<=E;u++){var o=2*(u/E*ga),n=z(o),c=-I(o);d.x=c*r.x+n*a.x,d.y=c*r.y+n*a.y,d.z=c*r.z+n*a.z,d.normalize(),g.push(d.x,d.y,d.z),l.x=m.x+i*d.x,l.y=m.y+i*d.y,l.z=m.z+i*d.z,f.push(l.x,l.y,l.z)}}function s(){for(u=1;u<=M;u++)for(v=1;v<=E;v++){var o=(E+1)*(u-1)+(v-1),t=(E+1)*u+(v-1),n=(E+1)*u+v,r=(E+1)*(u-1)+v;x.push(o,t,r),x.push(t,n,r)}}function c(){for(v=0;v<=M;v++)for(u=0;u<=E;u++)h.x=v/M,h.y=u/E,y.push(h.x,h.y)}Mt.call(this),this.type="TubeBufferGeometry",this.parameters={path:A,tubularSegments:M,radius:i,radialSegments:E,closed:a},M=M||64,i=i||1,E=E||8,a=a||!1;var L=A.computeFrenetFrames(M,a);this.tangents=L.tangents,this.normals=L.normals,this.binormals=L.binormals;var l=new Ea,d=new Ea,h=new Aa,m=new Ea,f=[],g=[],y=[],x=[],v,u;!function(){for(v=0;v<M;v++)T(v);T(!1===a?M:0),c(),s()}(),this.setIndex(x),this.addAttribute("position",new xt(f,3)),this.addAttribute("normal",new xt(g,3)),this.addAttribute("uv",new xt(y,2))}function zl(s,l,d,c,p,u,m){lt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:s,tube:l,tubularSegments:d,radialSegments:c,p:p,q:u},void 0!==m&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Rl(s,l,d,c,p,u)),this.mergeVertices()}function Rl(a,N,C,j,O,R){function B(l,t,d,i,r){var n=I(l),a=z(l),o=d/t*l,p=I(o);r.x=.5*(i*(2+p))*n,r.y=.5*(i*(2+p)*a),r.z=.5*(i*z(o))}Mt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:a,tube:N,tubularSegments:C,radialSegments:j,p:O,q:R},a=a||1,N=N||.4,C=D(C)||64,j=D(j)||8,O=O||2,R=R||3;var s=[],l=[],u=[],p=[],d=new Ea,f=new Ea,m=new Ea,v=new Ea,g=new Ea,y=new Ea,x=new Ea,b,c;for(b=0;b<=C;++b){var h=2*(b/C*O*ga);for(B(h,O,R,a,m),B(h+.01,O,R,a,v),y.subVectors(v,m),x.addVectors(v,m),g.crossVectors(y,x),x.crossVectors(g,y),g.normalize(),x.normalize(),c=0;c<=j;++c){var _=2*(c/j*ga),w=-N*I(_),M=N*z(_);d.x=m.x+(w*x.x+M*g.x),d.y=m.y+(w*x.y+M*g.y),d.z=m.z+(w*x.z+M*g.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),u.push(f.x,f.y,f.z),p.push(b/C),p.push(c/j)}}for(c=1;c<=C;c++)for(b=1;b<=j;b++){var E=(j+1)*(c-1)+(b-1),T=(j+1)*c+(b-1),S=(j+1)*c+b,A=(j+1)*(c-1)+b;s.push(E,T,A),s.push(T,S,A)}this.setIndex(s),this.addAttribute("position",new xt(l,3)),this.addAttribute("normal",new xt(u,3)),this.addAttribute("uv",new xt(p,2))}function Bl(a,o,s,l,d){lt.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:o,radialSegments:s,tubularSegments:l,arc:d},this.fromBufferGeometry(new Ul(a,o,s,l,d)),this.mergeVertices()}function Ul(a,A,M,E,T){Mt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:a,tube:A,radialSegments:M,tubularSegments:E,arc:T},a=a||1,A=A||.4,M=D(M)||8,E=D(E)||6,T=T||2*ga;var L=[],c=[],h=[],l=[],u=new Ea,p=new Ea,d=new Ea,f,o;for(f=0;f<=M;f++)for(o=0;o<=E;o++){var s=o/E*T,m=2*(f/M*ga);p.x=(a+A*I(m))*I(s),p.y=(a+A*I(m))*z(s),p.z=A*z(m),c.push(p.x,p.y,p.z),u.x=a*I(s),u.y=a*z(s),d.subVectors(p,u).normalize(),h.push(d.x,d.y,d.z),l.push(o/E),l.push(f/M)}for(f=1;f<=M;f++)for(o=1;o<=E;o++){var v=(E+1)*f+o-1,g=(E+1)*(f-1)+o-1,y=(E+1)*(f-1)+o,x=(E+1)*f+o;L.push(v,g,x),L.push(g,y,x)}this.setIndex(L),this.addAttribute("position",new xt(c,3)),this.addAttribute("normal",new xt(h,3)),this.addAttribute("uv",new xt(l,2))}function Pl(s,t,l,i,r){var n,a;if(r===0<Oi(s,t,l,i))for(n=t;n<l;n+=i)a=Ci(n,s[n],s[n+1],a);else for(n=l-i;n>=t;n-=i)a=Ci(n,s[n],s[n+1],a);return a&&Ei(a,a.next)&&(Pi(a),a=a.next),a}function si(a,o){if(!a)return a;o||(o=a);var n=a,r;do if(r=!1,n.steiner||!Ei(n,n.next)&&0!==Mi(n.prev,n,n.next))n=n.next;else{if(Pi(n),(n=o=n.prev)===n.next)break;r=!0}while(r||n!==o);return o}function ci(l,t,d,i,r,n,a){if(l){!a&&n&&gi(l,i,r,n);for(var p=l,u,s;l.prev!==l.next;)if(u=l.prev,s=l.next,n?li(l,i,r,n):hi(l))t.push(u.i/d),t.push(l.i/d),t.push(s.i/d),Pi(l),l=s.next,p=s.next;else if((l=s)===p){a?1===a?(l=ui(l,t,d),ci(l,t,d,i,r,n,2)):2===a&&pi(l,t,d,i,r,n):ci(si(l),t,d,i,r,n,1);break}}}function hi(a){var t=a.prev,o=a,i=a.next;if(0<=Mi(t,o,i))return!1;for(var r=a.next.next;r!==a.prev;){if(_i(t.x,t.y,o.x,o.y,i.x,i.y,r.x,r.y)&&0<=Mi(r.prev,r,r.next))return!1;r=r.next}return!0}function li(m,t,g,i){var r=m.prev,n=m,a=m.next;if(0<=Mi(r,n,a))return!1;for(var o=r.x<n.x?r.x<a.x?r.x:a.x:n.x<a.x?n.x:a.x,s=r.y<n.y?r.y<a.y?r.y:a.y:n.y<a.y?n.y:a.y,c=r.x>n.x?r.x>a.x?r.x:a.x:n.x>a.x?n.x:a.x,h=r.y>n.y?r.y>a.y?r.y:a.y:n.y>a.y?n.y:a.y,l=xi(o,s,t,g,i),u=xi(c,h,t,g,i),p=m.nextZ;p&&p.z<=u;){if(p!==m.prev&&p!==m.next&&_i(r.x,r.y,n.x,n.y,a.x,a.y,p.x,p.y)&&0<=Mi(p.prev,p,p.next))return!1;p=p.nextZ}for(p=m.prevZ;p&&p.z>=l;){if(p!==m.prev&&p!==m.next&&_i(r.x,r.y,n.x,n.y,a.x,a.y,p.x,p.y)&&0<=Mi(p.prev,p,p.next))return!1;p=p.prevZ}return!0}function ui(o,t,s){var i=o;do{var r=i.prev,n=i.next.next;!Ei(r,n)&&Ti(r,i,i.next,n)&&Ai(r,n)&&Ai(n,r)&&(t.push(r.i/s),t.push(i.i/s),t.push(n.i/s),Pi(i),Pi(i.next),i=o=n),i=i.next}while(i!==o);return i}function pi(l,t,d,i,r,n){var a=l;do{for(var o=a.next.next;o!==a.prev;){if(a.i!==o.i&&wi(a,o)){var s=Ri(a,o);return a=si(a,a.next),s=si(s,s.next),ci(a,t,d,i,r,n),void ci(s,t,d,i,r,n)}o=o.next}a=a.next}while(a!==l)}function di(l,t,d,i){var r=[],p,n,a,o,s;for(p=0,n=t.length;p<n;p++)a=t[p]*i,o=p<n-1?t[p+1]*i:l.length,s=Pl(l,a,o,i,!1),s===s.next&&(s.steiner=!0),r.push(bi(s));for(r.sort(fi),p=0;p<r.length;p++)mi(r[p],d),d=si(d,d.next);return d}function fi(r,t){return r.x-t.x}function mi(r,t){if(t=vi(r,t)){var a=Ri(t,r);si(a,a.next)}}function vi(d,t){var m=t,r=d.x,n=d.y,a=-1/0,o;do{if(n<=m.y&&n>=m.next.y&&m.next.y!==m.y){var g=m.x+(n-m.y)*(m.next.x-m.x)/(m.next.y-m.y);if(g<=r&&g>a){if(a=g,g===r){if(n===m.y)return m;if(n===m.next.y)return m.next}o=m.x<m.next.x?m:m.next}}m=m.next}while(m!==t);if(!o)return null;if(r===a)return o.prev;var s=o,h=o.x,l=o.y,u=1/0,p;for(m=o.next;m!==s;)r>=m.x&&m.x>=h&&r!==m.x&&_i(n<l?r:a,n,h,l,n<l?a:r,n,m.x,m.y)&&((p=T(n-m.y)/(r-m.x))<u||p===u&&m.x>o.x)&&Ai(m,d)&&(o=m,u=p),m=m.next;return o}function gi(a,t,o,i){var r=a;do null===r.z&&(r.z=xi(r.x,r.y,t,o,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,yi(r)}function yi(l){var t=1,d,p,i,u,n,a,o,s;do{for(p=l,l=null,n=null,a=0;p;){for(a++,i=p,o=0,d=0;d<t&&(o++,i=i.nextZ);d++);for(s=t;0<o||0<s&&i;)0!==o&&(0===s||!i||p.z<=i.z)?(u=p,p=p.nextZ,o--):(u=i,i=i.nextZ,s--),n?n.nextZ=u:l=u,u.prevZ=n,n=u;p=i}n.nextZ=null,t*=2}while(1<a);return l}function xi(a,t,o,i,r){return a=32767*(a-o)*r,t=32767*(t-i)*r,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),a|t<<1}function bi(r){var t=r,a=r;do t.x<a.x&&(a=t),t=t.next;while(t!==r);return a}function _i(l,t,d,i,r,n,a,o){return 0<=(r-a)*(t-o)-(l-a)*(n-o)&&0<=(l-a)*(i-o)-(d-a)*(t-o)&&0<=(d-a)*(n-o)-(r-a)*(i-o)}function wi(r,t){return r.next.i!==t.i&&r.prev.i!==t.i&&!Si(r,t)&&Ai(r,t)&&Ai(t,r)&&Li(r,t)}function Mi(r,t,a){return(t.y-r.y)*(a.x-t.x)-(t.x-r.x)*(a.y-t.y)}function Ei(r,t){return r.x===t.x&&r.y===t.y}function Ti(a,t,o,n){return!!(Ei(a,t)&&Ei(o,n)||Ei(a,n)&&Ei(o,t))||0<Mi(a,t,o)!=0<Mi(a,t,n)&&0<Mi(o,n,a)!=0<Mi(o,n,t)}function Si(r,t){var a=r;do{if(a.i!==r.i&&a.next.i!==r.i&&a.i!==t.i&&a.next.i!==t.i&&Ti(a,a.next,r,t))return!0;a=a.next}while(a!==r);return!1}function Ai(r,t){return 0>Mi(r.prev,r,r.next)?0<=Mi(r,t,r.next)&&0<=Mi(r,r.prev,t):0>Mi(r,t,r.prev)||0>Mi(r,r.next,t)}function Li(o,t){var s=o,i=!1,l=(o.x+t.x)/2,n=(o.y+t.y)/2;do s.y>n!=s.next.y>n&&s.next.y!==s.y&&l<(s.next.x-s.x)*(n-s.y)/(s.next.y-s.y)+s.x&&(i=!i),s=s.next;while(s!==o);return i}function Ri(o,t){var s=new Ii(o.i,o.x,o.y),i=new Ii(t.i,t.x,t.y),r=o.next,n=t.prev;return o.next=t,t.prev=o,s.next=r,r.prev=s,i.next=s,s.prev=i,n.next=i,i.prev=n,i}function Ci(a,t,o,i){var r=new Ii(a,t,o);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Pi(r){r.next.prev=r.prev,r.prev.next=r.next,r.prevZ&&(r.prevZ.nextZ=r.nextZ),r.nextZ&&(r.nextZ.prevZ=r.prevZ)}function Ii(r,t,a){this.i=r,this.x=t,this.y=a,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Oi(s,t,l,i){for(var r=0,n=t,a=l-i;n<l;n+=i)r+=(s[a]-s[n])*(s[n+1]+s[a+1]),a=n;return r}function Ni(r){var t=r.length;2<t&&r[t-1].equals(r[0])&&r.pop()}function Ui(r,t){for(var a=0;a<t.length;a++)r.push(t[a].x),r.push(t[a].y)}function Di(r,a){lt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:a},this.fromBufferGeometry(new kl(r,a)),this.mergeVertices()}function kl(r,t){void 0!==r&&(Mt.call(this),this.type="ExtrudeBufferGeometry",r=Array.isArray(r)?r:[r],this.addShapeList(r,t),this.computeVertexNormals())}function Fl(r,a){lt.call(this),this.type="TextGeometry",this.parameters={text:r,parameters:a},this.fromBufferGeometry(new Gl(r,a)),this.mergeVertices()}function Gl(a,t){t=t||{};var o=t.font;if(!o||!o.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new lt;var n=o.generateShapes(a,t.size,t.curveSegments);t.amount=void 0===t.height?50:t.height,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),kl.call(this,n,t),this.type="TextBufferGeometry"}function Ql(s,l,d,c,p,u,m){lt.call(this),this.type="SphereGeometry",this.parameters={radius:s,widthSegments:l,heightSegments:d,phiStart:c,phiLength:p,thetaStart:u,thetaLength:m},this.fromBufferGeometry(new Hl(s,l,d,c,p,u,m)),this.mergeVertices()}function Hl(a,A,L,N,S,j,O){Mt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:a,widthSegments:A,heightSegments:L,phiStart:N,phiLength:S,thetaStart:j,thetaLength:O},a=a||1,A=C(3,D(A)||8),L=C(2,D(L)||6),N=void 0===N?0:N,S=void 0===S?2*ga:S,j=void 0===j?0:j,O=void 0===O?ga:O;var R=j+O,l=0,u=[],p=new Ea,d=new Ea,f=[],m=[],v=[],g=[],y,c;for(c=0;c<=L;c++){var h=[],x=c/L;for(y=0;y<=A;y++){var b=y/A;p.x=-a*I(N+b*S)*z(j+x*O),p.y=a*I(j+x*O),p.z=a*z(N+b*S)*z(j+x*O),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),v.push(d.x,d.y,d.z),g.push(b,1-x),h.push(l++)}u.push(h)}for(c=0;c<L;c++)for(y=0;y<A;y++){var _=u[c][y+1],w=u[c][y],M=u[c+1][y],E=u[c+1][y+1];(0!==c||0<j)&&f.push(_,w,E),(c!==L-1||R<ga)&&f.push(w,M,E)}this.setIndex(f),this.addAttribute("position",new xt(m,3)),this.addAttribute("normal",new xt(v,3)),this.addAttribute("uv",new xt(g,2))}function Vl(o,s,l,d,c,p){lt.call(this),this.type="RingGeometry",this.parameters={innerRadius:o,outerRadius:s,thetaSegments:l,phiSegments:d,thetaStart:c,thetaLength:p},this.fromBufferGeometry(new Yl(o,s,l,d,c,p)),this.mergeVertices()}function Yl(a,i,A,E,T,L){Mt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:a,outerRadius:i,thetaSegments:A,phiSegments:E,thetaStart:T,thetaLength:L},a=a||.5,i=i||1,T=void 0===T?0:T,L=void 0===L?2*ga:L,A=void 0===A?8:C(3,A),E=void 0===E?1:C(1,E);var D=[],u=[],p=[],d=[],f=a,m=(i-a)/E,v=new Ea,g=new Aa,y,c,h;for(c=0;c<=E;c++){for(h=0;h<=A;h++)y=T+h/A*L,v.x=f*I(y),v.y=f*z(y),u.push(v.x,v.y,v.z),p.push(0,0,1),g.x=(v.x/i+1)/2,g.y=(v.y/i+1)/2,d.push(g.x,g.y);f+=m}for(c=0;c<E;c++){var l=c*(A+1);for(h=0;h<A;h++){y=h+l;var x=y,b=y+A+1,N=y+A+2,w=y+1;D.push(x,b,w),D.push(b,N,w)}}this.setIndex(D),this.addAttribute("position",new xt(u,3)),this.addAttribute("normal",new xt(p,3)),this.addAttribute("uv",new xt(d,2))}function Wl(a,o,n,s){lt.call(this),this.type="LatheGeometry",this.parameters={points:a,segments:o,phiStart:n,phiLength:s},this.fromBufferGeometry(new Xl(a,o,n,s)),this.mergeVertices()}function Xl(a,i,A,L){Mt.call(this),this.type="LatheBufferGeometry",this.parameters={points:a,segments:i,phiStart:A,phiLength:L},i=D(i)||12,A=A||0,L=L||2*ga,L=zp.clamp(L,0,2*ga);var N=[],h=[],l=[],u=1/i,p=new Ea,d=new Aa,f,o,s;for(o=0;o<=i;o++){var c=A+o*u*L,m=z(c),v=I(c);for(s=0;s<=a.length-1;s++)p.x=a[s].x*m,p.y=a[s].y,p.z=a[s].x*v,h.push(p.x,p.y,p.z),d.x=o/i,d.y=s/(a.length-1),l.push(d.x,d.y)}for(o=0;o<i;o++)for(s=0;s<a.length-1;s++){f=s+o*a.length;var g=f,y=f+a.length,x=f+a.length+1,b=f+1;N.push(g,y,b),N.push(y,x,b)}if(this.setIndex(N),this.addAttribute("position",new xt(h,3)),this.addAttribute("uv",new xt(l,2)),this.computeVertexNormals(),L===2*ga){var C=this.attributes.normal.array,w=new Ea,M=new Ea,E=new Ea;for(f=3*(i*a.length),o=0,s=0;o<a.length;o++,s+=3)w.x=C[s+0],w.y=C[s+1],w.z=C[s+2],M.x=C[f+s+0],M.y=C[f+s+1],M.z=C[f+s+2],E.addVectors(w,M).normalize(),C[s+0]=C[f+s+0]=E.x,C[s+1]=C[f+s+1]=E.y,C[s+2]=C[f+s+2]=E.z}}function ql(r,a){lt.call(this),this.type="ShapeGeometry","object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),a=a.curveSegments),this.parameters={shapes:r,curveSegments:a},this.fromBufferGeometry(new Zl(r,a)),this.mergeVertices()}function Zl(l,A){function d(o){var t=r.length/3,l=o.extractPoints(A),c=l.shape,u=l.holes,d,M,E;if(!1===Cc.isClockWise(c))for(c=c.reverse(),d=0,M=u.length;d<M;d++)E=u[d],!0===Cc.isClockWise(E)&&(u[d]=E.reverse());var h=Cc.triangulateShape(c,u);for(d=0,M=u.length;d<M;d++)E=u[d],c=c.concat(E);for(d=0,M=c.length;d<M;d++){var f=c[d];r.push(f.x,f.y,0),n.push(0,0,1),a.push(f.x,f.y)}for(d=0,M=h.length;d<M;d++){var m=h[d],v=m[0]+t,g=m[1]+t,y=m[2]+t;p.push(v,g,y),s+=3}}Mt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:l,curveSegments:A},A=A||12;var p=[],r=[],n=[],a=[],o=0,s=0;if(!1===Array.isArray(l))d(l);else for(var i=0;i<l.length;i++)d(l[i]),this.addGroup(o,s,i),o+=s,s=0;this.setIndex(p),this.addAttribute("position",new xt(r,3)),this.addAttribute("normal",new xt(n,3)),this.addAttribute("uv",new xt(a,2))}function Jl(a,t){if(t.shapes=[],Array.isArray(a))for(var o=0,i=a.length,r;o<i;o++)r=a[o],t.shapes.push(r.uuid);else t.shapes.push(a.uuid);return t}function Zi(A,t){Mt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0===t?1:t;var M=[],o=I(zp.DEG2RAD*t),s=[0,0],c={},h=["a","b","c"],l,i,r,n;A.isBufferGeometry?(n=new lt,n.fromBufferGeometry(A)):n=A.clone(),n.mergeVertices(),n.computeFaceNormals();for(var a=n.vertices,u=n.faces,p=0,x=u.length;p<x;p++)for(var f=u[p],m=0;3>m;m++)l=f[h[m]],i=f[h[(m+1)%3]],s[0]=O(l,i),s[1]=C(l,i),r=s[0]+","+s[1],void 0===c[r]?c[r]={index1:s[0],index2:s[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var E=c[r];if(void 0===E.face2||u[E.face1].normal.dot(u[E.face2].normal)<=o){var g=a[E.index1];M.push(g.x,g.y,g.z),g=a[E.index2],M.push(g.x,g.y,g.z)}}this.addAttribute("position",new xt(M,3))}function Kl(l,d,c,p,u,m,g,h){lt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:l,radiusBottom:d,height:c,radialSegments:p,heightSegments:u,openEnded:m,thetaStart:g,thetaLength:h},this.fromBufferGeometry(new $l(l,d,c,p,u,m,g,h)),this.mergeVertices()}function $l(a,N,j,B,U,i,C,_){function A(t){var r=new Aa,n=new Ea,i=0,c=!0===t?a:N,g=!0===t?1:-1,h,o,s;for(o=m,h=1;h<=B;h++)p.push(0,O*g,0),d.push(0,g,0),f.push(.5,.5),m++;for(s=m,h=0;h<=B;h++){var M=h/B,x=M*_+C,E=I(x),v=z(x);n.x=c*v,n.y=O*g,n.z=c*E,p.push(n.x,n.y,n.z),d.push(0,g,0),r.x=.5*E+.5,r.y=.5*v*g+.5,f.push(r.x,r.y),m++}for(h=0;h<B;h++){var A=o+h,T=s+h;!0===t?u.push(T,T+1,A):u.push(T+1,T,A),i+=3}k.addGroup(y,i,!0===t?1:2),y+=i}Mt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:a,radiusBottom:N,height:j,radialSegments:B,heightSegments:U,openEnded:i,thetaStart:C,thetaLength:_};var k=this;a=void 0===a?1:a,N=void 0===N?1:N,j=j||1,B=D(B)||8,U=D(U)||1,i=void 0!==i&&i,C=void 0===C?0:C,_=void 0===_?2*ga:_;var u=[],p=[],d=[],f=[],m=0,v=[],O=j/2,y=0;!function(){var t=new Ea,r=new Ea,o=0,n=(N-a)/j,l,i;for(i=0;i<=U;i++){var s=[],c=i/U,g=c*(N-a)+a;for(l=0;l<=B;l++){var h=l/B,M=h*_+C,A=z(M),x=I(M);r.x=g*A,r.y=-c*j+O,r.z=g*x,p.push(r.x,r.y,r.z),t.set(A,n,x).normalize(),d.push(t.x,t.y,t.z),f.push(h,1-c),s.push(m++)}v.push(s)}for(l=0;l<B;l++)for(i=0;i<U;i++){var T=v[i][l],b=v[i+1][l],L=v[i+1][l+1],D=v[i][l+1];u.push(T,b,D),u.push(b,L,D),o+=6}k.addGroup(y,o,0),y+=o}(),!1===i&&(0<a&&A(!0),0<N&&A(!1)),this.setIndex(u),this.addAttribute("position",new xt(p,3)),this.addAttribute("normal",new xt(d,3)),this.addAttribute("uv",new xt(f,2))}function ed(s,l,d,c,p,u,m){Kl.call(this,0,s,l,d,c,p,u,m),this.type="ConeGeometry",this.parameters={radius:s,height:l,radialSegments:d,heightSegments:c,openEnded:p,thetaStart:u,thetaLength:m}}function td(s,l,d,c,p,u,m){$l.call(this,0,s,l,d,c,p,u,m),this.type="ConeBufferGeometry",this.parameters={radius:s,height:l,radialSegments:d,heightSegments:c,openEnded:p,thetaStart:u,thetaLength:m}}function rd(a,o,n,s){lt.call(this),this.type="CircleGeometry",this.parameters={radius:a,segments:o,thetaStart:n,thetaLength:s},this.fromBufferGeometry(new ad(a,o,n,s)),this.mergeVertices()}function ad(a,i,m,g){Mt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:a,segments:i,thetaStart:m,thetaLength:g},a=a||1,i=void 0===i?8:C(3,i),m=void 0===m?0:m,g=void 0===g?2*ga:g;var y=[],c=[],h=[],l=[],u=new Ea,p=new Aa,d,o;for(c.push(0,0,0),h.push(0,0,1),l.push(.5,.5),o=0,d=3;o<=i;o++,d+=3){var s=m+o/i*g;u.x=a*I(s),u.y=a*z(s),c.push(u.x,u.y,u.z),h.push(0,0,1),p.x=(c[d]/a+1)/2,p.y=(c[d+1]/a+1)/2,l.push(p.x,p.y)}for(d=1;d<=i;d++)y.push(d,d+1,0);this.setIndex(y),this.addAttribute("position",new xt(c,3)),this.addAttribute("normal",new xt(h,3)),this.addAttribute("uv",new xt(l,2))}function od(r){Z.call(this),this.type="ShadowMaterial",this.color=new X(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(r)}function nd(r){rl.call(this,r),this.type="RawShaderMaterial"}function id(r){Z.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new X(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Aa(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function sd(r){id.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(r)}function ld(r){Z.call(this),this.type="MeshPhongMaterial",this.color=new X(16777215),this.specular=new X(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Aa(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Do,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function dd(r){ld.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(r)}function cd(r){Z.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Aa(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function pd(r){Z.call(this),this.type="MeshLambertMaterial",this.color=new X(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new X(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Do,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function ud(r){ul.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}function md(l,t,d){var i=this,r=!1,n=0,a=0,o;this.onStart=void 0,this.onLoad=l,this.onProgress=t,this.onError=d,this.itemStart=function(o){a++,!1===r&&void 0!==i.onStart&&i.onStart(o,n,a),r=!0},this.itemEnd=function(o){n++,void 0!==i.onProgress&&i.onProgress(o,n,a),n===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(r){void 0!==i.onError&&i.onError(r)},this.resolveURL=function(r){return o?o(r):r},this.setURLModifier=function(r){return o=r,this}}function pr(r){this.manager=void 0===r?Nc:r}function dr(r){this.manager=void 0===r?Nc:r,this._parser=null}function fr(r){this.manager=void 0===r?Nc:r,this._parser=null}function mr(r){this.manager=void 0===r?Nc:r}function vr(r){this.manager=void 0===r?Nc:r}function gr(r){this.manager=void 0===r?Nc:r}function yr(){this.type="Curve",this.arcLengthDivisions=200}function xr(l,t,d,i,r,n,a,o){yr.call(this),this.type="EllipseCurve",this.aX=l||0,this.aY=t||0,this.xRadius=d||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=n||2*ga,this.aClockwise=a||!1,this.aRotation=o||0}function gd(o,t,s,i,r,n){xr.call(this,o,t,s,s,i,r,n),this.type="ArcCurve"}function hd(){function l(n,l,a,o){d=n,c=a,i=-3*n+3*l-2*a-o,r=2*n-2*l+a+o}var d=0,c=0,i=0,r=0;return{initCatmullRom:function(t,o,i,r,n){l(o,i,n*(i-t),n*(r-o))},initNonuniformCatmullRom:function(t,d,i,r,n,a,o){var s=(d-t)/n-(i-t)/(n+a)+(i-d)/a,c=(i-d)/a-(r-d)/(a+o)+(r-i)/o;s*=a,c*=a,l(d,i,s,c)},calc:function(o){var t=o*o;return d+c*o+i*t+r*(t*o)}}}function wr(a,t,o,n){yr.call(this),this.type="CatmullRomCurve3",this.points=a||[],this.closed=t||!1,this.curveType=o||"centripetal",this.tension=n||.5}function yd(l,t,d,i,r){var n=.5*(i-t),a=.5*(r-d),o=l*l;return(2*d-2*i+n+a)*(l*o)+(-3*d+3*i-2*n-a)*o+n*l+d}function Er(r,t){var a=1-r;return a*a*t}function Tr(r,t){return 2*(1-r)*r*t}function Sr(r,t){return r*r*t}function Ar(a,t,o,n){return Er(a,t)+Tr(a,o)+Sr(a,n)}function Lr(r,t){var a=1-r;return a*a*a*t}function Rr(r,t){var a=1-r;return 3*a*a*r*t}function Cr(r,t){return 3*(1-r)*r*r*t}function Pr(r,t){return r*r*r*t}function Ir(a,t,o,i,r){return Lr(a,t)+Rr(a,o)+Cr(a,i)+Pr(a,r)}function Or(a,t,o,r){yr.call(this),this.type="CubicBezierCurve",this.v0=a||new Aa,this.v1=t||new Aa,this.v2=o||new Aa,this.v3=r||new Aa}function fd(a,t,o,n){yr.call(this),this.type="CubicBezierCurve3",this.v0=a||new Ea,this.v1=t||new Ea,this.v2=o||new Ea,this.v3=n||new Ea}function Ad(r,t){yr.call(this),this.type="LineCurve",this.v1=r||new Aa,this.v2=t||new Aa}function Md(r,t){yr.call(this),this.type="LineCurve3",this.v1=r||new Ea,this.v2=t||new Ea}function xd(a,t,o){yr.call(this),this.type="QuadraticBezierCurve",this.v0=a||new Aa,this.v1=t||new Aa,this.v2=o||new Aa}function Ed(r,t,a){yr.call(this),this.type="QuadraticBezierCurve3",this.v0=r||new Ea,this.v1=t||new Ea,this.v2=a||new Ea}function vd(r){yr.call(this),this.type="SplineCurve",this.points=r||[]}function Td(){yr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function bd(r){Td.call(this),this.type="Path",this.currentPoint=new Aa,r&&this.setFromPoints(r)}function Ld(r){bd.call(this,r),this.uuid=zp.generateUUID(),this.type="Shape",this.holes=[]}function Dd(r,t){ot.call(this),this.type="Light",this.color=new X(r),this.intensity=void 0===t?1:t,this.receiveShadow=void 0}function Nd(r,t,a){Dd.call(this,r,a),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ot.DefaultUp),this.updateMatrix(),this.groundColor=new X(t)}function wd(r){this.camera=r,this.bias=0,this.radius=1,this.mapSize=new Aa(512,512),this.map=null,this.matrix=new Ma}function Xr(){wd.call(this,new ue(50,1,.5,500))}function Cd(o,t,s,i,r,n){Dd.call(this,o,t),this.type="SpotLight",this.position.copy(ot.DefaultUp),this.updateMatrix(),this.target=new ot,Object.defineProperty(this,"power",{get:function(){return this.intensity*ga},set:function(r){this.intensity=r/ga}}),this.distance=void 0===s?0:s,this.angle=void 0===i?ga/3:i,this.penumbra=void 0===r?0:r,this.decay=void 0===n?1:n,this.shadow=new Xr}function Sd(a,t,o,n){Dd.call(this,a,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*ga},set:function(r){this.intensity=r/(4*ga)}}),this.distance=void 0===o?0:o,this.decay=void 0===n?1:n,this.shadow=new wd(new ue(90,1,.5,500))}function Id(){wd.call(this,new Ha(-5,5,5,-5,.5,500))}function _d(r,t){Dd.call(this,r,t),this.type="DirectionalLight",this.position.copy(ot.DefaultUp),this.updateMatrix(),this.target=new ot,this.shadow=new Id}function jd(r,t){Dd.call(this,r,t),this.type="AmbientLight",this.castShadow=void 0}function Od(a,t,o,n){Dd.call(this,a,t),this.type="RectAreaLight",this.width=void 0===o?10:o,this.height=void 0===n?10:n}function zd(a,t,o,n){Hd.call(this,a,t,o,n)}function Rd(r,t,a){Hd.call(this,r,t,a)}function Bd(a,t,o,n){this.parameterPositions=a,this._cachedIndex=0,this.resultBuffer=void 0===n?new t.constructor(o):n,this.sampleValues=t,this.valueSize=o}function rn(a,t,o,n){Bd.call(this,a,t,o,n)}function Ud(a,t,o,n){Hd.call(this,a,t,o,n)}function Pd(a,t,o,n){Hd.call(this,a,t,o,n)}function kd(a,t,o,n){Hd.call(this,a,t,o,n)}function Fd(a,t,o,n){Bd.call(this,a,t,o,n),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Gd(a,t,o,n){Bd.call(this,a,t,o,n)}function Qd(a,t,o,n){Bd.call(this,a,t,o,n)}function Hd(a,t,o,n){if(void 0===a)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+a);this.name=a,this.times=Hc.convertArray(t,this.TimeBufferType),this.values=Hc.convertArray(o,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function Vd(a,t,o,n){Hd.call(this,a,t,o,n)}function Yd(r,t,a){this.name=r,this.tracks=a,this.duration=void 0===t?-1:t,this.uuid=zp.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function dn(r){this.manager=void 0===r?Nc:r,this.textures={}}function fn(r){this.manager=void 0===r?Nc:r}function mn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function vn(r){"boolean"==typeof r&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),r=void 0),this.manager=void 0===r?Nc:r,this.withCredentials=!1}function gn(r){this.manager=void 0===r?Nc:r,this.texturePath=""}function yn(r){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0===r?Nc:r,this.options=void 0}function Wd(){this.type="ShapePath",this.subPaths=[],this.currentPath=null}function bn(r){this.type="Font",this.data=r}function _n(d,t,m,i){for(var r=(d+"").split(""),n=t/i.resolution,a=(i.boundingBox.yMax-i.boundingBox.yMin+i.underlineThickness)*n,o=[],s=0,c=0,g=0,l;g<r.length;g++)if(l=r[g],"\n"===l)s=0,c-=a;else{var u=wn(l,m,n,s,c,i);s+=u.offsetX,o.push(u.path)}return o}function wn(A,t,M,i,r,n){var a=n.glyphs[A]||n.glyphs["?"];if(a){var o=new Wd,E,s,c,h,l,u,p,d;if(a.o)for(var f=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=f.length,y;v<g;)y=f[v++],"m"===y?(E=f[v++]*M+i,s=f[v++]*M+r,o.moveTo(E,s)):"l"===y?(E=f[v++]*M+i,s=f[v++]*M+r,o.lineTo(E,s)):"q"===y?(c=f[v++]*M+i,h=f[v++]*M+r,l=f[v++]*M+i,u=f[v++]*M+r,o.quadraticCurveTo(l,u,c,h)):"b"===y?(c=f[v++]*M+i,h=f[v++]*M+r,l=f[v++]*M+i,u=f[v++]*M+r,p=f[v++]*M+i,d=f[v++]*M+r,o.bezierCurveTo(l,u,p,d,c,h)):void 0;return{offsetX:a.ha*M,path:o}}}function Mn(r){this.manager=void 0===r?Nc:r}function En(r){this.manager=void 0===r?Nc:r}function Tn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ue,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ue,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Sn(a,t,l){ot.call(this),this.type="CubeCamera";var d=new ue(90,1,a,t);d.up.set(0,-1,0),d.lookAt(new Ea(1,0,0)),this.add(d);var r=new ue(90,1,a,t);r.up.set(0,-1,0),r.lookAt(new Ea(-1,0,0)),this.add(r);var n=new ue(90,1,a,t);n.up.set(0,0,1),n.lookAt(new Ea(0,1,0)),this.add(n);var o=new ue(90,1,a,t);o.up.set(0,0,-1),o.lookAt(new Ea(0,-1,0)),this.add(o);var s=new ue(90,1,a,t);s.up.set(0,-1,0),s.lookAt(new Ea(0,0,1)),this.add(s);var c=new ue(90,1,a,t);c.up.set(0,-1,0),c.lookAt(new Ea(0,0,-1)),this.add(c);this.renderTarget=new La(l,l,{format:xs,magFilter:wp,minFilter:wp}),this.renderTarget.texture.name="CubeCamera",this.update=function(l,t){null===this.parent&&this.updateMatrixWorld();var p=this.renderTarget,i=p.texture.generateMipmaps;p.texture.generateMipmaps=!1,p.activeCubeFace=0,l.render(t,d,p),p.activeCubeFace=1,l.render(t,r,p),p.activeCubeFace=2,l.render(t,n,p),p.activeCubeFace=3,l.render(t,o,p),p.activeCubeFace=4,l.render(t,s,p),p.texture.generateMipmaps=i,p.activeCubeFace=5,l.render(t,c,p),l.setRenderTarget(null)},this.clear=function(o,t,s,i){for(var r=this.renderTarget,n=0;6>n;n++)r.activeCubeFace=n,o.setRenderTarget(r),o.clear(t,s,i);o.setRenderTarget(null)}}function An(){ot.call(this),this.type="AudioListener",this.context=qc.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function Xd(r){ot.call(this),this.type="Audio",this.context=r.context,this.gain=this.context.createGain(),this.gain.connect(r.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function qd(r){Xd.call(this,r),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function Zd(r,t){this.analyser=r.context.createAnalyser(),this.analyser.fftSize=void 0===t?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),r.getOutput().connect(this.analyser)}function Pn(a,t,o){this.binding=a,this.valueSize=o;var i=Float64Array,n;"quaternion"===t?n=this._slerp:"string"===t||"bool"===t?(i=Array,n=this._select):n=this._lerp;this.buffer=new i(4*o),this._mixBufferRegion=n,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function In(a,t,o){var n=o||Jd.parseTrackName(t);this._targetGroup=a,this._bindings=a.subscribe_(t,n)}function Jd(r,t,a){this.path=t,this.parsedPath=a||Jd.parseTrackName(t),this.node=Jd.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r}function Nn(){this.uuid=zp.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var a={};this._indicesByUUID=a;for(var t=0,o=arguments.length;t!==o;++t)a[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function Un(l,t,d){this._mixer=l,this._clip=t,this._localRoot=d||null;for(var i=t.tracks,r=i.length,n=Array(r),a={endingStart:Js,endingEnd:Js},o=0,s;o!==r;++o)s=i[o].createInterpolant(null),n[o]=s,s.settings=a;this._interpolantSettings=a,this._interpolants=n,this._propertyBindings=Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Zs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Dn(r){this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Kd(r){"string"==typeof r&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),r=arguments[1]),this.value=r}function Fn(){Mt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function $d(a,t,o,n){this.uuid=zp.generateUUID(),this.data=a,this.itemSize=t,this.offset=o,this.normalized=!0===n}function Gn(r,t){this.uuid=zp.generateUUID(),this.array=r,this.stride=t,this.count=void 0===r?0:r.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function Hn(r,t,a){Gn.call(this,r,t),this.meshPerAttribute=a||1}function $c(r,t,a){Ya.call(this,r,t),this.meshPerAttribute=a||1}function ep(a,t,o,n){this.ray=new al(a,t),this.near=o||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function jn(r,t){return r.distance-t.distance}function Wn(s,t,l,i){if(!1!==s.visible&&(s.raycast(t,l),!0===i))for(var r=s.children,n=0,a=r.length;n<a;n++)Wn(r[n],t,l,!0)}function Xn(r){this.autoStart=void 0===r||r,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function qn(r,t,a){return this.radius=void 0===r?1:r,this.phi=void 0===t?0:t,this.theta=void 0===a?0:a,this}function Yn(r,t,a){return this.radius=void 0===r?1:r,this.theta=void 0===t?0:t,this.y=void 0===a?0:a,this}function Zn(r,t){this.min=void 0===r?new Aa(1/0,1/0):r,this.max=void 0===t?new Aa(-1/0,-1/0):t}function Jn(r){ot.call(this),this.material=r,this.render=function(){}}function Qn(l,t,d,i){this.object=l,this.size=void 0===t?1:t;var r=void 0===d?16711680:d,p=void 0===i?1:i,u=0,o=this.object.geometry;o&&o.isGeometry?u=3*o.faces.length:o&&o.isBufferGeometry&&(u=o.attributes.normal.count);var s=new Mt,c=new xt(3*(2*u),3);s.addAttribute("position",c),gl.call(this,s,new ul({color:r,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function Kn(l,t){ot.call(this),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var d=new Mt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,n=1;32>r;r++,n++){var a=2*(r/32*ga),o=2*(n/32*ga);i.push(I(a),z(a),1,I(o),z(o),1)}d.addAttribute("position",new xt(i,3));var s=new ul({fog:!1});this.cone=new gl(d,s),this.add(this.cone),this.update()}function $n(r){var t=[];r&&r.isBone&&t.push(r);for(var a=0;a<r.children.length;a++)t.push.apply(t,$n(r.children[a]));return t}function ta(l){for(var t=$n(l),d=new Mt,i=[],r=[],n=new X(0,0,1),a=new X(0,1,0),o=0,s;o<t.length;o++)s=t[o],s.parent&&s.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(n.r,n.g,n.b),r.push(a.r,a.g,a.b));d.addAttribute("position",new xt(i,3)),d.addAttribute("color",new xt(r,3));var c=new ul({vertexColors:lp,depthTest:!1,depthWrite:!1,transparent:!0});gl.call(this,d,c),this.root=l,this.bones=t,this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1}function ea(a,t,o){this.light=a,this.light.updateMatrixWorld(),this.color=o;var i=new Hl(t,4,2),r=new tl({wireframe:!0,fog:!1});Ot.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ia(a,t){ot.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var o=new ul({fog:!1}),n=new Mt;n.addAttribute("position",new Ya(new Float32Array(15),3)),this.line=new ml(n,o),this.add(this.line),this.update()}function ra(o,t,s){ot.call(this),this.light=o,this.light.updateMatrixWorld(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;var i=new wl(t);i.rotateY(.5*ga),this.material=new tl({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=lp);var r=i.getAttribute("position"),n=new Float32Array(3*r.count);i.addAttribute("color",new Ya(n,3)),this.add(new Ot(i,this.material)),this.update()}function na(m,t,g,i){m=m||10,t=t||10,g=new X(void 0===g?4473924:g),i=new X(void 0===i?8947848:i);for(var r=t/2,n=m/t,a=m/2,y=[],s=[],c=0,h=0,l=-a;c<=t;c++,l+=n){y.push(-a,0,l,a,0,l),y.push(l,0,-a,l,0,a);var u=c===r?g:i;u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3}var p=new Mt;p.addAttribute("position",new xt(y,3)),p.addAttribute("color",new xt(s,3));var d=new ul({vertexColors:lp});gl.call(this,p,d)}function aa(g,t,y,i,r,n){g=g||10,t=t||16,y=y||8,i=i||64,r=new X(void 0===r?4473924:r),n=new X(void 0===n?8947848:n);var a=[],d=[],f,o,s,c,h,l,u;for(c=0;c<=t;c++)s=c/t*(2*ga),f=z(s)*g,o=I(s)*g,a.push(0,0,0),a.push(f,0,o),u=1&c?r:n,d.push(u.r,u.g,u.b),d.push(u.r,u.g,u.b);for(c=0;c<=y;c++)for(u=1&c?r:n,l=g-g/y*c,h=0;h<i;h++)s=h/i*(2*ga),f=z(s)*l,o=I(s)*l,a.push(f,0,o),d.push(u.r,u.g,u.b),s=(h+1)/i*(2*ga),f=z(s)*l,o=I(s)*l,a.push(f,0,o),d.push(u.r,u.g,u.b);var p=new Mt;p.addAttribute("position",new xt(a,3)),p.addAttribute("color",new xt(d,3));var m=new ul({vertexColors:lp});gl.call(this,p,m)}function oa(l,t,d,i){this.object=l,this.size=void 0===t?1:t;var r=void 0===d?16776960:d,p=void 0===i?1:i,u=0,o=this.object.geometry;o&&o.isGeometry?u=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var s=new Mt,c=new xt(3*(2*u),3);s.addAttribute("position",c),gl.call(this,s,new ul({color:r,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function sa(a,t,o){ot.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,void 0===t&&(t=1);var i=new Mt;i.addAttribute("position",new xt([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var r=new ul({fog:!1});this.lightPlane=new ml(i,r),this.add(this.lightPlane),i=new Mt,i.addAttribute("position",new xt([0,0,0,0,0,1],3)),this.targetLine=new ml(i,r),this.add(this.targetLine),this.update()}function ca(d){function t(a,t,o){m(a,o),m(t,o)}function m(r,t){n.push(0,0,0),a.push(t.r,t.g,t.b),void 0===o[r]&&(o[r]=[]),o[r].push(n.length/3-1)}var i=new Mt,r=new ul({color:16777215,vertexColors:ro}),n=[],a=[],o={},s=new X(16755200),c=new X(16711680),g=new X(43775),l=new X(16777215),u=new X(3355443);t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",g),t("u2","u3",g),t("u3","u1",g),t("c","t",l),t("p","c",u),t("cn1","cn2",u),t("cn3","cn4",u),t("cf1","cf2",u),t("cf3","cf4",u),i.addAttribute("position",new xt(n,3)),i.addAttribute("color",new xt(a,3)),gl.call(this,i,r),this.camera=d,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function ha(a,t){this.object=a,void 0===t&&(t=16776960);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Mt;r.setIndex(new Ya(o,1)),r.addAttribute("position",new Ya(i,3)),gl.call(this,r,new ul({color:t})),this.matrixAutoUpdate=!1,this.update()}function la(o,t){this.type="Box3Helper",this.box=o;var n=void 0===t?16776960:t,s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Mt;r.setIndex(new Ya(s,1)),r.addAttribute("position",new xt([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),gl.call(this,r,new ul({color:n})),this.geometry.computeBoundingSphere()}function ua(o,t,n){this.type="PlaneHelper",this.plane=o,this.size=void 0===t?1:t;var i=void 0===n?16776960:n,l=new Mt;l.addAttribute("position",new xt([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),l.computeBoundingSphere(),ml.call(this,l,new ul({color:i}));var a=new Mt;a.addAttribute("position",new xt([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Ot(a,new tl({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function pa(o,t,s,i,l,n){ot.call(this),void 0===i&&(i=16776960),void 0===s&&(s=1),void 0===l&&(l=.2*s),void 0===n&&(n=.2*l),void 0===Jc&&(Jc=new Mt,Jc.addAttribute("position",new xt([0,0,0,0,1,0],3)),Qc=new $l(0,.5,1,5,1),Qc.translate(0,-.5,0)),this.position.copy(t),this.line=new ml(Jc,new ul({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ot(Qc,new tl({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(o),this.setLength(s,l,n)}function da(a){a=a||1;var t=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],o=new Mt;o.addAttribute("position",new xt(t,3)),o.addAttribute("color",new xt([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var r=new ul({vertexColors:lp});gl.call(this,o,r)}function fa(r){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),wr.call(this,r),this.type="catmullrom",this.closed=!0}function Ua(r){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),wr.call(this,r),this.type="catmullrom"}function Da(r){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),wr.call(this,r),this.type="catmullrom"}var Ba=Math.ceil,tp=Number.isInteger,rp=Number.EPSILON,ap=Math.atan2;void 0===rp&&(rp=2.220446049250313e-16),void 0===tp&&(tp=function(r){return"number"==typeof r&&isFinite(r)&&D(r)===r}),void 0===ma&&(ma=function(r){return 0>r?-1:0<r?1:+r}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),o=1,i;o<arguments.length;o++)if(i=arguments[o],void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t}}(),Object.assign(t.prototype,{addEventListener:function(r,t){void 0===this._listeners&&(this._listeners={});var a=this._listeners;void 0===a[r]&&(a[r]=[]),-1===a[r].indexOf(t)&&a[r].push(t)},hasEventListener:function(r,t){if(void 0===this._listeners)return!1;var a=this._listeners;return void 0!==a[r]&&-1!==a[r].indexOf(t)},removeEventListener:function(a,t){if(void 0!==this._listeners){var o=this._listeners,i=o[a];if(void 0!==i){var r=i.indexOf(t);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(o){if(void 0!==this._listeners){var t=this._listeners,s=t[o.type];if(void 0!==s){o.target=this;for(var i=s.slice(0),r=0,n=i.length;r<n;r++)i[r].call(this,o)}}}});var op="90",qa=0,Za=1,Ja=2,Qa=1,Ka=2,$a=0,np=1,ip=2,sp=0,ro=1,lp=2,dp=0,cp=1,pp=2,up=3,mp=4,gp=5,hp=100,po=101,fo=102,mo=103,vo=104,go=200,yo=201,xo=202,bo=203,_o=204,wo=205,Mo=206,Eo=207,To=208,So=209,Ao=210,Lo=0,Ro=1,Co=2,Po=3,Io=4,Oo=5,No=6,Uo=7,Do=0,Bo=1,Fo=2,zo=0,Go=1,Ho=2,Vo=3,ko=4,jo=301,yp=302,fp=303,Ap=304,Mp=305,xp=306,Ep=307,vp=1e3,Tp=1001,bp=1002,Lp=1003,Dp=1004,Np=1005,wp=1006,Cp=1007,Sp=1008,Ip=1009,ss=1010,cs=1011,hs=1012,ls=1013,us=1014,ps=1015,ds=1016,fs=1017,ms=1018,vs=1019,gs=1020,ys=1021,xs=1022,_p=1023,jp=1024,ws=1025,Ms=1026,Ts=1027,Ss=33776,As=33777,Ls=33778,Rs=33779,Cs=35840,Ps=35841,Is=35842,Os=35843,Ns=36196,Us=37808,Ds=37809,Bs=37810,Fs=37811,zs=37812,Gs=37813,Hs=37814,Vs=37815,ks=37816,js=37817,Ws=37818,Xs=37819,qs=37820,Ys=37821,Zs=2201,Js=2400,Op=0,Ks=1,$s=2,tc=3e3,ec=3001,ic=3007,rc=3002,nc=3004,ac=3005,oc=3006,sc=3200,cc=3201,zp={DEG2RAD:ga/180,RAD2DEG:180/ga,generateUUID:function(){for(var a=[],t=0;256>t;t++)a[t]=(16>t?"0":"")+t.toString(16).toUpperCase();return function(){var t=0|4294967295*Math.random(),o=0|4294967295*Math.random(),i=0|4294967295*Math.random(),r=0|4294967295*Math.random();return a[255&t]+a[255&t>>8]+a[255&t>>16]+a[255&t>>24]+"-"+a[255&o]+a[255&o>>8]+"-"+a[64|15&o>>16]+a[255&o>>24]+"-"+a[128|63&i]+a[255&i>>8]+"-"+a[255&i>>16]+a[255&i>>24]+a[255&r]+a[255&r>>8]+a[255&r>>16]+a[255&r>>24]}}(),clamp:function(r,t,a){return C(t,O(a,r))},euclideanModulo:function(r,t){return(r%t+t)%t},mapLinear:function(a,t,o,i,r){return i+(a-t)*(r-i)/(o-t)},lerp:function(r,t,a){return(1-a)*r+a*t},smoothstep:function(r,t,a){return r<=t?0:r>=a?1:(r=(r-t)/(a-t))*r*(3-2*r)},smootherstep:function(r,t,a){return r<=t?0:r>=a?1:(r=(r-t)/(a-t))*r*r*(r*(6*r-15)+10)},randInt:function(r,t){return r+D(Math.random()*(t-r+1))},randFloat:function(r,t){return r+Math.random()*(t-r)},randFloatSpread:function(r){return r*(.5-Math.random())},degToRad:function(r){return r*zp.DEG2RAD},radToDeg:function(r){return r*zp.RAD2DEG},isPowerOfTwo:function(r){return 0==(r&r-1)&&0!==r},ceilPowerOfTwo:function(a){return A(2,Ba(l(a)/r))},floorPowerOfTwo:function(a){return A(2,D(l(a)/r))}};Object.defineProperties(Aa.prototype,{width:{get:function(){return this.x},set:function(r){this.x=r}},height:{get:function(){return this.y},set:function(r){this.y=r}}}),Object.assign(Aa.prototype,{isVector2:!0,set:function(r,t){return this.x=r,this.y=t,this},setScalar:function(r){return this.x=r,this.y=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(r){return this.x=r.x,this.y=r.y,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},divideScalar:function(r){return this.multiplyScalar(1/r)},applyMatrix3:function(a){var t=this.x,o=this.y,n=a.elements;return this.x=n[0]*t+n[3]*o+n[6],this.y=n[1]*t+n[4]*o+n[7],this},min:function(r){return this.x=O(this.x,r.x),this.y=O(this.y,r.y),this},max:function(r){return this.x=C(this.x,r.x),this.y=C(this.y,r.y),this},clamp:function(r,t){return this.x=C(r.x,O(t.x,this.x)),this.y=C(r.y,O(t.y,this.y)),this},clampScalar:function(){var a=new Aa,t=new Aa;return function(o,n){return a.set(o,o),t.set(n,n),this.clamp(a,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(C(r,O(t,a)))},floor:function(){return this.x=D(this.x),this.y=D(this.y),this},ceil:function(){return this.x=Ba(this.x),this.y=Ba(this.y),this},round:function(){return this.x=a(this.x),this.y=a(this.y),this},roundToZero:function(){return this.x=0>this.x?Ba(this.x):D(this.x),this.y=0>this.y?Ba(this.y):D(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(r){return this.x*r.x+this.y*r.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return S(this.x*this.x+this.y*this.y)},manhattanLength:function(){return T(this.x)+T(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var r=ap(this.y,this.x);return 0>r&&(r+=2*ga),r},distanceTo:function(r){return S(this.distanceToSquared(r))},distanceToSquared:function(r){var t=this.x-r.x,a=this.y-r.y;return t*t+a*a},manhattanDistanceTo:function(r){return T(this.x-r.x)+T(this.y-r.y)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},equals:function(r){return r.x===this.x&&r.y===this.y},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this},rotateAround:function(o,t){var s=I(t),i=z(t),r=this.x-o.x,n=this.y-o.y;return this.x=r*s-n*i+o.x,this.y=r*i+n*s+o.y,this}}),Object.assign(Ma.prototype,{isMatrix4:!0,set:function(g,t,y,i,r,n,a,o,s,c,h,l,u,p,d,f){var m=this.elements;return m[0]=g,m[4]=t,m[8]=y,m[12]=i,m[1]=r,m[5]=n,m[9]=a,m[13]=o,m[2]=s,m[6]=c,m[10]=h,m[14]=l,m[3]=u,m[7]=p,m[11]=d,m[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Ma().fromArray(this.elements)},copy:function(r){var t=this.elements,a=r.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],this},copyPosition:function(r){var t=this.elements,a=r.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this},extractBasis:function(r,t,a){return r.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this},makeBasis:function(r,t,a){return this.set(r.x,t.x,a.x,0,r.y,t.y,a.y,0,r.z,t.z,a.z,0,0,0,0,1),this},extractRotation:function(){var s=new Ea;return function(t){var l=this.elements,i=t.elements,r=1/s.setFromMatrixColumn(t,0).length(),n=1/s.setFromMatrixColumn(t,1).length(),a=1/s.setFromMatrixColumn(t,2).length();return l[0]=i[0]*r,l[1]=i[1]*r,l[2]=i[2]*r,l[4]=i[4]*n,l[5]=i[5]*n,l[6]=i[6]*n,l[8]=i[8]*a,l[9]=i[9]*a,l[10]=i[10]*a,this}}(),makeRotationFromEuler:function(A){A&&A.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,M=A.x,i=A.y,r=A.z,n=I(M),E=z(M),T=I(i),L=z(i),D=I(r),h=z(r);if("XYZ"===A.order){var N=n*D,u=n*h,p=E*D,d=E*h;t[0]=T*D,t[4]=-T*h,t[8]=L,t[1]=u+p*L,t[5]=N-d*L,t[9]=-E*T,t[2]=d-N*L,t[6]=p+u*L,t[10]=n*T}else if("YXZ"===A.order){var f=T*D,m=T*h,v=L*D,g=L*h;t[0]=f+g*E,t[4]=v*E-m,t[8]=n*L,t[1]=n*h,t[5]=n*D,t[9]=-E,t[2]=m*E-v,t[6]=g+f*E,t[10]=n*T}else if("ZXY"===A.order){var f=T*D,m=T*h,v=L*D,g=L*h;t[0]=f-g*E,t[4]=-n*h,t[8]=v+m*E,t[1]=m+v*E,t[5]=n*D,t[9]=g-f*E,t[2]=-n*L,t[6]=E,t[10]=n*T}else if("ZYX"===A.order){var N=n*D,u=n*h,p=E*D,d=E*h;t[0]=T*D,t[4]=p*L-u,t[8]=N*L+d,t[1]=T*h,t[5]=d*L+N,t[9]=u*L-p,t[2]=-L,t[6]=E*T,t[10]=n*T}else if("YZX"===A.order){var y=n*T,x=n*L,b=E*T,C=E*L;t[0]=T*D,t[4]=C-y*h,t[8]=b*h+x,t[1]=h,t[5]=n*D,t[9]=-E*D,t[2]=-L*D,t[6]=x*h+b,t[10]=y-C*h}else if("XZY"===A.order){var y=n*T,x=n*L,b=E*T,C=E*L;t[0]=T*D,t[4]=-h,t[8]=L*D,t[1]=y*h+C,t[5]=n*D,t[9]=x*h-b,t[2]=b*h-x,t[6]=E*D,t[10]=C*h+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(y){var t=this.elements,A=y._x,i=y._y,r=y._z,n=y._w,a=A+A,o=i+i,s=r+r,c=A*a,h=A*o,l=A*s,u=i*o,p=i*s,d=r*s,f=n*a,m=n*o,M=n*s;return t[0]=1-(u+d),t[4]=h-M,t[8]=l+m,t[1]=h+M,t[5]=1-(c+d),t[9]=p-f,t[2]=l-m,t[6]=p+f,t[10]=1-(c+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var s=new Ea,t=new Ea,l=new Ea;return function(i,r,n){var a=this.elements;return l.subVectors(i,r),0===l.lengthSq()&&(l.z=1),l.normalize(),s.crossVectors(n,l),0===s.lengthSq()&&(1===T(n.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),s.crossVectors(n,l)),s.normalize(),t.crossVectors(l,s),a[0]=s.x,a[4]=t.x,a[8]=l.x,a[1]=s.y,a[5]=t.y,a[9]=l.y,a[2]=s.z,a[6]=t.z,a[10]=l.z,this}}(),multiply:function(r,t){return void 0===t?this.multiplyMatrices(this,r):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,t))},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(j,t){var z=j.elements,i=t.elements,r=this.elements,n=z[0],a=z[4],o=z[8],s=z[12],c=z[1],h=z[5],l=z[9],u=z[13],p=z[2],d=z[6],f=z[10],m=z[14],v=z[3],g=z[7],y=z[11],x=z[15],b=i[0],_=i[4],w=i[8],M=i[12],E=i[1],T=i[5],S=i[9],A=i[13],L=i[2],R=i[6],C=i[10],B=i[14],I=i[3],O=i[7],N=i[11],U=i[15];return r[0]=n*b+a*E+o*L+s*I,r[4]=n*_+a*T+o*R+s*O,r[8]=n*w+a*S+o*C+s*N,r[12]=n*M+a*A+o*B+s*U,r[1]=c*b+h*E+l*L+u*I,r[5]=c*_+h*T+l*R+u*O,r[9]=c*w+h*S+l*C+u*N,r[13]=c*M+h*A+l*B+u*U,r[2]=p*b+d*E+f*L+m*I,r[6]=p*_+d*T+f*R+m*O,r[10]=p*w+d*S+f*C+m*N,r[14]=p*M+d*A+f*B+m*U,r[3]=v*b+g*E+y*L+x*I,r[7]=v*_+g*T+y*R+x*O,r[11]=v*w+g*S+y*C+x*N,r[15]=v*M+g*A+y*B+x*U,this},multiplyScalar:function(r){var t=this.elements;return t[0]*=r,t[4]*=r,t[8]*=r,t[12]*=r,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r,t[2]*=r,t[6]*=r,t[10]*=r,t[14]*=r,t[3]*=r,t[7]*=r,t[11]*=r,t[15]*=r,this},applyToBufferAttribute:function(){var a=new Ea;return function(t){for(var o=0,n=t.count;o<n;o++)a.x=t.getX(o),a.y=t.getY(o),a.z=t.getZ(o),a.applyMatrix4(this),t.setXYZ(o,a.x,a.y,a.z);return t}}(),determinant:function(){var d=this.elements,t=d[0],m=d[4],i=d[8],g=d[12],y=d[1],a=d[5],o=d[9],s=d[13],c=d[2],h=d[6],l=d[10],u=d[14];return d[3]*(+g*o*h-i*s*h-g*a*l+m*s*l+i*a*u-m*o*u)+d[7]*(+t*o*u-t*s*l+g*y*l-i*y*u+i*s*c-g*o*c)+d[11]*(+t*s*h-t*a*u-g*y*h+m*y*u+g*a*c-m*s*c)+d[15]*(-i*a*c-t*o*h+t*a*l+i*y*h-m*y*l+m*o*c)},transpose:function(){var r=this.elements,a;return a=r[1],r[1]=r[4],r[4]=a,a=r[2],r[2]=r[8],r[8]=a,a=r[6],r[6]=r[9],r[9]=a,a=r[3],r[3]=r[12],r[12]=a,a=r[7],r[7]=r[13],r[13]=a,a=r[11],r[11]=r[14],r[14]=a,this},setPosition:function(r){var t=this.elements;return t[12]=r.x,t[13]=r.y,t[14]=r.z,this},getInverse:function(A,t){var L=this.elements,i=A.elements,r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],c=i[5],h=i[6],l=i[7],u=i[8],p=i[9],d=i[10],f=i[11],m=i[12],v=i[13],g=i[14],y=i[15],x=p*g*l-v*d*l+v*h*f-c*g*f-p*h*y+c*d*y,b=m*d*l-u*g*l-m*h*f+s*g*f+u*h*y-s*d*y,D=u*v*l-m*p*l+m*c*f-s*v*f-u*c*y+s*p*y,N=m*p*h-u*v*h-m*c*d+s*v*d+u*c*g-s*p*g,M=r*x+n*b+a*D+o*N;if(0===M){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var T=1/M;return L[0]=x*T,L[1]=(v*d*o-p*g*o-v*a*f+n*g*f+p*a*y-n*d*y)*T,L[2]=(c*g*o-v*h*o+v*a*l-n*g*l-c*a*y+n*h*y)*T,L[3]=(p*h*o-c*d*o-p*a*l+n*d*l+c*a*f-n*h*f)*T,L[4]=b*T,L[5]=(u*g*o-m*d*o+m*a*f-r*g*f-u*a*y+r*d*y)*T,L[6]=(m*h*o-s*g*o-m*a*l+r*g*l+s*a*y-r*h*y)*T,L[7]=(s*d*o-u*h*o+u*a*l-r*d*l-s*a*f+r*h*f)*T,L[8]=D*T,L[9]=(m*p*o-u*v*o-m*n*f+r*v*f+u*n*y-r*p*y)*T,L[10]=(s*v*o-m*c*o+m*n*l-r*v*l-s*n*y+r*c*y)*T,L[11]=(u*c*o-s*p*o-u*n*l+r*p*l+s*n*f-r*c*f)*T,L[12]=N*T,L[13]=(u*v*a-m*p*a+m*n*d-r*v*d-u*n*g+r*p*g)*T,L[14]=(m*c*a-s*v*a-m*n*h+r*v*h+s*n*g-r*c*g)*T,L[15]=(s*p*a-u*c*a+u*n*h-r*p*h-s*n*d+r*c*d)*T,this},scale:function(a){var t=this.elements,o=a.x,i=a.y,r=a.z;return t[0]*=o,t[4]*=i,t[8]*=r,t[1]*=o,t[5]*=i,t[9]*=r,t[2]*=o,t[6]*=i,t[10]*=r,t[3]*=o,t[7]*=i,t[11]*=r,this},getMaxScaleOnAxis:function(){var a=this.elements,t=a[0]*a[0]+a[1]*a[1]+a[2]*a[2],o=a[4]*a[4]+a[5]*a[5]+a[6]*a[6],n=a[8]*a[8]+a[9]*a[9]+a[10]*a[10];return S(C(t,o,n))},makeTranslation:function(r,t,a){return this.set(1,0,0,r,0,1,0,t,0,0,1,a,0,0,0,1),this},makeRotationX:function(r){var t=I(r),a=z(r);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this},makeRotationY:function(r){var t=I(r),a=z(r);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this},makeRotationZ:function(r){var t=I(r),a=z(r);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(l,t){var d=I(t),i=z(t),r=1-d,n=l.x,a=l.y,o=l.z,s=r*n,c=r*a;return this.set(s*n+d,s*a-i*o,s*o+i*a,0,s*a+i*o,c*a+d,c*o-i*n,0,s*o-i*a,c*o+i*n,r*o*o+d,0,0,0,0,1),this},makeScale:function(r,t,a){return this.set(r,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this},makeShear:function(r,t,a){return this.set(1,t,a,0,r,1,a,0,r,t,1,0,0,0,0,1),this},compose:function(r,t,a){return this.makeRotationFromQuaternion(t),this.scale(a),this.setPosition(r),this},decompose:function(){var d=new Ea,t=new Ma;return function(p,i,r){var n=this.elements,a=d.set(n[0],n[1],n[2]).length(),m=d.set(n[4],n[5],n[6]).length(),s=d.set(n[8],n[9],n[10]).length();0>this.determinant()&&(a=-a),p.x=n[12],p.y=n[13],p.z=n[14],t.copy(this);var c=1/a,g=1/m,l=1/s;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=g,t.elements[5]*=g,t.elements[6]*=g,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,i.setFromRotationMatrix(t),r.x=a,r.y=m,r.z=s,this}}(),makePerspective:function(s,t,l,i,r,n){void 0===n&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*r/(t-s),a[4]=0,a[8]=(t+s)/(t-s),a[12]=0,a[1]=0,a[5]=2*r/(l-i),a[9]=(l+i)/(l-i),a[13]=0,a[2]=0,a[6]=0,a[10]=-(n+r)/(n-r),a[14]=-2*n*r/(n-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(l,t,d,i,r,n){var a=this.elements,o=1/(t-l),s=1/(d-i),c=1/(n-r);return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-((t+l)*o),a[1]=0,a[5]=2*s,a[9]=0,a[13]=-((d+i)*s),a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-((n+r)*c),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(a){for(var t=this.elements,o=a.elements,n=0;16>n;n++)if(t[n]!==o[n])return!1;return!0},fromArray:function(r,t){void 0===t&&(t=0);for(var a=0;16>a;a++)this.elements[a]=r[a+t];return this},toArray:function(r,t){void 0===r&&(r=[]),void 0===t&&(t=0);var a=this.elements;return r[t]=a[0],r[t+1]=a[1],r[t+2]=a[2],r[t+3]=a[3],r[t+4]=a[4],r[t+5]=a[5],r[t+6]=a[6],r[t+7]=a[7],r[t+8]=a[8],r[t+9]=a[9],r[t+10]=a[10],r[t+11]=a[11],r[t+12]=a[12],r[t+13]=a[13],r[t+14]=a[14],r[t+15]=a[15],r}}),Object.assign(xa,{slerp:function(a,t,o,n){return o.copy(a).slerp(t,n)},slerpFlat:function(A,t,M,i,r,n,a){var o=M[i+0],s=M[i+1],c=M[i+2],h=M[i+3],l=r[n+0],u=r[n+1],p=r[n+2],d=r[n+3];if(h!==d||o!==l||s!==u||c!==p){var f=1-a,m=o*l+s*u+c*p+h*d,E=0<=m?1:-1,g=1-m*m;if(g>rp){var y=S(g),x=ap(y,m*E);f=z(f*x)/y,a=z(a*x)/y}var v=a*E;if(o=o*f+l*v,s=s*f+u*v,c=c*f+p*v,h=h*f+d*v,f===1-a){var T=1/S(o*o+s*s+c*c+h*h);o*=T,s*=T,c*=T,h*=T}}A[t]=o,A[t+1]=s,A[t+2]=c,A[t+3]=h}}),Object.defineProperties(xa.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(r){this._w=r,this.onChangeCallback()}}}),Object.assign(xa.prototype,{set:function(a,t,o,n){return this._x=a,this._y=t,this._z=o,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this.onChangeCallback(),this},setFromEuler:function(m,g){if(!m||!m.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var y=m._x,i=m._y,r=m._z,n=m.order,a=I,o=z,s=a(y/2),c=a(i/2),h=a(r/2),l=o(y/2),u=o(i/2),p=o(r/2);return"XYZ"===n?(this._x=l*c*h+s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h-l*u*p):"YXZ"===n?(this._x=l*c*h+s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h+l*u*p):"ZXY"===n?(this._x=l*c*h-s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h-l*u*p):"ZYX"===n?(this._x=l*c*h-s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h+l*u*p):"YZX"===n?(this._x=l*c*h+s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h-l*u*p):"XZY"===n&&(this._x=l*c*h-s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h+l*u*p),!1!==g&&this.onChangeCallback(),this},setFromAxisAngle:function(a,t){var o=t/2,n=z(o);return this._x=a.x*n,this._y=a.y*n,this._z=a.z*n,this._w=I(o),this.onChangeCallback(),this},setFromRotationMatrix:function(d){var t=d.elements,i=t[0],r=t[4],n=t[8],a=t[1],o=t[5],s=t[9],c=t[2],m=t[6],l=t[10],u=i+o+l,p;return 0<u?(p=.5/S(u+1),this._w=.25/p,this._x=(m-s)*p,this._y=(n-c)*p,this._z=(a-r)*p):i>o&&i>l?(p=2*S(1+i-o-l),this._w=(m-s)/p,this._x=.25*p,this._y=(r+a)/p,this._z=(n+c)/p):o>l?(p=2*S(1+o-i-l),this._w=(n-c)/p,this._x=(r+a)/p,this._y=.25*p,this._z=(s+m)/p):(p=2*S(1+l-i-o),this._w=(a-r)/p,this._x=(n+c)/p,this._y=(s+m)/p,this._z=.25*p),this.onChangeCallback(),this},setFromUnitVectors:function(){var a=new Ea,o;return function(t,n){return void 0===a&&(a=new Ea),o=t.dot(n)+1,1e-6>o?(o=0,T(t.x)>T(t.z)?a.set(-t.y,t.x,0):a.set(0,-t.z,t.y)):a.crossVectors(t,n),this._x=a.x,this._y=a.y,this._z=a.z,this._w=o,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return S(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x*=r,this._y*=r,this._z*=r,this._w*=r),this.onChangeCallback(),this},multiply:function(r,t){return void 0===t?this.multiplyQuaternions(this,r):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,t))},premultiply:function(r){return this.multiplyQuaternions(r,this)},multiplyQuaternions:function(l,t){var d=l._x,i=l._y,r=l._z,n=l._w,a=t._x,o=t._y,s=t._z,c=t._w;return this._x=d*c+n*a+i*s-r*o,this._y=i*c+n*o+r*a-d*s,this._z=r*c+n*s+d*o-i*a,this._w=n*c-d*a-i*o-r*s,this.onChangeCallback(),this},slerp:function(d,t){if(0===t)return this;if(1===t)return this.copy(d);var p=this._x,i=this._y,r=this._z,n=this._w,a=n*d._w+p*d._x+i*d._y+r*d._z;if(0>a?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,a=-a):this.copy(d),1<=a)return this._w=n,this._x=p,this._y=i,this._z=r,this;var u=S(1-a*a);if(.001>T(u))return this._w=.5*(n+this._w),this._x=.5*(p+this._x),this._y=.5*(i+this._y),this._z=.5*(r+this._z),this;var s=ap(u,a),c=z((1-t)*s)/u,m=z(t*s)/u;return this._w=n*c+this._w*m,this._x=p*c+this._x*m,this._y=i*c+this._y*m,this._z=r*c+this._z*m,this.onChangeCallback(),this},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},fromArray:function(r,t){return void 0===t&&(t=0),this._x=r[t],this._y=r[t+1],this._z=r[t+2],this._w=r[t+3],this.onChangeCallback(),this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this._x,r[t+1]=this._y,r[t+2]=this._z,r[t+3]=this._w,r},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){}}),Object.assign(Ea.prototype,{isVector3:!0,set:function(r,t,a){return this.x=r,this.y=t,this.z=a,this},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this.z+=r.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this.z=r.z+t.z,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this.z+=r.z*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this.z-=r.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this.z=r.z-t.z,this},multiply:function(r,t){return void 0===t?(this.x*=r.x,this.y*=r.y,this.z*=r.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,t))},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this},multiplyVectors:function(r,t){return this.x=r.x*t.x,this.y=r.y*t.y,this.z=r.z*t.z,this},applyEuler:function(){var r=new xa;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(t))}}(),applyAxisAngle:function(){var r=new xa;return function(t,a){return this.applyQuaternion(r.setFromAxisAngle(t,a))}}(),applyMatrix3:function(a){var t=this.x,o=this.y,i=this.z,r=a.elements;return this.x=r[0]*t+r[3]*o+r[6]*i,this.y=r[1]*t+r[4]*o+r[7]*i,this.z=r[2]*t+r[5]*o+r[8]*i,this},applyMatrix4:function(o){var t=this.x,s=this.y,i=this.z,r=o.elements,n=1/(r[3]*t+r[7]*s+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*s+r[8]*i+r[12])*n,this.y=(r[1]*t+r[5]*s+r[9]*i+r[13])*n,this.z=(r[2]*t+r[6]*s+r[10]*i+r[14])*n,this},applyQuaternion:function(d){var t=this.x,p=this.y,i=this.z,r=d.x,m=d.y,g=d.z,y=d.w,s=y*t+m*i-g*p,c=y*p+g*t-r*i,h=y*i+r*p-m*t,l=-r*t-m*p-g*i;return this.x=s*y+l*-r+c*-g-h*-m,this.y=c*y+l*-m+h*-r-s*-g,this.z=h*y+l*-g+s*-m-c*-r,this},project:function(){var r=new Ma;return function(t){return r.multiplyMatrices(t.projectionMatrix,r.getInverse(t.matrixWorld)),this.applyMatrix4(r)}}(),unproject:function(){var r=new Ma;return function(t){return r.multiplyMatrices(t.matrixWorld,r.getInverse(t.projectionMatrix)),this.applyMatrix4(r)}}(),transformDirection:function(a){var t=this.x,o=this.y,i=this.z,r=a.elements;return this.x=r[0]*t+r[4]*o+r[8]*i,this.y=r[1]*t+r[5]*o+r[9]*i,this.z=r[2]*t+r[6]*o+r[10]*i,this.normalize()},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},divideScalar:function(r){return this.multiplyScalar(1/r)},min:function(r){return this.x=O(this.x,r.x),this.y=O(this.y,r.y),this.z=O(this.z,r.z),this},max:function(r){return this.x=C(this.x,r.x),this.y=C(this.y,r.y),this.z=C(this.z,r.z),this},clamp:function(r,t){return this.x=C(r.x,O(t.x,this.x)),this.y=C(r.y,O(t.y,this.y)),this.z=C(r.z,O(t.z,this.z)),this},clampScalar:function(){var a=new Ea,t=new Ea;return function(o,n){return a.set(o,o,o),t.set(n,n,n),this.clamp(a,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(C(r,O(t,a)))},floor:function(){return this.x=D(this.x),this.y=D(this.y),this.z=D(this.z),this},ceil:function(){return this.x=Ba(this.x),this.y=Ba(this.y),this.z=Ba(this.z),this},round:function(){return this.x=a(this.x),this.y=a(this.y),this.z=a(this.z),this},roundToZero:function(){return this.x=0>this.x?Ba(this.x):D(this.x),this.y=0>this.y?Ba(this.y):D(this.y),this.z=0>this.z?Ba(this.z):D(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return T(this.x)+T(this.y)+T(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this.z+=(r.z-this.z)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},cross:function(r,t){return void 0===t?this.crossVectors(this,r):(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(r,t))},crossVectors:function(l,t){var d=l.x,i=l.y,r=l.z,n=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*n-d*o,this.z=d*a-i*n,this},projectOnVector:function(r){var t=r.dot(this)/r.lengthSq();return this.copy(r).multiplyScalar(t)},projectOnPlane:function(){var r=new Ea;return function(t){return r.copy(this).projectOnVector(t),this.sub(r)}}(),reflect:function(){var r=new Ea;return function(t){return this.sub(r.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(r){var t=this.dot(r)/S(this.lengthSq()*r.lengthSq());return E(zp.clamp(t,-1,1))},distanceTo:function(r){return S(this.distanceToSquared(r))},distanceToSquared:function(a){var t=this.x-a.x,o=this.y-a.y,n=this.z-a.z;return t*t+o*o+n*n},manhattanDistanceTo:function(r){return T(this.x-r.x)+T(this.y-r.y)+T(this.z-r.z)},setFromSpherical:function(r){var t=z(r.phi)*r.radius;return this.x=t*z(r.theta),this.y=I(r.phi)*r.radius,this.z=t*I(r.theta),this},setFromCylindrical:function(r){return this.x=r.radius*z(r.theta),this.y=r.y,this.z=r.radius*I(r.theta),this},setFromMatrixPosition:function(r){var t=r.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(a){var t=this.setFromMatrixColumn(a,0).length(),o=this.setFromMatrixColumn(a,1).length(),n=this.setFromMatrixColumn(a,2).length();return this.x=t,this.y=o,this.z=n,this},setFromMatrixColumn:function(r,t){return this.fromArray(r.elements,4*t)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this.z=r[t+2],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r[t+2]=this.z,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this.z=r.getZ(t),this}}),Object.assign(va.prototype,{isMatrix3:!0,set:function(l,t,d,i,r,n,a,o,s){var c=this.elements;return c[0]=l,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=d,c[7]=n,c[8]=s,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(r){var t=this.elements,a=r.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],this},setFromMatrix4:function(r){var t=r.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var a=new Ea;return function(t){for(var o=0,n=t.count;o<n;o++)a.x=t.getX(o),a.y=t.getY(o),a.z=t.getZ(o),a.applyMatrix3(this),t.setXYZ(o,a.x,a.y,a.z);return t}}(),multiply:function(r){return this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(A,t){var M=A.elements,i=t.elements,r=this.elements,n=M[0],a=M[3],o=M[6],s=M[1],c=M[4],h=M[7],l=M[2],u=M[5],p=M[8],d=i[0],f=i[3],m=i[6],E=i[1],g=i[4],y=i[7],x=i[2],v=i[5],T=i[8];return r[0]=n*d+a*E+o*x,r[3]=n*f+a*g+o*v,r[6]=n*m+a*y+o*T,r[1]=s*d+c*E+h*x,r[4]=s*f+c*g+h*v,r[7]=s*m+c*y+h*T,r[2]=l*d+u*E+p*x,r[5]=l*f+u*g+p*v,r[8]=l*m+u*y+p*T,this},multiplyScalar:function(r){var t=this.elements;return t[0]*=r,t[3]*=r,t[6]*=r,t[1]*=r,t[4]*=r,t[7]*=r,t[2]*=r,t[5]*=r,t[8]*=r,this},determinant:function(){var l=this.elements,t=l[0],d=l[1],i=l[2],r=l[3],n=l[4],a=l[5],o=l[6],s=l[7],c=l[8];return t*n*c-t*a*s-d*r*c+d*a*o+i*r*s-i*n*o},getInverse:function(A,t){A&&A.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var M=A.elements,i=this.elements,r=M[0],n=M[1],a=M[2],o=M[3],s=M[4],c=M[5],h=M[6],l=M[7],u=M[8],p=u*s-c*l,d=c*h-u*o,f=l*o-s*h,m=r*p+n*d+a*f;if(0===m){var x="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(x);return console.warn(x),this.identity()}var g=1/m;return i[0]=p*g,i[1]=(a*l-u*n)*g,i[2]=(c*n-a*s)*g,i[3]=d*g,i[4]=(u*r-a*h)*g,i[5]=(a*o-c*r)*g,i[6]=f*g,i[7]=(n*h-l*r)*g,i[8]=(s*r-n*o)*g,this},transpose:function(){var r=this.elements,a;return a=r[1],r[1]=r[3],r[3]=a,a=r[2],r[2]=r[6],r[6]=a,a=r[5],r[5]=r[7],r[7]=a,this},getNormalMatrix:function(r){return this.setFromMatrix4(r).getInverse(this).transpose()},transposeIntoArray:function(r){var t=this.elements;return r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8],this},setUvTransform:function(l,t,d,p,u,n,a){var o=I(u),s=z(u);this.set(d*o,d*s,-d*(o*n+s*a)+n+l,-p*s,p*o,-p*(-s*n+o*a)+a+t,0,0,1)},scale:function(r,t){var a=this.elements;return a[0]*=r,a[3]*=r,a[6]*=r,a[1]*=t,a[4]*=t,a[7]*=t,this},rotate:function(l){var t=I(l),d=z(l),p=this.elements,r=p[0],n=p[3],a=p[6],o=p[1],s=p[4],c=p[7];return p[0]=t*r+d*o,p[3]=t*n+d*s,p[6]=t*a+d*c,p[1]=-d*r+t*o,p[4]=-d*n+t*s,p[7]=-d*a+t*c,this},translate:function(r,t){var a=this.elements;return a[0]+=r*a[2],a[3]+=r*a[5],a[6]+=r*a[8],a[1]+=t*a[2],a[4]+=t*a[5],a[7]+=t*a[8],this},equals:function(a){for(var t=this.elements,o=a.elements,n=0;9>n;n++)if(t[n]!==o[n])return!1;return!0},fromArray:function(r,t){void 0===t&&(t=0);for(var a=0;9>a;a++)this.elements[a]=r[a+t];return this},toArray:function(r,t){void 0===r&&(r=[]),void 0===t&&(t=0);var a=this.elements;return r[t]=a[0],r[t+1]=a[1],r[t+2]=a[2],r[t+3]=a[3],r[t+4]=a[4],r[t+5]=a[5],r[t+6]=a[6],r[t+7]=a[7],r[t+8]=a[8],r}});var lc=0;Ta.DEFAULT_IMAGE=void 0,Ta.DEFAULT_MAPPING=300,Ta.prototype=Object.assign(Object.create(t.prototype),{constructor:Ta,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.name=r.name,this.image=r.image,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.center.copy(r.center),this.rotation=r.rotation,this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrix.copy(r.matrix),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this},toJSON:function(a){var o=void 0===a||"string"==typeof a;if(!o&&void 0!==a.textures[this.uuid])return a.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var i=this.image;void 0===i.uuid&&(i.uuid=zp.generateUUID()),o||void 0!==a.images[i.uuid]||(a.images[i.uuid]={uuid:i.uuid,url:function(r){var t;if(r instanceof HTMLCanvasElement)t=r;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=r.width,t.height=r.height;var a=t.getContext("2d");r instanceof ImageData?a.putImageData(r,0,0):a.drawImage(r,0,0,r.width,r.height)}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(i)}),n.image=i.uuid}return o||(a.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(r){if(300===this.mapping){if(r.applyMatrix3(this.matrix),0>r.x||1<r.x)switch(this.wrapS){case vp:r.x-=D(r.x);break;case Tp:r.x=0>r.x?0:1;break;case bp:1===T(D(r.x)%2)?r.x=Ba(r.x)-r.x:r.x-=D(r.x);}if(0>r.y||1<r.y)switch(this.wrapT){case vp:r.y-=D(r.y);break;case Tp:r.y=0>r.y?0:1;break;case bp:1===T(D(r.y)%2)?r.y=Ba(r.y)-r.y:r.y-=D(r.y);}this.flipY&&(r.y=1-r.y)}}}),Object.defineProperty(Ta.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(ba.prototype,{isVector4:!0,set:function(a,t,o,n){return this.x=a,this.y=t,this.z=o,this.w=n,this},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setW:function(r){return this.w=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0===r.w?1:r.w,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this.z=r.z+t.z,this.w=r.w+t.w,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this.z+=r.z*t,this.w+=r.w*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this.z=r.z-t.z,this.w=r.w-t.w,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},applyMatrix4:function(o){var t=this.x,s=this.y,i=this.z,r=this.w,n=o.elements;return this.x=n[0]*t+n[4]*s+n[8]*i+n[12]*r,this.y=n[1]*t+n[5]*s+n[9]*i+n[13]*r,this.z=n[2]*t+n[6]*s+n[10]*i+n[14]*r,this.w=n[3]*t+n[7]*s+n[11]*i+n[15]*r,this},divideScalar:function(r){return this.multiplyScalar(1/r)},setAxisAngleFromQuaternion:function(r){this.w=2*E(r.w);var t=S(1-r.w*r.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=r.x/t,this.y=r.y/t,this.z=r.z/t),this},setAxisAngleFromRotationMatrix:function(A){var t=A.elements,a=t[0],o=t[4],s=t[8],c=t[1],h=t[5],l=t[9],u=t[2],p=t[6],d=t[10],f,M,i,r;if(.01>T(o-c)&&.01>T(s-u)&&.01>T(l-p)){if(.1>T(o+c)&&.1>T(s+u)&&.1>T(l+p)&&.1>T(a+h+d-3))return this.set(1,0,0,0),this;f=ga;var n=(a+1)/2,m=(h+1)/2,v=(d+1)/2,g=(o+c)/4,y=(s+u)/4,x=(l+p)/4;return n>m&&n>v?.01>n?(M=0,i=.707106781,r=.707106781):(M=S(n),i=g/M,r=y/M):m>v?.01>m?(M=.707106781,i=0,r=.707106781):(i=S(m),M=g/i,r=x/i):.01>v?(M=.707106781,i=.707106781,r=0):(r=S(v),M=y/r,i=x/r),this.set(M,i,r,f),this}var b=S((p-l)*(p-l)+(s-u)*(s-u)+(c-o)*(c-o));return .001>T(b)&&(b=1),this.x=(p-l)/b,this.y=(s-u)/b,this.z=(c-o)/b,this.w=E((a+h+d-1)/2),this},min:function(r){return this.x=O(this.x,r.x),this.y=O(this.y,r.y),this.z=O(this.z,r.z),this.w=O(this.w,r.w),this},max:function(r){return this.x=C(this.x,r.x),this.y=C(this.y,r.y),this.z=C(this.z,r.z),this.w=C(this.w,r.w),this},clamp:function(r,t){return this.x=C(r.x,O(t.x,this.x)),this.y=C(r.y,O(t.y,this.y)),this.z=C(r.z,O(t.z,this.z)),this.w=C(r.w,O(t.w,this.w)),this},clampScalar:function(){var a,t;return function(o,n){return void 0===a&&(a=new ba,t=new ba),a.set(o,o,o,o),t.set(n,n,n,n),this.clamp(a,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(C(r,O(t,a)))},floor:function(){return this.x=D(this.x),this.y=D(this.y),this.z=D(this.z),this.w=D(this.w),this},ceil:function(){return this.x=Ba(this.x),this.y=Ba(this.y),this.z=Ba(this.z),this.w=Ba(this.w),this},round:function(){return this.x=a(this.x),this.y=a(this.y),this.z=a(this.z),this.w=a(this.w),this},roundToZero:function(){return this.x=0>this.x?Ba(this.x):D(this.x),this.y=0>this.y?Ba(this.y):D(this.y),this.z=0>this.z?Ba(this.z):D(this.z),this.w=0>this.w?Ba(this.w):D(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return T(this.x)+T(this.y)+T(this.z)+T(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this.z+=(r.z-this.z)*t,this.w+=(r.w-this.w)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this.z=r[t+2],this.w=r[t+3],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r[t+2]=this.z,r[t+3]=this.w,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this.z=r.getZ(t),this.w=r.getW(t),this}}),n.prototype=Object.assign(Object.create(t.prototype),{constructor:n,isWebGLRenderTarget:!0,setSize:function(r,t){this.width===r&&this.height===t||(this.width=r,this.height=t,this.dispose()),this.viewport.set(0,0,r,t),this.scissor.set(0,0,r,t)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.width=r.width,this.height=r.height,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),La.prototype=Object.create(n.prototype),La.prototype.constructor=La,La.prototype.isWebGLRenderTargetCube=!0,c.prototype=Object.create(Ta.prototype),c.prototype.constructor=c,c.prototype.isDataTexture=!0,u.prototype=Object.create(Ta.prototype),u.prototype.constructor=u,u.prototype.isCubeTexture=!0,Object.defineProperty(u.prototype,"images",{get:function(){return this.image},set:function(r){this.image=r}});var uc=new Ta,pc=new u,dc=[],fc=[],mc=new Float32Array(16),vc=new Float32Array(9);V.prototype.setValue=function(o,t){for(var s=this.seq,i=0,r=s.length,n;i!==r;++i)n=s[i],n.setValue(o,t[n.id])};var gc=/([\w\d_]+)(\])?(\[|\.)?/g;W.prototype.setValue=function(a,t,o){var n=this.map[t];void 0!==n&&n.setValue(a,o,this.renderer)},W.prototype.setOptional=function(a,t,o){var n=t[o];void 0!==n&&this.setValue(a,o,n)},W.upload=function(l,t,d,i){for(var r=0,n=t.length;r!==n;++r){var a=t[r],o=d[a.id];!1!==o.needsUpdate&&a.setValue(l,o.value,i)}},W.seqWithValue=function(o,t){for(var s=[],i=0,r=o.length,n;i!==r;++i)n=o[i],n.id in t&&s.push(n);return s};var yc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(X.prototype,{isColor:!0,r:1,g:1,b:1,set:function(r){return r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r),this},setScalar:function(r){return this.r=r,this.g=r,this.b=r,this},setHex:function(r){return r=D(r),this.r=(255&r>>16)/255,this.g=(255&r>>8)/255,this.b=(255&r)/255,this},setRGB:function(r,t,a){return this.r=r,this.g=t,this.b=a,this},setHSL:function(){function o(r,a,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?r+6*(a-r)*o:.5>o?a:o<2/3?r+6*(a-r)*(2/3-o):r}return function(t,s,i){if(t=zp.euclideanModulo(t,1),s=zp.clamp(s,0,1),i=zp.clamp(i,0,1),0===s)this.r=this.g=this.b=i;else{var r=.5>=i?i*(1+s):i+s-i*s,n=2*i-r;this.r=o(n,r,t+1/3),this.g=o(n,r,t),this.b=o(n,r,t-1/3)}return this}}(),setStyle:function(d){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+d+" will be ignored.")}var p;if(p=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(d)){var i=p[1],n=p[2],a;switch(i){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=O(255,parseInt(a[1],10))/255,this.g=O(255,parseInt(a[2],10))/255,this.b=O(255,parseInt(a[3],10))/255,t(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=O(100,parseInt(a[1],10))/100,this.g=O(100,parseInt(a[2],10))/100,this.b=O(100,parseInt(a[3],10))/100,t(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){var r=parseFloat(a[1])/360,o=parseInt(a[2],10)/100,s=parseInt(a[3],10)/100;return t(a[5]),this.setHSL(r,o,s)}}}else if(p=/^\#([A-Fa-f0-9]+)$/.exec(d)){var c=p[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(d&&0<d.length){var c=yc[d];void 0===c?console.warn("THREE.Color: Unknown color "+d):this.setHex(c)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(r){return this.r=r.r,this.g=r.g,this.b=r.b,this},copyGammaToLinear:function(r,t){return void 0===t&&(t=2),this.r=A(r.r,t),this.g=A(r.g,t),this.b=A(r.b,t),this},copyLinearToGamma:function(r,t){void 0===t&&(t=2);var a=0<t?1/t:1;return this.r=A(r.r,a),this.g=A(r.g,a),this.b=A(r.b,a),this},convertGammaToLinear:function(){var r=this.r,t=this.g,a=this.b;return this.r=r*r,this.g=t*t,this.b=a*a,this},convertLinearToGamma:function(){return this.r=S(this.r),this.g=S(this.g),this.b=S(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(d){var t=d||{h:0,s:0,l:0},r=this.r,n=this.g,a=this.b,o=C(r,n,a),s=O(r,n,a),c=(s+o)/2,p,u;if(s===o)p=0,u=0;else{var i=o-s;switch(u=.5>=c?i/(o+s):i/(2-o-s),o){case r:p=(n-a)/i+(n<a?6:0);break;case n:p=(a-r)/i+2;break;case a:p=(r-n)/i+4;}p/=6}return t.h=p,t.s=u,t.l=c,t},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(a,t,o){var n=this.getHSL();return n.h+=a,n.s+=t,n.l+=o,this.setHSL(n.h,n.s,n.l),this},add:function(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this},addColors:function(r,t){return this.r=r.r+t.r,this.g=r.g+t.g,this.b=r.b+t.b,this},addScalar:function(r){return this.r+=r,this.g+=r,this.b+=r,this},sub:function(r){return this.r=C(0,this.r-r.r),this.g=C(0,this.g-r.g),this.b=C(0,this.b-r.b),this},multiply:function(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this},multiplyScalar:function(r){return this.r*=r,this.g*=r,this.b*=r,this},lerp:function(r,t){return this.r+=(r.r-this.r)*t,this.g+=(r.g-this.g)*t,this.b+=(r.b-this.b)*t,this},equals:function(r){return r.r===this.r&&r.g===this.g&&r.b===this.b},fromArray:function(r,t){return void 0===t&&(t=0),this.r=r[t],this.g=r[t+1],this.b=r[t+2],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.r,r[t+1]=this.g,r[t+2]=this.b,r},toJSON:function(){return this.getHex()}});var xc={common:{diffuse:{value:new X(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new va},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Aa(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new X(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new X(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new va}}},bc={merge:function(a){for(var t={},o=0,i;o<a.length;o++)for(var r in i=this.clone(a[o]),i)t[r]=i[r];return t},clone:function(a){var t={};for(var o in a)for(var i in t[o]={},a[o]){var r=a[o][i];t[o][i]=r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?r.clone():Array.isArray(r)?r.slice():r}return t}},_c={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},wc={basic:{uniforms:bc.merge([xc.common,xc.specularmap,xc.envmap,xc.aomap,xc.lightmap,xc.fog]),vertexShader:_c.meshbasic_vert,fragmentShader:_c.meshbasic_frag},lambert:{uniforms:bc.merge([xc.common,xc.specularmap,xc.envmap,xc.aomap,xc.lightmap,xc.emissivemap,xc.fog,xc.lights,{emissive:{value:new X(0)}}]),vertexShader:_c.meshlambert_vert,fragmentShader:_c.meshlambert_frag},phong:{uniforms:bc.merge([xc.common,xc.specularmap,xc.envmap,xc.aomap,xc.lightmap,xc.emissivemap,xc.bumpmap,xc.normalmap,xc.displacementmap,xc.gradientmap,xc.fog,xc.lights,{emissive:{value:new X(0)},specular:{value:new X(1118481)},shininess:{value:30}}]),vertexShader:_c.meshphong_vert,fragmentShader:_c.meshphong_frag},standard:{uniforms:bc.merge([xc.common,xc.envmap,xc.aomap,xc.lightmap,xc.emissivemap,xc.bumpmap,xc.normalmap,xc.displacementmap,xc.roughnessmap,xc.metalnessmap,xc.fog,xc.lights,{emissive:{value:new X(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:_c.meshphysical_vert,fragmentShader:_c.meshphysical_frag},points:{uniforms:bc.merge([xc.points,xc.fog]),vertexShader:_c.points_vert,fragmentShader:_c.points_frag},dashed:{uniforms:bc.merge([xc.common,xc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_c.linedashed_vert,fragmentShader:_c.linedashed_frag},depth:{uniforms:bc.merge([xc.common,xc.displacementmap]),vertexShader:_c.depth_vert,fragmentShader:_c.depth_frag},normal:{uniforms:bc.merge([xc.common,xc.bumpmap,xc.normalmap,xc.displacementmap,{opacity:{value:1}}]),vertexShader:_c.normal_vert,fragmentShader:_c.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_c.cube_vert,fragmentShader:_c.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_c.equirect_vert,fragmentShader:_c.equirect_frag},distanceRGBA:{uniforms:bc.merge([xc.common,xc.displacementmap,{referencePosition:{value:new Ea},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_c.distanceRGBA_vert,fragmentShader:_c.distanceRGBA_frag},shadow:{uniforms:bc.merge([xc.lights,xc.fog,{color:{value:new X(0)},opacity:{value:1}}]),vertexShader:_c.shadow_vert,fragmentShader:_c.shadow_frag}};wc.physical={uniforms:bc.merge([wc.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:_c.meshphysical_vert,fragmentShader:_c.meshphysical_frag},q.prototype=Object.create(Ta.prototype),q.prototype.constructor=q;var Mc=0;Z.prototype=Object.assign(Object.create(t.prototype),{constructor:Z,isMaterial:!0,onBeforeCompile:function(){},setValues:function(a){if(void 0!==a)for(var t in a){var o=a[t];if(!(void 0!==o))console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"!==t){var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(o):n&&n.isVector3&&o&&o.isVector3?n.copy(o):this[t]="overdraw"===t?+o:o}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===o}},toJSON:function(o){function s(a){var t=[];for(var o in a){var n=a[o];delete n.metadata,t.push(n)}return t}var l=void 0===o||"string"==typeof o;l&&(o={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(o).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(o).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(o).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(o).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(o).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==cp&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==$a&&(i.side=this.side),this.vertexColors!==sp&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),l){var r=s(o.textures),n=s(o.images);0<r.length&&(i.textures=r),0<n.length&&(i.images=n)}return i},clone:function(){return new this.constructor().copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.flatShading=a.flatShading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.userData=JSON.parse(JSON.stringify(a.userData)),this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var t=a.clippingPlanes,o=null;if(null!==t){var i=t.length;o=Array(i);for(var r=0;r!==i;++r)o[r]=t[r].clone()}return this.clippingPlanes=o,this.shadowSide=a.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Pa.prototype=Object.create(Z.prototype),Pa.prototype.constructor=Pa,Pa.prototype.isMeshDepthMaterial=!0,Pa.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.depthPacking=r.depthPacking,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this},ka.prototype=Object.create(Z.prototype),ka.prototype.constructor=ka,ka.prototype.isMeshDistanceMaterial=!0,ka.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this},Object.assign(Fa.prototype,{isBox3:!0,set:function(r,t){return this.min.copy(r),this.max.copy(t),this},setFromArray:function(d){for(var t=1/0,p=1/0,i=1/0,r=-1/0,n=-1/0,a=-1/0,o=0,s=d.length;o<s;o+=3){var c=d[o],m=d[o+1],l=d[o+2];c<t&&(t=c),m<p&&(p=m),l<i&&(i=l),c>r&&(r=c),m>n&&(n=m),l>a&&(a=l)}return this.min.set(t,p,i),this.max.set(r,n,a),this},setFromBufferAttribute:function(d){for(var t=1/0,p=1/0,i=1/0,r=-1/0,n=-1/0,a=-1/0,o=0,s=d.count;o<s;o++){var c=d.getX(o),m=d.getY(o),l=d.getZ(o);c<t&&(t=c),m<p&&(p=m),l<i&&(i=l),c>r&&(r=c),m>n&&(n=m),l>a&&(a=l)}return this.min.set(t,p,i),this.max.set(r,n,a),this},setFromPoints:function(r){this.makeEmpty();for(var t=0,a=r.length;t<a;t++)this.expandByPoint(r[t]);return this},setFromCenterAndSize:function(){var a=new Ea;return function(t,o){var n=a.copy(o).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),setFromObject:function(r){return this.makeEmpty(),this.expandByObject(r)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(r){var t=r||new Ea;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){var t=r||new Ea;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},expandByObject:function(){function a(r){var c=r.geometry;if(void 0!==c)if(c.isGeometry){var a=c.vertices;for(d=0,i=a.length;d<i;d++)l.copy(a[d]),l.applyMatrix4(r.matrixWorld),n.expandByPoint(l)}else if(c.isBufferGeometry){var o=c.attributes.position;if(void 0!==o)for(d=0,i=o.count;d<i;d++)l.fromBufferAttribute(o,d).applyMatrix4(r.matrixWorld),n.expandByPoint(l)}}var l=new Ea,n,d,i;return function(t){return n=this,t.updateMatrixWorld(!0),t.traverse(a),this}}(),containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z},getParameter:function(r,t){return(t||new Ea).set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},intersectsSphere:function(){var r=new Ea;return function(t){return this.clampPoint(t.center,r),r.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(r){var t,a;return 0<r.normal.x?(t=r.normal.x*this.min.x,a=r.normal.x*this.max.x):(t=r.normal.x*this.max.x,a=r.normal.x*this.min.x),0<r.normal.y?(t+=r.normal.y*this.min.y,a+=r.normal.y*this.max.y):(t+=r.normal.y*this.max.y,a+=r.normal.y*this.min.y),0<r.normal.z?(t+=r.normal.z*this.min.z,a+=r.normal.z*this.max.z):(t+=r.normal.z*this.max.z,a+=r.normal.z*this.min.z),t<=r.constant&&a>=r.constant},intersectsTriangle:function(){function d(r){var l,n;for(l=0,n=r.length-3;l<=n;l+=3){a.fromArray(r,l);var d=g.x*T(a.x)+g.y*T(a.y)+g.z*T(a.z),o=p.dot(a),s=m.dot(a),c=i.dot(a);if(C(-C(o,s,c),O(o,s,c))>d)return!1}return!0}var p=new Ea,m=new Ea,i=new Ea,t=new Ea,r=new Ea,o=new Ea,a=new Ea,n=new Ea,g=new Ea,s=new Ea;return function(l){if(this.isEmpty())return!1;this.getCenter(n),g.subVectors(this.max,n),p.subVectors(l.a,n),m.subVectors(l.b,n),i.subVectors(l.c,n),t.subVectors(m,p),r.subVectors(i,m),o.subVectors(p,i);var a=[0,-t.z,t.y,0,-r.z,r.y,0,-o.z,o.y,t.z,0,-t.x,r.z,0,-r.x,o.z,0,-o.x,-t.y,t.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!d(a)&&(a=[1,0,0,0,1,0,0,0,1],!!d(a)&&(s.crossVectors(t,r),a=[s.x,s.y,s.z],d(a)))}}(),clampPoint:function(r,t){return(t||new Ea).copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new Ea;return function(t){return r.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var r=new Ea;return function(t){var a=t||new $;return this.getCenter(a.center),a.radius=.5*this.getSize(r).length(),a}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},applyMatrix4:function(){var r=[new Ea,new Ea,new Ea,new Ea,new Ea,new Ea,new Ea,new Ea];return function(t){return this.isEmpty()?this:(r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(r),this)}}(),translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}),Object.assign($.prototype,{set:function(r,t){return this.center.copy(r),this.radius=t,this},setFromPoints:function(){var s=new Fa;return function(t,l){var i=this.center;void 0===l?s.setFromPoints(t).getCenter(i):i.copy(l);for(var r=0,n=0,a=t.length;n<a;n++)r=C(r,i.distanceToSquared(t[n]));return this.radius=S(r),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.center.copy(r.center),this.radius=r.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(r){return r.distanceTo(this.center)-this.radius},intersectsSphere:function(r){var t=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(r){return r.intersectsSphere(this)},intersectsPlane:function(r){return T(r.distanceToPoint(this.center))<=this.radius},clampPoint:function(a,t){var o=this.center.distanceToSquared(a),n=t||new Ea;return n.copy(a),o>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n},getBoundingBox:function(r){var t=r||new Fa;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(r){return this.center.applyMatrix4(r),this.radius*=r.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(r){return r.center.equals(this.center)&&r.radius===this.radius}}),Object.assign(tt.prototype,{set:function(r,t){return this.normal.copy(r),this.constant=t,this},setComponents:function(a,t,o,n){return this.normal.set(a,t,o),this.constant=n,this},setFromNormalAndCoplanarPoint:function(r,t){return this.normal.copy(r),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var o=new Ea,t=new Ea;return function(s,i,r){var n=o.subVectors(r,i).cross(t.subVectors(s,i)).normalize();return this.setFromNormalAndCoplanarPoint(n,s),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},normalize:function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(r){return this.normal.dot(r)+this.constant},distanceToSphere:function(r){return this.distanceToPoint(r.center)-r.radius},projectPoint:function(r,t){return(t||new Ea).copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)},intersectLine:function(){var a=new Ea;return function(t,l){var i=l||new Ea,r=t.delta(a),n=this.normal.dot(r);if(0!==n){var o=-(t.start.dot(this.normal)+this.constant)/n;if(!(0>o||1<o))return i.copy(r).multiplyScalar(o).add(t.start)}else if(0===this.distanceToPoint(t.start))return i.copy(t.start)}}(),intersectsLine:function(r){var t=this.distanceToPoint(r.start),a=this.distanceToPoint(r.end);return 0>t&&0<a||0>a&&0<t},intersectsBox:function(r){return r.intersectsPlane(this)},intersectsSphere:function(r){return r.intersectsPlane(this)},coplanarPoint:function(r){return(r||new Ea).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var s=new Ea,t=new va;return function(l,i){var r=i||t.getNormalMatrix(l),n=this.coplanarPoint(s).applyMatrix4(l),a=this.normal.applyMatrix3(r).normalize();return this.constant=-n.dot(a),this}}(),translate:function(r){return this.constant-=r.dot(this.normal),this},equals:function(r){return r.normal.equals(this.normal)&&r.constant===this.constant}}),Object.assign(Ga.prototype,{set:function(s,t,l,i,r,n){var a=this.planes;return a[0].copy(s),a[1].copy(t),a[2].copy(l),a[3].copy(i),a[4].copy(r),a[5].copy(n),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){for(var t=this.planes,a=0;6>a;a++)t[a].copy(r.planes[a]);return this},setFromMatrix:function(A){var t=this.planes,M=A.elements,i=M[0],r=M[1],n=M[2],a=M[3],o=M[4],s=M[5],c=M[6],h=M[7],l=M[8],u=M[9],p=M[10],d=M[11],f=M[12],m=M[13],x=M[14],g=M[15];return t[0].setComponents(a-i,h-o,d-l,g-f).normalize(),t[1].setComponents(a+i,h+o,d+l,g+f).normalize(),t[2].setComponents(a+r,h+s,d+u,g+m).normalize(),t[3].setComponents(a-r,h-s,d-u,g-m).normalize(),t[4].setComponents(a-n,h-c,d-p,g-x).normalize(),t[5].setComponents(a+n,h+c,d+p,g+x).normalize(),this},intersectsObject:function(){var r=new $;return function(t){var a=t.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(r)}}(),intersectsSprite:function(){var r=new $;return function(t){return r.center.set(0,0,0),r.radius=.7071067811865476,r.applyMatrix4(t.matrixWorld),this.intersectsSphere(r)}}(),intersectsSphere:function(a){for(var t=this.planes,o=a.center,i=-a.radius,r=0;6>r;r++)if(t[r].distanceToPoint(o)<i)return!1;return!0},intersectsBox:function(){var l=new Ea,t=new Ea;return function(d){for(var i=this.planes,r=0,n;6>r;r++){n=i[r],l.x=0<n.normal.x?d.min.x:d.max.x,t.x=0<n.normal.x?d.max.x:d.min.x,l.y=0<n.normal.y?d.min.y:d.max.y,t.y=0<n.normal.y?d.max.y:d.min.y,l.z=0<n.normal.z?d.min.z:d.max.z,t.z=0<n.normal.z?d.max.z:d.min.z;var a=n.distanceToPoint(l),o=n.distanceToPoint(t);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(r){for(var t=this.planes,a=0;6>a;a++)if(0>t[a].distanceToPoint(r))return!1;return!0}}),rt.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],rt.DefaultOrder="XYZ",Object.defineProperties(rt.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback()}}}),Object.assign(rt.prototype,{isEuler:!0,set:function(a,t,o,n){return this._x=a,this._y=t,this._z=o,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this.onChangeCallback(),this},setFromRotationMatrix:function(m,t,g){var i=Math.asin,y=zp.clamp,r=m.elements,n=r[0],a=r[4],f=r[8],s=r[1],c=r[5],h=r[9],A=r[2],M=r[6],p=r[10];return t=t||this._order,"XYZ"===t?(this._y=i(y(f,-1,1)),.99999>T(f)?(this._x=ap(-h,p),this._z=ap(-a,n)):(this._x=ap(M,c),this._z=0)):"YXZ"===t?(this._x=i(-y(h,-1,1)),.99999>T(h)?(this._y=ap(f,p),this._z=ap(s,c)):(this._y=ap(-A,n),this._z=0)):"ZXY"===t?(this._x=i(y(M,-1,1)),.99999>T(M)?(this._y=ap(-A,p),this._z=ap(-a,c)):(this._y=0,this._z=ap(s,n))):"ZYX"===t?(this._y=i(-y(A,-1,1)),.99999>T(A)?(this._x=ap(M,p),this._z=ap(s,n)):(this._x=0,this._z=ap(-a,c))):"YZX"===t?(this._z=i(y(s,-1,1)),.99999>T(s)?(this._x=ap(-h,c),this._y=ap(-A,n)):(this._x=0,this._y=ap(f,p))):"XZY"===t?(this._z=i(-y(a,-1,1)),.99999>T(a)?(this._x=ap(M,c),this._y=ap(f,n)):(this._x=ap(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var a=new Ma;return function(t,o,n){return a.makeRotationFromQuaternion(t),this.setFromRotationMatrix(a,o,n)}}(),setFromVector3:function(r,t){return this.set(r.x,r.y,r.z,t||this._order)},reorder:function(){var r=new xa;return function(t){return r.setFromEuler(this),this.setFromQuaternion(r,t)}}(),equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},fromArray:function(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this.onChangeCallback(),this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this._x,r[t+1]=this._y,r[t+2]=this._z,r[t+3]=this._order,r},toVector3:function(r){return r?r.set(this._x,this._y,this._z):new Ea(this._x,this._y,this._z)},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){}}),Object.assign(at.prototype,{set:function(r){this.mask=0|1<<r},enable:function(r){this.mask|=0|1<<r},toggle:function(r){this.mask^=0|1<<r},disable:function(r){this.mask&=~(0|1<<r)},test:function(r){return 0!=(this.mask&r.mask)}});var Ec=0;ot.DefaultUp=new Ea(0,1,0),ot.DefaultMatrixAutoUpdate=!0,ot.prototype=Object.assign(Object.create(t.prototype),{constructor:ot,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(r){this.matrix.multiplyMatrices(r,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(r){return this.quaternion.premultiply(r),this},setRotationFromAxisAngle:function(r,t){this.quaternion.setFromAxisAngle(r,t)},setRotationFromEuler:function(r){this.quaternion.setFromEuler(r,!0)},setRotationFromMatrix:function(r){this.quaternion.setFromRotationMatrix(r)},setRotationFromQuaternion:function(r){this.quaternion.copy(r)},rotateOnAxis:function(){var r=new xa;return function(t,a){return r.setFromAxisAngle(t,a),this.quaternion.multiply(r),this}}(),rotateOnWorldAxis:function(){var r=new xa;return function(t,a){return r.setFromAxisAngle(t,a),this.quaternion.premultiply(r),this}}(),rotateX:function(){var r=new Ea(1,0,0);return function(t){return this.rotateOnAxis(r,t)}}(),rotateY:function(){var r=new Ea(0,1,0);return function(t){return this.rotateOnAxis(r,t)}}(),rotateZ:function(){var r=new Ea(0,0,1);return function(t){return this.rotateOnAxis(r,t)}}(),translateOnAxis:function(){var r=new Ea;return function(t,a){return r.copy(t).applyQuaternion(this.quaternion),this.position.add(r.multiplyScalar(a)),this}}(),translateX:function(){var r=new Ea(1,0,0);return function(t){return this.translateOnAxis(r,t)}}(),translateY:function(){var r=new Ea(0,1,0);return function(t){return this.translateOnAxis(r,t)}}(),translateZ:function(){var r=new Ea(0,0,1);return function(t){return this.translateOnAxis(r,t)}}(),localToWorld:function(r){return r.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var r=new Ma;return function(t){return t.applyMatrix4(r.getInverse(this.matrixWorld))}}(),lookAt:function(){var a=new Ma,t=new Ea;return function(o,i,r){o.isVector3?t.copy(o):t.set(o,i,r),this.isCamera?a.lookAt(this.position,t,this.up):a.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(a)}}(),add:function(r){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(null!==r.parent&&r.parent.remove(r),r.parent=this,r.dispatchEvent({type:"added"}),this.children.push(r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)},remove:function(r){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var a=this.children.indexOf(r);return-1!==a&&(r.parent=null,r.dispatchEvent({type:"removed"}),this.children.splice(a,1)),this},getObjectById:function(r){return this.getObjectByProperty("id",r)},getObjectByName:function(r){return this.getObjectByProperty("name",r)},getObjectByProperty:function(o,t){if(this[o]===t)return this;for(var s=0,i=this.children.length;s<i;s++){var r=this.children[s],n=r.getObjectByProperty(o,t);if(void 0!==n)return n}},getWorldPosition:function(r){var t=r||new Ea;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var a=new Ea,t=new Ea;return function(o){var n=o||new xa;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,n,t),n}}(),getWorldRotation:function(){var r=new xa;return function(t){var a=t||new rt;return this.getWorldQuaternion(r),a.setFromQuaternion(r,this.rotation.order,!1)}}(),getWorldScale:function(){var a=new Ea,t=new xa;return function(o){var n=o||new Ea;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(a,t,n),n}}(),getWorldDirection:function(){var r=new xa;return function(t){var a=t||new Ea;return this.getWorldQuaternion(r),a.set(0,0,1).applyQuaternion(r)}}(),raycast:function(){},traverse:function(a){a(this);for(var t=this.children,o=0,n=t.length;o<n;o++)t[o].traverse(a)},traverseVisible:function(a){if(!1!==this.visible){a(this);for(var t=this.children,o=0,n=t.length;o<n;o++)t[o].traverseVisible(a)}},traverseAncestors:function(r){var t=this.parent;null!==t&&(r(t),t.traverseAncestors(r))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var t=this.children,o=0,n=t.length;o<n;o++)t[o].updateMatrixWorld(a)},toJSON:function(g){function y(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(g)),r.uuid}function A(a){var t=[];for(var o in a){var n=a[o];delete n.metadata,t.push(n)}return t}var i=void 0===g||"string"==typeof g,r={};i&&(g={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var n={};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),!0===this.castShadow&&(n.castShadow=!0),!0===this.receiveShadow&&(n.receiveShadow=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),n.matrix=this.matrix.toArray(),void 0!==this.geometry){n.geometry=y(g.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var o=a.shapes;if(Array.isArray(o))for(var s=0,c=o.length,h;s<c;s++)h=o[s],y(g.shapes,h);else y(g.shapes,o)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var l=[],s=0,c=this.material.length;s<c;s++)l.push(y(g.materials,this.material[s]));n.material=l}else n.material=y(g.materials,this.material);if(0<this.children.length){n.children=[];for(var s=0;s<this.children.length;s++)n.children.push(this.children[s].toJSON(g).object)}if(i){var u=A(g.geometries),p=A(g.materials),d=A(g.textures),f=A(g.images),o=A(g.shapes);0<u.length&&(r.geometries=u),0<p.length&&(r.materials=p),0<d.length&&(r.textures=d),0<f.length&&(r.images=f),0<o.length&&(r.shapes=o)}return r.object=n,r},clone:function(r){return new this.constructor().copy(this,r)},copy:function(a,t){if(void 0===t&&(t=!0),this.name=a.name,this.up.copy(a.up),this.position.copy(a.position),this.quaternion.copy(a.quaternion),this.scale.copy(a.scale),this.matrix.copy(a.matrix),this.matrixWorld.copy(a.matrixWorld),this.matrixAutoUpdate=a.matrixAutoUpdate,this.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,this.layers.mask=a.layers.mask,this.visible=a.visible,this.castShadow=a.castShadow,this.receiveShadow=a.receiveShadow,this.frustumCulled=a.frustumCulled,this.renderOrder=a.renderOrder,this.userData=JSON.parse(JSON.stringify(a.userData)),!0===t)for(var o=0,n;o<a.children.length;o++)n=a.children[o],this.add(n.clone());return this}}),nt.prototype=Object.assign(Object.create(ot.prototype),{constructor:nt,isCamera:!0,copy:function(r,t){return ot.prototype.copy.call(this,r,t),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this},getWorldDirection:function(){var r=new xa;return function(t){var a=t||new Ea;return this.getWorldQuaternion(r),a.set(0,0,-1).applyQuaternion(r)}}(),updateMatrixWorld:function(r){ot.prototype.updateMatrixWorld.call(this,r),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),Ha.prototype=Object.assign(Object.create(nt.prototype),{constructor:Ha,isOrthographicCamera:!0,copy:function(r,t){return nt.prototype.copy.call(this,r,t),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=null===r.view?null:Object.assign({},r.view),this},setViewOffset:function(o,t,s,i,r,n){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),p=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=p-d,n=p+d,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){var s=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),m=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;r+=m*(this.view.offsetX/s),n=r+m*(this.view.width/s),a-=l*(this.view.offsetY/c),o=a-l*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,n,a,o,this.near,this.far)},toJSON:function(r){var t=ot.prototype.toJSON.call(this,r);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),Object.assign(Va.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var t=0,a=r.vertexNormals.length;t<a;t++)this.vertexNormals[t]=r.vertexNormals[t].clone();for(var t=0,a=r.vertexColors.length;t<a;t++)this.vertexColors[t]=r.vertexColors[t].clone();return this}});var Tc=0;lt.prototype=Object.assign(Object.create(t.prototype),{constructor:lt,isGeometry:!0,applyMatrix:function(o){for(var t=new va().getNormalMatrix(o),l=0,i=this.vertices.length;l<i;l++)this.vertices[l].applyMatrix4(o);for(var l=0,i=this.faces.length,r;l<i;l++){r=this.faces[l],r.normal.applyMatrix3(t).normalize();for(var n=0,a=r.vertexNormals.length;n<a;n++)r.vertexNormals[n].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var r=new Ma;return function(t){return r.makeRotationX(t),this.applyMatrix(r),this}}(),rotateY:function(){var r=new Ma;return function(t){return r.makeRotationY(t),this.applyMatrix(r),this}}(),rotateZ:function(){var r=new Ma;return function(t){return r.makeRotationZ(t),this.applyMatrix(r),this}}(),translate:function(){var a=new Ma;return function(t,o,n){return a.makeTranslation(t,o,n),this.applyMatrix(a),this}}(),scale:function(){var a=new Ma;return function(t,o,n){return a.makeScale(t,o,n),this.applyMatrix(a),this}}(),lookAt:function(){var r=new ot;return function(t){r.lookAt(t),r.updateMatrix(),this.applyMatrix(r.matrix)}}(),fromBufferGeometry:function(a){function t(r,t,m,i){var n=void 0===M?[]:[u[r].clone(),u[t].clone(),u[m].clone()],a=void 0===c?[]:[A.colors[r].clone(),A.colors[t].clone(),A.colors[m].clone()],o=new Va(r,t,m,n,a,i);A.faces.push(o),void 0!==h&&A.faceVertexUvs[0].push([p[r].clone(),p[t].clone(),p[m].clone()]),void 0!==l&&A.faceVertexUvs[1].push([d[r].clone(),d[t].clone(),d[m].clone()])}var A=this,r=null===a.index?void 0:a.index.array,n=a.attributes,o=n.position.array,M=void 0===n.normal?void 0:n.normal.array,c=void 0===n.color?void 0:n.color.array,h=void 0===n.uv?void 0:n.uv.array,l=void 0===n.uv2?void 0:n.uv2.array;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],p=[],d=[],i=0,s=0;i<o.length;i+=3,s+=2)A.vertices.push(new Ea(o[i],o[i+1],o[i+2])),void 0!==M&&u.push(new Ea(M[i],M[i+1],M[i+2])),void 0!==c&&A.colors.push(new X(c[i],c[i+1],c[i+2])),void 0!==h&&p.push(new Aa(h[s],h[s+1])),void 0!==l&&d.push(new Aa(l[s],l[s+1]));var m=a.groups;if(0<m.length)for(var i=0;i<m.length;i++)for(var g=m[i],y=g.start,f=g.count,s=y;s<y+f;s+=3)void 0===r?t(s,s+1,s+2,g.materialIndex):t(r[s],r[s+1],r[s+2],g.materialIndex);else if(void 0!==r)for(var i=0;i<r.length;i+=3)t(r[i],r[i+1],r[i+2]);else for(var i=0;i<o.length/3;i+=3)t(i,i+1,i+2);return this.computeFaceNormals(),null!==a.boundingBox&&(this.boundingBox=a.boundingBox.clone()),null!==a.boundingSphere&&(this.boundingSphere=a.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var r=this.boundingBox.getCenter().negate();return this.translate(r.x,r.y,r.z),r},normalize:function(){this.computeBoundingSphere();var r=this.boundingSphere.center,t=this.boundingSphere.radius,a=0===t?1:1/t,o=new Ma;return o.set(a,0,0,-a*r.x,0,a,0,-a*r.y,0,0,a,-a*r.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var a=new Ea,t=new Ea,l=0,i=this.faces.length;l<i;l++){var r=this.faces[l],n=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];a.subVectors(s,o),t.subVectors(n,o),a.cross(t),a.normalize(),r.normal.copy(a)}},computeVertexNormals:function(a){void 0===a&&(a=!0);var t,m,i,r,n,o;for(o=Array(this.vertices.length),t=0,m=this.vertices.length;t<m;t++)o[t]=new Ea;if(a){var s=new Ea,u=new Ea,p,c,g;for(i=0,r=this.faces.length;i<r;i++)n=this.faces[i],p=this.vertices[n.a],c=this.vertices[n.b],g=this.vertices[n.c],s.subVectors(g,c),u.subVectors(p,c),s.cross(u),o[n.a].add(s),o[n.b].add(s),o[n.c].add(s)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)n=this.faces[i],o[n.a].add(n.normal),o[n.b].add(n.normal),o[n.c].add(n.normal);for(t=0,m=this.vertices.length;t<m;t++)o[t].normalize();for(i=0,r=this.faces.length;i<r;i++){n=this.faces[i];var l=n.vertexNormals;3===l.length?(l[0].copy(o[n.a]),l[1].copy(o[n.b]),l[2].copy(o[n.c])):(l[0]=o[n.a].clone(),l[1]=o[n.b].clone(),l[2]=o[n.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var a,t,o;for(this.computeFaceNormals(),a=0,t=this.faces.length;a<t;a++){o=this.faces[a];var n=o.vertexNormals;3===n.length?(n[0].copy(o.normal),n[1].copy(o.normal),n[2].copy(o.normal)):(n[0]=o.normal.clone(),n[1]=o.normal.clone(),n[2]=o.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var a,t,d,i,r;for(d=0,i=this.faces.length;d<i;d++)for(r=this.faces[d],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),a=0,t=r.vertexNormals.length;a<t;a++)r.__originalVertexNormals[a]?r.__originalVertexNormals[a].copy(r.vertexNormals[a]):r.__originalVertexNormals[a]=r.vertexNormals[a].clone();var n=new lt;for(n.faces=this.faces,a=0,t=this.morphTargets.length;a<t;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var o=this.morphNormals[a].faceNormals,p=this.morphNormals[a].vertexNormals,l,s;for(d=0,i=this.faces.length;d<i;d++)l=new Ea,s={a:new Ea,b:new Ea,c:new Ea},o.push(l),p.push(s)}var c=this.morphNormals[a];n.vertices=this.morphTargets[a].vertices,n.computeFaceNormals(),n.computeVertexNormals();var l,s;for(d=0,i=this.faces.length;d<i;d++)r=this.faces[d],l=c.faceNormals[d],s=c.vertexNormals[d],l.copy(r.normal),s.a.copy(r.vertexNormals[0]),s.b.copy(r.vertexNormals[1]),s.c.copy(r.vertexNormals[2])}for(d=0,i=this.faces.length;d<i;d++)r=this.faces[d],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Fa),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new $),this.boundingSphere.setFromPoints(this.vertices)},merge:function(o,L,D){if(!o||!o.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",o);var i=this.vertices.length,n=this.vertices,a=o.vertices,s=this.faces,c=o.faces,h=this.faceVertexUvs[0],l=o.faceVertexUvs[0],u=this.colors,p=o.colors,d;void 0===D&&(D=0),void 0!==L&&(d=new va().getNormalMatrix(L));for(var r=0,f=a.length;r<f;r++){var m=a[r],v=m.clone();void 0!==L&&v.applyMatrix4(L),n.push(v)}for(var r=0,f=p.length;r<f;r++)u.push(p[r].clone());for(r=0,f=c.length;r<f;r++){var g=c[r],N=g.vertexNormals,w=g.vertexColors,M,y,x;M=new Va(g.a+i,g.b+i,g.c+i),M.normal.copy(g.normal),void 0!==d&&M.normal.applyMatrix3(d).normalize();for(var b=0,E=N.length;b<E;b++)y=N[b].clone(),void 0!==d&&y.applyMatrix3(d).normalize(),M.vertexNormals.push(y);M.color.copy(g.color);for(var b=0,E=w.length;b<E;b++)x=w[b],M.vertexColors.push(x.clone());M.materialIndex=g.materialIndex+D,s.push(M)}for(r=0,f=l.length;r<f;r++){var T=l[r],C=[];if(void 0!==T){for(var b=0,E=T.length;b<E;b++)C.push(T[b].clone());h.push(C)}}},mergeMesh:function(r){return r&&r.isMesh?void(r.matrixAutoUpdate&&r.updateMatrix(),this.merge(r.geometry,r.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",r)},mergeVertices:function(){var g={},c=[],h=[],l=10000,u,t,y,i,r,n,A,o;for(y=0,i=this.vertices.length;y<i;y++)u=this.vertices[y],t=a(u.x*l)+"_"+a(u.y*l)+"_"+a(u.z*l),void 0===g[t]?(g[t]=y,c.push(this.vertices[y]),h[y]=c.length-1):h[y]=h[g[t]];var s=[];for(y=0,i=this.faces.length;y<i;y++){r=this.faces[y],r.a=h[r.a],r.b=h[r.b],r.c=h[r.c],n=[r.a,r.b,r.c];for(var p=0;3>p;p++)if(n[p]===n[(p+1)%3]){s.push(y);break}}for(y=s.length-1;0<=y;y--){var d=s[y];for(this.faces.splice(d,1),A=0,o=this.faceVertexUvs.length;A<o;A++)this.faceVertexUvs[A].splice(d,1)}var f=this.vertices.length-c.length;return this.vertices=c,f},setFromPoints:function(a){this.vertices=[];for(var t=0,o=a.length,n;t<o;t++)n=a[t],this.vertices.push(new Ea(n.x,n.y,n.z||0));return this},sortFacesByMaterialIndex:function(){function l(r,a){return r.materialIndex-a.materialIndex}for(var t=this.faces,d=t.length,i=0;i<d;i++)t[i]._id=i;t.sort(l);var r=this.faceVertexUvs[0],o=this.faceVertexUvs[1],s,n;r&&r.length===d&&(s=[]),o&&o.length===d&&(n=[]);for(var i=0,a;i<d;i++)a=t[i]._id,s&&s.push(r[a]),n&&n.push(o[a]);s&&(this.faceVertexUvs[0]=s),n&&(this.faceVertexUvs[1]=n)},toJSON:function(){function A(r,a,o){return o?r|1<<a:r&~(1<<a)}function t(r){var t=r.x.toString()+r.y.toString()+r.z.toString();return void 0===u[t]?(u[t]=l.length/3,l.push(r.x,r.y,r.z),u[t]):u[t]}function L(r){var t=r.r.toString()+r.g.toString()+r.b.toString();return void 0===d[t]?(d[t]=p.length,p.push(r.getHex()),d[t]):d[t]}function i(r){var t=r.x.toString()+r.y.toString();return void 0===m[t]?(m[t]=f.length/2,f.push(r.x,r.y),m[t]):m[t]}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var n=this.parameters;for(var a in n)void 0!==n[a]&&(r[a]=n[a]);return r}for(var o=[],s=0,c;s<this.vertices.length;s++)c=this.vertices[s],o.push(c.x,c.y,c.z);for(var h=[],l=[],u={},p=[],d={},f=[],m={},s=0;s<this.faces.length;s++){var v=this.faces[s],g=void 0!==this.faceVertexUvs[0][s],y=0<v.normal.length(),x=0<v.vertexNormals.length,b=1!==v.color.r||1!==v.color.g||1!==v.color.b,D=0<v.vertexColors.length,N=0;if(N=A(N,0,0),N=A(N,1,!0),N=A(N,2,!1),N=A(N,3,g),N=A(N,4,y),N=A(N,5,x),N=A(N,6,b),N=A(N,7,D),h.push(N),h.push(v.a,v.b,v.c),h.push(v.materialIndex),g){var M=this.faceVertexUvs[0][s];h.push(i(M[0]),i(M[1]),i(M[2]))}if(y&&h.push(t(v.normal)),x){var E=v.vertexNormals;h.push(t(E[0]),t(E[1]),t(E[2]))}if(b&&h.push(L(v.color)),D){var T=v.vertexColors;h.push(L(T[0]),L(T[1]),L(T[2]))}}return r.data={},r.data.vertices=o,r.data.normals=l,0<p.length&&(r.data.colors=p),0<f.length&&(r.data.uvs=[f]),r.data.faces=h,r},clone:function(){return new lt().copy(this)},copy:function(A){var t,T,i,r,n,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=A.name;var o=A.vertices;for(t=0,T=o.length;t<T;t++)this.vertices.push(o[t].clone());var s=A.colors;for(t=0,T=s.length;t<T;t++)this.colors.push(s[t].clone());var c=A.faces;for(t=0,T=c.length;t<T;t++)this.faces.push(c[t].clone());for(t=0,T=A.faceVertexUvs.length;t<T;t++){var h=A.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,r=h.length;i<r;i++){var l=h[i],u=[];for(n=0,a=l.length;n<a;n++){var p=l[n];u.push(p.clone())}this.faceVertexUvs[t].push(u)}}var d=A.morphTargets;for(t=0,T=d.length;t<T;t++){var f={};if(f.name=d[t].name,void 0!==d[t].vertices)for(f.vertices=[],i=0,r=d[t].vertices.length;i<r;i++)f.vertices.push(d[t].vertices[i].clone());if(void 0!==d[t].normals)for(f.normals=[],i=0,r=d[t].normals.length;i<r;i++)f.normals.push(d[t].normals[i].clone());this.morphTargets.push(f)}var m=A.morphNormals;for(t=0,T=m.length;t<T;t++){var v={};if(void 0!==m[t].vertexNormals)for(v.vertexNormals=[],i=0,r=m[t].vertexNormals.length;i<r;i++){var g=m[t].vertexNormals[i],y={};y.a=g.a.clone(),y.b=g.b.clone(),y.c=g.c.clone(),v.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(v.faceNormals=[],i=0,r=m[t].faceNormals.length;i<r;i++)v.faceNormals.push(m[t].faceNormals[i].clone());this.morphNormals.push(v)}var x=A.skinWeights;for(t=0,T=x.length;t<T;t++)this.skinWeights.push(x[t].clone());var b=A.skinIndices;for(t=0,T=b.length;t<T;t++)this.skinIndices.push(b[t].clone());var L=A.lineDistances;for(t=0,T=L.length;t<T;t++)this.lineDistances.push(L[t]);var D=A.boundingBox;null!==D&&(this.boundingBox=D.clone());var M=A.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=A.elementsNeedUpdate,this.verticesNeedUpdate=A.verticesNeedUpdate,this.uvsNeedUpdate=A.uvsNeedUpdate,this.normalsNeedUpdate=A.normalsNeedUpdate,this.colorsNeedUpdate=A.colorsNeedUpdate,this.lineDistancesNeedUpdate=A.lineDistancesNeedUpdate,this.groupsNeedUpdate=A.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Ya.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(Ya.prototype,{isBufferAttribute:!0,setArray:function(r){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===r?0:r.length/this.itemSize,this.array=r},setDynamic:function(r){return this.dynamic=r,this},copy:function(r){return this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.dynamic=r.dynamic,this},copyAt:function(a,t,o){a*=this.itemSize,o*=t.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[a+i]=t.array[o+i];return this},copyArray:function(r){return this.array.set(r),this},copyColorsArray:function(o){for(var t=this.array,s=0,i=0,r=o.length,n;i<r;i++)n=o[i],void 0===n&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),n=new X),t[s++]=n.r,t[s++]=n.g,t[s++]=n.b;return this},copyIndicesArray:function(o){for(var t=this.array,s=0,i=0,r=o.length,n;i<r;i++)n=o[i],t[s++]=n.a,t[s++]=n.b,t[s++]=n.c;return this},copyVector2sArray:function(i){for(var t=this.array,s=0,r=0,n=i.length,a;r<n;r++)a=i[r],void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new Aa),t[s++]=a.x,t[s++]=a.y;return this},copyVector3sArray:function(a){for(var t=this.array,s=0,i=0,r=a.length,n;i<r;i++)n=a[i],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),n=new Ea),t[s++]=n.x,t[s++]=n.y,t[s++]=n.z;return this},copyVector4sArray:function(o){for(var t=this.array,s=0,i=0,r=o.length,n;i<r;i++)n=o[i],void 0===n&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),n=new ba),t[s++]=n.x,t[s++]=n.y,t[s++]=n.z,t[s++]=n.w;return this},set:function(r,t){return void 0===t&&(t=0),this.array.set(r,t),this},getX:function(r){return this.array[r*this.itemSize]},setX:function(r,t){return this.array[r*this.itemSize]=t,this},getY:function(r){return this.array[r*this.itemSize+1]},setY:function(r,t){return this.array[r*this.itemSize+1]=t,this},getZ:function(r){return this.array[r*this.itemSize+2]},setZ:function(r,t){return this.array[r*this.itemSize+2]=t,this},getW:function(r){return this.array[r*this.itemSize+3]},setW:function(r,t){return this.array[r*this.itemSize+3]=t,this},setXY:function(r,t,a){return r*=this.itemSize,this.array[r+0]=t,this.array[r+1]=a,this},setXYZ:function(a,t,o,n){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=o,this.array[a+2]=n,this},setXYZW:function(a,t,o,i,r){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=o,this.array[a+2]=i,this.array[a+3]=r,this},onUpload:function(r){return this.onUploadCallback=r,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),pt.prototype=Object.create(Ya.prototype),pt.prototype.constructor=pt,dt.prototype=Object.create(Ya.prototype),dt.prototype.constructor=dt,ft.prototype=Object.create(Ya.prototype),ft.prototype.constructor=ft,mt.prototype=Object.create(Ya.prototype),mt.prototype.constructor=mt,vt.prototype=Object.create(Ya.prototype),vt.prototype.constructor=vt,gt.prototype=Object.create(Ya.prototype),gt.prototype.constructor=gt,yt.prototype=Object.create(Ya.prototype),yt.prototype.constructor=yt,xt.prototype=Object.create(Ya.prototype),xt.prototype.constructor=xt,bt.prototype=Object.create(Ya.prototype),bt.prototype.constructor=bt,Object.assign(_t.prototype,{computeGroups:function(s){for(var t=[],i=void 0,l=s.faces,n=0,a,d;n<l.length;n++)d=l[n],d.materialIndex!==i&&(i=d.materialIndex,void 0!==a&&(a.count=3*n-a.start,t.push(a)),a={start:3*n,materialIndex:i});void 0!==a&&(a.count=3*n-a.start,t.push(a)),this.groups=t},fromGeometry:function(i){var t=i.faces,r=i.vertices,n=i.faceVertexUvs,a=n[0]&&0<n[0].length,o=n[1]&&0<n[1].length,s=i.morphTargets,c=s.length,h;if(0<c){h=[];for(var A=0;A<c;A++)h[A]=[];this.morphTargets.position=h}var l=i.morphNormals,p=l.length,d;if(0<p){d=[];for(var A=0;A<p;A++)d[A]=[];this.morphTargets.normal=d}for(var u=i.skinIndices,f=i.skinWeights,m=u.length===r.length,v=f.length===r.length,A=0,g;A<t.length;A++){g=t[A],this.vertices.push(r[g.a],r[g.b],r[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=g.normal;this.normals.push(x,x,x)}var b=g.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var L=g.color;this.colors.push(L,L,L)}if(!0===a){var D=n[0][A];void 0===D?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",A),this.uvs.push(new Aa,new Aa,new Aa)):this.uvs.push(D[0],D[1],D[2])}if(!0===o){var D=n[1][A];void 0===D?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",A),this.uvs2.push(new Aa,new Aa,new Aa)):this.uvs2.push(D[0],D[1],D[2])}for(var M=0,E;M<c;M++)E=s[M].vertices,h[M].push(E[g.a],E[g.b],E[g.c]);for(var M=0,T;M<p;M++)T=l[M].vertexNormals[A],d[M].push(T.a,T.b,T.c);m&&this.skinIndices.push(u[g.a],u[g.b],u[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(i),this.verticesNeedUpdate=i.verticesNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}});var Sc=1;Mt.prototype=Object.assign(Object.create(t.prototype),{constructor:Mt,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(r){this.index=Array.isArray(r)?new(65535<wt(r)?yt:vt)(r,1):r},addAttribute:function(r,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===r?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[r]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(r,new Ya(arguments[1],arguments[2])))},getAttribute:function(r){return this.attributes[r]},removeAttribute:function(r){return delete this.attributes[r],this},addGroup:function(r,a,o){this.groups.push({start:r,count:a,materialIndex:void 0===o?0:o})},clearGroups:function(){this.groups=[]},setDrawRange:function(r,t){this.drawRange.start=r,this.drawRange.count=t},applyMatrix:function(r){var t=this.attributes.position;void 0!==t&&(r.applyToBufferAttribute(t),t.needsUpdate=!0);var a=this.attributes.normal;return void 0!==a&&(new va().getNormalMatrix(r).applyToBufferAttribute(a),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var r=new Ma;return function(t){return r.makeRotationX(t),this.applyMatrix(r),this}}(),rotateY:function(){var r=new Ma;return function(t){return r.makeRotationY(t),this.applyMatrix(r),this}}(),rotateZ:function(){var r=new Ma;return function(t){return r.makeRotationZ(t),this.applyMatrix(r),this}}(),translate:function(){var a=new Ma;return function(t,o,n){return a.makeTranslation(t,o,n),this.applyMatrix(a),this}}(),scale:function(){var a=new Ma;return function(t,o,n){return a.makeScale(t,o,n),this.applyMatrix(a),this}}(),lookAt:function(){var r=new ot;return function(t){r.lookAt(t),r.updateMatrix(),this.applyMatrix(r.matrix)}}(),center:function(){this.computeBoundingBox();var r=this.boundingBox.getCenter().negate();return this.translate(r.x,r.y,r.z),r},setFromObject:function(a){var t=a.geometry;if(a.isPoints||a.isLine){var o=new xt(3*t.vertices.length,3),i=new xt(3*t.colors.length,3);if(this.addAttribute("position",o.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var r=new xt(t.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else a.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(a){for(var t=[],o=0,i=a.length,r;o<i;o++)r=a[o],t.push(r.x,r.y,r.z||0);return this.addAttribute("position",new xt(t,3)),this},updateFromObject:function(a){var t=a.geometry;if(a.isMesh){var o=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(o=void 0,t.elementsNeedUpdate=!1),void 0===o)return this.fromGeometry(t);o.verticesNeedUpdate=t.verticesNeedUpdate,o.normalsNeedUpdate=t.normalsNeedUpdate,o.colorsNeedUpdate=t.colorsNeedUpdate,o.uvsNeedUpdate=t.uvsNeedUpdate,o.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=o}var n;return!0===t.verticesNeedUpdate&&(n=this.attributes.position,void 0!==n&&(n.copyVector3sArray(t.vertices),n.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(n=this.attributes.normal,void 0!==n&&(n.copyVector3sArray(t.normals),n.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(n=this.attributes.color,void 0!==n&&(n.copyColorsArray(t.colors),n.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(n=this.attributes.uv,void 0!==n&&(n.copyVector2sArray(t.uvs),n.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(n=this.attributes.lineDistance,void 0!==n&&(n.copyArray(t.lineDistances),n.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(a.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(r){return r.__directGeometry=new _t().fromGeometry(r),this.fromDirectGeometry(r.__directGeometry)},fromDirectGeometry:function(g){var t=new Float32Array(3*g.vertices.length);if(this.addAttribute("position",new Ya(t,3).copyVector3sArray(g.vertices)),0<g.normals.length){var y=new Float32Array(3*g.normals.length);this.addAttribute("normal",new Ya(y,3).copyVector3sArray(g.normals))}if(0<g.colors.length){var i=new Float32Array(3*g.colors.length);this.addAttribute("color",new Ya(i,3).copyColorsArray(g.colors))}if(0<g.uvs.length){var r=new Float32Array(2*g.uvs.length);this.addAttribute("uv",new Ya(r,2).copyVector2sArray(g.uvs))}if(0<g.uvs2.length){var n=new Float32Array(2*g.uvs2.length);this.addAttribute("uv2",new Ya(n,2).copyVector2sArray(g.uvs2))}if(0<g.indices.length){var a=65535<wt(g.indices)?Uint32Array:Uint16Array,o=new a(3*g.indices.length);this.setIndex(new Ya(o,1).copyIndicesArray(g.indices))}for(var s in this.groups=g.groups,g.morphTargets){for(var c=[],h=g.morphTargets[s],l=0,u=h.length;l<u;l++){var p=h[l],d=new xt(3*p.length,3);c.push(d.copyVector3sArray(p))}this.morphAttributes[s]=c}if(0<g.skinIndices.length){var f=new xt(4*g.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(g.skinIndices))}if(0<g.skinWeights.length){var m=new xt(4*g.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(g.skinWeights))}return null!==g.boundingSphere&&(this.boundingSphere=g.boundingSphere.clone()),null!==g.boundingBox&&(this.boundingBox=g.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new Fa);var r=this.attributes.position;void 0===r?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(r),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var s=new Fa,t=new Ea;return function(){null===this.boundingSphere&&(this.boundingSphere=new $);var l=this.attributes.position;if(l){var i=this.boundingSphere.center;s.setFromBufferAttribute(l),s.getCenter(i);for(var r=0,n=0,a=l.count;n<a;n++)t.x=l.getX(n),t.y=l.getY(n),t.z=l.getZ(n),r=C(r,i.distanceToSquared(t));this.boundingSphere.radius=S(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var a=this.index,t=this.attributes,A=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new Ya(new Float32Array(i.length),3));else for(var r=t.normal.array,n=0,o=r.length;n<o;n++)r[n]=0;var s=t.normal.array,u=new Ea,p=new Ea,d=new Ea,f=new Ea,m=new Ea,M,c,h;if(a){var l=a.array;0===A.length&&this.addGroup(0,l.length);for(var g=0,y=A.length;g<y;++g)for(var x=A[g],E=x.start,v=x.count,n=E,o=E+v;n<o;n+=3)M=3*l[n+0],c=3*l[n+1],h=3*l[n+2],u.fromArray(i,M),p.fromArray(i,c),d.fromArray(i,h),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),s[M]+=f.x,s[M+1]+=f.y,s[M+2]+=f.z,s[c]+=f.x,s[c+1]+=f.y,s[c+2]+=f.z,s[h]+=f.x,s[h+1]+=f.y,s[h+2]+=f.z}else for(var n=0,o=i.length;n<o;n+=9)u.fromArray(i,n),p.fromArray(i,n+3),d.fromArray(i,n+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),s[n]=f.x,s[n+1]=f.y,s[n+2]=f.z,s[n+3]=f.x,s[n+4]=f.y,s[n+5]=f.z,s[n+6]=f.x,s[n+7]=f.y,s[n+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(d,p){if(!d||!d.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",d);void 0===p&&(p=0);var u=this.attributes;for(var i in u)if(void 0!==d.attributes[i])for(var r=u[i],n=r.array,a=d.attributes[i],o=a.array,s=a.itemSize,c=0,m=s*p;c<o.length;c++,m++)n[m]=o[c];return this},normalizeNormals:function(){var a=new Ea;return function(){for(var t=this.attributes.normal,o=0,n=t.count;o<n;o++)a.x=t.getX(o),a.y=t.getY(o),a.z=t.getZ(o),a.normalize(),t.setXYZ(o,a.x,a.y,a.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var d=new Mt,t=this.index.array,m=this.attributes;for(var i in m){for(var r=m[i],n=r.array,a=r.itemSize,o=new n.constructor(t.length*a),s=0,c=0,g=0,l=t.length;g<l;g++){s=t[g]*a;for(var u=0;u<a;u++)o[c++]=n[s++]}d.addAttribute(i,new Ya(o,a))}return d},toJSON:function(){var l={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(l.uuid=this.uuid,l.type=this.type,""!==this.name&&(l.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var d in t)void 0!==t[d]&&(l[d]=t[d]);return l}l.data={attributes:{}};var i=this.index;if(null!==i){var r=Array.prototype.slice.call(i.array);l.data.index={type:i.array.constructor.name,array:r}}var p=this.attributes;for(var d in p){var a=p[d],r=Array.prototype.slice.call(a.array);l.data.attributes[d]={itemSize:a.itemSize,type:a.array.constructor.name,array:r,normalized:a.normalized}}var o=this.groups;0<o.length&&(l.data.groups=JSON.parse(JSON.stringify(o)));var s=this.boundingSphere;return null!==s&&(l.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),l},clone:function(){return new Mt().copy(this)},copy:function(m){var t,g,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=m.name;var r=m.index;null!==r&&this.setIndex(r.clone());var n=m.attributes;for(t in n){var a=n[t];this.addAttribute(t,a.clone())}var o=m.morphAttributes;for(t in o){var s=[],c=o[t];for(g=0,i=c.length;g<i;g++)s.push(c[g].clone());this.morphAttributes[t]=s}var h=m.groups;for(g=0,i=h.length;g<i;g++){var l=h[g];this.addGroup(l.start,l.count,l.materialIndex)}var u=m.boundingBox;null!==u&&(this.boundingBox=u.clone());var p=m.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=m.drawRange.start,this.drawRange.count=m.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Wa.prototype=Object.create(lt.prototype),Wa.prototype.constructor=Wa,Xa.prototype=Object.create(Mt.prototype),Xa.prototype.constructor=Xa,Es.prototype=Object.create(lt.prototype),Es.prototype.constructor=Es,el.prototype=Object.create(Mt.prototype),el.prototype.constructor=el,tl.prototype=Object.create(Z.prototype),tl.prototype.constructor=tl,tl.prototype.isMeshBasicMaterial=!0,tl.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this},rl.prototype=Object.create(Z.prototype),rl.prototype.constructor=rl,rl.prototype.isShaderMaterial=!0,rl.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=bc.clone(r.uniforms),this.defines=r.defines,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=r.extensions,this},rl.prototype.toJSON=function(r){var t=Z.prototype.toJSON.call(this,r);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},Object.assign(al.prototype,{set:function(r,t){return this.origin.copy(r),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this},at:function(r,t){return(t||new Ea).copy(this.direction).multiplyScalar(r).add(this.origin)},lookAt:function(r){return this.direction.copy(r).sub(this.origin).normalize(),this},recast:function(){var r=new Ea;return function(t){return this.origin.copy(this.at(t,r)),this}}(),closestPointToPoint:function(a,t){var o=t||new Ea;o.subVectors(a,this.origin);var n=o.dot(this.direction);return 0>n?o.copy(this.origin):o.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(r){return S(this.distanceSqToPoint(r))},distanceSqToPoint:function(){var r=new Ea;return function(t){var a=r.subVectors(t,this.origin).dot(this.direction);return 0>a?this.origin.distanceToSquared(t):(r.copy(this.direction).multiplyScalar(a).add(this.origin),r.distanceToSquared(t))}}(),distanceSqToSegment:function(){var y=new Ea,t=new Ea,A=new Ea;return function(i,r,n,a){y.copy(i).add(r).multiplyScalar(.5),t.copy(r).sub(i).normalize(),A.copy(this.origin).sub(y);var o=.5*i.distanceTo(r),M=-this.direction.dot(t),x=A.dot(this.direction),d=-A.dot(t),E=A.lengthSq(),m=T(1-M*M),v,b,c,h;if(!(0<m))b=0<M?-o:o,v=C(0,-(M*b+x)),c=-v*v+b*(b+2*d)+E;else if(v=M*d-x,b=M*x-d,h=o*m,!(0<=v))b<=-h?(v=C(0,-(-M*o+x)),b=0<v?-o:O(C(-o,-d),o),c=-v*v+b*(b+2*d)+E):b<=h?(v=0,b=O(C(-o,-d),o),c=b*(b+2*d)+E):(v=C(0,-(M*o+x)),b=0<v?o:O(C(-o,-d),o),c=-v*v+b*(b+2*d)+E);else if(!(b>=-h))b=-o,v=C(0,-(M*b+x)),c=-v*v+b*(b+2*d)+E;else if(b<=h){var L=1/m;v*=L,b*=L,c=v*(v+M*b+2*x)+b*(M*v+b+2*d)+E}else b=o,v=C(0,-(M*b+x)),c=-v*v+b*(b+2*d)+E;return n&&n.copy(this.direction).multiplyScalar(v).add(this.origin),a&&a.copy(t).multiplyScalar(b).add(y),c}}(),intersectSphere:function(){var l=new Ea;return function(t,d){l.subVectors(t.center,this.origin);var i=l.dot(this.direction),r=l.dot(l)-i*i,n=t.radius*t.radius;if(r>n)return null;var a=S(n-r),o=i-a,s=i+a;return 0>o&&0>s?null:0>o?this.at(s,d):this.at(o,d)}}(),intersectsSphere:function(r){return this.distanceToPoint(r.center)<=r.radius},distanceToPlane:function(r){var t=r.normal.dot(this.direction);if(0===t)return 0===r.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(r.normal)+r.constant)/t;return 0<=a?a:null},intersectPlane:function(r,t){var a=this.distanceToPlane(r);return null===a?null:this.at(a,t)},intersectsPlane:function(r){var t=r.distanceToPoint(this.origin);return 0===t||0>r.normal.dot(this.direction)*t},intersectBox:function(d,t){var p=1/this.direction.x,c=1/this.direction.y,m=1/this.direction.z,l=this.origin,u,i,r,n,a,o;return 0<=p?(u=(d.min.x-l.x)*p,i=(d.max.x-l.x)*p):(u=(d.max.x-l.x)*p,i=(d.min.x-l.x)*p),0<=c?(r=(d.min.y-l.y)*c,n=(d.max.y-l.y)*c):(r=(d.max.y-l.y)*c,n=(d.min.y-l.y)*c),u>n||r>i?null:((r>u||u!==u)&&(u=r),(n<i||i!==i)&&(i=n),0<=m?(a=(d.min.z-l.z)*m,o=(d.max.z-l.z)*m):(a=(d.max.z-l.z)*m,o=(d.min.z-l.z)*m),u>o||a>i?null:((a>u||u!==u)&&(u=a),(o<i||i!==i)&&(i=o),0>i?null:this.at(0<=u?u:i,t)))},intersectsBox:function(){var r=new Ea;return function(t){return null!==this.intersectBox(t,r)}}(),intersectTriangle:function(){var m=new Ea,t=new Ea,g=new Ea,i=new Ea;return function(r,n,a,o,s){t.subVectors(n,r),g.subVectors(a,r),i.crossVectors(t,g);var c=this.direction.dot(i),y;if(0<c){if(o)return null;y=1}else{if(!(0>c))return null;y=-1,c=-c}m.subVectors(this.origin,r);var f=y*this.direction.dot(g.crossVectors(m,g));if(0>f)return null;var u=y*this.direction.dot(t.cross(m));if(0>u)return null;if(f+u>c)return null;var p=-y*m.dot(i);return 0>p?null:this.at(p/c,s)}}(),applyMatrix4:function(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this},equals:function(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}}),Object.assign(Pt.prototype,{set:function(r,t){return this.start.copy(r),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.start.copy(r.start),this.end.copy(r.end),this},getCenter:function(r){return(r||new Ea).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(r){return(r||new Ea).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(r,t){var a=t||new Ea;return this.delta(a).multiplyScalar(r).add(this.start)},closestPointToPointParameter:function(){var s=new Ea,t=new Ea;return function(l,i){s.subVectors(l,this.start),t.subVectors(this.end,this.start);var r=t.dot(t),n=t.dot(s),a=n/r;return i&&(a=zp.clamp(a,0,1)),a}}(),closestPointToPoint:function(a,t,o){var i=this.closestPointToPointParameter(a,t),r=o||new Ea;return this.delta(r).multiplyScalar(i).add(this.start)},applyMatrix4:function(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this},equals:function(r){return r.start.equals(this.start)&&r.end.equals(this.end)}}),Object.assign(It,{normal:function(){var a=new Ea;return function(t,l,i,r){var n=r||new Ea;n.subVectors(i,l),a.subVectors(t,l),n.cross(a);var o=n.lengthSq();return 0<o?n.multiplyScalar(1/S(o)):n.set(0,0,0)}}(),barycoordFromPoint:function(){var a=new Ea,t=new Ea,A=new Ea;return function(i,r,n,o,s){a.subVectors(o,r),t.subVectors(n,r),A.subVectors(i,r);var c=a.dot(a),h=a.dot(t),l=a.dot(A),u=t.dot(t),p=t.dot(A),d=c*u-h*h,f=s||new Ea;if(0===d)return f.set(-2,-1,-1);var m=1/d,M=(u*l-h*p)*m,g=(c*p-h*l)*m;return f.set(1-M-g,g,M)}}(),containsPoint:function(){var o=new Ea;return function(t,s,i,r){var n=It.barycoordFromPoint(t,s,i,r,o);return 0<=n.x&&0<=n.y&&1>=n.x+n.y}}()}),Object.assign(It.prototype,{set:function(r,t,a){return this.a.copy(r),this.b.copy(t),this.c.copy(a),this},setFromPointsAndIndices:function(a,t,o,n){return this.a.copy(a[t]),this.b.copy(a[o]),this.c.copy(a[n]),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this},area:function(){var r=new Ea,t=new Ea;return function(){return r.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*r.cross(t).length()}}(),midpoint:function(r){return(r||new Ea).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(r){return It.normal(this.a,this.b,this.c,r)},plane:function(r){return(r||new tt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(r,t){return It.barycoordFromPoint(r,this.a,this.b,this.c,t)},containsPoint:function(r){return It.containsPoint(r,this.a,this.b,this.c)},intersectsBox:function(r){return r.intersectsTriangle(this)},closestPointToPoint:function(){var a=new tt,t=[new Pt,new Pt,new Pt],d=new Ea,o=new Ea;return function(r,n){var i=n||new Ea,s=1/0;if(a.setFromCoplanarPoints(this.a,this.b,this.c),a.projectPoint(r,d),!0===this.containsPoint(d))i.copy(d);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var c=0;c<t.length;c++){t[c].closestPointToPoint(d,!0,o);var p=d.distanceToSquared(o);p<s&&(s=p,i.copy(o))}}return i}}(),equals:function(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}),Ot.prototype=Object.assign(Object.create(ot.prototype),{constructor:Ot,isMesh:!0,setDrawMode:function(r){this.drawMode=r},copy:function(r){return ot.prototype.copy.call(this,r),this.drawMode=r.drawMode,void 0!==r.morphTargetInfluences&&(this.morphTargetInfluences=r.morphTargetInfluences.slice()),void 0!==r.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},r.morphTargetDictionary)),this},updateMorphTargets:function(){var l=this.geometry,r,t,d;if(l.isBufferGeometry){var i=l.morphAttributes,n=Object.keys(i);if(0<n.length){var a=i[n[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},r=0,t=a.length;r<t;r++)d=a[r].name||r+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=r}}else{var o=l.morphTargets;if(void 0!==o&&0<o.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},r=0,t=o.length;r<t;r++)d=o[r].name||r+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=r}},raycast:function(){function A(s,l,d,i,r,n,a){return It.barycoordFromPoint(s,l,d,i,c),r.multiplyScalar(c.x),n.multiplyScalar(c.y),a.multiplyScalar(c.z),r.add(n).add(a),r.clone()}function t(l,d,u,i,r,n,a,o){if(null===(d.side===np?i.intersectTriangle(a,n,r,!0,o):i.intersectTriangle(r,n,a,d.side!==ip,o)))return null;p.copy(o),p.applyMatrix4(l.matrixWorld);var s=u.ray.origin.distanceTo(p);return s<u.near||s>u.far?null:{distance:s,point:p.clone(),object:l}}function a(y,i,r,x,a,o,s,c){M.fromBufferAttribute(x,o),h.fromBufferAttribute(x,s),l.fromBufferAttribute(x,c);var p=t(y,y.material,i,r,M,h,l,g);return p&&(a&&(u.fromBufferAttribute(a,o),m.fromBufferAttribute(a,s),f.fromBufferAttribute(a,c),p.uv=A(g,M,h,l,u,m,f)),p.face=new Va(o,s,c,It.normal(M,h,l)),p.faceIndex=o),p}var n=new Ma,o=new al,s=new $,M=new Ea,h=new Ea,l=new Ea,r=new Ea,i=new Ea,d=new Ea,u=new Aa,m=new Aa,f=new Aa,c=new Ea,g=new Ea,p=new Ea;return function(c,p){var x=this.geometry,v=this.material,y=this.matrixWorld;if(void 0!==v&&(null===x.boundingSphere&&x.computeBoundingSphere(),s.copy(x.boundingSphere),s.applyMatrix4(y),!1!==c.ray.intersectsSphere(s)&&(n.getInverse(y),o.copy(c.ray).applyMatrix4(n),null===x.boundingBox||!1!==o.intersectsBox(x.boundingBox)))){var b;if(x.isBufferGeometry){var _=x.index,Q=x.attributes.position,L=x.attributes.uv,R,w,Z,E,T;if(null!==_)for(E=0,T=_.count;E<T;E+=3)R=_.getX(E),w=_.getX(E+1),Z=_.getX(E+2),(b=a(this,c,o,Q,L,R,w,Z))&&(b.faceIndex=D(E/3),p.push(b));else if(void 0!==Q)for(E=0,T=Q.count;E<T;E+=3)R=E,w=E+1,Z=E+2,(b=a(this,c,o,Q,L,R,w,Z))&&(b.index=R,p.push(b))}else if(x.isGeometry){var S=Array.isArray(v),N=x.vertices,U=x.faces,J=x.faceVertexUvs[0],B,C,P,I;0<J.length&&(I=J);for(var O=0,F=U.length;O<F;O++){var z=U[O],G=S?v[z.materialIndex]:v;if(void 0!==G){if(B=N[z.a],C=N[z.b],P=N[z.c],!0===G.morphTargets){var H=x.morphTargets,V=this.morphTargetInfluences;M.set(0,0,0),h.set(0,0,0),l.set(0,0,0);for(var k=0,j=H.length,W;k<j;k++)if(W=V[k],0!==W){var X=H[k].vertices;M.addScaledVector(r.subVectors(X[z.a],B),W),h.addScaledVector(i.subVectors(X[z.b],C),W),l.addScaledVector(d.subVectors(X[z.c],P),W)}M.add(B),h.add(C),l.add(P),B=M,C=h,P=l}if(b=t(this,G,c,o,B,C,P,g)){if(I&&I[O]){var q=I[O];u.copy(q[0]),m.copy(q[1]),f.copy(q[2]),b.uv=A(g,B,C,P,u,m,f)}b.face=z,b.faceIndex=O,p.push(b)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Ac=0;ue.prototype=Object.assign(Object.create(nt.prototype),{constructor:ue,isPerspectiveCamera:!0,copy:function(r,t){return nt.prototype.copy.call(this,r,t),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=null===r.view?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this},setFocalLength:function(r){var t=.5*this.getFilmHeight()/r;this.fov=2*zp.RAD2DEG*o(t),this.updateProjectionMatrix()},getFocalLength:function(){var r=y(.5*zp.DEG2RAD*this.fov);return .5*this.getFilmHeight()/r},getEffectiveFOV:function(){return 2*zp.RAD2DEG*o(y(.5*zp.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*O(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/C(this.aspect,1)},setViewOffset:function(o,t,s,i,r,n){this.aspect=o/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=o,this.view.fullHeight=t,this.view.offsetX=s,this.view.offsetY=i,this.view.width=r,this.view.height=n,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var l=this.near,t=l*y(.5*zp.DEG2RAD*this.fov)/this.zoom,d=2*t,i=this.aspect*d,r=-.5*i,n=this.view;if(null!==this.view&&this.view.enabled){var a=n.fullWidth,o=n.fullHeight;r+=n.offsetX*i/a,t-=n.offsetY*d/o,i*=n.width/a,d*=n.height/o}var s=this.filmOffset;0!==s&&(r+=l*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-d,l,this.far)},toJSON:function(r){var t=ot.prototype.toJSON.call(this,r);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Kt.prototype=Object.assign(Object.create(ue.prototype),{constructor:Kt,isArrayCamera:!0});var Lc=0;we.prototype.isFogExp2=!0,we.prototype.clone=function(){return new we(this.color.getHex(),this.density)},we.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Me.prototype.isFog=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.near,this.far)},Me.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ee.prototype=Object.assign(Object.create(ot.prototype),{constructor:Ee,copy:function(r,t){return ot.prototype.copy.call(this,r,t),null!==r.background&&(this.background=r.background.clone()),null!==r.fog&&(this.fog=r.fog.clone()),null!==r.overrideMaterial&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this},toJSON:function(r){var t=ot.prototype.toJSON.call(this,r);return null!==this.background&&(t.object.background=this.background.toJSON(r)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),$t.prototype=Object.create(Z.prototype),$t.prototype.constructor=$t,$t.prototype.isSpriteMaterial=!0,$t.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.rotation=r.rotation,this},ll.prototype=Object.assign(Object.create(ot.prototype),{constructor:ll,isSprite:!0,raycast:function(){var s=new Ea,t=new Ea,l=new Ea;return function(i,r){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,s),l.setFromMatrixScale(this.matrixWorld);var n=l.x*l.y/4;if(!(t.distanceToSquared(s)>n)){var a=i.ray.origin.distanceTo(s);a<i.near||a>i.far||r.push({distance:a,point:s.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(r){return ot.prototype.copy.call(this,r),void 0!==r.center&&this.center.copy(r.center),this}}),dl.prototype=Object.assign(Object.create(ot.prototype),{constructor:dl,copy:function(a){ot.prototype.copy.call(this,a,!1);for(var t=a.levels,o=0,i=t.length,r;o<i;o++)r=t[o],this.addLevel(r.object.clone(),r.distance);return this},addLevel:function(a,o){void 0===o&&(o=0),o=T(o);for(var n=this.levels,i=0;i<n.length&&!(o<n[i].distance);i++);n.splice(i,0,{distance:o,object:a}),this.add(a)},getObjectForDistance:function(a){for(var t=this.levels,o=1,n=t.length;o<n&&!(a<t[o].distance);o++);return t[o-1].object},raycast:function(){var a=new Ea;return function(t,o){a.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(a);this.getObjectForDistance(n).raycast(t,o)}}(),update:function(){var s=new Ea,t=new Ea;return function(l){var i=this.levels;if(1<i.length){s.setFromMatrixPosition(l.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var r=s.distanceTo(t);i[0].object.visible=!0;for(var n=1,a=i.length;n<a&&r>=i[n].distance;n++)i[n-1].object.visible=!1,i[n].object.visible=!0;for(;n<a;n++)i[n].object.visible=!1}}}(),toJSON:function(o){var t=ot.prototype.toJSON.call(this,o);t.object.levels=[];for(var s=this.levels,i=0,r=s.length,n;i<r;i++)n=s[i],t.object.levels.push({object:n.object.uuid,distance:n.distance});return t}}),Object.assign(cl.prototype,{calculateInverses:function(){this.boneInverses=[];for(var r=0,t=this.bones.length,a;r<t;r++)a=new Ma,this.bones[r]&&a.getInverse(this.bones[r].matrixWorld),this.boneInverses.push(a)},pose:function(){var r,t,a;for(t=0,a=this.bones.length;t<a;t++)(r=this.bones[t])&&r.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,a=this.bones.length;t<a;t++)(r=this.bones[t])&&(r.parent&&r.parent.isBone?(r.matrix.getInverse(r.parent.matrixWorld),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))},update:function(){var a=new Ma,t=new Ma;return function(){for(var l=this.bones,i=this.boneInverses,r=this.boneMatrices,n=this.boneTexture,d=0,o=l.length,s;d<o;d++)s=l[d]?l[d].matrixWorld:t,a.multiplyMatrices(s,i[d]),a.toArray(r,16*d);void 0!==n&&(n.needsUpdate=!0)}}(),clone:function(){return new cl(this.bones,this.boneInverses)},getBoneByName:function(a){for(var t=0,o=this.bones.length,n;t<o;t++)if(n=this.bones[t],n.name===a)return n}}),Re.prototype=Object.assign(Object.create(ot.prototype),{constructor:Re,isBone:!0}),pl.prototype=Object.assign(Object.create(Ot.prototype),{constructor:pl,isSkinnedMesh:!0,initBones:function(){var a=[],o,t,n,i;if(this.geometry&&void 0!==this.geometry.bones){for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],o=new Re,a.push(o),o.name=t.name,o.position.fromArray(t.pos),o.quaternion.fromArray(t.rotq),void 0!==t.scl&&o.scale.fromArray(t.scl);for(n=0,i=this.geometry.bones.length;n<i;n++)t=this.geometry.bones[n],-1!==t.parent&&null!==t.parent&&void 0!==a[t.parent]?a[t.parent].add(a[n]):this.add(a[n])}return this.updateMatrixWorld(!0),a},bind:function(r,t){this.skeleton=r,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var a,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var o=this.geometry.skinWeights[t];a=1/o.manhattanLength(),a===1/0?o.set(1,0,0,0):o.multiplyScalar(a)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new ba,r=this.geometry.attributes.skinWeight;for(t=0;t<r.count;t++)i.x=r.getX(t),i.y=r.getY(t),i.z=r.getZ(t),i.w=r.getW(t),a=1/i.manhattanLength(),a===1/0?i.set(1,0,0,0):i.multiplyScalar(a),r.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(r){Ot.prototype.updateMatrixWorld.call(this,r),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ul.prototype=Object.create(Z.prototype),ul.prototype.constructor=ul,ul.prototype.isLineBasicMaterial=!0,ul.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this},ml.prototype=Object.assign(Object.create(ot.prototype),{constructor:ml,isLine:!0,computeLineDistances:function(){var s=new Ea,t=new Ea;return function(){var l=this.geometry;if(l.isBufferGeometry){if(null===l.index){for(var i=l.attributes.position,r=[0],n=1,a=i.count;n<a;n++)s.fromBufferAttribute(i,n-1),t.fromBufferAttribute(i,n),r[n]=r[n-1],r[n]+=s.distanceTo(t);l.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(l.isGeometry){var o=l.vertices,r=l.lineDistances;r[0]=0;for(var n=1,a=o.length;n<a;n++)r[n]=r[n-1],r[n]+=o[n-1].distanceTo(o[n])}return this}}(),raycast:function(){var a=new Ma,t=new al,A=new $;return function(i,r){var n=i.linePrecision,o=n*n,s=this.geometry,c=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),A.copy(s.boundingSphere),A.applyMatrix4(c),!1!==i.ray.intersectsSphere(A)){a.getInverse(c),t.copy(i.ray).applyMatrix4(a);var h=new Ea,l=new Ea,u=new Ea,p=new Ea,d=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var f=s.index,m=s.attributes,v=m.position.array;if(null!==f)for(var g=f.array,y=0,L=g.length-1;y<L;y+=d){var b=g[y],D=g[y+1];h.fromArray(v,3*b),l.fromArray(v,3*D);var N=t.distanceSqToSegment(h,l,p,u);if(!(N>o)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||r.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,L=v.length/3-1;y<L;y+=d){h.fromArray(v,3*y),l.fromArray(v,3*y+3);var N=t.distanceSqToSegment(h,l,p,u);if(!(N>o)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||r.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry)for(var w=s.vertices,T=w.length,y=0,N;y<T-1;y+=d)if(N=t.distanceSqToSegment(w[y],w[y+1],p,u),!(N>o)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||r.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),gl.prototype=Object.assign(Object.create(ml.prototype),{constructor:gl,isLineSegments:!0,computeLineDistances:function(){var l=new Ea,t=new Ea;return function(){var d=this.geometry;if(d.isBufferGeometry){if(null===d.index){for(var i=d.attributes.position,r=[],n=0,a=i.count;n<a;n+=2)l.fromBufferAttribute(i,n),t.fromBufferAttribute(i,n+1),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+l.distanceTo(t);d.addAttribute("lineDistance",new THREE.Float32BufferAttribute(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");}else if(d.isGeometry)for(var o=d.vertices,r=d.lineDistances,n=0,a=o.length;n<a;n+=2)l.copy(o[n]),t.copy(o[n+1]),r[n]=0===n?0:r[n-1],r[n+1]=r[n]+l.distanceTo(t);return this}}()}),hl.prototype=Object.assign(Object.create(ml.prototype),{constructor:hl,isLineLoop:!0}),yl.prototype=Object.create(Z.prototype),yl.prototype.constructor=yl,yl.prototype.isPointsMaterial=!0,yl.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this},fl.prototype=Object.assign(Object.create(ot.prototype),{constructor:fl,isPoints:!0,raycast:function(){var a=new Ma,A=new al,t=new $;return function(M,r){function n(n,t){var l=A.distanceSqToPoint(n);if(l<u){var a=A.closestPointToPoint(n);a.applyMatrix4(T);var d=M.ray.origin.distanceTo(a);if(d<M.near||d>M.far)return;r.push({distance:d,distanceToRay:S(l),point:a.clone(),index:t,face:null,object:E})}}var E=this,o=this.geometry,T=this.matrixWorld,i=M.params.Points.threshold;if(null===o.boundingSphere&&o.computeBoundingSphere(),t.copy(o.boundingSphere),t.applyMatrix4(T),t.radius+=i,!1!==M.ray.intersectsSphere(t)){a.getInverse(T),A.copy(M.ray).applyMatrix4(a);var l=i/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,c=new Ea;if(o.isBufferGeometry){var d=o.index,p=o.attributes,m=p.position.array;if(null!==d)for(var h=d.array,g=0,y=h.length,f;g<y;g++)f=h[g],c.fromArray(m,3*f),n(c,f);else for(var g=0,x=m.length/3;g<x;g++)c.fromArray(m,3*g),n(c,g)}else for(var v=o.vertices,g=0,x=v.length;g<x;g++)n(v[g],g)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Al.prototype=Object.assign(Object.create(ot.prototype),{constructor:Al,isGroup:!0}),Ml.prototype=Object.assign(Object.create(Ta.prototype),{constructor:Ml,isVideoTexture:!0,update:function(){var r=this.image;r.readyState>=r.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),xl.prototype=Object.create(Ta.prototype),xl.prototype.constructor=xl,xl.prototype.isCompressedTexture=!0,Ge.prototype=Object.create(Ta.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isDepthTexture=!0,He.prototype=Object.create(Mt.prototype),He.prototype.constructor=He,El.prototype=Object.create(lt.prototype),El.prototype.constructor=El,vl.prototype=Object.create(Mt.prototype),vl.prototype.constructor=vl,Tl.prototype=Object.create(lt.prototype),Tl.prototype.constructor=Tl,bl.prototype=Object.create(Mt.prototype),bl.prototype.constructor=bl,Ll.prototype=Object.create(lt.prototype),Ll.prototype.constructor=Ll,Dl.prototype=Object.create(bl.prototype),Dl.prototype.constructor=Dl,Nl.prototype=Object.create(lt.prototype),Nl.prototype.constructor=Nl,wl.prototype=Object.create(bl.prototype),wl.prototype.constructor=wl,Cl.prototype=Object.create(lt.prototype),Cl.prototype.constructor=Cl,Sl.prototype=Object.create(bl.prototype),Sl.prototype.constructor=Sl,Il.prototype=Object.create(lt.prototype),Il.prototype.constructor=Il,_l.prototype=Object.create(bl.prototype),_l.prototype.constructor=_l,jl.prototype=Object.create(lt.prototype),jl.prototype.constructor=jl,Ol.prototype=Object.create(Mt.prototype),Ol.prototype.constructor=Ol,zl.prototype=Object.create(lt.prototype),zl.prototype.constructor=zl,Rl.prototype=Object.create(Mt.prototype),Rl.prototype.constructor=Rl,Bl.prototype=Object.create(lt.prototype),Bl.prototype.constructor=Bl,Ul.prototype=Object.create(Mt.prototype),Ul.prototype.constructor=Ul;var Rc={triangulate:function(m,t,g){g=g||2;var i=t&&t.length,r=i?t[0]*g:m.length,n=Pl(m,0,r,g,!0),y=[];if(!n)return y;var o,s,c,h,l,u,p;if(i&&(n=di(m,t,n,g)),m.length>80*g){o=c=m[0],s=h=m[1];for(var d=g;d<r;d+=g)l=m[d],u=m[d+1],l<o&&(o=l),u<s&&(s=u),l>c&&(c=l),u>h&&(h=u);p=C(c-o,h-s),p=0===p?0:1/p}return ci(n,y,g,o,s,p),y}},Cc={area:function(a){for(var t=a.length,o=0,i=t-1,r=0;r<t;i=r++)o+=a[i].x*a[r].y-a[r].x*a[i].y;return .5*o},isClockWise:function(r){return 0>Cc.area(r)},triangulateShape:function(l,t){var d=[],i=[],r=[];Ni(l),Ui(d,l);var n=l.length;t.forEach(Ni);for(var a=0;a<t.length;a++)i.push(n),n+=t[a].length,Ui(d,t[a]);for(var o=Rc.triangulate(d,i),a=0;a<o.length;a+=3)r.push(o.slice(a,a+3));return r}};Di.prototype=Object.create(lt.prototype),Di.prototype.constructor=Di,kl.prototype=Object.create(Mt.prototype),kl.prototype.constructor=kl,kl.prototype.getArrays=function(){var a=this.getAttribute("position"),t=a?Array.prototype.slice.call(a.array):[],o=this.getAttribute("uv"),i=o?Array.prototype.slice.call(o.array):[],s=this.index;return{position:t,uv:i,index:s?Array.prototype.slice.call(s.array):[]}},kl.prototype.addShapeList=function(a,t){var o=a.length;t.arrays=this.getArrays();for(var i=0,r;i<o;i++)r=a[i],this.addShape(r,t);this.setIndex(t.arrays.index),this.addAttribute("position",new xt(t.arrays.position,3)),this.addAttribute("uv",new xt(t.arrays.uv,2))},kl.prototype.addShape=function(a,ee){function t(r,t,a){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(a).add(r)}function r(i,t,p){var r=i.x-t.x,s=i.y-t.y,A=p.x-i.x,h=p.y-i.y,l=r*r+s*s,u,M,a;if(T(r*h-s*A)>rp){var o=S(l),d=S(A*A+h*h),f=t.x-s/o,m=t.y+r/o,E=p.x-h/d,g=p.y+A/d,y=((E-f)*h-(g-m)*A)/(r*h-s*A);u=f+r*y-i.x,M=m+s*y-i.y;var x=u*u+M*M;if(2>=x)return new Aa(u,M);a=S(x/2)}else{var v=!1;r>rp?A>rp&&(v=!0):r<-rp?A<-rp&&(v=!0):ma(s)===ma(h)&&(v=!0),v?(u=-s,M=r,a=S(l)):(u=r,M=s,a=S(l/2))}return new Aa(u/a,M/a)}function n(l,t){var d,i;for(Z=l.length;0<=--Z;){d=Z,i=Z-1,0>i&&(i=l.length-1);var r=0,n=A+2*E;for(r=0;r<n;r++){var a=G*r,p=G*(r+1);c(t+d+a,t+i+a,t+i+p,t+d+p)}}}function o(r,t,a){x.push(r),x.push(t),x.push(a)}function s(a,t,o){h(a),h(t),h(o);var i=u.length/3,r=C.generateTopUV(v,u,i-3,i-2,i-1);l(r[0]),l(r[1]),l(r[2])}function c(o,t,s,i){h(o),h(t),h(i),h(t),h(s),h(i);var r=u.length/3,n=C.generateSideWallUV(v,u,r-6,r-3,r-2,r-1);l(n[0]),l(n[1]),l(n[3]),l(n[1]),l(n[2]),l(n[3])}function h(r){g.push(u.length/3),u.push(x[3*r+0]),u.push(x[3*r+1]),u.push(x[3*r+2])}function l(r){y.push(r.x),y.push(r.y)}var i=ee.arrays?ee.arrays:this.getArrays(),u=i.position,g=i.index,y=i.uv,x=[],b=void 0===ee.amount?100:ee.amount,w=void 0===ee.bevelThickness?6:ee.bevelThickness,M=void 0===ee.bevelSize?w-2:ee.bevelSize,E=void 0===ee.bevelSegments?3:ee.bevelSegments,_=void 0===ee.bevelEnabled||ee.bevelEnabled,te=void 0===ee.curveSegments?12:ee.curveSegments,A=void 0===ee.steps?1:ee.steps,L=ee.extrudePath,R=!1,C=void 0===ee.UVGenerator?Di.WorldUVGenerator:ee.UVGenerator,P,p,d,f,m;L&&(P=L.getSpacedPoints(A),R=!0,_=!1,p=void 0===ee.frames?L.computeFrenetFrames(A,!1):ee.frames,d=new Ea,f=new Ea,m=new Ea),_||(E=0,w=0,M=0);var v=this,U=a.extractPoints(te),D=U.shape,B=U.holes,F,re,O;if(!Cc.isClockWise(D))for(D=D.reverse(),re=0,O=B.length;re<O;re++)F=B[re],Cc.isClockWise(F)&&(B[re]=F.reverse());var N=Cc.triangulateShape(D,B),ae=D;for(re=0,O=B.length;re<O;re++)F=B[re],D=D.concat(F);for(var G=D.length,q=N.length,Y=[],Z=0,J=ae.length,Q=J-1,K=Z+1,$,H,V,k,oe,W;Z<J;Z++,Q++,K++)Q===J&&(Q=0),K===J&&(K=0),Y[Z]=r(ae[Z],ae[Q],ae[K]);var X=[],ne=Y.concat(),ie;for(re=0,O=B.length;re<O;re++){for(F=B[re],ie=[],Z=0,J=F.length,Q=J-1,K=Z+1;Z<J;Z++,Q++,K++)Q===J&&(Q=0),K===J&&(K=0),ie[Z]=r(F[Z],F[Q],F[K]);X.push(ie),ne=ne.concat(ie)}for($=0;$<E;$++){for(V=$/E,k=w*I(V*ga/2),H=M*z(V*ga/2),Z=0,J=ae.length;Z<J;Z++)oe=t(ae[Z],Y[Z],H),o(oe.x,oe.y,-k);for(re=0,O=B.length;re<O;re++)for(F=B[re],ie=X[re],Z=0,J=F.length;Z<J;Z++)oe=t(F[Z],ie[Z],H),o(oe.x,oe.y,-k)}for(H=M,Z=0;Z<G;Z++)oe=_?t(D[Z],ne[Z],H):D[Z],R?(f.copy(p.normals[0]).multiplyScalar(oe.x),d.copy(p.binormals[0]).multiplyScalar(oe.y),m.copy(P[0]).add(f).add(d),o(m.x,m.y,m.z)):o(oe.x,oe.y,0);var se;for(se=1;se<=A;se++)for(Z=0;Z<G;Z++)oe=_?t(D[Z],ne[Z],H):D[Z],R?(f.copy(p.normals[se]).multiplyScalar(oe.x),d.copy(p.binormals[se]).multiplyScalar(oe.y),m.copy(P[se]).add(f).add(d),o(m.x,m.y,m.z)):o(oe.x,oe.y,b/A*se);for($=E-1;0<=$;$--){for(V=$/E,k=w*I(V*ga/2),H=M*z(V*ga/2),Z=0,J=ae.length;Z<J;Z++)oe=t(ae[Z],Y[Z],H),o(oe.x,oe.y,b+k);for(re=0,O=B.length;re<O;re++)for(F=B[re],ie=X[re],Z=0,J=F.length;Z<J;Z++)oe=t(F[Z],ie[Z],H),R?o(oe.x,oe.y+P[A-1].y,P[A-1].x+k):o(oe.x,oe.y,b+k)}!function(){var a=u.length/3;if(_){var t=0,o=G*t;for(Z=0;Z<q;Z++)W=N[Z],s(W[2]+o,W[1]+o,W[0]+o);for(t=A+2*E,o=G*t,Z=0;Z<q;Z++)W=N[Z],s(W[0]+o,W[1]+o,W[2]+o)}else{for(Z=0;Z<q;Z++)W=N[Z],s(W[2],W[1],W[0]);for(Z=0;Z<q;Z++)W=N[Z],s(W[0]+G*A,W[1]+G*A,W[2]+G*A)}v.addGroup(a,u.length/3-a,void 0===ee.material?0:ee.material)}(),function(){var r=u.length/3,t=0;for(n(ae,t),t+=ae.length,re=0,O=B.length;re<O;re++)F=B[re],n(F,t),t+=F.length;v.addGroup(r,u.length/3-r,void 0===ee.extrudeMaterial?1:ee.extrudeMaterial)}(),ee.arrays||(this.setIndex(g),this.addAttribute("position",new xt(u,3)),this.addAttribute("uv",new xt(y,2)))},Di.WorldUVGenerator={generateTopUV:function(i,t,d,r,n){var a=t[3*d],o=t[3*d+1],s=t[3*r],c=t[3*r+1],p=t[3*n],l=t[3*n+1];return[new Aa(a,o),new Aa(s,c),new Aa(p,l)]},generateSideWallUV:function(i,t,A,r,n,a){var o=t[3*A],s=t[3*A+1],c=t[3*A+2],h=t[3*r],l=t[3*r+1],u=t[3*r+2],p=t[3*n],d=t[3*n+1],f=t[3*n+2],m=t[3*a],M=t[3*a+1],g=t[3*a+2];return .01>T(s-l)?[new Aa(o,1-c),new Aa(h,1-u),new Aa(p,1-f),new Aa(m,1-g)]:[new Aa(s,1-c),new Aa(l,1-u),new Aa(d,1-f),new Aa(M,1-g)]}},Fl.prototype=Object.create(lt.prototype),Fl.prototype.constructor=Fl,Gl.prototype=Object.create(kl.prototype),Gl.prototype.constructor=Gl,Ql.prototype=Object.create(lt.prototype),Ql.prototype.constructor=Ql,Hl.prototype=Object.create(Mt.prototype),Hl.prototype.constructor=Hl,Vl.prototype=Object.create(lt.prototype),Vl.prototype.constructor=Vl,Yl.prototype=Object.create(Mt.prototype),Yl.prototype.constructor=Yl,Wl.prototype=Object.create(lt.prototype),Wl.prototype.constructor=Wl,Xl.prototype=Object.create(Mt.prototype),Xl.prototype.constructor=Xl,ql.prototype=Object.create(lt.prototype),ql.prototype.constructor=ql,ql.prototype.toJSON=function(){var r=lt.prototype.toJSON.call(this);return Jl(this.parameters.shapes,r)},Zl.prototype=Object.create(Mt.prototype),Zl.prototype.constructor=Zl,Zl.prototype.toJSON=function(){var r=Mt.prototype.toJSON.call(this);return Jl(this.parameters.shapes,r)},Zi.prototype=Object.create(Mt.prototype),Zi.prototype.constructor=Zi,Kl.prototype=Object.create(lt.prototype),Kl.prototype.constructor=Kl,$l.prototype=Object.create(Mt.prototype),$l.prototype.constructor=$l,ed.prototype=Object.create(Kl.prototype),ed.prototype.constructor=ed,td.prototype=Object.create($l.prototype),td.prototype.constructor=td,rd.prototype=Object.create(lt.prototype),rd.prototype.constructor=rd,ad.prototype=Object.create(Mt.prototype),ad.prototype.constructor=ad;var Pc=Object.freeze({WireframeGeometry:He,ParametricGeometry:El,ParametricBufferGeometry:vl,TetrahedronGeometry:Ll,TetrahedronBufferGeometry:Dl,OctahedronGeometry:Nl,OctahedronBufferGeometry:wl,IcosahedronGeometry:Cl,IcosahedronBufferGeometry:Sl,DodecahedronGeometry:Il,DodecahedronBufferGeometry:_l,PolyhedronGeometry:Tl,PolyhedronBufferGeometry:bl,TubeGeometry:jl,TubeBufferGeometry:Ol,TorusKnotGeometry:zl,TorusKnotBufferGeometry:Rl,TorusGeometry:Bl,TorusBufferGeometry:Ul,TextGeometry:Fl,TextBufferGeometry:Gl,SphereGeometry:Ql,SphereBufferGeometry:Hl,RingGeometry:Vl,RingBufferGeometry:Yl,PlaneGeometry:Es,PlaneBufferGeometry:el,LatheGeometry:Wl,LatheBufferGeometry:Xl,ShapeGeometry:ql,ShapeBufferGeometry:Zl,ExtrudeGeometry:Di,ExtrudeBufferGeometry:kl,EdgesGeometry:Zi,ConeGeometry:ed,ConeBufferGeometry:td,CylinderGeometry:Kl,CylinderBufferGeometry:$l,CircleGeometry:rd,CircleBufferGeometry:ad,BoxGeometry:Wa,BoxBufferGeometry:Xa});od.prototype=Object.create(Z.prototype),od.prototype.constructor=od,od.prototype.isShadowMaterial=!0,nd.prototype=Object.create(rl.prototype),nd.prototype.constructor=nd,nd.prototype.isRawShaderMaterial=!0,id.prototype=Object.create(Z.prototype),id.prototype.constructor=id,id.prototype.isMeshStandardMaterial=!0,id.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},sd.prototype=Object.create(id.prototype),sd.prototype.constructor=sd,sd.prototype.isMeshPhysicalMaterial=!0,sd.prototype.copy=function(r){return id.prototype.copy.call(this,r),this.defines={PHYSICAL:""},this.reflectivity=r.reflectivity,this.clearCoat=r.clearCoat,this.clearCoatRoughness=r.clearCoatRoughness,this},ld.prototype=Object.create(Z.prototype),ld.prototype.constructor=ld,ld.prototype.isMeshPhongMaterial=!0,ld.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},dd.prototype=Object.create(ld.prototype),dd.prototype.constructor=dd,dd.prototype.isMeshToonMaterial=!0,dd.prototype.copy=function(r){return ld.prototype.copy.call(this,r),this.gradientMap=r.gradientMap,this},cd.prototype=Object.create(Z.prototype),cd.prototype.constructor=cd,cd.prototype.isMeshNormalMaterial=!0,cd.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},pd.prototype=Object.create(Z.prototype),pd.prototype.constructor=pd,pd.prototype.isMeshLambertMaterial=!0,pd.prototype.copy=function(r){return Z.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},ud.prototype=Object.create(ul.prototype),ud.prototype.constructor=ud,ud.prototype.isLineDashedMaterial=!0,ud.prototype.copy=function(r){return ul.prototype.copy.call(this,r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this};var Ic=Object.freeze({ShadowMaterial:od,SpriteMaterial:$t,RawShaderMaterial:nd,ShaderMaterial:rl,PointsMaterial:yl,MeshPhysicalMaterial:sd,MeshStandardMaterial:id,MeshPhongMaterial:ld,MeshToonMaterial:dd,MeshNormalMaterial:cd,MeshLambertMaterial:pd,MeshDepthMaterial:Pa,MeshDistanceMaterial:ka,MeshBasicMaterial:tl,LineDashedMaterial:ud,LineBasicMaterial:ul,Material:Z}),Oc={enabled:!1,files:{},add:function(r,t){!1!==this.enabled&&(this.files[r]=t)},get:function(r){if(!1!==this.enabled)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}},Nc=new md,Uc={};Object.assign(pr.prototype,{load:function(y,t,A,M){void 0===y&&(y=""),void 0!==this.path&&(y=this.path+y),y=this.manager.resolveURL(y);var x=this,n=Oc.get(y);if(void 0!==n)return x.manager.itemStart(y),setTimeout(function(){t&&t(n),x.manager.itemEnd(y)},0),n;if(void 0!==Uc[y])return void Uc[y].push({onLoad:t,onProgress:A,onError:M});var a=/^data:(.*?)(;base64)?,(.*)$/,o=y.match(a);if(o){var s=o[1],E=!!o[2],h=o[3];h=window.decodeURIComponent(h),E&&(h=window.atob(h));try{var l=(this.responseType||"").toLowerCase(),p;switch(l){case"arraybuffer":case"blob":for(var u=new Uint8Array(h.length),d=0;d<h.length;d++)u[d]=h.charCodeAt(d);p="blob"===l?new Blob([u.buffer],{type:s}):u.buffer;break;case"document":var f=new DOMParser;p=f.parseFromString(h,s);break;case"json":p=JSON.parse(h);break;default:p=h;}window.setTimeout(function(){t&&t(p),x.manager.itemEnd(y)},0)}catch(t){window.setTimeout(function(){M&&M(t),x.manager.itemEnd(y),x.manager.itemError(y)},0)}}else{Uc[y]=[],Uc[y].push({onLoad:t,onProgress:A,onError:M});var m=new XMLHttpRequest;for(var v in m.open("GET",y,!0),m.addEventListener("load",function(t){var n=this.response;Oc.add(y,n);var i=Uc[y];if(delete Uc[y],200===this.status){for(var r=0,a=i.length,o;r<a;r++)o=i[r],o.onLoad&&o.onLoad(n);x.manager.itemEnd(y)}else if(0===this.status){console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var r=0,a=i.length,o;r<a;r++)o=i[r],o.onLoad&&o.onLoad(n);x.manager.itemEnd(y)}else{for(var r=0,a=i.length,o;r<a;r++)o=i[r],o.onError&&o.onError(t);x.manager.itemEnd(y),x.manager.itemError(y)}},!1),m.addEventListener("progress",function(t){for(var o=Uc[y],i=0,r=o.length,n;i<r;i++)n=o[i],n.onProgress&&n.onProgress(t)},!1),m.addEventListener("error",function(t){var n=Uc[y];delete Uc[y];for(var i=0,r=n.length,a;i<r;i++)a=n[i],a.onError&&a.onError(t);x.manager.itemEnd(y),x.manager.itemError(y)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)m.setRequestHeader(v,this.requestHeader[v]);m.send(null)}return x.manager.itemStart(y),m},setPath:function(r){return this.path=r,this},setResponseType:function(r){return this.responseType=r,this},setWithCredentials:function(r){return this.withCredentials=r,this},setMimeType:function(r){return this.mimeType=r,this},setRequestHeader:function(r){return this.requestHeader=r,this}}),Object.assign(dr.prototype,{load:function(d,p,t,i){var u=this,r=[],a=new xl;a.image=r;var o=new pr(this.manager);if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(d))for(var n=0,s=0,c=d.length;s<c;++s)!function(s){o.load(d[s],function(o){var t=u._parser(o,!0);r[s]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(n+=1)&&(1===t.mipmapCount&&(a.minFilter=wp),a.format=t.format,a.needsUpdate=!0,p&&p(a))},t,i)}(s);else o.load(d,function(o){var t=u._parser(o,!0);if(t.isCubemap)for(var n=t.mipmaps.length/t.mipmapCount,i=0;i<n;i++){r[i]={mipmaps:[]};for(var s=0;s<t.mipmapCount;s++)r[i].mipmaps.push(t.mipmaps[i*t.mipmapCount+s]),r[i].format=t.format,r[i].width=t.width,r[i].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=wp),a.format=t.format,a.needsUpdate=!0,p&&p(a)},t,i);return a},setPath:function(r){return this.path=r,this}}),Object.assign(fr.prototype,{load:function(s,l,t,i){var r=this,n=new c,a=new pr(this.manager);return a.setResponseType("arraybuffer"),a.load(s,function(a){var t=r._parser(a);t&&(void 0===t.image?void 0!==t.data&&(n.image.width=t.width,n.image.height=t.height,n.image.data=t.data):n.image=t.image,n.wrapS=void 0===t.wrapS?Tp:t.wrapS,n.wrapT=void 0===t.wrapT?Tp:t.wrapT,n.magFilter=void 0===t.magFilter?wp:t.magFilter,n.minFilter=void 0===t.minFilter?Sp:t.minFilter,n.anisotropy=void 0===t.anisotropy?1:t.anisotropy,void 0!==t.format&&(n.format=t.format),void 0!==t.type&&(n.type=t.type),void 0!==t.mipmaps&&(n.mipmaps=t.mipmaps),1===t.mipmapCount&&(n.minFilter=wp),n.needsUpdate=!0,l&&l(n,t))},t,i),n}}),Object.assign(mr.prototype,{crossOrigin:"Anonymous",load:function(s,t,l,i){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s),s=this.manager.resolveURL(s);var r=this,n=Oc.get(s);if(void 0!==n)return r.manager.itemStart(s),setTimeout(function(){t&&t(n),r.manager.itemEnd(s)},0),n;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Oc.add(s,this),t&&t(this),r.manager.itemEnd(s)},!1),a.addEventListener("error",function(t){i&&i(t),r.manager.itemEnd(s),r.manager.itemError(s)},!1),"data:"!==s.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(s),a.src=s,a},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Object.assign(vr.prototype,{crossOrigin:"Anonymous",load:function(l,d,t,c){var r=new u,n=new mr(this.manager);n.setCrossOrigin(this.crossOrigin),n.setPath(this.path);for(var a=0,o=0;o<l.length;++o)!function(o){n.load(l[o],function(n){r.images[o]=n,6==++a&&(r.needsUpdate=!0,d&&d(r))},void 0,c)}(o);return r},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Object.assign(gr.prototype,{crossOrigin:"Anonymous",load:function(o,t,s,i){var l=new Ta,r=new mr(this.manager);return r.setCrossOrigin(this.crossOrigin),r.setPath(this.path),r.load(o,function(a){l.image=a;var n=0<o.search(/\.(jpg|jpeg)$/)||0===o.search(/^data\:image\/jpeg/);l.format=n?xs:_p,l.needsUpdate=!0,void 0!==t&&t(l)},s,i),l},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Object.assign(yr.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(r,t){var a=this.getUtoTmapping(r);return this.getPoint(a,t)},getPoints:function(r){void 0===r&&(r=5);for(var t=[],a=0;a<=r;a++)t.push(this.getPoint(a/r));return t},getSpacedPoints:function(r){void 0===r&&(r=5);for(var t=[],a=0;a<=r;a++)t.push(this.getPointAt(a/r));return t},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(o){if(void 0===o&&(o=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],r=this.getPoint(0),n=0,a,s;for(t.push(0),s=1;s<=o;s++)a=this.getPoint(s/o),n+=a.distanceTo(r),t.push(n),r=a;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(l,t){var d=this.getLengths(),r=0,n=d.length,a;a=t||l*d[n-1];for(var i=0,s=n-1,c;i<=s;)if(r=D(i+(s-i)/2),0>(c=d[r]-a))i=r+1;else{if(!(0<c)){s=r;break}s=r-1}if(r=s,d[r]===a)return r/(n-1);var o=d[r];return(r+(a-o)/(d[r+1]-o))/(n-1)},getTangent:function(a){var t=a-1e-4,o=a+1e-4;0>t&&(t=0),1<o&&(o=1);var n=this.getPoint(t);return this.getPoint(o).clone().sub(n).normalize()},getTangentAt:function(r){var t=this.getUtoTmapping(r);return this.getTangent(t)},computeFrenetFrames:function(r,t){var a=new Ea,s=[],y=[],A=[],M=new Ea,u=new Ma,p,i,n;for(p=0;p<=r;p++)i=p/r,s[p]=this.getTangentAt(i),s[p].normalize();y[0]=new Ea,A[0]=new Ea;var x=g,d=T(s[0].x),f=T(s[0].y),m=T(s[0].z);for(d<=x&&(x=d,a.set(1,0,0)),f<=x&&(x=f,a.set(0,1,0)),m<=x&&a.set(0,0,1),M.crossVectors(s[0],a).normalize(),y[0].crossVectors(s[0],M),A[0].crossVectors(s[0],y[0]),p=1;p<=r;p++)y[p]=y[p-1].clone(),A[p]=A[p-1].clone(),M.crossVectors(s[p-1],s[p]),M.length()>rp&&(M.normalize(),n=E(zp.clamp(s[p-1].dot(s[p]),-1,1)),y[p].applyMatrix4(u.makeRotationAxis(M,n))),A[p].crossVectors(s[p],y[p]);if(!0===t)for(n=E(zp.clamp(y[0].dot(y[r]),-1,1)),n/=r,0<s[0].dot(M.crossVectors(y[0],y[r]))&&(n=-n),p=1;p<=r;p++)y[p].applyMatrix4(u.makeRotationAxis(s[p],n*p)),A[p].crossVectors(s[p],y[p]);return{tangents:s,normals:y,binormals:A}},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.arcLengthDivisions=r.arcLengthDivisions,this},toJSON:function(){var r={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return r.arcLengthDivisions=this.arcLengthDivisions,r.type=this.type,r},fromJSON:function(r){return this.arcLengthDivisions=r.arcLengthDivisions,this}}),xr.prototype=Object.create(yr.prototype),xr.prototype.constructor=xr,xr.prototype.isEllipseCurve=!0,xr.prototype.getPoint=function(i,t){for(var m=t||new Aa,r=2*ga,g=this.aEndAngle-this.aStartAngle,a=T(g)<rp;0>g;)g+=r;for(;g>r;)g-=r;g<rp&&(g=a?0:r),!0!==this.aClockwise||a||(g===r?g=-r:g-=r);var o=this.aStartAngle+i*g,s=this.aX+this.xRadius*I(o),c=this.aY+this.yRadius*z(o);if(0!==this.aRotation){var h=I(this.aRotation),l=z(this.aRotation),u=s-this.aX,p=c-this.aY;s=u*h-p*l+this.aX,c=u*l+p*h+this.aY}return m.set(s,c)},xr.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this},xr.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.aX=this.aX,r.aY=this.aY,r.xRadius=this.xRadius,r.yRadius=this.yRadius,r.aStartAngle=this.aStartAngle,r.aEndAngle=this.aEndAngle,r.aClockwise=this.aClockwise,r.aRotation=this.aRotation,r},xr.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.aX=r.aX,this.aY=r.aY,this.xRadius=r.xRadius,this.yRadius=r.yRadius,this.aStartAngle=r.aStartAngle,this.aEndAngle=r.aEndAngle,this.aClockwise=r.aClockwise,this.aRotation=r.aRotation,this},gd.prototype=Object.create(xr.prototype),gd.prototype.constructor=gd,gd.prototype.isArcCurve=!0;var Dc=new Ea,Bc=new hd,Fc=new hd,zc=new hd;wr.prototype=Object.create(yr.prototype),wr.prototype.constructor=wr,wr.prototype.isCatmullRomCurve3=!0,wr.prototype.getPoint=function(a,t){var g=t||new Ea,i=this.points,r=i.length,n=(r-(this.closed?0:1))*a,o=D(n),s=n-o;this.closed?o+=0<o?0:(D(T(o)/i.length)+1)*i.length:0===s&&o===r-1&&(o=r-2,s=1);var c,h,l,u;if(this.closed||0<o?c=i[(o-1)%r]:(Dc.subVectors(i[0],i[1]).add(i[0]),c=Dc),h=i[o%r],l=i[(o+1)%r],this.closed||o+2<r?u=i[(o+2)%r]:(Dc.subVectors(i[r-1],i[r-2]).add(i[r-1]),u=Dc),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=A(c.distanceToSquared(h),p),y=A(h.distanceToSquared(l),p),m=A(l.distanceToSquared(u),p);1e-4>y&&(y=1),1e-4>d&&(d=y),1e-4>m&&(m=y),Bc.initNonuniformCatmullRom(c.x,h.x,l.x,u.x,d,y,m),Fc.initNonuniformCatmullRom(c.y,h.y,l.y,u.y,d,y,m),zc.initNonuniformCatmullRom(c.z,h.z,l.z,u.z,d,y,m)}else"catmullrom"===this.curveType&&(Bc.initCatmullRom(c.x,h.x,l.x,u.x,this.tension),Fc.initCatmullRom(c.y,h.y,l.y,u.y,this.tension),zc.initCatmullRom(c.z,h.z,l.z,u.z,this.tension));return g.set(Bc.calc(s),Fc.calc(s),zc.calc(s)),g},wr.prototype.copy=function(a){yr.prototype.copy.call(this,a),this.points=[];for(var t=0,o=a.points.length,n;t<o;t++)n=a.points[t],this.points.push(n.clone());return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},wr.prototype.toJSON=function(){var a=yr.prototype.toJSON.call(this);a.points=[];for(var t=0,o=this.points.length,n;t<o;t++)n=this.points[t],a.points.push(n.toArray());return a.closed=this.closed,a.curveType=this.curveType,a.tension=this.tension,a},wr.prototype.fromJSON=function(a){yr.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,o=a.points.length,n;t<o;t++)n=a.points[t],this.points.push(new Ea().fromArray(n));return this.closed=a.closed,this.curveType=a.curveType,this.tension=a.tension,this},Or.prototype=Object.create(yr.prototype),Or.prototype.constructor=Or,Or.prototype.isCubicBezierCurve=!0,Or.prototype.getPoint=function(i,t){var l=t||new Aa,r=this.v0,n=this.v1,a=this.v2,o=this.v3;return l.set(Ir(i,r.x,n.x,a.x,o.x),Ir(i,r.y,n.y,a.y,o.y)),l},Or.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},Or.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},Or.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this},fd.prototype=Object.create(yr.prototype),fd.prototype.constructor=fd,fd.prototype.isCubicBezierCurve3=!0,fd.prototype.getPoint=function(a,t){var l=t||new Ea,i=this.v0,r=this.v1,n=this.v2,o=this.v3;return l.set(Ir(a,i.x,r.x,n.x,o.x),Ir(a,i.y,r.y,n.y,o.y),Ir(a,i.z,r.z,n.z,o.z)),l},fd.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this.v3.copy(r.v3),this},fd.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r.v3=this.v3.toArray(),r},fd.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this.v3.fromArray(r.v3),this},Ad.prototype=Object.create(yr.prototype),Ad.prototype.constructor=Ad,Ad.prototype.isLineCurve=!0,Ad.prototype.getPoint=function(a,t){var o=t||new Aa;return 1===a?o.copy(this.v2):(o.copy(this.v2).sub(this.v1),o.multiplyScalar(a).add(this.v1)),o},Ad.prototype.getPointAt=function(r,t){return this.getPoint(r,t)},Ad.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Ad.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Ad.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Ad.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},Md.prototype=Object.create(yr.prototype),Md.prototype.constructor=Md,Md.prototype.isLineCurve3=!0,Md.prototype.getPoint=function(r,t){var a=t||new Ea;return 1===r?a.copy(this.v2):(a.copy(this.v2).sub(this.v1),a.multiplyScalar(r).add(this.v1)),a},Md.prototype.getPointAt=function(r,t){return this.getPoint(r,t)},Md.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Md.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Md.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},xd.prototype=Object.create(yr.prototype),xd.prototype.constructor=xd,xd.prototype.isQuadraticBezierCurve=!0,xd.prototype.getPoint=function(i,t){var s=t||new Aa,r=this.v0,n=this.v1,a=this.v2;return s.set(Ar(i,r.x,n.x,a.x),Ar(i,r.y,n.y,a.y)),s},xd.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},xd.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},xd.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},Ed.prototype=Object.create(yr.prototype),Ed.prototype.constructor=Ed,Ed.prototype.isQuadraticBezierCurve3=!0,Ed.prototype.getPoint=function(a,t){var s=t||new Ea,i=this.v0,r=this.v1,n=this.v2;return s.set(Ar(a,i.x,r.x,n.x),Ar(a,i.y,r.y,n.y),Ar(a,i.z,r.z,n.z)),s},Ed.prototype.copy=function(r){return yr.prototype.copy.call(this,r),this.v0.copy(r.v0),this.v1.copy(r.v1),this.v2.copy(r.v2),this},Ed.prototype.toJSON=function(){var r=yr.prototype.toJSON.call(this);return r.v0=this.v0.toArray(),r.v1=this.v1.toArray(),r.v2=this.v2.toArray(),r},Ed.prototype.fromJSON=function(r){return yr.prototype.fromJSON.call(this,r),this.v0.fromArray(r.v0),this.v1.fromArray(r.v1),this.v2.fromArray(r.v2),this},vd.prototype=Object.create(yr.prototype),vd.prototype.constructor=vd,vd.prototype.isSplineCurve=!0,vd.prototype.getPoint=function(i,t){var d=t||new Aa,r=this.points,n=(r.length-1)*i,a=D(n),o=n-a,s=r[0===a?a:a-1],c=r[a],p=r[a>r.length-2?r.length-1:a+1],l=r[a>r.length-3?r.length-1:a+2];return d.set(yd(o,s.x,c.x,p.x,l.x),yd(o,s.y,c.y,p.y,l.y)),d},vd.prototype.copy=function(a){yr.prototype.copy.call(this,a),this.points=[];for(var t=0,o=a.points.length,n;t<o;t++)n=a.points[t],this.points.push(n.clone());return this},vd.prototype.toJSON=function(){var a=yr.prototype.toJSON.call(this);a.points=[];for(var t=0,o=this.points.length,n;t<o;t++)n=this.points[t],a.points.push(n.toArray());return a},vd.prototype.fromJSON=function(a){yr.prototype.fromJSON.call(this,a),this.points=[];for(var t=0,o=a.points.length,r;t<o;t++)r=a.points[t],this.points.push(new Aa().fromArray(r));return this};var Gc=Object.freeze({ArcCurve:gd,CatmullRomCurve3:wr,CubicBezierCurve:Or,CubicBezierCurve3:fd,EllipseCurve:xr,LineCurve:Ad,LineCurve3:Md,QuadraticBezierCurve:xd,QuadraticBezierCurve3:Ed,SplineCurve:vd});Td.prototype=Object.assign(Object.create(yr.prototype),{constructor:Td,add:function(r){this.curves.push(r)},closePath:function(){var r=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);r.equals(t)||this.curves.push(new Ad(t,r))},getPoint:function(l){for(var t=l*this.getLength(),d=this.getCurveLengths(),i=0;i<d.length;){if(d[i]>=t){var r=d[i]-t,n=this.curves[i],a=n.getLength(),o=0===a?0:1-r/a;return n.getPointAt(o)}i++}return null},getLength:function(){var r=this.getCurveLengths();return r[r.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var a=[],t=0,o=0,n=this.curves.length;o<n;o++)t+=this.curves[o].getLength(),a.push(t);return this.cacheLengths=a,a},getSpacedPoints:function(r){void 0===r&&(r=40);for(var t=[],a=0;a<=r;a++)t.push(this.getPoint(a/r));return this.autoClose&&t.push(t[0]),t},getPoints:function(l){l=l||12;for(var t=[],i=0,r=this.curves,n;i<r.length;i++)for(var d=r[i],a=d&&d.isEllipseCurve?2*l:d&&d.isLineCurve?1:d&&d.isSplineCurve?l*d.points.length:l,o=d.getPoints(a),s=0,c;s<o.length;s++)c=o[s],n&&n.equals(c)||(t.push(c),n=c);return this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},copy:function(a){yr.prototype.copy.call(this,a),this.curves=[];for(var t=0,o=a.curves.length,n;t<o;t++)n=a.curves[t],this.curves.push(n.clone());return this.autoClose=a.autoClose,this},toJSON:function(){var a=yr.prototype.toJSON.call(this);a.autoClose=this.autoClose,a.curves=[];for(var t=0,o=this.curves.length,n;t<o;t++)n=this.curves[t],a.curves.push(n.toJSON());return a},fromJSON:function(a){yr.prototype.fromJSON.call(this,a),this.autoClose=a.autoClose,this.curves=[];for(var t=0,o=a.curves.length,n;t<o;t++)n=a.curves[t],this.curves.push(new Gc[n.type]().fromJSON(n));return this}}),bd.prototype=Object.assign(Object.create(Td.prototype),{constructor:bd,setFromPoints:function(r){this.moveTo(r[0].x,r[0].y);for(var t=1,a=r.length;t<a;t++)this.lineTo(r[t].x,r[t].y)},moveTo:function(r,t){this.currentPoint.set(r,t)},lineTo:function(a,t){var o=new Ad(this.currentPoint.clone(),new Aa(a,t));this.curves.push(o),this.currentPoint.set(a,t)},quadraticCurveTo:function(o,t,i,r){var n=new xd(this.currentPoint.clone(),new Aa(o,t),new Aa(i,r));this.curves.push(n),this.currentPoint.set(i,r)},bezierCurveTo:function(i,t,l,r,n,a){var o=new Or(this.currentPoint.clone(),new Aa(i,t),new Aa(l,r),new Aa(n,a));this.curves.push(o),this.currentPoint.set(n,a)},splineThru:function(r){var t=[this.currentPoint.clone()].concat(r),a=new vd(t);this.curves.push(a),this.currentPoint.copy(r[r.length-1])},arc:function(l,t,d,i,r,n){var a=this.currentPoint.x,o=this.currentPoint.y;this.absarc(l+a,t+o,d,i,r,n)},absarc:function(o,t,s,i,r,n){this.absellipse(o,t,s,s,i,r,n)},ellipse:function(l,t,d,i,r,n,a,o){var s=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(l+s,t+c,d,i,r,n,a,o)},absellipse:function(d,t,p,i,r,n,a,o){var s=new xr(d,t,p,i,r,n,a,o);if(0<this.curves.length){var c=s.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(s);var u=s.getPoint(1);this.currentPoint.copy(u)},copy:function(r){return Td.prototype.copy.call(this,r),this.currentPoint.copy(r.currentPoint),this},toJSON:function(){var r=Td.prototype.toJSON.call(this);return r.currentPoint=this.currentPoint.toArray(),r},fromJSON:function(r){return Td.prototype.fromJSON.call(this,r),this.currentPoint.fromArray(r.currentPoint),this}}),Ld.prototype=Object.assign(Object.create(bd.prototype),{constructor:Ld,getPointsHoles:function(a){for(var t=[],o=0,n=this.holes.length;o<n;o++)t[o]=this.holes[o].getPoints(a);return t},extractPoints:function(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}},copy:function(a){bd.prototype.copy.call(this,a),this.holes=[];for(var t=0,o=a.holes.length,n;t<o;t++)n=a.holes[t],this.holes.push(n.clone());return this},toJSON:function(){var a=bd.prototype.toJSON.call(this);a.uuid=this.uuid,a.holes=[];for(var t=0,o=this.holes.length,n;t<o;t++)n=this.holes[t],a.holes.push(n.toJSON());return a},fromJSON:function(a){bd.prototype.fromJSON.call(this,a),this.uuid=a.uuid,this.holes=[];for(var t=0,o=a.holes.length,n;t<o;t++)n=a.holes[t],this.holes.push(new bd().fromJSON(n));return this}}),Dd.prototype=Object.assign(Object.create(ot.prototype),{constructor:Dd,isLight:!0,copy:function(r){return ot.prototype.copy.call(this,r),this.color.copy(r.color),this.intensity=r.intensity,this},toJSON:function(r){var t=ot.prototype.toJSON.call(this,r);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),Nd.prototype=Object.assign(Object.create(Dd.prototype),{constructor:Nd,isHemisphereLight:!0,copy:function(r){return Dd.prototype.copy.call(this,r),this.groundColor.copy(r.groundColor),this}}),Object.assign(wd.prototype,{copy:function(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var r={};return 0!==this.bias&&(r.bias=this.bias),1!==this.radius&&(r.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}),Xr.prototype=Object.assign(Object.create(wd.prototype),{constructor:Xr,isSpotLightShadow:!0,update:function(a){var t=this.camera,o=2*zp.RAD2DEG*a.angle,i=this.mapSize.width/this.mapSize.height,r=a.distance||t.far;o===t.fov&&i===t.aspect&&r===t.far||(t.fov=o,t.aspect=i,t.far=r,t.updateProjectionMatrix())}}),Cd.prototype=Object.assign(Object.create(Dd.prototype),{constructor:Cd,isSpotLight:!0,copy:function(r){return Dd.prototype.copy.call(this,r),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),Sd.prototype=Object.assign(Object.create(Dd.prototype),{constructor:Sd,isPointLight:!0,copy:function(r){return Dd.prototype.copy.call(this,r),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}),Id.prototype=Object.assign(Object.create(wd.prototype),{constructor:Id}),_d.prototype=Object.assign(Object.create(Dd.prototype),{constructor:_d,isDirectionalLight:!0,copy:function(r){return Dd.prototype.copy.call(this,r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),jd.prototype=Object.assign(Object.create(Dd.prototype),{constructor:jd,isAmbientLight:!0}),Od.prototype=Object.assign(Object.create(Dd.prototype),{constructor:Od,isRectAreaLight:!0,copy:function(r){return Dd.prototype.copy.call(this,r),this.width=r.width,this.height=r.height,this},toJSON:function(r){var t=Dd.prototype.toJSON.call(this,r);return t.object.width=this.width,t.object.height=this.height,t}}),zd.prototype=Object.assign(Object.create(Hd.prototype),{constructor:zd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Rd.prototype=Object.assign(Object.create(Hd.prototype),{constructor:Rd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Bd.prototype,{evaluate:function(l){var t=this.parameterPositions,d=this._cachedIndex,i=t[d],r=t[d-1];t:{e:{var n;i:{r:if(!(l<i)){for(var a=d+2;;){if(void 0===i){if(l<r)break r;return d=t.length,this._cachedIndex=d,this.afterEnd_(d-1,l,r)}if(d===a)break;if(r=i,i=t[++d],l<i)break e}n=t.length;break i}{if(l>=r)break t;var o=t[1];l<o&&(d=2,r=o);for(var a=d-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,l,i);if(d===a)break;if(i=r,r=t[--d-1],l>=r)break e}n=d,d=0}}for(;d<n;){var s=d+n>>>1;l<t[s]?n=s:d=s+1}if(i=t[d],void 0===(r=t[d-1]))return this._cachedIndex=0,this.beforeStart_(0,l,i);if(void 0===i)return d=t.length,this._cachedIndex=d,this.afterEnd_(d-1,r,l)}this._cachedIndex=d,this.intervalChanged_(d,r,i)}return this.interpolate_(d,r,l,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(o){for(var t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=0;r!==i;++r)t[r]=n[o*i+r];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Bd.prototype,{beforeStart_:Bd.prototype.copySampleValue_,afterEnd_:Bd.prototype.copySampleValue_}),rn.prototype=Object.assign(Object.create(Bd.prototype),{constructor:rn,interpolate_:function(n,t,d,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=n*o,c=s+o;s!==c;s+=4)xa.slerpFlat(r,0,a,s-o,a,s,(d-t)/(i-t));return r}}),Ud.prototype=Object.assign(Object.create(Hd.prototype),{constructor:Ud,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(r){return new rn(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:void 0}),Pd.prototype=Object.assign(Object.create(Hd.prototype),{constructor:Pd,ValueTypeName:"color"}),kd.prototype=Object.assign(Object.create(Hd.prototype),{constructor:kd,ValueTypeName:"number"}),Fd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Fd,DefaultSettings_:{endingStart:Js,endingEnd:Js},intervalChanged_:function(l,t,d){var i=this.parameterPositions,r=l-2,n=l+1,a=i[r],o=i[n];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=l,a=2*t-d;break;case 2402:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=l,a=d;}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:n=l,o=2*d-t;break;case 2402:n=1,o=d+i[1]-i[0];break;default:n=l-1,o=t;}var s=.5*(d-t),c=this.valueSize;this._weightPrev=s/(t-a),this._weightNext=s/(o-d),this._offsetPrev=r*c,this._offsetNext=n*c},interpolate_:function(c,t,g,i){for(var r=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=c*a,s=this._offsetPrev,h=this._offsetNext,l=this._weightPrev,y=this._weightNext,p=(g-t)/(i-t),d=p*p,f=d*p,m=0;m!==a;++m)r[m]=(-l*f+2*l*d-l*p)*n[s+m]+((1+l)*f+(-1.5-2*l)*d+(-.5+l)*p+1)*n[o-a+m]+((-1-y)*f+(1.5+y)*d+.5*p)*n[o+m]+(y*f-y*d)*n[h+m];return r}}),Gd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Gd,interpolate_:function(l,t,d,i){for(var r=this.resultBuffer,n=this.sampleValues,a=this.valueSize,o=l*a,s=(d-t)/(i-t),c=0;c!==a;++c)r[c]=n[o-a+c]*(1-s)+n[o+c]*s;return r}}),Qd.prototype=Object.assign(Object.create(Bd.prototype),{constructor:Qd,interpolate_:function(r){return this.copySampleValue_(r-1)}});var Hc={arraySlice:function(r,t,a){return Hc.isTypedArray(r)?new r.constructor(r.subarray(t,void 0===a?r.length:a)):r.slice(t,a)},convertArray:function(r,t,a){return r&&(a||r.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(r):Array.prototype.slice.call(r):r},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(a){function t(t,r){return a[t]-a[r]}for(var o=a.length,i=Array(o),r=0;r!==o;++r)i[r]=r;return i.sort(t),i},sortedArray:function(l,t,d){for(var i=l.length,r=new l.constructor(i),n=0,a=0;a!==i;++n)for(var o=d[n]*t,s=0;s!==t;++s)r[a++]=l[o+s];return r},flattenJSON:function(s,t,l,i){for(var r=1,n=s[0];void 0!==n&&void 0===n[i];)n=s[r++];if(void 0!==n){var a=n[i];if(void 0!==a)if(Array.isArray(a))do a=n[i],void 0!==a&&(t.push(n.time),l.push.apply(l,a)),n=s[r++];while(void 0!==n);else if(void 0!==a.toArray)do a=n[i],void 0!==a&&(t.push(n.time),a.toArray(l,l.length)),n=s[r++];while(void 0!==n);else do a=n[i],void 0!==a&&(t.push(n.time),l.push(a)),n=s[r++];while(void 0!==n)}}};Object.assign(Hd,{parse:function(a){if(void 0===a.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=Hd._getTrackTypeForValueTypeName(a.type);if(void 0===a.times){var o=[],n=[];Hc.flattenJSON(a.keys,o,n,"value"),a.times=o,a.values=n}return void 0===t.parse?new t(a.name,a.times,a.values,a.interpolation):t.parse(a)},toJSON:function(a){var t=a.constructor,o;if(void 0!==t.toJSON)o=t.toJSON(a);else{o={name:a.name,times:Hc.convertArray(a.times,Array),values:Hc.convertArray(a.values,Array)};var n=a.getInterpolation();n!==a.DefaultInterpolation&&(o.interpolation=n)}return o.type=a.ValueTypeName,o},_getTrackTypeForValueTypeName:function(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return kd;case"vector":case"vector2":case"vector3":case"vector4":return Vd;case"color":return Pd;case"quaternion":return Ud;case"bool":case"boolean":return Rd;case"string":return zd;}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+r)}}),Object.assign(Hd.prototype,{constructor:Hd,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(r){return new Qd(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodLinear:function(r){return new Gd(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:function(r){return new Fd(this.times,this.values,this.getValueSize(),r)},setInterpolation:function(r){var t;if(2300===r?t=this.InterpolantFactoryMethodDiscrete:2301===r?t=this.InterpolantFactoryMethodLinear:2302===r?t=this.InterpolantFactoryMethodSmooth:void 0,void 0===t){var a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(r===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrack:",a)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(a){if(0!==a)for(var t=this.times,o=0,n=t.length;o!==n;++o)t[o]+=a;return this},scale:function(a){if(1!==a)for(var t=this.times,o=0,n=t.length;o!==n;++o)t[o]*=a;return this},trim:function(s,t){for(var l=this.times,i=l.length,r=0,n=i-1;r!==i&&l[r]<s;)++r;for(;-1!==n&&l[n]>t;)--n;if(++n,0!==r||n!==i){r>=n&&(n=C(n,1),r=n-1);var a=this.getValueSize();this.times=Hc.arraySlice(l,r,n),this.values=Hc.arraySlice(this.values,r*a,n*a)}return this},validate:function(){var l=!0,t=this.getValueSize();0!=t-D(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),l=!1);var d=this.times,i=this.values,r=d.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),l=!1);for(var n=null,a=0,o;a!==r;a++){if(o=d[a],"number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,o),l=!1;break}if(null!==n&&n>o){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,o,n),l=!1;break}n=o}if(void 0!==i&&Hc.isTypedArray(i))for(var a=0,p=i.length,c;a!==p;++a)if(c=i[a],isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),l=!1;break}return l},optimize:function(){for(var l=this.times,t=this.values,u=this.getValueSize(),i=2302===this.getInterpolation(),r=1,n=l.length-1,a=1;a<n;++a){var o=!1,s=l[a];if(s!==l[a+1]&&(1!==a||s!==s[0]))if(i)o=!0;else for(var c=a*u,g=0,p;g!==u;++g)if(p=t[c+g],p!==t[c-u+g]||p!==t[c+u+g]){o=!0;break}if(o){if(a!==r){l[r]=l[a];for(var d=a*u,h=r*u,g=0;g!==u;++g)t[h+g]=t[d+g]}++r}}if(0<n){l[r]=l[n];for(var d=n*u,h=r*u,g=0;g!==u;++g)t[h+g]=t[d+g];++r}return r!==l.length&&(this.times=Hc.arraySlice(l,0,r),this.values=Hc.arraySlice(t,0,r*u)),this}}),Vd.prototype=Object.assign(Object.create(Hd.prototype),{constructor:Vd,ValueTypeName:"vector"}),Object.assign(Yd,{parse:function(o){for(var t=[],s=o.tracks,i=1/(o.fps||1),r=0,n=s.length;r!==n;++r)t.push(Hd.parse(s[r]).scale(i));return new Yd(o.name,o.duration,t)},toJSON:function(o){for(var t=[],s=o.tracks,i={name:o.name,duration:o.duration,tracks:t},r=0,n=s.length;r!==n;++r)t.push(Hd.toJSON(s[r]));return i},CreateFromMorphTargetSequence:function(l,t,d,i){for(var r=t.length,n=[],a=0;a<r;a++){var o=[],s=[];o.push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);var c=Hc.getKeyframeOrder(o);o=Hc.sortedArray(o,1,c),s=Hc.sortedArray(s,1,c),i||0!==o[0]||(o.push(r),s.push(s[0])),n.push(new kd(".morphTargetInfluences["+t[a].name+"]",o,s).scale(1/d))}return new Yd(l,-1,n)},findByName:function(a,t){var o=a;if(!Array.isArray(a)){var i=a;o=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<o.length;r++)if(o[r].name===t)return o[r];return null},CreateClipsFromMorphTargetSequences:function(d,t,p){for(var i={},r=/^([\w-]*?)([\d]+)$/,n=0,a=d.length;n<a;n++){var o=d[n],s=o.name.match(r);if(s&&1<s.length){var c=s[1],m=i[c];m||(i[c]=m=[]),m.push(o)}}var l=[];for(var c in i)l.push(Yd.CreateFromMorphTargetSequence(c,i[c],t,p));return l},parseAnimation:function(y,A){if(!y)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var M=function(i,t,s,l,r){if(0!==s.length){var n=[],a=[];Hc.flattenJSON(s,n,a,l),0!==n.length&&r.push(new i(t,n,a))}},i=[],r=y.name||"default",n=y.length||-1,a=y.fps||30,o=y.hierarchy||[],s=0,c;s<o.length;s++)if(c=o[s].keys,c&&0!==c.length)if(c[0].morphTargets){for(var h={},l=0;l<c.length;l++)if(c[l].morphTargets)for(var u=0;u<c[l].morphTargets.length;u++)h[c[l].morphTargets[u]]=-1;for(var p in h){for(var d=[],f=[],u=0,m;u!==c[l].morphTargets.length;++u)m=c[l],d.push(m.time),f.push(m.morphTarget===p?1:0);i.push(new kd(".morphTargetInfluence["+p+"]",d,f))}n=h.length*(a||1)}else{var x=".bones["+A[s].name+"]";M(Vd,x+".position",c,"pos",i),M(Ud,x+".quaternion",c,"rot",i),M(Vd,x+".scale",c,"scl",i)}return 0===i.length?null:new Yd(r,n,i)}}),Object.assign(Yd.prototype,{resetDuration:function(){for(var a=this.tracks,t=0,o=0,i=a.length,r;o!==i;++o)r=this.tracks[o],t=C(t,r.times[r.times.length-1]);this.duration=t},trim:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this},optimize:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this}}),Object.assign(dn.prototype,{load:function(a,o,t,i){var r=this;new pr(r.manager).load(a,function(a){o(r.parse(JSON.parse(a)))},t,i)},setTextures:function(r){this.textures=r},parse:function(o){function t(r){return void 0===i[r]&&console.warn("THREE.MaterialLoader: Undefined texture",r),i[r]}var i=this.textures,r=new Ic[o.type];if(void 0!==o.uuid&&(r.uuid=o.uuid),void 0!==o.name&&(r.name=o.name),void 0!==o.color&&r.color.setHex(o.color),void 0!==o.roughness&&(r.roughness=o.roughness),void 0!==o.metalness&&(r.metalness=o.metalness),void 0!==o.emissive&&r.emissive.setHex(o.emissive),void 0!==o.specular&&r.specular.setHex(o.specular),void 0!==o.shininess&&(r.shininess=o.shininess),void 0!==o.clearCoat&&(r.clearCoat=o.clearCoat),void 0!==o.clearCoatRoughness&&(r.clearCoatRoughness=o.clearCoatRoughness),void 0!==o.uniforms&&(r.uniforms=o.uniforms),void 0!==o.vertexShader&&(r.vertexShader=o.vertexShader),void 0!==o.fragmentShader&&(r.fragmentShader=o.fragmentShader),void 0!==o.vertexColors&&(r.vertexColors=o.vertexColors),void 0!==o.fog&&(r.fog=o.fog),void 0!==o.flatShading&&(r.flatShading=o.flatShading),void 0!==o.blending&&(r.blending=o.blending),void 0!==o.side&&(r.side=o.side),void 0!==o.opacity&&(r.opacity=o.opacity),void 0!==o.transparent&&(r.transparent=o.transparent),void 0!==o.alphaTest&&(r.alphaTest=o.alphaTest),void 0!==o.depthTest&&(r.depthTest=o.depthTest),void 0!==o.depthWrite&&(r.depthWrite=o.depthWrite),void 0!==o.colorWrite&&(r.colorWrite=o.colorWrite),void 0!==o.wireframe&&(r.wireframe=o.wireframe),void 0!==o.wireframeLinewidth&&(r.wireframeLinewidth=o.wireframeLinewidth),void 0!==o.wireframeLinecap&&(r.wireframeLinecap=o.wireframeLinecap),void 0!==o.wireframeLinejoin&&(r.wireframeLinejoin=o.wireframeLinejoin),void 0!==o.rotation&&(r.rotation=o.rotation),1!==o.linewidth&&(r.linewidth=o.linewidth),void 0!==o.dashSize&&(r.dashSize=o.dashSize),void 0!==o.gapSize&&(r.gapSize=o.gapSize),void 0!==o.scale&&(r.scale=o.scale),void 0!==o.skinning&&(r.skinning=o.skinning),void 0!==o.morphTargets&&(r.morphTargets=o.morphTargets),void 0!==o.dithering&&(r.dithering=o.dithering),void 0!==o.visible&&(r.visible=o.visible),void 0!==o.userData&&(r.userData=o.userData),void 0!==o.shading&&(r.flatShading=1===o.shading),void 0!==o.size&&(r.size=o.size),void 0!==o.sizeAttenuation&&(r.sizeAttenuation=o.sizeAttenuation),void 0!==o.map&&(r.map=t(o.map)),void 0!==o.alphaMap&&(r.alphaMap=t(o.alphaMap),r.transparent=!0),void 0!==o.bumpMap&&(r.bumpMap=t(o.bumpMap)),void 0!==o.bumpScale&&(r.bumpScale=o.bumpScale),void 0!==o.normalMap&&(r.normalMap=t(o.normalMap)),void 0!==o.normalScale){var n=o.normalScale;!1===Array.isArray(n)&&(n=[n,n]),r.normalScale=new Aa().fromArray(n)}return void 0!==o.displacementMap&&(r.displacementMap=t(o.displacementMap)),void 0!==o.displacementScale&&(r.displacementScale=o.displacementScale),void 0!==o.displacementBias&&(r.displacementBias=o.displacementBias),void 0!==o.roughnessMap&&(r.roughnessMap=t(o.roughnessMap)),void 0!==o.metalnessMap&&(r.metalnessMap=t(o.metalnessMap)),void 0!==o.emissiveMap&&(r.emissiveMap=t(o.emissiveMap)),void 0!==o.emissiveIntensity&&(r.emissiveIntensity=o.emissiveIntensity),void 0!==o.specularMap&&(r.specularMap=t(o.specularMap)),void 0!==o.envMap&&(r.envMap=t(o.envMap)),void 0!==o.reflectivity&&(r.reflectivity=o.reflectivity),void 0!==o.lightMap&&(r.lightMap=t(o.lightMap)),void 0!==o.lightMapIntensity&&(r.lightMapIntensity=o.lightMapIntensity),void 0!==o.aoMap&&(r.aoMap=t(o.aoMap)),void 0!==o.aoMapIntensity&&(r.aoMapIntensity=o.aoMapIntensity),void 0!==o.gradientMap&&(r.gradientMap=t(o.gradientMap)),r}}),Object.assign(fn.prototype,{load:function(a,o,t,i){var r=this;new pr(r.manager).load(a,function(a){o(r.parse(JSON.parse(a)))},t,i)},parse:function(a){var t=new Mt,m=a.data.index;if(void 0!==m){var i=new Vc[m.type](m.array);t.setIndex(new Ya(i,1))}var r=a.data.attributes;for(var n in r){var o=r[n],i=new Vc[o.type](o.array);t.addAttribute(n,new Ya(i,o.itemSize,o.normalized))}var s=a.data.groups||a.data.drawcalls||a.data.offsets;if(void 0!==s)for(var c=0,g=s.length,l;c!==g;++c)l=s[c],t.addGroup(l.start,l.count,l.materialIndex);var u=a.data.boundingSphere;if(void 0!==u){var p=new Ea;void 0!==u.center&&p.fromArray(u.center),t.boundingSphere=new $(p,u.radius)}return t}});var Vc={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};mn.Handlers={handlers:[],add:function(r,t){this.handlers.push(r,t)},get:function(o){for(var t=this.handlers,s=0,i=t.length;s<i;s+=2){var r=t[s],n=t[s+1];if(r.test(o))return n}return null}},Object.assign(mn.prototype,{crossOrigin:void 0,initMaterials:function(a,t,o){for(var i=[],r=0;r<a.length;++r)i[r]=this.createMaterial(a[r],t,o);return i},createMaterial:function(){var a={NoBlending:dp,NormalBlending:cp,AdditiveBlending:pp,SubtractiveBlending:up,MultiplyBlending:mp,CustomBlending:gp},t=new X,d=new gr,i=new dn;return function(r,m,g){function o(a,t,o,r,n){var i=m+a,l=mn.Handlers.get(i),c;null===l?(d.setCrossOrigin(g),c=d.load(i)):c=l.load(i),void 0!==t&&(c.repeat.fromArray(t),1!==t[0]&&(c.wrapS=vp),1!==t[1]&&(c.wrapT=vp)),void 0!==o&&c.offset.fromArray(o),void 0!==r&&("repeat"===r[0]&&(c.wrapS=vp),"mirror"===r[0]&&(c.wrapS=bp),"repeat"===r[1]&&(c.wrapT=vp),"mirror"===r[1]&&(c.wrapT=bp)),void 0!==n&&(c.anisotropy=n);var u=zp.generateUUID();return y[u]=c,u}var y={},n={uuid:zp.generateUUID(),type:"MeshLambertMaterial"};for(var s in r){var l=r[s];switch(s){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":n.name=l;break;case"blending":n.blending=a[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",s,"is no longer supported.");break;case"colorDiffuse":n.color=t.fromArray(l).getHex();break;case"colorSpecular":n.specular=t.fromArray(l).getHex();break;case"colorEmissive":n.emissive=t.fromArray(l).getHex();break;case"specularCoef":n.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(n.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(n.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(n.type="MeshStandardMaterial");break;case"mapDiffuse":n.map=o(l,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":n.emissiveMap=o(l,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":n.lightMap=o(l,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":n.aoMap=o(l,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":n.bumpMap=o(l,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":n.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":n.normalMap=o(l,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":n.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":n.specularMap=o(l,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":n.metalnessMap=o(l,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":n.roughnessMap=o(l,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":n.alphaMap=o(l,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":n.side=np;break;case"doubleSided":n.side=ip;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),n.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":n[s]=l;break;case"vertexColors":!0===l&&(n.vertexColors=lp),"face"===l&&(n.vertexColors=ro);break;default:console.error("THREE.Loader.createMaterial: Unsupported",s,l);}}return"MeshBasicMaterial"===n.type&&delete n.emissive,"MeshPhongMaterial"!==n.type&&delete n.specular,1>n.opacity&&(n.transparent=!0),i.setTextures(y),i.parse(n)}}()});var kc={decodeText:function(a){if("undefined"!=typeof TextDecoder)return new TextDecoder().decode(a);for(var t="",o=0,n=a.length;o<n;o++)t+=s(a[o]);return decodeURIComponent(escape(t))},extractUrlBase:function(r){var t=r.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")}};Object.assign(vn.prototype,{load:function(l,t,s,i){var d=this,n=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:kc.extractUrlBase(l),r=new pr(this.manager);r.setWithCredentials(this.withCredentials),r.load(l,function(a){var i=JSON.parse(a),r=i.metadata;if(void 0!==r){var o=r.type;if(void 0!==o){if("object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.SceneLoader instead.")}}var s=d.parse(i,n);t(s.geometry,s.materials)},s,i)},setTexturePath:function(r){this.texturePath=r},parse:function(){function s(a,i){function j(r,t){return r&1<<t}var r=a.faces,I=a.vertices,O=a.normals,N=a.colors,z=a.scale,D=0,B,n,o,s,c,h,l,u,p,d,f,m,v,g,y,x,b,_,w,M,E,T,S,A,L,R,C;if(void 0!==a.uvs){for(B=0;B<a.uvs.length;B++)a.uvs[B].length&&D++;for(B=0;B<D;B++)i.faceVertexUvs[B]=[]}for(s=0,c=I.length;s<c;)_=new Ea,_.x=I[s++]*z,_.y=I[s++]*z,_.z=I[s++]*z,i.vertices.push(_);for(s=0,c=r.length;s<c;)if(d=r[s++],f=j(d,0),m=j(d,1),v=j(d,3),g=j(d,4),y=j(d,5),x=j(d,6),b=j(d,7),f){if(M=new Va,M.a=r[s],M.b=r[s+1],M.c=r[s+3],E=new Va,E.a=r[s+1],E.b=r[s+2],E.c=r[s+3],s+=4,m&&(p=r[s++],M.materialIndex=p,E.materialIndex=p),o=i.faces.length,v)for(B=0;B<D;B++)for(A=a.uvs[B],i.faceVertexUvs[B][o]=[],i.faceVertexUvs[B][o+1]=[],n=0;4>n;n++)u=r[s++],R=A[2*u],C=A[2*u+1],L=new Aa(R,C),2!==n&&i.faceVertexUvs[B][o].push(L),0!==n&&i.faceVertexUvs[B][o+1].push(L);if(g&&(l=3*r[s++],M.normal.set(O[l++],O[l++],O[l]),E.normal.copy(M.normal)),y)for(B=0;4>B;B++)l=3*r[s++],S=new Ea(O[l++],O[l++],O[l]),2!==B&&M.vertexNormals.push(S),0!==B&&E.vertexNormals.push(S);if(x&&(h=r[s++],T=N[h],M.color.setHex(T),E.color.setHex(T)),b)for(B=0;4>B;B++)h=r[s++],T=N[h],2!==B&&M.vertexColors.push(new X(T)),0!==B&&E.vertexColors.push(new X(T));i.faces.push(M),i.faces.push(E)}else{if(w=new Va,w.a=r[s++],w.b=r[s++],w.c=r[s++],m&&(p=r[s++],w.materialIndex=p),o=i.faces.length,v)for(B=0;B<D;B++)for(A=a.uvs[B],i.faceVertexUvs[B][o]=[],n=0;3>n;n++)u=r[s++],R=A[2*u],C=A[2*u+1],L=new Aa(R,C),i.faceVertexUvs[B][o].push(L);if(g&&(l=3*r[s++],w.normal.set(O[l++],O[l++],O[l])),y)for(B=0;3>B;B++)l=3*r[s++],S=new Ea(O[l++],O[l++],O[l]),w.vertexNormals.push(S);if(x&&(h=r[s++],w.color.setHex(N[h])),b)for(B=0;3>B;B++)h=r[s++],w.vertexColors.push(new X(N[h]));i.faces.push(w)}}function t(c,t){var m=void 0===c.influencesPerVertex?2:c.influencesPerVertex;if(c.skinWeights)for(var i=0,r=c.skinWeights.length;i<r;i+=m){var n=c.skinWeights[i],a=1<m?c.skinWeights[i+1]:0,o=2<m?c.skinWeights[i+2]:0,s=3<m?c.skinWeights[i+3]:0;t.skinWeights.push(new ba(n,a,o,s))}if(c.skinIndices)for(var i=0,r=c.skinIndices.length;i<r;i+=m){var g=c.skinIndices[i],l=1<m?c.skinIndices[i+1]:0,u=2<m?c.skinIndices[i+2]:0,p=3<m?c.skinIndices[i+3]:0;t.skinIndices.push(new ba(g,l,u,p))}t.bones=c.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function l(a,t){var d=a.scale;if(void 0!==a.morphTargets)for(var i=0,m=a.morphTargets.length;i<m;i++){t.morphTargets[i]={},t.morphTargets[i].name=a.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var n=t.morphTargets[i].vertices,o=a.morphTargets[i].vertices,s=0,c=o.length,g;s<c;s+=3)g=new Ea,g.x=o[s]*d,g.y=o[s+1]*d,g.z=o[s+2]*d,n.push(g)}if(void 0!==a.morphColors&&0<a.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var l=t.faces,u=a.morphColors[0].colors,i=0,m=l.length;i<m;i++)l[i].color.fromArray(u,3*i)}}function r(s,t){var l=[],i=[];void 0!==s.animation&&i.push(s.animation),void 0!==s.animations&&(s.animations.length?i=i.concat(s.animations):i.push(s.animations));for(var r=0,d;r<i.length;r++)d=Yd.parseAnimation(i[r],t.bones),d&&l.push(d);if(t.morphTargets){var a=Yd.CreateClipsFromMorphTargetSequences(t.morphTargets,10);l=l.concat(a)}0<l.length&&(t.animations=l)}return function(n,i){void 0!==n.data&&(n=n.data),n.scale=void 0===n.scale?1:1/n.scale;var a=new lt;return s(n,a),t(n,a),l(n,a),r(n,a),a.computeFaceNormals(),a.computeBoundingSphere(),void 0===n.materials||0===n.materials.length?{geometry:a}:{geometry:a,materials:mn.prototype.initMaterials(n.materials,i,this.crossOrigin)}}}()}),Object.assign(gn.prototype,{load:function(s,t,a,o){""===this.texturePath&&(this.texturePath=s.substring(0,s.lastIndexOf("/")+1));var r=this;new pr(r.manager).load(s,function(n){var i=null;try{i=JSON.parse(n)}catch(t){return void 0!==o&&o(t),void console.error("THREE:ObjectLoader: Can't parse "+s+".",t.message)}var a=i.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+s+". Use THREE.JSONLoader instead."):void r.parse(i,t)},a,o)},setTexturePath:function(r){this.texturePath=r},setCrossOrigin:function(r){this.crossOrigin=r},parse:function(l,t){var d=this.parseShape(l.shapes),i=this.parseGeometries(l.geometries,d),r=this.parseImages(l.images,function(){void 0!==t&&t(o)}),n=this.parseTextures(l.textures,r),a=this.parseMaterials(l.materials,n),o=this.parseObject(l.object,i,a);return l.animations&&(o.animations=this.parseAnimations(l.animations)),void 0!==l.images&&0!==l.images.length||void 0!==t&&t(o),o},parseShape:function(a){var t={};if(void 0!==a)for(var o=0,i=a.length,r;o<i;o++)r=new Ld().fromJSON(a[o]),t[r.uuid]=r;return t},parseGeometries:function(d,t){var p={};if(void 0!==d)for(var i=new vn,r=new fn,n=0,a=d.length;n<a;n++){var o=d[n],c;switch(o.type){case"PlaneGeometry":case"PlaneBufferGeometry":c=new Pc[o.type](o.width,o.height,o.widthSegments,o.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":c=new Pc[o.type](o.width,o.height,o.depth,o.widthSegments,o.heightSegments,o.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":c=new Pc[o.type](o.radius,o.segments,o.thetaStart,o.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":c=new Pc[o.type](o.radiusTop,o.radiusBottom,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":c=new Pc[o.type](o.radius,o.height,o.radialSegments,o.heightSegments,o.openEnded,o.thetaStart,o.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":c=new Pc[o.type](o.radius,o.widthSegments,o.heightSegments,o.phiStart,o.phiLength,o.thetaStart,o.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":c=new Pc[o.type](o.radius,o.detail);break;case"RingGeometry":case"RingBufferGeometry":c=new Pc[o.type](o.innerRadius,o.outerRadius,o.thetaSegments,o.phiSegments,o.thetaStart,o.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":c=new Pc[o.type](o.radius,o.tube,o.radialSegments,o.tubularSegments,o.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":c=new Pc[o.type](o.radius,o.tube,o.tubularSegments,o.radialSegments,o.p,o.q);break;case"LatheGeometry":case"LatheBufferGeometry":c=new Pc[o.type](o.points,o.segments,o.phiStart,o.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":c=new Pc[o.type](o.vertices,o.indices,o.radius,o.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var s=[],n=0,a=o.shapes.length,u;n<a;n++)u=t[o.shapes[n]],s.push(u);c=new Pc[o.type](s,o.curveSegments);break;case"BufferGeometry":c=r.parse(o);break;case"Geometry":c=i.parse(o,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+o.type+"\"");continue;}c.uuid=o.uuid,void 0!==o.name&&(c.name=o.name),p[o.uuid]=c}return p},parseMaterials:function(l,t){var d={};if(void 0!==l){var i=new dn;i.setTextures(t);for(var r=0,n=l.length,a;r<n;r++)if(a=l[r],"MultiMaterial"===a.type){for(var o=[],s=0;s<a.materials.length;s++)o.push(i.parse(a.materials[s]));d[a.uuid]=o}else d[a.uuid]=i.parse(a)}return d},parseAnimations:function(a){for(var t=[],o=0,n;o<a.length;o++)n=Yd.parse(a[o]),t.push(n);return t},parseImages:function(l,t){var d=this,i={};if(void 0!==l&&0<l.length){var r=new md(t),n=new mr(r);n.setCrossOrigin(this.crossOrigin);for(var a=0,o=l.length;a<o;a++){var s=l[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:d.texturePath+s.url;i[s.uuid]=function(r){return d.manager.itemStart(r),n.load(r,function(){d.manager.itemEnd(r)},void 0,function(){d.manager.itemEnd(r),d.manager.itemError(r)})}(c)}}return i},parseTextures:function(s,t){function l(r,a){return"number"==typeof r?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}var i={};if(void 0!==s)for(var r=0,n=s.length,a;r<n;r++){a=s[r],void 0===a.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var o=new Ta(t[a.image]);o.needsUpdate=!0,o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.mapping&&(o.mapping=l(a.mapping,jc)),void 0!==a.offset&&o.offset.fromArray(a.offset),void 0!==a.repeat&&o.repeat.fromArray(a.repeat),void 0!==a.center&&o.center.fromArray(a.center),void 0!==a.rotation&&(o.rotation=a.rotation),void 0!==a.wrap&&(o.wrapS=l(a.wrap[0],Wc),o.wrapT=l(a.wrap[1],Wc)),void 0!==a.minFilter&&(o.minFilter=l(a.minFilter,Xc)),void 0!==a.magFilter&&(o.magFilter=l(a.magFilter,Xc)),void 0!==a.anisotropy&&(o.anisotropy=a.anisotropy),void 0!==a.flipY&&(o.flipY=a.flipY),i[a.uuid]=o}return i},parseObject:function(m,g,y){function t(r){return void 0===g[r]&&console.warn("THREE.ObjectLoader: Undefined geometry",r),g[r]}function r(o){if(void 0!==o){if(Array.isArray(o)){for(var t=[],i=0,r=o.length,s;i<r;i++)s=o[i],void 0===y[s]&&console.warn("THREE.ObjectLoader: Undefined material",s),t.push(y[s]);return t}return void 0===y[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),y[o]}}var n;switch(m.type){case"Scene":n=new Ee,void 0!==m.background&&tp(m.background)&&(n.background=new X(m.background)),void 0!==m.fog&&("Fog"===m.fog.type?n.fog=new Me(m.fog.color,m.fog.near,m.fog.far):"FogExp2"===m.fog.type&&(n.fog=new we(m.fog.color,m.fog.density)));break;case"PerspectiveCamera":n=new ue(m.fov,m.aspect,m.near,m.far),void 0!==m.focus&&(n.focus=m.focus),void 0!==m.zoom&&(n.zoom=m.zoom),void 0!==m.filmGauge&&(n.filmGauge=m.filmGauge),void 0!==m.filmOffset&&(n.filmOffset=m.filmOffset),void 0!==m.view&&(n.view=Object.assign({},m.view));break;case"OrthographicCamera":n=new Ha(m.left,m.right,m.top,m.bottom,m.near,m.far);break;case"AmbientLight":n=new jd(m.color,m.intensity);break;case"DirectionalLight":n=new _d(m.color,m.intensity);break;case"PointLight":n=new Sd(m.color,m.intensity,m.distance,m.decay);break;case"RectAreaLight":n=new Od(m.color,m.intensity,m.width,m.height);break;case"SpotLight":n=new Cd(m.color,m.intensity,m.distance,m.angle,m.penumbra,m.decay);break;case"HemisphereLight":n=new Nd(m.color,m.groundColor,m.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=t(m.geometry),o=r(m.material);n=a.bones&&0<a.bones.length?new pl(a,o):new Ot(a,o);break;case"LOD":n=new dl;break;case"Line":n=new ml(t(m.geometry),r(m.material),m.mode);break;case"LineLoop":n=new hl(t(m.geometry),r(m.material));break;case"LineSegments":n=new gl(t(m.geometry),r(m.material));break;case"PointCloud":case"Points":n=new fl(t(m.geometry),r(m.material));break;case"Sprite":n=new ll(r(m.material));break;case"Group":n=new Al;break;default:n=new ot;}if(n.uuid=m.uuid,void 0!==m.name&&(n.name=m.name),void 0===m.matrix?(void 0!==m.position&&n.position.fromArray(m.position),void 0!==m.rotation&&n.rotation.fromArray(m.rotation),void 0!==m.quaternion&&n.quaternion.fromArray(m.quaternion),void 0!==m.scale&&n.scale.fromArray(m.scale)):(n.matrix.fromArray(m.matrix),n.matrix.decompose(n.position,n.quaternion,n.scale)),void 0!==m.castShadow&&(n.castShadow=m.castShadow),void 0!==m.receiveShadow&&(n.receiveShadow=m.receiveShadow),m.shadow&&(void 0!==m.shadow.bias&&(n.shadow.bias=m.shadow.bias),void 0!==m.shadow.radius&&(n.shadow.radius=m.shadow.radius),void 0!==m.shadow.mapSize&&n.shadow.mapSize.fromArray(m.shadow.mapSize),void 0!==m.shadow.camera&&(n.shadow.camera=this.parseObject(m.shadow.camera))),void 0!==m.visible&&(n.visible=m.visible),void 0!==m.userData&&(n.userData=m.userData),void 0!==m.children)for(var i=m.children,s=0;s<i.length;s++)n.add(this.parseObject(i[s],g,y));if("LOD"===m.type)for(var c=m.levels,l=0;l<c.length;l++){var u=c[l],p=n.getObjectByProperty("uuid",u.object);void 0!==p&&n.addLevel(p,u.distance)}return n}});var jc={UVMapping:300,CubeReflectionMapping:jo,CubeRefractionMapping:yp,EquirectangularReflectionMapping:fp,EquirectangularRefractionMapping:Ap,SphericalReflectionMapping:Mp,CubeUVReflectionMapping:xp,CubeUVRefractionMapping:Ep},Wc={RepeatWrapping:vp,ClampToEdgeWrapping:Tp,MirroredRepeatWrapping:bp},Xc={NearestFilter:Lp,NearestMipMapNearestFilter:Dp,NearestMipMapLinearFilter:Np,LinearFilter:wp,LinearMipMapNearestFilter:Cp,LinearMipMapLinearFilter:Sp};yn.prototype={constructor:yn,setOptions:function(r){return this.options=r,this},load:function(o,t,s,i){void 0===o&&(o=""),void 0!==this.path&&(o=this.path+o);var r=this,n=Oc.get(o);return void 0===n?void fetch(o).then(function(r){return r.blob()}).then(function(a){return createImageBitmap(a,r.options)}).then(function(a){Oc.add(o,a),t&&t(a),r.manager.itemEnd(o)}).catch(function(t){i&&i(t),r.manager.itemEnd(o),r.manager.itemError(o)}):(r.manager.itemStart(o),setTimeout(function(){t&&t(n),r.manager.itemEnd(o)},0),n)},setCrossOrigin:function(){return this},setPath:function(r){return this.path=r,this}},Object.assign(Wd.prototype,{moveTo:function(r,t){this.currentPath=new bd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(r,t)},lineTo:function(r,t){this.currentPath.lineTo(r,t)},quadraticCurveTo:function(a,t,o,n){this.currentPath.quadraticCurveTo(a,t,o,n)},bezierCurveTo:function(o,t,s,i,r,n){this.currentPath.bezierCurveTo(o,t,s,i,r,n)},splineThru:function(r){this.currentPath.splineThru(r)},toShapes:function(D,t){function N(o){for(var t=[],s=0,l=o.length;s<l;s++){var r=o[s],n=new Ld;n.curves=r.curves,t.push(n)}return t}var i=Cc.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===t)return N(r);var n=[],c,C,I;if(1===r.length)return C=r[0],I=new Ld,I.curves=C.curves,n.push(I),n;var s=!i(r[0].getPoints());s=D?!s:s;var j=[],u=[],p=[],d=0,f;u[d]=void 0,p[d]=[];for(var O=0,m=r.length;O<m;O++)C=r[O],f=C.getPoints(),c=i(f),c=D?!c:c,c?(!s&&u[d]&&d++,u[d]={s:new Ld,p:f},u[d].s.curves=C.curves,s&&d++,p[d]=[]):p[d].push({h:C,p:f[0]});if(!u[0])return N(r);if(1<u.length){for(var v=!1,g=[],y=0,z=u.length;y<z;y++)j[y]=[];for(var y=0,z=u.length;y<z;y++)for(var b=p[y],_=0;_<b.length;_++){for(var B=b[_],M=!0,E=0;E<u.length;E++)(function(d,t){for(var p=t.length,i=!1,u=p-1,n=0;n<p;u=n++){var a=t[u],o=t[n],s=o.x-a.x,m=o.y-a.y;if(T(m)>rp){if(0>m&&(a=t[n],s=-s,o=t[u],m=-m),d.y<a.y||d.y>o.y)continue;if(d.y!==a.y){var g=m*(d.x-a.x)-s*(d.y-a.y);if(0===g)return!0;if(0>g)continue;i=!i}else if(d.x===a.x)return!0}else{if(d.y!==a.y)continue;if(o.x<=d.x&&d.x<=a.x||a.x<=d.x&&d.x<=o.x)return!0}}return i})(B.p,u[E].p)&&(y!==E&&g.push({froms:y,tos:E,hole:_}),M?(M=!1,j[E].push(B)):v=!0);M&&j[y].push(B)}0<g.length&&(v||(p=j))}for(var O=0,U=u.length,A;O<U;O++){I=u[O].s,n.push(I),A=p[O];for(var S=0,L=A.length;S<L;S++)I.holes.push(A[S].h)}return n}}),Object.assign(bn.prototype,{isFont:!0,generateShapes:function(s,t,l){void 0===t&&(t=100),void 0===l&&(l=4);for(var i=[],r=_n(s,t,l,this.data),n=0,a=r.length;n<a;n++)Array.prototype.push.apply(i,r[n].toShapes());return i}}),Object.assign(Mn.prototype,{load:function(o,s,t,i){var l=this,r=new pr(this.manager);r.setPath(this.path),r.load(o,function(a){var t;try{t=JSON.parse(a)}catch(r){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),t=JSON.parse(a.substring(65,a.length-2))}var o=l.parse(t);s&&s(o)},t,i)},parse:function(r){return new bn(r)},setPath:function(r){return this.path=r,this}});var qc={getContext:function(){return void 0===Zc&&(Zc=new(window.AudioContext||window.webkitAudioContext)),Zc},setContext:function(r){Zc=r}},Zc;Object.assign(En.prototype,{load:function(a,o,t,i){var r=new pr(this.manager);r.setResponseType("arraybuffer"),r.load(a,function(r){qc.getContext().decodeAudioData(r,function(r){o(r)})},t,i)}}),Object.assign(Tn.prototype,{update:function(){var g=new Ma,h=new Ma,l,t,A,i,n,a,o,s;return function(M){if(l!==this||t!==M.focus||A!==M.fov||i!==M.aspect*this.aspect||n!==M.near||a!==M.far||o!==M.zoom||s!==this.eyeSep){l=this,t=M.focus,A=M.fov,i=M.aspect*this.aspect,n=M.near,a=M.far,o=M.zoom;var r=M.projectionMatrix.clone();s=this.eyeSep/2;var u=s*n/t,f=n*y(.5*(zp.DEG2RAD*A))/o,x,p;h.elements[12]=-s,g.elements[12]=s,x=-f*i+u,p=f*i+u,r.elements[0]=2*n/(p-x),r.elements[8]=(p+x)/(p-x),this.cameraL.projectionMatrix.copy(r),x=-f*i-u,p=f*i-u,r.elements[0]=2*n/(p-x),r.elements[8]=(p+x)/(p-x),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(M.matrixWorld).multiply(h),this.cameraR.matrixWorld.copy(M.matrixWorld).multiply(g)}}()}),Sn.prototype=Object.create(ot.prototype),Sn.prototype.constructor=Sn,An.prototype=Object.assign(Object.create(ot.prototype),{constructor:An,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(r){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=r,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(r){this.gain.gain.value=r},updateMatrixWorld:function(){var s=new Ea,t=new xa,l=new Ea,i=new Ea;return function(r){ot.prototype.updateMatrixWorld.call(this,r);var n=this.context.listener,a=this.up;this.matrixWorld.decompose(s,t,l),i.set(0,0,-1).applyQuaternion(t),n.positionX?(n.positionX.setValueAtTime(s.x,this.context.currentTime),n.positionY.setValueAtTime(s.y,this.context.currentTime),n.positionZ.setValueAtTime(s.z,this.context.currentTime),n.forwardX.setValueAtTime(i.x,this.context.currentTime),n.forwardY.setValueAtTime(i.y,this.context.currentTime),n.forwardZ.setValueAtTime(i.z,this.context.currentTime),n.upX.setValueAtTime(a.x,this.context.currentTime),n.upY.setValueAtTime(a.y,this.context.currentTime),n.upZ.setValueAtTime(a.z,this.context.currentTime)):(n.setPosition(s.x,s.y,s.z),n.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),Xd.prototype=Object.assign(Object.create(ot.prototype),{constructor:Xd,getOutput:function(){return this.gain},setNodeSource:function(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this},setBuffer:function(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.onended=this.onEnded.bind(this),r.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,r.start(this.startTime,this.offset),this.isPlaying=!0,this.source=r,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.offset=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var r=1,t=this.filters.length;r<t;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var r=1,t=this.filters.length;r<t;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(r){return r||(r=[]),!0===this.isPlaying?(this.disconnect(),this.filters=r,this.connect()):this.filters=r,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(r){return this.setFilters(r?[r]:[])},setPlaybackRate:function(r){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=r,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(r){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=r,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(r){return this.gain.gain.value=r,this}}),qd.prototype=Object.assign(Object.create(Xd.prototype),{constructor:qd,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(r){this.panner.refDistance=r},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(r){this.panner.rolloffFactor=r},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(r){this.panner.distanceModel=r},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(r){this.panner.maxDistance=r},updateMatrixWorld:function(){var r=new Ea;return function(t){ot.prototype.updateMatrixWorld.call(this,t),r.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(r.x,r.y,r.z)}}()}),Object.assign(Zd.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var r=0,t=this.getFrequencyData(),a=0;a<t.length;a++)r+=t[a];return r/t.length}}),Object.assign(Pn.prototype,{accumulate:function(l,t){var d=this.buffer,i=this.valueSize,r=l*i+i,n=this.cumulativeWeight;if(0===n){for(var a=0;a!==i;++a)d[r+a]=d[a];n=t}else{n+=t;var o=t/n;this._mixBufferRegion(d,r,0,o,i)}this.cumulativeWeight=n},apply:function(o){var t=this.valueSize,l=this.buffer,i=o*t+t,r=this.cumulativeWeight,n=this.binding;if(this.cumulativeWeight=0,1>r){this._mixBufferRegion(l,i,3*t,1-r,t)}for(var a=t;a!==t+t;++a)if(l[a]!==l[a+t]){n.setValue(l,i);break}},saveOriginalState:function(){var a=this.binding,t=this.buffer,o=this.valueSize,i=3*o;a.getValue(t,i);for(var r=o;r!==i;++r)t[r]=t[i+r%o];this.cumulativeWeight=0},restoreOriginalState:function(){var r=3*this.valueSize;this.binding.setValue(this.buffer,r)},_select:function(o,t,s,i,r){if(.5<=i)for(var n=0;n!==r;++n)o[t+n]=o[s+n]},_slerp:function(a,t,o,n){xa.slerpFlat(a,t,a,t,a,o,n)},_lerp:function(a,t,l,i,r){for(var n=0,o;n!==r;++n)o=t+n,a[o]=a[o]*(1-i)+a[l+n]*i}});var Yc="\\[\\]\\.:\\/";Object.assign(In.prototype,{getValue:function(a,t){this.bind();var o=this._targetGroup.nCachedObjects_,n=this._bindings[o];void 0!==n&&n.getValue(a,t)},setValue:function(a,t){for(var o=this._bindings,i=this._targetGroup.nCachedObjects_,r=o.length;i!==r;++i)o[i].setValue(a,t)},bind:function(){for(var r=this._bindings,t=this._targetGroup.nCachedObjects_,a=r.length;t!==a;++t)r[t].bind()},unbind:function(){for(var r=this._bindings,t=this._targetGroup.nCachedObjects_,a=r.length;t!==a;++t)r[t].unbind()}}),Object.assign(Jd,{Composite:In,create:function(r,t,a){return r&&r.isAnimationObjectGroup?new Jd.Composite(r,t,a):new Jd(r,t,a)},sanitizeNodeName:function(){var r=/[\[\]\.:\/]/g;return function(t){return t.replace(/\s/g,"_").replace(r,"")}}(),parseTrackName:function(){var l="[^"+Yc+"]",t="[^"+Yc.replace("\\.","")+"]",d=/((?:WC+[\/:])*)/.source.replace("WC",l),i=/(WCOD+)?/.source.replace("WCOD",t),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",l),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",l),a=new RegExp("^"+d+i+r+n+"$"),o=["material","materials","bones"];return function(s){var t=a.exec(s);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+s);var l={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=l.nodeName&&l.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=l.nodeName.substring(i+1);-1!==o.indexOf(r)&&(l.nodeName=l.nodeName.substring(0,i),l.objectName=r)}if(null===l.propertyName||0===l.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+s);return l}}(),findNode:function(a,o){if(!o||""===o||"root"===o||"."===o||-1===o||o===a.name||o===a.uuid)return a;if(a.skeleton){var t=a.skeleton.getBoneByName(o);if(void 0!==t)return t}if(a.children){var i=function s(r){for(var t=0,i;t<r.length;t++){if(i=r[t],i.name===o||i.uuid===o)return i;var n=s(i.children);if(n)return n}return null},r=i(a.children);if(r)return r}return null}}),Object.assign(Jd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(r,t){r[t]=this.node[this.propertyName]},function(a,t){for(var o=this.resolvedProperty,i=0,r=o.length;i!==r;++i)a[t++]=o[i]},function(r,t){r[t]=this.resolvedProperty[this.propertyIndex]},function(r,t){this.resolvedProperty.toArray(r,t)}],SetterByBindingTypeAndVersioning:[[function(r,t){this.targetObject[this.propertyName]=r[t]},function(r,t){this.targetObject[this.propertyName]=r[t],this.targetObject.needsUpdate=!0},function(r,t){this.targetObject[this.propertyName]=r[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,t){for(var o=this.resolvedProperty,i=0,r=o.length;i!==r;++i)o[i]=a[t++]},function(a,t){for(var o=this.resolvedProperty,i=0,r=o.length;i!==r;++i)o[i]=a[t++];this.targetObject.needsUpdate=!0},function(a,t){for(var o=this.resolvedProperty,i=0,r=o.length;i!==r;++i)o[i]=a[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,t){this.resolvedProperty[this.propertyIndex]=r[t]},function(r,t){this.resolvedProperty[this.propertyIndex]=r[t],this.targetObject.needsUpdate=!0},function(r,t){this.resolvedProperty[this.propertyIndex]=r[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,t){this.resolvedProperty.fromArray(r,t)},function(r,t){this.resolvedProperty.fromArray(r,t),this.targetObject.needsUpdate=!0},function(r,t){this.resolvedProperty.fromArray(r,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(r,t){this.bind(),this.getValue(r,t)},setValue:function(r,t){this.bind(),this.setValue(r,t)},bind:function(){var d=this.node,p=this.parsedPath,u=p.objectName,i=p.propertyName,r=p.propertyIndex;if(d||(d=Jd.findNode(this.rootNode,p.nodeName)||this.rootNode,this.node=d),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!d)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){var n=p.objectIndex;switch(u){case"materials":if(!d.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!d.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);d=d.material.materials;break;case"bones":if(!d.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);d=d.skeleton.bones;for(var a=0;a<d.length;a++)if(d[a].name===n){n=a;break}break;default:if(void 0===d[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);d=d[u];}if(void 0!==n){if(void 0===d[n])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,d);d=d[n]}}var o=d[i];if(void 0===o){var s=p.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+i+" but it wasn't found.",d)}var c=this.Versioning.None;void 0===d.needsUpdate?void 0!==d.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=d):(c=this.Versioning.NeedsUpdate,this.targetObject=d);var m=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!d.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(d.geometry.isBufferGeometry){if(!d.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(d.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!d.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(d.geometry.morphTargets[a].name===r){r=a;break}}}m=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(m=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Jd.prototype,{_getValue_unbound:Jd.prototype.getValue,_setValue_unbound:Jd.prototype.setValue}),Object.assign(Nn.prototype,{isAnimationObjectGroup:!0,add:function(){for(var A=this._objects,t=A.length,M=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,n=this._parsedPaths,a=this._bindings,o=a.length,s=void 0,c=0,h=arguments.length;c!==h;++c){var l=arguments[c],u=l.uuid,p=i[u];if(void 0===p){p=t++,i[u]=p,A.push(l);for(var d=0,f=o;d!==f;++d)a[d].push(new Jd(l,r[d],n[d]))}else if(p<M){s=A[p];var m=--M,E=A[m];i[E.uuid]=p,A[p]=E,i[u]=m,A[m]=l;for(var d=0,f=o;d!==f;++d){var g=a[d],y=g[m],x=g[p];g[p]=y,void 0===x&&(x=new Jd(l,r[d],n[d])),g[m]=x}}else A[p]!==s&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=M},remove:function(){for(var d=this._objects,t=this.nCachedObjects_,g=this._indicesByUUID,i=this._bindings,r=i.length,n=0,a=arguments.length;n!==a;++n){var o=arguments[n],s=o.uuid,c=g[s];if(void 0!==c&&c>=t){var h=t++,l=d[h];g[l.uuid]=c,d[c]=l,g[s]=h,d[h]=o;for(var u=0;u!==r;++u){var p=i[u],y=p[h],m=p[c];p[c]=y,p[h]=m}}}this.nCachedObjects_=t},uncache:function(){for(var A=this._objects,t=A.length,M=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,n=r.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,h=i[c];if(void 0!==h)if(delete i[c],h<M){var l=--M,u=A[l],p=--t,d=A[p];i[u.uuid]=h,A[h]=u,i[d.uuid]=l,A[l]=d,A.pop();for(var f=0,m=n;f!==m;++f){var E=r[f],g=E[l],y=E[p];E[h]=g,E[l]=y,E.pop()}}else{var p=--t,d=A[p];i[d.uuid]=h,A[h]=d,A.pop();for(var f=0,m=n,E;f!==m;++f)E=r[f],E[h]=E[p],E.pop()}}this.nCachedObjects_=M},subscribe_:function(m,t){var g=this._bindingsIndicesByPath,i=g[m],r=this._bindings;if(void 0!==i)return r[i];var n=this._paths,a=this._parsedPaths,o=this._objects,s=o.length,c=this.nCachedObjects_,h=Array(s);i=r.length,g[m]=i,n.push(m),a.push(t),r.push(h);for(var l=c,u=o.length,p;l!==u;++l)p=o[l],h[l]=new Jd(p,m,t);return h},unsubscribe_:function(l){var t=this._bindingsIndicesByPath,d=t[l];if(void 0!==d){var i=this._paths,r=this._parsedPaths,n=this._bindings,a=n.length-1,o=n[a];t[l[a]]=d,n[d]=o,n.pop(),r[d]=r[a],r.pop(),i[d]=i[a],i.pop()}}}),Object.assign(Un.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(r){return this._startTime=r,this},setLoop:function(r,t){return this.loop=r,this.repetitions=t,this},setEffectiveWeight:function(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(r){return this._scheduleFading(r,0,1)},fadeOut:function(r){return this._scheduleFading(r,1,0)},crossFadeFrom:function(a,t,o){if(a.fadeOut(t),this.fadeIn(t),o){var i=this._clip.duration,r=a._clip.duration;a.warp(1,r/i,t),this.warp(i/r,1,t)}return this},crossFadeTo:function(r,t,a){return r.crossFadeFrom(this,t,a)},stopFading:function(){var r=this._weightInterpolant;return null!==r&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},setEffectiveTimeScale:function(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(r){return this.timeScale=this._clip.duration/r,this.stopWarping()},syncWith:function(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()},halt:function(r){return this.warp(this._effectiveTimeScale,0,r)},warp:function(l,t,d){var i=this._mixer,r=i.time,n=this._timeScaleInterpolant,a=this.timeScale;null===n&&(n=i._lendControlInterpolant(),this._timeScaleInterpolant=n);var o=n.parameterPositions,s=n.sampleValues;return o[0]=r,o[1]=r+d,s[0]=l/a,s[1]=t/a,this},stopWarping:function(){var r=this._timeScaleInterpolant;return null!==r&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(d,t,p,i){if(!this.enabled)return void this._updateWeight(d);var r=this._startTime;if(null!==r){var n=(d-r)*p;if(0>n||0===p)return;this._startTime=null,t=p*n}t*=this._updateTimeScale(d);var a=this._updateTime(t),o=this._updateWeight(d);if(0<o)for(var s=this._interpolants,c=this._propertyBindings,m=0,l=s.length;m!==l;++m)s[m].evaluate(a),c[m].accumulate(i,o)},_updateWeight:function(a){var t=0;if(this.enabled){t=this.weight;var o=this._weightInterpolant;if(null!==o){var n=o.evaluate(a)[0];t*=n,a>o.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(r){var t=0;if(!this.paused){t=this.timeScale;var a=this._timeScaleInterpolant;null!==a&&(t*=a.evaluate(r)[0],r>a.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(l){var t=this.time+l;if(0===l)return t;var d=this._clip.duration,i=this.loop,r=this._loopCount;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(t>=d)t=d;else{if(!(0>t))break t;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>l?-1:1})}}else{var n=2202===i;if(-1===r&&(0<=l?(r=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),t>=d||0>t){var a=D(t/d);t-=d*a,r+=T(a);var p=this.repetitions-r;if(0>p)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<l?d:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<l?1:-1});else{if(0===p){var s=0>l;this._setEndings(s,!s,n)}else this._setEndings(!1,!1,n);this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(n&&1==(1&r))return this.time=t,d-t}return this.time=t,t},_setEndings:function(a,t,o){var n=this._interpolantSettings;o?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=a?this.zeroSlopeAtStart?2401:Js:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:Js:2402)},_scheduleFading:function(l,t,d){var i=this._mixer,r=i.time,n=this._weightInterpolant;null===n&&(n=i._lendControlInterpolant(),this._weightInterpolant=n);var a=n.parameterPositions,o=n.sampleValues;return a[0]=r,o[0]=t,a[1]=r+l,o[1]=d,this}}),Dn.prototype=Object.assign(Object.create(t.prototype),{constructor:Dn,_bindAction:function(m,t){var g=m._localRoot||this._root,i=m._clip.tracks,r=i.length,n=m._propertyBindings,a=m._interpolants,o=g.uuid,s=this._bindingsByRootAndName,c=s[o];void 0===c&&(c={},s[o]=c);for(var h=0;h!==r;++h){var l=i[h],u=l.name,p=c[u];if(void 0!==p)n[h]=p;else{if(void 0!==(p=n[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,o,u));continue}var d=t&&t._propertyBindings[h].binding.parsedPath;p=new Pn(Jd.create(g,u,d),l.ValueTypeName,l.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,u),n[h]=p}a[h].resultBuffer=p.buffer}},_activateAction:function(l){if(!this._isActiveAction(l)){if(null===l._cacheIndex){var t=(l._localRoot||this._root).uuid,d=l._clip.uuid,i=this._actionsByClip[d];this._bindAction(l,i&&i.knownActions[0]),this._addInactiveAction(l,d,t)}for(var r=l._propertyBindings,n=0,a=r.length,o;n!==a;++n)o=r[n],0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState());this._lendAction(l)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var t=a._propertyBindings,o=0,i=t.length,r;o!==i;++o)r=t[o],0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r));this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}},_isActiveAction:function(r){var t=r._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(s,t,l){var i=this._actions,r=this._actionsByClip,n=r[t];if(void 0===n)n={knownActions:[s],actionByRoot:{}},s._byClipCacheIndex=0,r[t]=n;else{var a=n.knownActions;s._byClipCacheIndex=a.length,a.push(s)}s._cacheIndex=i.length,i.push(s),n.actionByRoot[l]=s},_removeInactiveAction:function(l){var t=this._actions,d=t[t.length-1],i=l._cacheIndex;d._cacheIndex=i,t[i]=d,t.pop(),l._cacheIndex=null;var r=l._clip.uuid,n=this._actionsByClip,a=n[r],o=a.knownActions,s=o[o.length-1],c=l._byClipCacheIndex;s._byClipCacheIndex=c,o[c]=s,o.pop(),l._byClipCacheIndex=null,delete a.actionByRoot[(l._localRoot||this._root).uuid],0===o.length&&delete n[r],this._removeInactiveBindingsForAction(l)},_removeInactiveBindingsForAction:function(a){for(var t=a._propertyBindings,o=0,i=t.length,r;o!==i;++o)r=t[o],0==--r.referenceCount&&this._removeInactiveBinding(r)},_lendAction:function(a){var t=this._actions,o=a._cacheIndex,i=this._nActiveActions++,r=t[i];a._cacheIndex=i,t[i]=a,r._cacheIndex=o,t[o]=r},_takeBackAction:function(a){var t=this._actions,o=a._cacheIndex,i=--this._nActiveActions,r=t[i];a._cacheIndex=i,t[i]=a,r._cacheIndex=o,t[o]=r},_addInactiveBinding:function(o,t,s){var i=this._bindingsByRootAndName,r=i[t],n=this._bindings;void 0===r&&(r={},i[t]=r),r[s]=o,o._cacheIndex=n.length,n.push(o)},_removeInactiveBinding:function(l){var t=this._bindings,d=l.binding,i=d.rootNode.uuid,r=d.path,n=this._bindingsByRootAndName,a=n[i],o=t[t.length-1],s=l._cacheIndex;o._cacheIndex=s,t[s]=o,t.pop(),delete a[r];t:{for(var c in a)break t;delete n[i]}},_lendBinding:function(a){var t=this._bindings,o=a._cacheIndex,i=this._nActiveBindings++,r=t[i];a._cacheIndex=i,t[i]=a,r._cacheIndex=o,t[o]=r},_takeBackBinding:function(a){var t=this._bindings,o=a._cacheIndex,i=--this._nActiveBindings,r=t[i];a._cacheIndex=i,t[i]=a,r._cacheIndex=o,t[o]=r},_lendControlInterpolant:function(){var r=this._controlInterpolants,t=this._nActiveControlInterpolants++,a=r[t];return void 0===a&&(a=new Gd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=t,r[t]=a),a},_takeBackControlInterpolant:function(a){var t=this._controlInterpolants,o=a.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];a.__cacheIndex=i,t[i]=a,r.__cacheIndex=o,t[o]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(l,d){var p=d||this._root,i=p.uuid,r="string"==typeof l?Yd.findByName(p,l):l,n=null===r?l:r.uuid,a=this._actionsByClip[n],o=null;if(void 0!==a){var s=a.actionByRoot[i];if(void 0!==s)return s;o=a.knownActions[0],null===r&&(r=o._clip)}if(null===r)return null;var c=new Un(this,r,d);return this._bindAction(c,o),this._addInactiveAction(c,n,i),c},existingAction:function(s,l){var d=l||this._root,i=d.uuid,r="string"==typeof s?Yd.findByName(d,s):s,n=r?r.uuid:s,a=this._actionsByClip[n];return void 0===a?null:a.actionByRoot[i]||null},stopAllAction:function(){var a=this._actions,t=this._nActiveActions,o=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==t;++r)a[r].reset();for(var r=0;r!==i;++r)o[r].useCount=0;return this},update:function(l){l*=this.timeScale;for(var t=this._actions,d=this._nActiveActions,i=this.time+=l,r=ma(l),n=this._accuIndex^=1,a=0;a!==d;++a)t[a]._update(i,l,r,n);for(var o=this._bindings,s=this._nActiveBindings,a=0;a!==s;++a)o[a].apply(n);return this},getRoot:function(){return this._root},uncacheClip:function(d){var t=this._actions,p=d.uuid,i=this._actionsByClip,r=i[p];if(void 0!==r){for(var n=r.knownActions,a=0,o=n.length,s;a!==o;++a){s=n[a],this._deactivateAction(s);var c=s._cacheIndex,u=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(s)}delete i[p]}},uncacheRoot:function(l){var t=l.uuid,d=this._actionsByClip;for(var i in d){var r=d[i].actionByRoot,n=r[t];void 0!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}var a=this._bindingsByRootAndName,o=a[t];if(void 0!==o)for(var s in o){var c=o[s];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(r,t){var a=this.existingAction(r,t);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}),Kd.prototype.clone=function(){return new Kd(void 0===this.value.clone?this.value:this.value.clone())},Fn.prototype=Object.assign(Object.create(Mt.prototype),{constructor:Fn,isInstancedBufferGeometry:!0,copy:function(r){return Mt.prototype.copy.call(this,r),this.maxInstancedCount=r.maxInstancedCount,this},clone:function(){return new this.constructor().copy(this)}}),Object.defineProperties($d.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign($d.prototype,{isInterleavedBufferAttribute:!0,setX:function(r,t){return this.data.array[r*this.data.stride+this.offset]=t,this},setY:function(r,t){return this.data.array[r*this.data.stride+this.offset+1]=t,this},setZ:function(r,t){return this.data.array[r*this.data.stride+this.offset+2]=t,this},setW:function(r,t){return this.data.array[r*this.data.stride+this.offset+3]=t,this},getX:function(r){return this.data.array[r*this.data.stride+this.offset]},getY:function(r){return this.data.array[r*this.data.stride+this.offset+1]},getZ:function(r){return this.data.array[r*this.data.stride+this.offset+2]},getW:function(r){return this.data.array[r*this.data.stride+this.offset+3]},setXY:function(r,t,a){return r=r*this.data.stride+this.offset,this.data.array[r+0]=t,this.data.array[r+1]=a,this},setXYZ:function(a,t,o,n){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=o,this.data.array[a+2]=n,this},setXYZW:function(a,t,o,i,r){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=o,this.data.array[a+2]=i,this.data.array[a+3]=r,this}}),Object.defineProperty(Gn.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(Gn.prototype,{isInterleavedBuffer:!0,setArray:function(r){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===r?0:r.length/this.stride,this.array=r},setDynamic:function(r){return this.dynamic=r,this},copy:function(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.dynamic=r.dynamic,this},copyAt:function(a,t,o){a*=this.stride,o*=t.stride;for(var i=0,r=this.stride;i<r;i++)this.array[a+i]=t.array[o+i];return this},set:function(r,t){return void 0===t&&(t=0),this.array.set(r,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(r){return this.onUploadCallback=r,this}}),Hn.prototype=Object.assign(Object.create(Gn.prototype),{constructor:Hn,isInstancedInterleavedBuffer:!0,copy:function(r){return Gn.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this}}),$c.prototype=Object.assign(Object.create(Ya.prototype),{constructor:$c,isInstancedBufferAttribute:!0,copy:function(r){return Ya.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this}}),Object.assign(ep.prototype,{linePrecision:1,set:function(r,t){this.ray.set(r,t)},setFromCamera:function(r,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(r.x,r.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(r.x,r.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(a,t,o){var n=o||[];return Wn(a,this,n,t),n.sort(jn),n},intersectObjects:function(o,t,s){var i=s||[];if(!1===Array.isArray(o))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,n=o.length;r<n;r++)Wn(o[r],this,i,t);return i.sort(jn),i}}),Object.assign(Xn.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();r=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=r}return r}}),Object.assign(qn.prototype,{set:function(r,t,a){return this.radius=r,this.phi=t,this.theta=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this},makeSafe:function(){return this.phi=C(1e-6,O(ga-1e-6,this.phi)),this},setFromVector3:function(r){return this.radius=r.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=ap(r.x,r.z),this.phi=E(zp.clamp(r.y/this.radius,-1,1))),this}}),Object.assign(Yn.prototype,{set:function(r,t,a){return this.radius=r,this.theta=t,this.y=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.theta=r.theta,this.y=r.y,this},setFromVector3:function(r){return this.radius=S(r.x*r.x+r.z*r.z),this.theta=ap(r.x,r.z),this.y=r.y,this}}),Object.assign(Zn.prototype,{set:function(r,t){return this.min.copy(r),this.max.copy(t),this},setFromPoints:function(r){this.makeEmpty();for(var t=0,a=r.length;t<a;t++)this.expandByPoint(r[t]);return this},setFromCenterAndSize:function(){var a=new Aa;return function(t,o){var n=a.copy(o).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(r){var t=r||new Aa;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){var t=r||new Aa;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y},getParameter:function(r,t){return(t||new Aa).set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)},clampPoint:function(r,t){return(t||new Aa).copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new Aa;return function(t){return r.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}),Jn.prototype=Object.create(ot.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isImmediateRenderObject=!0,Qn.prototype=Object.create(gl.prototype),Qn.prototype.constructor=Qn,Qn.prototype.update=function(){var l=new Ea,t=new Ea,A=new va;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),A.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,n=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var o=a.vertices,s=a.faces,c=0,h=0,M=s.length;h<M;h++)for(var u=s[h],p=0,d=u.vertexNormals.length;p<d;p++){var f=o[u[i[p]]],m=u.vertexNormals[p];l.copy(f).applyMatrix4(r),t.copy(m).applyMatrix3(A).normalize().multiplyScalar(this.size).add(l),n.setXYZ(c,l.x,l.y,l.z),c+=1,n.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry)for(var x=a.attributes.position,g=a.attributes.normal,c=0,p=0,d=x.count;p<d;p++)l.set(x.getX(p),x.getY(p),x.getZ(p)).applyMatrix4(r),t.set(g.getX(p),g.getY(p),g.getZ(p)),t.applyMatrix3(A).normalize().multiplyScalar(this.size).add(l),n.setXYZ(c,l.x,l.y,l.z),c+=1,n.setXYZ(c,t.x,t.y,t.z),c+=1;n.needsUpdate=!0}}(),Kn.prototype=Object.create(ot.prototype),Kn.prototype.constructor=Kn,Kn.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Kn.prototype.update=function(){var a=new Ea,t=new Ea;return function(){this.light.updateMatrixWorld();var o=this.light.distance?this.light.distance:1e3,n=o*y(this.light.angle);this.cone.scale.set(n,n,o),a.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(a)),void 0===this.color?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),ta.prototype=Object.create(gl.prototype),ta.prototype.constructor=ta,ta.prototype.updateMatrixWorld=function(){var r=new Ea,t=new Ma,l=new Ma;return function(i){var d=this.bones,n=this.geometry,a=n.getAttribute("position");l.getInverse(this.root.matrixWorld);for(var o=0,s=0,c;o<d.length;o++)c=d[o],c.parent&&c.parent.isBone&&(t.multiplyMatrices(l,c.matrixWorld),r.setFromMatrixPosition(t),a.setXYZ(s,r.x,r.y,r.z),t.multiplyMatrices(l,c.parent.matrixWorld),r.setFromMatrixPosition(t),a.setXYZ(s+1,r.x,r.y,r.z),s+=2);n.getAttribute("position").needsUpdate=!0,ot.prototype.updateMatrixWorld.call(this,i)}}(),ea.prototype=Object.create(Ot.prototype),ea.prototype.constructor=ea,ea.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ea.prototype.update=function(){void 0===this.color?this.material.color.copy(this.light.color):this.material.color.set(this.color)},ia.prototype=Object.create(ot.prototype),ia.prototype.constructor=ia,ia.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ia.prototype.update=function(){var a=.5*this.light.width,o=.5*this.light.height,n=this.line.geometry.attributes.position,i=n.array;i[0]=a,i[1]=-o,i[2]=0,i[3]=a,i[4]=o,i[5]=0,i[6]=-a,i[7]=o,i[8]=0,i[9]=-a,i[10]=-o,i[11]=0,i[12]=a,i[13]=-o,i[14]=0,n.needsUpdate=!0,void 0===this.color?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},ra.prototype=Object.create(ot.prototype),ra.prototype.constructor=ra,ra.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ra.prototype.update=function(){var l=new Ea,t=new X,d=new X;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");t.copy(this.light.color),d.copy(this.light.groundColor);for(var n=0,a=r.count,o;n<a;n++)o=n<a/2?t:d,r.setXYZ(n,o.r,o.g,o.b);r.needsUpdate=!0}i.lookAt(l.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),na.prototype=Object.create(gl.prototype),na.prototype.constructor=na,aa.prototype=Object.create(gl.prototype),aa.prototype.constructor=aa,oa.prototype=Object.create(gl.prototype),oa.prototype.constructor=oa,oa.prototype.update=function(){var a=new Ea,t=new Ea,d=new va;return function(){this.object.updateMatrixWorld(!0),d.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,n=this.object.geometry,m=n.vertices,o=n.faces,s=0,c=0,g=o.length;c<g;c++){var l=o[c],u=l.normal;a.copy(m[l.a]).add(m[l.b]).add(m[l.c]).divideScalar(3).applyMatrix4(i),t.copy(u).applyMatrix3(d).normalize().multiplyScalar(this.size).add(a),r.setXYZ(s,a.x,a.y,a.z),s+=1,r.setXYZ(s,t.x,t.y,t.z),s+=1}r.needsUpdate=!0}}(),sa.prototype=Object.create(ot.prototype),sa.prototype.constructor=sa,sa.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},sa.prototype.update=function(){var r=new Ea,t=new Ea,a=new Ea;return function(){r.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),a.subVectors(t,r),this.lightPlane.lookAt(a),void 0===this.color?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(a),this.targetLine.scale.z=a.length()}}(),ca.prototype=Object.create(gl.prototype),ca.prototype.constructor=ca,ca.prototype.update=function(){function a(i,p,a,o){d.set(p,a,o).unproject(r);var s=n[i];if(void 0!==s)for(var c=t.getAttribute("position"),m=0,l=s.length;m<l;m++)c.setXYZ(s[m],d.x,d.y,d.z)}var d=new Ea,r=new nt,t,n;return function(){t=this.geometry,n=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-1,-1,-1),a("n2",1,-1,-1),a("n3",-1,1,-1),a("n4",1,1,-1),a("f1",-1,-1,1),a("f2",1,-1,1),a("f3",-1,1,1),a("f4",1,1,1),a("u1",.7,1.1,-1),a("u2",-.7,1.1,-1),a("u3",0,2,-1),a("cf1",-1,0,1),a("cf2",1,0,1),a("cf3",0,-1,1),a("cf4",0,1,1),a("cn1",-1,0,-1),a("cn2",1,0,-1),a("cn3",0,-1,-1),a("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),ha.prototype=Object.create(gl.prototype),ha.prototype.constructor=ha,ha.prototype.update=function(){var o=new Fa;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&o.setFromObject(this.object),!o.isEmpty()){var s=o.min,i=o.max,r=this.geometry.attributes.position,n=r.array;n[0]=i.x,n[1]=i.y,n[2]=i.z,n[3]=s.x,n[4]=i.y,n[5]=i.z,n[6]=s.x,n[7]=s.y,n[8]=i.z,n[9]=i.x,n[10]=s.y,n[11]=i.z,n[12]=i.x,n[13]=i.y,n[14]=s.z,n[15]=s.x,n[16]=i.y,n[17]=s.z,n[18]=s.x,n[19]=s.y,n[20]=s.z,n[21]=i.x,n[22]=s.y,n[23]=s.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),ha.prototype.setFromObject=function(r){return this.object=r,this.update(),this},la.prototype=Object.create(gl.prototype),la.prototype.constructor=la,la.prototype.updateMatrixWorld=function(r){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),ot.prototype.updateMatrixWorld.call(this,r))},ua.prototype=Object.create(ml.prototype),ua.prototype.constructor=ua,ua.prototype.updateMatrixWorld=function(r){var t=-this.plane.constant;1e-8>T(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),ot.prototype.updateMatrixWorld.call(this,r)};var Jc,Qc;pa.prototype=Object.create(ot.prototype),pa.prototype.constructor=pa,pa.prototype.setDirection=function(){var r=new Ea,a;return function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(r.set(t.z,0,-t.x).normalize(),a=E(t.y),this.quaternion.setFromAxisAngle(r,a))}}(),pa.prototype.setLength=function(r,t,a){void 0===t&&(t=.2*r),void 0===a&&(a=.2*t),this.line.scale.set(1,C(0,r-t),1),this.line.updateMatrix(),this.cone.scale.set(a,t,a),this.cone.position.y=r,this.cone.updateMatrix()},pa.prototype.setColor=function(r){this.line.material.color.copy(r),this.cone.material.color.copy(r)},da.prototype=Object.create(gl.prototype),da.prototype.constructor=da,yr.create=function(r,t){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(yr.prototype),r.prototype.constructor=r,r.prototype.getPoint=t,r},Object.assign(Td.prototype,{createPointsGeometry:function(r){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getPoints(r);return this.createGeometry(t)},createSpacedPointsGeometry:function(r){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var t=this.getSpacedPoints(r);return this.createGeometry(t)},createGeometry:function(a){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new lt,o=0,i=a.length,r;o<i;o++)r=a[o],t.vertices.push(new Ea(r.x,r.y,r.z||0));return t}}),Object.assign(bd.prototype,{fromPoints:function(r){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(r)}}),fa.prototype=Object.create(wr.prototype),Ua.prototype=Object.create(wr.prototype),Da.prototype=Object.create(wr.prototype),Object.assign(Da.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),na.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},ta.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(mn.prototype,{extractUrlBase:function(r){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),kc.extractUrlBase(r)}}),Object.assign(Zn.prototype,{center:function(r){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},size:function(r){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(r)}}),Object.assign(Fa.prototype,{center:function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionSphere:function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)},size:function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)}}),Pt.prototype.center=function(r){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(r)},Object.assign(zp,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(r){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),zp.floorPowerOfTwo(r)},nextPowerOfTwo:function(r){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),zp.ceilPowerOfTwo(r)}}),Object.assign(va.prototype,{flattenToArrayOffset:function(r,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)},multiplyVector3:function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(r)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ma.prototype,{extractPosition:function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)},flattenToArrayOffset:function(r,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)},getPosition:function(){var r;return function(){return void 0===r&&(r=new Ea),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),r.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector4:function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)},crossVector:function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(r)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(o,t,s,i,r,n){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(o,t,i,s,r,n)}}),tt.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)},xa.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)},Object.assign(al.prototype,{isIntersectionBox:function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionPlane:function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)},isIntersectionSphere:function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)}}),Object.assign(Ld.prototype,{extractAllPoints:function(r){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(r)},extrude:function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Di(this,r)},makeGeometry:function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new ql(this,r)}}),Object.assign(Aa.prototype,{fromAttribute:function(r,t,a){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)},distanceToManhattan:function(r){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ea.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)},getScaleFromMatrix:function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)},getColumnFromMatrix:function(r,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,r)},applyProjection:function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)},fromAttribute:function(r,t,a){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)},distanceToManhattan:function(r){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(r)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(ba.prototype,{fromAttribute:function(r,t,a){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(lt.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(ot.prototype,{getChildByName:function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(r,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,r)}}),Object.defineProperties(ot.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(dl.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(cl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(yr.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(r){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=r}}),ue.prototype.setLens=function(r,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(r)},Object.defineProperties(Dd.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}}),Object.defineProperties(Ya.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Mt.prototype,{addIndex:function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)},addDrawCall:function(r,t,a){void 0!==a&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Mt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(Kd.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Z.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new X}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r}}}),Object.defineProperties(ld.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(rl.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}}),Object.assign(_e.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(_e.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(it.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(n.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}}),Object.defineProperties(sl.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),Xd.prototype.load=function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var a=this;return new En().load(r,function(r){a.setBuffer(r)}),this},Zd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Sn.prototype.updateCubeMap=function(r,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,t)};ya.WebGLRenderTargetCube=La,ya.WebGLRenderTarget=n,ya.WebGLRenderer=_e,ya.ShaderLib=wc,ya.UniformsLib=xc,ya.UniformsUtils=bc,ya.ShaderChunk=_c,ya.FogExp2=we,ya.Fog=Me,ya.Scene=Ee,ya.Sprite=ll,ya.LOD=dl,ya.SkinnedMesh=pl,ya.Skeleton=cl,ya.Bone=Re,ya.Mesh=Ot,ya.LineSegments=gl,ya.LineLoop=hl,ya.Line=ml,ya.Points=fl,ya.Group=Al,ya.VideoTexture=Ml,ya.DataTexture=c,ya.CompressedTexture=xl,ya.CubeTexture=u,ya.CanvasTexture=q,ya.DepthTexture=Ge,ya.Texture=Ta,ya.CompressedTextureLoader=dr,ya.DataTextureLoader=fr,ya.CubeTextureLoader=vr,ya.TextureLoader=gr,ya.ObjectLoader=gn,ya.MaterialLoader=dn,ya.BufferGeometryLoader=fn,ya.DefaultLoadingManager=Nc,ya.LoadingManager=md,ya.JSONLoader=vn,ya.ImageLoader=mr,ya.ImageBitmapLoader=yn,ya.FontLoader=Mn,ya.FileLoader=pr,ya.Loader=mn,ya.LoaderUtils=kc,ya.Cache=Oc,ya.AudioLoader=En,ya.SpotLightShadow=Xr,ya.SpotLight=Cd,ya.PointLight=Sd,ya.RectAreaLight=Od,ya.HemisphereLight=Nd,ya.DirectionalLightShadow=Id,ya.DirectionalLight=_d,ya.AmbientLight=jd,ya.LightShadow=wd,ya.Light=Dd,ya.StereoCamera=Tn,ya.PerspectiveCamera=ue,ya.OrthographicCamera=Ha,ya.CubeCamera=Sn,ya.ArrayCamera=Kt,ya.Camera=nt,ya.AudioListener=An,ya.PositionalAudio=qd,ya.AudioContext=qc,ya.AudioAnalyser=Zd,ya.Audio=Xd,ya.VectorKeyframeTrack=Vd,ya.StringKeyframeTrack=zd,ya.QuaternionKeyframeTrack=Ud,ya.NumberKeyframeTrack=kd,ya.ColorKeyframeTrack=Pd,ya.BooleanKeyframeTrack=Rd,ya.PropertyMixer=Pn,ya.PropertyBinding=Jd,ya.KeyframeTrack=Hd,ya.AnimationUtils=Hc,ya.AnimationObjectGroup=Nn,ya.AnimationMixer=Dn,ya.AnimationClip=Yd,ya.Uniform=Kd,ya.InstancedBufferGeometry=Fn,ya.BufferGeometry=Mt,ya.Geometry=lt,ya.InterleavedBufferAttribute=$d,ya.InstancedInterleavedBuffer=Hn,ya.InterleavedBuffer=Gn,ya.InstancedBufferAttribute=$c,ya.Face3=Va,ya.Object3D=ot,ya.Raycaster=ep,ya.Layers=at,ya.EventDispatcher=t,ya.Clock=Xn,ya.QuaternionLinearInterpolant=rn,ya.LinearInterpolant=Gd,ya.DiscreteInterpolant=Qd,ya.CubicInterpolant=Fd,ya.Interpolant=Bd,ya.Triangle=It,ya.Math=zp,ya.Spherical=qn,ya.Cylindrical=Yn,ya.Plane=tt,ya.Frustum=Ga,ya.Sphere=$,ya.Ray=al,ya.Matrix4=Ma,ya.Matrix3=va,ya.Box3=Fa,ya.Box2=Zn,ya.Line3=Pt,ya.Euler=rt,ya.Vector4=ba,ya.Vector3=Ea,ya.Vector2=Aa,ya.Quaternion=xa,ya.Color=X,ya.ImmediateRenderObject=Jn,ya.VertexNormalsHelper=Qn,ya.SpotLightHelper=Kn,ya.SkeletonHelper=ta,ya.PointLightHelper=ea,ya.RectAreaLightHelper=ia,ya.HemisphereLightHelper=ra,ya.GridHelper=na,ya.PolarGridHelper=aa,ya.FaceNormalsHelper=oa,ya.DirectionalLightHelper=sa,ya.CameraHelper=ca,ya.BoxHelper=ha,ya.Box3Helper=la,ya.PlaneHelper=ua,ya.ArrowHelper=pa,ya.AxesHelper=da,ya.Shape=Ld,ya.Path=bd,ya.ShapePath=Wd,ya.Font=bn,ya.CurvePath=Td,ya.Curve=yr,ya.ShapeUtils=Cc,ya.WebGLUtils=ve,ya.WireframeGeometry=He,ya.ParametricGeometry=El,ya.ParametricBufferGeometry=vl,ya.TetrahedronGeometry=Ll,ya.TetrahedronBufferGeometry=Dl,ya.OctahedronGeometry=Nl,ya.OctahedronBufferGeometry=wl,ya.IcosahedronGeometry=Cl,ya.IcosahedronBufferGeometry=Sl,ya.DodecahedronGeometry=Il,ya.DodecahedronBufferGeometry=_l,ya.PolyhedronGeometry=Tl,ya.PolyhedronBufferGeometry=bl,ya.TubeGeometry=jl,ya.TubeBufferGeometry=Ol,ya.TorusKnotGeometry=zl,ya.TorusKnotBufferGeometry=Rl,ya.TorusGeometry=Bl,ya.TorusBufferGeometry=Ul,ya.TextGeometry=Fl,ya.TextBufferGeometry=Gl,ya.SphereGeometry=Ql,ya.SphereBufferGeometry=Hl,ya.RingGeometry=Vl,ya.RingBufferGeometry=Yl,ya.PlaneGeometry=Es,ya.PlaneBufferGeometry=el,ya.LatheGeometry=Wl,ya.LatheBufferGeometry=Xl,ya.ShapeGeometry=ql,ya.ShapeBufferGeometry=Zl,ya.ExtrudeGeometry=Di,ya.ExtrudeBufferGeometry=kl,ya.EdgesGeometry=Zi,ya.ConeGeometry=ed,ya.ConeBufferGeometry=td,ya.CylinderGeometry=Kl,ya.CylinderBufferGeometry=$l,ya.CircleGeometry=rd,ya.CircleBufferGeometry=ad,ya.BoxGeometry=Wa,ya.BoxBufferGeometry=Xa,ya.ShadowMaterial=od,ya.SpriteMaterial=$t,ya.RawShaderMaterial=nd,ya.ShaderMaterial=rl,ya.PointsMaterial=yl,ya.MeshPhysicalMaterial=sd,ya.MeshStandardMaterial=id,ya.MeshPhongMaterial=ld,ya.MeshToonMaterial=dd,ya.MeshNormalMaterial=cd,ya.MeshLambertMaterial=pd,ya.MeshDepthMaterial=Pa,ya.MeshDistanceMaterial=ka,ya.MeshBasicMaterial=tl,ya.LineDashedMaterial=ud,ya.LineBasicMaterial=ul,ya.Material=Z,ya.Float64BufferAttribute=bt,ya.Float32BufferAttribute=xt,ya.Uint32BufferAttribute=yt,ya.Int32BufferAttribute=gt,ya.Uint16BufferAttribute=vt,ya.Int16BufferAttribute=mt,ya.Uint8ClampedBufferAttribute=ft,ya.Uint8BufferAttribute=dt,ya.Int8BufferAttribute=pt,ya.BufferAttribute=Ya,ya.ArcCurve=gd,ya.CatmullRomCurve3=wr,ya.CubicBezierCurve=Or,ya.CubicBezierCurve3=fd,ya.EllipseCurve=xr,ya.LineCurve=Ad,ya.LineCurve3=Md,ya.QuadraticBezierCurve=xd,ya.QuadraticBezierCurve3=Ed,ya.SplineCurve=vd,ya.REVISION=op,ya.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},ya.CullFaceNone=qa,ya.CullFaceBack=Za,ya.CullFaceFront=Ja,ya.CullFaceFrontBack=3,ya.FrontFaceDirectionCW=0,ya.FrontFaceDirectionCCW=1,ya.BasicShadowMap=0,ya.PCFShadowMap=Qa,ya.PCFSoftShadowMap=Ka,ya.FrontSide=$a,ya.BackSide=np,ya.DoubleSide=ip,ya.FlatShading=1,ya.SmoothShading=2,ya.NoColors=sp,ya.FaceColors=ro,ya.VertexColors=lp,ya.NoBlending=dp,ya.NormalBlending=cp,ya.AdditiveBlending=pp,ya.SubtractiveBlending=up,ya.MultiplyBlending=mp,ya.CustomBlending=gp,ya.AddEquation=hp,ya.SubtractEquation=po,ya.ReverseSubtractEquation=fo,ya.MinEquation=mo,ya.MaxEquation=vo,ya.ZeroFactor=go,ya.OneFactor=yo,ya.SrcColorFactor=xo,ya.OneMinusSrcColorFactor=bo,ya.SrcAlphaFactor=_o,ya.OneMinusSrcAlphaFactor=wo,ya.DstAlphaFactor=Mo,ya.OneMinusDstAlphaFactor=Eo,ya.DstColorFactor=To,ya.OneMinusDstColorFactor=So,ya.SrcAlphaSaturateFactor=Ao,ya.NeverDepth=Lo,ya.AlwaysDepth=Ro,ya.LessDepth=Co,ya.LessEqualDepth=Po,ya.EqualDepth=Io,ya.GreaterEqualDepth=Oo,ya.GreaterDepth=No,ya.NotEqualDepth=Uo,ya.MultiplyOperation=Do,ya.MixOperation=Bo,ya.AddOperation=Fo,ya.NoToneMapping=zo,ya.LinearToneMapping=Go,ya.ReinhardToneMapping=Ho,ya.Uncharted2ToneMapping=Vo,ya.CineonToneMapping=ko,ya.UVMapping=300,ya.CubeReflectionMapping=jo,ya.CubeRefractionMapping=yp,ya.EquirectangularReflectionMapping=fp,ya.EquirectangularRefractionMapping=Ap,ya.SphericalReflectionMapping=Mp,ya.CubeUVReflectionMapping=xp,ya.CubeUVRefractionMapping=Ep,ya.RepeatWrapping=vp,ya.ClampToEdgeWrapping=Tp,ya.MirroredRepeatWrapping=bp,ya.NearestFilter=Lp,ya.NearestMipMapNearestFilter=Dp,ya.NearestMipMapLinearFilter=Np,ya.LinearFilter=wp,ya.LinearMipMapNearestFilter=Cp,ya.LinearMipMapLinearFilter=Sp,ya.UnsignedByteType=Ip,ya.ByteType=ss,ya.ShortType=cs,ya.UnsignedShortType=hs,ya.IntType=ls,ya.UnsignedIntType=us,ya.FloatType=ps,ya.HalfFloatType=ds,ya.UnsignedShort4444Type=fs,ya.UnsignedShort5551Type=ms,ya.UnsignedShort565Type=vs,ya.UnsignedInt248Type=gs,ya.AlphaFormat=ys,ya.RGBFormat=xs,ya.RGBAFormat=_p,ya.LuminanceFormat=jp,ya.LuminanceAlphaFormat=ws,ya.RGBEFormat=_p,ya.DepthFormat=Ms,ya.DepthStencilFormat=Ts,ya.RGB_S3TC_DXT1_Format=Ss,ya.RGBA_S3TC_DXT1_Format=As,ya.RGBA_S3TC_DXT3_Format=Ls,ya.RGBA_S3TC_DXT5_Format=Rs,ya.RGB_PVRTC_4BPPV1_Format=Cs,ya.RGB_PVRTC_2BPPV1_Format=Ps,ya.RGBA_PVRTC_4BPPV1_Format=Is,ya.RGBA_PVRTC_2BPPV1_Format=Os,ya.RGB_ETC1_Format=Ns,ya.RGBA_ASTC_4x4_Format=Us,ya.RGBA_ASTC_5x4_Format=Ds,ya.RGBA_ASTC_5x5_Format=Bs,ya.RGBA_ASTC_6x5_Format=Fs,ya.RGBA_ASTC_6x6_Format=zs,ya.RGBA_ASTC_8x5_Format=Gs,ya.RGBA_ASTC_8x6_Format=Hs,ya.RGBA_ASTC_8x8_Format=Vs,ya.RGBA_ASTC_10x5_Format=ks,ya.RGBA_ASTC_10x6_Format=js,ya.RGBA_ASTC_10x8_Format=Ws,ya.RGBA_ASTC_10x10_Format=Xs,ya.RGBA_ASTC_12x10_Format=qs,ya.RGBA_ASTC_12x12_Format=Ys,ya.LoopOnce=2200,ya.LoopRepeat=Zs,ya.LoopPingPong=2202,ya.InterpolateDiscrete=2300,ya.InterpolateLinear=2301,ya.InterpolateSmooth=2302,ya.ZeroCurvatureEnding=Js,ya.ZeroSlopeEnding=2401,ya.WrapAroundEnding=2402,ya.TrianglesDrawMode=Op,ya.TriangleStripDrawMode=Ks,ya.TriangleFanDrawMode=$s,ya.LinearEncoding=tc,ya.sRGBEncoding=ec,ya.GammaEncoding=ic,ya.RGBEEncoding=rc,ya.LogLuvEncoding=3003,ya.RGBM7Encoding=nc,ya.RGBM16Encoding=ac,ya.RGBDEncoding=oc,ya.BasicDepthPacking=sc,ya.RGBADepthPacking=cc,ya.CubeGeometry=Wa,ya.Face4=function(s,t,l,i,r,n,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new Va(s,t,l,r,n,a)},ya.LineStrip=0,ya.LinePieces=1,ya.MeshFaceMaterial=function(r){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),r},ya.MultiMaterial=function(r){return void 0===r&&(r=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),r.isMultiMaterial=!0,r.materials=r,r.clone=function(){return r.slice()},r},ya.PointCloud=function(r,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new fl(r,t)},ya.Particle=function(r){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new ll(r)},ya.ParticleSystem=function(r,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new fl(r,t)},ya.PointCloudMaterial=function(r){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new yl(r)},ya.ParticleBasicMaterial=function(r){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new yl(r)},ya.ParticleSystemMaterial=function(r){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new yl(r)},ya.Vertex=function(r,t,a){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Ea(r,t,a)},ya.DynamicBufferAttribute=function(r,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new Ya(r,t).setDynamic(!0)},ya.Int8Attribute=function(r,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new pt(r,t)},ya.Uint8Attribute=function(r,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new dt(r,t)},ya.Uint8ClampedAttribute=function(r,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new ft(r,t)},ya.Int16Attribute=function(r,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new mt(r,t)},ya.Uint16Attribute=function(r,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new vt(r,t)},ya.Int32Attribute=function(r,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new gt(r,t)},ya.Uint32Attribute=function(r,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new yt(r,t)},ya.Float32Attribute=function(r,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new xt(r,t)},ya.Float64Attribute=function(r,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new bt(r,t)},ya.ClosedSplineCurve3=fa,ya.SplineCurve3=Ua,ya.Spline=Da,ya.AxisHelper=function(r){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new da(r)},ya.BoundingBoxHelper=function(r,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new ha(r,t)},ya.EdgesHelper=function(r,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new gl(new Zi(r.geometry),new ul({color:void 0===t?16777215:t}))},ya.WireframeHelper=function(r,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new gl(new He(r.geometry),new ul({color:void 0===t?16777215:t}))},ya.XHRLoader=function(r){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new pr(r)},ya.BinaryTextureLoader=function(r){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new fr(r)},ya.GeometryUtils={merge:function(a,t,o){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var n;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),n=t.matrix,t=t.geometry),a.merge(t,n,o)},center:function(r){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),r.center()}},ya.ImageUtils={crossOrigin:void 0,loadTexture:function(o,t,s,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new gr;r.setCrossOrigin(this.crossOrigin);var n=r.load(o,s,void 0,i);return t&&(n.mapping=t),n},loadTextureCube:function(o,t,s,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new vr;r.setCrossOrigin(this.crossOrigin);var n=r.load(o,s,void 0,i);return t&&(n.mapping=t),n},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},ya.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(r,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),r.project(t)},this.unprojectVector=function(r,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),r.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},ya.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},ya.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},ya.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(ya,"__esModule",{value:!0})})},{}],41:[function(){THREE.ColladaLoader=function(t){this.manager=void 0===t?THREE.DefaultLoadingManager:t},THREE.ColladaLoader.prototype={constructor:THREE.ColladaLoader,crossOrigin:"Anonymous",load:function(o,s,t,r){var a=this,n=void 0===a.path?THREE.LoaderUtils.extractUrlBase(o):a.path;new THREE.FileLoader(a.manager).load(o,function(t){s(a.parse(t,n))},t,r)},setPath:function(t){this.path=t},options:{set convertUpAxis(t){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},setCrossOrigin:function(t){this.crossOrigin=t},parse:function(m,_){function R(o,l){for(var t=[],d=o.childNodes,a=0,n=d.length,i;a<n;a++)i=d[a],i.nodeName===l&&t.push(i);return t}function r(o){if(0===o.length)return[];for(var i=o.trim().split(/\s+/),t=Array(i.length),r=0,s=i.length;r<s;r++)t[r]=i[r];return t}function F(o){if(0===o.length)return[];for(var i=o.trim().split(/\s+/),t=Array(i.length),r=0,a=i.length;r<a;r++)t[r]=parseFloat(i[r]);return t}function a(o){if(0===o.length)return[];for(var i=o.trim().split(/\s+/),t=Array(i.length),r=0,a=i.length;r<a;r++)t[r]=parseInt(i[r]);return t}function te(t){return t.substring(1)}function n(){return"three_default_"+$e++}function o(t){return 0===Object.keys(t).length}function t(t){return void 0===t?1:parseFloat(t.getAttribute("meter"))}function i(t){return void 0===t?"Y_UP":t.textContent}function s(r,l,t,a){var n=R(r,l)[0];if(void 0!==n)for(var i=R(n,t),s=0;s<i.length;s++)a(i[s])}function l(a,o){for(var t in a)a[t].build=o(a[t])}function d(r,a){return void 0===r.build?(r.build=a(r),r.build):r.build}function c(s){for(var l={inputs:{}},t=0,r=s.childNodes.length,a;t<r;t++)if(a=s.childNodes[t],1===a.nodeType)switch(a.nodeName){case"input":var n=te(a.getAttribute("source")),i=a.getAttribute("semantic");l.inputs[i]=n;}return l}function p(s){var p={},t=s.getAttribute("target"),r=t.split("/"),a=r.shift(),n=r.shift(),i=-1!==n.indexOf("("),o=-1!==n.indexOf(".");if(o)r=n.split("."),n=r.shift(),p.member=r.shift();else if(i){var c=n.split("(");n=c.shift();for(var l=0;l<c.length;l++)c[l]=parseInt(c[l].replace(/\)/,""));p.indices=c}return p.id=a,p.sid=n,p.arraySyntax=i,p.memberSyntax=o,p.sampler=te(s.getAttribute("source")),p}function u(p){var m=[],t=p.channels,r=p.samplers,a=p.sources;for(var n in t)if(t.hasOwnProperty(n)){var i=t[n],s=r[i.sampler],o=s.inputs.INPUT,c=s.inputs.OUTPUT,l=a[o],d=a[c],u=h(i,l,d);E(u,m)}return m}function g(t){return d(et.animations[t],u)}function h(g,A,t){var r=et.nodes[g.id],l=De(r.id),d=r.transforms[g.sid],u=r.matrix.clone().transpose(),f={},h,a,n,i,s,o;switch(d){case"matrix":for(n=0,i=A.array.length;n<i;n++)if(h=A.array[n],a=n*t.stride,void 0===f[h]&&(f[h]={}),!0===g.arraySyntax){var c=t.array[a],m=g.indices[0]+4*g.indices[1];f[h][m]=c}else for(s=0,o=t.stride;s<o;s++)f[h][s]=t.array[a+s];break;case"translate":case"rotate":case"scale":console.warn("THREE.ColladaLoader: Animation transform type \"%s\" not yet implemented.",d);}var p=y(f,u);return{name:l.uuid,keyframes:p}}function y(r,o){var t=[];for(var a in r)t.push({time:parseFloat(a),value:r[a]});t.sort(function(r,a){return r.time-a.time});for(var n=0;16>n;n++)f(t,n,o.elements[n]);return t}function E(p,m){for(var t=p.keyframes,r=p.name,a=[],n=[],i=[],s=[],o=0,c=t.length;o<c;o++){var l=t[o],d=l.time,u=l.value;He.fromArray(u).transpose(),He.decompose(Fe,Qe,Ge),a.push(d),n.push(Fe.x,Fe.y,Fe.z),i.push(Qe.x,Qe.y,Qe.z,Qe.w),s.push(Ge.x,Ge.y,Ge.z)}return 0<n.length&&m.push(new THREE.VectorKeyframeTrack(r+".position",a,n)),0<i.length&&m.push(new THREE.QuaternionKeyframeTrack(r+".quaternion",a,i)),0<s.length&&m.push(new THREE.VectorKeyframeTrack(r+".scale",a,s)),m}function f(o,l,t){var r=!0,s,a,n;for(a=0,n=o.length;a<n;a++)s=o[a],void 0===s.value[l]?s.value[l]=null:r=!1;if(!0===r)for(a=0,n=o.length;a<n;a++)s=o[a],s.value[l]=t;else v(o,l)}function v(o,l){for(var t=0,n=o.length,i,r,a;t<n;t++)if(a=o[t],null===a.value[l]){if(i=T(o,t,l),r=x(o,t,l),null===i){a.value[l]=r.value[l];continue}if(null===r){a.value[l]=i.value[l];continue}b(a,i,r,l)}}function T(o,n,t){for(;0<=n;){var r=o[n];if(null!==r.value[t])return r;n--}return null}function x(o,n,t){for(;n<o.length;){var r=o[n];if(null!==r.value[t])return r;n++}return null}function b(o,n,t,r){return 0==t.time-n.time?void(o.value[r]=n.value[r]):void(o.value[r]=(o.time-n.time)*(t.value[r]-n.value[r])/(t.time-n.time)+n.value[r])}function A(d){for(var p=[],t=d.name,r=d.end-d.start||-1,a=d.animations,n=0,i=a.length;n<i;n++)for(var s=g(a[n]),o=0,c=s.length;o<c;o++)p.push(s[o]);return new THREE.AnimationClip(t,r,p)}function N(t){return d(et.clips[t],A)}function w(o){for(var n={sources:{}},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"bind_shape_matrix":n.bindShapeMatrix=F(a.textContent);break;case"source":var i=a.getAttribute("id");n.sources[i]=ce(a);break;case"joints":n.joints=L(a);break;case"vertex_weights":n.vertexWeights=M(a);}return n}function L(s){for(var l={inputs:{}},t=0,r=s.childNodes.length,a;t<r;t++)if(a=s.childNodes[t],1===a.nodeType)switch(a.nodeName){case"input":var n=a.getAttribute("semantic"),i=te(a.getAttribute("source"));l.inputs[n]=i;}return l}function M(i){for(var s={inputs:{}},t=0,r=i.childNodes.length,d;t<r;t++)if(d=i.childNodes[t],1===d.nodeType)switch(d.nodeName){case"input":var n=d.getAttribute("semantic"),o=te(d.getAttribute("source")),p=parseInt(d.getAttribute("offset"));s.inputs[n]={id:o,offset:p};break;case"vcount":s.vcount=a(d.textContent);break;case"v":s.v=a(d.textContent);}return s}function j(a){var o={id:a.id},t=et.geometries[o.id];return void 0!==a.skin&&(o.skin=O(a.skin),t.sources.skinIndices=o.skin.indices,t.sources.skinWeights=o.skin.weights),o}function O(A){function M(r,a){return a.weight-r.weight}var t={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},i=A.sources,s=A.vertexWeights,o=s.vcount,c=s.v,l=s.inputs.JOINT.offset,d=s.inputs.WEIGHT.offset,u=A.sources[A.joints.inputs.JOINT],f=A.sources[A.joints.inputs.INV_BIND_MATRIX],h=i[s.inputs.WEIGHT.id].array,m=0,p,r,a;for(p=0,a=o.length;p<a;p++){var n=o[p],x=[];for(r=0;r<n;r++){var g=c[m+l],v=c[m+d],y=h[v];x.push({index:g,weight:y}),m+=2}for(x.sort(M),r=0;4>r;r++){var L=x[r];void 0===L?(t.indices.array.push(0),t.weights.array.push(0)):(t.indices.array.push(L.index),t.weights.array.push(L.weight))}}for(t.bindMatrix=new THREE.Matrix4().fromArray(A.bindShapeMatrix).transpose(),p=0,a=u.array.length;p<a;p++){var D=u.array[p],N=new THREE.Matrix4().fromArray(f.array,p*f.stride).transpose();t.joints.push({name:D,boneInverse:N})}return t}function k(t){return d(et.controllers[t],j)}function I(t){return void 0===t.build?t.init_from:t.build}function P(t){return d(et.images[t],I)}function B(o){for(var i={surfaces:{},samplers:{}},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"newparam":U(a,i);break;case"technique":i.technique=V(a);break;case"extra":i.extra=Z(a);}return i}function U(o,s){for(var t=o.getAttribute("sid"),r=0,a=o.childNodes.length,n;r<a;r++)if(n=o.childNodes[r],1===n.nodeType)switch(n.nodeName){case"surface":s.surfaces[t]=H(n);break;case"sampler2D":s.samplers[t]=z(n);}}function H(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"init_from":i.init_from=a.textContent;}return i}function z(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"source":i.source=a.textContent;}return i}function V(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"constant":case"lambert":case"blinn":case"phong":i.type=a.nodeName,i.parameters=D(a);}return i}function D(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"emission":case"diffuse":case"specular":case"shininess":case"transparency":i[a.nodeName]=G(a);break;case"transparent":i[a.nodeName]={opaque:a.getAttribute("opaque"),data:G(a)};}return i}function G(o){for(var n={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"color":n[a.nodeName]=F(a.textContent);break;case"float":n[a.nodeName]=parseFloat(a.textContent);break;case"texture":n[a.nodeName]={id:a.getAttribute("texture"),extra:W(a)};}return n}function W(o){for(var i={technique:{}},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"extra":q(a,i);}return i}function q(o,i){for(var t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"technique":X(a,i);}}function X(o,i){for(var t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":i.technique[a.nodeName]=parseFloat(a.textContent);break;case"wrapU":case"wrapV":i.technique[a.nodeName]="TRUE"===a.textContent.toUpperCase()?1:"FALSE"===a.textContent.toUpperCase()?0:parseInt(a.textContent);}}function Z(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"technique":i.technique=Q(a);}return i}function Q(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"double_sided":i[a.nodeName]=parseInt(a.textContent);}return i}function Y(t){return t}function J(t){return d(et.effects[t],Y)}function K(c){function p(a){var l=m.profile.samplers[a.id],r;if(void 0===l?(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=P(a.id)):r=P(m.profile.surfaces[l.source].init_from),void 0!==r){var d=Ze.load(r),n=a.extra;if(void 0!==n&&void 0!==n.technique&&!1===o(n.technique)){var i=n.technique;d.wrapS=i.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,d.wrapT=i.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,d.offset.set(i.offsetU||0,i.offsetV||0),d.repeat.set(i.repeatU||1,i.repeatV||1)}else d.wrapS=THREE.RepeatWrapping,d.wrapT=THREE.RepeatWrapping;return d}return console.error("THREE.ColladaLoader: Unable to load texture with ID:",a.id),null}var m=J(c.url),t=m.profile.technique,a=m.profile.extra,n;switch(t.type){case"phong":case"blinn":n=new THREE.MeshPhongMaterial;break;case"lambert":n=new THREE.MeshLambertMaterial;break;default:n=new THREE.MeshBasicMaterial;}n.name=c.name;var r=t.parameters;for(var i in r){var s=r[i];"diffuse"===i?(s.color&&n.color.fromArray(s.color),s.texture&&(n.map=p(s.texture))):"specular"===i?(s.color&&n.specular&&n.specular.fromArray(s.color),s.texture&&(n.specularMap=p(s.texture))):"shininess"===i?s.float&&n.shininess&&(n.shininess=s.float):"emission"===i?s.color&&n.emissive&&n.emissive.fromArray(s.color):void 0}var l=r.transparent,d=r.transparency;if(void 0===d&&l&&(d={float:1}),void 0===l&&d&&(l={opaque:"A_ONE",data:{color:[1,1,1,1]}}),l&&d)if(l.data.texture)n.alphaMap=p(l.data.texture),n.transparent=!0;else{var u=l.data.color;switch(l.opaque){case"A_ONE":n.opacity=u[3]*d.float;break;case"RGB_ZERO":n.opacity=1-u[0]*d.float;break;case"A_ZERO":n.opacity=1-u[3]*d.float;break;case"RGB_ONE":n.opacity=u[0]*d.float;break;default:console.warn("THREE.ColladaLoader: Invalid opaque type \"%s\" of transparent tag.",l.opaque);}1>n.opacity&&(n.transparent=!0)}return void 0!==a&&void 0!==a.technique&&1===a.technique.double_sided&&(n.side=THREE.DoubleSide),n}function $(t){return d(et.materials[t],K)}function ee(a){for(var o=0,t;o<a.childNodes.length;o++)switch(t=a.childNodes[o],t.nodeName){case"technique_common":return re(t);}return{}}function re(o){for(var n={},t=0,r;t<o.childNodes.length;t++)switch(r=o.childNodes[t],r.nodeName){case"perspective":case"orthographic":n.technique=r.nodeName,n.parameters=ae(r);}return n}function ae(o){for(var n={},t=0,r;t<o.childNodes.length;t++)switch(r=o.childNodes[t],r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":n[r.nodeName]=parseFloat(r.textContent);}return n}function oe(o){var i;switch(o.optics.technique){case"perspective":i=new THREE.PerspectiveCamera(o.optics.parameters.yfov,o.optics.parameters.aspect_ratio,o.optics.parameters.znear,o.optics.parameters.zfar);break;case"orthographic":var t=o.optics.parameters.ymag,s=o.optics.parameters.xmag,l=o.optics.parameters.aspect_ratio;s=void 0===s?t*l:s,t=void 0===t?s/l:t,s*=.5,t*=.5,i=new THREE.OrthographicCamera(-s,s,t,-t,o.optics.parameters.znear,o.optics.parameters.zfar);break;default:i=new THREE.PerspectiveCamera;}return i.name=o.name,i}function ne(r){var a=et.cameras[r];return void 0===a?(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",r),null):d(a,oe)}function ie(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"directional":case"point":case"spot":case"ambient":i.technique=a.nodeName,i.parameters=se(a);}return i}function se(n){for(var l={},t=0,r=n.childNodes.length,a;t<r;t++)if(a=n.childNodes[t],1===a.nodeType)switch(a.nodeName){case"color":var i=F(a.textContent);l.color=new THREE.Color().fromArray(i);break;case"falloff_angle":l.falloffAngle=parseFloat(a.textContent);break;case"quadratic_attenuation":var s=parseFloat(a.textContent);l.distance=s?S(1/s):0;}return l}function le(r){var a;switch(r.technique){case"directional":a=new THREE.DirectionalLight;break;case"point":a=new THREE.PointLight;break;case"spot":a=new THREE.SpotLight;break;case"ambient":a=new THREE.AmbientLight;}return r.parameters.color&&a.color.copy(r.parameters.color),r.parameters.distance&&(a.distance=r.parameters.distance),a}function de(r){var a=et.lights[r];return void 0===a?(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",r),null):d(a,le)}function ce(a){for(var n={array:[],stride:3},t=0,i;t<a.childNodes.length;t++)if(i=a.childNodes[t],1===i.nodeType)switch(i.nodeName){case"float_array":n.array=F(i.textContent);break;case"Name_array":n.array=r(i.textContent);break;case"technique_common":var s=R(i,"accessor")[0];void 0!==s&&(n.stride=parseInt(s.getAttribute("stride")));}return n}function pe(o){for(var n={},t=0,r;t<o.childNodes.length;t++)r=o.childNodes[t],1===r.nodeType&&(n[r.getAttribute("semantic")]=te(r.getAttribute("source")));return n}function ue(i){for(var s={type:i.nodeName,material:i.getAttribute("material"),count:parseInt(i.getAttribute("count")),inputs:{},stride:0},t=0,r=i.childNodes.length,d;t<r;t++)if(d=i.childNodes[t],1===d.nodeType)switch(d.nodeName){case"input":var n=te(d.getAttribute("source")),p=d.getAttribute("semantic"),c=parseInt(d.getAttribute("offset"));s.inputs[p]={id:n,offset:c},s.stride=C(s.stride,c+1);break;case"vcount":s.vcount=a(d.textContent);break;case"p":s.p=a(d.textContent);}return s}function me(o){for(var n={},t=0,r;t<o.length;t++)r=o[t],void 0===n[r.type]&&(n[r.type]=[]),n[r.type].push(r);return n}function ge(o){var l={},t=o.sources,r=o.vertices,a=o.primitives;if(0===a.length)return{};var n=me(a);for(var i in n)l[i]=he(n[i],t,r);return l}function he(A,M,t){for(var r={},a={array:[],stride:0},n={array:[],stride:0},i={array:[],stride:0},s={array:[],stride:0},o={array:[],stride:4},c={array:[],stride:4},l=new THREE.BufferGeometry,d=[],u=0,f=0,h=0;h<A.length;h++){var m=A[h],p=m.inputs,x=1;for(var g in m.vcount&&4===m.vcount[0]&&(x=2),f="lines"===m.type||"linestrips"===m.type?2*m.count:3*m.count*x,l.addGroup(u,f,h),u+=f,m.material&&d.push(m.material),p){var v=p[g];switch(g){case"VERTEX":for(var y in t){var E=t[y];"POSITION"===y?(ye(m,M[E],v.offset,a.array),a.stride=M[E].stride,M.skinWeights&&M.skinIndices&&(ye(m,M.skinIndices,v.offset,o.array),ye(m,M.skinWeights,v.offset,c.array))):"NORMAL"===y?(ye(m,M[E],v.offset,n.array),n.stride=M[E].stride):"COLOR"===y?(ye(m,M[E],v.offset,s.array),s.stride=M[E].stride):"TEXCOORD"===y?(ye(m,M[E],v.offset,i.array),i.stride=M[E].stride):console.warn("THREE.ColladaLoader: Semantic \"%s\" not handled in geometry build process.",y)}break;case"NORMAL":ye(m,M[v.id],v.offset,n.array),n.stride=M[v.id].stride;break;case"COLOR":ye(m,M[v.id],v.offset,s.array),s.stride=M[v.id].stride;break;case"TEXCOORD":ye(m,M[v.id],v.offset,i.array),i.stride=M[v.id].stride;}}}return 0<a.array.length&&l.addAttribute("position",new THREE.Float32BufferAttribute(a.array,a.stride)),0<n.array.length&&l.addAttribute("normal",new THREE.Float32BufferAttribute(n.array,n.stride)),0<s.array.length&&l.addAttribute("color",new THREE.Float32BufferAttribute(s.array,s.stride)),0<i.array.length&&l.addAttribute("uv",new THREE.Float32BufferAttribute(i.array,i.stride)),0<o.array.length&&l.addAttribute("skinIndex",new THREE.Float32BufferAttribute(o.array,o.stride)),0<c.array.length&&l.addAttribute("skinWeight",new THREE.Float32BufferAttribute(c.array,c.stride)),r.data=l,r.type=A[0].type,r.materialKeys=d,r}function ye(y,A,M,r){function t(o){for(var i=a[o+M]*l,t=i+l;i<t;i++)r.push(s[i])}var a=y.p,n=y.stride,i=y.vcount,o=0,s=A.array,l=A.stride;if(void 0!==y.vcount){for(var d=0,c=0,u=i.length,h;c<u;c++){if(h=i[c],4===h){var m=d+0*n,p=d+1*n,f=d+2*n,g=d+3*n;t(m),t(p),t(g),t(p),t(f),t(g)}else if(3===h){var m=d+0*n,p=d+1*n,f=d+2*n;t(m),t(p),t(f)}else o=C(o,h);d+=n*h}0<o&&console.log("THREE.ColladaLoader: Geometry has faces with more than 4 vertices.")}else for(var c=0,u=a.length;c<u;c+=n)t(c)}function fe(t){return d(et.geometries[t],ge)}function xe(t){return void 0===t.build?t:t.build}function Ee(t){return d(et.kinematicsModels[t],xe)}function Ae(o,n){for(var t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"joint":n.joints[r.getAttribute("sid")]=ve(r);break;case"link":n.links.push(be(r));}}function ve(o){for(var n=0,r,t;n<o.childNodes.length;n++)if(t=o.childNodes[n],1===t.nodeType)switch(t.nodeName){case"prismatic":case"revolute":r=Te(t);}return r}function Te(n,l){for(var l={sid:n.getAttribute("sid"),name:n.getAttribute("name")||"",axis:new THREE.Vector3,limits:{min:0,max:0},type:n.nodeName,static:!1,zeroPosition:0,middlePosition:0},t=0,r;t<n.childNodes.length;t++)if(r=n.childNodes[t],1===r.nodeType)switch(r.nodeName){case"axis":var a=F(r.textContent);l.axis.fromArray(a);break;case"limits":var i=r.getElementsByTagName("max")[0],s=r.getElementsByTagName("min")[0];l.limits.max=parseFloat(i.textContent),l.limits.min=parseFloat(s.textContent);}return l.limits.min>=l.limits.max&&(l.static=!0),l.middlePosition=(l.limits.min+l.limits.max)/2,l}function be(o){for(var n={sid:o.getAttribute("sid"),name:o.getAttribute("name")||"",attachments:[],transforms:[]},t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"attachment_full":n.attachments.push(Ne(r));break;case"matrix":case"translate":case"rotate":n.transforms.push(Le(r));}return n}function Ne(o){for(var n={joint:o.getAttribute("joint").split("/").pop(),transforms:[],links:[]},t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"link":n.links.push(be(r));break;case"matrix":case"translate":case"rotate":n.transforms.push(Le(r));}return n}function Le(a){var o={type:a.nodeName},t=F(a.textContent);switch(o.type){case"matrix":o.obj=new THREE.Matrix4,o.obj.fromArray(t).transpose();break;case"translate":o.obj=new THREE.Vector3,o.obj.fromArray(t);break;case"rotate":o.obj=new THREE.Vector3,o.obj.fromArray(t),o.angle=THREE.Math.degToRad(t[3]);}return o}function Me(o){for(var s={target:o.getAttribute("target").split("/").pop()},t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"axis":var a=r.getElementsByTagName("param")[0];s.axis=a.textContent;var n=s.axis.split("inst_").pop().split("axis")[0];s.jointIndex=n.substr(0,n.length-1);}return s}function we(t){return void 0===t.build?t:t.build}function Ce(t){return d(et.kinematicsScenes[t],we)}function Ie(n){for(var d=[],t=We.querySelector("[id=\""+n.id+"\"]"),r=0,a;r<t.childNodes.length;r++)if(a=t.childNodes[r],1===a.nodeType)switch(a.nodeName){case"matrix":var i=F(a.textContent),s=new THREE.Matrix4().fromArray(i).transpose();d.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:s});break;case"translate":case"scale":var i=F(a.textContent),p=new THREE.Vector3().fromArray(i);d.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:p});break;case"rotate":var i=F(a.textContent),p=new THREE.Vector3().fromArray(i),u=THREE.Math.degToRad(i[3]);d.push({sid:a.getAttribute("sid"),type:a.nodeName,obj:p,angle:u});}return d}function Se(o){for(var i=o.getElementsByTagName("node"),t=0,r;t<i.length;t++)r=i[t],!1===r.hasAttribute("id")&&r.setAttribute("id",n())}function _e(n){for(var s={name:n.getAttribute("name")||"",type:n.getAttribute("type"),id:n.getAttribute("id"),sid:n.getAttribute("sid"),matrix:new THREE.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},t=0,r;t<n.childNodes.length;t++)if(r=n.childNodes[t],1===r.nodeType)switch(r.nodeName){case"node":s.nodes.push(r.getAttribute("id")),_e(r);break;case"instance_camera":s.instanceCameras.push(te(r.getAttribute("url")));break;case"instance_controller":s.instanceControllers.push(je(r));break;case"instance_light":s.instanceLights.push(te(r.getAttribute("url")));break;case"instance_geometry":s.instanceGeometries.push(je(r));break;case"instance_node":s.instanceNodes.push(te(r.getAttribute("url")));break;case"matrix":var a=F(r.textContent);s.matrix.multiply(He.fromArray(a).transpose()),s.transforms[r.getAttribute("sid")]=r.nodeName;break;case"translate":var a=F(r.textContent);Ve.fromArray(a),s.matrix.multiply(He.makeTranslation(Ve.x,Ve.y,Ve.z)),s.transforms[r.getAttribute("sid")]=r.nodeName;break;case"rotate":var a=F(r.textContent),i=THREE.Math.degToRad(a[3]);s.matrix.multiply(He.makeRotationAxis(Ve.fromArray(a),i)),s.transforms[r.getAttribute("sid")]=r.nodeName;break;case"scale":var a=F(r.textContent);s.matrix.scale(Ve.fromArray(a)),s.transforms[r.getAttribute("sid")]=r.nodeName;break;case"extra":break;default:console.log(r);}return et.nodes[s.id]=s,s}function je(s){for(var d={id:te(s.getAttribute("url")),materials:{},skeletons:[]},t=0,r;t<s.childNodes.length;t++)switch(r=s.childNodes[t],r.nodeName){case"bind_material":for(var a=r.getElementsByTagName("instance_material"),n=0;n<a.length;n++){var i=a[n],o=i.getAttribute("symbol"),c=i.getAttribute("target");d.materials[o]=te(c)}break;case"skeleton":d.skeletons.push(te(r.textContent));}return d}function Oe(l,d){var t=[],i=[],s,r,a;for(s=0;s<l.length;s++)Re(De(l[s]),d,t);for(s=0;s<d.length;s++)for(r=0;r<t.length;r++)if(a=t[r],a.bone.name===d[s].name){i[s]=a,a.processed=!0;break}for(s=0;s<t.length;s++)a=t[s],!1===a.processed&&(i.push(a),a.processed=!0);var n=[],o=[];for(s=0;s<i.length;s++)a=i[s],n.push(a.bone),o.push(a.boneInverse);return new THREE.Skeleton(n,o)}function Re(a,o,t){a.traverse(function(r){if(!0===r.isBone){for(var s=0,n,l;s<o.length;s++)if(l=o[s],l.name===r.name){n=l.boneInverse;break}void 0===n&&(n=new THREE.Matrix4),t.push({bone:r,boneInverse:n,processed:!1})}})}function Be(A){for(var M=[],t=A.matrix,r=A.nodes,a=A.type,n=A.instanceCameras,i=A.instanceControllers,s=A.instanceLights,o=A.instanceGeometries,c=A.instanceNodes,l=0,d=r.length;l<d;l++)M.push(De(r[l]));for(var l=0,d=n.length,u;l<d;l++)u=ne(n[l]),null!==u&&M.push(u.clone());for(var l=0,d=i.length;l<d;l++)for(var f=i[l],h=k(f.id),m=fe(h.id),p=Ue(m,f.materials),x=f.skeletons,g=h.skin.joints,v=Oe(x,g),y=0,E=p.length,b;y<E;y++)b=p[y],b.isSkinnedMesh&&(b.bind(v,h.skin.bindMatrix),b.normalizeSkinWeights()),M.push(b);for(var l=0,d=s.length,T;l<d;l++)T=de(s[l]),null!==T&&M.push(T.clone());for(var l=0,d=o.length;l<d;l++)for(var f=o[l],m=fe(f.id),p=Ue(m,f.materials),y=0,E=p.length;y<E;y++)M.push(p[y]);for(var l=0,d=c.length;l<d;l++)M.push(De(c[l]).clone());var b;if(0===r.length&&1===M.length)b=M[0];else{b="JOINT"===a?new THREE.Bone:new THREE.Group;for(var l=0;l<M.length;l++)b.add(M[l])}return b.name="JOINT"===a?A.sid:A.name,b.matrix.copy(t),b.matrix.decompose(b.position,b.quaternion,b.scale),b}function ze(o,s){for(var t=[],r=0,a=o.length,n;r<a;r++)n=s[o[r]],t.push($(n));return t}function Ue(p,u){var t=[];for(var r in p){var a=p[r],n=ze(a.materialKeys,u);0===n.length&&("lines"===r||"linestrips"===r?n.push(new THREE.LineBasicMaterial):n.push(new THREE.MeshPhongMaterial));var i=void 0!==a.data.attributes.skinIndex;if(i)for(var s=0,o=n.length;s<o;s++)n[s].skinning=!0;var c=1===n.length?n[0]:n,d;"lines"===r?d=new THREE.LineSegments(a.data,c):"linestrips"===r?d=new THREE.Line(a.data,c):"triangles"===r||"polylist"===r?d=i?new THREE.SkinnedMesh(a.data,c):new THREE.Mesh(a.data,c):void 0;t.push(d)}return t}function De(t){return d(et.nodes[t],Be)}function Pe(o){var i=new THREE.Group;i.name=o.name;for(var t=o.children,r=0,a;r<t.length;r++)a=t[r],null===a.id?i.add(Be(a)):i.add(De(a.id));return i}function ke(t){return d(et.visualScenes[t],Pe)}var Fe=new THREE.Vector3,Ge=new THREE.Vector3,Qe=new THREE.Quaternion,He=new THREE.Matrix4,Ve=new THREE.Vector3;if(console.time("THREE.ColladaLoader"),0===m.length)return{scene:new THREE.Scene};console.time("THREE.ColladaLoader: DOMParser");var Ye=new DOMParser().parseFromString(m,"application/xml");console.timeEnd("THREE.ColladaLoader: DOMParser");var We=R(Ye,"COLLADA")[0],Xe=We.getAttribute("version");console.log("THREE.ColladaLoader: File version",Xe);var qe=function(r){return{unit:t(R(r,"unit")[0]),upAxis:i(R(r,"up_axis")[0])}}(R(We,"asset")[0]),Ze=new THREE.TextureLoader(this.manager);Ze.setPath(_).setCrossOrigin(this.crossOrigin);var Je=[],Ke={},$e=0,et={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},kinematicsScenes:{}};console.time("THREE.ColladaLoader: Parse"),s(We,"library_animations","animation",function(o){for(var s={sources:{},samplers:{},channels:{}},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType){var n;switch(a.nodeName){case"source":n=a.getAttribute("id"),s.sources[n]=ce(a);break;case"sampler":n=a.getAttribute("id"),s.samplers[n]=c(a);break;case"channel":n=a.getAttribute("target"),s.channels[n]=p(a);break;default:console.log(a);}}et.animations[o.getAttribute("id")]=s}),s(We,"library_animation_clips","animation_clip",function(o){for(var i={name:o.getAttribute("id")||"default",start:parseFloat(o.getAttribute("start")||0),end:parseFloat(o.getAttribute("end")||0),animations:[]},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"instance_animation":i.animations.push(te(a.getAttribute("url")));}et.clips[o.getAttribute("id")]=i}),s(We,"library_controllers","controller",function(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"skin":i.id=te(a.getAttribute("source")),i.skin=w(a);break;case"morph":i.id=te(a.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.");}et.controllers[o.getAttribute("id")]=i}),s(We,"library_images","image",function(r){var a={init_from:R(r,"init_from")[0].textContent};et.images[r.getAttribute("id")]=a}),s(We,"library_effects","effect",function(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"profile_COMMON":i.profile=B(a);}et.effects[o.getAttribute("id")]=i}),s(We,"library_materials","material",function(o){for(var i={name:o.getAttribute("name")},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"instance_effect":i.url=te(a.getAttribute("url"));}et.materials[o.getAttribute("id")]=i}),s(We,"library_cameras","camera",function(o){for(var i={name:o.getAttribute("name")},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"optics":i.optics=ee(a);}et.cameras[o.getAttribute("id")]=i}),s(We,"library_lights","light",function(o){for(var i={},t=0,r=o.childNodes.length,a;t<r;t++)if(a=o.childNodes[t],1===a.nodeType)switch(a.nodeName){case"technique_common":i=ie(a);}et.lights[o.getAttribute("id")]=i}),s(We,"library_geometries","geometry",function(r){var o={name:r.getAttribute("name"),sources:{},vertices:{},primitives:[]},t=R(r,"mesh")[0];if(void 0!==t){for(var a=0,n;a<t.childNodes.length;a++)if(n=t.childNodes[a],1===n.nodeType){var i=n.getAttribute("id");switch(n.nodeName){case"source":o.sources[i]=ce(n);break;case"vertices":o.vertices=pe(n);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",n.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":o.primitives.push(ue(n));break;default:console.log(n);}}et.geometries[r.getAttribute("id")]=o}}),s(We,"library_nodes","node",_e),s(We,"library_visual_scenes","visual_scene",function(r){var o={name:r.getAttribute("name"),children:[]};Se(r);for(var t=R(r,"node"),a=0;a<t.length;a++)o.children.push(_e(t[a]));et.visualScenes[r.getAttribute("id")]=o}),s(We,"library_kinematics_models","kinematics_model",function(o){for(var n={name:o.getAttribute("name")||"",joints:{},links:[]},t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"technique_common":Ae(r,n);}et.kinematicsModels[o.getAttribute("id")]=n}),s(We,"scene","instance_kinematics_scene",function(o){for(var n={bindJointAxis:[]},t=0,r;t<o.childNodes.length;t++)if(r=o.childNodes[t],1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":n.bindJointAxis.push(Me(r));}et.kinematicsScenes[te(o.getAttribute("url"))]=n}),console.timeEnd("THREE.ColladaLoader: Parse"),console.time("THREE.ColladaLoader: Build"),l(et.animations,u),l(et.clips,A),l(et.controllers,j),l(et.images,I),l(et.effects,Y),l(et.materials,K),l(et.cameras,oe),l(et.lights,le),l(et.geometries,ge),l(et.visualScenes,Pe),console.timeEnd("THREE.ColladaLoader: Build"),function(){var s=et.clips;if(!(!0===o(s)))for(var l in s)Je.push(N(l));else if(!1===o(et.animations)){var r=[];for(var l in et.animations)for(var t=g(l),a=0,n=t.length;a<n;a++)r.push(t[a]);Je.push(new THREE.AnimationClip("default",-1,r))}}(),function(){var p=Object.keys(et.kinematicsModels)[0],m=Object.keys(et.kinematicsScenes)[0],t=Object.keys(et.visualScenes)[0];if(void 0!==p&&void 0!==m){for(var g=Ee(p),r=Ce(m),a=ke(t),n=r.bindJointAxis,y={},o=0,i=n.length;o<i;o++){var s=n[o],l=We.querySelector("[sid=\""+s.target+"\"]");if(l){var d=l.parentElement;!function(o,i){var t=i.getAttribute("name"),r=g.joints[o];a.traverse(function(s){s.name===t&&(y[o]={object:s,transforms:Ie(i),joint:r,position:r.zeroPosition})})}(s.jointIndex,d)}}var c=new THREE.Matrix4;Ke={joints:g&&g.joints,getJointValue:function(r){var a=y[r];return a?a.position:void console.warn("THREE.ColladaLoader: Joint "+r+" doesn't exist.")},setJointValue:function(o,d){var t=y[o];if(t){var r=t.joint;if(d>r.limits.max||d<r.limits.min)console.warn("THREE.ColladaLoader: Joint "+o+" value "+d+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+").");else if(r.static)console.warn("THREE.ColladaLoader: Joint "+o+" is static.");else{var a=t.object,n=r.axis,i=t.transforms;He.identity();for(var s=0,p;s<i.length;s++)if(p=i[s],p.sid&&-1!==p.sid.indexOf(o))switch(r.type){case"revolute":He.multiply(c.makeRotationAxis(n,THREE.Math.degToRad(d)));break;case"prismatic":He.multiply(c.makeTranslation(n.x*d,n.y*d,n.z*d));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+r.type);}else switch(p.type){case"matrix":He.multiply(p.obj);break;case"translate":He.multiply(c.makeTranslation(p.obj.x,p.obj.y,p.obj.z));break;case"scale":He.scale(p.obj);break;case"rotate":He.multiply(c.makeRotationAxis(p.obj,p.angle));}a.matrix.copy(He),a.matrix.decompose(a.position,a.quaternion,a.scale),y[o].position=d}}else console.log("THREE.ColladaLoader: "+o+" does not exist.")}}}}();var tt=function(t){return ke(te(R(t,"instance_visual_scene")[0].getAttribute("url")))}(R(We,"scene")[0]);return"Z_UP"===qe.upAxis&&(tt.rotation.x=-ga/2),tt.scale.multiplyScalar(qe.unit),console.timeEnd("THREE.ColladaLoader"),{animations:Je,kinematics:Ke,library:et,scene:tt}}}},{}],42:[function(){THREE.GLTFLoader=function(){function x(t){this.manager=void 0===t?THREE.DefaultLoadingManager:t}function b(){var r={};return{get:function(a){return r[a]},add:function(o,t){r[o]=t},remove:function(a){delete r[a]},removeAll:function(){r={}}}}function D(o){this.name=C.KHR_LIGHTS,this.lights={};var l=o.extensions&&o.extensions[C.KHR_LIGHTS]||{},t=l.lights||{};for(var d in t){var r=t[d],n=new THREE.Color().fromArray(r.color),i;switch(r.type){case"directional":i=new THREE.DirectionalLight(n),i.position.set(0,0,1);break;case"point":i=new THREE.PointLight(n);break;case"spot":i=new THREE.SpotLight(n),i.position.set(0,0,1);break;case"ambient":i=new THREE.AmbientLight(n);}i&&(void 0!==r.constantAttenuation&&(i.intensity=r.constantAttenuation),void 0!==r.linearAttenuation&&(i.distance=1/r.linearAttenuation),void 0!==r.quadraticAttenuation&&(i.decay=r.quadraticAttenuation),void 0!==r.fallOffAngle&&(i.angle=r.fallOffAngle),void 0!==r.fallOffExponent&&console.warn("THREE.GLTFLoader:: light.fallOffExponent not currently supported."),i.name=r.name||"light_"+d,this.lights[d]=i)}}function t(p){this.name=C.KHR_BINARY_GLTF,this.content=null,this.body=null;var u=new DataView(p,0,l);if(this.header={magic:THREE.LoaderUtils.decodeText(new Uint8Array(p.slice(0,4))),version:u.getUint32(4,!0),length:u.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var t=new DataView(p,l),a=0,m;a<t.byteLength;){m=t.getUint32(a,!0),a+=4;var s=t.getUint32(a,!0);if(a+=4,s===c.JSON){var n=new Uint8Array(p,l+a,m);this.content=THREE.LoaderUtils.decodeText(n)}else if(s===c.BIN){var i=l+a;this.body=p.slice(i,i+m)}a+=m}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function r(){return{name:C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(o,i,t){var a=i.extensions[this.name],r=THREE.ShaderLib.standard,s=THREE.UniformsUtils.clone(r.uniforms),n=r.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\ttexelSpecular = sRGBToLinear( texelSpecular );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor = specularFactor.rgb;");delete s.roughness,delete s.metalness,delete s.roughnessMap,delete s.metalnessMap,s.specular={value:new THREE.Color().setHex(1118481)},s.glossiness={value:.5},s.specularMap={value:null},s.glossinessMap={value:null},o.vertexShader=r.vertexShader,o.fragmentShader=n,o.uniforms=s,o.defines={STANDARD:""},o.color=new THREE.Color(1,1,1),o.opacity=1;var l=[];if(Array.isArray(a.diffuseFactor)){var d=a.diffuseFactor;o.color.fromArray(d),o.opacity=d[3]}if(void 0!==a.diffuseTexture&&l.push(t.assignTexture(o,"map",a.diffuseTexture.index)),o.emissive=new THREE.Color(0,0,0),o.glossiness=void 0===a.glossinessFactor?1:a.glossinessFactor,o.specular=new THREE.Color(1,1,1),Array.isArray(a.specularFactor)&&o.specular.fromArray(a.specularFactor),void 0!==a.specularGlossinessTexture){var c=a.specularGlossinessTexture.index;l.push(t.assignTexture(o,"glossinessMap",c)),l.push(t.assignTexture(o,"specularMap",c))}return Promise.all(l)},createMaterial:function(r){var a=new THREE.ShaderMaterial({defines:r.defines,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,uniforms:r.uniforms,fog:!0,lights:!0,opacity:r.opacity,transparent:r.transparent});return a.isGLTFSpecularGlossinessMaterial=!0,a.color=r.color,a.map=void 0===r.map?null:r.map,a.lightMap=null,a.lightMapIntensity=1,a.aoMap=void 0===r.aoMap?null:r.aoMap,a.aoMapIntensity=1,a.emissive=r.emissive,a.emissiveIntensity=1,a.emissiveMap=void 0===r.emissiveMap?null:r.emissiveMap,a.bumpMap=void 0===r.bumpMap?null:r.bumpMap,a.bumpScale=1,a.normalMap=void 0===r.normalMap?null:r.normalMap,r.normalScale&&(a.normalScale=r.normalScale),a.displacementMap=null,a.displacementScale=1,a.displacementBias=0,a.specularMap=void 0===r.specularMap?null:r.specularMap,a.specular=r.specular,a.glossinessMap=void 0===r.glossinessMap?null:r.glossinessMap,a.glossiness=r.glossiness,a.alphaMap=null,a.envMap=void 0===r.envMap?null:r.envMap,a.envMapIntensity=1,a.refractionRatio=.98,a.extensions.derivatives=!0,a},cloneMaterial:function(o){var n=o.clone();n.isGLTFSpecularGlossinessMaterial=!0;for(var t=this.specularGlossinessParams,a=0,r=t.length;a<r;a++)n[t[a]]=o[t[a]];return n},refreshUniforms:function(n,m,t,a,r){if(!0===r.isGLTFSpecularGlossinessMaterial){var s=r.uniforms,i=r.defines;s.opacity.value=r.opacity,s.diffuse.value.copy(r.color),s.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),s.map.value=r.map,s.specularMap.value=r.specularMap,s.alphaMap.value=r.alphaMap,s.lightMap.value=r.lightMap,s.lightMapIntensity.value=r.lightMapIntensity,s.aoMap.value=r.aoMap,s.aoMapIntensity.value=r.aoMapIntensity;var o;if(r.map?o=r.map:r.specularMap?o=r.specularMap:r.displacementMap?o=r.displacementMap:r.normalMap?o=r.normalMap:r.bumpMap?o=r.bumpMap:r.glossinessMap?o=r.glossinessMap:r.alphaMap?o=r.alphaMap:r.emissiveMap&&(o=r.emissiveMap),void 0!==o){o.isWebGLRenderTarget&&(o=o.texture);var l,p;if(void 0!==o.matrix){if(!0===o.matrixAutoUpdate){l=o.offset,p=o.repeat;var u=o.rotation,c=o.center;o.matrix.setUvTransform(l.x,l.y,p.x,p.y,u,c.x,c.y)}s.uvTransform.value.copy(o.matrix)}else l=o.offset,p=o.repeat,s.offsetRepeat.value.set(l.x,l.y,p.x,p.y)}s.envMap.value=r.envMap,s.envMapIntensity.value=r.envMapIntensity,s.flipEnvMap.value=r.envMap&&r.envMap.isCubeTexture?-1:1,s.refractionRatio.value=r.refractionRatio,s.specular.value.copy(r.specular),s.glossiness.value=r.glossiness,s.glossinessMap.value=r.glossinessMap,s.emissiveMap.value=r.emissiveMap,s.bumpMap.value=r.bumpMap,s.normalMap.value=r.normalMap,s.displacementMap.value=r.displacementMap,s.displacementScale.value=r.displacementScale,s.displacementBias.value=r.displacementBias,null!==s.glossinessMap.value&&void 0===i.USE_GLOSSINESSMAP&&(i.USE_GLOSSINESSMAP="",i.USE_ROUGHNESSMAP=""),null===s.glossinessMap.value&&void 0!==i.USE_GLOSSINESSMAP&&(delete i.USE_GLOSSINESSMAP,delete i.USE_ROUGHNESSMAP)}}}}function a(o,n,t,a){THREE.Interpolant.call(this,o,n,t,a)}function n(r,a){return"string"!=typeof r||""===r?"":/^(https?:)?\/\//i.test(r)?r:/^data:.*,.*$/i.test(r)?r:/^blob:.*$/i.test(r)?r:a+r}function N(){return new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})}function o(c,g,t,a){var r=c.geometry,s=c.material,n=t.targets,i=r.morphAttributes;i.position=[],i.normal=[],s.morphTargets=!0;for(var o=0,y=n.length;o<y;o++){var A=n[o],M="morphTarget"+o,m,u;if(void 0!==A.POSITION){m=p(a[A.POSITION]);for(var d=r.attributes.position,h=0,f=m.count;h<f;h++)m.setXYZ(h,m.getX(h)+d.getX(h),m.getY(h)+d.getY(h),m.getZ(h)+d.getZ(h))}else r.attributes.position&&(m=p(r.attributes.position));if(void 0!==m&&(m.name=M,i.position.push(m)),void 0!==A.NORMAL){s.morphNormals=!0,u=p(a[A.NORMAL]);for(var x=r.attributes.normal,h=0,f=u.count;h<f;h++)u.setXYZ(h,u.getX(h)+x.getX(h),u.getY(h)+x.getY(h),u.getZ(h)+x.getZ(h))}else void 0!==r.attributes.normal&&(u=p(r.attributes.normal));void 0!==u&&(u.name=M,i.normal.push(u))}if(c.updateMorphTargets(),void 0!==g.weights)for(var o=0,y=g.weights.length;o<y;o++)c.morphTargetInfluences[o]=g.weights[o]}function i(d,c){if(d.indices!==c.indices)return!1;var t=d.attributes||{},a=c.attributes||{},r=Object.keys(t),s=Object.keys(a);if(r.length!==s.length)return!1;for(var n=0,i=r.length,o;n<i;n++)if(o=r[n],t[o]!==a[o])return!1;return!0}function w(o,n){for(var t=0,a=o.length,r;t<a;t++)if(r=o[t],i(r.primitive,n))return r.geometry;return null}function p(o){if(o.isInterleavedBufferAttribute){for(var n=o.count,t=o.itemSize,a=o.array.slice(0,n*t),r=0;r<n;++r)a[r]=o.getX(r),2<=t&&(a[r+1]=o.getY(r)),3<=t&&(a[r+2]=o.getZ(r)),4<=t&&(a[r+3]=o.getW(r));return new THREE.BufferAttribute(a,t,o.normalized)}return o.clone()}function s(t,o,a){this.json=t||{},this.extensions=o||{},this.options=a||{},this.cache=new b,this.primitiveCache=[],this.textureLoader=new THREE.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new THREE.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer")}x.prototype={constructor:x,crossOrigin:"Anonymous",load:function(o,l,t,a){var r=this,s=void 0===this.path?THREE.LoaderUtils.extractUrlBase(o):this.path,n=new THREE.FileLoader(r.manager);n.setResponseType("arraybuffer"),n.load(o,function(t){try{r.parse(t,s,l,a)}catch(t){if(void 0===a)throw t;a(t)}},t,a)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},parse:function(a,c,u,n){var i={},l;if("string"==typeof a)l=a;else if(THREE.LoaderUtils.decodeText(new Uint8Array(a,0,4))===d){try{i[C.KHR_BINARY_GLTF]=new t(a)}catch(t){return void(n&&n(t))}l=i[C.KHR_BINARY_GLTF].content}else l=THREE.LoaderUtils.decodeText(new Uint8Array(a));var o=JSON.parse(l);return void 0===o.asset||2>o.asset.version[0]?void(n&&n(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."))):void(o.extensionsUsed&&(0<=o.extensionsUsed.indexOf(C.KHR_LIGHTS)&&(i[C.KHR_LIGHTS]=new D(o)),0<=o.extensionsUsed.indexOf(C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)&&(i[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new r)),console.time("GLTFLoader"),new s(o,i,{path:c||this.path||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(function(o,n,i,l,d){console.timeEnd("GLTFLoader"),u({scene:o,scenes:n,cameras:i,animations:l,asset:d})},n))}};var C={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"},d="glTF",l=12,c={JSON:1313821514,BIN:5130562};a.prototype=Object.create(THREE.Interpolant.prototype),a.prototype.constructor=a,a.prototype.interpolate_=function(o,h,t,a){for(var r=this.resultBuffer,s=this.sampleValues,n=this.valueSize,i=3*n,l=a-h,p=(t-h)/l,u=p*p,c=u*p,d=o*i,y=d-i,m=0;m!==n;m++){var f=s[y+m+n],g=s[y+m+2*n]*l,A=s[d+m+n],M=s[d+m]*l;r[m]=(2*c-3*u+1)*f+(c-2*u+p)*g+(-2*c+3*u)*A+(c-u)*M}return r};var E={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},u=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),m={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},h={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},g={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},f={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},T=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),I={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},L={CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},y={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};return s.prototype.parse=function(l,r){var d=this.json;this.cache.removeAll(),this.markDefs(),this.getMultiDependencies(["scene","animation","camera"]).then(function(a){var t=a.scenes||[],r=t[d.scene||0],s=a.animations||[],n=d.asset,i=a.cameras||[];l(r,t,i,s,n)}).catch(r)},s.prototype.markDefs=function(){for(var m=this.json.nodes||[],g=this.json.skins||[],t=this.json.meshes||[],a={},r={},s=0,n=g.length;s<n;s++)for(var i=g[s].joints,o=0,l=i.length;o<l;o++)m[i[o]].isBone=!0;for(var p=0,u=m.length,c;p<u;p++)c=m[p],void 0!==c.mesh&&(void 0===a[c.mesh]&&(a[c.mesh]=r[c.mesh]=0),a[c.mesh]++,void 0!==c.skin&&(t[c.mesh].isSkinnedMesh=!0));this.json.meshReferences=a,this.json.meshUses=r},s.prototype.getDependency=function(o,n){var t=o+":"+n,a=this.cache.get(t);return a||(a=this["load"+o.charAt(0).toUpperCase()+o.slice(1)](n),this.cache.add(t,a)),a},s.prototype.getDependencies=function(o){var n=this.cache.get(o);if(!n){var i=this,a=this.json[o+("mesh"===o?"es":"s")]||[];n=Promise.all(a.map(function(a,t){return i.getDependency(o,t)})),this.cache.add(o,n)}return n},s.prototype.getMultiDependencies=function(o){for(var l={},t=[],a=0,r=o.length;a<r;a++){var s=o[a],n=this.getDependencies(s);n=n.then(function(t,r){l[t]=r}.bind(this,s+("mesh"===s?"es":"s"))),t.push(n)}return Promise.all(t).then(function(){return l})},s.prototype.loadBuffer=function(o){var i=this.json.buffers[o],t=this.fileLoader;if(i.type&&"arraybuffer"!==i.type)throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(void 0===i.uri&&0===o)return Promise.resolve(this.extensions[C.KHR_BINARY_GLTF].body);var a=this.options;return new Promise(function(r,o){t.load(n(i.uri,a.path),r,void 0,function(){o(new Error("THREE.GLTFLoader: Failed to load buffer \""+i.uri+"\"."))})})},s.prototype.loadBufferView=function(r){var o=this.json.bufferViews[r];return this.getDependency("buffer",o.buffer).then(function(t){var n=o.byteLength||0,a=o.byteOffset||0;return t.slice(a,a+n)})},s.prototype.loadAccessor=function(o){var g=this,t=this.json,a=this.json.accessors[o],r=[];return void 0===a.bufferView?r.push(null):r.push(this.getDependency("bufferView",a.bufferView)),void 0!==a.sparse&&(r.push(this.getDependency("bufferView",a.sparse.indices.bufferView)),r.push(this.getDependency("bufferView",a.sparse.values.bufferView))),Promise.all(r).then(function(r){var x=r[0],i=T[a.type],o=u[a.componentType],l=o.BYTES_PER_ELEMENT,p=a.byteOffset||0,c=t.bufferViews[a.bufferView].byteStride,d=!0===a.normalized,E,s;if(c&&c!==l*i){var n="InterleavedBuffer:"+a.bufferView+":"+a.componentType,m=g.cache.get(n);m||(E=new o(x),m=new THREE.InterleavedBuffer(E,c/l),g.cache.add(n,m)),s=new THREE.InterleavedBufferAttribute(m,i,p/l,d)}else E=null===x?new o(a.count*i):new o(x,p,a.count*i),s=new THREE.BufferAttribute(E,i,d);if(void 0!==a.sparse){var h=T.SCALAR,f=u[a.sparse.indices.componentType],v=a.sparse.indices.byteOffset||0,b=a.sparse.values.byteOffset||0,D=new f(r[1],v,a.sparse.count*h),N=new o(r[2],b,a.sparse.count*i);null!==x&&s.setArray(s.array.slice());for(var M=0,L=D.length,y;M<L;M++)if(y=D[M],s.setX(y,N[M*i]),2<=i&&s.setY(y,N[M*i+1]),3<=i&&s.setZ(y,N[M*i+2]),4<=i&&s.setW(y,N[M*i+3]),5<=i)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}return s})},s.prototype.loadTexture=function(i){var d=this,c=this.json,y=this.options,r=this.textureLoader,a=window.URL||window.webkitURL,s=c.textures[i],o=c.images[s.source],l=o.uri,p=!1;return void 0!==o.bufferView&&(l=d.getDependency("bufferView",o.bufferView).then(function(r){p=!0;var n=new Blob([r],{type:o.mimeType});return l=a.createObjectURL(n)})),Promise.resolve(l).then(function(o){var i=THREE.Loader.Handlers.get(o)||r;return new Promise(function(t,r){i.load(n(o,y.path),t,void 0,r)})}).then(function(o){!0===p&&a.revokeObjectURL(l),o.flipY=!1,void 0!==s.name&&(o.name=s.name),o.format=void 0===s.format?THREE.RGBAFormat:g[s.format],void 0!==s.internalFormat&&o.format!==g[s.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),o.type=void 0===s.type?THREE.UnsignedByteType:f[s.type];var n=c.samplers||{},t=n[s.sampler]||{};return o.magFilter=m[t.magFilter]||THREE.LinearFilter,o.minFilter=m[t.minFilter]||THREE.LinearMipMapLinearFilter,o.wrapS=h[t.wrapS]||THREE.RepeatWrapping,o.wrapT=h[t.wrapT]||THREE.RepeatWrapping,o})},s.prototype.assignTexture=function(r,o,t){return this.getDependency("texture",t).then(function(t){r[o]=t})},s.prototype.loadMaterial=function(m){var g=this,a=(this.json,this.extensions),r=this.json.materials[m],s={},n=r.extensions||{},i=[],o;if(n[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var t=a[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];o=t.getMaterialType(r),i.push(t.extendParams(s,r,g))}else if(void 0!==r.pbrMetallicRoughness){o=THREE.MeshStandardMaterial;var l=r.pbrMetallicRoughness;if(s.color=new THREE.Color(1,1,1),s.opacity=1,Array.isArray(l.baseColorFactor)){var p=l.baseColorFactor;s.color.fromArray(p),s.opacity=p[3]}if(void 0!==l.baseColorTexture&&i.push(g.assignTexture(s,"map",l.baseColorTexture.index)),s.metalness=void 0===l.metallicFactor?1:l.metallicFactor,s.roughness=void 0===l.roughnessFactor?1:l.roughnessFactor,void 0!==l.metallicRoughnessTexture){var u=l.metallicRoughnessTexture.index;i.push(g.assignTexture(s,"metalnessMap",u)),i.push(g.assignTexture(s,"roughnessMap",u))}}else o=THREE.MeshPhongMaterial;!0===r.doubleSided&&(s.side=THREE.DoubleSide);var c=r.alphaMode||y.OPAQUE;return c===y.BLEND?s.transparent=!0:(s.transparent=!1,c===y.MASK&&(s.alphaTest=void 0===r.alphaCutoff?.5:r.alphaCutoff)),void 0!==r.normalTexture&&(i.push(g.assignTexture(s,"normalMap",r.normalTexture.index)),s.normalScale=new THREE.Vector2(1,1),void 0!==r.normalTexture.scale&&s.normalScale.set(r.normalTexture.scale,r.normalTexture.scale)),void 0!==r.occlusionTexture&&(i.push(g.assignTexture(s,"aoMap",r.occlusionTexture.index)),void 0!==r.occlusionTexture.strength&&(s.aoMapIntensity=r.occlusionTexture.strength)),void 0!==r.emissiveFactor&&(o===THREE.MeshBasicMaterial?s.color=new THREE.Color().fromArray(r.emissiveFactor):s.emissive=new THREE.Color().fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&(o===THREE.MeshBasicMaterial?i.push(g.assignTexture(s,"map",r.emissiveTexture.index)):i.push(g.assignTexture(s,"emissiveMap",r.emissiveTexture.index))),Promise.all(i).then(function(){var t;return t=o===THREE.ShaderMaterial?a[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s):new o(s),void 0!==r.name&&(t.name=r.name),t.normalScale&&(t.normalScale.x=-t.normalScale.x),t.map&&(t.map.encoding=THREE.sRGBEncoding),t.emissiveMap&&(t.emissiveMap.encoding=THREE.sRGBEncoding),r.extras&&(t.userData=r.extras),t})},s.prototype.loadGeometries=function(u){var n=this.primitiveCache;return this.getDependencies("accessor").then(function(t){for(var a=[],r=0,s=u.length;r<s;r++){var m=u[r],g=w(n,m);if(g)a.push(g);else{var o=new THREE.BufferGeometry,h=m.attributes;for(var p in h){var c=h[p],d=t[c];"POSITION"===p?o.addAttribute("position",d):"NORMAL"===p?o.addAttribute("normal",d):"TEXCOORD_0"===p||"TEXCOORD0"===p||"TEXCOORD"===p?o.addAttribute("uv",d):"TEXCOORD_1"===p?o.addAttribute("uv2",d):"COLOR_0"===p||"COLOR0"===p||"COLOR"===p?o.addAttribute("color",d):"WEIGHTS_0"===p||"WEIGHT"===p?o.addAttribute("skinWeight",d):"JOINTS_0"===p||"JOINT"===p?o.addAttribute("skinIndex",d):void 0}void 0!==m.indices&&o.setIndex(t[m.indices]),n.push({primitive:m,geometry:o}),a.push(o)}}return a})},s.prototype.loadMesh=function(l){var c=this,t=(this.json,this.extensions),a=this.json.meshes[l];return this.getMultiDependencies(["accessor","material"]).then(function(r){var s=new THREE.Group,n=a.primitives;return c.loadGeometries(n).then(function(i){for(var p=0,u=n.length;p<u;p++){var A=n[p],d=i[p],m=void 0===A.material?N():r.materials[A.material];m.aoMap&&void 0===d.attributes.uv2&&void 0!==d.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),d.addAttribute("uv2",new THREE.BufferAttribute(d.attributes.uv.array,2)));var h=void 0!==d.attributes.color,f=void 0===d.attributes.normal,x=!0===a.isSkinnedMesh,v=void 0!==A.targets;if(h||f||x||v)if(m.isGLTFSpecularGlossinessMaterial){var g=t[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];m=g.cloneMaterial(m)}else m=m.clone();h&&(m.vertexColors=THREE.VertexColors,m.needsUpdate=!0),f&&(m.flatShading=!0);var T;if(A.mode===E.TRIANGLES||A.mode===E.TRIANGLE_STRIP||A.mode===E.TRIANGLE_FAN||void 0===A.mode)x?(T=new THREE.SkinnedMesh(d,m),m.skinning=!0):T=new THREE.Mesh(d,m),A.mode===E.TRIANGLE_STRIP?T.drawMode=THREE.TriangleStripDrawMode:A.mode===E.TRIANGLE_FAN&&(T.drawMode=THREE.TriangleFanDrawMode);else if(A.mode===E.LINES||A.mode===E.LINE_STRIP||A.mode===E.LINE_LOOP){var M="LineBasicMaterial:"+m.uuid,b=c.cache.get(M);b||(b=new THREE.LineBasicMaterial,THREE.Material.prototype.copy.call(b,m),b.color.copy(m.color),b.lights=!1,c.cache.add(M,b)),m=b,T=A.mode===E.LINES?new THREE.LineSegments(d,m):A.mode===E.LINE_STRIP?new THREE.Line(d,m):new THREE.LineLoop(d,m)}else{if(A.mode!==E.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+A.mode);var M="PointsMaterial:"+m.uuid,L=c.cache.get(M);L||(L=new THREE.PointsMaterial,THREE.Material.prototype.copy.call(L,m),L.color.copy(m.color),L.map=m.map,L.lights=!1,c.cache.add(M,L)),m=L,T=new THREE.Points(d,m)}if(T.name=a.name||"mesh_"+l,v&&o(T,a,A,r.accessors),void 0!==a.extras&&(T.userData=a.extras),void 0!==A.extras&&(T.geometry.userData=A.extras),!0===m.isGLTFSpecularGlossinessMaterial&&(T.onBeforeRender=t[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),!(1<n.length))return T;T.name+="_"+p,s.add(T)}return s})})},s.prototype.loadCamera=function(o){var i=this.json.cameras[o],a=i[i.type],l;if(!a)return void console.warn("THREE.GLTFLoader: Missing camera parameters.");if("perspective"===i.type){var t=a.aspectRatio||1,s=a.yfov*t;l=new THREE.PerspectiveCamera(THREE.Math.radToDeg(s),t,a.znear||1,a.zfar||2e6)}else"orthographic"===i.type&&(l=new THREE.OrthographicCamera(a.xmag/-2,a.xmag/2,a.ymag/2,a.ymag/-2,a.znear,a.zfar));return void 0!==i.name&&(l.name=i.name),i.extras&&(l.userData=i.extras),Promise.resolve(l)},s.prototype.loadSkin=function(r){var o=this.json.skins[r],t={joints:o.joints};return void 0===o.inverseBindMatrices?Promise.resolve(t):this.getDependency("accessor",o.inverseBindMatrices).then(function(r){return t.inverseBindMatrices=r,t})},s.prototype.loadAnimation=function(n){var y=(this.json,this.json.animations[n]);return this.getMultiDependencies(["accessor","node"]).then(function(t){for(var A=[],r=0,s=y.channels.length;r<s;r++){var i=y.channels[r],o=y.samplers[i.sampler];if(o){var l=i.target,p=void 0===l.node?l.id:l.node,u=void 0===y.parameters?o.input:y.parameters[o.input],c=void 0===y.parameters?o.output:y.parameters[o.output],d=t.accessors[u],x=t.accessors[c],m=t.nodes[p];if(m){m.updateMatrix(),m.matrixAutoUpdate=!0;var h;switch(I[l.path]){case I.weights:h=THREE.NumberKeyframeTrack;break;case I.rotation:h=THREE.QuaternionKeyframeTrack;break;case I.position:case I.scale:default:h=THREE.VectorKeyframeTrack;}var f=m.name?m.name:m.uuid,E=void 0===o.interpolation?THREE.InterpolateLinear:L[o.interpolation],v=[];I[l.path]===I.weights?m.traverse(function(t){!0===t.isMesh&&!0===t.material.morphTargets&&v.push(t.name?t.name:t.uuid)}):v.push(f);for(var T=0,g=v.length,b;T<g;T++)b=new h(v[T]+"."+I[l.path],THREE.AnimationUtils.arraySlice(d.array,0),THREE.AnimationUtils.arraySlice(x.array,0),E),"CUBICSPLINE"===o.interpolation&&(b.createInterpolant=function(t){return new a(this.times,this.values,this.getValueSize()/3,t)}),A.push(b)}}}var p=void 0===y.name?"animation_"+n:y.name;return new THREE.AnimationClip(p,void 0,A)})},s.prototype.loadNode=function(o){var i=(this.json,this.extensions),t=this.json.meshReferences,a=this.json.meshUses,r=this.json.nodes[o];return this.getMultiDependencies(["mesh","skin","camera"]).then(function(s){var d;if(!0===r.isBone)d=new THREE.Bone;else if(void 0!==r.mesh){var n=s.meshes[r.mesh];if(d=n.clone(),!0===n.isGroup)for(var m=0,o=n.children.length,l;m<o;m++)l=n.children[m],l.material&&!0===l.material.isGLTFSpecularGlossinessMaterial&&(d.children[m].onBeforeRender=l.onBeforeRender);else n.material&&!0===n.material.isGLTFSpecularGlossinessMaterial&&(d.onBeforeRender=n.onBeforeRender);1<t[r.mesh]&&(d.name+="_instance_"+a[r.mesh]++)}else if(void 0!==r.camera)d=s.cameras[r.camera];else if(r.extensions&&r.extensions[C.KHR_LIGHTS]&&void 0!==r.extensions[C.KHR_LIGHTS].light){var p=i[C.KHR_LIGHTS].lights;d=p[r.extensions[C.KHR_LIGHTS].light]}else d=new THREE.Object3D;if(void 0!==r.name&&(d.name=THREE.PropertyBinding.sanitizeNodeName(r.name)),r.extras&&(d.userData=r.extras),void 0!==r.matrix){var u=new THREE.Matrix4;u.fromArray(r.matrix),d.applyMatrix(u)}else void 0!==r.translation&&d.position.fromArray(r.translation),void 0!==r.rotation&&d.quaternion.fromArray(r.rotation),void 0!==r.scale&&d.scale.fromArray(r.scale);return d})},s.prototype.loadScene=function(){function d(y,t,a,r,s){var n=r[y],i=a.nodes[y];if(void 0!==i.skin)for(var o=!0===n.isGroup?n.children:[n],l=0,p=o.length;l<p;l++){for(var u=o[l],c=s[i.skin],A=[],M=[],m=0,h=c.joints.length;m<h;m++){var f=c.joints[m],x=r[f];if(x){A.push(x);var E=new THREE.Matrix4;void 0!==c.inverseBindMatrices&&E.fromArray(c.inverseBindMatrices.array,16*m),M.push(E)}else console.warn("THREE.GLTFLoader: Joint \"%s\" could not be found.",f)}u.bind(new THREE.Skeleton(A,M),u.matrixWorld)}if(t.add(n),i.children)for(var v=i.children,l=0,p=v.length,g;l<p;l++)g=v[l],d(g,n,a,r,s)}return function(o){var c=this.json,t=this.extensions,r=this.json.scenes[o];return this.getMultiDependencies(["node","skin"]).then(function(a){var s=new THREE.Scene;void 0!==r.name&&(s.name=r.name),r.extras&&(s.userData=r.extras);for(var n=r.nodes||[],i=0,o=n.length;i<o;i++)d(n[i],s,c,a.nodes,a.skins);if(r.extensions&&r.extensions[C.KHR_LIGHTS]&&void 0!==r.extensions[C.KHR_LIGHTS].light){var l=t[C.KHR_LIGHTS].lights;s.add(l[r.extensions[C.KHR_LIGHTS].light])}return s})}}(),x}()},{}],43:[function(){THREE.MTLLoader=function(r){this.manager=void 0===r?THREE.DefaultLoadingManager:r},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(o,n,t,a){var r=this,s=new THREE.FileLoader(this.manager);s.setPath(this.path),s.load(o,function(a){n(r.parse(a))},t,a)},setPath:function(r){this.path=r},setTexturePath:function(r){this.texturePath=r},setBaseUrl:function(r){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(r)},setCrossOrigin:function(r){this.crossOrigin=r},setMaterialOptions:function(r){this.materialOptions=r},parse:function(d){for(var t=d.split("\n"),a={},u=/\s+/,r={},s=0,i;s<t.length;s++)if(i=t[s],i=i.trim(),0!==i.length&&"#"!==i.charAt(0)){var o=i.indexOf(" "),n=0<=o?i.substring(0,o):i;n=n.toLowerCase();var p=0<=o?i.substring(o+1):"";if(p=p.trim(),"newmtl"===n)a={name:p},r[p]=a;else if(a)if("ka"===n||"kd"===n||"ks"===n){var m=p.split(u,3);a[n]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else a[n]=p}var l=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return l.setCrossOrigin(this.crossOrigin),l.setManager(this.manager),l.setMaterials(r),l}},THREE.MTLLoader.MaterialCreator=function(r,t){this.baseUrl=r||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(r){this.crossOrigin=r},setManager:function(r){this.manager=r},setMaterials:function(r){this.materialsInfo=this.convert(r),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(l){if(!this.options)return l;var t={};for(var a in l){var d=l[a],r={};for(var s in t[a]=r,d){var i=!0,o=d[s],n=s.toLowerCase();"kd"===n||"ka"===n||"ks"===n?(this.options&&this.options.normalizeRGB&&(o=[o[0]/255,o[1]/255,o[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===o[0]&&0===o[1]&&0===o[2]&&(i=!1)):void 0,i&&(r[n]=o)}}return t},preload:function(){for(var r in this.materialsInfo)this.create(r)},getIndex:function(r){return this.nameLookup[r]},getAsArray:function(){var r=0;for(var t in this.materialsInfo)this.materialsArray[r]=this.create(t),this.nameLookup[t]=r,r++;return this.materialsArray},create:function(r){return void 0===this.materials[r]&&this.createMaterial_(r),this.materials[r]},createMaterial_:function(l){function d(r,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:r+t}function a(r,t){if(!u[r]){var a=c.getTextureParams(t,u),n=c.loadTexture(d(c.baseUrl,a.url));n.repeat.copy(a.scale),n.offset.copy(a.offset),n.wrapS=c.wrap,n.wrapT=c.wrap,u[r]=n}}var c=this,r=this.materialsInfo[l],u={name:l,side:this.side};for(var i in r){var o=r[i],s;if(""!==o)switch(i.toLowerCase()){case"kd":u.color=new THREE.Color().fromArray(o);break;case"ks":u.specular=new THREE.Color().fromArray(o);break;case"map_kd":a("map",o);break;case"map_ks":a("specularMap",o);break;case"norm":a("normalMap",o);break;case"map_bump":case"bump":a("bumpMap",o);break;case"ns":u.shininess=parseFloat(o);break;case"d":s=parseFloat(o),1>s&&(u.opacity=s,u.transparent=!0);break;case"tr":s=parseFloat(o),this.options&&this.options.invertTrProperty&&(s=1-s),1>s&&(u.opacity=s,u.transparent=!0);}}return this.materials[l]=new THREE.MeshPhongMaterial(u),this.materials[l]},getTextureParams:function(o,t){var a={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},r=o.split(/\s+/),n;return n=r.indexOf("-bm"),0<=n&&(t.bumpScale=parseFloat(r[n+1]),r.splice(n,2)),n=r.indexOf("-s"),0<=n&&(a.scale.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),n=r.indexOf("-o"),0<=n&&(a.offset.set(parseFloat(r[n+1]),parseFloat(r[n+2])),r.splice(n,4)),a.url=r.join(" ").trim(),a},loadTexture:function(l,t,a,d,r){var s=THREE.Loader.Handlers.get(l),o=void 0===this.manager?THREE.DefaultLoadingManager:this.manager,n;return null===s&&(s=new THREE.TextureLoader(o)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),n=s.load(l,a,d,r),void 0!==t&&(n.mapping=t),n}}},{}],44:[function(){THREE.OBJLoader=function(){function Y(){var r={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(a,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=a,void(this.object.fromDeclaration=!1!==t);var o=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:a||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(a,t){var o=this._finalize(!1);o&&(o.inherited||0>=o.groupCount)&&this.materials.splice(o.index,1);var r={index:this.materials.length,name:a||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0===o?this.smooth:o.smooth,groupStart:void 0===o?0:o.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(r){var a={index:"number"==typeof r?r:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return a.clone=this.clone.bind(a),a}};return this.materials.push(r),r},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(a){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),a&&1<this.materials.length)for(var o=this.materials.length-1;0<=o;o--)0>=this.materials[o].groupCount&&this.materials.splice(o,1);return a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},o&&o.name&&"function"==typeof o.clone){var r=o.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(a,t){var o=parseInt(a,10);return 3*(0<=o?o-1:o+t/3)},parseNormalIndex:function(a,t){var o=parseInt(a,10);return 3*(0<=o?o-1:o+t/3)},parseUVIndex:function(a,t){var o=parseInt(a,10);return 2*(0<=o?o-1:o+t/2)},addVertex:function(a,t,o){var r=this.vertices,n=this.object.geometry.vertices;n.push(r[a+0],r[a+1],r[a+2]),n.push(r[t+0],r[t+1],r[t+2]),n.push(r[o+0],r[o+1],r[o+2])},addVertexPoint:function(r){var t=this.vertices;this.object.geometry.vertices.push(t[r+0],t[r+1],t[r+2])},addVertexLine:function(r){var t=this.vertices;this.object.geometry.vertices.push(t[r+0],t[r+1],t[r+2])},addNormal:function(a,t,o){var r=this.normals,n=this.object.geometry.normals;n.push(r[a+0],r[a+1],r[a+2]),n.push(r[t+0],r[t+1],r[t+2]),n.push(r[o+0],r[o+1],r[o+2])},addColor:function(a,t,o){var r=this.colors,n=this.object.geometry.colors;n.push(r[a+0],r[a+1],r[a+2]),n.push(r[t+0],r[t+1],r[t+2]),n.push(r[o+0],r[o+1],r[o+2])},addUV:function(a,t,o){var r=this.uvs,n=this.object.geometry.uvs;n.push(r[a+0],r[a+1]),n.push(r[t+0],r[t+1]),n.push(r[o+0],r[o+1])},addUVLine:function(r){var t=this.uvs;this.object.geometry.uvs.push(t[r+0],t[r+1])},addFace:function(d,t,g,r,i,s,a,n,o){var h=this.vertices.length,l=this.parseVertexIndex(d,h),u=this.parseVertexIndex(t,h),c=this.parseVertexIndex(g,h);if(this.addVertex(l,u,c),void 0!==r){var p=this.uvs.length;l=this.parseUVIndex(r,p),u=this.parseUVIndex(i,p),c=this.parseUVIndex(s,p),this.addUV(l,u,c)}if(void 0!==a){var m=this.normals.length;l=this.parseNormalIndex(a,m),u=a===n?l:this.parseNormalIndex(n,m),c=a===o?l:this.parseNormalIndex(o,m),this.addNormal(l,u,c)}0<this.colors.length&&this.addColor(l,u,c)},addPointGeometry:function(a){this.object.geometry.type="Points";for(var t=this.vertices.length,o=0,r=a.length;o<r;o++)this.addVertexPoint(this.parseVertexIndex(a[o],t))},addLineGeometry:function(o,t){this.object.geometry.type="Line";for(var l=this.vertices.length,r=this.uvs.length,i=0,s=o.length;i<s;i++)this.addVertexLine(this.parseVertexIndex(o[i],l));for(var a=0,s=t.length;a<s;a++)this.addUVLine(this.parseUVIndex(t[a],r))}};return r.startObject("",!1),r}function t(r){this.manager=void 0===r?THREE.DefaultLoadingManager:r,this.materials=null}var u=/^[og]\s*(.+)?/,r=/^mtllib /,i=/^usemtl /;return t.prototype={constructor:t,load:function(o,n,t,r){var i=this,s=new THREE.FileLoader(i.manager);s.setPath(this.path),s.load(o,function(r){n(i.parse(r))},t,r)},setPath:function(r){this.path=r},setMaterials:function(r){return this.materials=r,this},parse:function(t){console.time("OBJLoader");var s=new Y;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var a=t.split("\n"),n="",o="",h=[],l="function"==typeof"".trimLeft,W=0,c=a.length;W<c;W++)if(n=a[W],n=n.trimLeft(),0!==n.length&&"#"!==(o=n.charAt(0)))if("v"===o){var p=n.split(/\s+/);switch(p[0]){case"v":s.vertices.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])),8===p.length&&s.colors.push(parseFloat(p[4]),parseFloat(p[5]),parseFloat(p[6]));break;case"vn":s.normals.push(parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]));break;case"vt":s.uvs.push(parseFloat(p[1]),parseFloat(p[2]));}}else if("f"===o){for(var m=n.substr(1).trim(),f=m.split(/\s+/),d=[],v=0,g=f.length,b;v<g;v++)if(b=f[v],0<b.length){var E=b.split("/");d.push(E)}for(var x=d[0],v=1,g=d.length-1;v<g;v++){var j=d[v],y=d[v+1];s.addFace(x[0],j[0],y[0],x[1],j[1],y[1],x[2],j[2],y[2])}}else if("l"===o){var L=n.substring(1).trim().split(" "),H=[],R=[];if(-1===n.indexOf("/"))H=L;else for(var T=0,w=L.length,V;T<w;T++)V=L[T].split("/"),""!==V[0]&&H.push(V[0]),""!==V[1]&&R.push(V[1]);s.addLineGeometry(H,R)}else if("p"===o){var m=n.substr(1).trim(),M=m.split(" ");s.addPointGeometry(M)}else if(null!==(h=u.exec(n))){var F=(" "+h[0].substr(1).trim()).substr(1);s.startObject(F)}else if(i.test(n))s.object.startMaterial(n.substring(7).trim(),s.materialLibraries);else if(r.test(n))s.materialLibraries.push(n.substring(7).trim());else{if("s"!==o){if("\0"===n)continue;throw new Error("THREE.OBJLoader: Unexpected line: \""+n+"\"")}if(h=n.split(" "),1<h.length){var I=h[1].trim().toLowerCase();s.object.smooth="0"!==I&&"off"!==I}else s.object.smooth=!0;var P=s.object.currentMaterial();P&&(P.smooth=s.object.smooth)}s.finalize();var X=new THREE.Group;X.materialLibraries=[].concat(s.materialLibraries);for(var W=0,c=s.objects.length;W<c;W++){var z=s.objects[W],B=z.geometry,C=z.materials,O="Line"===B.type,Z="Points"===B.type,N=!1;if(0!==B.vertices.length){var G=new THREE.BufferGeometry;G.addAttribute("position",new THREE.Float32BufferAttribute(B.vertices,3)),0<B.normals.length?G.addAttribute("normal",new THREE.Float32BufferAttribute(B.normals,3)):G.computeVertexNormals(),0<B.colors.length&&(N=!0,G.addAttribute("color",new THREE.Float32BufferAttribute(B.colors,3))),0<B.uvs.length&&G.addAttribute("uv",new THREE.Float32BufferAttribute(B.uvs,2));for(var S=[],_=0,D=C.length;_<D;_++){var J=C[_],P=void 0;if(null!==this.materials)if(!(P=this.materials.create(J.name),!O||!P||P instanceof THREE.LineBasicMaterial)){var k=new THREE.LineBasicMaterial;k.copy(P),k.lights=!1,P=k}else if(Z&&P&&!(P instanceof THREE.PointsMaterial)){var K=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});k.copy(P),P=K}P||(P=O?new THREE.LineBasicMaterial:Z?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial,P.name=J.name),P.flatShading=!J.smooth,P.vertexColors=N?THREE.VertexColors:THREE.NoColors,S.push(P)}var q;if(1<S.length){for(var _=0,D=C.length,J;_<D;_++)J=C[_],G.addGroup(J.groupStart,J.groupCount,_);q=O?new THREE.LineSegments(G,S):Z?new THREE.Points(G,S):new THREE.Mesh(G,S)}else q=O?new THREE.LineSegments(G,S[0]):Z?new THREE.Points(G,S[0]):new THREE.Mesh(G,S[0]);q.name=z.name,X.add(q)}}return console.timeEnd("OBJLoader"),X}},t}()},{}],45:[function(t,r,a){a=r.exports=function(t){return t.replace(/^\s*|\s*$/g,"")},a.left=function(t){return t.replace(/^\s*/,"")},a.right=function(t){return t.replace(/\s*$/,"")}},{}],46:[function(t,r,i){(function(l){!function(t,a){"object"==("undefined"===typeof i?"undefined":babelHelpers.typeof(i))&&"undefined"!=typeof r?r.exports=a():"function"==typeof n&&n.amd?n(a):t.WebVRPolyfill=a()}(this,function(){"use strict";function d(r){this.config=t(t({},u),r),this.polyfillDisplays=[],this.enabled=!1,this.hasNative="getVRDisplays"in navigator,this.native={},this.native.getVRDisplays=navigator.getVRDisplays,this.native.VRFrameData=window.VRFrameData,this.native.VRDisplay=window.VRDisplay,(!this.hasNative||this.config.PROVIDE_MOBILE_VRDISPLAY&&i())&&(this.enable(),this.getVRDisplays().then(function(t){t&&t[0]&&t[0].fireVRDisplayConnect_&&t[0].fireVRDisplayConnect_()}))}var j="undefined"==typeof window?"undefined"==typeof l?"undefined"==typeof self?{}:self:l:window,c=function(r){return Promise.race?Promise.race(r):new Promise(function(a,o){for(var n=0;n<r.length;n++)r[n].then(a,o)})},i=function(){return /Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},p=function(r,a){for(var o=0,n=r.length;o<n;o++)a[o]=r[o]},t=function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a]);return t},s=function(t,r){return r={exports:{}},t(r,r.exports),r.exports}(function(t){!function(){t.exports=function(){function M(a,o,n){if(!o)return void n(a);for(var i=[],t=null,l=0,s;l<o.length;++l)switch(s=o[l],s){case a.TEXTURE_BINDING_2D:case a.TEXTURE_BINDING_CUBE_MAP:var r=o[++l];if(r<a.TEXTURE0||r>a.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),i.push(null,null);break}t||(t=a.getParameter(a.ACTIVE_TEXTURE)),a.activeTexture(r),i.push(a.getParameter(s),null);break;case a.ACTIVE_TEXTURE:t=a.getParameter(a.ACTIVE_TEXTURE),i.push(null);break;default:i.push(a.getParameter(s));}n(a);for(var l=0;l<o.length;++l){var s=o[l],d=i[l];switch(s){case a.ACTIVE_TEXTURE:break;case a.ARRAY_BUFFER_BINDING:a.bindBuffer(a.ARRAY_BUFFER,d);break;case a.COLOR_CLEAR_VALUE:a.clearColor(d[0],d[1],d[2],d[3]);break;case a.COLOR_WRITEMASK:a.colorMask(d[0],d[1],d[2],d[3]);break;case a.CURRENT_PROGRAM:a.useProgram(d);break;case a.ELEMENT_ARRAY_BUFFER_BINDING:a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,d);break;case a.FRAMEBUFFER_BINDING:a.bindFramebuffer(a.FRAMEBUFFER,d);break;case a.RENDERBUFFER_BINDING:a.bindRenderbuffer(a.RENDERBUFFER,d);break;case a.TEXTURE_BINDING_2D:var r=o[++l];if(r<a.TEXTURE0||r>a.TEXTURE31)break;a.activeTexture(r),a.bindTexture(a.TEXTURE_2D,d);break;case a.TEXTURE_BINDING_CUBE_MAP:var r=o[++l];if(r<a.TEXTURE0||r>a.TEXTURE31)break;a.activeTexture(r),a.bindTexture(a.TEXTURE_CUBE_MAP,d);break;case a.VIEWPORT:a.viewport(d[0],d[1],d[2],d[3]);break;case a.BLEND:case a.CULL_FACE:case a.DEPTH_TEST:case a.SCISSOR_TEST:case a.STENCIL_TEST:d?a.enable(s):a.disable(s);break;default:console.log("No GL restore behavior for 0x"+s.toString(16));}t&&a.activeTexture(t)}}function pe(r,a,o,n){this.gl=r,this.cardboardUI=a,this.bufferScale=o,this.dirtySubmitFrameBindings=n,this.ctxAttribs=r.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferWidth=r.drawingBufferWidth,this.bufferHeight=r.drawingBufferHeight,this.realBindFramebuffer=r.bindFramebuffer,this.realEnable=r.enable,this.realDisable=r.disable,this.realColorMask=r.colorMask,this.realClearColor=r.clearColor,this.realViewport=r.viewport,h()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(r.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(r.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=Y(r,J,K,this.attribs),this.uniforms=v(r,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=r.createBuffer(),this.indexBuffer=r.createBuffer(),this.indexCount=0,this.renderTarget=r.createTexture(),this.framebuffer=r.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=r.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=r.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=r.createRenderbuffer()),this.patch(),this.onResize()}function i(t){this.gl=t,this.attribs={position:0},this.program=Y(t,q,$,this.attribs),this.uniforms=v(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}function t(t){this.coefficients=t}function A(t){this.width=t.width||f(),this.height=t.height||m(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function s(r){this.viewer=De.CardboardV2,this.updateDeviceParams(r),this.distortion=new t(this.viewer.distortionCoefficients)}function r(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}function N(r,a){if(this.dpdb=ne,this.recalculateDeviceParams_(),r){this.onDeviceParamsUpdated=a;var o=new XMLHttpRequest,n=this;o.open("GET",r,!0),o.addEventListener("load",function(){n.loading=!1,200<=o.status&&299>=o.status?(n.dpdb=JSON.parse(o.response),n.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),o.send()}}function D(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}function n(t,r){this.set(t,r)}function u(t,r){this.kFilter=t,this.isDebug=r,this.currentAccelMeasurement=new n,this.currentGyroMeasurement=new n,this.previousGyroMeasurement=new n,this.filterQ=h()?new Pe(-1,0,0,1):new Pe(1,0,0,1),this.previousFilterQ=new Pe,this.previousFilterQ.copy(this.filterQ),this.accelQ=new Pe,this.isOrientationInitialized=!1,this.estimatedGravity=new Ae,this.measuredGravity=new Ae,this.gyroIntegralQ=new Pe}function ue(t,r){this.predictionTimeS=t,this.isDebug=r,this.previousQ=new Pe,this.previousTimestampS=null,this.deltaQ=new Pe,this.outQ=new Pe}function g(r,a,o,n){this.yawOnly=o,this.accelerometer=new Ae,this.gyroscope=new Ae,this.filter=new u(r,n),this.posePredictor=new ue(a,n),this.isFirefoxAndroid=x(),this.isIOS=h();var t=d();this.isDeviceMotionInRadians=!this.isIOS&&t&&66>t,this.isWithoutDeviceMotion=Re(),this.filterToWorldQ=new Pe,h()?this.filterToWorldQ.setFromAxisAngle(new Ae(1,0,0),ga/2):this.filterToWorldQ.setFromAxisAngle(new Ae(1,0,0),-ga/2),this.inverseWorldToScreenQ=new Pe,this.worldToScreenQ=new Pe,this.originalPoseAdjustQ=new Pe,this.originalPoseAdjustQ.setFromAxisAngle(new Ae(0,0,1),-window.orientation*ga/180),this.setScreenTransform_(),Q()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new Pe,this.orientationOut_=new Float32Array(4),this.start()}function me(){this.loadIcon_();var a=document.createElement("div"),o=a.style;o.position="fixed",o.top=0,o.right=0,o.bottom=0,o.left=0,o.backgroundColor="gray",o.fontFamily="sans-serif",o.zIndex=1e6;var n=document.createElement("img");n.src=this.icon;var o=n.style;o.marginLeft="25%",o.marginTop="25%",o.width="50%",a.appendChild(n);var i=document.createElement("div"),o=i.style;o.textAlign="center",o.fontSize="16px",o.lineHeight="24px",o.margin="24px 25%",o.width="50%",i.innerHTML="Place your phone into your Cardboard viewer.",a.appendChild(i);var t=document.createElement("div"),o=t.style;o.backgroundColor="#CFD8DC",o.position="fixed",o.bottom=0,o.width="100%",o.height="48px",o.padding="14px 24px",o.boxSizing="border-box",o.color="#656A6B",a.appendChild(t);var l=document.createElement("div");l.style.float="left",l.innerHTML="No Cardboard viewer?";var s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank";var o=s.style;o.float="right",o.fontWeight=600,o.textTransform="uppercase",o.borderLeft="1px solid gray",o.paddingLeft="24px",o.textDecoration="none",o.color="#656A6B",t.appendChild(l),t.appendChild(s),this.overlay=a,this.text=i,this.hide()}function L(){try{this.selectedKey=localStorage.getItem(Te)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=je),this.dialog=this.createDialog_(s.Viewers),this.root=null,this.onChangeCallbacks_=[]}function fe(t){Object.defineProperties(this,{hasPosition:{writable:!1,enumerable:!0,value:t.hasPosition},hasExternalDisplay:{writable:!1,enumerable:!0,value:t.hasExternalDisplay},canPresent:{writable:!1,enumerable:!0,value:t.canPresent},maxLayers:{writable:!1,enumerable:!0,value:t.maxLayers},hasOrientation:{enumerable:!0,get:function(){return H("VRDisplayCapabilities.prototype.hasOrientation","VRDisplay.prototype.getFrameData"),t.hasOrientation}}})}function ve(t){t=t||{};var r=!("wakelock"in t)||t.wakelock;this.isPolyfilled=!0,this.displayId=we++,this.displayName="",this.depthNear=.01,this.depthFar=1e4,this.isPresenting=!1,Object.defineProperty(this,"isConnected",{get:function(){return H("VRDisplay.prototype.isConnected","VRDisplayCapabilities.prototype.hasExternalDisplay"),!1}}),this.capabilities=new fe({hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1}),this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.originalParent_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,r&&_()&&(this.wakelock_=new Ee)}function c(t){var r=R({},Oe);t=R(r,t||{}),ve.call(this,{wakelock:t.MOBILE_WAKE_LOCK}),this.config=t,this.displayName="Cardboard VRDisplay",this.capabilities=new fe({hasPosition:!1,hasOrientation:!0,hasExternalDisplay:!1,canPresent:!0,maxLayers:1}),this.stageParameters=null,this.bufferScale_=this.config.BUFFER_SCALE,this.poseSensor_=new Ie(this.config),this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new N(this.config.DPDB_URL,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new s(this.dpdb_.getDeviceParams()),this.viewerSelector_=new L,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),this.config.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new me),h()&&window.addEventListener("resize",this.onResize_.bind(this))}var be=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},w=function(){function r(r,a){for(var o=0,n;o<a.length;o++)n=a[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}return function(a,o,n){return o&&r(a.prototype,o),n&&r(a,n),a}}(),Ce=function(){function t(a,o){var n=[],i=!0,l=!1,d;try{for(var s=a[Symbol.iterator](),c;!(i=(c=s.next()).done)&&(n.push(c.value),!o||n.length!==o);i=!0);}catch(t){l=!0,d=t}finally{try{!i&&s.return&&s.return()}finally{if(l)throw d}}return n}return function(r,a){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return t(r,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(t,r){return"data:"+t+";base64,"+r},Se=function(t,r,a){return t+(r-t)*a},h=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),_e=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),x=(function(){/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}(),function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}()),d=function(){var t=navigator.userAgent.match(/.*Chrome\/([0-9]+)/),r=t?parseInt(t[1],10):null;return function(){return r}}(),Re=function(){var r=!1;if(65===d()){var a=navigator.userAgent.match(/.*Chrome\/([0-9\.]*)/);if(a){var o=a[1].split("."),n=Ce(o,4),t=(n[0],n[1],n[2]),i=n[3];r=3325===parseInt(t,10)&&148>parseInt(i,10)}}return function(){return r}}(),Be=function(){var t=-1!==navigator.userAgent.indexOf("R7 Build");return function(){return t}}(),Q=function(){var t=90==window.orientation||-90==window.orientation;return Be()?!t:t},p=function(t){return!isNaN(t)&&!(.001>=t)&&!(1<t)},f=function(){return C(window.screen.width,window.screen.height)*window.devicePixelRatio},m=function(){return O(window.screen.width,window.screen.height)*window.devicePixelRatio},k=function(t){if(_e())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},U=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},B=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},Y=function(a,o,n,i){var t=a.createShader(a.VERTEX_SHADER);a.shaderSource(t,o),a.compileShader(t);var l=a.createShader(a.FRAGMENT_SHADER);a.shaderSource(l,n),a.compileShader(l);var s=a.createProgram();for(var r in a.attachShader(s,t),a.attachShader(s,l),i)a.bindAttribLocation(s,i[r],r);return a.linkProgram(s),a.deleteShader(t),a.deleteShader(l),s},v=function(r,a){for(var o={},n=r.getProgramParameter(a,r.ACTIVE_UNIFORMS),t="",i=0;i<n;i++)t=r.getActiveUniform(a,i).name.replace("[0]",""),o[t]=r.getUniformLocation(a,t);return o},b=function(a,o,l,i,t,d,s){var r=1/(o-l),c=1/(i-t),p=1/(d-s);return a[0]=-2*r,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*c,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*p,a[11]=0,a[12]=(o+l)*r,a[13]=(t+i)*c,a[14]=(s+d)*p,a[15]=1,a},_=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},R=function(t,r){for(var a in r)r.hasOwnProperty(a)&&(t[a]=r[a]);return t},G=function(t){if(h()){var r=t.style.width,a=t.style.height;t.style.width=parseInt(r)+1+"px",t.style.height=parseInt(a)+"px",setTimeout(function(){t.style.width=r,t.style.height=a},100)}window.canvas=t},F=function(){function o(r,o,l,i){var t=y(o?o.upDegrees*c:s),d=y(o?o.downDegrees*c:s),p=y(o?o.leftDegrees*c:s),m=y(o?o.rightDegrees*c:s),n=2/(p+m),u=2/(t+d);return r[0]=n,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r[5]=u,r[6]=0,r[7]=0,r[8]=.5*(-(p-m)*n),r[9]=.5*((t-d)*u),r[10]=i/(l-i),r[11]=-1,r[12]=0,r[13]=0,r[14]=i*l/(l-i),r[15]=0,r}function l(l,d,p){var i=d[0],t=d[1],m=d[2],s=d[3],r=i+i,h=t+t,y=m+m,n=i*r,u=i*h,a=i*y,g=t*h,o=t*y,f=m*y,A=s*r,x=s*h,E=s*y;return l[0]=1-(g+f),l[1]=u+E,l[2]=a-x,l[3]=0,l[4]=u-E,l[5]=1-(n+f),l[6]=o+A,l[7]=0,l[8]=a+x,l[9]=o-A,l[10]=1-(n+g),l[11]=0,l[12]=p[0],l[13]=p[1],l[14]=p[2],l[15]=1,l}function d(l,d,c){var p=c[0],m=c[1],h=c[2],y,t,f,s,r,A,M,n,u,a,g,o;return d===l?(l[12]=d[0]*p+d[4]*m+d[8]*h+d[12],l[13]=d[1]*p+d[5]*m+d[9]*h+d[13],l[14]=d[2]*p+d[6]*m+d[10]*h+d[14],l[15]=d[3]*p+d[7]*m+d[11]*h+d[15]):(y=d[0],t=d[1],f=d[2],s=d[3],r=d[4],A=d[5],M=d[6],n=d[7],u=d[8],a=d[9],g=d[10],o=d[11],l[0]=y,l[1]=t,l[2]=f,l[3]=s,l[4]=r,l[5]=A,l[6]=M,l[7]=n,l[8]=u,l[9]=a,l[10]=g,l[11]=o,l[12]=y*p+r*m+u*h+d[12],l[13]=t*p+A*m+a*h+d[13],l[14]=f*p+M*m+g*h+d[14],l[15]=s*p+n*m+o*h+d[15]),l}function i(p,m){var f=m[0],i=m[1],M=m[2],A=m[3],s=m[4],r=m[5],v=m[6],b=m[7],n=m[8],u=m[9],a=m[10],g=m[11],o=m[12],L=m[13],D=m[14],N=m[15],T=f*r-i*s,c=f*v-M*s,E=f*b-A*s,w=i*v-M*r,y=i*b-A*r,l=M*b-A*v,I=n*L-u*o,h=n*D-a*o,_=n*N-g*o,x=u*D-a*L,d=u*N-g*L,C=a*N-g*D,S=T*C-c*d+E*x+w*_-y*h+l*I;return S?(S=1/S,p[0]=(r*C-v*d+b*x)*S,p[1]=(M*d-i*C-A*x)*S,p[2]=(L*l-D*y+N*w)*S,p[3]=(a*y-u*l-g*w)*S,p[4]=(v*_-s*C-b*h)*S,p[5]=(f*C-M*_+A*h)*S,p[6]=(D*E-o*l-N*c)*S,p[7]=(n*l-a*E+g*c)*S,p[8]=(s*d-r*_+b*I)*S,p[9]=(i*_-f*d-A*I)*S,p[10]=(o*y-L*E+N*T)*S,p[11]=(u*E-n*y-g*T)*S,p[12]=(r*h-s*x-v*I)*S,p[13]=(f*x-i*h+M*I)*S,p[14]=(L*c-o*w-D*T)*S,p[15]=(n*w-u*c+a*T)*S,p):null}function t(t,c,s,r,n,u){o(t,r||null,u.depthNear,u.depthFar),l(c,s.orientation||p,s.position||m),n&&d(c,c,n),i(c,c)}var c=ga/180,s=.25*ga,p=new Float32Array([0,0,0,1]),m=new Float32Array([0,0,0]);return function(r,a,o){return r&&a&&(r.pose=a,r.timestamp=a.timestamp,t(r.leftProjectionMatrix,r.leftViewMatrix,a,o._getFieldOfView("left"),o._getEyeOffset("left"),o),t(r.rightProjectionMatrix,r.rightViewMatrix,a,o._getFieldOfView("right"),o._getEyeOffset("right"),o),!0)}}(),P=function(){var t=window.self!==window.top,r=W(document.referrer),a=W(window.location.href);return t&&r!==a},W=function(r){var a=r.indexOf("://"),o;o=-1===a?0:a+3;var n=r.indexOf("/",o);return-1===n&&(n=r.length),r.substring(0,n)},Z=function(t){return 1<t.w?(console.warn("getQuaternionAngle: w > 1"),0):2*E(t.w)},V=function(){var t={};return function(r,a){void 0===t[r]&&(console.warn("webvr-polyfill: "+a),t[r]=!0)}}(),H=function(t,r){V(t,t+" has been deprecated. This may not work on native WebVR displays. "+(r?"Please use "+r+" instead.":""))},X=M,J="attribute vec2 position;\nattribute vec3 texCoord;\nvarying vec2 vTexCoord;\nuniform vec4 viewportOffsetScale[2];\nvoid main() {\n  vec4 viewport = viewportOffsetScale[int(texCoord.z)];\n  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;\n  gl_Position = vec4( position, 1.0, 1.0 );\n}",K="precision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(diffuse, vTexCoord);\n}";pe.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},pe.prototype.onResize=function(){var t=this.gl,r=this,a=[t.RENDERBUFFER_BINDING,t.TEXTURE_BINDING_2D,t.TEXTURE0];X(t,a,function(t){r.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),r.scissorTest&&r.realDisable.call(t,t.SCISSOR_TEST),r.realColorMask.call(t,!0,!0,!0,!0),r.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),r.realBindFramebuffer.call(t,t.FRAMEBUFFER,r.framebuffer),t.bindTexture(t.TEXTURE_2D,r.renderTarget),t.texImage2D(t.TEXTURE_2D,0,r.ctxAttribs.alpha?t.RGBA:t.RGB,r.bufferWidth,r.bufferHeight,0,r.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r.renderTarget,0),r.ctxAttribs.depth&&r.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,r.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,r.depthStencilBuffer)):r.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,r.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,r.depthBuffer)):r.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,r.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,r.bufferWidth,r.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,r.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),r.realBindFramebuffer.call(t,t.FRAMEBUFFER,r.lastBoundFramebuffer),r.scissorTest&&r.realEnable.call(t,t.SCISSOR_TEST),r.realColorMask.apply(t,r.colorMask),r.realViewport.apply(t,r.viewport),r.realClearColor.apply(t,r.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},pe.prototype.patch=function(){if(!this.isPatched){var r=this,t=this.gl.canvas,a=this.gl;h()||(t.width=f()*this.bufferScale,t.height=m()*this.bufferScale,Object.defineProperty(t,"width",{configurable:!0,enumerable:!0,get:function(){return r.bufferWidth},set:function(a){r.bufferWidth=a,r.realCanvasWidth.set.call(t,a),r.onResize()}}),Object.defineProperty(t,"height",{configurable:!0,enumerable:!0,get:function(){return r.bufferHeight},set:function(a){r.bufferHeight=a,r.realCanvasHeight.set.call(t,a),r.onResize()}})),this.lastBoundFramebuffer=a.getParameter(a.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(o,n){r.lastBoundFramebuffer=n||r.framebuffer,r.realBindFramebuffer.call(a,o,r.lastBoundFramebuffer)},this.cullFace=a.getParameter(a.CULL_FACE),this.depthTest=a.getParameter(a.DEPTH_TEST),this.blend=a.getParameter(a.BLEND),this.scissorTest=a.getParameter(a.SCISSOR_TEST),this.stencilTest=a.getParameter(a.STENCIL_TEST),a.enable=function(t){t===a.CULL_FACE?r.cullFace=!0:t===a.DEPTH_TEST?r.depthTest=!0:t===a.BLEND?r.blend=!0:t===a.SCISSOR_TEST?r.scissorTest=!0:t===a.STENCIL_TEST?r.stencilTest=!0:void 0;r.realEnable.call(a,t)},a.disable=function(t){t===a.CULL_FACE?r.cullFace=!1:t===a.DEPTH_TEST?r.depthTest=!1:t===a.BLEND?r.blend=!1:t===a.SCISSOR_TEST?r.scissorTest=!1:t===a.STENCIL_TEST?r.stencilTest=!1:void 0;r.realDisable.call(a,t)},this.colorMask=a.getParameter(a.COLOR_WRITEMASK),a.colorMask=function(o,n,t,i){r.colorMask[0]=o,r.colorMask[1]=n,r.colorMask[2]=t,r.colorMask[3]=i,r.realColorMask.call(a,o,n,t,i)},this.clearColor=a.getParameter(a.COLOR_CLEAR_VALUE),a.clearColor=function(o,n,t,i){r.clearColor[0]=o,r.clearColor[1]=n,r.clearColor[2]=t,r.clearColor[3]=i,r.realClearColor.call(a,o,n,t,i)},this.viewport=a.getParameter(a.VIEWPORT),a.viewport=function(o,n,t,i){r.viewport[0]=o,r.viewport[1]=n,r.viewport[2]=t,r.viewport[3]=i,r.realViewport.call(a,o,n,t,i)},this.isPatched=!0,G(t)}},pe.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,r=this.gl.canvas;h()||(Object.defineProperty(r,"width",this.realCanvasWidth),Object.defineProperty(r,"height",this.realCanvasHeight)),r.width=this.bufferWidth,r.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){G(r)},1)}},pe.prototype.setTextureBounds=function(t,r){t||(t=[0,0,0.5,1]),r||(r=[0.5,0,0.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=r[0],this.viewportOffsetScale[5]=r[1],this.viewportOffsetScale[6]=r[2],this.viewportOffsetScale[7]=r[3]},pe.prototype.submitFrame=function(){var r=this.gl,a=this,o=[];if(this.dirtySubmitFrameBindings||o.push(r.CURRENT_PROGRAM,r.ARRAY_BUFFER_BINDING,r.ELEMENT_ARRAY_BUFFER_BINDING,r.TEXTURE_BINDING_2D,r.TEXTURE0),X(r,o,function(t){a.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),a.cullFace&&a.realDisable.call(t,t.CULL_FACE),a.depthTest&&a.realDisable.call(t,t.DEPTH_TEST),a.blend&&a.realDisable.call(t,t.BLEND),a.scissorTest&&a.realDisable.call(t,t.SCISSOR_TEST),a.stencilTest&&a.realDisable.call(t,t.STENCIL_TEST),a.realColorMask.call(t,!0,!0,!0,!0),a.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(a.ctxAttribs.alpha||h())&&(a.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(a.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,a.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,a.vertexBuffer),t.enableVertexAttribArray(a.attribs.position),t.enableVertexAttribArray(a.attribs.texCoord),t.vertexAttribPointer(a.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(a.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(a.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,a.renderTarget),t.uniform4fv(a.uniforms.viewportOffsetScale,a.viewportOffsetScale),t.drawElements(t.TRIANGLES,a.indexCount,t.UNSIGNED_SHORT,0),a.cardboardUI&&a.cardboardUI.renderNoState(),a.realBindFramebuffer.call(a.gl,t.FRAMEBUFFER,a.framebuffer),a.ctxAttribs.preserveDrawingBuffer||(a.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),a.dirtySubmitFrameBindings||a.realBindFramebuffer.call(t,t.FRAMEBUFFER,a.lastBoundFramebuffer),a.cullFace&&a.realEnable.call(t,t.CULL_FACE),a.depthTest&&a.realEnable.call(t,t.DEPTH_TEST),a.blend&&a.realEnable.call(t,t.BLEND),a.scissorTest&&a.realEnable.call(t,t.SCISSOR_TEST),a.stencilTest&&a.realEnable.call(t,t.STENCIL_TEST),a.realColorMask.apply(t,a.colorMask),a.realViewport.apply(t,a.viewport),!a.ctxAttribs.alpha&&a.ctxAttribs.preserveDrawingBuffer||a.realClearColor.apply(t,a.clearColor)}),h()){var n=r.canvas;n.width==a.bufferWidth&&n.height==a.bufferHeight||(a.bufferWidth=n.width,a.bufferHeight=n.height,a.onResize())}},pe.prototype.updateDeviceInfo=function(r){var a=this.gl,o=this,n=[a.ARRAY_BUFFER_BINDING,a.ELEMENT_ARRAY_BUFFER_BINDING];X(a,n,function(a){var n=o.computeMeshVertices_(o.meshWidth,o.meshHeight,r);if(a.bindBuffer(a.ARRAY_BUFFER,o.vertexBuffer),a.bufferData(a.ARRAY_BUFFER,n,a.STATIC_DRAW),!o.indexCount){var t=o.computeMeshIndices_(o.meshWidth,o.meshHeight);a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,o.indexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,t,a.STATIC_DRAW),o.indexCount=t.length}})},pe.prototype.computeMeshVertices_=function(l,d,p){for(var i=new Float32Array(5*(2*l*d)),t=p.getLeftEyeVisibleTanAngles(),m=p.getLeftEyeNoLensTanAngles(),s=p.getLeftEyeVisibleScreenRect(m),r=0,h=0;2>h;h++){for(var f=0;f<d;f++)for(var n=0;n<l;n++,r++){var u=n/(l-1),a=f/(d-1),g=u,o=a,A=Se(t[0],t[2],u),M=Se(t[3],t[1],a),x=S(A*A+M*M),E=p.distortion.distortInverse(x);u=(A*E/x-m[0])/(m[2]-m[0]),a=(M*E/x-m[3])/(m[1]-m[3]),u=2*(s.x+u*s.width-.5),a=2*(s.y+a*s.height-.5),i[5*r+0]=u,i[5*r+1]=a,i[5*r+2]=g,i[5*r+3]=o,i[5*r+4]=h}var c=t[2]-t[0];t[0]=-(c+t[0]),t[2]=c-t[2],c=m[2]-m[0],m[0]=-(c+m[0]),m[2]=c-m[2],s.x=1-(s.x+s.width)}return i},pe.prototype.computeMeshIndices_=function(t,a){for(var o=new Uint16Array(6*(2*(t-1)*(a-1))),i=0,s=0,r=0;2>r;r++)for(var l=0;l<a;l++)for(var d=0;d<t;d++,i++)0!=d&&0!=l&&(d<=t/2==l<=a/2?(o[s++]=i,o[s++]=i-t-1,o[s++]=i-t,o[s++]=i-t-1,o[s++]=i,o[s++]=i-1):(o[s++]=i-1,o[s++]=i-t,o[s++]=i,o[s++]=i-t,o[s++]=i-1,o[s++]=i-t-1));return o},pe.prototype.getOwnPropertyDescriptor_=function(t,r){var a=Object.getOwnPropertyDescriptor(t,r);return void 0!==a.get&&void 0!==a.set||(a.configurable=!0,a.enumerable=!0,a.get=function(){return this.getAttribute(r)},a.set=function(t){this.setAttribute(r,t)}),a};var q="attribute vec2 position;\nuniform mat4 projectionMat;\nvoid main() {\n  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );\n}",$="precision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",ee=ga/180,Me=.3125;i.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},i.prototype.listen=function(r,a){var o=this.gl.canvas;this.listener=function(n){var t=o.clientWidth/2;n.clientX>t-42&&n.clientX<t+42&&n.clientY>o.clientHeight-42?r(n):42>n.clientX&&42>n.clientY&&a(n)},o.addEventListener("click",this.listener,!1)},i.prototype.onResize=function(){var t=this.gl,l=this,r=[t.ARRAY_BUFFER_BINDING];X(t,r,function(d){function c(a,o){var n=(90-a)*ee,s=I(n),t=z(n);p.push(Me*s*u+m,Me*t*u+u),p.push(o*s*u+m,o*t*u+u)}function i(t,r){p.push(a+t,d.drawingBufferHeight-a-r)}var p=[],m=d.drawingBufferWidth/2,t=C(screen.width,screen.height)*window.devicePixelRatio,r=d.drawingBufferWidth/t,s=r*window.devicePixelRatio,h=4*s/2,n=42*s,u=28*s/2,a=14*s;p.push(m-h,n),p.push(m-h,d.drawingBufferHeight),p.push(m+h,n),p.push(m+h,d.drawingBufferHeight),l.gearOffset=p.length/2;for(var g=0,o;6>=g;g++)o=60*g,c(o,1),c(o+12,1),c(o+20,.75),c(o+40,.75),c(o+48,1);l.gearVertexCount=p.length/2-l.gearOffset,l.arrowOffset=p.length/2;var y=h/z(45*ee);i(0,u),i(u,0),i(u+y,y),i(y,u+y),i(y,u-y),i(0,u),i(u,2*u),i(u+y,2*u-y),i(y,u-y),i(0,u),i(y,u-h),i(28*s,u-h),i(y,u+h),i(28*s,u+h),l.arrowVertexCount=p.length/2-l.arrowOffset,d.bindBuffer(d.ARRAY_BUFFER,l.vertexBuffer),d.bufferData(d.ARRAY_BUFFER,new Float32Array(p),d.STATIC_DRAW)})},i.prototype.render=function(){var t=this.gl,r=this,a=[t.CULL_FACE,t.DEPTH_TEST,t.BLEND,t.SCISSOR_TEST,t.STENCIL_TEST,t.COLOR_WRITEMASK,t.VIEWPORT,t.CURRENT_PROGRAM,t.ARRAY_BUFFER_BINDING];X(t,a,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),r.renderNoState()})},i.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),b(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},t.prototype.distortInverse=function(r){for(var a=0,o=1,n=r-this.distort(a);1e-4<T(o-a);){var t=r-this.distort(o),i=o-t*((o-a)/(t-n));a=o,o=i,n=t}return o},t.prototype.distort=function(r){for(var a=0,o=0;o<this.coefficients.length;o++)a=r*r*(a+this.coefficients[o]);return(a+1)*r};var ie=ga/180,Ue=180/ga,Ae=function(t,r,a){this.x=t||0,this.y=r||0,this.z=a||0};Ae.prototype={constructor:Ae,set:function(t,r,a){return this.x=t,this.y=r,this.z=a,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var t=this.length();if(0!==t){this.multiplyScalar(1/t)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(t){this.x*=t,this.y*=t,this.z*=t},applyQuaternion:function(o){var l=this.x,d=this.y,i=this.z,t=o.x,c=o.y,p=o.z,m=o.w,g=m*l+c*i-p*d,h=m*d+p*l-t*i,n=m*i+t*d-c*l,u=-t*l-c*d-p*i;return this.x=g*m+u*-t+h*-p-n*-c,this.y=h*m+u*-c+n*-t-g*-p,this.z=n*m+u*-p+g*-c-h*-t,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},crossVectors:function(a,o){var n=a.x,i=a.y,t=a.z,l=o.x,s=o.y,r=o.z;return this.x=i*r-t*s,this.y=t*l-n*r,this.z=n*s-i*l,this}};var Pe=function(r,a,o,n){this.x=r||0,this.y=a||0,this.z=o||0,this.w=void 0===n?1:n};Pe.prototype={constructor:Pe,set:function(r,a,o,n){return this.x=r,this.y=a,this.z=o,this.w=n,this},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w,this},setFromEulerXYZ:function(a,o,n){var i=I(a/2),t=I(o/2),l=I(n/2),s=z(a/2),r=z(o/2),d=z(n/2);return this.x=s*t*l+i*r*d,this.y=i*r*l-s*t*d,this.z=i*t*d+s*r*l,this.w=i*t*l-s*r*d,this},setFromEulerYXZ:function(a,o,n){var i=I(a/2),t=I(o/2),l=I(n/2),s=z(a/2),r=z(o/2),d=z(n/2);return this.x=s*t*l+i*r*d,this.y=i*r*l-s*t*d,this.z=i*t*d-s*r*l,this.w=i*t*l+s*r*d,this},setFromAxisAngle:function(r,a){var o=a/2,n=z(o);return this.x=r.x*n,this.y=r.y*n,this.z=r.z*n,this.w=I(o),this},multiply:function(t){return this.multiplyQuaternions(this,t)},multiplyQuaternions:function(a,o){var l=a.x,i=a.y,t=a.z,d=a.w,s=o.x,r=o.y,c=o.z,p=o.w;return this.x=l*p+d*s+i*c-t*r,this.y=i*p+d*r+t*s-l*c,this.z=t*p+d*c+l*r-i*s,this.w=d*p-l*s-i*r-t*c,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var t=S(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===t?(this.x=0,this.y=0,this.z=0,this.w=1):(t=1/t,this.x*=t,this.y*=t,this.z*=t,this.w*=t),this},slerp:function(a,o){if(0===o)return this;if(1===o)return this.copy(a);var l=this.x,i=this.y,t=this.z,d=this.w,s=d*a.w+l*a.x+i*a.y+t*a.z;if(0>s?(this.w=-a.w,this.x=-a.x,this.y=-a.y,this.z=-a.z,s=-s):this.copy(a),1<=s)return this.w=d,this.x=l,this.y=i,this.z=t,this;var c=E(s),p=S(1-s*s);if(.001>T(p))return this.w=.5*(d+this.w),this.x=.5*(l+this.x),this.y=.5*(i+this.y),this.z=.5*(t+this.z),this;var m=z((1-o)*c)/p,n=z(o*c)/p;return this.w=d*m+this.w*n,this.x=l*m+this.x*n,this.y=i*m+this.y*n,this.z=t*m+this.z*n,this},setFromUnitVectors:function(){var r,a;return function(o,n){return void 0===r&&(r=new Ae),a=o.dot(n)+1,1e-6>a?(a=0,T(o.x)>T(o.z)?r.set(-o.y,o.x,0):r.set(0,-o.z,o.y)):r.crossVectors(o,n),this.x=r.x,this.y=r.y,this.z=r.z,this.w=a,this.normalize(),this}}()};var ke=new A({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),Ne=new A({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),De={CardboardV1:new r({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[0.441,0.156],inverseCoefficients:[-0.4410035,0.42756155,-0.4804439,0.5460139,-0.58821183,0.5733938,-0.48303202,0.33299083,-0.17573841,0.0651772,-0.01488963,0.001559834]}),CardboardV2:new r({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[0.34,0.55],inverseCoefficients:[-0.33836704,-0.18162185,0.862655,-1.2462051,1.0560602,-0.58208317,0.21609078,-0.05444823,0.009177956,-0.0009904169,0.00006183535,-0.0000016981803]})};s.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},s.prototype.getDevice=function(){return this.device},s.prototype.setViewer=function(r){this.viewer=r,this.distortion=new t(this.viewer.distortionCoefficients)},s.prototype.determineDevice_=function(t){if(!t)return h()?(console.warn("Using fallback iOS device measurements."),Ne):(console.warn("Using fallback Android device measurements."),ke);var r=.0254/t.xdpi,a=.0254/t.ydpi;return new A({widthMeters:r*f(),heightMeters:a*m(),bevelMeters:.001*t.bevelMm})},s.prototype.getDistortedFieldOfViewLeftEye=function(){var l=this.viewer,d=this.device,c=this.distortion,i=l.screenLensDistance,t=(d.widthMeters-l.interLensDistance)/2,p=l.interLensDistance/2,s=l.baselineLensDistance-d.bevelMeters,r=d.heightMeters-s,m=Ue*o(c.distort(t/i)),g=Ue*o(c.distort(p/i)),n=Ue*o(c.distort(s/i)),u=Ue*o(c.distort(r/i));return{leftDegrees:O(m,l.fov),rightDegrees:O(g,l.fov),downDegrees:O(n,l.fov),upDegrees:O(u,l.fov)}},s.prototype.getLeftEyeVisibleTanAngles=function(){var l=this.viewer,d=this.device,c=this.distortion,i=y(-ie*l.fov),t=y(ie*l.fov),p=y(ie*l.fov),s=y(-ie*l.fov),r=d.widthMeters/4,m=d.heightMeters/2,h=l.baselineLensDistance-d.bevelMeters-m,f=l.interLensDistance/2-r,u=-h,a=l.screenLensDistance,g=c.distort((f-r)/a),o=c.distort((u+m)/a),A=c.distort((f+r)/a),M=c.distort((u-m)/a),x=new Float32Array(4);return x[0]=C(i,g),x[1]=O(t,o),x[2]=O(p,A),x[3]=C(s,M),x},s.prototype.getLeftEyeNoLensTanAngles=function(){var l=this.viewer,d=this.device,c=this.distortion,i=new Float32Array(4),t=c.distortInverse(y(-ie*l.fov)),p=c.distortInverse(y(ie*l.fov)),s=c.distortInverse(y(ie*l.fov)),r=c.distortInverse(y(-ie*l.fov)),m=d.widthMeters/4,h=d.heightMeters/2,n=l.baselineLensDistance-d.bevelMeters-h,f=l.interLensDistance/2-m,a=-n,g=l.screenLensDistance;return i[0]=C(t,(f-m)/g),i[1]=O(p,(a+h)/g),i[2]=O(s,(f+m)/g),i[3]=C(r,(a-h)/g),i},s.prototype.getLeftEyeVisibleScreenRect=function(a){var o=this.viewer,l=this.device,i=o.screenLensDistance,t=(l.widthMeters-o.interLensDistance)/2,d=o.baselineLensDistance-l.bevelMeters,s=(a[0]*i+t)/l.widthMeters,c=(a[1]*i+d)/l.heightMeters,p=(a[2]*i+t)/l.widthMeters,u=(a[3]*i+d)/l.heightMeters;return{x:s,y:u,width:p-s,height:c-u}},s.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},s.prototype.getFieldOfViewRightEye=function(t){var r=this.getFieldOfViewLeftEye(t);return{leftDegrees:r.rightDegrees,rightDegrees:r.leftDegrees,upDegrees:r.upDegrees,downDegrees:r.downDegrees}},s.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:Ue*o(t.outerDist),rightDegrees:Ue*o(t.innerDist),downDegrees:Ue*o(t.bottomDist),upDegrees:Ue*o(t.topDist)}},s.prototype.getUndistortedViewportLeftEye=function(){var o=this.getUndistortedParams_(),l=this.viewer,d=this.device,i=l.screenLensDistance,t=d.widthMeters/i,c=d.heightMeters/i,s=d.width/t,r=d.height/c,p=a((o.eyePosX-o.outerDist)*s),u=a((o.eyePosY-o.bottomDist)*r);return{x:p,y:u,width:a((o.eyePosX+o.innerDist)*s)-p,height:a((o.eyePosY+o.topDist)*r)-u}},s.prototype.getUndistortedParams_=function(){var l=this.viewer,d=this.device,c=this.distortion,i=l.screenLensDistance,t=l.interLensDistance/2/i,p=d.widthMeters/i,s=d.heightMeters/i,r=p/2-t,m=(l.baselineLensDistance-d.bevelMeters)/i,h=l.fov,n=c.distortInverse(y(ie*h)),u=O(r,n),f=O(t,n),A=O(m,n);return{outerDist:u,innerDist:f,topDist:O(s-m,n),bottomDist:A,eyePosX:r,eyePosY:m}},s.Viewers=De;var ne={format:1,last_updated:"2018-02-20T22:55:10Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/G5/*"},{ua:"Moto G (5) Plus"}],dpi:[403.4,403],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONEPLUS A5000/*"},{ua:"ONEPLUS A5000 "}],dpi:[403.411,399.737],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A5010/*"},{ua:"ONEPLUS A5010"}],dpi:[403,400],bw:2,ac:1e3},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920P/*"},{ua:"SM-N920P"}],dpi:[386.3655,390.144],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1e3},{type:"android",rules:[{mdmh:"Fly/*/IQ4412/*"},{ua:"IQ4412"}],dpi:307.9,bw:3,ac:1e3},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"BENEVE/*/VR518/*"},{ua:"VR518"}],dpi:480,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1e3},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1e3},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1e3},{type:"ios",rules:[{res:[1125,2436]}],dpi:458,bw:4,ac:1e3}]};N.prototype.getDeviceParams=function(){return this.deviceParams},N.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},N.prototype.calcDeviceParams_=function(){var o=this.dpdb;if(!o)return console.error("DPDB not available."),null;if(1!=o.format)return console.error("DPDB has unexpected format version."),null;if(!o.devices||!o.devices.length)return console.error("DPDB does not have a devices section."),null;var n=navigator.userAgent||navigator.vendor||window.opera,l=f(),i=m();if(!o.devices)return console.error("DPDB has no devices section."),null;for(var t=0,d;t<o.devices.length;t++)if(d=o.devices[t],!d.rules)console.warn("Device["+t+"] has no rules section.");else if("ios"!=d.type&&"android"!=d.type)console.warn("Device["+t+"] has invalid type.");else if(h()==("ios"==d.type)){for(var s=!1,r=0,c;r<d.rules.length;r++)if(c=d.rules[r],this.matchRule_(c,n,l,i)){s=!0;break}if(s){var p=d.dpi[0]||d.dpi,g=d.dpi[1]||d.dpi;return new D({xdpi:p,ydpi:g,bevelMm:d.bw})}}return console.warn("No DPDB device match."),null},N.prototype.matchRule_=function(r,a,o,n){if(!r.ua&&!r.res)return!1;if(r.ua&&0>a.indexOf(r.ua))return!1;if(r.res){if(!r.res[0]||!r.res[1])return!1;var t=r.res[0],i=r.res[1];if(O(o,n)!=O(t,i)||C(o,n)!=C(t,i))return!1}return!0},n.prototype.set=function(t,r){this.sample=t,this.timestampS=r},n.prototype.copy=function(t){this.set(t.sample,t.timestampS)},u.prototype.addAccelMeasurement=function(t,r){this.currentAccelMeasurement.set(t,r)},u.prototype.addGyroMeasurement=function(t,r){this.currentGyroMeasurement.set(t,r);var a=r-this.previousGyroMeasurement.timestampS;p(a)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},u.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var r=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,a=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,r);this.gyroIntegralQ.multiply(a),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(a);var o=new Pe;o.copy(this.filterQ),o.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(o),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var n=new Pe;n.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),n.inverse(),this.isDebug&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",Ue*Z(n),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var t=new Pe;t.copy(this.filterQ),t.multiply(n),this.filterQ.slerp(t,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},u.prototype.getOrientation=function(){return this.filterQ},u.prototype.accelToQuaternion_=function(t){var r=new Ae;r.copy(t),r.normalize();var a=new Pe;return a.setFromUnitVectors(new Ae(0,0,-1),r),a.inverse(),a},u.prototype.gyroToQuaternionDelta_=function(r,a){var o=new Pe,n=new Ae;return n.copy(r),n.normalize(),o.setFromAxisAngle(n,r.length()*a),o},ue.prototype.getPrediction=function(r,a,o){if(!this.previousTimestampS)return this.previousQ.copy(r),this.previousTimestampS=o,r;var n=new Ae;n.copy(a),n.normalize();var t=a.length();if(t<20*ie)return this.isDebug&&console.log("Moving slowly, at %s deg/s: no prediction",(Ue*t).toFixed(1)),this.outQ.copy(r),this.previousQ.copy(r),this.outQ;var i=t*this.predictionTimeS;return this.deltaQ.setFromAxisAngle(n,i),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(r),this.previousTimestampS=o,this.outQ},g.prototype.getPosition=function(){return null},g.prototype.getOrientation=function(){var t;if(this.isWithoutDeviceMotion&&this._deviceOrientationQ){this.deviceOrientationFixQ=this.deviceOrientationFixQ||function(){var t=new Pe().setFromAxisAngle(new Ae(0,0,-1),0),r=new Pe;return-90===window.orientation?r.setFromAxisAngle(new Ae(0,1,0),ga/-2):r.setFromAxisAngle(new Ae(0,1,0),ga/2),t.multiply(r)}(),this.deviceOrientationFilterToWorldQ=this.deviceOrientationFilterToWorldQ||function(){var t=new Pe;return t.setFromAxisAngle(new Ae(1,0,0),-ga/2),t}(),t=this._deviceOrientationQ;var r=new Pe;return r.copy(t),r.multiply(this.deviceOrientationFilterToWorldQ),r.multiply(this.resetQ),r.multiply(this.worldToScreenQ),r.multiplyQuaternions(this.deviceOrientationFixQ,r),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_}var a=this.filter.getOrientation();t=this.posePredictor.getPrediction(a,this.gyroscope,this.previousTimestampS);var r=new Pe;return r.copy(this.filterToWorldQ),r.multiply(this.resetQ),r.multiply(t),r.multiply(this.worldToScreenQ),this.yawOnly&&(r.x=0,r.z=0,r.normalize()),this.orientationOut_[0]=r.x,this.orientationOut_[1]=r.y,this.orientationOut_[2]=r.z,this.orientationOut_[3]=r.w,this.orientationOut_},g.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),Q()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ)},g.prototype.onDeviceOrientation_=function(r){this._deviceOrientationQ=this._deviceOrientationQ||new Pe;var a=r.alpha,o=r.beta,n=r.gamma;a=(a||0)*ga/180,o=(o||0)*ga/180,n=(n||0)*ga/180,this._deviceOrientationQ.setFromEulerYXZ(o,a,-n)},g.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},g.prototype.updateDeviceMotion_=function(r){var a=r.accelerationIncludingGravity,o=r.rotationRate,n=r.timeStamp/1e3,t=n-this.previousTimestampS;return 0>t?(V("fusion-pose-sensor:invalid:non-monotonic","Invalid timestamps detected: non-monotonic timestamp from devicemotion"),void(this.previousTimestampS=n)):.001>=t||1<t?(V("fusion-pose-sensor:invalid:outside-threshold","Invalid timestamps detected: Timestamp from devicemotion outside expected range."),void(this.previousTimestampS=n)):(this.accelerometer.set(-a.x,-a.y,-a.z),Be()?this.gyroscope.set(-o.beta,o.alpha,o.gamma):this.gyroscope.set(o.alpha,o.beta,o.gamma),this.isDeviceMotionInRadians||this.gyroscope.multiplyScalar(ga/180),this.filter.addAccelMeasurement(this.accelerometer,n),this.filter.addGyroMeasurement(this.gyroscope,n),void(this.previousTimestampS=n))},g.prototype.onOrientationChange_=function(){this.setScreenTransform_()},g.prototype.onMessage_=function(t){var r=t.data;r&&r.type&&"devicemotion"===r.type.toLowerCase()&&this.updateDeviceMotion_(r.deviceMotionEvent)},g.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new Ae(0,0,1),-ga/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new Ae(0,0,1),ga/2);}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},g.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),this.onDeviceOrientationCallback_=this.onDeviceOrientation_.bind(this),h()&&P()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),this.isWithoutDeviceMotion?window.addEventListener("deviceorientation",this.onDeviceOrientationCallback_):window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},g.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("deviceorientation",this.onDeviceOrientationCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)};var ae=new Ae(1,0,0),ge=new Ae(0,0,1),oe={};screen.orientation?oe=screen.orientation:screen.msOrientation?oe=screen.msOrientation:Object.defineProperty(oe,"angle",{get:function(){return window.orientation||0}});var Le=new Pe;Le.setFromAxisAngle(ae,-ga/2),Le.multiply(new Pe().setFromAxisAngle(ge,ga/2));var Ie=function(){function t(r){be(this,t),this.config=r,this.sensor=null,this.fusionSensor=null,this._out=new Float32Array(4),this.api=null,this.errors=[],this._sensorQ=new Pe,this._worldToScreenQ=new Pe,this._outQ=new Pe,this._onSensorRead=this._onSensorRead.bind(this),this._onSensorError=this._onSensorError.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onOrientationChange(),this.init()}return w(t,[{key:"init",value:function(){var t=null;try{t=new RelativeOrientationSensor({frequency:60}),t.addEventListener("error",this._onSensorError)}catch(t){this.errors.push(t),"SecurityError"===t.name?(console.error("Cannot construct sensors due to the Feature Policy"),console.warn("Attempting to fall back using \"devicemotion\"; however this will fail in the future without correct permissions."),this.useDeviceMotion()):"ReferenceError"===t.name?this.useDeviceMotion():console.error(t)}t&&(this.api="sensor",this.sensor=t,this.sensor.addEventListener("reading",this._onSensorRead),this.sensor.start()),window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"useDeviceMotion",value:function(){this.api="devicemotion",this.fusionSensor=new g(this.config.K_FILTER,this.config.PREDICTION_TIME_S,this.config.YAW_ONLY,this.config.DEBUG)}},{key:"getOrientation",value:function(){if(this.fusionSensor)return this.fusionSensor.getOrientation();if(!this.sensor||!this.sensor.quaternion)return this._out[0]=this._out[1]=this._out[2]=0,this._out[3]=1,this._out;var t=this.sensor.quaternion;this._sensorQ.set(t[0],t[1],t[2],t[3]);var r=this._outQ;return r.copy(Le),r.multiply(this._sensorQ),r.multiply(this._worldToScreenQ),this.config.YAW_ONLY&&(r.x=r.z=0,r.normalize()),this._out[0]=r.x,this._out[1]=r.y,this._out[2]=r.z,this._out[3]=r.w,this._out}},{key:"_onSensorError",value:function(t){this.errors.push(t.error),"NotAllowedError"===t.error.name?console.error("Permission to access sensor was denied"):"NotReadableError"===t.error.name?console.error("Sensor could not be read"):console.error(t.error)}},{key:"_onSensorRead",value:function(){}},{key:"_onOrientationChange",value:function(){var t=-oe.angle*ga/180;this._worldToScreenQ.setFromAxisAngle(ge,t)}}]),t}();me.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var r=this.overlay.querySelector("img"),a=r.style;Q()?(a.width="20%",a.marginLeft="40%",a.marginTop="3%"):(a.width="50%",a.marginLeft="25%",a.marginTop="25%")},me.prototype.hide=function(){this.overlay.style.display="none"},me.prototype.showTemporarily=function(t,r){this.show(r),this.timer=setTimeout(this.hide.bind(this),t)},me.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},me.prototype.update=function(){this.disableShowTemporarily(),!Q()&&_()?this.show():this.hide()},me.prototype.loadIcon_=function(){this.icon=l("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")};var je="CardboardV1",Te="WEBVR_CARDBOARD_VIEWER";L.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},L.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},L.prototype.getCurrentViewer=function(){return s.Viewers[this.selectedKey]},L.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},L.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},L.prototype.fireOnChange_=function(t){for(var r=0;r<this.onChangeCallbacks_.length;r++)this.onChangeCallbacks_[r](t)},L.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!s.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(s.Viewers[this.selectedKey]);try{localStorage.setItem(Te,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()},L.prototype.createDialog_=function(r){var a=document.createElement("div");a.classList.add("webvr-polyfill-viewer-selector"),a.style.display="none";var o=document.createElement("div"),n=o.style;n.position="fixed",n.left=0,n.top=0,n.width="100%",n.height="100%",n.background="rgba(0, 0, 0, 0.3)",o.addEventListener("click",this.hide.bind(this));var t=document.createElement("div"),n=t.style;for(var i in n.boxSizing="border-box",n.position="fixed",n.top="24px",n.left="50%",n.marginLeft="-140px",n.width="280px",n.padding="24px",n.overflow="hidden",n.background="#fafafa",n.fontFamily="'Roboto', sans-serif",n.boxShadow="0px 5px 20px #666",t.appendChild(this.createH1_("Select your viewer")),r)t.appendChild(this.createChoice_(i,r[i].label));return t.appendChild(this.createButton_("Save",this.onSave_.bind(this))),a.appendChild(o),a.appendChild(t),a},L.prototype.createH1_=function(t){var r=document.createElement("h1"),a=r.style;return a.color="black",a.fontSize="20px",a.fontWeight="bold",a.marginTop=0,a.marginBottom="24px",r.innerHTML=t,r},L.prototype.createChoice_=function(r,a){var o=document.createElement("div");o.style.marginTop="8px",o.style.color="black";var n=document.createElement("input");n.style.fontSize="30px",n.setAttribute("id",r),n.setAttribute("type","radio"),n.setAttribute("value",r),n.setAttribute("name","field");var t=document.createElement("label");return t.style.marginLeft="4px",t.setAttribute("for",r),t.innerHTML=a,o.appendChild(n),o.appendChild(t),o},L.prototype.createButton_=function(r,a){var o=document.createElement("button");o.innerHTML=r;var n=o.style;return n.float="right",n.textTransform="uppercase",n.color="#1094f7",n.fontSize="14px",n.letterSpacing=0,n.border=0,n.background="none",n.marginTop="16px",o.addEventListener("click",a),o};var ce=("undefined"==typeof window?void 0!==j||"undefined"!=typeof self&&self:window,function(t,r){return r={exports:{}},t(r,r.exports),r.exports}(function(t){!function(r,a){t.exports=a()}(0,function(){return function(r){function a(n){if(o[n])return o[n].exports;var i=o[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}var o={};return a.m=r,a.c=o,a.d=function(r,o,n){a.o(r,o)||Object.defineProperty(r,o,{configurable:!1,enumerable:!0,get:n})},a.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(r,"a",r),r},a.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},a.p="",a(a.s=0)}([function(a,o,n){function i(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}var t=function(){function r(r,a){for(var o=0,n;o<a.length;o++)n=a[o],n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}return function(a,o,n){return o&&r(a.prototype,o),n&&r(a,n),a}}(),l=n(1),s="undefined"!=typeof navigator&&10>parseFloat((""+(/CPU.*OS ([0-9_]{3,4})[0-9_]{0,1}|(CPU like).*AppleWebKit.*Mobile/i.exec(navigator.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))&&!window.MSStream,r=function(){function r(){i(this,r),s?this.noSleepTimer=null:(this.noSleepVideo=document.createElement("video"),this.noSleepVideo.setAttribute("playsinline",""),this.noSleepVideo.setAttribute("src",l),this.noSleepVideo.addEventListener("timeupdate",function(){.5<this.noSleepVideo.currentTime&&(this.noSleepVideo.currentTime=Math.random())}.bind(this)))}return t(r,[{key:"enable",value:function(){s?(this.disable(),this.noSleepTimer=window.setInterval(function(){window.location.href="/",window.setTimeout(window.stop,0)},15e3)):this.noSleepVideo.play()}},{key:"disable",value:function(){s?this.noSleepTimer&&(window.clearInterval(this.noSleepTimer),this.noSleepTimer=null):this.noSleepVideo.pause()}}]),r}();a.exports=r},function(t){t.exports="data:video/mp4;base64,AAAAIGZ0eXBtcDQyAAACAGlzb21pc28yYXZjMW1wNDEAAAAIZnJlZQAACKBtZGF0AAAC8wYF///v3EXpvebZSLeWLNgg2SPu73gyNjQgLSBjb3JlIDE0MiByMjQ3OSBkZDc5YTYxIC0gSC4yNjQvTVBFRy00IEFWQyBjb2RlYyAtIENvcHlsZWZ0IDIwMDMtMjAxNCAtIGh0dHA6Ly93d3cudmlkZW9sYW4ub3JnL3gyNjQuaHRtbCAtIG9wdGlvbnM6IGNhYmFjPTEgcmVmPTEgZGVibG9jaz0xOjA6MCBhbmFseXNlPTB4MToweDExMSBtZT1oZXggc3VibWU9MiBwc3k9MSBwc3lfcmQ9MS4wMDowLjAwIG1peGVkX3JlZj0wIG1lX3JhbmdlPTE2IGNocm9tYV9tZT0xIHRyZWxsaXM9MCA4eDhkY3Q9MCBjcW09MCBkZWFkem9uZT0yMSwxMSBmYXN0X3Bza2lwPTEgY2hyb21hX3FwX29mZnNldD0wIHRocmVhZHM9NiBsb29rYWhlYWRfdGhyZWFkcz0xIHNsaWNlZF90aHJlYWRzPTAgbnI9MCBkZWNpbWF0ZT0xIGludGVybGFjZWQ9MCBibHVyYXlfY29tcGF0PTAgY29uc3RyYWluZWRfaW50cmE9MCBiZnJhbWVzPTMgYl9weXJhbWlkPTIgYl9hZGFwdD0xIGJfYmlhcz0wIGRpcmVjdD0xIHdlaWdodGI9MSBvcGVuX2dvcD0wIHdlaWdodHA9MSBrZXlpbnQ9MzAwIGtleWludF9taW49MzAgc2NlbmVjdXQ9NDAgaW50cmFfcmVmcmVzaD0wIHJjX2xvb2thaGVhZD0xMCByYz1jcmYgbWJ0cmVlPTEgY3JmPTIwLjAgcWNvbXA9MC42MCBxcG1pbj0wIHFwbWF4PTY5IHFwc3RlcD00IHZidl9tYXhyYXRlPTIwMDAwIHZidl9idWZzaXplPTI1MDAwIGNyZl9tYXg9MC4wIG5hbF9ocmQ9bm9uZSBmaWxsZXI9MCBpcF9yYXRpbz0xLjQwIGFxPTE6MS4wMACAAAAAOWWIhAA3//p+C7v8tDDSTjf97w55i3SbRPO4ZY+hkjD5hbkAkL3zpJ6h/LR1CAABzgB1kqqzUorlhQAAAAxBmiQYhn/+qZYADLgAAAAJQZ5CQhX/AAj5IQADQGgcIQADQGgcAAAACQGeYUQn/wALKCEAA0BoHAAAAAkBnmNEJ/8ACykhAANAaBwhAANAaBwAAAANQZpoNExDP/6plgAMuSEAA0BoHAAAAAtBnoZFESwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBnqVEJ/8ACykhAANAaBwAAAAJAZ6nRCf/AAsoIQADQGgcIQADQGgcAAAADUGarDRMQz/+qZYADLghAANAaBwAAAALQZ7KRRUsK/8ACPkhAANAaBwAAAAJAZ7pRCf/AAsoIQADQGgcIQADQGgcAAAACQGe60Qn/wALKCEAA0BoHAAAAA1BmvA0TEM//qmWAAy5IQADQGgcIQADQGgcAAAAC0GfDkUVLCv/AAj5IQADQGgcAAAACQGfLUQn/wALKSEAA0BoHCEAA0BoHAAAAAkBny9EJ/8ACyghAANAaBwAAAANQZs0NExDP/6plgAMuCEAA0BoHAAAAAtBn1JFFSwr/wAI+SEAA0BoHCEAA0BoHAAAAAkBn3FEJ/8ACyghAANAaBwAAAAJAZ9zRCf/AAsoIQADQGgcIQADQGgcAAAADUGbeDRMQz/+qZYADLkhAANAaBwAAAALQZ+WRRUsK/8ACPghAANAaBwhAANAaBwAAAAJAZ+1RCf/AAspIQADQGgcAAAACQGft0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bm7w0TEM//qmWAAy4IQADQGgcAAAAC0Gf2kUVLCv/AAj5IQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHAAAAAkBn/tEJ/8ACykhAANAaBwAAAANQZvgNExDP/6plgAMuSEAA0BoHCEAA0BoHAAAAAtBnh5FFSwr/wAI+CEAA0BoHAAAAAkBnj1EJ/8ACyghAANAaBwhAANAaBwAAAAJAZ4/RCf/AAspIQADQGgcAAAADUGaJDRMQz/+qZYADLghAANAaBwAAAALQZ5CRRUsK/8ACPkhAANAaBwhAANAaBwAAAAJAZ5hRCf/AAsoIQADQGgcAAAACQGeY0Qn/wALKSEAA0BoHCEAA0BoHAAAAA1Bmmg0TEM//qmWAAy5IQADQGgcAAAAC0GehkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGepUQn/wALKSEAA0BoHAAAAAkBnqdEJ/8ACyghAANAaBwAAAANQZqsNExDP/6plgAMuCEAA0BoHCEAA0BoHAAAAAtBnspFFSwr/wAI+SEAA0BoHAAAAAkBnulEJ/8ACyghAANAaBwhAANAaBwAAAAJAZ7rRCf/AAsoIQADQGgcAAAADUGa8DRMQz/+qZYADLkhAANAaBwhAANAaBwAAAALQZ8ORRUsK/8ACPkhAANAaBwAAAAJAZ8tRCf/AAspIQADQGgcIQADQGgcAAAACQGfL0Qn/wALKCEAA0BoHAAAAA1BmzQ0TEM//qmWAAy4IQADQGgcAAAAC0GfUkUVLCv/AAj5IQADQGgcIQADQGgcAAAACQGfcUQn/wALKCEAA0BoHAAAAAkBn3NEJ/8ACyghAANAaBwhAANAaBwAAAANQZt4NExC//6plgAMuSEAA0BoHAAAAAtBn5ZFFSwr/wAI+CEAA0BoHCEAA0BoHAAAAAkBn7VEJ/8ACykhAANAaBwAAAAJAZ+3RCf/AAspIQADQGgcAAAADUGbuzRMQn/+nhAAYsAhAANAaBwhAANAaBwAAAAJQZ/aQhP/AAspIQADQGgcAAAACQGf+UQn/wALKCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHCEAA0BoHAAACiFtb292AAAAbG12aGQAAAAA1YCCX9WAgl8AAAPoAAAH/AABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAAGGlvZHMAAAAAEICAgAcAT////v7/AAAF+XRyYWsAAABcdGtoZAAAAAPVgIJf1YCCXwAAAAEAAAAAAAAH0AAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAygAAAMoAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAB9AAABdwAAEAAAAABXFtZGlhAAAAIG1kaGQAAAAA1YCCX9WAgl8AAV+QAAK/IFXEAAAAAAAtaGRscgAAAAAAAAAAdmlkZQAAAAAAAAAAAAAAAFZpZGVvSGFuZGxlcgAAAAUcbWluZgAAABR2bWhkAAAAAQAAAAAAAAAAAAAAJGRpbmYAAAAcZHJlZgAAAAAAAAABAAAADHVybCAAAAABAAAE3HN0YmwAAACYc3RzZAAAAAAAAAABAAAAiGF2YzEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAygDKAEgAAABIAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAY//8AAAAyYXZjQwFNQCj/4QAbZ01AKOyho3ySTUBAQFAAAAMAEAAr8gDxgxlgAQAEaO+G8gAAABhzdHRzAAAAAAAAAAEAAAA8AAALuAAAABRzdHNzAAAAAAAAAAEAAAABAAAB8GN0dHMAAAAAAAAAPAAAAAEAABdwAAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAADqYAAAAAQAAF3AAAAABAAAAAAAAAAEAAAu4AAAAAQAAOpgAAAABAAAXcAAAAAEAAAAAAAAAAQAAC7gAAAABAAA6mAAAAAEAABdwAAAAAQAAAAAAAAABAAALuAAAAAEAAC7gAAAAAQAAF3AAAAABAAAAAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAEEc3RzegAAAAAAAAAAAAAAPAAAAzQAAAAQAAAADQAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAAPAAAADQAAAA0AAAARAAAADwAAAA0AAAANAAAAEQAAAA8AAAANAAAADQAAABEAAAANAAAADQAAAQBzdGNvAAAAAAAAADwAAAAwAAADZAAAA3QAAAONAAADoAAAA7kAAAPQAAAD6wAAA/4AAAQXAAAELgAABEMAAARcAAAEbwAABIwAAAShAAAEugAABM0AAATkAAAE/wAABRIAAAUrAAAFQgAABV0AAAVwAAAFiQAABaAAAAW1AAAFzgAABeEAAAX+AAAGEwAABiwAAAY/AAAGVgAABnEAAAaEAAAGnQAABrQAAAbPAAAG4gAABvUAAAcSAAAHJwAAB0AAAAdTAAAHcAAAB4UAAAeeAAAHsQAAB8gAAAfjAAAH9gAACA8AAAgmAAAIQQAACFQAAAhnAAAIhAAACJcAAAMsdHJhawAAAFx0a2hkAAAAA9WAgl/VgIJfAAAAAgAAAAAAAAf8AAAAAAAAAAAAAAABAQAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAACsm1kaWEAAAAgbWRoZAAAAADVgIJf1YCCXwAArEQAAWAAVcQAAAAAACdoZGxyAAAAAAAAAABzb3VuAAAAAAAAAAAAAAAAU3RlcmVvAAAAAmNtaW5mAAAAEHNtaGQAAAAAAAAAAAAAACRkaW5mAAAAHGRyZWYAAAAAAAAAAQAAAAx1cmwgAAAAAQAAAidzdGJsAAAAZ3N0c2QAAAAAAAAAAQAAAFdtcDRhAAAAAAAAAAEAAAAAAAAAAAACABAAAAAArEQAAAAAADNlc2RzAAAAAAOAgIAiAAIABICAgBRAFQAAAAADDUAAAAAABYCAgAISEAaAgIABAgAAABhzdHRzAAAAAAAAAAEAAABYAAAEAAAAABxzdHNjAAAAAAAAAAEAAAABAAAAAQAAAAEAAAAUc3RzegAAAAAAAAAGAAAAWAAAAXBzdGNvAAAAAAAAAFgAAAOBAAADhwAAA5oAAAOtAAADswAAA8oAAAPfAAAD5QAAA/gAAAQLAAAEEQAABCgAAAQ9AAAEUAAABFYAAARpAAAEgAAABIYAAASbAAAErgAABLQAAATHAAAE3gAABPMAAAT5AAAFDAAABR8AAAUlAAAFPAAABVEAAAVXAAAFagAABX0AAAWDAAAFmgAABa8AAAXCAAAFyAAABdsAAAXyAAAF+AAABg0AAAYgAAAGJgAABjkAAAZQAAAGZQAABmsAAAZ+AAAGkQAABpcAAAauAAAGwwAABskAAAbcAAAG7wAABwYAAAcMAAAHIQAABzQAAAc6AAAHTQAAB2QAAAdqAAAHfwAAB5IAAAeYAAAHqwAAB8IAAAfXAAAH3QAAB/AAAAgDAAAICQAACCAAAAg1AAAIOwAACE4AAAhhAAAIeAAACH4AAAiRAAAIpAAACKoAAAiwAAAItgAACLwAAAjCAAAAFnVkdGEAAAAObmFtZVN0ZXJlbwAAAHB1ZHRhAAAAaG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAO2lsc3QAAAAzqXRvbwAAACtkYXRhAAAAAQAAAABIYW5kQnJha2UgMC4xMC4yIDIwMTUwNjExMDA="}])})})),Ee=function(t){return t&&t.__esModule?t.default:t}(ce),we=1e3,ye=[0,0,0.5,1],le=[0.5,0,0.5,1],ze=window.requestAnimationFrame,he=window.cancelAnimationFrame;ve.prototype.getFrameData=function(t){return F(t,this._getPose(),this)},ve.prototype.getPose=function(){return H("VRDisplay.prototype.getPose","VRDisplay.prototype.getFrameData"),this._getPose()},ve.prototype.resetPose=function(){return H("VRDisplay.prototype.resetPose"),this._resetPose()},ve.prototype.getImmediatePose=function(){return H("VRDisplay.prototype.getImmediatePose","VRDisplay.prototype.getFrameData"),this._getPose()},ve.prototype.requestAnimationFrame=function(t){return ze(t)},ve.prototype.cancelAnimationFrame=function(t){return he(t)},ve.prototype.wrapForFullscreen=function(r){if(h())return r;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var a=["height: "+O(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",a.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==r)return this.fullscreenWrapper_;if(this.fullscreenElement_&&(this.originalParent_?this.originalParent_.appendChild(this.fullscreenElement_):this.fullscreenElement_.parentElement.removeChild(this.fullscreenElement_)),this.fullscreenElement_=r,this.originalParent_=r.parentElement,this.originalParent_||document.body.appendChild(r),!this.fullscreenWrapper_.parentElement){var o=this.fullscreenElement_.parentElement;o.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),o.removeChild(this.fullscreenElement_)}this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var n=this;return function(){if(n.fullscreenElement_){var t=["position: absolute","top: 0","left: 0","width: "+C(screen.width,screen.height)+"px","height: "+O(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];n.fullscreenElement_.setAttribute("style",t.join("; ")+";")}}(),this.fullscreenWrapper_},ve.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var r=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),this.originalParent_===r?r.insertBefore(t,this.fullscreenWrapper_):this.originalParent_&&this.originalParent_.appendChild(t),r.removeChild(this.fullscreenWrapper_),t}},ve.prototype.requestPresent=function(o){var l=this.isPresenting,d=this;return o instanceof Array||(H("VRDisplay.prototype.requestPresent with non-array argument","an array of VRLayers as the first argument"),o=[o]),new Promise(function(i,t){if(!d.capabilities.canPresent)return void t(new Error("VRDisplay is not capable of presenting."));if(0==o.length||o.length>d.capabilities.maxLayers)return void t(new Error("Invalid number of layers."));var c=o[0];if(!c.source)return void i();var s=c.leftBounds||ye,r=c.rightBounds||le;if(l){var p=d.layer_;p.source!==c.source&&(p.source=c.source);for(var m=0;4>m;m++)p.leftBounds[m]=s[m],p.rightBounds[m]=r[m];return d.wrapForFullscreen(d.layer_.source),d.updatePresent_(),void i()}if(d.layer_={predistorted:c.predistorted,source:c.source,leftBounds:s.slice(0),rightBounds:r.slice(0)},d.waitingForPresent_=!1,d.layer_&&d.layer_.source){var n=d.wrapForFullscreen(d.layer_.source),u=function(){var t=B();d.isPresenting=n===t,d.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),d.waitingForPresent_=!1,d.beginPresent_(),i()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),d.removeFullscreenWrapper(),d.disableWakeLock(),d.endPresent_(),d.removeFullscreenListeners_()),d.fireVRDisplayPresentChange_()},a=function(){d.waitingForPresent_&&(d.removeFullscreenWrapper(),d.removeFullscreenListeners_(),d.disableWakeLock(),d.waitingForPresent_=!1,d.isPresenting=!1,t(new Error("Unable to present.")))};d.addFullscreenListeners_(n,u,a),k(n)?(d.enableWakeLock(),d.waitingForPresent_=!0):(h()||_e())&&(d.enableWakeLock(),d.isPresenting=!0,d.beginPresent_(),d.fireVRDisplayPresentChange_(),i())}d.waitingForPresent_||h()||(U(),t(new Error("Unable to present.")))})},ve.prototype.exitPresent=function(){var r=this.isPresenting,a=this;return this.isPresenting=!1,this.layer_=null,this.disableWakeLock(),new Promise(function(o,n){r?(!U()&&h()&&(a.endPresent_(),a.fireVRDisplayPresentChange_()),_e()&&(a.removeFullscreenWrapper(),a.removeFullscreenListeners_(),a.endPresent_(),a.fireVRDisplayPresentChange_()),o()):n(new Error("Was not presenting to VRDisplay."))})},ve.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},ve.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},ve.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},ve.prototype.addFullscreenListeners_=function(t,r,a){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=t,this.fullscreenChangeHandler_=r,this.fullscreenErrorHandler_=a,r&&(document.fullscreenEnabled?t.addEventListener("fullscreenchange",r,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenchange",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",r,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenchange",r,!1)),a&&(document.fullscreenEnabled?t.addEventListener("fullscreenerror",a,!1):document.webkitFullscreenEnabled?t.addEventListener("webkitfullscreenerror",a,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",a,!1):document.msFullscreenEnabled&&t.addEventListener("msfullscreenerror",a,!1))},ve.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var t=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var r=this.fullscreenChangeHandler_;t.removeEventListener("fullscreenchange",r,!1),t.removeEventListener("webkitfullscreenchange",r,!1),document.removeEventListener("mozfullscreenchange",r,!1),t.removeEventListener("msfullscreenchange",r,!1)}if(this.fullscreenErrorHandler_){var a=this.fullscreenErrorHandler_;t.removeEventListener("fullscreenerror",a,!1),t.removeEventListener("webkitfullscreenerror",a,!1),document.removeEventListener("mozfullscreenerror",a,!1),t.removeEventListener("msfullscreenerror",a,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},ve.prototype.enableWakeLock=function(){this.wakelock_&&this.wakelock_.enable()},ve.prototype.disableWakeLock=function(){this.wakelock_&&this.wakelock_.disable()},ve.prototype.beginPresent_=function(){},ve.prototype.endPresent_=function(){},ve.prototype.submitFrame=function(){},ve.prototype.getEyeParameters=function(){return null};var Oe={MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1},xe={LEFT:"left",RIGHT:"right"};return c.prototype=Object.create(ve.prototype),c.prototype._getPose=function(){return{position:null,orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},c.prototype._resetPose=function(){this.poseSensor_.resetPose&&this.poseSensor_.resetPose()},c.prototype._getFieldOfView=function(t){var r;if(t==xe.LEFT)r=this.deviceInfo_.getFieldOfViewLeftEye();else{if(t!=xe.RIGHT)return console.error("Invalid eye provided: %s",t),null;r=this.deviceInfo_.getFieldOfViewRightEye()}return r},c.prototype._getEyeOffset=function(t){var r;if(t==xe.LEFT)r=[.5*-this.deviceInfo_.viewer.interLensDistance,0,0];else{if(t!=xe.RIGHT)return console.error("Invalid eye provided: %s",t),null;r=[.5*this.deviceInfo_.viewer.interLensDistance,0,0]}return r},c.prototype.getEyeParameters=function(r){var a=this._getEyeOffset(r),o=this._getFieldOfView(r),n={offset:a,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_};return Object.defineProperty(n,"fieldOfView",{enumerable:!0,get:function(){return H("VRFieldOfView","VRFrameData's projection matrices"),o}}),n},c.prototype.onDeviceParamsUpdated_=function(t){this.config.DEBUG&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},c.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},c.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?this.config.CARDBOARD_UI_DISABLED||(t.canvas.width=f()*this.bufferScale_,t.canvas.height=m()*this.bufferScale_,this.cardboardUI_=new i(t)):(this.config.CARDBOARD_UI_DISABLED||(this.cardboardUI_=new i(t)),this.distorter_=new pe(t,this.cardboardUI_,this.config.BUFFER_SCALE,this.config.DIRTY_SUBMIT_FRAME_BINDINGS),this.distorter_.updateDeviceInfo(this.deviceInfo_)),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(Q()&&_()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},c.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},c.prototype.updatePresent_=function(){this.endPresent_(),this.beginPresent_()},c.prototype.submitFrame=function(){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var t=this.layer_.source.getContext("webgl").canvas;t.width==this.lastWidth&&t.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=t.width,this.lastHeight=t.height,this.cardboardUI_.render()}},c.prototype.onOrientationChange_=function(){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},c.prototype.onResize_=function(){if(this.layer_){var t=this.layer_.source.getContext("webgl");t.canvas.setAttribute("style",["position: absolute","top: 0","left: 0","width: 100vw","height: 100vh","border: 0","margin: 0","padding: 0px","box-sizing: content-box"].join("; ")+";"),G(t.canvas)}},c.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},c.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},c.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},c.VRDisplay=ve,c}()}()}),r=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(s),u={PROVIDE_MOBILE_VRDISPLAY:!0,GET_VR_DISPLAYS_TIMEOUT:1e3,MOBILE_WAKE_LOCK:!0,DEBUG:!1,DPDB_URL:"https://dpdb.webvr.rocks/dpdb.json",K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1};d.prototype.getPolyfillDisplays=function(){if(this._polyfillDisplaysPopulated)return this.polyfillDisplays;if(i()){var t=new r({MOBILE_WAKE_LOCK:this.config.MOBILE_WAKE_LOCK,DEBUG:this.config.DEBUG,DPDB_URL:this.config.DPDB_URL,CARDBOARD_UI_DISABLED:this.config.CARDBOARD_UI_DISABLED,K_FILTER:this.config.K_FILTER,PREDICTION_TIME_S:this.config.PREDICTION_TIME_S,TOUCH_PANNER_DISABLED:this.config.TOUCH_PANNER_DISABLED,ROTATE_INSTRUCTIONS_DISABLED:this.config.ROTATE_INSTRUCTIONS_DISABLED,YAW_ONLY:this.config.YAW_ONLY,BUFFER_SCALE:this.config.BUFFER_SCALE,DIRTY_SUBMIT_FRAME_BINDINGS:this.config.DIRTY_SUBMIT_FRAME_BINDINGS});this.polyfillDisplays.push(t)}return this._polyfillDisplaysPopulated=!0,this.polyfillDisplays},d.prototype.enable=function(){if(this.enabled=!0,this.hasNative&&this.native.VRFrameData){var a=this.native.VRFrameData,o=new this.native.VRFrameData,n=this.native.VRDisplay.prototype.getFrameData;window.VRDisplay.prototype.getFrameData=function(r){return r instanceof a?void n.call(this,r):void(n.call(this,o),r.pose=o.pose,p(o.leftProjectionMatrix,r.leftProjectionMatrix),p(o.rightProjectionMatrix,r.rightProjectionMatrix),p(o.leftViewMatrix,r.leftViewMatrix),p(o.rightViewMatrix,r.rightViewMatrix))}}navigator.getVRDisplays=this.getVRDisplays.bind(this),window.VRDisplay=r.VRDisplay,window.VRFrameData=r.VRFrameData},d.prototype.getVRDisplays=function(){var r=this,a=this.config;if(!this.hasNative)return Promise.resolve(this.getPolyfillDisplays());var o=this.native.getVRDisplays.call(navigator),n=new Promise(function(t){i=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},a.GET_VR_DISPLAYS_TIMEOUT)}),i;return c([o,n]).then(function(t){return clearTimeout(i),0<t.length?t:r.getPolyfillDisplays()})},d.version="0.10.5",d.VRFrameData=r.VRFrameData,d.VRDisplay=r.VRDisplay;var m=Object.freeze({default:d});return void 0!==j&&j.window&&(j.document||(j.document=j.window.document),j.navigator||(j.navigator=j.window.navigator)),m&&d||m})}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],47:[function(t,r){function a(a,o,n,r){var t=a.indexOf(o,n);return-1===t||t>r?r:t}function o(t){return n.test(t)}function s(l,d,n,r,t){for(var i=[],a=n,o=n;o<r&&o<d.length;o++){var s=d.charAt(o),m=c.test(s);if(m||o===r-1){var u=m?o:o+1,g=l(d,a,u,t);i.push(g),a=o+1}}return i}function l(l,d,n,r,t,m){var y=[],A=t;for("nowrap"===m&&(A=g);n<r&&n<d.length;){for(var s=a(d,i,n,r);n<s&&o(d.charAt(n));)n++;var h=l(d,n,s,A),u=n+(h.end-h.start),f=u+i.length;if(u<s){for(;u>n&&!o(d.charAt(u));)u--;if(u===n)f>n+i.length&&f--,u=f;else for(f=u;u>n&&o(d.charAt(u-i.length));)u--}if(u>=n){var p=l(d,n,u,A);y.push(p)}n=f}return y}function d(a,o,i,r){return{start:o,end:o+O(r,i-o)}}var c=/\n/,i="\n",n=/\s/;r.exports=function(t,a){return r.exports.lines(t,a).map(function(r){return t.substring(r.start,r.end)}).join("\n")},r.exports.lines=function(c,p){if(p=p||{},0===p.width&&"nowrap"!==p.mode)return[];c=c||"";var n="number"==typeof p.width?p.width:g,r=C(0,p.start||0),t="number"==typeof p.end?p.end:c.length,i=p.mode,a=p.measure||d;return"pre"===i?s(a,c,r,t,n):l(a,c,r,t,n,i)}},{}],48:[function(t,r){"use strict";function g(r){for(var a in r)if(r.hasOwnProperty(a))return!1;return!0}function a(a,o,t){var r=a;return s(o)?(t=o,"string"==typeof a&&(r={uri:a})):r=l(o,{uri:a}),r.callback=t,r}function y(n,i,t){return i=a(n,i,t),o(i)}function o(A){function M(){var t;if(t=a.response?a.response:a.responseText||n(a),T)try{t=JSON.parse(t)}catch(t){}return t}function t(t){return clearTimeout(L),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,b)}function r(){if(!u){var r;clearTimeout(L),r=A.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var d=b,n=null;return 0===r?n=new Error("Internal XMLHttpRequest Error"):(d={body:M(),statusCode:r,method:E,headers:{},url:x,rawRequest:a},a.getAllResponseHeaders&&(d.headers=c(a.getAllResponseHeaders()))),s(n,d,d.body)}}if(void 0===A.callback)throw new Error("callback argument missing");var o=!1,s=function(a,t,r){o||(o=!0,A.callback(a,t,r))},a=A.xhr||null;a||(a=A.cors||A.useXDR?new y.XDomainRequest:new y.XMLHttpRequest);var x=a.url=A.uri||A.url,E=a.method=A.method||"GET",v=A.body||A.data,f=a.headers=A.headers||{},m=!!A.sync,T=!1,b={body:void 0,headers:{},statusCode:0,method:E,url:x,rawRequest:a},h,u,L;if("json"in A&&!1!==A.json&&(T=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==E&&"HEAD"!==E&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),v=JSON.stringify(!0===A.json?v:A.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(r,0)},a.onload=r,a.onerror=t,a.onprogress=function(){},a.onabort=function(){u=!0},a.ontimeout=t,a.open(E,x,!m,A.username,A.password),m||(a.withCredentials=!!A.withCredentials),!m&&0<A.timeout&&(L=setTimeout(function(){if(!u){u=!0,a.abort("timeout");var r=new Error("XMLHttpRequest timeout");r.code="ETIMEDOUT",t(r)}},A.timeout)),a.setRequestHeader)for(h in f)f.hasOwnProperty(h)&&a.setRequestHeader(h,f[h]);else if(A.headers&&!g(A.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in A&&(a.responseType=A.responseType),"beforeSend"in A&&"function"==typeof A.beforeSend&&A.beforeSend(a),a.send(v||null),a}function n(r){try{if("document"===r.responseType)return r.responseXML;var a=r.responseXML&&"parsererror"===r.responseXML.documentElement.nodeName;if(""===r.responseType&&!a)return r.responseXML}catch(t){}return null}var i=t("global/window"),s=t("is-function"),c=t("parse-headers"),l=t("xtend");r.exports=y,y.XMLHttpRequest=i.XMLHttpRequest||function(){},y.XDomainRequest="withCredentials"in new y.XMLHttpRequest?y.XMLHttpRequest:i.XDomainRequest,function(a,o){for(var t=0;t<a.length;t++)o(a[t])}(["get","put","post","patch","head","delete"],function(i){y["delete"===i?"del":i]=function(s,t,r){return t=a(s,t,r),t.method=i.toUpperCase(),o(t)}})},{"global/window":17,"is-function":21,"parse-headers":31,xtend:50}],49:[function(t,r){r.exports=function(){return void 0===self.DOMParser?void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var r=new self.ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(t),r}:function(t){var r=document.createElement("div");return r.innerHTML=t,r}:function(t){return new self.DOMParser().parseFromString(t,"application/xml")}}()},{}],50:[function(t,r){r.exports=function(){for(var o={},r=0,i;r<arguments.length;r++)for(var t in i=arguments[r],i)a.call(i,t)&&(o[t]=i[t]);return o};var a=Object.prototype.hasOwnProperty},{}],51:[function(t,r){r.exports={name:"aframe",version:"0.8.2",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"node scripts/updateVersionLog.js && npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe-v0.8.2.js.map > dist/aframe-v0.8.2.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe-v0.8.2.min.js.map --output dist/aframe-v0.8.2.min.js.map] -o dist/aframe-v0.8.2.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prepush:"node scripts/testOnlyCheck.js",prerelease:"node scripts/release.js 0.7.1 0.8.0",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"github:supermedium/three.js#r90fixMTLLoader","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.10.5"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"github:sukima/markserv#feature/fix-broken-websoketio-link",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],52:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three");r.exports.Component=a("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},spectator:{default:!1},zoom:{default:1,min:0}},init:function(){var r=this.el,t;t=this.camera=new o.PerspectiveCamera,r.setObject3D("camera",t)},update:function(r){var o=this.data,t=this.camera;t.aspect=o.aspect||window.innerWidth/window.innerHeight,t.far=o.far,t.fov=o.fov,t.near=o.near,t.zoom=o.zoom,t.updateProjectionMatrix(),this.updateActiveCamera(r),this.updateSpectatorCamera(r)},updateActiveCamera:function(o){var n=this.data,t=this.el,a=this.system;o&&o.active===n.active||n.spectator||(n.active&&a.activeCameraEl!==t?a.setActiveCamera(t):n.active||a.activeCameraEl!==t||a.disableActiveCamera())},updateSpectatorCamera:function(o){var n=this.data,t=this.el,a=this.system;o&&o.spectator===n.spectator||(n.spectator&&a.spectatorCameraEl!==t?a.setSpectatorCamera(t):n.spectator||a.spectatorCameraEl!==t||a.disableSpectatorCamera())},remove:function(){this.el.removeObject3D("camera")}})},{"../core/component":102,"../lib/three":150}],53:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three");r.exports.Component=a("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new o.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var r=this,a=this.el,o=this.data;o&&(this.remove(),this.loader.load(o,function(o){r.model=o.scene,a.setObject3D("mesh",r.model),a.emit("model-loaded",{format:"collada",model:r.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":102,"../lib/three":150}],54:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/"),n=o.bind,l={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},d={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},c={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};r.exports.Component=a("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:o.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=o.debounce(function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()},1e3),this.eventDetail={},this.intersectedEventDetail={cursorEl:this.el},this.onCursorDown=n(this.onCursorDown,this),this.onCursorUp=n(this.onCursorUp,this),this.onIntersection=n(this.onIntersection,this),this.onIntersectionCleared=n(this.onIntersectionCleared,this),this.onMouseMove=n(this.onMouseMove,this)},update:function(t){this.data.rayOrigin!==t.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState(d.HOVERING),t.removeState(d.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(d.HOVERED),this.removeEventListeners()},addEventListeners:function(){function r(){i=o.sceneEl.canvas,a.downEvents.length||a.upEvents.length||(c.DOWN.forEach(function(t){i.addEventListener(t,n.onCursorDown)}),c.UP.forEach(function(t){i.addEventListener(t,n.onCursorUp)}))}var a=this.data,o=this.el,n=this,i;i=o.sceneEl.canvas,i?r():o.sceneEl.addEventListener("render-target-loaded",r),a.downEvents.forEach(function(t){o.addEventListener(t,n.onCursorDown)}),a.upEvents.forEach(function(t){o.addEventListener(t,n.onCursorUp)}),o.addEventListener("raycaster-intersection",this.onIntersection),o.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.addEventListener("resize",this.updateCanvasBounds)},removeEventListeners:function(){var r=this.data,t=this.el,a=this,o;o=t.sceneEl.canvas,!o||r.downEvents.length||r.upEvents.length||(c.DOWN.forEach(function(r){o.removeEventListener(r,a.onCursorDown)}),c.UP.forEach(function(r){o.removeEventListener(r,a.onCursorUp)})),r.downEvents.forEach(function(r){t.removeEventListener(r,a.onCursorDown)}),r.upEvents.forEach(function(r){t.removeEventListener(r,a.onCursorUp)}),t.removeEventListener("raycaster-intersection",this.onIntersection),t.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),o.removeEventListener("mousemove",this.onMouseMove),o.removeEventListener("touchstart",this.onMouseMove),o.removeEventListener("touchmove",this.onMouseMove),o.removeEventListener("resize",this.updateCanvasBounds)},updateMouseEventListeners:function(){var r=this.el,t;t=r.sceneEl.canvas,t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("touchmove",this.onMouseMove),r.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(t.addEventListener("mousemove",this.onMouseMove,!1),t.addEventListener("touchmove",this.onMouseMove,!1),r.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var l=new THREE.Vector3,d=new THREE.Vector2,t=new THREE.Vector3,p={origin:t,direction:l};return function(n){var i=this.canvasBounds,s=this.el.sceneEl.camera,c,o,r;s.parent.updateMatrixWorld(),o="touchmove"===n.type||"touchstart"===n.type?n.touches.item(0):n,c=o.clientX-i.left,r=o.clientY-i.top,d.x=2*(c/i.width)-1,d.y=2*(-r/i.height)+1,t.setFromMatrixPosition(s.matrixWorld),l.set(d.x,d.y,.5).unproject(s).sub(t).normalize(),this.el.setAttribute("raycaster",p),"touchmove"===n.type&&n.preventDefault()}}(),onCursorDown:function(t){"mouse"===this.data.rayOrigin&&"touchstart"===t.type&&(this.onMouseMove(t),this.el.components.raycaster.checkIntersections(),t.preventDefault()),this.twoWayEmit(l.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(t){this.twoWayEmit(l.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&(this.intersectedEventDetail.intersection=null,this.cursorDownEl.emit(l.MOUSEUP,this.intersectedEventDetail)),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(l.CLICK),this.cursorDownEl=null,"touchend"===t.type&&t.preventDefault()},onIntersection:function(r){var a=this.el,o,t,n,s;t=r.detail.els[0]===a?1:0,s=r.detail.intersections[t],(n=r.detail.els[t])&&this.intersectedEl!==n&&(this.intersectedEl&&(o=this.el.components.raycaster.getIntersection(this.intersectedEl),o.distance<=s.distance)||(this.clearCurrentIntersection(!0),this.setIntersection(n,s)))},onIntersectionCleared:function(t){-1!==t.detail.clearedEls.indexOf(this.intersectedEl)&&this.clearCurrentIntersection()},setIntersection:function(t){var r=this.el,a=this.data,o=this;this.intersectedEl!==t&&(this.intersectedEl=t,r.addState(d.HOVERING),t.addState(d.HOVERED),this.twoWayEmit(l.MOUSEENTER),0!==a.fuseTimeout&&a.fuse&&(r.addState(d.FUSING),this.twoWayEmit(l.FUSING),this.fuseTimeout=setTimeout(function(){r.removeState(d.FUSING),o.twoWayEmit(l.CLICK)},a.fuseTimeout)))},clearCurrentIntersection:function(r){var a=this.el,o,t,n;this.intersectedEl&&(this.intersectedEl.removeState(d.HOVERED),a.removeState(d.HOVERING),a.removeState(d.FUSING),this.twoWayEmit(l.MOUSELEAVE),this.intersectedEl=null,clearTimeout(this.fuseTimeout),!0!==r&&(n=this.el.components.raycaster.intersections,0!==n.length&&(o=n[0].object.el===a?1:0,(t=n[o])&&this.setIntersection(t.object.el,t))))},twoWayEmit:function(r){var a=this.el,o=this.intersectedEl,n;n=this.el.components.raycaster.getIntersection(o),this.eventDetail.intersectedEl=o,this.eventDetail.intersection=n,a.emit(r,this.eventDetail),o&&(this.intersectedEventDetail.intersection=n,o.emit(r,this.intersectedEventDetail))}})},{"../core/component":102,"../utils/":172}],55:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/bind"),n=t("../utils/tracked-controls").checkControllerPresentAndSetup,i=t("../utils/tracked-controls"),s=i.emitIfAxesChanged,l=i.onButtonEvent,d="https://cdn.aframe.io/controllers/google/",c="Daydream Controller";r.exports.Component=a("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},init:function(){var r=this;this.animationActive="pointing",this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){l(t.detail.id,"down",r)},this.onButtonUp=function(t){l(t.detail.id,"up",r)},this.onButtonTouchStart=function(t){l(t.detail.id,"touchstart",r)},this.onButtonTouchEnd=function(t){l(t.detail.id,"touchend",r)},this.onAxisMoved=o(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=n,this.emitIfAxesChanged=s},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,c,{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:c,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:d+"vr_controller_daydream.obj",mtl:d+"vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(r){var t=r.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.menu=t.getObjectByName("AppButton_AppButton_Cylinder.004"),a.system=t.getObjectByName("HomeButton_HomeButton_Cylinder.005"),a.trackpad=t.getObjectByName("TouchPad_TouchPad_Cylinder.003"),t.position.set(0,0,-.04))},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&this.el.emit(t+"changed",r.detail.state)},updateModel:function(r,t){this.data.model&&this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a=this.buttonMeshes;if(a&&a[r]){var o="down"===t?this.data.buttonHighlightColor:"touchstart"===t?this.data.buttonTouchedColor:this.data.buttonColor;a[r].material.color.set(o)}}})},{"../core/component":102,"../utils/bind":166,"../utils/tracked-controls":178}],56:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/bind"),n=t("../utils/tracked-controls"),i=n.checkControllerPresentAndSetup,s=n.emitIfAxesChanged,l=n.onButtonEvent,d="https://cdn.aframe.io/controllers/samsung/",c="Gear VR|GearVR|Oculus Go";r.exports.Component=a("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},orientationOffset:{type:"vec3"},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},init:function(){var r=this;this.animationActive="pointing",this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){l(t.detail.id,"down",r)},this.onButtonUp=function(t){l(t.detail.id,"up",r)},this.onButtonTouchStart=function(t){l(t.detail.id,"touchstart",r)},this.onButtonTouchEnd=function(t){l(t.detail.id,"touchend",r)},this.onAxisMoved=o(this.onAxisMoved,this),this.controllerPresent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=i,this.emitIfAxesChanged=s},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,c,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:c,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:d+"gear_vr_controller.obj",mtl:d+"gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(r){var t=r.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.trigger=t.children[2],a.trackpad=t.children[1])},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&this.el.emit(t+"changed",r.detail.state)},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},updateModel:function(r,t){this.data.model&&this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a=this.buttonMeshes;if(a&&a[r]){var n="down"===t?this.data.buttonHighlightColor:"touchstart"===t?this.data.buttonTouchedColor:this.data.buttonColor;a[r].material.color.set(n)}}})},{"../core/component":102,"../utils/bind":166,"../utils/tracked-controls":178}],57:[function(t,r){var a=t("../core/geometry").geometries,o=t("../core/geometry").geometryNames,n=t("../core/component").registerComponent,i=t("../lib/three"),s=new i.Geometry;r.exports.Component=n("geometry",{schema:{buffer:{default:!0},primitive:{default:"box",oneOf:o},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(a){var n=this.data,r=this.el,s=this.system,o;this.geometry&&(s.unuseGeometry(a),this.geometry=null),this.geometry=s.getOrCreateGeometry(n),o=r.getObject3D("mesh"),o?o.geometry=this.geometry:(o=new i.Mesh,o.geometry=this.geometry,r.setObject3D("mesh",o))},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=s,this.geometry=null},updateSchema:function(o){var n=o.primitive,t=this.data&&this.data.primitive,r=a[n]&&a[n].schema;if(!r)throw new Error("Unknown geometry schema `"+n+"`");t&&t===n||this.extendSchema(r)}})},{"../core/component":102,"../core/geometry":103,"../lib/three":150}],58:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three"),n=t("../utils/"),s=n.debug("components:gltf-model:warn");r.exports.Component=a("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new o.GLTFLoader},update:function(){var r=this,a=this.el,o=this.data;o&&(this.remove(),this.loader.load(o,function(o){r.model=o.scene||o.scenes[0],r.model.animations=o.animations,a.setObject3D("mesh",r.model),a.emit("model-loaded",{format:"gltf",model:r.model})},void 0,function(r){var n=r&&r.message?r.message:"Failed to load glTF model";s(n),a.emit("model-error",{format:"gltf",src:o})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":102,"../lib/three":150,"../utils/":172}],59:[function(t,r){function a(r,t){var a;if(r)return a=s[r],"grip"===a?a+(t?"close":"open"):"point"===a||"thumb"===a?a+(t?"up":"down"):"pointing"===a||"pistol"===a?a+(t?"start":"end"):void 0}function l(r){var t=r&&r.controller&&r.controller.id;return t&&0===t.indexOf("OpenVR ")}var o=t("../core/component").registerComponent,i={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},d={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},s={};s[d.fist]="grip",s[d.thumbUp]="pistol",s[d.point]="pointing",s[d.thumb]="thumb",r.exports.Component=o("hand-controls",{schema:{default:"left"},init:function(){var r=this,t=this.el;this.gesture=d.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){r.handleButton("grip","down")},this.onGripUp=function(){r.handleButton("grip","up")},this.onTrackpadDown=function(){r.handleButton("trackpad","down")},this.onTrackpadUp=function(){r.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){r.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){r.handleButton("trackpad","touchend")},this.onTriggerDown=function(){r.handleButton("trigger","down")},this.onTriggerUp=function(){r.handleButton("trigger","up")},this.onTriggerTouchStart=function(){r.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){r.handleButton("trigger","touchend")},this.onGripTouchStart=function(){r.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){r.handleButton("grip","touchend")},this.onThumbstickDown=function(){r.handleButton("thumbstick","down")},this.onThumbstickUp=function(){r.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){r.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){r.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){r.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){r.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){r.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){r.handleButton("surface","touchend")},this.onControllerConnected=function(){r.setModelVisibility(!0)},this.onControllerDisconnected=function(){r.setModelVisibility(!1)},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(r,t){var a=this.el.getObject3D("mesh");a&&a.mixer&&a.mixer.update(t/1e3)},addEventListeners:function(){var r=this.el;r.addEventListener("gripdown",this.onGripDown),r.addEventListener("gripup",this.onGripUp),r.addEventListener("trackpaddown",this.onTrackpadDown),r.addEventListener("trackpadup",this.onTrackpadUp),r.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),r.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),r.addEventListener("triggerdown",this.onTriggerDown),r.addEventListener("triggerup",this.onTriggerUp),r.addEventListener("triggertouchstart",this.onTriggerTouchStart),r.addEventListener("triggertouchend",this.onTriggerTouchEnd),r.addEventListener("griptouchstart",this.onGripTouchStart),r.addEventListener("griptouchend",this.onGripTouchEnd),r.addEventListener("thumbstickdown",this.onThumbstickDown),r.addEventListener("thumbstickup",this.onThumbstickUp),r.addEventListener("abuttontouchstart",this.onAorXTouchStart),r.addEventListener("abuttontouchend",this.onAorXTouchEnd),r.addEventListener("bbuttontouchstart",this.onBorYTouchStart),r.addEventListener("bbuttontouchend",this.onBorYTouchEnd),r.addEventListener("xbuttontouchstart",this.onAorXTouchStart),r.addEventListener("xbuttontouchend",this.onAorXTouchEnd),r.addEventListener("ybuttontouchstart",this.onBorYTouchStart),r.addEventListener("ybuttontouchend",this.onBorYTouchEnd),r.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),r.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var r=this.el;r.removeEventListener("gripdown",this.onGripDown),r.removeEventListener("gripup",this.onGripUp),r.removeEventListener("trackpaddown",this.onTrackpadDown),r.removeEventListener("trackpadup",this.onTrackpadUp),r.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),r.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),r.removeEventListener("triggerdown",this.onTriggerDown),r.removeEventListener("triggerup",this.onTriggerUp),r.removeEventListener("triggertouchstart",this.onTriggerTouchStart),r.removeEventListener("triggertouchend",this.onTriggerTouchEnd),r.removeEventListener("griptouchstart",this.onGripTouchStart),r.removeEventListener("griptouchend",this.onGripTouchEnd),r.removeEventListener("thumbstickdown",this.onThumbstickDown),r.removeEventListener("thumbstickup",this.onThumbstickUp),r.removeEventListener("abuttontouchstart",this.onAorXTouchStart),r.removeEventListener("abuttontouchend",this.onAorXTouchEnd),r.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),r.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),r.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),r.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),r.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),r.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),r.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),r.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(r){var a=this.el,t=this.data,n;n={hand:t,model:!1,orientationOffset:{x:0,y:0,z:"left"===t?90:-90}},t!==r&&this.loader.load(i[t],function(r){var t=r.getObjectByName("Hand");t.material.skinning=!0,t.mixer=new THREE.AnimationMixer(t),a.setObject3D("mesh",t),t.position.set(0,0,0),t.rotation.set(0,0,0),t.visible=!1,a.setAttribute("vive-controls",n),a.setAttribute("oculus-touch-controls",n),a.setAttribute("windows-motion-controls",n)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(r,t){var a="down"===t,o="touchstart"===t,i;if(0===t.indexOf("touch")){if(o===this.touchedButtons[r])return;this.touchedButtons[r]=o}else{if(a===this.pressedButtons[r])return;this.pressedButtons[r]=a}i=this.gesture,this.gesture=this.determineGesture(),this.gesture!==i&&(this.animateGesture(this.gesture,i),this.emitGestureEvents(this.gesture,i))},determineGesture:function(){var a=this.pressedButtons.grip,c=this.pressedButtons.surface||this.touchedButtons.surface,n=this.pressedButtons.trackpad||this.touchedButtons.trackpad,o=this.pressedButtons.trigger||this.touchedButtons.trigger,i=this.touchedButtons.AorX||this.touchedButtons.BorY,r=l(this.el.components["tracked-controls"]),s;return a?s=r?d.fist:c||i||n?o?d.fist:d.point:o?d.thumbUp:d.pointThumb:o?s=r?d.fist:d.hold:r&&n&&(s=d.point),s},animateGesture:function(r,t){return r?void this.playAnimation(r||d.open,t,!1):void this.playAnimation(t,t,!0)},emitGestureEvents:function(r,t){var i=this.el,o;t!==r&&(o=a(t,!1),o&&i.emit(o),(o=a(r,!0))&&i.emit(o))},playAnimation:function(a,t,s){var n=this.el.getObject3D("mesh"),r,o;if(n){if(o=n.mixer.clipAction(a),o.clampWhenFinished=!0,o.loop=THREE.LoopRepeat,o.repetitions=0,o.timeScale=s?-1:1,o.weight=1,!t||a===t)return n.mixer.stopAllAction(),void o.play();r=n.mixer.clipAction(t),n.mixer.stopAllAction(),r.weight=.15,r.play(),o.play(),r.crossFadeTo(o,.15,!0)}},setModelVisibility:function(r){var t=this.el.getObject3D("mesh");t&&(t.visible=r)}})},{"../core/component":102}],60:[function(t){t("./camera"),t("./collada-model"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./gltf-model"),t("./hand-controls"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./material"),t("./obj-model"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./visible"),t("./vive-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/background"),t("./scene/debug"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/renderer"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./camera":52,"./collada-model":53,"./cursor":54,"./daydream-controls":55,"./gearvr-controls":56,"./geometry":57,"./gltf-model":58,"./hand-controls":59,"./laser-controls":61,"./light":62,"./line":63,"./link":64,"./look-controls":65,"./material":66,"./obj-model":67,"./oculus-touch-controls":68,"./position":69,"./raycaster":70,"./rotation":71,"./scale":72,"./scene/background":73,"./scene/debug":74,"./scene/embedded":75,"./scene/fog":76,"./scene/inspector":77,"./scene/keyboard-shortcuts":78,"./scene/pool":79,"./scene/renderer":80,"./scene/screenshot":81,"./scene/stats":82,"./scene/vr-mode-ui":83,"./shadow":84,"./sound":85,"./text":86,"./tracked-controls":87,"./visible":88,"./vive-controls":89,"./wasd-controls":90,"./windows-motion-controls":91}],61:[function(t){var r=t("../core/component").registerComponent,a=t("../utils/");r("laser-controls",{schema:{hand:{default:"right"}},init:function(){function s(i){var s=l[i.detail.name];if(s){var r=a.extend({showLine:!0},s.raycaster||{});i.detail.rayOrigin&&(r.origin=i.detail.rayOrigin.origin,r.direction=i.detail.rayOrigin.direction,r.showLine=!0),i.detail.rayOrigin||!o.modelReady?d.setAttribute("raycaster",r):d.setAttribute("raycaster","showLine",!0),d.setAttribute("cursor",a.extend({fuse:!1},s.cursor))}}var l=this.config,t=this.data,d=this.el,o=this;d.setAttribute("daydream-controls",{hand:t.hand}),d.setAttribute("gearvr-controls",{hand:t.hand}),d.setAttribute("oculus-touch-controls",{hand:t.hand}),d.setAttribute("vive-controls",{hand:t.hand}),d.setAttribute("windows-motion-controls",{hand:t.hand}),d.addEventListener("controllerconnected",s),d.addEventListener("controllerdisconnected",function(){d.setAttribute("raycaster","showLine",!1)}),d.addEventListener("controllermodelready",function(t){s(t),o.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown","triggerdown"],upEvents:["trackpadup","triggerup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:0,y:0,z:0}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":102,"../utils/":172}],62:[function(t,r){var l=t("../utils/bind"),n=t("../utils").diff,a=t("../utils/debug"),o=t("../core/component").registerComponent,c=t("../lib/three"),p=c.Math.degToRad,u=a("components:light:warn");r.exports.Component=o("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(t)},update:function(s){var d=this.data,a=n(d,s),c=this.light,o=this;if(c&&!("type"in a)){var i=!1;return void Object.keys(a).forEach(function(r){var a=d[r];"color"===r?c.color.set(a):"groundColor"===r?c.groundColor.set(a):"angle"===r?c.angle=p(a):"target"===r?null===a?"spot"!==d.type&&"directional"!==d.type||(c.target=o.defaultTarget):a.hasLoaded?o.onSetTarget(a,c):a.addEventListener("loaded",l(o.onSetTarget,o,a,c)):"castShadow"===r||"shadowBias"===r||"shadowCameraFar"===r||"shadowCameraFov"===r||"shadowCameraNear"===r||"shadowCameraTop"===r||"shadowCameraRight"===r||"shadowCameraBottom"===r||"shadowCameraLeft"===r||"shadowCameraVisible"===r||"shadowMapHeight"===r||"shadowMapWidth"===r?i||(o.updateShadow(),i=!0):c[r]=a})}this.setLight(this.data),this.updateShadow()},setLight:function(r){var o=this.el,a=this.getLight(r);a&&(this.light&&o.removeObject3D("light"),this.light=a,this.light.el=o,o.setObject3D("light",this.light),"spot"!==r.type&&"directional"!==r.type&&"hemisphere"!==r.type||o.getObject3D("light").translateY(-1),"spot"===r.type&&(o.setObject3D("light-target",this.defaultTarget),o.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var r=this.el,n=this.data,a=this.light;a.castShadow=n.castShadow;var t=r.getObject3D("cameraHelper");return(n.shadowCameraVisible&&!t?r.setObject3D("cameraHelper",new c.CameraHelper(a.shadow.camera)):!n.shadowCameraVisible&&t&&r.removeObject3D("cameraHelper"),!n.castShadow)?a:void(a.shadow.bias=n.shadowBias,a.shadow.mapSize.height=n.shadowMapHeight,a.shadow.mapSize.width=n.shadowMapWidth,a.shadow.camera.near=n.shadowCameraNear,a.shadow.camera.far=n.shadowCameraFar,a.shadow.camera instanceof c.OrthographicCamera?(a.shadow.camera.top=n.shadowCameraTop,a.shadow.camera.right=n.shadowCameraRight,a.shadow.camera.bottom=n.shadowCameraBottom,a.shadow.camera.left=n.shadowCameraLeft):a.shadow.camera.fov=n.shadowCameraFov,a.shadow.camera.updateProjectionMatrix(),t&&t.update())},getLight:function(m){var g=m.angle,a=new c.Color(m.color).getHex(),t=m.decay,o=m.distance,i=new c.Color(m.groundColor).getHex(),r=m.intensity,s=m.type,d=m.target,h=null;switch(s.toLowerCase()){case"ambient":return new c.AmbientLight(a,r);case"directional":return h=new c.DirectionalLight(a,r),this.defaultTarget=h.target,d&&(d.hasLoaded?this.onSetTarget(d,h):d.addEventListener("loaded",l(this.onSetTarget,this,d,h))),h;case"hemisphere":return new c.HemisphereLight(a,i,r);case"point":return new c.PointLight(a,r,o,t);case"spot":return h=new c.SpotLight(a,r,o,p(g),m.penumbra,t),this.defaultTarget=h.target,d&&(d.hasLoaded?this.onSetTarget(d,h):d.addEventListener("loaded",l(this.onSetTarget,this,d,h))),h;default:u("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",s);}},onSetTarget:function(t,r){r.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":102,"../lib/three":150,"../utils":172,"../utils/bind":166,"../utils/debug":168}],63:[function(t,r){function n(r,t){return r&&t&&r.x===t.x&&r.y===t.y&&r.z===t.z}var a=t("../core/component").registerComponent;r.exports.Component=a("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var r=this.data,a,t;t=this.material=new THREE.LineBasicMaterial({color:r.color,opacity:r.opacity,transparent:1>r.opacity,visible:r.visible}),a=this.geometry=new THREE.BufferGeometry,a.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(a,t),this.el.setObject3D(this.attrName,this.line)},update:function(s){var t=this.data,l=this.geometry,i=!1,r=this.material,a=l.attributes.position.array;n(t.start,s.start)||(a[0]=t.start.x,a[1]=t.start.y,a[2]=t.start.z,i=!0),n(t.end,s.end)||(a[3]=t.end.x,a[4]=t.end.y,a[5]=t.end.z,i=!0),i&&(l.attributes.position.needsUpdate=!0,l.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=1>t.opacity,r.visible=t.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":102}],64:[function(t,r){var a=t("../core/component").registerComponent,o=t("../core/shader").registerShader,n=t("../lib/three");r.exports.Component=a("link",{schema:{backgroundColor:{default:"red",type:"color"},borderColor:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},titleColor:{default:"white",type:"color"},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.quaternionClone=new n.Quaternion,this.hiddenEls=[],this.initVisualAspect()},update:function(a){var n=this.data,r=this.el,o,t;o=n.highlighted?n.highlightedColor:n.backgroundColor,t=n.highlighted?n.highlightedColor:n.borderColor,r.setAttribute("material","backgroundColor",o),r.setAttribute("material","strokeColor",t),n.on!==a.on&&this.updateEventListener(),n.visualAspectEnabled&&void 0!==a.peekMode&&n.peekMode!==a.peekMode&&this.updatePeekMode(),n.image&&a.image!==n.image&&r.setAttribute("material","pano","string"==typeof n.image?n.image:n.image.src)},updatePeekMode:function(){var r=this.el,a=this.sphereEl;this.data.peekMode?(this.hideAll(),r.getObject3D("mesh").visible=!1,a.setAttribute("visible",!0)):(this.showAll(),r.getObject3D("mesh").visible=!0,a.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var a=this.el,r,o,t;this.data.visualAspectEnabled&&(t=this.textEl=this.textEl||document.createElement("a-entity"),o=this.sphereEl=this.sphereEl||document.createElement("a-entity"),r=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),a.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),a.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),t.setAttribute("text",{color:this.data.titleColor,align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),t.setAttribute("position","0 1.5 0"),a.appendChild(t),r.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),r.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),r.setAttribute("rotation","0 180 0"),r.setAttribute("position","0 0 0"),r.setAttribute("visible",!1),a.appendChild(r),o.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),o.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),o.setAttribute("visible",!1),a.appendChild(o))},navigate:function(){window.location=this.data.href},tick:function(){var c=new n.Vector3,p=new n.Vector3,t=new n.Quaternion,i=new n.Vector3;return function(){var r=this.el,n=r.object3D,s=r.sceneEl.camera,l=this.textEl,d,o;if(this.data.visualAspectEnabled)if(n.updateMatrixWorld(),s.parent.updateMatrixWorld(),s.updateMatrixWorld(),n.matrix.decompose(p,t,i),p.setFromMatrixPosition(n.matrixWorld),c.setFromMatrixPosition(s.matrixWorld),20<(o=p.distanceTo(c)))this.previousQuaternion||(this.quaternionClone.copy(t),this.previousQuaternion=this.quaternionClone),n.lookAt(c);else{if(d=this.calculateCameraPortalOrientation(),.5>o){if(!0===this.semiSphereEl.getAttribute("visible"))return;l.setAttribute("text","width",1.5),0>=d?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),r.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=d}else 0>=d?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),r.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(n.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}(),hideAll:function(){var a=this.el,o=this.hiddenEls,t=this;0<o.length||a.sceneEl.object3D.traverse(function(n){n&&n.el&&n.el.hasAttribute("link-controls")||n.el&&n!==a.sceneEl.object3D&&n.el!==a&&n.el!==t.sphereEl&&n.el!==a.sceneEl.cameraEl&&!1!==n.el.getAttribute("visible")&&n.el!==t.textEl&&n.el!==t.semiSphereEl&&(n.el.setAttribute("visible",!1),o.push(n.el))})},showAll:function(){this.hiddenEls.forEach(function(t){t.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var s=new n.Matrix4,l=new n.Vector3,t=new n.Vector3(0,0,1),i=new n.Vector3(0,0,0);return function(){var r=this.el,o=r.sceneEl.camera;return l.set(0,0,0),t.set(0,0,1),i.set(0,0,0),r.object3D.matrixWorld.extractRotation(s),t.applyMatrix4(s),r.object3D.updateMatrixWorld(),r.object3D.localToWorld(i),o.parent.parent.updateMatrixWorld(),o.parent.updateMatrixWorld(),o.updateMatrixWorld(),o.localToWorld(l),l.sub(i).normalize(),t.normalize(),ma(t.dot(l))}}(),remove:function(){this.removeEventListener()}}),o("portal",{schema:{borderEnabled:{default:1,type:"int",is:"uniform"},backgroundColor:{default:"red",type:"color",is:"uniform"},pano:{type:"map",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:"vec3 portalPosition;\nvarying vec3 vWorldPosition;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvoid main() {\nvDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);\nportalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;\nvDistance = length(portalPosition - cameraPosition);\nvWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define RECIPROCAL_PI2 0.15915494\nuniform sampler2D pano;\nuniform vec3 strokeColor;\nuniform vec3 backgroundColor;\nuniform float borderEnabled;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvarying vec3 vWorldPosition;\nvoid main() {\nvec3 direction = normalize(vWorldPosition - cameraPosition);\nvec2 sampleUV;\nfloat borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);\nsampleUV.y = saturate(direction.y * 0.5  + 0.5);\nsampleUV.x = atan(direction.z, -direction.x) * -RECIPROCAL_PI2 + 0.5;\nif (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {\ngl_FragColor = vec4(strokeColor, 1.0);\n} else {\ngl_FragColor = mix(texture2D(pano, sampleUV), vec4(backgroundColor, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));\n}\n}"})},{"../core/component":102,"../core/shader":111,"../lib/three":150}],65:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three"),n=t("../utils/"),i=n.bind,s=t("../utils").device.PolyfillControls,l="a-grabbing",d=ga/2,c=n.device.checkHasPositionalTracking;r.exports.Component=a("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},hmdEnabled:{default:!0},pointerLockEnabled:{default:!1},reverseMouseDrag:{default:!1},touchEnabled:{default:!0}},init:function(){this.previousHMDPosition=new o.Vector3,this.hmdQuaternion=new o.Quaternion,this.hmdEuler=new o.Euler,this.position=new o.Vector3,this.savedRotation=new o.Vector3,this.savedPosition=new o.Vector3,this.polyfillObject=new o.Object3D,this.polyfillControls=new s(this.polyfillObject),this.rotation={},this.deltaRotation={},this.savedPose=null,this.pointerLocked=!1,this.setupMouseControls(),this.bindMethods(),this.savedPose={position:new o.Vector3,rotation:new o.Euler},this.el.sceneEl.is("vr-mode")&&this.onEnterVR()},update:function(r){var a=this.data;a.enabled!==r.enabled&&this.updateGrabCursor(a.enabled),!r||a.hmdEnabled||r.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0)),r&&!a.pointerLockEnabled!==r.pointerLockEnabled&&(this.removeEventListeners(),this.addEventListeners(),this.pointerLocked&&document.exitPointerLock())},tick:function(){this.data.enabled&&this.updateOrientation()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=i(this.onMouseDown,this),this.onMouseMove=i(this.onMouseMove,this),this.onMouseUp=i(this.onMouseUp,this),this.onTouchStart=i(this.onTouchStart,this),this.onTouchMove=i(this.onTouchMove,this),this.onTouchEnd=i(this.onTouchEnd,this),this.onEnterVR=i(this.onEnterVR,this),this.onExitVR=i(this.onExitVR,this),this.onPointerLockChange=i(this.onPointerLockChange,this),this.onPointerLockError=i(this.onPointerLockError,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new o.Object3D,this.yawObject=new o.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},addEventListeners:function(){var r=this.el.sceneEl,t=r.canvas;return t?void(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd),r.addEventListener("enter-vr",this.onEnterVR),r.addEventListener("exit-vr",this.onExitVR),this.data.pointerLockEnabled&&(document.addEventListener("pointerlockchange",this.onPointerLockChange,!1),document.addEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.addEventListener("pointerlockerror",this.onPointerLockError,!1))):void r.addEventListener("render-target-loaded",i(this.addEventListeners,this))},removeEventListeners:function(){var r=this.el.sceneEl,t=r&&r.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),window.removeEventListener("touchmove",this.onTouchMove),window.removeEventListener("touchend",this.onTouchEnd),r.removeEventListener("enter-vr",this.onEnterVR),r.removeEventListener("exit-vr",this.onExitVR),document.removeEventListener("pointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("mozpointerlockchange",this.onPointerLockChange,!1),document.removeEventListener("pointerlockerror",this.onPointerLockError,!1))},updateOrientation:function(){var r=this.el,t=this.hmdEuler,a=this.pitchObject,o=this.yawObject,n=this.el.sceneEl;n.is("vr-mode")&&n.checkHeadsetConnected()||(this.polyfillControls.update(),t.setFromQuaternion(this.polyfillObject.quaternion,"YXZ"),r.object3D.rotation.x=t.x+a.rotation.x,r.object3D.rotation.y=t.y+o.rotation.y,r.object3D.rotation.z=0)},onMouseMove:function(a){var t=this.pitchObject,i=this.previousMouseEvent,s=this.yawObject,r,l,o;this.data.enabled&&(this.mouseDown||this.pointerLocked)&&(this.pointerLocked?(l=a.movementX||a.mozMovementX||0,o=a.movementY||a.mozMovementY||0):(l=a.screenX-i.screenX,o=a.screenY-i.screenY),this.previousMouseEvent=a,r=this.data.reverseMouseDrag?1:-1,s.rotation.y+=.002*l*r,t.rotation.x+=.002*o*r,t.rotation.x=C(-d,O(d,t.rotation.x)))},onMouseDown:function(r){if(this.data.enabled&&0===r.button){var t=this.el.sceneEl,a=t&&t.canvas;this.mouseDown=!0,this.previousMouseEvent=r,document.body.classList.add(l),this.data.pointerLockEnabled&&!this.pointerLocked&&(a.requestPointerLock?a.requestPointerLock():a.mozRequestPointerLock&&a.mozRequestPointerLock())}},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove(l)},onTouchStart:function(r){1===r.touches.length&&this.data.touchEnabled&&(this.touchStart={x:r.touches[0].pageX,y:r.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(r){var t=this.el.sceneEl.canvas,a=this.yawObject,o;this.touchStarted&&this.data.touchEnabled&&(o=2*ga*(r.touches[0].pageX-this.touchStart.x)/t.clientWidth,a.rotation.y-=.5*o,this.touchStart={x:r.touches[0].pageX,y:r.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onEnterVR:function(){this.saveCameraPose()},onExitVR:function(){this.restoreCameraPose(),this.previousHMDPosition.set(0,0,0)},onPointerLockChange:function(){this.pointerLocked=document.pointerLockElement||document.mozPointerLockElement},onPointerLockError:function(){this.pointerLocked=!1},updateGrabCursor:function(r){function t(){o.canvas.classList.add("a-grab-cursor")}function a(){o.canvas.classList.remove("a-grab-cursor")}var o=this.el.sceneEl;return o.canvas?r?void t():void a():void(r?o.addEventListener("render-target-loaded",t):o.addEventListener("render-target-loaded",a))},saveCameraPose:function(){var r=this.el,t=void 0===this.hasPositionalTracking?c():this.hasPositionalTracking;!this.hasSavedPose&&t&&(this.savedPose.position.copy(r.object3D.position),this.savedPose.rotation.copy(r.object3D.rotation),this.hasSavedPose=!0)},restoreCameraPose:function(){var r=this.el,t=this.savedPose,a=void 0===this.hasPositionalTracking?c():this.hasPositionalTracking;this.hasSavedPose&&a&&(r.object3D.position.copy(t.position),r.object3D.rotation.copy(t.rotation),this.hasSavedPose=!1)}})},{"../core/component":102,"../lib/three":150,"../utils":172,"../utils/":172}],66:[function(t,r){function o(t){return"back"===t?l.BackSide:"double"===t?l.DoubleSide:l.FrontSide}function n(t){return"face"===t?l.FaceColors:"vertex"===t?l.VertexColors:l.NoColors}function i(r,a){r.dispose(),a.unregisterMaterial(r)}var a=t("../utils/"),s=t("../core/component"),l=t("../lib/three"),d=t("../core/shader"),c=a.debug("components:material:error"),p=s.registerComponent,u=d.shaders,m=d.shaderNames;r.exports.Component=p("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:m},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0}},init:function(){this.material=null},update:function(r){var a=this.data;this.shader&&a.shader===r.shader||this.updateShader(a.shader),this.shader.update(this.data),this.updateMaterial(r)},updateSchema:function(o){var n=o.shader,t=this.data&&this.data.shader,a=n||t,r=u[a]&&u[a].schema;r||c("Unknown shader schema "+a),t&&n===t||(this.extendSchema(r),this.updateBehavior())},updateBehavior:function(){var o=this.schema,n=this,t=this.el.sceneEl,i={},r=function(r){Object.keys(i).forEach(function(a){i[a]=r}),n.shader.update(i)};this.tick=void 0,Object.keys(o).forEach(function(t){"time"===o[t].type&&(n.tick=r,i[t]=!0)}),t&&(this.tick?t.addBehavior(this):t.removeBehavior(this))},updateShader:function(o){var n=this.data,a=u[o]&&u[o].Shader,i;if(!a)throw new Error("Unknown shader "+o);i=this.shader=new a,i.el=this.el,i.init(n),this.setMaterial(i.material),this.updateSchema(n)},updateMaterial:function(r){var i=this.data,t=this.material;t.alphaTest=i.alphaTest,t.depthTest=!1!==i.depthTest,t.depthWrite=!1!==i.depthWrite,t.opacity=i.opacity,t.flatShading=i.flatShading,t.side=o(i.side),t.transparent=!1!==i.transparent||1>i.opacity,t.vertexColors=n(i.vertexColors),t.visible=i.visible,Object.keys(r).length&&(r.alphaTest!==i.alphaTest||r.side!==i.side||r.vertexColors!==i.vertexColors)&&(t.needsUpdate=!0)},remove:function(){var r=new l.MeshBasicMaterial,o=this.material,t=this.el.getObject3D("mesh");t&&(t.material=r),i(o,this.system)},setMaterial:function(o){var n=this.el,a=this.system,r;this.material&&i(this.material,a),this.material=o,a.registerMaterial(o),r=n.getObject3D("mesh"),r?r.material=o:n.addEventListener("object3dset",function a(t){"mesh"===t.detail.type&&t.target===n&&(n.getObject3D("mesh").material=o,n.removeEventListener("object3dset",a))})}})},{"../core/component":102,"../core/shader":111,"../lib/three":150,"../utils/":172}],67:[function(t,r){var a=t("../utils/debug"),o=t("../core/component").registerComponent,n=t("../lib/three"),s=a("components:obj-model:warn");r.exports.Component=o("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new n.OBJLoader,this.mtlLoader=new n.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var t=this.data;t.obj&&(this.remove(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(l,d){var c=this,t=this.el,r=this.mtlLoader,a=this.objLoader;return d?(t.hasAttribute("material")&&s("Material component properties are ignored when a .MTL is provided"),r.setTexturePath(d.substr(0,d.lastIndexOf("/")+1)),void r.load(d,function(r){r.preload(),a.setMaterials(r),a.load(l,function(r){c.model=r,t.setObject3D("mesh",r),t.emit("model-loaded",{format:"obj",model:r})})})):void a.load(l,function(r){var a=t.components.material;a&&r.traverse(function(t){t instanceof n.Mesh&&(t.material=a.material)}),c.model=r,t.setObject3D("mesh",r),t.emit("model-loaded",{format:"obj",model:r})})}})},{"../core/component":102,"../lib/three":150,"../utils/debug":168}],68:[function(t,r){var a=t("../utils/bind"),o=t("../core/component").registerComponent,n=t("../utils/tracked-controls"),i=t("../lib/three"),s=n.onButtonEvent,l="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",d=new i.Vector3(0,0,-.053),c={left:{origin:{x:.008,y:-.008,z:0},direction:{x:0,y:-.8,z:-1}},right:{origin:{x:-.008,y:-.008,z:0},direction:{x:0,y:-.8,z:-1}}};r.exports.Component=o("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},orientationOffset:{type:"vec3",default:{x:43,y:0,z:0}}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var r=this;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(t){s(t.detail.id,"down",r,r.data.hand)},this.onButtonUp=function(t){s(t.detail.id,"up",r,r.data.hand)},this.onButtonTouchStart=function(t){s(t.detail.id,"touchstart",r,r.data.hand)},this.onButtonTouchEnd=function(t){s(t.detail.id,"touchend",r,r.data.hand)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=n.emitIfAxesChanged,this.checkControllerPresentAndSetup=n.checkControllerPresentAndSetup},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("axismove",this.onAxisMoved),r.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("axismove",this.onAxisMoved),r.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){var r,a;this.data.model&&("right"===this.data.hand?(r="url("+(l+"right.obj")+")",a="url("+(l+"right.mtl")+")"):(r="url("+(l+"left.obj")+")",a="url("+(l+"left.mtl")+")"),this.el.setAttribute("obj-model",{obj:r,mtl:a}))},injectTrackedControls:function(){var r=this.data;this.el.setAttribute("tracked-controls",{id:"right"===r.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,orientationOffset:r.orientationOffset}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(r){var t=this.mapping[this.data.hand].buttons[r.detail.id],a=this.buttonMeshes,o;t&&("trigger"!==t&&"grip"!==t||(o=r.detail.state.value),a&&("trigger"===t&&a.trigger&&(a.trigger.rotation.x=-o*(ga/24)),"grip"===t&&a.grip&&(a.grip.rotation.y=("left"===this.data.hand?-1:1)*o*(ga/60))),this.el.emit(t+"changed",r.detail.state))},onModelLoaded:function(r){var t=r.detail.model,a;if(this.data.model){var o="left"===this.data.hand;a=this.buttonMeshes={},a.grip=t.getObjectByName(o?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),a.thumbstick=t.getObjectByName(o?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),a.trigger=t.getObjectByName(o?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),a.xbutton=t.getObjectByName("buttonX_oculus-touch-controller-left.002"),a.abutton=t.getObjectByName("buttonA_oculus-touch-controller-right.002"),a.ybutton=t.getObjectByName("buttonY_oculus-touch-controller-left.001"),a.bbutton=t.getObjectByName("buttonB_oculus-touch-controller-right.003"),t.position.copy(d),this.el.emit("controllermodelready",{name:"oculus-touch-controls",model:this.data.model,rayOrigin:c[this.data.hand]})}},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,r)},updateModel:function(r,t){this.data.model&&this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a="up"===t||"touchend"===t?this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,o=this.buttonMeshes;this.data.model&&o&&o[r]&&o[r].material.color.set(a)}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166,"../utils/tracked-controls":178}],69:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("position",{schema:{type:"vec3"},update:function(){var t=this.el.object3D,r=this.data;t.position.set(r.x,r.y,r.z)},remove:function(){this.el.object3D.position.set(0,0,0)}})},{"../core/component":102}],70:[function(t,r){function a(r,a){var t;for(r.length=a.length,t=0;t<a.length;t++)r[t]=a[t]}var o=t("../core/component").registerComponent,n=t("../lib/three"),i=t("../utils/"),l=i.debug("components:raycaster:warn"),d=/^[\w\s-.,[\]#]*$/,s={childList:!0,attributes:!0,subtree:!0};r.exports.Component=o("raycaster",{schema:{autoRefresh:{default:!0},direction:{type:"vec3",default:{x:0,y:0,z:-1}},enabled:{default:!0},far:{default:1e3},interval:{default:0},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.clearedIntersectedEls=[],this.unitLineEndVec3=new n.Vector3,this.intersectedEls=[],this.intersections=[],this.newIntersectedEls=[],this.newIntersections=[],this.objects=[],this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.rawIntersections=[],this.raycaster=new n.Raycaster,this.updateOriginDirection(),this.setDirty=this.setDirty.bind(this),this.observer=new MutationObserver(this.setDirty),this.dirty=!0,this.lineEndVec3=new n.Vector3,this.otherLineEndVec3=new n.Vector3,this.lineData={end:this.lineEndVec3},this.intersectedClearedDetail={el:this.el},this.intersectionClearedDetail={clearedEls:this.clearedIntersectedEls},this.intersectionDetail={}},update:function(r){var a=this.data,t=this.el,o=this.raycaster;o.far=a.far,o.near=a.near,!a.showLine||a.far===r.far&&a.origin===r.origin&&a.direction===r.direction&&r.showLine||(this.unitLineEndVec3.copy(a.origin).add(a.direction).normalize(),this.drawLine()),!a.showLine&&r.showLine&&t.removeAttribute("line"),a.objects===r.objects||d.test(a.objects)||l("Selector \""+a.objects+"\" may not update automatically with DOM changes."),a.autoRefresh!==r.autoRefresh&&t.isPlaying&&(a.autoRefresh?this.addEventListeners():this.removeEventListeners()),this.setDirty()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},addEventListeners:function(){this.data.autoRefresh&&(this.observer.observe(this.el.sceneEl,s),this.el.sceneEl.addEventListener("object3dset",this.setDirty),this.el.sceneEl.addEventListener("object3dremove",this.setDirty))},removeEventListeners:function(){this.observer.disconnect(),this.el.sceneEl.removeEventListener("object3dset",this.setDirty),this.el.sceneEl.removeEventListener("object3dremove",this.setDirty)},setDirty:function(){this.dirty=!0},refreshObjects:function(){var r=this.data,t;t=r.objects?this.el.sceneEl.querySelectorAll(r.objects):this.el.sceneEl.children,this.objects=this.flattenChildrenShallow(t),this.dirty=!1},tick:function(r){var a=this.data,t=this.prevCheckTime;t&&r-t<a.interval||(this.prevCheckTime=r,this.checkIntersections())},checkIntersections:function(){var p=this.clearedIntersectedEls,s=this.el,m=this.data,r=this.intersectedEls,o=this.intersections,c=this.newIntersectedEls,g=this.newIntersections,h=this.prevIntersectedEls,l=this.rawIntersections,d=this,u,y,t;if(this.data.enabled){for(this.dirty&&this.refreshObjects(),a(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),l.length=0,this.raycaster.intersectObjects(this.objects,m.recursive,l),o.length=0,r.length=0,u=0;u<l.length;u++)y=l[u],m.showLine&&y.object===s.getObject3D("line")||y.object.el&&(o.push(y),r.push(y.object.el));for(g.length=0,c.length=0,u=0;u<o.length;u++)-1===h.indexOf(o[u].object.el)&&(g.push(o[u]),c.push(o[u].object.el));for(p.length=0,u=0;u<h.length;u++)-1===r.indexOf(h[u])&&(h[u].emit("raycaster-intersected-cleared",this.intersectedClearedDetail),p.push(h[u]));for(p.length&&s.emit("raycaster-intersection-cleared",this.intersectionClearedDetail),u=0;u<c.length;u++)c[u].emit("raycaster-intersected",{el:s,intersection:g[u]});g.length&&(this.intersectionDetail.els=c,this.intersectionDetail.intersections=g,s.emit("raycaster-intersection",this.intersectionDetail)),setTimeout(function(){d.data.showLine&&(o.length&&(t=o[0].object.el===s&&o[1]?o[1].distance:o[0].distance),d.drawLine(t))})}},getIntersection:function(r){var a,t;for(a=0;a<this.intersections.length;a++)if(t=this.intersections[a],t.object.el===r)return t;return null},updateOriginDirection:function(){var r=new n.Vector3,a=new n.Vector3;return function(){var t=this.el,o=this.data;return o.useWorldCoordinates?void this.raycaster.set(o.origin,o.direction):void(t.object3D.updateMatrixWorld(),t.object3D.getWorldPosition(a),0===o.origin.x&&0===o.origin.y&&0===o.origin.z||(a=t.object3D.localToWorld(a.copy(o.origin))),r.copy(o.direction).transformDirection(t.object3D.matrixWorld).normalize(),this.raycaster.set(a,r))}}(),drawLine:function(r){var a=this.data,o=this.el,n;n=this.lineData.end===this.lineEndVec3?this.otherLineEndVec3:this.lineEndVec3,void 0===r&&(r=a.far===1/0?1e3:a.far),this.lineData.start=a.origin,this.lineData.end=n.copy(this.unitLineEndVec3).multiplyScalar(r),o.setAttribute("line",this.lineData)},flattenChildrenShallow:function(){var r=[];return function(a){var t=this.objects,o,n;for(r.length=0,n=0;n<a.length;n++)a[n].object3D&&r.push(a[n].object3D);for(t.length=0,n=0;n<r.length;n++)(o=r[n].children)&&o.length&&t.push.apply(t,o);return t}}()})},{"../core/component":102,"../lib/three":150,"../utils/":172}],71:[function(t,r){var a=t("../lib/three").Math.degToRad,o=t("../core/component").registerComponent;r.exports.Component=o("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,r=this.el.object3D;r.rotation.set(a(t.x),a(t.y),a(t.z)),r.rotation.order="YXZ"},remove:function(){this.el.object3D.rotation.set(0,0,0)}})},{"../core/component":102,"../lib/three":150}],72:[function(t,r){var a=t("../core/component").registerComponent,n=1e-5;r.exports.Component=a("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var a=this.data,i=this.el.object3D,o=0===a.x?n:a.x,t=0===a.y?n:a.y,r=0===a.z?n:a.z;i.scale.set(o,t,r)},remove:function(){this.el.object3D.scale.set(1,1,1)}})},{"../core/component":102}],73:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("background",{schema:{color:{type:"color",default:"black"},transparent:{default:!1}},update:function(){var t=this.data,a=this.el.object3D;return t.transparent?void(a.background=null):void(a.background=new THREE.Color(t.color))}})},{"../../core/component":102}],74:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("debug",{schema:{default:!0}})},{"../../core/component":102}],75:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,a=t.querySelector(".a-enter-vr");!0===this.data?(a&&a.classList.add("embedded"),t.removeFullScreenStyles()):(a&&a.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":102}],76:[function(t,r){function a(t){var r;return r="exponential"===t.type?new i.FogExp2(t.color,t.density):new i.Fog(t.color,t.near,t.far),r.name=t.type,r}var o=t("../../core/component").registerComponent,i=t("../../lib/three"),n=t("../../utils/debug"),s=n("components:fog:warn");r.exports.Component=o("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var r=this.data,n=this.el,l=this.el.object3D.fog;return n.isScene?l&&r.type===l.name?void Object.keys(this.schema).forEach(function(t){var a=r[t];"color"===t&&(a=new i.Color(a)),l[t]=a}):(n.object3D.fog=a(r),void n.systems.material.updateMaterials()):void s("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=.1)}})},{"../../core/component":102,"../../lib/three":150,"../../utils/debug":168}],77:[function(t,r){(function(a){var o=t("../../constants").AFRAME_INJECTED,n=t("../../utils/bind"),i=t("../../../package"),s=t("../../core/component").registerComponent,l="https://unpkg.com/aframe-inspector@"+function(t){var r=t.split(".");return r[2]="x",r.join(".")}(i.version)+"/dist/aframe-inspector.min.js",d="dev"===a.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":l;r.exports.Component=s("inspector",{schema:{url:{default:d}},init:function(){this.onKeydown=n(this.onKeydown,this),this.onMessage=n(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML="Loading Inspector"+"<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>"},remove:function(){this.removeEventListeners()},onKeydown:function(t){var r=73===t.keyCode&&t.ctrlKey&&t.altKey;this.data&&r&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.injectInspector()},injectInspector:function(){var t=this,r;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),r=document.createElement("script"),r.src=this.data.url,r.setAttribute("data-name","aframe-inspector"),r.setAttribute(o,""),r.onload=function(){AFRAME.INSPECTOR.open(),t.hideLoader(),t.removeEventListeners()},r.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(r),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":51,"../../constants":93,"../../core/component":102,"../../utils/bind":166,_process:6}],78:[function(t,r){var a=t("../../core/component").registerComponent,o=t("../../utils/").shouldCaptureKeyEvent;r.exports.Component=a("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){this.onKeyup=this.onKeyup.bind(this)},update:function(){var r=this.data;this.enterVREnabled=r.enterVR},play:function(){window.addEventListener("keyup",this.onKeyup,!1)},pause:function(){window.removeEventListener("keyup",this.onKeyup)},onKeyup:function(r){var a=this.el;o(r)&&(this.enterVREnabled&&70===r.keyCode&&a.enterVR(),this.enterVREnabled&&27===r.keyCode&&a.exitVR())}})},{"../../core/component":102,"../../utils/":172}],79:[function(t,r){var a=t("../../utils/debug"),o=t("../../core/component").registerComponent,n=a("components:pool:warn");r.exports.Component=o("pool",{schema:{container:{default:""},mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var r;for(this.availableEls=[],this.usedEls=[],this.data.mixin||n("No mixin provided for pool component."),this.data.container&&(this.container=document.querySelector(this.data.container),this.container||n("Container "+this.data.container+" not found.")),this.container=this.container||this.el,r=0;r<this.data.size;++r)this.createEntity()},update:function(r){var t=this.data;r.mixin===t.mixin&&r.size===t.size||this.initPool()},createEntity:function(){var r;r=document.createElement("a-entity"),r.play=this.wrapPlay(r.play),r.setAttribute("mixin",this.data.mixin),r.object3D.visible=!1,r.pause(),this.container.appendChild(r),this.availableEls.push(r)},wrapPlay:function(r){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&r.call(this)}},requestEntity:function(){var r;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void n("Requested entity from empty pool: "+this.name);n("Requested entity from empty pool. This pool is dynamic and will resize automatically. You might want to increase its initial size: "+this.name),this.createEntity()}return r=this.availableEls.shift(),this.usedEls.push(r),r.object3D.visible=!0,r},returnEntity:function(r){var t=this.usedEls.indexOf(r);return-1===t?void n("The returned entity was not previously pooled from "+this.name):(this.usedEls.splice(t,1),this.availableEls.push(r),r.object3D.visible=!1,r.pause(),r)}})},{"../../core/component":102,"../../utils/debug":168}],80:[function(t,r){var a=t("../../core/component").registerComponent,o=t("../../utils/debug"),n=o("components:renderer:warn");r.exports.Component=a("renderer",{schema:{antialias:{default:"auto",oneOf:["true","false","auto"]},gammaOutput:{default:!1},physicallyCorrectLights:{default:!1},sortObjects:{default:!1}},init:function(){this.el.isScene||n("Renderer component can only be applied to <a-scene>")},update:function(o){var s=this.data,t=this.el,a=t.renderer,r=!1;0<t.time&&s.antialias!==o.antialias&&n("Property \"antialias\" cannot be changed after scene initialization"),s.sortObjects!==o.sortObjects&&(a.sortObjects=s.sortObjects),s.gammaOutput!==o.gammaOutput&&(a.gammaOutput=s.gammaOutput,r=!0),s.physicallyCorrectLights!==o.physicallyCorrectLights&&(a.physicallyCorrectLights=s.physicallyCorrectLights,r=!0),r&&0!==t.time&&(n("Modifying renderer properties at runtime requires shader update and may drop frames."),t.object3D.traverse(function(t){t.isMesh&&(Array.isArray(t.material)?t.material.forEach(function(t){t.needsUpdate=!0}):t.material.needsUpdate=!0)}))}})},{"../../core/component":102,"../../utils/debug":168}],81:[function(t,r){var a=t("../../core/component").registerComponent,o=t("../../lib/three");r.exports.Component=a("screenshot",{schema:{width:{default:4096},height:{default:2048},camera:{type:"selector"}},init:function(){function r(){var r=n.renderer.getContext();r&&(t.cubeMapSize=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),t.material=new o.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:"attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main()  {\n  vUv = vec2( 1.- uv.x, uv.y );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform samplerCube map;\nvarying vec2 vUv;\n#define M_PI 3.141592653589793238462643383279\nvoid main() {\n  vec2 uv = vUv;\n  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;\n  float latitude = uv.y * M_PI;\n  vec3 dir = vec3(\n    - sin( longitude ) * sin( latitude ),\n    cos( latitude ),\n    - cos( longitude ) * sin( latitude )\n  );\n  normalize( dir );\n  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );\n}",side:o.DoubleSide}),t.quad=new o.Mesh(new o.PlaneBufferGeometry(1,1),t.material),t.quad.visible=!1,t.camera=new o.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),n.camera&&n.camera.add(t.quad),t.onKeyDown=t.onKeyDown.bind(t),t.onCameraActive=t.onCameraActive.bind(t),n.addEventListener("camera-set-active",t.onCameraActive))}var n=this.el,t=this;n.renderer?r():n.addEventListener("render-target-loaded",r)},getRenderTarget:function(r,a){return new o.WebGLRenderTarget(r,a,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,wrapS:o.ClampToEdgeWrapping,wrapT:o.ClampToEdgeWrapping,format:o.RGBAFormat,type:o.UnsignedByteType})},resize:function(r,a){this.quad.scale.set(r,a,1),this.camera.left=-1*r/2,this.camera.right=r/2,this.camera.top=a/2,this.camera.bottom=-1*a/2,this.camera.updateProjectionMatrix(),this.canvas.width=r,this.canvas.height=a},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(r){var a=this.quad.parent;a&&a.remove(this.quad),r.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(r){var o=83===r.keyCode&&r.ctrlKey&&r.altKey;if(this.data&&o){var t=r.shiftKey?"equirectangular":"perspective";this.capture(t)}},setCapture:function(n){var s=this.el,r,l,d;return"perspective"===n?(this.quad.visible=!1,l=this.data.camera&&this.data.camera.components.camera.camera||s.camera,r={width:this.data.width,height:this.data.height}):(l=this.camera,l.position.copy(s.camera.getWorldPosition()),l.rotation.copy(s.camera.getWorldRotation()),d=new o.CubeCamera(s.camera.near,s.camera.far,O(this.cubeMapSize,2048)),d.position.copy(s.camera.getWorldPosition()),d.rotation.copy(s.camera.getWorldRotation()),d.updateCubeMap(s.renderer,s.object3D),this.quad.material.uniforms.map.value=d.renderTarget.texture,r={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:l,size:r,projection:n}},capture:function(r){var a=this.setCapture(r);this.renderCapture(a.camera,a.size,a.projection),this.saveCapture()},getCanvas:function(r){var a=this.setCapture(r);return this.renderCapture(a.camera,a.size,a.projection),this.canvas},renderCapture:function(s,l,t){var a=this.el.renderer.autoClear,o=this.el,c=this.el.renderer,d,i,r;i=this.getRenderTarget(l.width,l.height),r=new Uint8Array(4*l.width*l.height),this.resize(l.width,l.height),c.autoClear=!0,c.render(o.object3D,s,i,!0),c.autoClear=a,c.readRenderTargetPixels(i,0,0,l.width,l.height,r),"perspective"===t&&(r=this.flipPixelsVertically(r,l.width,l.height)),d=new ImageData(new Uint8ClampedArray(r),l.width,l.height),this.quad.visible=!1,this.ctx.putImageData(d,0,0)},flipPixelsVertically:function(o,s,t){for(var a=o.slice(0),i=0;i<s;++i)for(var r=0;r<t;++r)a[4*i+4*(r*s)]=o[4*i+4*((t-r)*s)],a[4*i+1+4*(r*s)]=o[4*i+1+4*((t-r)*s)],a[4*i+2+4*(r*s)]=o[4*i+2+4*((t-r)*s)],a[4*i+3+4*(r*s)]=o[4*i+3+4*((t-r)*s)];return a},saveCapture:function(){this.canvas.toBlob(function(r){var o="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",t=document.createElement("a"),a=URL.createObjectURL(r);t.href=a,t.setAttribute("download",o),t.innerHTML="downloading...",t.style.display="none",document.body.appendChild(t),setTimeout(function(){t.click(),document.body.removeChild(t)},1)},"image/png")}})},{"../../core/component":102,"../../lib/three":150}],82:[function(t,r){function a(r){var t=new c(r.renderer),a=new l(r),o=r.isMobile?[]:[t,a];return new n({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:o})}var o=t("../../core/component").registerComponent,n=t("../../../vendor/rStats"),i=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var l=window.aframeStats,s=i.bind,d="a-hidden",c=window.threeStats;r.exports.Component=o("stats",{schema:{default:!0},init:function(){var r=this.el;"false"!==i.getUrlParameter("stats")&&(this.stats=a(r),this.statsEl=document.querySelector(".rs-base"),this.hideBound=s(this.hide,this),this.showBound=s(this.show,this),r.addEventListener("enter-vr",this.hideBound),r.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var r=this.stats;r&&(r("rAF").tick(),r("FPS").frame(),r().update())},hide:function(){this.statsEl.classList.add(d)},show:function(){this.statsEl.classList.remove(d)}})},{"../../../vendor/rStats":180,"../../../vendor/rStats.extras":179,"../../core/component":102,"../../lib/rStatsAframe":149,"../../utils":172}],83:[function(t,r){function a(r){var t,a;return a=document.createElement("div"),a.classList.add(d),a.setAttribute(i.AFRAME_INJECTED,""),t=document.createElement("button"),t.className=c,t.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),t.setAttribute(i.AFRAME_INJECTED,""),a.appendChild(t),t.addEventListener("click",function(t){r(),t.stopPropagation()}),a}function o(r){var t=document.createElement("div");t.className=u,t.classList.add(p),t.setAttribute(i.AFRAME_INJECTED,"");var a=document.createElement("button");return a.setAttribute(i.AFRAME_INJECTED,""),a.innerHTML="Exit VR",a.addEventListener("click",r),t.appendChild(a),t}var n=t("../../core/component").registerComponent,i=t("../../constants/"),s=t("../../utils/"),l=s.bind,d="a-enter-vr",c="a-enter-vr-button",p="a-hidden",u="a-orientation-modal";r.exports.Component=n("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var r=this,t=this.el;"false"!==s.getUrlParameter("ui")&&(this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,this.bindMethods(),t.addEventListener("enter-vr",this.updateEnterVRInterface),t.addEventListener("exit-vr",this.updateEnterVRInterface),window.addEventListener("message",function(t){"loaderReady"===t.data.type&&(r.insideLoader=!0,r.remove())}),window.addEventListener("orientationchange",this.toggleOrientationModalIfNeeded))},bindMethods:function(){this.onEnterVRButtonClick=l(this.onEnterVRButtonClick,this),this.onModalClick=l(this.onModalClick,this),this.toggleOrientationModalIfNeeded=l(this.toggleOrientationModalIfNeeded,this),this.updateEnterVRInterface=l(this.updateEnterVRInterface,this)},onModalClick:function(){this.el.exitVR()},onEnterVRButtonClick:function(){this.el.enterVR()},update:function(){var r=this.el;return!this.data.enabled||this.insideLoader||"false"===s.getUrlParameter("ui")?this.remove():void(this.enterVREl||this.orientationModalEl||(this.enterVREl=a(this.onEnterVRButtonClick),r.appendChild(this.enterVREl),this.orientationModalEl=o(this.onModalClick),r.appendChild(this.orientationModalEl),this.updateEnterVRInterface()))},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(r){r&&r.parentNode&&r.parentNode.removeChild(r)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var r=this.el;this.enterVREl&&(r.is("vr-mode")?this.enterVREl.classList.add(p):this.enterVREl.classList.remove(p))},toggleOrientationModalIfNeeded:function(){var r=this.el,t=this.orientationModalEl;t&&r.isMobile&&(!s.device.isLandscape()&&r.is("vr-mode")?t.classList.remove(p):t.classList.add(p))}})},{"../../constants/":93,"../../core/component":102,"../../utils/":172}],84:[function(t,r){var a=t("../core/component"),o=t("../lib/three"),n=t("../utils/bind"),i=a.registerComponent;r.exports.Component=i("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=n(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(r,l){var t=this.el.sceneEl;this.el.object3D.traverse(function(n){if(n instanceof o.Mesh&&(n.castShadow=r,n.receiveShadow=l,t.hasLoaded&&n.material))for(var s=Array.isArray(n.material)?n.material:[n.material],a=0;a<s.length;a++)s[a].needsUpdate=!0})}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166}],85:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/debug"),n=t("../utils/bind"),l=t("../lib/three"),i=o("components:sound:warn");r.exports.Component=a("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new l.AudioLoader,this.pool=new l.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=n(this.playSound,this)},update:function(r){var a=this.data,t=a.src!==r.src;if(t){if(!a.src)return void i("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(t){a.positional&&(t.setDistanceModel(a.distanceModel),t.setMaxDistance(a.maxDistance),t.setRefDistance(a.refDistance),t.setRolloffFactor(a.rolloffFactor)),t.setLoop(a.loop),t.setVolume(a.volume),t.isPaused=!1}),a.on!==r.on&&this.updateEventListener(r.on),t){var o=this;this.loaded=!1,this.audioLoader.load(a.src,function(r){o.pool.children.forEach(function(a){a.setBuffer(r)}),o.loaded=!0,l.Cache.remove(a.src),(o.data.autoplay||o.mustPlay)&&o.playSound(),o.el.emit("sound-loaded",o.evtDetail)})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(t){t.disconnect()})}catch(t){i("Audio source not properly disconnected")}},updateEventListener:function(r){var a=this.el;r&&a.removeEventListener(r,this.playSound),a.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var r=this,a=this.el,t=a.sceneEl;0<this.pool.children.length&&(this.stopSound(),a.removeObject3D("sound"));var o=this.listener=t.audioListener||new l.AudioListener;t.audioListener=o,t.camera&&t.camera.add(o),t.addEventListener("camera-set-active",function(t){t.detail.cameraEl.getObject3D("camera").add(o)}),this.pool=new l.Group;for(var i=0,n;i<this.data.poolSize;i++)n=this.data.positional?new l.PositionalAudio(o):new l.Audio(o),this.pool.add(n);a.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(t){t.onEnded=function(){t.isPlaying=!1,a.emit("sound-ended",r.evtDetail)}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())})},playSound:function(){if(!this.loaded)return i("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var r=!1;return(this.isPlaying=!0,this.pool.children.forEach(function(a){if(!a.isPlaying&&a.buffer&&!r)return a.play(),a.isPaused=!1,void(r=!0)}),!r)?void i("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el):void(this.mustPlay=!1)},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.stop()})}})},{"../core/component":102,"../lib/three":150,"../utils/bind":166,"../utils/debug":168}],86:[function(t,r){function a(r){return"back"===r?g.FrontSide:"double"===r?g.DoubleSide:g.BackSide}function l(r){return r=h.clone(r),void 0!==r.lineHeight&&(r.lineHeight=parseFloat(r.lineHeight),isFinite(r.lineHeight)||(r.lineHeight=void 0)),void 0!==r.width&&(r.width=parseFloat(r.width),isFinite(r.width)||(r.width=void 0)),r}function o(a,s){return new Promise(function(t,r){c(a,function(n,o){return n?(y("Error loading font",a),void r(n)):void(0<=a.indexOf("/Roboto-msdf.json")&&(s=30),s&&o.chars.map(function(r){r.yoffset+=s}),t(o))})})}function n(a){return new Promise(function(o,t){new g.ImageLoader().load(a,function(r){o(r)},void 0,function(){y("Error loading font image",a),t(null)})})}function s(a,t,i){var r,s;return s=new f[t].Shader,s.el=a,s.init(i),s.update(i),r=s.material,r.transparent=i.transparent,{material:r,shader:s}}function p(a,t,o){return a||(.5+t)*o}function d(a){var o=0,i=0,r=0;return a.chars.map(function(a){o+=a.xadvance,48<=a.id&&57>=a.id&&(r++,i+=a.xadvance)}),r?i/r:o/a.chars.length}var i=t("three-bmfont-text"),c=t("load-bmfont"),u=t("../core/component").registerComponent,m=t("../core/shader"),g=t("../lib/three"),h=t("../utils/"),y=h.debug("components:text:error"),f=m.shaders,A=h.debug("components:text:warn"),M="https://cdn.aframe.io/fonts/",x={aileronsemibold:M+"Aileron-Semibold.fnt",dejavu:M+"DejaVu-sdf.fnt",exo2bold:M+"Exo2Bold.fnt",exo2semibold:M+"Exo2SemiBold.fnt",kelsonsans:M+"KelsonSans.fnt",monoid:M+"Monoid.fnt",mozillavr:M+"mozillavr.fnt",roboto:M+"Roboto-msdf.json",sourcecodepro:M+"SourceCodePro.fnt"},E=["roboto"],v="roboto";r.exports.FONTS=x;var T=new function(){var a=this.cache={};this.get=function(t,o){return t in a?a[t]:(a[t]=o(),a[t])}},b={},L={};r.exports.Component=u("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:v},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},negate:{type:"boolean",default:!0},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:f},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},xOffset:{type:"number",default:0},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.shaderData={},this.geometry=i(),this.createOrUpdateMaterial(),this.mesh=new g.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(a){var t=l(this.data),o=this.currentFont,r=this.getFontImageSrc();return(L[r]?this.texture=L[r]:(this.texture=L[r]=new g.Texture,this.texture.anisotropy=16),this.createOrUpdateMaterial(),a.font!==t.font)?void this.updateFont():void(o&&(this.updateGeometry(this.geometry,t,o),this.updateLayout(t)))},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var l=this.data,n=this.material,o=this.shaderData,i,d,c;return(c=l.shader,-1!==E.indexOf(l.font)||0<=l.font.indexOf("-msdf.")?c="msdf":l.font in x&&-1===E.indexOf(l.font)&&(c="sdf"),i=(this.shaderObject&&this.shaderObject.name)!==c,o.alphaTest=l.alphaTest,o.color=l.color,o.map=this.texture,o.opacity=l.opacity,o.side=a(l.side),o.transparent=l.transparent,o.negate=l.negate,!i)?(this.shaderObject.update(o),n.transparent=o.transparent,void(n.side=o.side)):void(d=s(this.el,c,o),this.material=d.material,this.shaderObject=d.shader,this.material.side=o.side,this.mesh&&(this.mesh.material=this.material))},updateFont:function(){var c=this.data,a=this.el,r=this.geometry,p=this,u;c.font||A("No font specified. Using the default font."),this.mesh.visible=!1,u=this.lookupFont(c.font||v)||c.font,T.get(u,function(){return o(u,c.yOffset)}).then(function(o){var t,m;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");b[u]||(o.widthFactor=b[o]=d(o)),t=l(c),p.updateGeometry(r,p.data,o),p.currentFont=o,p.updateLayout(t),m=p.getFontImageSrc(),T.get(m,function(){return n(m)}).then(function(r){var t=p.texture;t.image=r,t.needsUpdate=!0,L[m]=t,p.texture=t,p.mesh.visible=!0,a.emit("textfontset",{font:c.font,fontObj:o})}).catch(function(r){throw y(r),r})}).catch(function(r){throw y(r),r})},getFontImageSrc:function(){var r=this.lookupFont(this.data.font||v)||this.data.font;return this.data.fontImage||r.replace(/(\.fnt)|(\.json)/,".png")},updateLayout:function(m){var t=this.el,d=this.geometry,u=t.getAttribute("geometry"),l=d.layout,g=this.mesh,c,y,r,n,o,i,a,s;if(u=t.getAttribute("geometry"),i=m.width||u&&u.width||1,n=p(m.wrapPixels,m.wrapCount,this.currentFont.widthFactor),o=i/n,r=o*(l.height+l.descender),u&&(u.width||t.setAttribute("geometry","width",i),u.height||t.setAttribute("geometry","height",r)),"left"===(c="align"===m.anchor?m.align:m.anchor))a=0;else if("right"===c)a=-1*l.width;else{if("center"!==c)throw new TypeError("Invalid text.anchor property value",c);a=-1*l.width/2}if("bottom"===(y=m.baseline))s=0;else if("top"===y)s=-1*l.height+l.ascender;else{if("center"!==y)throw new TypeError("Invalid text.baseline property value",y);s=-1*l.height/2}g.position.x=a*o+m.xOffset,g.position.y=s*o,g.position.z=m.zOffset,g.scale.set(o,-1*o,o),this.geometry.computeBoundingSphere()},lookupFont:function(r){return x[r]},updateGeometry:function(a,t,o){a.update(h.extend({},t,{font:o,width:p(t.wrapPixels,t.wrapCount,o.widthFactor),text:t.value.toString().replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:t.lineHeight||o.common.lineHeight}))}})},{"../core/component":102,"../core/shader":111,"../lib/three":150,"../utils/":172,"load-bmfont":24,"three-bmfont-text":36}],87:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),n=t("../constants").DEFAULT_CAMERA_HEIGHT,s=t("../lib/three"),d=t("../constants").DEFAULT_HANDEDNESS,c={x:.175,y:-.3,z:-.03},p={x:0,y:0,z:-.175};r.exports.Component=a("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},orientationOffset:{type:"vec3"},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.changedAxes=[],this.targetControllerNumber=this.data.controller,this.axisMoveEventDetail={axis:this.axis,changed:this.changedAxes},this.deltaControllerPosition=new s.Vector3,this.controllerQuaternion=new s.Quaternion,this.controllerEuler=new s.Euler,this.updateGamepad(),this.el.object3D.matrixAutoUpdate=!1},tick:function(r,t){var a=this.el.getObject3D("mesh");a&&a.update&&a.update(t/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return n},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var r=this.data,t=o.findMatchingController(this.system.controllers,r.id,r.idPrefix,r.hand,r.controller);this.controller=t},applyArmModel:function(u){var t=this.controller,s=this.controllerEuler,a=this.controllerQuaternion,l=this.deltaControllerPosition,m,g,i,o,n;g=this.getHeadElement(),i=g.object3D,n=this.defaultUserHeight(),o=t.pose,m=(t?t.hand:void 0)||d,u.copy(i.position),l.set(c.x*("left"===m?-1:"right"===m?1:0),c.y,c.z),l.multiplyScalar(n),l.applyAxisAngle(i.up,i.rotation.y),u.add(l),l.set(p.x,p.y,p.z),l.multiplyScalar(n),o.orientation?a.fromArray(o.orientation):a.copy(i.quaternion),s.setFromQuaternion(a),s.set(s.x,s.y,0),l.applyEuler(s),u.add(l)},updatePose:function(){var a=this.controller,i=this.data,o=this.el.object3D,n=this.system.vrDisplay,r,t;a&&(r=a.pose,r.position?o.position.fromArray(r.position):i.armModel&&this.applyArmModel(o.position),r.orientation&&o.quaternion.fromArray(r.orientation),n&&r.position&&(t=this.el.sceneEl.renderer.vr.getStandingMatrix(),o.matrixAutoUpdate=!1,o.matrix.compose(o.position,o.quaternion,o.scale),o.matrix.multiplyMatrices(t,o.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale)),o.rotateX(this.data.orientationOffset.x*s.Math.DEG2RAD),o.rotateY(this.data.orientationOffset.y*s.Math.DEG2RAD),o.rotateZ(this.data.orientationOffset.z*s.Math.DEG2RAD),o.updateMatrix(),o.matrixWorldNeedsUpdate=!0)},updateButtons:function(){var r=this.controller,a,t;if(r){for(t=0;t<r.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),a=r.buttons[t],this.handleButton(t,a);this.handleAxes()}},handleButton:function(r,a){return!!(this.handlePress(r,a)|this.handleTouch(r,a)|this.handleValue(r,a))&&(this.el.emit("buttonchanged",{id:r,state:a}),!0)},handleAxes:function(){var r=!1,a=this.controller.axes,i=this.axis,o=this.changedAxes,n;for(this.changedAxes.length=0,n=0;n<a.length;++n)o.push(i[n]!==a[n]),o[n]&&(r=!0);if(!r)return!1;for(this.axis.length=0,n=0;n<a.length;n++)this.axis.push(a[n]);return this.el.emit("axismove",this.axisMoveEventDetail),!0},handlePress:function(r,a){var n=this.buttonStates[r],o;return a.pressed!==n.pressed&&(o=a.pressed?"down":"up",this.el.emit("button"+o,{id:r,state:a}),n.pressed=a.pressed,!0)},handleTouch:function(r,a){var n=this.buttonStates[r],o;return a.touched!==n.touched&&(o=a.touched?"start":"end",this.el.emit("touch"+o,{id:r,state:a},!0,{touches:[]}),n.touched=a.touched,!0)},handleValue:function(r,t){var a=this.buttonStates[r];return t.value!==a.value&&(a.value=t.value,!0)}})},{"../constants":93,"../core/component":102,"../lib/three":150,"../utils/tracked-controls":178}],88:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":102}],89:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/"),n=o.bind,i=t("../utils/tracked-controls"),s=i.checkControllerPresentAndSetup,l=i.emitIfAxesChanged,d=i.onButtonEvent,c="OpenVR ";r.exports.Component=a("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},orientationOffset:{type:"vec3"}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var r=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=s,this.controllerPresent=!1,this.emitIfAxesChanged=l,this.lastControllerCheck=0,this.onButtonChanged=n(this.onButtonChanged,this),this.onButtonDown=function(t){d(t.detail.id,"down",r)},this.onButtonUp=function(t){d(t.detail.id,"up",r)},this.onButtonTouchEnd=function(t){d(t.detail.id,"touchend",r)},this.onButtonTouchStart=function(t){d(t.detail.id,"touchstart",r)},this.onAxisMoved=n(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=n(this.onModelLoaded,this),this.onControllersUpdate=n(this.onControllersUpdate,this),this.checkIfControllerPresent=n(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=n(this.removeControllersUpdateListener,this),this.onAxisMoved=n(this.onAxisMoved,this)},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var r=this.data,t="right"===r.hand?0:"left"===r.hand?1:2;this.checkControllerPresentAndSetup(this,c,{index:t})},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{idPrefix:c,controller:"right"===t.hand?0:"left"===t.hand?1:2,orientationOffset:t.orientationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id],a=this.buttonMeshes,o;t&&("trigger"===t&&(o=r.detail.state.value,a&&a.trigger&&(a.trigger.rotation.x=-o*(ga/12))),this.el.emit(t+"changed",r.detail.state))},onModelLoaded:function(r){var t=r.detail.model,a=this,o;this.data.model&&(o=this.buttonMeshes={},o.grip={left:t.getObjectByName("leftgrip"),right:t.getObjectByName("rightgrip")},o.menu=t.getObjectByName("menubutton"),o.system=t.getObjectByName("systembutton"),o.trackpad=t.getObjectByName("touchpad"),o.trigger=t.getObjectByName("trigger"),Object.keys(o).forEach(function(r){a.setButtonColor(r,a.data.buttonColor)}),t.position.set(0,-.015,.04))},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},updateModel:function(r,t){var a;this.data.model&&(-1!==t.indexOf("touch")||(a="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,this.setButtonColor(r,a)))},setButtonColor:function(r,t){var a=this.buttonMeshes;if(a)return"grip"===r?(a.grip.left.material.color.set(t),void a.grip.right.material.color.set(t)):void a[r].material.color.set(t)}})},{"../core/component":102,"../utils/":172,"../utils/tracked-controls":178}],90:[function(t,r){function l(r){for(var a in r)return!1;return!0}var a=t("../constants").keyboardevent.KEYCODE_TO_CODE,o=t("../core/component").registerComponent,d=t("../lib/three"),n=t("../utils/"),i=n.bind,s=n.shouldCaptureKeyEvent,c=1e-5,p=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];r.exports.Component=o("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new d.Vector3,this.onBlur=i(this.onBlur,this),this.onFocus=i(this.onFocus,this),this.onKeyDown=i(this.onKeyDown,this),this.onKeyUp=i(this.onKeyUp,this),this.onVisibilityChange=i(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(d,c){var t=this.data,s=this.el,o=this.position,r=this.velocity,a,i;(r[t.adAxis]||r[t.wsAxis]||!l(this.keys))&&(c/=1e3,this.updateVelocity(c),(r[t.adAxis]||r[t.wsAxis])&&(a=s.getAttribute("position"),i=this.getMovementVector(c),o.x=a.x+i.x,o.y=a.y+i.y,o.z=a.z+i.z,s.setAttribute("position",o)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(l){var p=this.data,r=this.keys,a=this.velocity,d,t,i,n,s;return(t=p.adAxis,n=p.wsAxis,l>.2)?(a[t]=0,void(a[n]=0)):void(0!==a[t]&&(a[t]-=a[t]*p.easing*l),0!==a[n]&&(a[n]-=a[n]*p.easing*l),T(a[t])<c&&(a[t]=0),T(a[n])<c&&(a[n]=0),p.enabled&&(d=p.acceleration,p.adEnabled&&(i=p.adInverted?-1:1,(r.KeyA||r.ArrowLeft)&&(a[t]-=i*d*l),(r.KeyD||r.ArrowRight)&&(a[t]+=i*d*l)),p.wsEnabled&&(s=p.wsInverted?-1:1,(r.KeyW||r.ArrowUp)&&(a[n]-=s*d*l),(r.KeyS||r.ArrowDown)&&(a[n]+=s*d*l))))},getMovementVector:function(){var r=new d.Vector3(0,0,0),a=new d.Euler(0,0,0,"YXZ");return function(t){var i=this.el.getAttribute("rotation"),s=this.velocity,o;return r.copy(s),r.multiplyScalar(t),i?(o=this.data.fly?i.x:0,a.set(d.Math.degToRad(o),d.Math.degToRad(i.y),0),r.applyEuler(a),r):r}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(r){var o;s(r)&&(o=r.code||a[r.keyCode],-1!==p.indexOf(o)&&(this.keys[o]=!0))},onKeyUp:function(r){var o;o=r.code||a[r.keyCode],delete this.keys[o]}})},{"../constants":93,"../core/component":102,"../lib/three":150,"../utils/":172}],91:[function(t,r){var a=t("../utils/bind"),o=t("../core/component").registerComponent,n=t("../utils/tracked-controls"),i=n.onButtonEvent,s=t("../utils/"),l=s.debug("components:windows-motion-controls:debug"),d=s.debug("components:windows-motion-controls:warn"),c=t("../constants").DEFAULT_HANDEDNESS,p={left:"left.glb",right:"right.glb",default:"universal.glb"},u="Spatial Controller (Spatial Interaction Source) ",m=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;r.exports.Component=o("windows-motion-controls",{schema:{hand:{default:c},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=a(this.onModelError,this),this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var r=this,t=this.el;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(t){i(t.detail.id,"down",r)},this.onButtonUp=function(t){i(t.detail.id,"up",r)},this.onButtonTouchStart=function(t){i(t.detail.id,"touchstart",r)},this.onButtonTouchEnd=function(t){i(t.detail.id,"touchend",r)},this.onControllerConnected=function(){r.setModelVisibility(!0)},this.onControllerDisconnected=function(){r.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},this.emitIfAxesChanged=n.emitIfAxesChanged,this.checkControllerPresentAndSetup=n.checkControllerPresentAndSetup,t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("axismove",this.onAxisMoved),r.addEventListener("model-error",this.onModelError),r.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("axismove",this.onAxisMoved),r.removeEventListener("model-error",this.onModelError),r.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,u,{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh)return void this.modelReady();var r=this.createControllerModelUrl();this.loadModel(r)},createControllerModelUrl:function(a){var l=this.el.components["tracked-controls"],n=l?l.controller:null,o="default",i=this.data.hand,s;if(n&&(i=n.hand,!a)){var d=n.id.match(m);o=d&&d[0]||o}return s=p[i]||p.default,"https://cdn.aframe.io/controllers/microsoft/"+o+"/"+s},injectTrackedControls:function(){var r=this.data;this.el.setAttribute("tracked-controls",{idPrefix:u,controller:r.pair,hand:r.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(r){var t=this.createControllerModelUrl(!0);r.detail.src===t?d("Failed to load default controller model."):(d("Failed to load controller model for device, attempting to load default."),this.loadModel(t))},loadModel:function(r){this.el.setAttribute("gltf-model","url("+r+")")},onModelLoaded:function(c){function t(r,t){for(var a=0,n=r.children.length,o;a<n;a++)if(o=r.children[a],o&&o.name===t)return o}var p=this.controllerModel=c.detail.model,r=this.loadedMeshInfo,a,u,o,i;if(l("Processing model"),r.buttonMeshes={},r.axisMeshes={},p){for(a=0;a<this.mapping.buttons.length;a++)u=this.mapping.buttonMeshNames[this.mapping.buttons[a]],u?(o=p.getObjectByName(u),o?(i={index:a,value:t(o,"VALUE"),pressed:t(o,"PRESSED"),unpressed:t(o,"UNPRESSED")},i.value&&i.pressed&&i.unpressed?r.buttonMeshes[this.mapping.buttons[a]]=i:d("Missing button submesh under mesh with name: "+u+"(VALUE: "+!!i.value+", PRESSED: "+!!i.pressed+", UNPRESSED:"+!!i.unpressed+")")):d("Missing button mesh with name: "+u)):l("Skipping unknown button at index: "+a+" with mapped name: "+this.mapping.buttons[a]);for(a=0;a<this.mapping.axisMeshNames.length;a++)u=this.mapping.axisMeshNames[a],u?(o=p.getObjectByName(u),o?(i={index:a,value:t(o,"VALUE"),min:t(o,"MIN"),max:t(o,"MAX")},i.value&&i.min&&i.max?r.axisMeshes[a]=i:d("Missing axis submesh under mesh with name: "+u+"(VALUE: "+!!i.value+", MIN: "+!!i.min+", MAX:"+!!i.max+")")):d("Missing axis mesh with name: "+u)):l("Skipping unknown axis at index: "+a);this.calculateRayOriginFromMesh(p),this.setModelVisibility()}l("Model load complete.")},calculateRayOriginFromMesh:function(){var r=new THREE.Quaternion;return function(t){var a;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,a=t.getObjectByName(this.mapping.pointingPoseMeshName)){var n=t.parent;n&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=n),a.getWorldPosition(this.rayOrigin.origin),a.getWorldQuaternion(r),this.rayOrigin.direction.applyQuaternion(r),n&&t.updateMatrixWorld(!0)}else l("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var l=new THREE.Quaternion;return function(t,d){var n=this.loadedMeshInfo.axisMeshes[t];if(n){var o=n.min,i=n.max,s=n.value,r=.5*d+.5;s.setRotationFromQuaternion(l.copy(o.quaternion).slerp(i.quaternion,r)),s.position.lerpVectors(o.position,i.position,r)}}}(),lerpButtonTransform:function(){var a=new THREE.Quaternion;return function(t,l){var n=this.loadedMeshInfo.buttonMeshes[t];if(n){var o=n.unpressed,i=n.pressed,s=n.value;s.setRotationFromQuaternion(a.copy(o.quaternion).slerp(i.quaternion,l)),s.position.lerpVectors(o.position,i.position,l)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,r.detail.state.value),this.el.emit(t+"changed",r.detail.state))},onAxisMoved:function(r){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var a=0;a<t;a++)this.lerpAxisTransform(a,r.detail.axis[a]||0);this.emitIfAxesChanged(this,this.mapping.axes,r)},setModelVisibility:function(r){var t=this.el.getObject3D("mesh");r=void 0===r?this.modelVisible:r,this.modelVisible=r,t&&(t.visible=r)}})},{"../constants":93,"../core/component":102,"../utils/":172,"../utils/bind":166,"../utils/tracked-controls":178}],92:[function(t,r){var a=t("@tweenjs/tween.js"),o={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},n={linear:a.Easing.Linear.None,ease:a.Easing.Cubic.InOut,"ease-in":a.Easing.Cubic.In,"ease-out":a.Easing.Cubic.Out,"ease-in-out":a.Easing.Cubic.InOut,"ease-cubic":a.Easing.Cubic.In,"ease-in-cubic":a.Easing.Cubic.In,"ease-out-cubic":a.Easing.Cubic.Out,"ease-in-out-cubic":a.Easing.Cubic.InOut,"ease-quad":a.Easing.Quadratic.InOut,"ease-in-quad":a.Easing.Quadratic.In,"ease-out-quad":a.Easing.Quadratic.Out,"ease-in-out-quad":a.Easing.Quadratic.InOut,"ease-quart":a.Easing.Quartic.InOut,"ease-in-quart":a.Easing.Quartic.In,"ease-out-quart":a.Easing.Quartic.Out,"ease-in-out-quart":a.Easing.Quartic.InOut,"ease-quint":a.Easing.Quintic.InOut,"ease-in-quint":a.Easing.Quintic.In,"ease-out-quint":a.Easing.Quintic.Out,"ease-in-out-quint":a.Easing.Quintic.InOut,"ease-sine":a.Easing.Sinusoidal.InOut,"ease-in-sine":a.Easing.Sinusoidal.In,"ease-out-sine":a.Easing.Sinusoidal.Out,"ease-in-out-sine":a.Easing.Sinusoidal.InOut,"ease-expo":a.Easing.Exponential.InOut,"ease-in-expo":a.Easing.Exponential.In,"ease-out-expo":a.Easing.Exponential.Out,"ease-in-out-expo":a.Easing.Exponential.InOut,"ease-circ":a.Easing.Circular.InOut,"ease-in-circ":a.Easing.Circular.In,"ease-out-circ":a.Easing.Circular.Out,"ease-in-out-circ":a.Easing.Circular.InOut,"ease-elastic":a.Easing.Elastic.InOut,"ease-in-elastic":a.Easing.Elastic.In,"ease-out-elastic":a.Easing.Elastic.Out,"ease-in-out-elastic":a.Easing.Elastic.InOut,"ease-back":a.Easing.Back.InOut,"ease-in-back":a.Easing.Back.In,"ease-out-back":a.Easing.Back.Out,"ease-in-out-back":a.Easing.Back.InOut,"ease-bounce":a.Easing.Bounce.InOut,"ease-in-bounce":a.Easing.Bounce.In,"ease-out-bounce":a.Easing.Bounce.Out,"ease-in-out-bounce":a.Easing.Bounce.InOut},i={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:o.normal,fill:i.forwards,from:void 0,repeat:0,to:void 0};r.exports.defaults=s,r.exports.directions=o,r.exports.easingFunctions=n,r.exports.fills=i,r.exports.repeats={indefinite:"indefinite"}},{"@tweenjs/tween.js":1}],93:[function(t,r){r.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:t("./animation"),keyboardevent:t("./keyboardevent")}},{"./animation":92,"./keyboardevent":94}],94:[function(t,r){r.exports={KEYCODE_TO_CODE:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",65:"KeyA",68:"KeyD",83:"KeyS",87:"KeyW"}}},{}],95:[function(t,r){function m(r){return p.extend({},r)}function g(m,t,g,i,n){function f(){h=new A.Color(g||m.getAttribute(t)),E=new A.Color(i),l=function(r){1<M.length&&m.setAttribute(M[0],M[1],s(r)),m.setAttribute(t,s(r))}}var M=t.split("."),h={},E={},T,b,r,L,l;return 2===M.length?function(){var t=M[0],r=M[1],o=m.components[t],n=o&&o.schema;return n&&n[r]&&"color"===n[r].type}()?f():function(){L=M[0],r=M[1],b=m.components[L],b||(m.setAttribute(L,""),b=m.components[L]),T=b.schema,h[t]=void 0===g?x(m,t):g,h[t]=y(h[t],T[r]),E[t]=y(i,T[r]),l=function(a){t in a&&m.setAttribute(L,r,a[t])}}():i&&v(i)?function(){h=g?u.parse(g):n,E=u.parse(i),l=function(r){m.setAttribute(t,r)}}():-1===["true","false"].indexOf(i)?isNaN(i)?f():function(){h[t]=void 0===g?parseFloat(m.getAttribute(t)):parseFloat(g),E[t]=parseFloat(i),l=function(r){m.setAttribute(t,r[t])}}():function(){h[t]=void 0!==g&&a(g),h[t]=o(h[t]),E[t]=o(a(i)),l=function(r){m.setAttribute(t,!!r[t])}}(),{from:h,partialSetAttribute:l,to:E}}function a(r){return"true"===r}function o(r){return r?1:0}function n(r){var t=r.toString(16);return 1===t.length?"0"+t:t}function i(r){return D(255*O(T(r),1))}function s(r){return"#"+["r","g","b"].map(function(t){return n(i(r[t]))}).join("")}var l=t("./a-node"),d=t("../constants/animation"),u=t("../utils/").coordinates,y=t("./schema").parseProperty,c=t("./a-register-element").registerElement,f=t("@tweenjs/tween.js"),A=t("../lib/three"),p=t("../utils/"),M=p.bind,x=p.entity.getComponentProperty,h=d.defaults,E=d.directions,b=d.easingFunctions,L=d.fills,N=d.repeats,v=u.isCoordinates,w=p.debug("core:a-animation:warn"),C=!1;r.exports.AAnimation=c("a-animation",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null,C||(w("<a-animation> has been deprecated and will be replaced by the animation component: https://www.npmjs.com/package/aframe-animation-component"),C=!0)}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var y=this,a=y.data,o=y.el,s=a.attribute,r=parseInt(a.delay,10),u=x(o,s),l=y.getDirection(a.direction),d=b[a.easing],h=a.fill,c=a.repeat===N.indefinite?1/0:0,p=!1,A,t,v,i;return A=g(o,s,a.from||y.initialValue,a.to,u),t=A.from,v=A.to,y.partialSetAttribute=A.partialSetAttribute,void 0===y.count&&(y.count=c===1/0?0:parseInt(a.repeat,10)),isNaN(r)&&(r=0),y.initialValue=y.initialValue||m(u),c===1/0&&h===L.forwards&&-1!==[E.alternate,E.alternateReverse].indexOf(a.direction)&&(p=!0),l===E.reverse&&(i=v,v=m(t),t=m(i)),-1!==[L.backwards,L.both].indexOf(h)&&y.partialSetAttribute(t),new f.Tween(m(t)).to(v,a.dur).delay(r).easing(d).repeat(c).yoyo(p).onUpdate(function(){y.partialSetAttribute(this)}).onComplete(M(y.onCompleted,y))}},update:{value:function(){var r=this.data;"infinite"===r.repeat&&console.warn("Using 'infinite' as 'repeat' value is invalid.  Use 'indefinite' instead."),""===r.begin||isNaN(r.begin)||(console.warn("Using 'begin' to specify a delay is deprecated. Use 'delay' instead."),r.delay=r.begin,r.begin="");var t=r.begin,a=r.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:t,end:a},this.addEventListeners(this.evt),""===t&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var r=this.data;return(this.isRunning=!1,-1!==[L.backwards,L.none].indexOf(r.fill)&&this.partialSetAttribute(this.initialValue),0===this.count)?(this.count=void 0,void this.emit("animationend")):void(this.isRunning=!1,this.count--,this.start())}},start:{value:function(){var r=this;return this.el.hasLoaded?void(!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))):void this.el.addEventListener("loaded",function(){r.start()})},writable:!0},stop:{value:function(){var r=this.tween;r&&(r.stop(),this.isRunning=!1,-1!==[L.backwards,L.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(r){return r===E.alternate?(this.prevDirection=this.prevDirection===E.normal?E.reverse:E.normal,this.prevDirection):r===E.alternateReverse?(this.prevDirection=this.prevDirection===E.reverse?E.normal:E.reverse,this.prevDirection):r}},bindMethods:{value:function(){this.start=M(this.start,this),this.stop=M(this.stop,this),this.onStateAdded=M(this.onStateAdded,this),this.onStateRemoved=M(this.onStateRemoved,this)}},addEventListeners:{value:function(r){var a=this.el,o=this;p.splitString(r.begin).forEach(function(r){a.addEventListener(r,o.start)}),p.splitString(r.end).forEach(function(r){a.addEventListener(r,o.stop)}),""===r.begin&&a.addEventListener("play",this.start),a.addEventListener("pause",this.stop),a.addEventListener("stateadded",this.onStateAdded),a.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(r){var a=this.el,o=this.start,i=this.stop;p.splitString(r.begin).forEach(function(r){a.removeEventListener(r,o)}),p.splitString(r.end).forEach(function(r){a.removeEventListener(r,i)}),a.removeEventListener("stateadded",this.onStateAdded),a.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(r){r.detail===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(r){r.detail===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var r={},a,t,o;o=document.querySelector("#"+this.getAttribute("mixin")),t=o?p.getElData(o,h):{},a=p.getElData(this,h),p.extend(r,h,t,a),this.data=r}}})}),r.exports.getAnimationValues=g},{"../constants/animation":92,"../lib/three":150,"../utils/":172,"./a-node":100,"./a-register-element":101,"./schema":110,"@tweenjs/tween.js":1}],96:[function(t,r){function o(a){if(a.hasAttribute("autoplay")||"auto"===a.getAttribute("preload"))return new Promise(function(o,t){function r(){for(var t=0,r=0;r<a.buffered.length;r++)t+=a.buffered.end(r)-a.buffered.start(r);t>=a.duration&&(u.Cache.files[a.getAttribute("src")]=a,o())}return 4===a.readyState?o():a.error?t():(a.addEventListener("loadeddata",r,!1),a.addEventListener("progress",r,!1),void a.addEventListener("error",t,!1))})}function n(r){var o=a(r);return o.tagName&&"video"===o.tagName.toLowerCase()&&(o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline","")),o!==r&&(r.parentNode.appendChild(o),r.parentNode.removeChild(r)),o}function a(r){var a;if(r.hasAttribute("crossorigin"))return r;if(null!==(a=r.getAttribute("src"))){if(-1===a.indexOf("://"))return r;if(i(a)===window.location.host)return r}return g("Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)",a),r.crossOrigin="anonymous",r.cloneNode(!0)}function i(r){var a=-1<r.indexOf("://")?r.split("/")[2]:r.split("/")[0];return a.substring(0,a.indexOf(":"))}function s(a){var o=a.lastIndexOf(".");if(0<=o){var t=a.slice(o,a.length);if(".gltf"===t||".glb"===t)return"arraybuffer"}return"text"}var l=t("./a-node"),d=t("../utils/bind"),c=t("../utils/debug"),p=t("./a-register-element").registerElement,u=t("../lib/three"),m=new u.FileLoader,g=c("core:a-assets:warn");r.exports=p("a-assets",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=m,this.timeout=null}},attachedCallback:{value:function(){var l=this,c=[],a,p,t,m,i,r;if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(i=this.querySelectorAll("img"),a=0;a<i.length;a++)m=n(i[a]),c.push(new Promise(function(o,t){u.Cache.files[i[a].getAttribute("src")]=m,m.onload=o,m.onerror=t}));for(t=this.querySelectorAll("audio, video"),a=0;a<t.length;a++)p=n(t[a]),p.src||p.srcObject||g("Audio/video asset has neither `src` nor `srcObject` attributes."),c.push(o(p));Promise.all(c).then(d(this.load,this)),r=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){l.hasLoaded||(g("Asset loading timed out in ",r,"ms"),l.emit("timeout"),l.load())},r)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){l.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),p("a-asset-item",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var r=this,a=this.getAttribute("src");m.setResponseType(this.getAttribute("response-type")||s(a)),m.load(a,function(a){r.data=a,setTimeout(function(){l.prototype.load.call(r)})},function(a){r.emit("progress",{loadedBytes:a.loaded,totalBytes:a.total,xhr:a})},function(a){r.emit("error",{xhr:a})})}}})}),r.exports.inferResponseType=s},{"../lib/three":150,"../utils/bind":166,"../utils/debug":168,"./a-node":100,"./a-register-element":101}],97:[function(t,r){var a=t("../utils/debug"),o=t("./a-register-element").registerElement,n=a("core:cubemap:warn");r.exports=o("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var a=this.querySelectorAll("[src]"),t=[],r;if(6===a.length){for(r=0;r<a.length;r++)t.push(a[r].getAttribute("src"));return t}n("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":168,"./a-register-element":101}],98:[function(t,r){function l(r,t){return r.components[t]&&r.components[t].attrValue||a(t,r.mixinEls)}function a(r,t){var a=!1,o;for(o=0;o<t.length&&!(a=t[o].hasAttribute(r));++o);return a}function i(r,t){return t?t.constructor===Object?u.extend(t,u.styleParser.parse(r||{})):r||t:r}function s(r){return-1!==r.indexOf(h)&&(r=u.split(r,h)[0]),!!c[r]}function o(r){var t=p.Math.radToDeg,a=r.object3D.rotation,o=r.rotationObj;return o.x=t(a.x),o.y=t(a.y),o.z=t(a.z),o}var d=t("./a-node"),c=t("./component").components,n=t("./a-register-element").registerElement,p=t("../lib/three"),u=t("../utils/"),m=u.debug("core:a-entity:debug"),g=u.debug("core:a-entity:warn"),h="__",y=["position","rotation","scale","visible"],f=Object.create(d.prototype,{createdCallback:{value:function(){this.components={},this.initializingComponents={},this.componentsToUpdate={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new p.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.rotationObj={},this.states=[]}},attributeChangedCallback:{value:function(r,t,a){var o=this.components[r];return o&&o.justInitialized&&""===a?void delete o.justInitialized:void((o||null!==a)&&this.setEntityAttribute(r,t,a))}},attachedCallback:{value:function(){var r=this.sceneEl,a=this,o;if(this.addToParent(),!this.isScene){if(!r)return void this.load();if((o=r.querySelector("a-assets"))&&!o.hasLoaded)return void o.addEventListener("loaded",function(){a.load()});this.load()}}},detachedCallback:{value:function(){if(this.parentEl){for(var r in this.components)this.removeComponent(r);this.isScene||(this.removeFromParent(),d.prototype.detachedCallback.call(this),this.object3D.el=null)}}},handleMixinUpdate:{value:function(r){return r?void this.updateComponent(r,this.getDOMAttribute(r)):void this.updateComponents()}},getObject3D:{value:function(r){return this.object3DMap[r]}},setObject3D:{value:function(r,a){var o=this,n;if(!(a instanceof p.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");n=this.getObject3D(r),n&&this.object3D.remove(n),a.el=this,a.children.length&&a.traverse(function(r){r.el=o}),this.object3D.add(a),this.object3DMap[r]=a,this.emit("object3dset",{object:a,type:r})}},removeObject3D:{value:function(r){var a=this.getObject3D(r);return a?void(this.object3D.remove(a),delete this.object3DMap[r],this.emit("object3dremove",{type:r})):void g("Tried to remove `Object3D` of type:",r,"which was not defined.")}},getOrCreateObject3D:{value:function(r,t){var a=this.getObject3D(r);return!a&&t&&(a=new t,this.setObject3D(r,a)),g("`getOrCreateObject3D` has been deprecated. Use `setObject3D()` and `object3dset` event instead."),a}},add:{value:function(r){if(!r.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(r.object3D),this.emit("child-attached",{el:r})}},addToParent:{value:function(){var r=this.parentEl=this.parentNode;r&&r.add&&!this.attachedToParent&&(r.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var r=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,r.emit("child-detached",{el:this})}},load:{value:function(){var r=this;!this.hasLoaded&&this.parentEl&&d.prototype.load.call(this,function(){r.parentEl&&(r.updateComponents(),(r.isScene||r.parentEl.isPlaying)&&r.play())})},writable:window.debug},remove:{value:function(r){this.object3D.remove(r.object3D)}},getChildEntities:{value:function(){for(var r=this.children,t=[],a=0,o;a<r.length;a++)o=r[a],o instanceof A&&t.push(o);return t}},initComponent:{value:function(r,t,d){var i,n,o,s;if(o=u.split(r,h),n=o[1],s=o[0],c[s]&&(l(this,r)||void 0!==t||d)&&!(r in this.components)){if(this.initComponentDependencies(s),n&&!c[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");i=new c[s].Component(this,t,n),this.isPlaying&&i.play(),this.hasAttribute(r)||(i.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,r,"")),m("Component initialized: %s",r)}},writable:window.debug},initComponentDependencies:{value:function(r){var t=this,a=c[r],o,n;if(a&&(o=c[r].dependencies))for(n=0;n<o.length;n++)t.initComponent(o[n],window.HTMLElement.prototype.getAttribute.call(t,o[n])||void 0,!0)}},removeComponent:{value:function(r){var t;if(t=this.components[r]){if(!t.initialized)return void this.addEventListener("componentinitialized",function t(a){a.detail.name===r&&(this.removeComponent(r),this.removeEventListener("componentinitialized",t))});t.pause(),t.remove(),delete this.components[r],this.emit("componentremoved",t.evtDetail)}},writable:window.debug},updateComponents:{value:function(){var r=this.componentsToUpdate,a,t,o,l;if(this.hasLoaded){for(o=0;o<this.mixinEls.length;o++)for(l in this.mixinEls[o].componentCache)s(l)&&(r[l]=!0);if(this.getExtraComponents)for(l in t=this.getExtraComponents(),t)s(l)&&(r[l]=!0);for(o=0;o<this.attributes.length;++o)l=this.attributes[o].name,-1===y.indexOf(l)&&s(l)&&(r[l]=!0);for(o=0;o<y.length;o++)l=y[o],this.hasAttribute(l)&&this.updateComponent(l,this.getDOMAttribute(l));for(l in r)a=i(this.getDOMAttribute(l),t&&t[l]),this.updateComponent(l,a),delete r[l]}},writable:window.debug},updateComponent:{value:function(r,t,a){var o=this.components[r];return o?null!==t||l(this,r)?void o.updateProperties(t,a):void this.removeComponent(r):void this.initComponent(r,t,!1)}},removeAttribute:{value:function(r,t){var a=this.components[r];return(a&&void 0===t&&this.removeComponent(r),a&&void 0!==t)?void a.resetProperty(t):void("mixin"===r&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,r))}},play:{value:function(){var r,t,a;if(!this.isPlaying&&this.hasLoaded){for(a in this.isPlaying=!0,this.components)this.components[a].play();for(r=this.getChildEntities(),t=0;t<r.length;t++)r[t].play();this.emit("play")}},writable:!0},pause:{value:function(){var r,t,a;if(this.isPlaying){for(a in this.isPlaying=!1,this.components)this.components[a].pause();for(r=this.getChildEntities(),t=0;t<r.length;t++)r[t].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(r,t,a){if(c[r]||this.components[r])return void this.updateComponent(r,a);if("mixin"===r){if(a===this.computedMixinStr)return;this.mixinUpdate(a,t)}}},mixinUpdate:{value:function(r,t){t=t||this.getAttribute("mixin"),this.updateMixins(r,t),this.updateComponents()}},setAttribute:{value:function(l,t,p){var i,n,o,s,a;return(s=l.indexOf(h),o=0<s?l.substring(0,s):l,!c[o])?("mixin"===l&&this.mixinUpdate(t),void d.prototype.setAttribute.call(this,l,t)):void(!this.components[l]&&this.hasAttribute(l)&&this.updateComponent(l,window.HTMLElement.prototype.getAttribute.call(this,l)),void 0!==p&&"string"==typeof t&&0<t.length&&"string"==typeof u.styleParser.parse(t)?(i={},i[t]=p,n=!1):(i=t,n=!0===p),this.updateComponent(l,i,n),(a=this.sceneEl&&this.sceneEl.getAttribute("debug"))&&this.components[l].flushToDOM())},writable:window.debug},flushToDOM:{value:function(r){var t=this.components,a=this.children,o,s,i;for(i in t)t[i].flushToDOM();if(r)for(s=0;s<a.length;++s)o=a[s],o.flushToDOM&&o.flushToDOM(r)}},getAttribute:{value:function(r){var t;return"position"===r?this.object3D.position:"rotation"===r?o(this):"scale"===r?this.object3D.scale:"visible"===r?this.object3D.visible:(t=this.components[r],t?t.data:window.HTMLElement.prototype.getAttribute.call(this,r))},writable:window.debug},getDOMAttribute:{value:function(r){var t=this.components[r];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,r)},writable:window.debug},addState:{value:function(r){this.is(r)||(this.states.push(r),this.emit("stateadded",r))}},removeState:{value:function(r){var t=this.states.indexOf(r);-1!==t&&(this.states.splice(t,1),this.emit("stateremoved",r))}},is:{value:function(r){return-1!==this.states.indexOf(r)}}}),A;A=n("a-entity",{prototype:f}),r.exports=A},{"../lib/three":150,"../utils/":172,"./a-node":100,"./a-register-element":101,"./component":102}],99:[function(t,r){var a=t("./a-node"),o=t("./a-register-element").registerElement,s=t("./component").components,l=t("../utils");r.exports=o("a-mixin",{prototype:Object.create(a.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id"),this.isMixin=!0}},attributeChangedCallback:{value:function(r,t,a){this.cacheAttribute(r,a)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(r,t){window.HTMLElement.prototype.setAttribute.call(this,r,t),this.cacheAttribute(r,t)}},cacheAttribute:{value:function(r,t){var a,o;o=l.split(r,"__")[0],(a=s[o])&&(void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,r)),this.componentCache[r]=a.parseAttrValueForCache(t))}},getAttribute:{value:function(r){return this.componentCache[r]||window.HTMLElement.prototype.getAttribute.call(this,r)}},cacheAttributes:{value:function(){var r=this.attributes,a,t;for(t=0;t<r.length;t++)a=r[t].name,this.cacheAttribute(a)}},updateEntities:{value:function(){var r,t,a;if(this.sceneEl)for(t=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),a=0;a<t.length;a++)r=t[a],r.hasLoaded&&!r.isMixin&&r.mixinUpdate(this.id)}}})})},{"../utils":172,"./a-node":100,"./a-register-element":101,"./component":102}],100:[function(t,r){var a=t("./a-register-element").registerElement,o=t("./a-register-element").isNode,l=t("../utils/"),n=l.debug("core:a-node:warn"),s={attributes:!0};r.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.computedMixinStr="",this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||n("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",void 0,!1),this.isMixin||(t=this.getAttribute("mixin"))&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(r,a,t){t!==this.computedMixinStr&&("mixin"!==r||this.isMixin||this.updateMixins(t,a))}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(r){for(var a=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,t=this;t&&!a.call(t,r);)t=t.parentElement;return t}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(r,a){var t=this,s,i;this.hasLoaded||(a=a||o,s=this.getChildren(),i=s.filter(a).map(function(r){return new Promise(function(a){return r.hasLoaded?a():void r.addEventListener("loaded",a)})}),Promise.all(i).then(function(){t.hasLoaded=!0,r&&r(),t.emit("loaded",void 0,!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(){var o=[],d=[];return function(t,i){var n,s,r;for(o.length=0,d.length=0,s=t?l.split(t.trim(),/\s+/):o,r=i?l.split(i.trim(),/\s+/):d,n=0;n<r.length;n++)-1===s.indexOf(r[n])&&this.unregisterMixin(r[n]);for(this.computedMixinStr="",this.mixinEls.length=0,n=0;n<s.length;n++)this.registerMixin(document.getElementById(s[n]));this.computedMixinStr&&(this.computedMixinStr=this.computedMixinStr.trim(),window.HTMLElement.prototype.setAttribute.call(this,"mixin",this.computedMixinStr))}}()},registerMixin:{value:function(r){var a,t,o;if(r){if(o=r.getAttribute("mixin"))for(a=l.split(o.trim(),/\s+/),t=0;t<a.length;t++)this.registerMixin(document.getElementById(a[t]));this.computedMixinStr=this.computedMixinStr+" "+r.id,this.mixinEls.push(r),this.attachMixinListener(r)}}},setAttribute:{value:function(r,a){"mixin"===r&&this.updateMixins(a),window.HTMLElement.prototype.setAttribute.call(this,r,a)}},unregisterMixin:{value:function(r){var a=this.mixinEls,o,t;for(o=0;o<a.length;++o)if(t=a[o],r===t.id){a.splice(o,1);break}this.removeMixinListener(r)}},removeMixinListener:{value:function(r){var a=this.mixinObservers[r];a&&(a.disconnect(),this.mixinObservers[r]=null)}},attachMixinListener:{value:function(r){var a=this,o,t;r&&(o=r.id,this.mixinObservers[o]||(t=new MutationObserver(function(t){a.handleMixinUpdate(t[0].attributeName)}),t.observe(r,s),this.mixinObservers[o]=t))}},handleMixinUpdate:{value:function(){}},emit:{value:function(){var r={};return function(a,t,o,i){void 0===o&&(o=!0),r.bubbles=!!o,r.detail=t,i&&(r=l.extend({},i,r)),this.dispatchEvent(new CustomEvent(a,r))}}(),writable:window.debug}})})},{"../utils/":172,"./a-register-element":101}],101:[function(t,r){function i(r){d[r.toLowerCase()]=!0}function s(r){var t={};return a(t,["attachedCallback","attributeChangedCallback","createdCallback"],r,c.prototype),o(r,t),t}function l(r){var t={};return a(t,["attachedCallback","attributeChangedCallback","createdCallback"],r,c.prototype),a(t,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],r,p.prototype),o(r,t),t}function a(a,t,i,o){t.forEach(function(t){n(a,t,i,o)})}function n(i,t,s,o){var r=s[t],a=o[t];r&&a&&r!==a&&(i[t]={value:function(){return a.apply(this,arguments),r.apply(this,arguments)},writable:window.debug})}function o(a,t){Object.getOwnPropertyNames(a).forEach(function(n){var o;t[n]||(o=Object.getOwnPropertyDescriptor(a,n),t[n]={value:a[n],writable:o.writable})})}t("document-register-element");var d=r.exports.knownTags={},c,p;r.exports.isNode=function(r){return r.tagName.toLowerCase()in d||r.isNode},r.exports.registerElement=function(d,t){var u=Object.getPrototypeOf(t.prototype),o=t,r=c&&u===c.prototype,a=p&&u===p.prototype;return(r||a)&&i(d),r&&(o=s(t.prototype),o={prototype:Object.create(u,o)}),a&&(o=l(t.prototype),o={prototype:Object.create(u,o)}),Object.getOwnPropertyNames(o.prototype).forEach(function(r){var t=o.prototype[r];"function"==typeof t&&(t.displayName=r)}),document.registerElement(d,o)},r.exports.wrapMethods=a,c=t("./a-node"),p=t("./a-entity")},{"./a-entity":98,"./a-node":100,"document-register-element":13}],102:[function(t,r){function s(a){var o={},r,t;for(t in a)r=a[t],o[t]=g(r)?y.clone(r):r;return o}function n(a,o,n){if(n&&(null===o||"object"!=("undefined"===typeof o?"undefined":babelHelpers.typeof(o))))return o;var i=y.extend(a,o),s;for(s in i)i[s]&&i[s].constructor===Object&&(i[s]=y.clone(i[s]));return i}function a(t){return t.tick||t.tock}function o(r){return function(){var o=this.el.sceneEl;this.isPlaying&&(r.call(this),this.isPlaying=!1,a(this)&&o.removeBehavior(this))}}function l(r){return function(){var o=this.el.sceneEl,t=this.el.isPlaying&&!this.isPlaying;this.initialized&&t&&(r.call(this),this.isPlaying=!0,a(this)&&o.addBehavior(this))}}function g(t){return t&&(t.constructor===Object||t.constructor===Array)}var i=t("./schema"),d=t("./scene/scenes"),c=t("./system"),y=t("../utils/"),p=r.exports.components={},f=i.parseProperties,h=i.parseProperty,u=i.process,A=i.isSingleProperty,m=i.stringifyProperties,M=i.stringifyProperty,x=y.styleParser,E=y.debug("core:component:warn"),v=document.currentScript,T=/[A-Z]+/,b=r.exports.Component=function(a,o,t){var n=this;this.el=a,this.id=t,this.attrName=this.name+(t?"__"+t:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=y.throttle(function(){a.emit("componentchanged",n.evtDetail,!1)},200),this.updateProperties(o)};if(b.prototype={schema:{},init:function(){},update:function(){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(r,a){var t=this.schema;return A(t)?h(r,t):f(x.parse(r),t,!0,this.name,a)},stringify:function(r){var a=this.schema;return"string"==typeof r?r:A(a)?M(r,a):(r=m(r,a),x.stringify(r))},updateCachedAttrValue:function(a,o){var t=this.parseAttrValueForCache(a),r=A(this.schema),n;if(void 0!==a)if(r||o)this.attrValue=t;else for(n in this.attrValue=this.attrValue?s(this.attrValue):{},t)this.attrValue[n]=t[n]},parseAttrValueForCache:function(r){var a;return"string"==typeof r?(A(this.schema)?"string"==typeof(a=this.schema.parse(r))&&(a=r):a=x.parse(r),a):r},flushToDOM:function(r){var a=r?this.data:this.attrValue;a&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(a))},updateProperties:function(l,d){var t=this.el,a=this.oldData,o,i,r;if(!t.hasLoaded)return void this.updateCachedAttrValue(l);if(o=A(this.schema),r=null!==l&&"object"==babelHelpers.typeof(this.previousAttrValue)&&l===this.previousAttrValue){for(i in this.attrValue)if(!(i in l)){r=!1;break}for(i in l)if(!(i in this.attrValue)){r=!1;break}}if(this.previousAttrValue=l,l=this.parseAttrValueForCache(l),this.updateCachedAttrValue(l,d),this.updateSchema&&this.updateSchema(this.buildData(this.attrValue,!1,!0)),this.data=this.buildData(this.attrValue,d,!1,r),this.initialized){if(y.deepEqual(this.oldData,this.data))return;this.oldData=n({},this.data,o),this.update(a),this.throttledEmitComponentChanged()}else{if(t.initializingComponents[this.name])return;t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],a=o&&"object"!=babelHelpers.typeof(h(void 0,this.schema))?void 0:{},this.oldData=n({},this.data,o),this.update(a),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1)}},resetProperty:function(t){if(A(this.schema))this.attrValue=void 0;else{if(!(t in this.attrValue))return;delete this.attrValue[t]}this.updateProperties(this.attrValue)},extendSchema:function(r){var a=y.extend({},p[this.name].schema);y.extend(a,r),this.schema=u(a),this.el.emit("schemachanged",{component:this.name})},buildData:function(M,x,E,i){var r=this.schema,u=A(r),m=this.el.mixinEls,d,v,a,o,T,p,b,c;if(d=M&&M.constructor===Array?M.length:void 0!==M&&null!==M,u)v=g(r.default)?y.clone(r.default):r.default;else for(c=!x&&this.attrValue,v="object"==("undefined"===typeof c?"undefined":babelHelpers.typeof(c))?s(c):{},b=0,o=Object.keys(r),T=o.length;b<T;b++)a=r[o[b]].default,void 0===v[o[b]]&&(v[o[b]]=g(a)?y.clone(a):a);for(b=0;b<m.length;b++)(p=m[b].getAttribute(this.attrName))&&(v=n(v,p,u));if(d){if(u)return!0===i?M:h(M,r);v=n(v,M,u)}else{if(!0===i)return v;if(u)return h(v,r)}return!0===i?v:f(v,r,void 0,this.name,E)}},window.debug)var L=r.exports.registrationOrderWarnings={};r.exports.registerComponent=function(a,n){var t={},r;if(document.currentScript&&document.currentScript!==v&&d.forEach(function(r){r.hasLoaded||document.currentScript.compareDocumentPosition(r)!==Node.DOCUMENT_POSITION_FOLLOWING&&(E("The component `"+a+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(L[a]=!0))}),!0===T.test(a)&&E("The component name `"+a+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+a.toLowerCase()+"`"),-1!==a.indexOf("__"))throw new Error("The component name `"+a+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(n).forEach(function(r){t[r]={value:n[r],writable:!0}}),p[a])throw new Error("The component `"+a+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return r=function(r,a,t){b.call(this,r,a,t)},r.prototype=Object.create(b.prototype,t),r.prototype.name=a,r.prototype.constructor=r,r.prototype.system=c&&c.systems[a],r.prototype.play=l(r.prototype.play),r.prototype.pause=o(r.prototype.pause),p[a]={Component:r,dependencies:r.prototype.dependencies,isSingleProp:A(r.prototype.schema),multiple:r.prototype.multiple,parse:r.prototype.parse,parseAttrValueForCache:r.prototype.parseAttrValueForCache,schema:y.extend(u(r.prototype.schema,r.prototype.name)),stringify:r.prototype.stringify,type:r.prototype.type},r}},{"../utils/":172,"./scene/scenes":108,"./schema":110,"./system":112}],103:[function(t,r){var a=t("./schema"),n=a.process,i=r.exports.geometries={},s=r.exports.geometryNames=[],o=t("../lib/three"),l=r.exports.Geometry=function(){};l.prototype={schema:{},init:function(){return this.geometry=new o.Geometry,this.geometry},update:function(){}},r.exports.registerGeometry=function(a,d){var t={},o;if(Object.keys(d).forEach(function(r){t[r]={value:d[r],writable:!0}}),i[a])throw new Error("The geometry `"+a+"` has been already registered");return o=function(){l.call(this)},o.prototype=Object.create(l.prototype,t),o.prototype.name=a,o.prototype.constructor=o,i[a]={Geometry:o,schema:n(o.prototype.schema)},s.push(a),o}},{"../lib/three":150,"./schema":110}],104:[function(t,r){function a(a,o,l,t){return"type"in g?void u("Property type "+a+" is already registered."):void(g[a]={default:o,parse:l||i,stringify:t||s})}function o(a){var o,r;return"string"==typeof a?(r=a.match(/\url\((.+)\)/),r?r[1]:"#"===a.charAt(0)?(o=document.getElementById(a.substring(1)))?"CANVAS"===o.tagName||"VIDEO"===o.tagName||"IMG"===o.tagName?o:o.getAttribute("src"):void m("\""+a+"\" asset not found."):a):a}function i(t){return t}function s(t){return null===t?"null":t.toString()}function n(t){return parseInt(t,10)}function l(t){return c.parse(t,this.default)}function d(a,s){if(null===a)return!0;if("object"!=("undefined"===typeof a?"undefined":babelHelpers.typeof(a)))return!1;if(Object.keys(a).length!==s)return!1;var r=a.x,l=a.y,d=a.z,c=a.w;return"number"==typeof r&&"number"==typeof l&&!(2<s&&"number"!=typeof d)&&!(3<s&&"number"!=typeof c)}var c=t("../utils/coordinates"),p=t("debug"),u=p("core:propertyTypes:warn"),m=p("core:propertyTypes:warn"),g=r.exports.propertyTypes={},h=/[,> .[\]:]/;a("audio","",o),a("array",[],function(t){return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map(function(t){return t.trim()}):[]},function(t){return t.join(", ")}),a("asset","",o),a("boolean",!1,function(t){return"false"!==t&&!1!==t}),a("color","#FFF",i,s),a("int",0,n),a("number",0,function(t){return parseFloat(t,10)}),a("map","",o),a("model","",o),a("selector",null,function(t){return t?"string"==typeof t?"#"!==t[0]||h.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):t:null},function(t){return t.getAttribute?"#"+t.getAttribute("id"):s(t)}),a("selectorAll",null,function(t){return t?"string"==typeof t?Array.prototype.slice.call(document.querySelectorAll(t),0):t:null},function(t){return t instanceof Array?t.map(function(t){return"#"+t.getAttribute("id")}).join(", "):s(t)}),a("src","",function(t){return m("`src` property type is deprecated. Use `asset` instead."),o(t)}),a("string","",i,s),a("time",0,n),a("vec2",{x:0,y:0},l,c.stringify),a("vec3",{x:0,y:0,z:0},l,c.stringify),a("vec4",{x:0,y:0,z:0,w:1},l,c.stringify),r.exports.registerPropertyType=a,r.exports.isValidDefaultValue=function(t,a){return("audio"!==t||"string"==typeof a)&&("array"!==t||Array.isArray(a))&&("asset"!==t||"string"==typeof a)&&("boolean"!==t||"boolean"==typeof a)&&("color"!==t||"string"==typeof a)&&("int"!==t||"number"==typeof a)&&("number"!==t||"number"==typeof a)&&("map"!==t||"string"==typeof a)&&("model"!==t||"string"==typeof a)&&("selector"!==t||"string"==typeof a||null===a)&&("selectorAll"!==t||"string"==typeof a||null===a)&&("src"!==t||"string"==typeof a)&&("string"!==t||"string"==typeof a)&&("time"!==t||"number"==typeof a)&&("vec2"===t?d(a,2):"vec3"===t?d(a,3):"vec4"!==t||d(a,4))},r.exports.isValidDefaultCoordinate=d},{"../utils/coordinates":167,debug:10}],105:[function(t,r){function a(r,a){return a?{height:r.parentElement.offsetHeight,width:r.parentElement.offsetWidth}:{height:window.innerHeight,width:window.innerWidth}}function o(t){(t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen).apply(t)}function i(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function n(r){function a(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||r.exitVR(),document.activeElement.blur(),document.body.focus()}var t;t=document.createElement("canvas"),t.classList.add("a-canvas"),t.dataset.aframeCanvas=!0,r.appendChild(t),document.addEventListener("fullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),t.addEventListener("touchmove",function(t){t.preventDefault()}),r.canvas=t,r.emit("render-target-loaded",{target:t}),setTimeout(A(r.resize,r),0)}var s=t("./metaTags").inject,l=t("./wakelock"),d=t("../a-register-element"),c=t("./scenes"),p=t("../system").systems,u=t("../../lib/three"),m=t("@tweenjs/tween.js"),g=t("../../utils/"),h=t("../a-entity"),y=t("../a-node"),f=t("./postMessage"),A=g.bind,M=g.device.isIOS(),x=g.device.isMobile(),E=d.registerElement,v=g.debug("core:a-scene:warn");r.exports.AScene=E("a-scene",{prototype:Object.create(h.prototype,{createdCallback:{value:function(){this.isIOS=M,this.isMobile=x,this.isScene=!0,this.object3D=new u.Scene;var r=this;this.object3D.onAfterRender=function(a,t,o){r.isPlaying&&r.tock(r.time,r.delta,o)},this.render=A(this.render,this),this.systems={},this.systemNames=[],this.time=this.delta=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,n(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),f(this),this.setAttribute("inspector",""),this.setAttribute("keyboard-shortcuts",""),this.setAttribute("screenshot",""),this.setAttribute("vr-mode-ui","")},writable:!0},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var r=this,t;s(this),l(this),this.initSystems(),t=A(this.resize,this),window.addEventListener("load",t),window.addEventListener("resize",function(){this.isIOS?setTimeout(t,100):t()}),this.play(),c.push(this),this.onVRPresentChangeBound=A(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){r.enterVR()},this.exitVRBound=function(){r.exitVR()},this.exitVRTrueBound=function(){r.exitVR(!0)},this.pointerRestrictedBound=function(){r.pointerRestricted()},this.pointerUnrestrictedBound=function(){r.pointerUnrestricted()},window.addEventListener("vrdisplayactivate",this.enterVRBound),window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)},writable:window.debug},initSystems:{value:function(){Object.keys(p).forEach(A(this.initSystem,this))}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new p[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t=c.indexOf(this);c.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(r){var a=this.behaviors,o,t;for(t in a)r[t]&&(o=this.behaviors[t],-1===o.indexOf(r)&&o.push(r))}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:g.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(a){function i(){t.addState("vr-mode"),t.emit("enter-vr",{target:t}),t.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),t.addFullScreenStyles(),t.isMobile||t.checkHeadsetConnected()||o(t.canvas),t.resize()}var t=this,l=t.renderer.vr,r;return this.is("vr-mode")?Promise.resolve("Already in VR."):!a&&(this.checkHeadsetConnected()||this.isMobile)?(r=g.device.getVRDisplay(),l.setDevice(r),l.enabled=!0,r.requestPresent([{source:this.canvas}]).then(i,function(t){throw t&&t.message?new Error("Failed to enter VR mode (`requestPresent`): "+t.message):new Error("Failed to enter VR mode (`requestPresent`).")})):(i(),Promise.resolve())},writable:!0},exitVR:{value:function(r){function a(){t.removeState("vr-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&g.forceCanvasResizeSafariMobile(this.canvas),t.emit("exit-vr",{target:t})}var t=this,o;return this.is("vr-mode")?(i(),!r&&(this.checkHeadsetConnected()||this.isMobile)?(this.renderer.vr.enabled=!1,o=g.device.getVRDisplay(),o.exitPresent().then(a,function(t){throw t&&t.message?new Error("Failed to exit VR mode (`exitPresent`): "+t.message):new Error("Failed to exit VR mode (`exitPresent`).")})):(a(),Promise.resolve())):Promise.resolve("Not in VR.")},writable:!0},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){return(t.display||t.detail.display).isPresenting?void this.enterVR(!0):void this.exitVR(!0)}},getAttribute:{value:function(r){var a=this.systems[r];return a?a.data:h.prototype.getAttribute.call(this,r)}},getComputedAttribute:{value:function(t){v("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(r){var a=this.systems[r];return a?a.data:h.prototype.getDOMAttribute.call(this,r)}},setAttribute:{value:function(r,a,t){var o=this.systems[r];return o?(y.prototype.setAttribute.call(this,r,a),void o.updateProperties(a)):void h.prototype.setAttribute.call(this,r,a,t)}},removeBehavior:{value:function(r){var a=this.behaviors,o,t,n;for(t in a)r[t]&&(o=this.behaviors[t],-1!==(n=o.indexOf(r))&&o.splice(n,1))}},resize:{value:function(){var o=this.camera,l=this.canvas,d=this.getAttribute("embedded")&&!this.is("vr-mode"),r,c,t;c=this.renderer.vr.getDevice(),t=this.renderer.vr.enabled&&c&&c.isPresenting,!o||!l||this.is("vr-mode")&&(this.isMobile||t)||(r=a(l,d),o.aspect=r.width/r.height,o.updateProjectionMatrix(),this.renderer.setSize(r.width,r.height,!1))},writable:!0},setupRenderer:{value:function(){var r=this,a={canvas:this.canvas,antialias:!x,alpha:!0},o,n,t;this.hasAttribute("antialias")&&(a.antialias="true"===this.getAttribute("antialias")),this.hasAttribute("renderer")&&(t=this.getAttribute("renderer"),n=g.styleParser.parse(t),n.antialias&&"auto"!==n.antialias&&(a.antialias="true"===n.antialias)),o=this.renderer=new u.WebGLRenderer(a),o.setPixelRatio(window.devicePixelRatio),o.sortObjects=!1,this.addEventListener("camera-set-active",function(){o.vr.setPoseTarget(r.camera.el.object3D)})},writable:window.debug},play:{value:function(){var t=this;return this.renderStarted?void h.prototype.play.call(this):void(this.addEventListener("loaded",function(){function t(t){t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),t.clock=new u.Clock,t.render(),t.renderStarted=!0,t.emit("renderstart")))}return(h.prototype.play.call(this),this.camera)?void t(this):void this.addEventListener("camera-set-active",function(){t(this)})}),setTimeout(function(){h.prototype.load.call(t)}))}},updateComponent:{value:function(t){t in p||h.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(r,a){var t=this.systems,o;for(m.update(),o=0;o<this.behaviors.tick.length;o++)this.behaviors.tick[o].el.isPlaying&&this.behaviors.tick[o].tick(r,a);for(o=0;o<this.systemNames.length;o++)t[this.systemNames[o]].tick&&t[this.systemNames[o]].tick(r,a)}},tock:{value:function(r,a,t){var o=this.systems,n;for(n=0;n<this.behaviors.tock.length;n++)this.behaviors.tock[n].el.isPlaying&&this.behaviors.tock[n].tock(r,a,t);for(n=0;n<this.systemNames.length;n++)o[this.systemNames[n]].tock&&o[this.systemNames[n]].tock(r,a,t)}},render:{value:function(){this.delta=1e3*this.clock.getDelta();var t=this.renderer;this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,this.delta),t.animate(this.render),t.render(this.object3D,this.camera,this.renderTarget)},writable:!0}})}),r.exports.setupCanvas=n},{"../../lib/three":150,"../../utils/":172,"../a-entity":98,"../a-node":100,"../a-register-element":101,"../system":112,"./metaTags":106,"./postMessage":107,"./scenes":108,"./wakelock":109,"@tweenjs/tween.js":1}],106:[function(t,r){function a(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector("meta[name=\""+t.name+"\"]")}}}function o(r){if(r&&r.tagName){var a=document.createElement(r.tagName);return a.setAttribute(n.AFRAME_INJECTED,""),i(a,r.attributes)}}var n=t("../../constants/"),i=t("../../utils").extend,s=r.exports.MOBILE_HEAD_TAGS=[a({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),a({name:"mobile-web-app-capable",content:"yes"}),a({name:"theme-color",content:"black"})],l=[a({name:"apple-mobile-web-app-capable",content:"yes"}),a({name:"apple-mobile-web-app-status-bar-style",content:"black"}),function(t){return{tagName:"link",attributes:t,exists:function(){return document.querySelector("link[rel=\""+t.rel+"\"]")}}}({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];r.exports.inject=function(d){function c(a){a&&!a.exists()&&(i=o(a))&&(n?n.parentNode.insertBefore(i,n):t.appendChild(i),r.push(i))}var t=document.head,n=t.querySelector("script"),r=[],i;return s.forEach(c),d.isIOS&&l.forEach(c),r}},{"../../constants/":93,"../../utils":172}],107:[function(t,r){function a(t){var r=this;if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":r.enterVR();break;case"exit":r.exitVR();}}}var o=t("../../utils/bind"),n=t("../../utils/").isIframed;r.exports=function(t){n()&&window.addEventListener("message",o(a,t))}},{"../../utils/":172,"../../utils/bind":166}],108:[function(t,r){r.exports=[]},{}],109:[function(t,r){var a=t("../../../vendor/wakelock/wakelock");r.exports=function(t){if(t.isMobile){var r=t.wakelock=new a;t.addEventListener("enter-vr",function(){r.request()}),t.addEventListener("exit-vr",function(){r.release()})}}},{"../../../vendor/wakelock/wakelock":182}],110:[function(t,r){function a(t){return"type"in t?"string"==typeof t.type:"default"in t}function o(a,r){var i=a.default,s=a.type,l,t;return a.type?"bool"===a.type?s="boolean":"float"===a.type&&(s="number"):s=void 0===i||"boolean"!=typeof i&&"number"!=typeof i?Array.isArray(i)?"array":"string":"undefined"===typeof i?"undefined":babelHelpers.typeof(i),t=u[s],t||m("Unknown property type for component `"+r+"`: "+s),l=!!a.parse,a.parse=a.parse||t.parse,a.stringify=a.stringify||t.stringify,a.type=s,"default"in a?l||c(s,i)||m("Default value `"+i+"` does not match type `"+s+"` in component `"+r+"`"):a.default=t.default,a}function n(t,r){return void 0!==t&&null!==t&&""!==t||(t=r.default,Array.isArray(t)&&(t=t.slice())),r.parse(t,r.default)}function s(t,a){return"object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?a&&null!==t?a.stringify(t):JSON.stringify(t):t}var i=t("../utils/"),l=t("./propertyTypes"),d=i.debug,c=l.isValidDefaultValue,u=l.propertyTypes,m=d("core:schema:warn");r.exports.isSingleProperty=a,r.exports.process=function(n,r){if(a(n))return o(n,r);for(var i in n)n[i]=o(n[i],r);return n},r.exports.processPropertyDefinition=o,r.exports.parseProperties=function(){var a=[];return function(r,l,t,o,d){var c,i,s,p;for(i in a.length=0,t?r:l)a.push(i);if(null===r||"object"!=("undefined"===typeof r?"undefined":babelHelpers.typeof(r)))return r;for(i in r)l[i]||d||m("Unknown property `"+i+"` for component/system `"+o+"`.");for(c=0;c<a.length;c++){if(i=a[c],s=l[i],p=r[i],!l[i])return;r[i]=n(p,s)}return r}}(),r.exports.parseProperty=n,r.exports.stringifyProperties=function(a,r){var l={},i,t,o,n;for(i in a)t=r[i],o=a[i],n=o,"object"==("undefined"===typeof n?"undefined":babelHelpers.typeof(n))&&(n=s(o,t),t||m("Unknown component property: "+i)),l[i]=n;return l},r.exports.stringifyProperty=s},{"../utils/":172,"./propertyTypes":104}],111:[function(t,r){var a=t("./schema"),o=a.process,n=r.exports.shaders={},i=r.exports.shaderNames=[],s=t("../lib/three"),l=t("../utils"),d={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},c=r.exports.Shader=function(){};c.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(o,n){var r=this.schema,i={},s,t;for(s in r)r[s].is===n&&(t=d[r[s].type],i[s]={type:t,value:void 0});return i},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(o,n){var r=this.schema,s,t,a;for(s in a="uniform"===n?this.uniforms:this.attributes,o)if(r[s]&&r[s].is===n)if("map"!==r[s].type)a[s].value=this.parseValue(r[s].type,o[s]),a[s].needsUpdate=!0;else{if(!a[s]||a[s].value===o[s])continue;t="_texture_"+s,this.setMapOnTextureLoad(a,s,t),l.material.updateMapMaterialFromData(t,s,this,o)}},parseValue:function(a,o){var r;return"vec2"===a?new s.Vector2(o.x,o.y):"vec3"===a?new s.Vector3(o.x,o.y,o.z):"vec4"===a?new s.Vector4(o.x,o.y,o.z,o.w):"color"===a?(r=new s.Color(o),new s.Vector3(r.r,r.g,r.b)):"map"===a?s.ImageUtils.loadTexture(o):o},setMapOnTextureLoad:function(o,n,r){var t=this;this.el.addEventListener("materialtextureloaded",function(){o[n].value=t.material[r],o[n].needsUpdate=!0})}},r.exports.registerShader=function(s,l){var r={},a;if(Object.keys(l).forEach(function(t){r[t]={value:l[t],writable:!0}}),n[s])throw new Error("The shader "+s+" has been already registered");return a=function(){c.call(this)},a.prototype=Object.create(c.prototype,r),a.prototype.name=s,a.prototype.constructor=a,n[s]={Shader:a,schema:o(a.prototype.schema)},i.push(s),a}},{"../lib/three":150,"../utils":172,"./schema":110}],112:[function(t,r){var a=t("./component"),o=t("./schema"),n=t("../utils/"),i=o.parseProperties,s=o.parseProperty,l=o.process,d=o.isSingleProperty,c=n.styleParser,p=r.exports.systems={},u=r.exports.System=function(r){var o=a&&a.components[this.name];this.el=r,this.sceneEl=r,o&&(o.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};u.prototype={schema:{},init:function(){},update:function(){},updateProperties:function(r){var a=this.data;Object.keys(o).length&&(this.buildData(r),this.update(a))},buildData:function(r){var a=this.schema;Object.keys(a).length&&(r=r||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),this.data=d(a)?s(r,a):i(c.parse(r)||{},a))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},r.exports.registerSystem=function(a,d){var t={},r=n.findAllScenes(document),i,s;if(Object.keys(d).forEach(function(r){t[r]={value:d[r],writable:!0}}),p[a])throw new Error("The system `"+a+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(s=function(t){u.call(this,t)},s.prototype=Object.create(u.prototype,t),s.prototype.name=a,s.prototype.constructor=s,s.prototype.schema=n.extend(l(s.prototype.schema)),p[a]=s,i=0;i<r.length;i++)r[i].initSystem(a)}},{"../utils/":172,"./component":102,"./schema":110}],113:[function(t){t("./pivot")},{"./pivot":114}],114:[function(t){var r=t("../../core/component").registerComponent,a=t("../../lib/three"),s=new a.Vector3,l=new a.Vector3;r("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var r=this.data,o=this.el,i=o.object3D.parent,t=o.object3D,d=new a.Group;s.copy(t.position),l.copy(t.rotation),i.remove(t),d.add(t),i.add(d),o.object3D=d,t.position.set(-1*r.x,-1*r.y,-1*r.z),d.position.set(r.x+s.x,r.y+s.y,r.z+s.z),d.rotation.copy(t.rotation),t.rotation.set(0,0,0)}})},{"../../core/component":102,"../../lib/three":150}],115:[function(t,r){function a(t){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(r="material-fog"),"visible"===t&&(r="material-visible"),s[r]="material."+t}var o=t("../../core/component").components,n=t("../../core/shader").shaders,i=t("../../utils/"),s={};Object.keys(o.material.schema).forEach(a),Object.keys(n.standard.schema).forEach(a),r.exports=function(){return{defaultComponents:{material:{}},mappings:i.extend({},s)}}},{"../../core/component":102,"../../core/shader":111,"../../utils/":172}],116:[function(t){t("./primitives/a-camera"),t("./primitives/a-collada-model"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":118,"./primitives/a-collada-model":119,"./primitives/a-cursor":120,"./primitives/a-curvedimage":121,"./primitives/a-gltf-model":122,"./primitives/a-image":123,"./primitives/a-light":124,"./primitives/a-link":125,"./primitives/a-obj-model":126,"./primitives/a-sky":127,"./primitives/a-sound":128,"./primitives/a-text":129,"./primitives/a-video":130,"./primitives/a-videosphere":131,"./primitives/meshPrimitives":132}],117:[function(t,r){function a(r,a){var t=s[r].schema;Object.keys(t).map(function(t){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==a[o]&&(o=r+"-"+t),a[o]=r+"."+t})}var o=t("../../core/a-entity"),s=t("../../core/component").components,n=t("../../core/a-register-element").registerElement,d=t("../../utils/"),i=d.debug,l=d.entity.setComponentProperty,c=i("extras:primitives:debug"),p=i("extras:primitives:warn"),u=r.exports.primitives={};r.exports.registerPrimitive=function(r,a){r=r.toLowerCase(),c("Registering <%s>",r),a.defaultAttributes&&p("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var t=n(r,{prototype:Object.create(o.prototype,{defaultComponentsFromPrimitive:{value:a.defaultComponents||a.defaultAttributes||{}},deprecated:{value:a.deprecated||null},deprecatedMappings:{value:a.deprecatedMappings||{}},mappings:{value:a.mappings||{}},createdCallback:{value:function(){a.deprecated&&console.warn(a.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var r=this.mappings,a=this;Object.keys(r).forEach(function(t){var o;t!==t.toLowerCase()&&p("Mapping keys should be specified in lower case. The mapping key "+t+" may not be recognized"),s[t]&&(o=r[t].replace(".","-"),r[o]=r[t],delete r[t],console.warn("The primitive "+a.tagName.toLowerCase()+" has a mapping collision. The attribute "+t+" has the same name as a registered component and has been renamed to "+o))})}},getExtraComponents:{value:function(){function c(a,o){return m(a)?t(o):m(o)?t(a):i(a)&&i(o)?d.extendDeep(a,o):t(o)}function m(t){return void 0===t}function t(t){return i(t)?d.extendDeep({},t):t}function i(t){return null!==t&&t.constructor===Object}var n=this,l,r,o,a,s,p;for(r=d.clone(this.defaultComponentsFromPrimitive),s=this.getAttribute("mixin"),s&&(s=s.trim().split(" "),s.forEach(function(a){var o=n.sceneEl.querySelector("#"+a).componentCache;Object.keys(o).forEach(function(a){r[a]=c(r[a],o[a])})})),o=0;o<this.attributes.length;o++)l=this.attributes[o],(a=this.mappings[l.name])&&(p=d.entity.getComponentPropertyPath(a),p.constructor===Array?(r[p[0]]=r[p[0]]||{},r[p[0]][p[1]]=l.value.trim()):r[p]=l.value.trim());return r}},attributeChangedCallback:{value:function(r,a,t){var o=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&o&&l(this,o,t)}}})});return u[r]=t,t},r.exports.definePrimitive=function(o,n,s){s=s||{},Object.keys(n).map(function(t){a(t,s)}),r.exports.registerPrimitive(o,d.extendDeep({},null,{defaultComponents:n,mappings:s}))}},{"../../core/a-entity":98,"../../core/a-register-element":101,"../../core/component":102,"../../utils/":172}],118:[function(t){var r=t("../primitives").registerPrimitive;r("a-camera",{defaultComponents:{camera:{},"look-controls":{},"wasd-controls":{},position:{y:1.6}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","pointer-lock-enabled":"look-controls.pointerLockEnabled","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag",zoom:"camera.zoom"}})},{"../primitives":117}],119:[function(t){var r=t("../primitives").registerPrimitive;r("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":117}],120:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-cursor",o.extendDeep({},r(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],121:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-curvedimage",o.extendDeep({},r(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],122:[function(t){var r=t("../primitives").registerPrimitive;r("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":117}],123:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-image",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],124:[function(t){var r=t("../primitives").registerPrimitive;r("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":117}],125:[function(t){var r=t("../primitives").registerPrimitive;r("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":117}],126:[function(t){var r=t("../getMeshMixin")(),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-obj-model",o.extendDeep({},r,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],127:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/"),n=t("./meshPrimitives");a("a-sky",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",side:"back",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},n["a-sphere"].prototype.mappings)}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117,"./meshPrimitives":132}],128:[function(t){var r=t("../primitives").registerPrimitive;r("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":117}],129:[function(t){var r=t("../primitives").definePrimitive;r("a-text",{text:{anchor:"align",width:5}})},{"../primitives":117}],130:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-video",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],131:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-videosphere",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",side:"back",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],132:[function(t,r){function a(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var o=t("../getMeshMixin"),n=t("../../../core/geometry").geometries,i=t("../../../core/geometry").geometryNames,l=t("../primitives").registerPrimitive,d=t("../../../utils/"),c=r.exports={};i.forEach(function(p){var u=n[p],i=a(p),r={};Object.keys(u.schema).forEach(function(t){r[a(t)]="geometry."+t});var g="a-"+i,m=l(g,d.extendDeep({},o(),{defaultComponents:{geometry:{primitive:p}},mappings:r}));c[g]=m})},{"../../../core/geometry":103,"../../../utils/":172,"../getMeshMixin":115,"../primitives":117}],133:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":103,"../lib/three":150}],134:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CircleGeometry(t.radius,t.segments,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],135:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],136:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],137:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":103,"../lib/three":150}],138:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":103,"../lib/three":150}],139:[function(t){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":133,"./circle.js":134,"./cone.js":135,"./cylinder.js":136,"./dodecahedron.js":137,"./icosahedron.js":138,"./octahedron.js":140,"./plane.js":141,"./ring.js":142,"./sphere.js":143,"./tetrahedron.js":144,"./torus.js":145,"./torusKnot.js":146,"./triangle.js":147}],140:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":103,"../lib/three":150}],141:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":103,"../lib/three":150}],142:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],143:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new a.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,o(t.phiStart),o(t.phiLength),o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":103,"../lib/three":150}],144:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":103,"../lib/three":150}],145:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,o(t.arc))}})},{"../core/geometry":103,"../lib/three":150}],146:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":103,"../lib/three":150}],147:[function(t){var r=t("../core/geometry").registerGeometry,i=t("../lib/three"),s=new i.Quaternion,l=new i.Vector3(0,0,1),d=new i.Vector2,p=new i.Vector2,u=new i.Vector2;r("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(m){var g,t,r,o,c,n;r=new i.Triangle,r.a.set(m.vertexA.x,m.vertexA.y,m.vertexA.z),r.b.set(m.vertexB.x,m.vertexB.y,m.vertexB.z),r.c.set(m.vertexC.x,m.vertexC.y,m.vertexC.z),t=r.normal(),s.setFromUnitVectors(t,l),o=r.a.clone().applyQuaternion(s),c=r.b.clone().applyQuaternion(s),n=r.c.clone().applyQuaternion(s),d.set(O(o.x,c.x,n.x),O(o.y,c.y,n.y)),p.set(C(o.x,c.x,n.x),C(o.y,c.y,n.y)),u.set(0,0).subVectors(p,d),o=new i.Vector2().subVectors(o,d).divide(u),c=new i.Vector2().subVectors(c,d).divide(u),n=new i.Vector2().subVectors(n,d).divide(u),g=this.geometry=new i.Geometry,g.vertices.push(r.a),g.vertices.push(r.b),g.vertices.push(r.c),g.faces.push(new i.Face3(0,1,2,t)),g.faceVertexUvs[0]=[[o,c,n]]}})},{"../core/geometry":103,"../lib/three":150}],148:[function(t,r){window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices;var a=t("webvr-polyfill");window.webvrpolyfill=new a({BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0});var o=t("./utils/"),n=o.debug,i=n("A-Frame:error"),s=n("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&s("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&i("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||t("promise-polyfill"),o.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),t("present"),o.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var l=t("./core/scene/a-scene").AScene,d=t("./core/component").components,c=t("./core/component").registerComponent,p=t("./core/geometry").registerGeometry,u=t("./extras/primitives/primitives").registerPrimitive,m=t("./core/shader").registerShader,g=t("./core/system").registerSystem,h=t("./core/shader").shaders,y=t("./core/system").systems,f=window.THREE=t("./lib/three"),A=window.TWEEN=t("@tweenjs/tween.js"),M=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var x=t("./core/a-node"),E=t("./core/a-entity");t("./core/a-animation"),t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),console.log("A-Frame Version: 0.8.2 (Date 2018-04-15, Commit #b20527f)"),console.log("three Version:",M.dependencies.three),console.log("WebVR Polyfill Version:",M.dependencies["webvr-polyfill"]),r.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:E,ANode:x,AScene:l,components:d,geometries:t("./core/geometry").geometries,registerComponent:c,registerElement:t("./core/a-register-element").registerElement,registerGeometry:p,registerPrimitive:u,registerShader:m,registerSystem:g,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:h,systems:y,THREE:f,TWEEN:A,utils:o,version:M.version}},{"../package":51,"./components/index":60,"./core/a-animation":95,"./core/a-assets":96,"./core/a-cubemap":97,"./core/a-entity":98,"./core/a-mixin":99,"./core/a-node":100,"./core/a-register-element":101,"./core/component":102,"./core/geometry":103,"./core/scene/a-scene":105,"./core/scene/scenes":108,"./core/schema":110,"./core/shader":111,"./core/system":112,"./extras/components/":113,"./extras/primitives/":116,"./extras/primitives/getMeshMixin":115,"./extras/primitives/primitives":117,"./geometries/index":139,"./lib/three":150,"./shaders/index":152,"./style/aframe.css":157,"./style/rStats.css":158,"./systems/index":161,"./utils/":172,"@tweenjs/tween.js":1,present:32,"promise-polyfill":33,"webvr-polyfill":46}],149:[function(t,r){window.aframeStats=function(r){function t(){var r=o.querySelectorAll("*");return Array.prototype.slice.call(r).filter(function(r){return r.isEntity}),r.length}var a=null,o=r;return{update:function(){a("te").set(t()),window.performance.getEntriesByName&&a("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(r){a=r},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={aframeStats:window.aframeStats})},{}],150:[function(t,r){(function(a){var o=a.THREE=t("three");o.TextureLoader&&(o.TextureLoader.prototype.crossOrigin="anonymous"),o.ImageLoader&&(o.ImageLoader.prototype.crossOrigin="anonymous"),o.Cache&&(o.Cache.enabled=!0),t("three/examples/js/loaders/GLTFLoader"),t("three/examples/js/loaders/OBJLoader"),t("three/examples/js/loaders/MTLLoader"),t("three/examples/js/loaders/ColladaLoader"),o.ColladaLoader.prototype.crossOrigin="anonymous",o.GLTFLoader.prototype.crossOrigin="anonymous",o.MTLLoader.prototype.crossOrigin="anonymous",o.OBJLoader.prototype.crossOrigin="anonymous",r.exports=o}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{three:40,"three/examples/js/loaders/ColladaLoader":41,"three/examples/js/loaders/GLTFLoader":42,"three/examples/js/loaders/MTLLoader":43,"three/examples/js/loaders/OBJLoader":44}],151:[function(t,r){function a(t){return{fog:t.fog,color:new n.Color(t.color),wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth}}var o=t("../core/shader").registerShader,n=t("../lib/three"),i=t("../utils/");r.exports.Shader=o("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.textureSrc=null,this.material=new n.MeshBasicMaterial(a(t)),i.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),i.material.updateMap(this,t)},updateMaterial:function(r){var o=this.material;r=a(r),Object.keys(r).forEach(function(t){o[t]=r[t]})}})},{"../core/shader":111,"../lib/three":150,"../utils/":172}],152:[function(t){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":151,"./ios10hls":153,"./msdf":154,"./sdf":155,"./standard":156}],153:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:"varying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"uniform sampler2D src;\nuniform float opacity;\nvarying vec2 vUV;\nvoid main() {\n  vec2 offset = vec2(0, 0);\n  vec2 repeat = vec2(1, 1);\n  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;\n  gl_FragColor = vec4(color.rgb, opacity);\n}"})},{"../core/shader":111}],154:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},negate:{type:"boolean",is:"uniform",default:!0},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nuniform bool negate;\nvarying vec2 vUV;\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\nvoid main() {\n  vec3 sample = texture2D(map, vUV).rgb;\n  if (negate) {\n    sample = 1.0 - sample;\n  }\n  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n  gl_FragColor = vec4(color.xyz, alpha * opacity);\n}"})},{"../core/shader":111}],155:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nvarying vec2 vUV;\n#ifdef GL_OES_standard_derivatives\nfloat contour(float width, float value) {\n  return smoothstep(0.5 - value, 0.5 + value, width);\n}\n#else\nfloat aastep(float value, float afwidth) {\n  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);\n}\n#endif\nvoid main() {\n#ifdef GL_OES_standard_derivatives\n  vec2 uv = vUV;\n  vec4 texColor = texture2D(map, uv);\n  float dist = texColor.a;\n  float width = fwidth(dist);\n  float alpha = contour(dist, width);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * dist;\n  }\n  else if (isBigEnough <= BIG_ENOUGH) {\n    vec4 box = vec4 (uv - duv, uv + duv);\n    alpha = (alpha + 0.5 * (\n      contour(texture2D(map, box.xy).a, width)\n      + contour(texture2D(map, box.zw).a, width)\n      + contour(texture2D(map, box.xw).a, width)\n      + contour(texture2D(map, box.zy).a, width)\n    )) / 3.0;\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n#else\n  vec4 texColor = texture2D(map, vUV);\n  float value = texColor.a;\n  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));\n  float alpha = aastep(value, afwidth);\n  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);\n  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }\n  alpha = alpha * ratio + (1.0 - ratio) * value;\n  if (ratio < 1.0)\n    if (alpha <= DISCARD_ALPHA) { discard; return; }\n#endif\n  gl_FragColor = vec4(color, opacity * alpha);\n}"})},{"../core/shader":111}],156:[function(t,r){function a(r){var a={color:new n.Color(r.color),emissive:new n.Color(r.emissive),emissiveIntensity:r.emissiveIntensity,fog:r.fog,metalness:r.metalness,roughness:r.roughness,wireframe:r.wireframe,wireframeLinewidth:r.wireframeLinewidth};return r.normalMap&&(a.normalScale=r.normalScale),r.ambientOcclusionMap&&(a.aoMapIntensity=r.ambientOcclusionMapIntensity),r.displacementMap&&(a.displacementScale=r.displacementScale,a.displacementBias=r.displacementBias),a}var o=t("../core/shader").registerShader,n=t("../lib/three"),s=t("../utils/"),l=new n.CubeTextureLoader,d={};r.exports.Shader=o("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},metalnessMap:{type:"map"},metalnessTextureOffset:{type:"vec2"},metalnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},roughnessMap:{type:"map"},roughnessTextureOffset:{type:"vec2"},roughnessTextureRepeat:{type:"vec2",default:{x:1,y:1}},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.material=new n.MeshStandardMaterial(a(t)),s.material.updateMap(this,t),t.normalMap&&s.material.updateDistortionMap("normal",this,t),t.displacementMap&&s.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&s.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&s.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),s.material.updateMap(this,t),t.normalMap&&s.material.updateDistortionMap("normal",this,t),t.displacementMap&&s.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&s.material.updateDistortionMap("ambientOcclusion",this,t),t.metalnessMap&&s.material.updateDistortionMap("metalness",this,t),t.roughnessMap&&s.material.updateDistortionMap("roughness",this,t),this.updateEnvMap(t)},updateMaterial:function(r){var o=this.material;r=a(r),Object.keys(r).forEach(function(t){o[t]=r[t]})},updateEnvMap:function(r){var o=this,t=this.material,a=r.envMap,i=r.sphericalEnvMap;return(a||i)&&!this.isLoadingEnvMap?(this.isLoadingEnvMap=!0,i?void this.el.sceneEl.systems.material.loadTexture(i,{src:i},function(r){o.isLoadingEnvMap=!1,r.mapping=n.SphericalReflectionMapping,t.envMap=r,s.material.handleTextureEvents(o.el,r),t.needsUpdate=!0}):d[a]?void d[a].then(function(r){o.isLoadingEnvMap=!1,t.envMap=r,s.material.handleTextureEvents(o.el,r),t.needsUpdate=!0}):void(d[a]=new Promise(function(r){s.srcLoader.validateCubemapSrc(a,function(a){l.load(a,function(a){o.isLoadingEnvMap=!1,t.envMap=a,s.material.handleTextureEvents(o.el,a),r(a)})})}))):(t.envMap=null,void(t.needsUpdate=!0))}})},{"../core/shader":111,"../lib/three":150,"../utils/":172}],157:[function(t,r){var a=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";t("browserify-css").createStyle(a,{href:"src\\style\\aframe.css"}),r.exports=a},{"browserify-css":5}],158:[function(t,r){var a=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(a,{href:"src\\style\\rStats.css"}),r.exports=a},{"browserify-css":5}],159:[function(t,r){function o(r){var a;r.camera&&(a=r.querySelector("["+l+"]"))&&r.removeChild(a)}var a=t("../utils/bind"),n=t("../constants/"),i=t("../core/system").registerSystem,l="data-aframe-default-camera";r.exports.System=i("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",a(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var r=this.sceneEl,t;return r.camera&&!r.camera.el.getAttribute("camera").spectator?void r.emit("camera-ready",{cameraEl:r.camera.el}):void(t=document.createElement("a-entity"),t.setAttribute("camera",{active:!0}),t.setAttribute("wasd-controls",""),t.setAttribute("look-controls",""),t.setAttribute(n.AFRAME_INJECTED,""),t.setAttribute("position",{x:0,y:n.DEFAULT_CAMERA_HEIGHT,z:0}),r.appendChild(t),r.addEventListener("enter-vr",this.removeDefaultOffset),r.addEventListener("exit-vr",this.addDefaultOffset),r.emit("camera-ready",{cameraEl:t}))},disableActiveCamera:function(){var t=this.sceneEl.querySelectorAll("[camera]");t[t.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(d){var p=this.activeCameraEl,c=this.sceneEl,s,t,a,r;if((r=d.getObject3D("camera"))&&d!==this.activeCameraEl){var i=c.querySelector("["+l+"]"),u=i&&i.querySelector("[camera]");for(d!==u&&o(c),this.activeCameraEl=d,this.activeCameraEl.play(),c.camera=r,p&&p.setAttribute("camera","active",!1),t=c.querySelectorAll("[camera]"),a=0;a<t.length;a++)s=t[a],s.isEntity&&d!==s&&(s.setAttribute("camera","active",!1),s.pause());c.emit("camera-set-active",{cameraEl:d})}},setSpectatorCamera:function(o){var n=this.spectatorCameraEl,r=this.sceneEl,i,t;(i=o.getObject3D("camera"))&&o!==this.spectatorCameraEl&&(n&&n.setAttribute("camera","spectator",!1),t=this.spectatorCameraEl=o,t.setAttribute("camera","active",!1),t.play(),r.emit("camera-set-spectator",{cameraEl:o}))},disableSpectatorCamera:function(){this.spectatorCameraEl=void 0},tock:function(){var r=this.sceneEl,t=r.renderer.vr.enabled,a;this.spectatorCameraEl&&!r.isMobile&&(a=this.spectatorCameraEl.components.camera.camera,r.renderer.vr.enabled=!1,r.renderer.render(r.object3D,a),r.renderer.vr.enabled=t)}})},{"../constants/":93,"../core/system":112,"../utils/bind":166}],160:[function(t,r){function a(a){var n=a.primitive,t=l[n]&&l[n].Geometry,i=new t;if(!t)throw new Error("Unknown geometry `"+n+"`");return i.init(a),s(i.geometry,a.buffer)}function n(r,a){r[a]--}function i(r,a){r[a]=void 0===r[a]?1:r[a]+1}function s(a,o){var t;return o?(t=new d.BufferGeometry().fromGeometry(a),t.metadata={type:a.type,parameters:a.parameters||{}},a.dispose(),t):a}var l=t("../core/geometry").geometries,o=t("../core/system").registerSystem,d=t("../lib/three");r.exports.System=o("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(n){var s=this.cache,o,t;return n.skipCache?a(n):(t=this.hash(n),o=s[t],i(this.cacheCount,t),o||(o=a(n),s[t]=o,o))},unuseGeometry:function(a){var s=this.cache,o=this.cacheCount,i,t;a.skipCache||(t=this.hash(a),s[t]&&(n(o,t),0<o[t]||(i=s[t],i.dispose(),delete s[t],delete o[t])))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":103,"../core/system":112,"../lib/three":150}],161:[function(t){t("./camera"),t("./geometry"),t("./light"),t("./material"),t("./shadow"),t("./tracked-controls")},{"./camera":159,"./geometry":160,"./light":162,"./material":163,"./shadow":164,"./tracked-controls":165}],162:[function(t,r){var a=t("../core/system").registerSystem,o=t("../utils/bind"),n=t("../constants/"),s="data-aframe-default-light";r.exports.System=a("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",o(this.setupDefaultLights,this))},registerLight:function(r){r.hasAttribute(s)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var r=this.sceneEl,a;if(this.defaultLights){a=document.querySelectorAll("["+s+"]");for(var t=0;t<a.length;t++)r.removeChild(a[t]);this.defaultLights=!1}},setupDefaultLights:function(){var r=this.sceneEl,a,t;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(a=document.createElement("a-entity"),a.setAttribute("light",{color:"#BBB",type:"ambient"}),a.setAttribute(s,""),a.setAttribute(n.AFRAME_INJECTED,""),r.appendChild(a),t=document.createElement("a-entity"),t.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(s,""),t.setAttribute(n.AFRAME_INJECTED,""),r.appendChild(t),this.defaultLights=!0)}})},{"../constants/":93,"../core/system":112,"../utils/bind":166}],163:[function(t,r){function a(o,s){var t=s.getAttribute("id"),a,r,i;if(t)return t;for(r="",i=o||{},a=0;a<s.attributes.length;a++)i[s.attributes[a].name]=s.attributes[a].value;return Object.keys(i).sort().forEach(function(t){r+=t+":"+i[t]+";"}),r}function o(a,o){function t(t){function i(r){l(r,o),r.needsUpdate=!0,t(r)}return"string"==typeof a?void h.load(a,i,function(){},function(t){g("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)}):void i(new p.Texture(a))}return new Promise(t)}function l(a,o){var t=o.offset||{x:0,y:0},r=o.repeat||{x:1,y:1};(o.npot||!1)&&(a.wrapS=p.ClampToEdgeWrapping,a.wrapT=p.ClampToEdgeWrapping,a.magFilter=p.LinearFilter,a.minFilter=p.LinearFilter),1===r.x&&1===r.y||(a.wrapS=p.RepeatWrapping,a.wrapT=p.RepeatWrapping,a.repeat.set(r.x,r.y)),0===t.x&&0===t.y||a.offset.set(t.x,t.y)}function d(a,o,t){var r=document.createElement("video");return r.width=o,r.height=t,r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){y("`$s` is not a valid video",a)},!0),r.src=a,r}function c(t){return t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t}var n=t("../core/system").registerSystem,p=t("../lib/three"),i=t("../utils/"),m=t("../utils/material").isHLS,s=i.bind,u=i.debug,g=u("components:texture:error"),h=new p.TextureLoader,y=u("components:texture:warn");h.setCrossOrigin("anonymous"),r.exports.System=n("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",s(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(o,n,t){var r=this;return"CANVAS"===o.tagName?void this.loadCanvas(o,n,t):"VIDEO"===o.tagName?(o.src||o.srcObject||o.childElementCount||y("Video element was defined with neither `source` elements nor `src` / `srcObject` attributes."),void this.loadVideo(o,n,t)):void i.srcLoader.validateSrc(o,function(a){r.loadImage(a,n,t)},function(a){r.loadVideo(a,n,t)})},loadImage:function(a,s,t){var r=this.hash(s),i=this.textureCache;return i[r]?void i[r].then(t):void(i[r]=o(a,s),i[r].then(t))},loadCanvas:function(a,o,t){a.readyState=2,a.HAVE_CURRENT_DATA=2,this.loadVideo(a,o,t)},loadVideo:function(g,h,t){function r(r){r.texture.needsUpdate=!0,t(r.texture,r.videoEl)}var i=this.textureCache,u,n,y,f;if("string"!=typeof g){if(y=g,u=this.hashVideo(h,y),i[u])return void i[u].then(r);c(y)}return(y=y||d(g,h.width,h.height),u=this.hashVideo(h,y),i[u])?void i[u].then(r):void(n=new p.VideoTexture(y),n.minFilter=p.LinearFilter,l(n,h),this.sceneEl.isIOS&&m(y.src||y.getAttribute("src"),y.type||y.getAttribute("type"))&&(n.format=p.RGBAFormat,n.needsCorrectionBGRA=!0,n.flipY=!1,n.needsCorrectionFlipY=!0),f={texture:n,videoEl:y},i[u]=Promise.resolve(f),r(f))},hash:function(t){return t.src.tagName&&(t=i.extendDeep({},t),t.src=t.src.src),JSON.stringify(t)},hashVideo:function(r,o){return a(r,o)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(a){delete this.materials[a.uuid];var o=this.textureCounts;Object.keys(a).filter(function(r){return a[r]&&a[r].isTexture}).forEach(function(t){0>=--o[a[t].uuid]&&a[t].dispose()})},updateMaterials:function(){var r=this.materials;Object.keys(r).forEach(function(t){r[t].needsUpdate=!0})},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":112,"../lib/three":150,"../utils/":172,"../utils/material":173}],164:[function(t,r){var a=t("../core/system").registerSystem,o=t("../lib/three"),n={basic:o.BasicShadowMap,pcf:o.PCFShadowMap,pcfsoft:o.PCFSoftShadowMap};r.exports.System=a("shadow",{schema:{autoUpdate:{default:!0},type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]}},init:function(){var t=this.sceneEl,r=this.data;this.shadowMapEnabled=!1,t.renderer&&(t.renderer.shadowMap.type=n[r.type],t.renderer.shadowMap.autoUpdate=r.autoUpdate,this.setShadowMapEnabled(this.shadowMapEnabled))},setShadowMapEnabled:function(t){var r=this.sceneEl.renderer;this.shadowMapEnabled=t,r&&(r.shadowMap.enabled=t)}})},{"../core/system":112,"../lib/three":150}],165:[function(t,r){var a=t("../core/system").registerSystem,o=t("../utils");r.exports.System=a("tracked-controls",{init:function(){var r=this;this.controllers=[],this.updateControllerList(navigator.getGamepads&&navigator.getGamepads()),this.throttledUpdateControllerList=o.throttle(this.updateControllerList,500,this),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(t){t.length&&(r.vrDisplay=t[0])})})},tick:function(){var r;r=navigator.getGamepads&&navigator.getGamepads(),this.throttledUpdateControllerList(r)},updateControllerList:function(a){var t=this.controllers,o,n,r;if(a){for(r=t.length,t.length=0,n=0;n<a.length;++n)(o=a[n])&&o.pose&&t.push(o);t.length!==r&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":112,"../utils":172}],166:[function(t,r){r.exports=function(a,r){return function(t){return function(){var n=t.concat(Array.prototype.slice.call(arguments,0));return a.apply(r,n)}}(Array.prototype.slice.call(arguments,2))}},{}],167:[function(t,r){function a(t){return l.test(t)}function n(t){for(var a in t)void 0===t[a]?delete t[a]:t[a].constructor===String&&(t[a]=parseFloat(t[a],10));return t}var o=t("./debug"),i=t("object-assign"),s=o("utils:coordinates:warn"),l=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;r.exports.regex=l,r.exports.parse=function(a,s){var l,o;return a&&a instanceof Object?(s&&(a.x=void 0===a.x?s.x:a.x,a.y=void 0===a.y?s.y:a.y,a.z=void 0===a.z?s.z:a.z,a.w=void 0===a.w?s.w:a.w),n(a)):null===a||void 0===a?"object"==("undefined"===typeof s?"undefined":babelHelpers.typeof(s))?i({},s):s:(l=a.trim().replace(/\s+/g," ").split(" "),o={},o.x=l[0]||s&&s.x,o.y=l[1]||s&&s.y,o.z=l[2]||s&&s.z,o.w=l[3]||s&&s.w,n(o))},r.exports.stringify=function(t){return"object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?[t.x,t.y,t.z,t.w].join(" ").trim():t},r.exports.isCoordinates=a,r.exports.isCoordinate=function(t){return s("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),a(t)},r.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":168,"object-assign":26}],168:[function(t,r){(function(a){function o(t){var a=t.split(":");return a[a.length-1]}function n(t){var a=o(t);return l.colors&&l.colors[a]||null}var i=t("debug"),s=t("object-assign"),l={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},d=function(t){var a=i(t);return a.color=n(t),a};s(d,i);var c=function(){try{return window.localStorage}catch(t){}}();c&&(parseInt(c.logs,10)||"true"===c.logs)?d.enable("*"):d.enable("*:error,*:info,*:warn"),a.browser&&(window.logs=d),r.exports=d}).call(this,t("_process"))},{_process:6,debug:10,"object-assign":26}],169:[function(t,r){(function(t){function a(){return d}function o(t){return /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t||window.navigator.userAgent)}function n(){return /iPad|iPhone|iPod/.test(window.navigator.platform)}function s(){return /SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}function l(){return /R7 Build/.test(window.navigator.userAgent)}var d,c;navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){d=t.length&&t[0],c=d.displayName==="Cardboard VRDisplay"}),r.exports.getVRDisplay=a,r.exports.checkHeadsetConnected=function(){return!!a()},r.exports.checkHasPositionalTracking=function(){var t=a();return!p()&&!s()&&t&&t.capabilities.hasPosition};var p=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0),(n()||o()||l())&&(t=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return t}}();r.exports.isMobile=p,r.exports.isTablet=o,r.exports.isIOS=n,r.exports.isGearVR=s,r.exports.isR7=l,r.exports.isLandscape=function(){var t=window.orientation;return l()&&(t+=90),90===t||-90===t},r.exports.isIOSOlderThan10=function(t){return /(iphone|ipod|ipad).*os.(7|8|9)/i.test(t)},r.exports.isBrowserEnvironment=!t||t.browser,r.exports.isNodeEnvironment=!r.exports.isBrowserEnvironment,r.exports.PolyfillControls=function(t){var r;window.VRFrameData&&(r=new window.VRFrameData),this.update=function(){var a;d&&c&&(d.getFrameData(r),a=r.pose,null!==a.orientation&&t.quaternion.fromArray(a.orientation),null===a.position?t.position.set(0,0,0):t.position.fromArray(a.position))}}}).call(this,t("_process"))},{_process:6}],170:[function(t,r){function a(r,t){return t=t||".",o[t]||(o[t]={}),o[t][r]=-1===r.indexOf(t)?r:r.split(t),o[t][r]}var o={};r.exports.getComponentPropertyPath=a,r.exports.propertyPathCache=o,r.exports.getComponentProperty=function(n,t,i){var r;return i=i||".",-1===t.indexOf(i)?n.getAttribute(t):(r=a(t,i),r.constructor===String?n.getAttribute(r):n.getAttribute(r[0])[r[1]])},r.exports.setComponentProperty=function(n,t,i,r){var o;return(r=r||".",-1!==t.indexOf(r))?(o=a(t,r),void(o.constructor===String?n.setAttribute(o,i):n.setAttribute(o[0],o[1],i))):void n.setAttribute(t,i)}},{}],171:[function(t,r){r.exports=function(r){var t=r.style.width,a=r.style.height;r.style.width=parseInt(t,10)+1+"px",r.style.height=parseInt(a,10)+1+"px",setTimeout(function(){r.style.width=t,r.style.height=a},200)}},{}],172:[function(t,a){var r=t("./debug"),o=t("deep-assign"),n=t("./device"),i=t("object-assign"),s=t("./object-pool"),l=r("utils:warn");a.exports.bind=t("./bind"),a.exports.coordinates=t("./coordinates"),a.exports.debug=r,a.exports.device=n,a.exports.entity=t("./entity"),a.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),a.exports.material=t("./material"),a.exports.objectPool=s,a.exports.split=t("./split").split,a.exports.styleParser=t("./styleParser"),a.exports.trackedControls=t("./tracked-controls"),a.exports.checkHeadsetConnected=function(){return l("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),n.checkHeadsetConnected(arguments)},a.exports.isGearVR=function(){return l("`utils.isGearVR` has moved to `utils.device.isGearVR`"),n.isGearVR(arguments)},a.exports.isIOS=function(){return l("`utils.isIOS` has moved to `utils.device.isIOS`"),n.isIOS(arguments)},a.exports.isMobile=function(){return l("`utils.isMobile has moved to `utils.device.isMobile`"),n.isMobile(arguments)},a.exports.throttle=function(i,s,r){var l;return r&&(i=a.exports.bind(i,r)),function(){var r=Date.now(),t=void 0===l?s:r-l;(void 0===l||t>=s)&&(l=r,i.apply(null,arguments))}},a.exports.throttleTick=function(s,l,r){var d;return r&&(s=a.exports.bind(s,r)),function(r,t){var a=void 0===d?t:r-d;(void 0===d||a>=l)&&(d=r,s(r,a))}},a.exports.debounce=function(a,l,r){var t;return function(){var d=this,n=arguments,i=r&&!t;clearTimeout(t),t=setTimeout(function(){t=null,r||a.apply(d,n)},l),i&&a.apply(d,n)}},a.exports.extend=i,a.exports.extendDeep=o,a.exports.clone=function(t){return JSON.parse(JSON.stringify(t))};var p=function(){var a=s.createPool(function(){return[]});return function(l,r){var t,o,n,i,d,u;if(void 0===l||void 0===r||null===l||null===r||!(l&&r&&l.constructor===Object&&r.constructor===Object||l.constructor===Array&&r.constructor===Array))return l===r;for(t in o=a.use(),n=a.use(),o.length=0,n.length=0,l)o.push(t);for(t in r)n.push(t);if(o.length!==n.length)return a.recycle(o),a.recycle(n),!1;for(i=0;i<o.length;++i)if(d=l[o[i]],u=r[o[i]],"object"==("undefined"===typeof d?"undefined":babelHelpers.typeof(d))||"object"==("undefined"===typeof u?"undefined":babelHelpers.typeof(u))||Array.isArray(d)&&Array.isArray(u)){if(d===u)continue;if(!p(d,u))return a.recycle(o),a.recycle(n),!1}else if(d!==u)return a.recycle(o),a.recycle(n),!1;return a.recycle(o),a.recycle(n),!0}}();a.exports.deepEqual=p,a.exports.diff=function(){var a=[];return function(m,r,g){var o,n,i,u,s,c,l;for(s in u=g||{},a.length=0,m)a.push(s);if(!r)return u;for(i in r)-1===a.indexOf(i)&&a.push(i);for(c=0;c<a.length;c++)s=a[c],o=m[s],n=r[s],(!(l=o&&n&&o.constructor===Object&&n.constructor===Object)||p(o,n))&&(l||o===n)||(u[s]=n);return u}}(),a.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},a.exports.splitString=function(a,o){void 0===o&&(o=" ");var r=new RegExp(o,"g");return a=(a||"").replace(r,o),a.split(o)},a.exports.getElData=function(t,a){a=a||{};var n={};return Object.keys(a).forEach(function(a){t.hasAttribute(a)&&(n[a]=t.getAttribute(a))}),n},a.exports.getUrlParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+a+"=([^&#]*)"),r=o.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},a.exports.isIframed=function(){return window.top!==window.self},a.exports.findAllScenes=function(a){for(var i=[],r=a.getElementsByTagName("*"),t=0,o=r.length;t<o;t++)r[t].isScene&&i.push(r[t]);return i},a.exports.srcLoader=t("./src-loader")},{"./bind":166,"./coordinates":167,"./debug":168,"./device":169,"./entity":170,"./forceCanvasResizeSafariMobile":171,"./material":173,"./object-pool":174,"./split":175,"./src-loader":176,"./styleParser":177,"./tracked-controls":178,"deep-assign":12,"object-assign":26}],173:[function(t,r){function a(r,a){a&&(r.emit("materialtextureloaded",{src:a.image,texture:a}),a.image&&"VIDEO"===a.image.tagName&&(a.image.addEventListener("loadeddata",function(){r.components&&r.components.material&&(a.needsCorrectionBGRA&&a.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(r.components.material.data.shader)&&r.setAttribute("material","shader","ios10hls"),r.emit("materialvideoloadeddata",{src:a.image,texture:a}))}),a.image.addEventListener("ended",function(){r.emit("materialvideoended",{src:a.image,texture:a})})))}var n=t("../lib/three"),o=["application/x-mpegurl","application/vnd.apple.mpegurl"];r.exports.updateMapMaterialFromData=function(d,c,p,t){function r(r){o[d]=r,o.needsUpdate=!0,a(i,r)}var i=p.el,o=p.material,s=t[c];return(p.materialSrcs||(p.materialSrcs={}),!s)?(delete p.materialSrcs[d],void r(null)):void(s!==p.materialSrcs[d]&&(p.materialSrcs[d]=s,s instanceof n.Texture?r(s):i.sceneEl.systems.material.loadTexture(s,{src:s,repeat:t.repeat,offset:t.offset,npot:t.npot},function(a){p.materialSrcs[d]===s&&r(a)})))},r.exports.updateMap=function(a,o){return r.exports.updateMapMaterialFromData("map","src",a,o)},r.exports.updateDistortionMap=function(d,c,t){function p(t){i[r+"Map"]=t,i.needsUpdate=!0,a(n,t)}var r=d;"ambientOcclusion"===d&&(r="ao");var n=c.el,i=c.material,o=t[d+"Map"],s={};return(s.src=o,s.offset=t[d+"TextureOffset"],s.repeat=t[d+"TextureRepeat"],s.wrap=t[d+"TextureWrap"],o)?o===c[d+"TextureSrc"]?void 0:(c[d+"TextureSrc"]=o,void n.sceneEl.systems.material.loadTexture(o,s,p)):void(i.map&&p(null))},r.exports.handleTextureEvents=a,r.exports.isHLS=function(r,a){return a&&o.includes(a.toLowerCase())||!!(r&&0<r.toLowerCase().indexOf(".m3u8"))}},{"../lib/three":150}],174:[function(t,r){function a(){return{}}function n(r){if(r.constructor===Object)for(var a in r)r[a]=void 0}var i=Object.freeze(Object.create(null));r.exports.createPool=function(s){function t(a){var o,n;if(a=void 0===a?d.length:a,0<a&&null==c&&(c=0),0<a)for(o=d.length,d.length+=+a,n=o;n<d.length;n++)d[n]=s();return d.length}var d=[],c=null;return s=s||a,{grow:t,pool:d,recycle:function(t){if(t instanceof Object)return null===c||-1===c?void(d[d.length]=t):void(d[--c]=t)},size:function(){return d.length},use:function(){var r;return null!==c&&c!==d.length||t(d.length||5),r=d[c],d[c++]=i,n(r),r}}},r.exports.clearObject=n},{}],175:[function(t,r){r.exports.split=function(){var r={};return function(a,t){return t in r||(r[t]={}),a in r[t]?r[t][a]:(r[t][a]=a.split(t),r[t][a])}}()},{}],176:[function(t,r){function a(o,i,a){n(o,function(t){return t?void i(o):void a(o)})}function o(t){var r=t.match(/\url\((.+)\)/);if(r)return r[1]}function n(r,o){var a;return r.tagName?void o("IMG"===r.tagName):void(a=new XMLHttpRequest,a.open("HEAD",r),a.addEventListener("load",function(){var t;200<=a.status&&300>a.status?(t=a.getResponseHeader("Content-Type"),null==t?i(r,o):o(!!t.startsWith("image"))):i(r,o),a.abort()}),a.send())}function i(t,r){var a=new Image;a.addEventListener("load",function(){r(!0)}),a.addEventListener("error",function(){r(!1)}),a.src=t}function l(t){try{var r=document.querySelector(t);return r||d("No element was found matching the selector: \"%s\"",t),r}catch(r){return void d("\"%s\" is not a valid selector",t)}}var s=t("./debug"),d=s("utils:src-loader:warn");r.exports={parseUrl:o,validateSrc:a,validateCubemapSrc:function(i,p){function u(t){s.push(t),6===s.length&&p(s)}var t="",s=[],m,r,n;for(r=0;5>r;r++)t+="(url\\((?:[^\\)]+)\\),\\s*)";if(t+="(url\\((?:[^\\)]+)\\)\\s*)",n=i.match(new RegExp(t)))for(r=1;7>r;r++)a(o(n[r]),u);else if(m=l(i))return"A-CUBEMAP"===m.tagName&&m.srcs?p(m.srcs):void d("Selector \"%s\" does not point to <a-cubemap>",i)}}},{"./debug":168}],177:[function(t,r){function a(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function o(o){var n=Object.keys(o),i={};return n.forEach(function(t){var r=a(t);i[r]=o[t]}),i}var n=t("style-attr");r.exports.parse=function(t){var a;return"string"==typeof t?(a=n.parse(t),a[""]?t:o(a)):t},r.exports.stringify=function(t){return"string"==typeof t?t:n.stringify(t)},r.exports.toCamelCase=a,r.exports.transformKeysToCamelCase=o},{"style-attr":35}],178:[function(t,r){function a(a,d,c){var t=a.el.sceneEl,l=c.index||0,i,r;return!!d&&!!(r=t&&t.systems["tracked-controls"])&&(i=r.controllers,!!i.length&&!!s(i,null,d,c.hand,l))}function s(m,g,h,t,y){var o=0,f=y||0,u,l,A,s,d,M;for(h&&0<=h.indexOf("|")&&(l=p(h,"|")),A=0;A<m.length;A++){if(u=m[A],l){for(d=!1,s=0;s<l.length;s++)if((M=l[s])&&u.id.startsWith(M)){d=!0;break}if(!d)continue}else if(h&&u.id.indexOf(h))continue;if((h||u.id===g)&&(!t||!u.hand||t===u.hand)){if(t&&!u.hand&&(f=i*y+(t===n?0:1)),o===f)return u;++o}}}var p=t("./split").split,n=t("../constants").DEFAULT_HANDEDNESS,o=["x","y","z","w"],i=2;r.exports.checkControllerPresentAndSetup=function(i,s,n){var t=i.el,r=a(i,s,n);return(i.controllerPresent&&!i.controllerEventsActive&&i.addEventListeners(),r===i.controllerPresent)?r:void(i.controllerPresent=r,r?(i.injectTrackedControls(),i.addEventListeners(),t.emit("controllerconnected",{name:i.name,component:i})):(i.removeEventListeners(),t.emit("controllerdisconnected",{name:i.name,component:i})))},r.exports.isControllerPresent=a,r.exports.findMatchingController=s,r.exports.emitIfAxesChanged=function(a,d,n){var t,r,c,l,i;for(r in d){for(t=d[r],c=!1,i=0;i<t.length;i++)n.detail.changed[t[i]]&&(c=!0);if(c){for(l={},i=0;i<t.length;i++)l[o[i]]=n.detail.axis[t[i]];a.el.emit(r+"moved",l)}}},r.exports.onButtonEvent=function(a,i,n,t){var r=t?n.mapping[t]:n.mapping,o=r.buttons[a];n.el.emit(o+i),n.updateModel&&n.updateModel(o,i)}},{"../constants":93,"./split":175}],179:[function(t,r){window.glStats=function(){function t(t,a){return function(){a.apply(this,arguments),t.apply(this,arguments)}}var r=null,a=0,o=0,n=0,i=0,s=0,l=0,d=0;return WebGLRenderingContext.prototype.drawArrays=t(WebGLRenderingContext.prototype.drawArrays,function(){a++,arguments[0]==this.POINTS?l+=arguments[2]:s+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=t(WebGLRenderingContext.prototype.drawElements,function(){o++,i+=arguments[1]/3,s+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=t(WebGLRenderingContext.prototype.useProgram,function(){n++}),WebGLRenderingContext.prototype.bindTexture=t(WebGLRenderingContext.prototype.bindTexture,function(){d++}),{update:function(){r("allcalls").set(a+o),r("drawElements").set(o),r("drawArrays").set(a),r("bindTexture").set(d),r("useProgram").set(n),r("glfaces").set(i),r("glvertices").set(s),r("glpoints").set(l)},start:function(){a=0,o=0,n=0,i=0,s=0,l=0,d=0},end:function(){},attach:function(t){r=t},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var r=null;return{update:function(){r("renderer.info.memory.geometries").set(t.info.memory.geometries),r("renderer.info.programs").set(t.info.programs.length),r("renderer.info.memory.textures").set(t.info.memory.textures),r("renderer.info.render.calls").set(t.info.render.calls),r("renderer.info.render.faces").set(t.info.render.faces),r("renderer.info.render.points").set(t.info.render.points),r("renderer.info.render.vertices").set(t.info.render.vertices)},start:function(){},end:function(){},attach:function(t){r=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function t(t){var o=D(l(t)/i);return a(100*t/A(1024,o))/100}var r=null,o=0,n=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i=6.931471805599453;return{update:function(){o=t(performance.memory.usedJSHeapSize),n=t(performance.memory.totalJSHeapSize),r("memory").set(o),r("total").set(n)},start:function(){o=0},end:function(){},attach:function(t){r=t},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],180:[function(t,r){"use strict";!function(){0=="performance"in window&&(window.performance={});var r=window.performance;if(0=="now"in r){var a=Date.now();r.timing&&r.timing.navigationStart&&(a=r.timing.navigationStart),r.now=function(){return Date.now()-a}}r.mark||(r.mark=function(){}),r.measure||(r.measure=function(){})}(),window.rStats=function(g){function y(o,i){for(var s=Object.keys(o),n=0,a=s.length;n<a;n++)i(s[n])}function t(r){var a=document.createElement("link");a.href=r,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)}function A(a,p,t){var n=t||{},r=document.createElement("canvas"),i=r.getContext("2d"),o=0,c=0,l=n.color?n.color:"#666666",g=document.createElement("canvas"),u=g.getContext("2d");g.width=1,g.height=2*E,u.fillStyle="#444444",u.fillRect(0,0,1,2*E),u.fillStyle=l,u.fillRect(0,E,1,E),u.fillStyle="#ffffff",u.globalAlpha=.5,u.fillRect(0,E,1,1),u.globalAlpha=1;var d=document.createElement("canvas"),h=d.getContext("2d");return d.width=1,d.height=2*E,h.fillStyle="#444444",h.fillRect(0,0,1,2*E),h.fillStyle="#b70000",h.fillRect(0,E,1,E),h.globalAlpha=.5,h.fillStyle="#ffffff",h.fillRect(0,E,1,1),h.globalAlpha=1,function(){r.width=s,r.height=E,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",a.appendChild(r),i.fillStyle="#444444",i.fillRect(0,0,r.width,r.height)}(),{draw:function(a,n){c+=.1*(a-c),o*=.99,c>o&&(o=c),i.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),n?i.drawImage(d,r.width-1,r.height-c*r.height/o-E):i.drawImage(g,r.width-1,r.height-c*r.height/o-E)}}}function M(t,a){var o=document.createElement("canvas"),d=o.getContext("2d");return function(){o.width=s,o.height=E*a,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",t.appendChild(o),d.fillStyle="#444444",d.fillRect(0,0,o.width,o.height)}(),{draw:function(r){d.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height);var i=0;y(r,function(n){var t=r[n]*o.height;d.fillStyle=l[n],d.fillRect(o.width-1,i,1,t),i+=t})}}}function x(o,s){function l(r){if(b&&b.average){g+=r,M++;var a=performance.now();a-f>=(b.avgMs||1e3)&&(m=g/M,g=0,f=a,M=0)}}function t(){N=performance.now(),T.userTimingAPI&&performance.mark(c+"-start"),D=!0}function n(){p=performance.now()-N,T.userTimingAPI&&(performance.mark(c+"-end"),D&&performance.measure(c,c+"-start",c+"-end")),l(p)}var c=o,p=0,h=0,m=0,g=0,f=performance.now(),M=0,v=document.createElement("div"),y=document.createElement("span"),E=document.createElement("div"),L=document.createTextNode(""),b=T?T.values[c.toLowerCase()]:null,x=new A(v,c,b),D=!1,N;return y.className="rs-counter-id",y.textContent=b&&b.caption?b.caption:c,E.className="rs-counter-value",E.appendChild(L),v.appendChild(y),v.appendChild(E),s?s.div.appendChild(v):u.appendChild(v),N=performance.now(),{set:function(t){p=t,l(p)},start:t,tick:function(){n(),t()},end:n,frame:function(){var r=performance.now(),a=r-N;h++,1e3<a&&(p=b&&!1===b.interpolate?h:1e3*h/a,h=0,N=r,l(p))},value:function(){return p},draw:function(){var r=b&&b.average?m:p;L.nodeValue=a(100*r)/100;var o=b&&(b.below&&p<b.below||b.over&&p>b.over);x.draw(p,o),v.className=o?"rs-counter-base alarm":"rs-counter-base"}}}function r(t){var o=t.toLowerCase();if(void 0===o&&(o="default"),p[o])return p[o];var n=null;T&&T.groups&&y(T.groups,function(r){var a=T.groups[parseInt(r,10)];n||-1===a.values.indexOf(o.toLowerCase())||(n=a)});var a=new x(o,n);return p[o]=a,a}function o(){y(T.plugins,function(t){T.plugins[t].update()}),y(p,function(t){p[t].draw()}),T&&T.fractions&&y(T.fractions,function(o){var t=T.fractions[parseInt(o,10)],s=[],a=p[t.base.toLowerCase()];a&&(a=a.value(),y(T.fractions[o].steps,function(r){var t=T.fractions[o].steps[parseInt(r,10)].toLowerCase(),n=p[t];n&&s.push(n.value()/a)})),t.graph.draw(s)})}var T=g||{},l=T.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],n=(T.CSSPath?T.CSSPath:"")+"rStats.css";(T.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",n]).forEach(function(r){t(r)}),T.values||(T.values={});var E=10,s=200,p={},i,u;return function(){if(T.plugins){T.values||(T.values={}),T.groups||(T.groups=[]),T.fractions||(T.fractions=[]);for(var a=0;a<T.plugins.length;a++)T.plugins[a].attach(r),y(T.plugins[a].values,function(r){T.values[r]=T.plugins[a].values[r]}),T.groups=T.groups.concat(T.plugins[a].groups),T.fractions=T.fractions.concat(T.plugins[a].fractions)}else T.plugins={};i=document.createElement("div"),i.className="rs-base",u=document.createElement("div"),u.className="rs-container",u.style.height="auto",i.appendChild(u),document.body.appendChild(i),T&&(T.groups&&y(T.groups,function(r){var o=T.groups[parseInt(r,10)],t=document.createElement("div");t.className="rs-group",o.div=t;var n=document.createElement("h1");n.textContent=o.caption,n.addEventListener("click",function(t){this.classList.toggle("hidden"),t.preventDefault()}.bind(t)),u.appendChild(n),u.appendChild(t)}),T.fractions&&y(T.fractions,function(r){var t=T.fractions[parseInt(r,10)],n=document.createElement("div");n.className="rs-fraction";var a=document.createElement("div");a.className="rs-legend";var i=0;y(T.fractions[r].steps,function(o){var t=document.createElement("p");t.textContent=T.fractions[r].steps[o],t.style.color=l[i],a.appendChild(t),i++}),n.appendChild(a),n.style.height=i*E+"px",t.div=n;var o=new M(n,i);t.graph=o,u.appendChild(n)}))}(),function(t){return t?r(t):{element:i,update:o}}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports=window.rStats)},{}],181:[function(t,r){var a={};a.base64=function(t,r){return"data:"+t+";base64,"+r},a.isMobile=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},a.isIOS=function(){return /(iPad|iPhone|iPod)/g.test(navigator.userAgent)},a.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},a.appendQueryParameter=function(r,a,o){return r+=(0>r.indexOf("?")?"?":"&")+a+"="+o},a.getQueryParameter=function(r){r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+r+"=([^&#]*)"),o=a.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},a.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.exports=a},{}],182:[function(t,r){function a(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=n.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}function o(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){t&&(clearInterval(t),t=null)}}var n=t("./util.js");r.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?o:a}()},{"./util.js":181}]},{},[148])(148)});