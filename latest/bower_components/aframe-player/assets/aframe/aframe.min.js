(function(t){if("object"===("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!==typeof module)module.exports=t();else if("function"===typeof define&&define.amd)define([],t);else{var r;r="undefined"===typeof window?"undefined"===typeof global?"undefined"===typeof self?this:self:global:window,r.AFRAME=t()}})(function(){var y=Number.MAX_VALUE,x=Math.tan,l=Math.atan,M=Math.acos,A=Math.round,jr=Math.sign,L=Math.max,r=Math.LN2,m=Math.log,D=Math.abs,o=String.fromCharCode,N=Math.min,C=Math.floor,S=Math.sqrt,g=Math.pow,I=Math.sin,O=Math.cos,Or=Math.PI,a;return function d(c,t,n){function r(i,o){if(!t[i]){if(!c[i]){var p="function"==typeof require&&require;if(!o&&p)return p(i,!0);if(s)return s(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var m=t[i]={exports:{}};c[i][0].call(m.exports,function(t){var a=c[i][1][t];return r(a?a:t)},m,m.exports,d,c,t,n)}return t[i].exports}for(var s="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({1:[function(t,r,o){(function(i){var t=function(){this._tweens={},this._tweensAddedDuringUpdate={}};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(r){return this._tweens[r]}.bind(this))},removeAll:function(){this._tweens={}},add:function(r){this._tweens[r.getId()]=r,this._tweensAddedDuringUpdate[r.getId()]=r},remove:function(r){delete this._tweens[r.getId()],delete this._tweensAddedDuringUpdate[r.getId()]},update:function(r,t){var a=Object.keys(this._tweens);if(0===a.length)return!1;for(r=void 0===r?l.now():r;0<a.length;){this._tweensAddedDuringUpdate={};for(var o=0;o<a.length;o++)!1===this._tweens[a[o]].update(r)&&(this._tweens[a[o]]._isPlaying=!1,t||delete this._tweens[a[o]]);a=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var l=new t;l.Group=t,l._nextId=0,l.nextId=function(){return l._nextId++},l.now="undefined"==typeof window&&"undefined"!=typeof i?function(){var r=i.hrtime();return 1e3*r[0]+r[1]/1e6}:"undefined"!=typeof window&&void 0!==window.performance&&void 0!==window.performance.now?window.performance.now.bind(window.performance):void 0===Date.now?function(){return new Date().getTime()}:Date.now,l.Tween=function(r,t){this._object=r,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||l,this._id=l.nextId()},l.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(r,t){return this._valuesEnd=r,void 0!==t&&(this._duration=t),this},start:function(r){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0===r?l.now():r,this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],!1==this._valuesStart[t]instanceof Array&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback.call(this._object,this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(this._startTime+this._duration),this},stopChainedTweens:function(){for(var r=0,t=this._chainedTweens.length;r<t;r++)this._chainedTweens[r].stop()},delay:function(r){return this._delayTime=r,this},repeat:function(r){return this._repeat=r,this},repeatDelay:function(r){return this._repeatDelayTime=r,this},yoyo:function(r){return this._yoyo=r,this},easing:function(r){return this._easingFunction=r,this},interpolation:function(r){return this._interpolationFunction=r,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(r){return this._onStartCallback=r,this},onUpdate:function(r){return this._onUpdateCallback=r,this},onComplete:function(r){return this._onCompleteCallback=r,this},onStop:function(r){return this._onStopCallback=r,this},update:function(l){var t,n,d;if(l<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback.call(this._object,this._object),this._onStartCallbackFired=!0),n=(l-this._startTime)/this._duration,n=1<n?1:n,d=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,r=this._valuesEnd[t];r instanceof Array?this._object[t]=this._interpolationFunction(r,d):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?i+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[t]=i+(r-i)*d))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._object,d),1===n){if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]+=parseFloat(this._valuesEnd[t])),this._yoyo){var c=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=c}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=void 0===this._repeatDelayTime?l+this._delayTime:l+this._repeatDelayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback.call(this._object,this._object);for(var s=0,o=this._chainedTweens.length;s<o;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},l.Easing={Linear:{None:function(r){return r}},Quadratic:{In:function(r){return r*r},Out:function(r){return r*(2-r)},InOut:function(r){return 1>(r*=2)?.5*r*r:-.5*(--r*(r-2)-1)}},Cubic:{In:function(r){return r*r*r},Out:function(r){return--r*r*r+1},InOut:function(r){return 1>(r*=2)?.5*r*r*r:.5*((r-=2)*r*r+2)}},Quartic:{In:function(r){return r*r*r*r},Out:function(r){return 1- --r*r*r*r},InOut:function(r){return 1>(r*=2)?.5*r*r*r*r:-.5*((r-=2)*r*r*r-2)}},Quintic:{In:function(r){return r*r*r*r*r},Out:function(r){return--r*r*r*r*r+1},InOut:function(r){return 1>(r*=2)?.5*r*r*r*r*r:.5*((r-=2)*r*r*r*r+2)}},Sinusoidal:{In:function(r){return 1-O(r*Or/2)},Out:function(r){return I(r*Or/2)},InOut:function(r){return .5*(1-O(Or*r))}},Exponential:{In:function(r){return 0===r?0:g(1024,r-1)},Out:function(r){return 1===r?1:1-g(2,-10*r)},InOut:function(r){return 0===r?0:1===r?1:1>(r*=2)?.5*g(1024,r-1):.5*(2-g(2,-10*(r-1)))}},Circular:{In:function(r){return 1-S(1-r*r)},Out:function(r){return S(1- --r*r)},InOut:function(r){return 1>(r*=2)?-.5*(S(1-r*r)-1):.5*(S(1-(r-=2)*r)+1)}},Elastic:{In:function(r){return 0===r?0:1===r?1:-g(2,10*(r-1))*I(5*(r-1.1)*Or)},Out:function(r){return 0===r?0:1===r?1:g(2,-10*r)*I(5*(r-.1)*Or)+1},InOut:function(r){return 0===r?0:1===r?1:(r*=2,1>r?-.5*g(2,10*(r-1))*I(5*(r-1.1)*Or):.5*g(2,-10*(r-1))*I(5*(r-1.1)*Or)+1)}},Back:{In:function(r){var t=1.70158;return r*r*((t+1)*r-t)},Out:function(r){var t=1.70158;return--r*r*((t+1)*r+t)+1},InOut:function(r){var t=2.5949095;return 1>(r*=2)?.5*(r*r*((t+1)*r-t)):.5*((r-=2)*r*((t+1)*r+t)+2)}},Bounce:{In:function(r){return 1-l.Easing.Bounce.Out(1-r)},Out:function(r){return r<1/2.75?7.5625*r*r:r<2/2.75?7.5625*(r-=1.5/2.75)*r+.75:r<2.5/2.75?7.5625*(r-=2.25/2.75)*r+.9375:7.5625*(r-=2.625/2.75)*r+.984375},InOut:function(r){return .5>r?.5*l.Easing.Bounce.In(2*r):.5*l.Easing.Bounce.Out(2*r-1)+.5}}},l.Interpolation={Linear:function(o,t){var n=o.length-1,s=n*t,i=C(s),r=l.Interpolation.Utils.Linear;return 0>t?r(o[0],o[1],s):1<t?r(o[n],o[n-1],n-s):r(o[i],o[i+1>n?n:i+1],s-i)},Bezier:function(o,t){for(var n=0,d=o.length-1,i=g,r=l.Interpolation.Utils.Bernstein,a=0;a<=d;a++)n+=i(1-t,d-a)*i(t,a)*o[a]*r(d,a);return n},CatmullRom:function(o,t){var n=o.length-1,s=n*t,d=C(s),r=l.Interpolation.Utils.CatmullRom;return o[0]===o[n]?(0>t&&(d=C(s=n*(1+t))),r(o[(d-1+n)%n],o[d],o[(d+1)%n],o[(d+2)%n],s-d)):0>t?o[0]-(r(o[0],o[0],o[1],o[1],-s)-o[0]):1<t?o[n]-(r(o[n],o[n],o[n-1],o[n-1],s-n)-o[n]):r(o[d?d-1:0],o[d],o[n<d+1?n:d+1],o[n<d+2?n:d+2],s-d)},Utils:{Linear:function(r,t,a){return(t-r)*a+r},Bernstein:function(r,t){var a=l.Interpolation.Utils.Factorial;return a(r)/a(t)/a(r-t)},Factorial:function(){var r=[1];return function(t){var a=1;if(r[t])return r[t];for(var o=t;1<o;o--)a*=o;return r[t]=a,a}}(),CatmullRom:function(l,t,n,d,i){var r=.5*(n-l),a=.5*(d-t),s=i*i;return(2*t-2*n+r+a)*(i*s)+(-3*t+3*n-2*r-a)*s+r*i+t}}},function(i){"function"==typeof a&&a.amd?a([],function(){return l}):"undefined"!=typeof r&&"object"==("undefined"===typeof o?"undefined":babelHelpers.typeof(o))?r.exports=l:void 0!==i&&(i.TWEEN=l)}(this)}).call(this,t("_process"))},{_process:6}],2:[function(t,r){var a=Object.prototype.toString;r.exports=function(t){return t.BYTES_PER_ELEMENT&&"[object ArrayBuffer]"===a.call(t.buffer)||Array.isArray(t)}},{}],3:[function(t,r){r.exports=function(t,r){return"number"==typeof t?t:"number"==typeof r?r:0}},{}],4:[function(t,r,a){"use strict";function s(t){var a=t.length;if(0<a%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[a-2]?2:"="===t[a-1]?1:0}function l(t){return c[63&t>>18]+c[63&t>>12]+c[63&t>>6]+c[63&t]}function d(a,o,r){for(var i=[],s=o,n;s<r;s+=3)n=(a[s]<<16)+(a[s+1]<<8)+a[s+2],i.push(l(n));return i.join("")}a.byteLength=function(t){return 3*t.length/4-s(t)},a.toByteArray=function(i){var o=i.length,l,r,d,t,c;t=s(i),c=new g(3*o/4-t),r=0<t?o-4:o;var n=0;for(l=0;l<r;l+=4)d=m[i.charCodeAt(l)]<<18|m[i.charCodeAt(l+1)]<<12|m[i.charCodeAt(l+2)]<<6|m[i.charCodeAt(l+3)],c[n++]=255&d>>16,c[n++]=255&d>>8,c[n++]=255&d;return 2===t?(d=m[i.charCodeAt(l)]<<2|m[i.charCodeAt(l+1)]>>4,c[n++]=255&d):1===t&&(d=m[i.charCodeAt(l)]<<10|m[i.charCodeAt(l+1)]<<4|m[i.charCodeAt(l+2)]>>2,c[n++]=255&d>>8,c[n++]=255&d),c},a.fromByteArray=function(i){for(var o=i.length,s=o%3,t="",l=[],n=0,p=o-s,a;n<p;n+=16383)l.push(d(i,n,n+16383>p?p:n+16383));return 1===s?(a=i[o-1],t+=c[a>>2],t+=c[63&a<<4],t+="=="):2===s&&(a=(i[o-2]<<8)+i[o-1],t+=c[a>>10],t+=c[63&a>>4],t+=c[63&a<<2],t+="="),l.push(t),l.join("")};for(var c=[],m=[],g="undefined"==typeof Uint8Array?Array:Uint8Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,i=o.length;n<i;++n)c[n]=o[n],m[o.charCodeAt(n)]=n;m[45]=62,m[95]=63},{}],5:[function(t,r){"use strict";r.exports={createLink:function(o,i){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("link");for(var n in a.href=o,a.rel="stylesheet",i)if(i.hasOwnProperty(n)){var s=i[n];a.setAttribute("data-"+n,s)}t.appendChild(a)},createStyle:function(o,i){var t=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");for(var n in a.type="text/css",i)if(i.hasOwnProperty(n)){var s=i[n];a.setAttribute("data-"+n,s)}a.sheet?(a.innerHTML=o,a.sheet.cssText=o,t.appendChild(a)):a.styleSheet?(t.appendChild(a),a.styleSheet.cssText=o):(a.appendChild(document.createTextNode(o)),t.appendChild(a))}}},{}],6:[function(t,r){function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(t){if(u===setTimeout)return setTimeout(t,0);if((u===a||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(r){try{return u.call(null,t,0)}catch(r){return u.call(this,t,0)}}}function n(t){if(m===clearTimeout)return clearTimeout(t);if((m===o||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(t);try{return m(t)}catch(r){try{return m.call(null,t)}catch(r){return m.call(this,t)}}}function s(){h&&f&&(h=!1,f.length?g=f.concat(g):y=-1,g.length&&l())}function l(){if(!h){var r=i(s);h=!0;for(var a=g.length;a;){for(f=g,g=[];++y<a;)f&&f[y].run();y=-1,a=g.length}f=null,h=!1,n(r)}}function d(r,a){this.fun=r,this.array=a}function c(){}var p=r.exports={},u,m;!function(){try{u="function"==typeof setTimeout?setTimeout:a}catch(t){u=a}try{m="function"==typeof clearTimeout?clearTimeout:o}catch(t){m=o}}();var g=[],h=!1,y=-1,f;p.nextTick=function(a){var o=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)o[t-1]=arguments[t];g.push(new d(a,o)),1!==g.length||h||i(l)},d.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=c,p.addListener=c,p.once=c,p.off=c,p.removeListener=c,p.removeAllListeners=c,p.emit=c,p.prependListener=c,p.prependOnceListener=c,p.listeners=function(){return[]},p.binding=function(){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],7:[function(t,r){var a=t("buffer").Buffer;r.exports=function(t,o){if(a.isBuffer(t)&&a.isBuffer(o)){if("function"==typeof t.equals)return t.equals(o);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==o[i])return!1;return!0}}},{buffer:8}],8:[function(t,r,a){(function(r){"use strict";function i(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(r,t){if(i()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(r=new Uint8Array(t),r.__proto__=l.prototype):(null===r&&(r=new l(t)),r.length=t),r}function l(a,o,i){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(a,o,i);if("number"==typeof a){if("string"==typeof o)throw new Error("If encoding is specified then the first argument must be a string");return p(this,a)}return n(this,a,o,i)}function n(a,t,o,r){if("number"==typeof t)throw new TypeError("\"value\" argument must not be a number");return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?h(a,t,o,r):"string"==typeof t?u(a,t,o):y(a,t)}function d(r){if("number"!=typeof r)throw new TypeError("\"size\" argument must be a number");if(0>r)throw new RangeError("\"size\" argument must not be negative")}function c(a,t,o,r){return d(t),0>=t?s(a,t):void 0===o?s(a,t):"string"==typeof r?s(a,t).fill(o,r):s(a,t).fill(o)}function p(a,t){if(d(t),a=s(a,0>t?0:0|f(t)),!l.TYPED_ARRAY_SUPPORT)for(var o=0;o<t;++o)a[o]=0;return a}function u(a,t,o){if("string"==typeof o&&""!==o||(o="utf8"),!l.isEncoding(o))throw new TypeError("\"encoding\" must be a valid string encoding");var i=0|M(t,o);a=s(a,i);var n=a.write(t,o);return n!==i&&(a=a.slice(0,n)),a}function m(a,t){var o=0>t.length?0:0|f(t.length);a=s(a,o);for(var r=0;r<o;r+=1)a[r]=255&t[r];return a}function h(a,t,o,r){if(t.byteLength,0>o||t.byteLength<o)throw new RangeError("'offset' is out of bounds");if(t.byteLength<o+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===o&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,o):new Uint8Array(t,o,r),l.TYPED_ARRAY_SUPPORT?(a=t,a.__proto__=l.prototype):a=m(a,t),a}function y(a,t){if(l.isBuffer(t)){var o=0|f(t.length);return a=s(a,o),0===a.length?a:(t.copy(a,0,0,o),a)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||$(t.length)?s(a,0):m(a,t);if("Buffer"===t.type&&re(t.data))return m(a,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function f(r){if(r>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|r}function M(a,o){if(l.isBuffer(a))return a.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(a)||a instanceof ArrayBuffer))return a.byteLength;"string"!=typeof a&&(a=""+a);var i=a.length;if(0===i)return 0;for(var r=!1;;)switch(o){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return X(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return K(a).length;default:if(r)return X(a).length;o=(""+o).toLowerCase(),r=!0;}}function x(a,t,o){var r=!1;if((void 0===t||0>t)&&(t=0),t>this.length)return"";if((void 0===o||o>this.length)&&(o=this.length),0>=o)return"";if(o>>>=0,t>>>=0,o<=t)return"";for(a||(a="utf8");;)switch(a){case"hex":return R(this,t,o);case"utf8":case"utf-8":return _(this,t,o);case"ascii":return O(this,t,o);case"latin1":case"binary":return z(this,t,o);case"base64":return I(this,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,o);default:if(r)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),r=!0;}}function E(a,t,o){var r=a[t];a[t]=a[o],a[o]=r}function v(a,t,o,i,n){if(0===a.length)return-1;if("string"==typeof o?(i=o,o=0):2147483647<o?o=2147483647:-2147483648>o&&(o=-2147483648),o=+o,isNaN(o)&&(o=n?0:a.length-1),0>o&&(o=a.length+o),o>=a.length){if(n)return-1;o=a.length-1}else if(0>o){if(!n)return-1;o=0}if("string"==typeof t&&(t=l.from(t,i)),l.isBuffer(t))return 0===t.length?-1:A(a,t,o,i,n);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(a,t,o):Uint8Array.prototype.lastIndexOf.call(a,t,o):A(a,[t],o,i,n);throw new TypeError("val must be string, number or Buffer")}function A(d,t,p,r,n){function m(r,t){return 1===i?r[t]:r.readUInt16BE(t*i)}var i=1,o=d.length,u=t.length;if(void 0!==r&&("ucs2"===(r=(r+"").toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(2>d.length||2>t.length)return-1;i=2,o/=2,u/=2,p/=2}var s;if(n){var a=-1;for(s=p;s<o;s++)if(!(m(d,s)===m(t,-1===a?0:s-a)))-1!==a&&(s-=s-a),a=-1;else if(-1===a&&(a=s),s-a+1===u)return a*i}else for(p+u>o&&(p=o-u),s=p;0<=s;s--){for(var g=!0,c=0;c<u;c++)if(m(d,s+c)!==m(t,c)){g=!1;break}if(g)return s}return-1}function T(a,t,s,l){s=+s||0;var d=a.length-s;l?(l=+l)>d&&(l=d):l=d;var c=t.length;if(0!=c%2)throw new TypeError("Invalid hex string");l>c/2&&(l=c/2);for(var i=0,o;i<l;++i){if(o=parseInt(t.substr(2*i,2),16),isNaN(o))return i;a[s+i]=o}return i}function b(a,t,o,r){return J(X(t,a.length-o),a,o,r)}function L(a,t,o,r){return J(q(t),a,o,r)}function D(a,t,o,r){return L(a,t,o,r)}function w(a,t,o,r){return J(K(t),a,o,r)}function S(a,t,o,r){return J(Z(t,a.length-o),a,o,r)}function I(a,t,o){return 0===t&&o===a.length?ee.fromByteArray(a):ee.fromByteArray(a.slice(t,o))}function _(l,t,d){d=N(l.length,d);for(var r=[],n=t;n<d;){var p=l[n],i=null,o=239<p?4:223<p?3:191<p?2:1;if(n+o<=d){var u,s,a,m;1===o?128>p&&(i=p):2===o?(u=l[n+1],128==(192&u)&&127<(m=(31&p)<<6|63&u)&&(i=m)):3===o?(u=l[n+1],s=l[n+2],128==(192&u)&&128==(192&s)&&2047<(m=(15&p)<<12|(63&u)<<6|63&s)&&(55296>m||57343<m)&&(i=m)):4===o?(u=l[n+1],s=l[n+2],a=l[n+3],128==(192&u)&&128==(192&s)&&128==(192&a)&&65535<(m=(15&p)<<18|(63&u)<<12|(63&s)<<6|63&a)&&1114112>m&&(i=m)):void 0}null===i?(i=65533,o=1):65535<i&&(i-=65536,r.push(55296|1023&i>>>10),i=56320|1023&i),r.push(i),n+=o}return j(r)}function j(a){var t=a.length;if(t<=ae)return o.apply(String,a);for(var i="",r=0;r<t;)i+=o.apply(String,a.slice(r,r+=ae));return i}function O(a,t,i){var r="";i=N(a.length,i);for(var n=t;n<i;++n)r+=o(127&a[n]);return r}function z(a,t,i){var r="";i=N(a.length,i);for(var n=t;n<i;++n)r+=o(a[n]);return r}function R(a,t,o){var s=a.length;(!t||0>t)&&(t=0),(!o||0>o||o>s)&&(o=s);for(var n="",l=t;l<o;++l)n+=W(a[l]);return n}function U(a,t,s){for(var r=a.slice(t,s),n="",l=0;l<r.length;l+=2)n+=o(r[l]+256*r[l+1]);return n}function P(a,t,o){if(0!=a%1||0>a)throw new RangeError("offset is not uint");if(a+t>o)throw new RangeError("Trying to access beyond buffer length")}function B(a,t,o,r,n,s){if(!l.isBuffer(a))throw new TypeError("\"buffer\" argument must be a Buffer instance");if(t>n||t<s)throw new RangeError("\"value\" argument is out of bounds");if(o+r>a.length)throw new RangeError("Index out of range")}function k(a,t,o,r){0>t&&(t=65535+t+1);for(var n=0,s=N(a.length-o,2);n<s;++n)a[o+n]=(t&255<<8*(r?n:1-n))>>>8*(r?n:1-n)}function F(a,t,o,r){0>t&&(t=4294967295+t+1);for(var n=0,s=N(a.length-o,4);n<s;++n)a[o+n]=255&t>>>8*(r?n:3-n)}function G(a,t,o,r){if(o+r>a.length)throw new RangeError("Index out of range");if(0>o)throw new RangeError("Index out of range")}function V(a,t,o,r,i){return i||G(a,t,o,4,3.4028234663852886e38,-3.4028234663852886e38),te.write(a,t,o,r,23,4),o+4}function H(a,t,o,r,i){return i||G(a,t,o,8,1.7976931348623157e308,-1.7976931348623157e308),te.write(a,t,o,r,52,8),o+8}function Q(r){if(r=Y(r).replace(oe,""),2>r.length)return"";for(;0!=r.length%4;)r+="=";return r}function Y(r){return r.trim?r.trim():r.replace(/^\s+|\s+$/g,"")}function W(r){return 16>r?"0"+r.toString(16):r.toString(16)}function X(a,t){t=t||1/0;for(var s=a.length,n=null,l=[],i=0,o;i<s;++i){if(55295<(o=a.charCodeAt(i))&&57344>o){if(!n){if(56319<o){-1<(t-=3)&&l.push(239,191,189);continue}if(i+1===s){-1<(t-=3)&&l.push(239,191,189);continue}n=o;continue}if(56320>o){-1<(t-=3)&&l.push(239,191,189),n=o;continue}o=65536+(n-55296<<10|o-56320)}else n&&-1<(t-=3)&&l.push(239,191,189);if(n=null,128>o){if(0>(t-=1))break;l.push(o)}else if(2048>o){if(0>(t-=2))break;l.push(192|o>>6,128|63&o)}else if(65536>o){if(0>(t-=3))break;l.push(224|o>>12,128|63&o>>6,128|63&o)}else{if(!(1114112>o))throw new Error("Invalid code point");if(0>(t-=4))break;l.push(240|o>>18,128|63&o>>12,128|63&o>>6,128|63&o)}}return l}function q(a){for(var t=[],o=0;o<a.length;++o)t.push(255&a.charCodeAt(o));return t}function Z(a,t){for(var s=[],i=0,o,r,n;i<a.length&&!(0>(t-=2));++i)o=a.charCodeAt(i),r=o>>8,n=o%256,s.push(n),s.push(r);return s}function K(r){return ee.toByteArray(Q(r))}function J(a,t,o,r){for(var i=0;i<r&&!(i+o>=t.length||i>=a.length);++i)t[i+o]=a[i];return i}function $(r){return r!==r}var ee=t("base64-js"),te=t("ieee754"),re=t("isarray");a.Buffer=l,a.SlowBuffer=function(r){return+r!=r&&(r=0),l.alloc(+r)},a.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0===r.TYPED_ARRAY_SUPPORT?function(){try{var r=new Uint8Array(1);return r.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===r.foo()&&"function"==typeof r.subarray&&0===r.subarray(1,1).byteLength}catch(r){return!1}}():r.TYPED_ARRAY_SUPPORT,a.kMaxLength=i(),l.poolSize=8192,l._augment=function(r){return r.__proto__=l.prototype,r},l.from=function(a,t,o){return n(null,a,t,o)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(a,t,o){return c(null,a,t,o)},l.allocUnsafe=function(r){return p(null,r)},l.allocUnsafeSlow=function(r){return p(null,r)},l.isBuffer=function(r){return null!=r&&r._isBuffer},l.compare=function(a,t){if(!l.isBuffer(a)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(a===t)return 0;for(var o=a.length,r=t.length,n=0,s=N(o,r);n<s;++n)if(a[n]!==t[n]){o=a[n],r=t[n];break}return o<r?-1:r<o?1:0},l.isEncoding=function(r){switch((r+"").toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1;}},l.concat=function(a,t){if(!re(a))throw new TypeError("\"list\" argument must be an Array of Buffers");if(0===a.length)return l.alloc(0);var o;if(void 0===t)for(t=0,o=0;o<a.length;++o)t+=a[o].length;var r=l.allocUnsafe(t),n=0;for(o=0;o<a.length;++o){var s=a[o];if(!l.isBuffer(s))throw new TypeError("\"list\" argument must be an Array of Buffers");s.copy(r,n),n+=s.length}return r},l.byteLength=M,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var r=this.length;if(0!=r%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<r;t+=2)E(this,t,t+1);return this},l.prototype.swap32=function(){var r=this.length;if(0!=r%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<r;t+=4)E(this,t,t+3),E(this,t+1,t+2);return this},l.prototype.swap64=function(){var r=this.length;if(0!=r%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<r;t+=8)E(this,t,t+7),E(this,t+1,t+6),E(this,t+2,t+5),E(this,t+3,t+4);return this},l.prototype.toString=function(){var r=0|this.length;return 0===r?"":0===arguments.length?_(this,0,r):x.apply(this,arguments)},l.prototype.equals=function(r){if(!l.isBuffer(r))throw new TypeError("Argument must be a Buffer");return this===r||0===l.compare(this,r)},l.prototype.inspect=function(){var r="",t=a.INSPECT_MAX_BYTES;return 0<this.length&&(r=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(r+=" ... ")),"<Buffer "+r+">"},l.prototype.compare=function(d,t,c,r,n){if(!l.isBuffer(d))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===c&&(c=d?d.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),0>t||c>d.length||0>r||n>this.length)throw new RangeError("out of range index");if(r>=n&&t>=c)return 0;if(r>=n)return-1;if(t>=c)return 1;if(t>>>=0,c>>>=0,r>>>=0,n>>>=0,this===d)return 0;for(var p=n-r,i=c-t,o=N(p,i),u=this.slice(r,n),s=d.slice(t,c),a=0;a<o;++a)if(u[a]!==s[a]){p=u[a],i=s[a];break}return p<i?-1:i<p?1:0},l.prototype.includes=function(a,t,o){return-1!==this.indexOf(a,t,o)},l.prototype.indexOf=function(a,t,o){return v(this,a,t,o,!0)},l.prototype.lastIndexOf=function(a,t,o){return v(this,a,t,o,!1)},l.prototype.write=function(a,t,o,r){if(void 0===t)r="utf8",o=this.length,t=0;else if(void 0===o&&"string"==typeof t)r=t,o=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(o)?(o|=0,void 0===r&&(r="utf8")):(r=o,o=void 0)}var n=this.length-t;if((void 0===o||o>n)&&(o=n),0<a.length&&(0>o||0>t)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var s=!1;;)switch(r){case"hex":return T(this,a,t,o);case"utf8":case"utf-8":return b(this,a,t,o);case"ascii":return L(this,a,t,o);case"latin1":case"binary":return D(this,a,t,o);case"base64":return w(this,a,t,o);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,a,t,o);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0;}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ae=4096;l.prototype.slice=function(a,o){var s=this.length;a=~~a,o=void 0===o?s:~~o,0>a?0>(a+=s)&&(a=0):a>s&&(a=s),0>o?0>(o+=s)&&(o=0):o>s&&(o=s),o<a&&(o=a);var r;if(l.TYPED_ARRAY_SUPPORT)r=this.subarray(a,o),r.__proto__=l.prototype;else{var n=o-a;r=new l(n,void 0);for(var d=0;d<n;++d)r[d]=this[d+a]}return r},l.prototype.readUIntLE=function(a,t,o){a|=0,t|=0,o||P(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return r},l.prototype.readUIntBE=function(a,t,o){a|=0,t|=0,o||P(a,t,this.length);for(var r=this[a+--t],i=1;0<t&&(i*=256);)r+=this[a+--t]*i;return r},l.prototype.readUInt8=function(r,t){return t||P(r,1,this.length),this[r]},l.prototype.readUInt16LE=function(r,t){return t||P(r,2,this.length),this[r]|this[r+1]<<8},l.prototype.readUInt16BE=function(r,t){return t||P(r,2,this.length),this[r]<<8|this[r+1]},l.prototype.readUInt32LE=function(r,t){return t||P(r,4,this.length),(this[r]|this[r+1]<<8|this[r+2]<<16)+16777216*this[r+3]},l.prototype.readUInt32BE=function(r,t){return t||P(r,4,this.length),16777216*this[r]+(this[r+1]<<16|this[r+2]<<8|this[r+3])},l.prototype.readIntLE=function(a,t,o){a|=0,t|=0,o||P(a,t,this.length);for(var r=this[a],n=1,s=0;++s<t&&(n*=256);)r+=this[a+s]*n;return n*=128,r>=n&&(r-=g(2,8*t)),r},l.prototype.readIntBE=function(a,t,o){a|=0,t|=0,o||P(a,t,this.length);for(var r=t,n=1,s=this[a+--r];0<r&&(n*=256);)s+=this[a+--r]*n;return n*=128,s>=n&&(s-=g(2,8*t)),s},l.prototype.readInt8=function(r,t){return t||P(r,1,this.length),128&this[r]?-1*(255-this[r]+1):this[r]},l.prototype.readInt16LE=function(a,t){t||P(a,2,this.length);var o=this[a]|this[a+1]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt16BE=function(a,t){t||P(a,2,this.length);var o=this[a+1]|this[a]<<8;return 32768&o?4294901760|o:o},l.prototype.readInt32LE=function(r,t){return t||P(r,4,this.length),this[r]|this[r+1]<<8|this[r+2]<<16|this[r+3]<<24},l.prototype.readInt32BE=function(r,t){return t||P(r,4,this.length),this[r]<<24|this[r+1]<<16|this[r+2]<<8|this[r+3]},l.prototype.readFloatLE=function(r,t){return t||P(r,4,this.length),te.read(this,r,!0,23,4)},l.prototype.readFloatBE=function(r,t){return t||P(r,4,this.length),te.read(this,r,!1,23,4)},l.prototype.readDoubleLE=function(r,t){return t||P(r,8,this.length),te.read(this,r,!0,52,8)},l.prototype.readDoubleBE=function(r,t){return t||P(r,8,this.length),te.read(this,r,!1,52,8)},l.prototype.writeUIntLE=function(a,o,s,r){(a=+a,o|=0,s|=0,!r)&&B(this,a,o,s,g(2,8*s)-1,0);var l=1,d=0;for(this[o]=255&a;++d<s&&(l*=256);)this[o+d]=255&a/l;return o+s},l.prototype.writeUIntBE=function(a,o,s,r){(a=+a,o|=0,s|=0,!r)&&B(this,a,o,s,g(2,8*s)-1,0);var l=s-1,d=1;for(this[o+l]=255&a;0<=--l&&(d*=256);)this[o+l]=255&a/d;return o+s},l.prototype.writeUInt8=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,1,255,0),l.TYPED_ARRAY_SUPPORT||(a=C(a)),this[o]=255&a,o+1},l.prototype.writeUInt16LE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):k(this,a,o,!0),o+2},l.prototype.writeUInt16BE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):k(this,a,o,!1),o+2},l.prototype.writeUInt32LE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[o+3]=a>>>24,this[o+2]=a>>>16,this[o+1]=a>>>8,this[o]=255&a):F(this,a,o,!0),o+4},l.prototype.writeUInt32BE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):F(this,a,o,!1),o+4},l.prototype.writeIntLE=function(a,s,l,r){if(a=+a,s|=0,!r){var d=g(2,8*l-1);B(this,a,s,l,d-1,-d)}var c=0,i=1,o=0;for(this[s]=255&a;++c<l&&(i*=256);)0>a&&0===o&&0!==this[s+c-1]&&(o=1),this[s+c]=255&(a/i>>0)-o;return s+l},l.prototype.writeIntBE=function(a,s,l,r){if(a=+a,s|=0,!r){var d=g(2,8*l-1);B(this,a,s,l,d-1,-d)}var c=l-1,i=1,o=0;for(this[s+c]=255&a;0<=--c&&(i*=256);)0>a&&0===o&&0!==this[s+c+1]&&(o=1),this[s+c]=255&(a/i>>0)-o;return s+l},l.prototype.writeInt8=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,1,127,-128),l.TYPED_ARRAY_SUPPORT||(a=C(a)),0>a&&(a=255+a+1),this[o]=255&a,o+1},l.prototype.writeInt16LE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8):k(this,a,o,!0),o+2},l.prototype.writeInt16BE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>8,this[o+1]=255&a):k(this,a,o,!1),o+2},l.prototype.writeInt32LE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[o]=255&a,this[o+1]=a>>>8,this[o+2]=a>>>16,this[o+3]=a>>>24):F(this,a,o,!0),o+4},l.prototype.writeInt32BE=function(a,o,i){return a=+a,o|=0,i||B(this,a,o,4,2147483647,-2147483648),0>a&&(a=4294967295+a+1),l.TYPED_ARRAY_SUPPORT?(this[o]=a>>>24,this[o+1]=a>>>16,this[o+2]=a>>>8,this[o+3]=255&a):F(this,a,o,!1),o+4},l.prototype.writeFloatLE=function(a,t,o){return V(this,a,t,!0,o)},l.prototype.writeFloatBE=function(a,t,o){return V(this,a,t,!1,o)},l.prototype.writeDoubleLE=function(a,t,o){return H(this,a,t,!0,o)},l.prototype.writeDoubleBE=function(a,t,o){return H(this,a,t,!1,o)},l.prototype.copy=function(a,t,o,r){if(o||(o=0),r||0===r||(r=this.length),t>=a.length&&(t=a.length),t||(t=0),0<r&&r<o&&(r=o),r===o)return 0;if(0===a.length||0===this.length)return 0;if(0>t)throw new RangeError("targetStart out of bounds");if(0>o||o>=this.length)throw new RangeError("sourceStart out of bounds");if(0>r)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),a.length-t<r-o&&(r=a.length-t+o);var n=r-o,i;if(this===a&&o<t&&t<r)for(i=n-1;0<=i;--i)a[i+t]=this[i+o];else if(1e3>n||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<n;++i)a[i+t]=this[i+o];else Uint8Array.prototype.set.call(a,this.subarray(o,o+n),t);return n},l.prototype.fill=function(a,s,d,c){if("string"==typeof a){if("string"==typeof s?(c=s,s=0,d=this.length):"string"==typeof d&&(c=d,d=this.length),1===a.length){var p=a.charCodeAt(0);256>p&&(a=p)}if(void 0!==c&&"string"!=typeof c)throw new TypeError("encoding must be a string");if("string"==typeof c&&!l.isEncoding(c))throw new TypeError("Unknown encoding: "+c)}else"number"==typeof a&&(a&=255);if(0>s||this.length<s||this.length<d)throw new RangeError("Out of range index");if(d<=s)return this;s>>>=0,d=void 0===d?this.length:d>>>0,a||(a=0);var m;if("number"==typeof a)for(m=s;m<d;++m)this[m]=a;else{var i=l.isBuffer(a)?a:X(new l(a,c).toString()),o=i.length;for(m=0;m<d-s;++m)this[m+s]=i[m%o]}return this};var oe=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"base64-js":4,ieee754:18,isarray:9}],9:[function(t,r){var a={}.toString;r.exports=Array.isArray||function(t){return"[object Array]"==a.call(t)}},{}],10:[function(t,r,a){function o(){var t;try{t=a.storage.debug}catch(t){}return t}a=r.exports=t("./debug"),a.log=function(){return"object"==("undefined"===typeof console?"undefined":babelHelpers.typeof(console))&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},a.formatArgs=function(){var a=arguments,o=this.useColors;if(a[0]=(o?"%c":"")+this.namespace+(o?" %c":" ")+a[0]+(o?"%c ":" "),!o)return a;var i="color: "+this.color;a=[a[0],i,"color: inherit"].concat(Array.prototype.slice.call(a,1));var r=0,t=0;return a[0].replace(/%[a-z%]/g,function(a){"%%"!==a&&(r++,"%c"===a&&(t=r))}),a.splice(t,0,i),a},a.save=function(t){try{null==t?a.storage.removeItem("debug"):a.storage.debug=t}catch(t){}},a.load=o,a.useColors=function(){return"WebkitAppearance"in document.documentElement.style||window.console&&(console.firebug||console.exception&&console.table)||navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&31<=parseInt(RegExp.$1,10)},a.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),a.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],a.formatters.j=function(t){return JSON.stringify(t)},a.enable(o())},{"./debug":11}],11:[function(t,r,a){function i(){return a.colors[o++%a.colors.length]}a=r.exports=function(t){function n(){}function l(){var t=l;null==t.useColors&&(t.useColors=a.useColors()),null==t.color&&t.useColors&&(t.color=i());var d=Array.prototype.slice.call(arguments);d[0]=a.coerce(d[0]),"string"!=typeof d[0]&&(d=["%o"].concat(d));var r=0;d[0]=d[0].replace(/%([a-z%])/g,function(i,o){if("%%"===i)return i;r++;var s=a.formatters[o];if("function"==typeof s){var c=d[r];i=s.call(t,c),d.splice(r,1),r--}return i}),"function"==typeof a.formatArgs&&(d=a.formatArgs.apply(t,d)),(l.log||a.log||console.log.bind(console)).apply(t,d)}n.enabled=!1,l.enabled=!0;var r=a.enabled(t)?l:n;return r.namespace=t,r},a.coerce=function(t){return t instanceof Error?t.stack||t.message:t},a.disable=function(){a.enable("")},a.enable=function(t){a.save(t);for(var i=(t||"").split(/[\s,]+/),r=i.length,o=0;o<r;o++)i[o]&&(t=i[o].replace(/\*/g,".*?"),"-"===t[0]?a.skips.push(new RegExp("^"+t.substr(1)+"$")):a.names.push(new RegExp("^"+t+"$")))},a.enabled=function(t){var i,r;for(i=0,r=a.skips.length;i<r;i++)if(a.skips[i].test(t))return!1;for(i=0,r=a.names.length;i<r;i++)if(a.names[i].test(t))return!0;return!1},a.names=[],a.skips=[],a.formatters={};var o=0},{}],12:[function(t,r){"use strict";function a(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function i(a,r,i){var n=r[i];if(void 0!==n&&null!==n){if(l.call(a,i)&&(void 0===a[i]||null===a[i]))throw new TypeError("Cannot convert undefined or null to object ("+i+")");a[i]=l.call(a,i)&&s(n)?o(Object(a[i]),r[i]):n}}function o(a,r){if(a===r)return a;for(var s in r=Object(r),r)l.call(r,s)&&i(a,r,s);if(Object.getOwnPropertySymbols)for(var d=Object.getOwnPropertySymbols(r),t=0;t<d.length;t++)n.call(r,d[t])&&i(a,r,d[t]);return a}var s=t("is-obj"),l=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;r.exports=function(t){t=a(t);for(var r=1;r<arguments.length;r++)o(t,arguments[r]);return t}},{"is-obj":22}],13:[function(){!function(ge,ye,r,t){"use strict";function Me(a,o){for(var t=0,r=a.length;t<r;t++)p(a[t],o)}function a(a){for(var i=0,r=a.length,n;i<r;i++)n=a[i],N(n,U[o(n)])}function i(r){return function(a){te(a)&&(p(a,r),Me(a.querySelectorAll(V),r))}}function o(a){var o=ie.call(a,"is"),t=a.nodeName.toUpperCase(),r=H.call(S,o?_+o.toUpperCase():R+t);return o&&-1<r&&!u(t,o)?-1:r}function u(r,a){return-1<V.indexOf(r+"[is=\""+a+"\"]")}function c(o){var i=o.currentTarget,t=o.attrChange,r=o.attrName,n=o.target;fe&&(!n||n===i)&&i.attributeChangedCallback&&"style"!==r&&o.prevValue!==o.newValue&&i.attributeChangedCallback(r,t===o[M]?null:o.prevValue,t===o[w]?null:o.newValue)}function l(r){var a=i(r);return function(t){me.push(a,t.target)}}function d(t){pe&&(pe=!1,t.currentTarget.removeEventListener(D,d)),Me((t.target||ye).querySelectorAll(V),t.detail===L?L:b),ee&&h()}function n(a,o){var t=this;oe.call(t,a,o),g.call(t,{target:t})}function s(r,a){Q(r,a),E?E.observe(r,se):(he&&(r.setAttribute=n,r[m]=A(r),r.addEventListener(P,g)),r.addEventListener(I,c)),r.createdCallback&&fe&&(r.created=!0,r.createdCallback(),r.created=!1)}function h(){for(var a=0,t=re.length,r;a<t;a++)r=re[a],x.contains(r)||(t--,re.splice(a--,1),p(r,L))}function f(t){throw new Error("A "+t+" type is already registered")}function p(a,i){var t=o(a),n;-1<t&&(O(a,U[t]),t=0,i!==b||a[b]?i===L&&!a[L]&&(a[b]=!1,a[L]=!0,t=1):(a[L]=!1,a[b]=!0,t=1,ee&&0>H.call(re,a)&&re.push(a)),t&&(n=a[i+"Callback"])&&n.call(a))}if(!(t in ye)){var m="__"+t+(1e5*Math.random()>>0),b="attached",L="detached",T="extends",M="ADDITION",v="MODIFICATION",w="REMOVAL",I="DOMAttrModified",D="DOMContentLoaded",P="DOMSubtreeModified",R="<",_="=",k=/^[A-Z][A-Z0-9]*(?:-[A-Z0-9]+)+$/,F=["ANNOTATION-XML","COLOR-PROFILE","FONT-FACE","FONT-FACE-SRC","FONT-FACE-URI","FONT-FACE-FORMAT","FONT-FACE-NAME","MISSING-GLYPH"],S=[],U=[],V="",x=ye.documentElement,H=S.indexOf||function(r){for(var a=this.length;a--&&this[a]!==r;);return a},G=r.prototype,j=G.hasOwnProperty,z=G.isPrototypeOf,q=r.defineProperty,W=r.getOwnPropertyDescriptor,X=r.getOwnPropertyNames,Y=r.getPrototypeOf,Z=r.setPrototypeOf,B=!!r.__proto__,K=r.create||function r(a){return a?(r.prototype=a,new r):this},Q=Z||(B?function(r,a){return r.__proto__=a,r}:X&&W?function(){function a(o,i){for(var t=X(i),n=0,a=t.length,s;n<a;n++)s=t[n],j.call(o,s)||q(o,s,W(i,s))}return function(o,t){do a(o,t);while((t=Y(t))&&!z.call(t,o));return o}}():function(a,o){for(var t in o)a[t]=o[t];return a}),J=ge.MutationObserver||ge.WebKitMutationObserver,$=(ge.HTMLElement||ge.Element||ge.Node).prototype,ee=!z.call($,x),te=ee?function(t){return 1===t.nodeType}:function(t){return z.call($,t)},re=ee&&[],ae=$.cloneNode,ie=$.getAttribute,oe=$.setAttribute,ne=$.removeAttribute,le=ye.createElement,se=J&&{attributes:!0,characterData:!0,attributeOldValue:!0},de=J||function(){he=!1,x.removeEventListener(I,de)},ce=ge.requestAnimationFrame||ge.webkitRequestAnimationFrame||ge.mozRequestAnimationFrame||ge.msRequestAnimationFrame||function(t){setTimeout(t,10)},ue=!1,he=!0,pe=!0,fe=!0,me,g,C,A,E,O,N;Z||B?(O=function(r,a){z.call(a,r)||s(r,a)},N=s):(O=function(a,o){a[m]||(a[m]=r(!0),s(a,o))},N=O),ee?(he=!1,function(){var o=W($,"addEventListener"),s=o.value,r=function(r){var a=new CustomEvent(I,{bubbles:!0});a.attrName=r,a.prevValue=ie.call(this,r),a.newValue=null,a[w]=a.attrChange=2,ne.call(this,r),this.dispatchEvent(a)},n=function(o,t){var r=this.hasAttribute(o),i=r&&ie.call(this,o);e=new CustomEvent(I,{bubbles:!0}),oe.call(this,o,t),e.attrName=o,e.prevValue=r?i:null,e.newValue=t,r?e[v]=e.attrChange=1:e[M]=e.attrChange=0,this.dispatchEvent(e)},a=function(o){var i=o.currentTarget,r=i[m],n=o.propertyName,a;r.hasOwnProperty(n)&&(r=r[n],a=new CustomEvent(I,{bubbles:!0}),a.attrName=r.name,a.prevValue=r.value||null,a.newValue=r.value=i[n]||null,null==a.prevValue?a[M]=a.attrChange=0:a[v]=a.attrChange=1,i.dispatchEvent(a))};o.value=function(o,l,t){o===I&&this.attributeChangedCallback&&this.setAttribute!==n&&(this[m]={className:{name:"class",value:this.className}},this.setAttribute=n,this.removeAttribute=r,s.call(this,"propertychange",a)),s.call(this,o,l,t)},q($,"addEventListener",o)}()):J||(x.addEventListener(I,de),x.setAttribute(m,1),x.removeAttribute(m),he&&(g=function(o){var i=this,a,t,r;if(i===o.target){for(r in a=i[m],i[m]=t=A(i),t){if(!(r in a))return C(0,i,r,a[r],t[r],M);if(t[r]!==a[r])return C(1,i,r,a[r],t[r],v)}for(r in a)if(!(r in t))return C(2,i,r,a[r],t[r],w)}},C=function(o,s,d,p,u,m){var l={attrChange:o,currentTarget:s,attrName:d,prevValue:p,newValue:u};l[m]=o,c(l)},A=function(o){for(var s={},n=o.attributes,a=0,l=n.length,i,t;a<l;a++)i=n[a],"setAttribute"!==(t=i.name)&&(s[t]=i.value);return s})),ye[t]=function(r,c){if(p=r.toUpperCase(),ue||(ue=!0,J?(E=function(s,d){function t(a,o){for(var t=0,i=a.length;t<i;o(a[t++]));}return new J(function(r){for(var n=0,o=r.length,c,a,l;n<o;n++)c=r[n],"childList"===c.type?(t(c.addedNodes,s),t(c.removedNodes,d)):(a=c.target,fe&&a.attributeChangedCallback&&"style"!==c.attributeName&&(l=ie.call(a,c.attributeName))!==c.oldValue&&a.attributeChangedCallback(c.attributeName,c.oldValue,l))})}(i(b),i(L)),E.observe(ye,{childList:!0,subtree:!0})):(me=[],ce(function t(){for(;me.length;)me.shift().call(null,me.shift());ce(t)}),ye.addEventListener("DOMNodeInserted",l(b)),ye.addEventListener("DOMNodeRemoved",l(L))),ye.addEventListener(D,d),ye.addEventListener("readystatechange",d),ye.createElement=function(r,o){var t=le.apply(ye,arguments),n=""+r,a=H.call(S,(o?_:R)+(o||n).toUpperCase()),s=-1<a;return o&&(t.setAttribute("is",o=o.toLowerCase()),s&&(s=u(n.toUpperCase(),o))),fe=!ye.createElement.innerHTMLHelper,s&&N(t,U[a]),t},$.cloneNode=function(i){var n=ae.call(this,!!i),t=o(n);return-1<t&&N(n,U[t]),i&&a(n.querySelectorAll(V)),n}),-2<H.call(S,_+p)+H.call(S,R+p)&&f(r),!k.test(p)||-1<H.call(F,p))throw new Error("The type "+r+" is invalid");var t=function(){return m?ye.createElement(g,p):ye.createElement(g)},s=c||G,m=j.call(s,T),g=m?c[T].toUpperCase():p,p,n;return m&&-1<H.call(S,R+g)&&f(g),n=S.push((m?_:R)+p)-1,V=V.concat(V.length?",":"",m?g+"[is=\""+r.toLowerCase()+"\"]":g),t.prototype=U[n]=j.call(s,"prototype")?s.prototype:K($),Me(ye.querySelectorAll(V),b),t}}}(window,document,Object,"registerElement")},{}],14:[function(t,r){r.exports=function(t){return"int8"===t?Int8Array:"int16"===t?Int16Array:"int32"===t?Int32Array:"uint8"===t?Uint8Array:"uint16"===t?Uint16Array:"uint32"===t?Uint32Array:"float32"===t?Float32Array:"float64"===t?Float64Array:"array"===t?Array:"uint8_clamped"===t?Uint8ClampedArray:void 0}},{}],15:[function(t,r){var d=t("dtype");r.exports=function(c,p,u){if(!c)throw new TypeError("must specify data as first parameter");if(u=0|+(u||0),Array.isArray(c)&&Array.isArray(c[0])){var r=c[0].length,a=c.length*r;p&&"string"!=typeof p||(p=new(d(p||"float32"))(a+u));var n=p.length-u;if(a!==n)throw new Error("source length "+a+" ("+r+"x"+c.length+") does not match destination length "+n);for(var o=0,s=u;o<c.length;o++)for(var m=0;m<r;m++)p[s++]=c[o][m]}else if(p&&"string"!=typeof p)p.set(c,u);else{var l=d(p||"float32");0===u?p=new l(c):(p=new l(c.length+u),p.set(c,u))}return p}},{dtype:14}],16:[function(t,r){function a(i,r,t){for(var o=0,n=i.length;o<n;o++)d.call(i,o)&&r.call(t,i[o],o,i)}function i(i,r,t){for(var o=0,n=i.length;o<n;o++)r.call(t,i.charAt(o),o,i)}function n(a,r,t){for(var o in a)d.call(a,o)&&r.call(t,a[o],o,a)}var s=t("is-function");r.exports=function(d,c,t){if(!s(c))throw new TypeError("iterator must be a function");3>arguments.length&&(t=this),"[object Array]"===l.call(d)?a(d,c,t):"string"==typeof d?i(d,c,t):n(d,c,t)};var l=Object.prototype.toString,d=Object.prototype.hasOwnProperty},{"is-function":21}],17:[function(t,r){(function(t){var a;a="undefined"==typeof window?"undefined"==typeof t?"undefined"==typeof self?{}:self:t:window,r.exports=a}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],18:[function(t,a,o){o.read=function(l,a,o,t,r){var d=8*r-t-1,c=(1<<d)-1,u=c>>1,m=-7,h=o?r-1:0,y=o?-1:1,n=l[a+h],s,f;for(h+=y,s=n&(1<<-m)-1,n>>=-m,m+=d;0<m;s=256*s+l[a+h],h+=y,m-=8);for(f=s&(1<<-m)-1,s>>=-m,m+=t;0<m;f=256*f+l[a+h],h+=y,m-=8);if(0===s)s=1-u;else{if(s===c)return f?NaN:1/0*(n?-1:1);f+=g(2,t),s-=u}return(n?-1:1)*f*g(2,s-t)},o.write=function(d,a,o,t,c,h){var y=8*h-c-1,M=(1<<y)-1,i=M>>1,x=23===c?5.960464477539063e-8-6.617444900424222e-24:0,n=t?0:h-1,s=t?1:-1,u=0>a||0===a&&0>1/a?1:0,l,E,v;for(a=D(a),isNaN(a)||a===1/0?(E=isNaN(a)?1:0,l=M):(l=C(m(a)/r),1>a*(v=g(2,-l))&&(l--,v*=2),a+=1<=l+i?x/v:x*g(2,1-i),2<=a*v&&(l++,v/=2),l+i>=M?(E=0,l=M):1<=l+i?(E=(a*v-1)*g(2,c),l+=i):(E=a*g(2,i-1)*g(2,c),l=0));8<=c;d[o+n]=255&E,n+=s,E/=256,c-=8);for(l=l<<c|E,y+=c;0<y;d[o+n]=255&l,n+=s,l/=256,y-=8);d[o+n-s]|=128*u}},{}],19:[function(t,r){r.exports="function"==typeof Object.create?function(r,a){r.super_=a,r.prototype=Object.create(a.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}})}:function(r,t){r.super_=t;var a=function(){};a.prototype=t.prototype,r.prototype=new a,r.prototype.constructor=r}},{}],20:[function(t,r){function a(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function o(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&a(t.slice(0,0))}r.exports=function(t){return null!=t&&(a(t)||o(t)||!!t._isBuffer)}},{}],21:[function(t,r){r.exports=function(r){var i=a.call(r);return"[object Function]"===i||"function"==typeof r&&"[object RegExp]"!==i||"undefined"!=typeof window&&(r===window.setTimeout||r===window.alert||r===window.confirm||r===window.prompt)};var a=Object.prototype.toString},{}],22:[function(t,r){"use strict";r.exports=function(r){var a="undefined"===typeof r?"undefined":babelHelpers.typeof(r);return null!==r&&("object"===a||"function"===a)}},{}],23:[function(t,r){function a(r){this.glyphs=[],this._measure=this.computeMetrics.bind(this),this.update(r)}function o(r){return new Function(["return function "+r+"() {","  return this._"+r,"}"].join("\n"))()}function i(a,t){if(!a.chars||0===a.chars.length)return null;var o=s(a.chars,t);return 0<=o?a.chars[o]:null}function m(a){for(var t=0;t<d.length;t++){var o=d[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r].height}return 0}function n(a){for(var t=0;t<c.length;t++){var o=c[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r]}return 0}function y(a){for(var t=0;t<p.length;t++){var o=p[t].charCodeAt(0),r=s(a.chars,o);if(0<=r)return a.chars[r].height}return 0}function l(o,t,s){if(!o.kernings||0===o.kernings.length)return 0;for(var r=o.kernings,n=0,i;n<r.length;n++)if(i=r[n],i.first===t&&i.second===s)return i.amount;return 0}function M(r){return"center"===r?A:"right"===r?b:h}function s(a,t,o){o=o||0;for(var r=o;r<a.length;r++)if(a[r].id===t)return r;return-1}var x=t("word-wrapper"),E=t("xtend"),v=t("as-number"),d=["x","e","a","o","n","s","r","c","u","m","v","w","z"],c=["m","w"],p=["H","I","N","E","F","K","L","T","U","V","W","X","Y","Z"],u=9,g=32,h=0,A=1,b=2;r.exports=function(r){return new a(r)},a.prototype.update=function(T){if(T=E({measure:this._measure},T),this._opt=T,this._opt.tabSize=v(this._opt.tabSize,4),!T.font)throw new Error("must provide a valid bitmap font");var t=this.glyphs,D=T.text||"",r=T.font;this._setupSpaceGlyphs(r);var n=x.lines(D,T),i=T.width||0;t.length=0;var N=n.reduce(function(r,t){return L(r,t.width,i)},0),h=0,o=0,s=v(T.lineHeight,r.common.lineHeight),a=r.common.base,c=s-a,u=T.letterSpacing||0,p=s*n.length-c,w=M(this._opt.align);o-=p,this._width=N,this._height=p,this._descender=s-a,this._baseline=a,this._xHeight=m(r),this._capHeight=y(r),this._lineHeight=s,this._ascender=s-c-this._xHeight;var d=this;n.forEach(function(n,c){for(var p=n.start,m=n.end,g=n.width,f=p,M;f<m;f++){var a=D.charCodeAt(f),y=d.getGlyph(r,a);if(y){M&&(h+=l(r,M.id,y.id));var x=h;w===A?x+=(N-g)/2:w===b&&(x+=N-g),t.push({position:[x,o],data:y,index:f,line:c}),h+=y.xadvance+u,M=y}}o+=s,h=0}),this._linesTotal=n.length},a.prototype._setupSpaceGlyphs=function(a){if(this._fallbackSpaceGlyph=null,this._fallbackTabGlyph=null,a.chars&&0!==a.chars.length){var t=i(a,g)||n(a)||a.chars[0],o=this._opt.tabSize*t.xadvance;this._fallbackSpaceGlyph=t,this._fallbackTabGlyph=E(t,{x:0,y:0,xadvance:o,id:u,xoffset:0,yoffset:0,width:0,height:0})}},a.prototype.getGlyph=function(a,t){var o=i(a,t);return o||(t===u?this._fallbackTabGlyph:t===g?this._fallbackSpaceGlyph:null)},a.prototype.computeMetrics=function(m,t,g,r){var n=this._opt.letterSpacing||0,h=this._opt.font,o=0,s=0,y=0,u,i;if(!h.chars||0===h.chars.length)return{start:t,end:t,width:0};g=N(m.length,g);for(var a=t;a<g;a++){var M=m.charCodeAt(a),u=this.getGlyph(h,M);if(u){u.xoffset,o+=i?l(h,i.id,u.id):0;var p=o+u.xadvance+n,f=o+u.width;if(f>=r||p>=r)break;o=p,s=f,i=u}y++}return i&&(s+=i.xoffset),{start:t,end:t+y,width:s}},["width","height","descender","ascender","xHeight","baseline","capHeight","lineHeight"].forEach(function(r){Object.defineProperty(a.prototype,r,{get:o(r),configurable:!0})})},{"as-number":3,"word-wrapper":72,xtend:75}],24:[function(t,r){(function(l){function d(t){return"[object ArrayBuffer]"===Object.prototype.toString.call(t)}function a(t){if(s)return n(t,{responseType:"arraybuffer"});if(void 0===self.XMLHttpRequest)throw new Error("your browser does not support XHR loading");var r=new self.XMLHttpRequest;return r.overrideMimeType("text/plain; charset=x-user-defined"),n({xhr:r},t)}var o=t("xhr"),i=function(){},c=t("parse-bmfont-ascii"),p=t("parse-bmfont-xml"),m=t("parse-bmfont-binary"),g=t("./lib/is-binary"),n=t("xtend"),s=function(){return self.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}();r.exports=function(h,y){y="function"==typeof y?y:i,"string"==typeof h?h={uri:h}:h||(h={}),h.binary&&(h=a(h)),o(h,function(r,t,n){if(r)return y(r);if(!/^2/.test(t.statusCode))return y(new Error("http status code: "+t.statusCode));if(!n)return y(new Error("no body result"));var f=!1;if(d(n)){var o=new Uint8Array(n);n=new l(o,"binary")}g(n)&&(f=!0,"string"==typeof n&&(n=new l(n,"binary"))),f||(l.isBuffer(n)&&(n=n.toString(h.encoding)),n=n.trim());var a;try{var s=t.headers["content-type"];a=f?m(n):/json/.test(s)||"{"===n.charAt(0)?JSON.parse(n):/xml/.test(s)||"<"===n.charAt(0)?p(n):c(n)}catch(t){y(new Error("error parsing font "+t.message)),y=i}y(null,a)})}}).call(this,t("buffer").Buffer)},{"./lib/is-binary":25,buffer:8,"parse-bmfont-ascii":27,"parse-bmfont-binary":28,"parse-bmfont-xml":29,xhr:73,xtend:75}],25:[function(t,r){(function(a){var o=t("buffer-equal"),i=new a([66,77,70,3]);r.exports=function(t){return"string"==typeof t?"BMF"===t.substring(0,3):4<t.length&&o(t.slice(0,4),i)}}).call(this,t("buffer").Buffer)},{buffer:8,"buffer-equal":7}],26:[function(t,r){"use strict";function i(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}var l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;r.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var i={},r=0;10>r;r++)i["_"+o(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(i).map(function(t){return i[t]}).join(""))return!1;var t={};return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"].forEach(function(r){t[r]=r}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},t)).join("")}catch(t){return!1}}()?Object.assign:function(r){for(var d=i(r),o=1,p,t;o<arguments.length;o++){for(var u in p=Object(arguments[o]),p)n.call(p,u)&&(d[u]=p[u]);if(l){t=l(p);for(var s=0;s<t.length;s++)a.call(p,t[s])&&(d[t[s]]=p[t[s]])}}return d}},{}],27:[function(t,r){function o(l,d){if(!(l=l.replace(/\t+/g," ").trim()))return null;var r=l.indexOf(" ");if(-1===r)throw new Error("no named row at line "+d);var t=l.substring(0,r);l=l.substring(r+1),l=l.replace(/letter=[\'\"]\S+[\'\"]/gi,""),l=l.split("="),l=l.map(function(t){return t.trim().match(/(".*?"|[^"\s]+)+(?=\s*|\s*$)/g)});for(var c=[],n=0,i;n<l.length;n++)i=l[n],0===n?c.push({key:i[0],data:""}):n===l.length-1?c[c.length-1].data=a(i[0]):(c[c.length-1].data=a(i[0]),c.push({key:i[1],data:""}));var s={key:t,data:{}};return c.forEach(function(t){s.data[t.key]=t.data}),s}function a(t){return t&&0!==t.length?0===t.indexOf("\"")||0===t.indexOf("'")?t.substring(1,t.length-1):-1===t.indexOf(",")?parseInt(t,10):i(t):""}function i(t){return t.split(",").map(function(t){return parseInt(t,10)})}r.exports=function(i){if(!i)throw new Error("no data provided");i=i.toString().trim();var s={pages:[],chars:[],kernings:[]},r=i.split(/\r\n?|\n/g);if(0===r.length)throw new Error("no data in BMFont file");for(var t=0,a;t<r.length;t++)if(a=o(r[t],t),a)if("page"===a.key){if("number"!=typeof a.data.id)throw new Error("malformed file at line "+t+" -- needs page id=N");if("string"!=typeof a.data.file)throw new Error("malformed file at line "+t+" -- needs page file=\"path\"");s.pages[a.data.id]=a.data.file}else"chars"===a.key||"kernings"===a.key||("char"===a.key?s.chars.push(a.data):"kerning"===a.key?s.kernings.push(a.data):s[a.key]=a.data);return s}},{}],28:[function(t,r){function o(o,r,p){if(p>r.length-1)return 0;var n=r.readUInt8(p++),a=r.readInt32LE(p);switch(p+=4,n){case 1:o.info=i(r,p);break;case 2:o.common=s(r,p);break;case 3:o.pages=l(r,p,a);break;case 4:o.chars=d(r,p,a);break;case 5:o.kernings=c(r,p,a);}return 5+a}function i(t,r){var o={size:t.readInt16LE(r)},i=t.readUInt8(r+2);return o.smooth=1&i>>7,o.unicode=1&i>>6,o.italic=1&i>>5,o.bold=1&i>>4,1&i>>3&&(o.fixedHeight=1),o.charset=t.readUInt8(r+3)||"",o.stretchH=t.readUInt16LE(r+4),o.aa=t.readUInt8(r+6),o.padding=[t.readInt8(r+7),t.readInt8(r+8),t.readInt8(r+9),t.readInt8(r+10)],o.spacing=[t.readInt8(r+11),t.readInt8(r+12)],o.outline=t.readUInt8(r+13),o.face=u(t,r+14),o}function s(t,r){var a={};return a.lineHeight=t.readUInt16LE(r),a.base=t.readUInt16LE(r+2),a.scaleW=t.readUInt16LE(r+4),a.scaleH=t.readUInt16LE(r+6),a.pages=t.readUInt16LE(r+8),t.readUInt8(r+10),(a.packed=0,a.alphaChnl=t.readUInt8(r+11),a.redChnl=t.readUInt8(r+12),a.greenChnl=t.readUInt8(r+13),a.blueChnl=t.readUInt8(r+14),a)}function l(o,r,s){for(var n=[],a=p(o,r),t=a.length+1,l=0;l<s/t;l++)n[l]=o.slice(r,r+a.length).toString("utf8"),r+=t;return n}function d(t,r,s){for(var n=[],a=0;a<s/20;a++){var l={},o=20*a;l.id=t.readUInt32LE(r+0+o),l.x=t.readUInt16LE(r+4+o),l.y=t.readUInt16LE(r+6+o),l.width=t.readUInt16LE(r+8+o),l.height=t.readUInt16LE(r+10+o),l.xoffset=t.readInt16LE(r+12+o),l.yoffset=t.readInt16LE(r+14+o),l.xadvance=t.readInt16LE(r+16+o),l.page=t.readUInt8(r+18+o),l.chnl=t.readUInt8(r+19+o),n[a]=l}return n}function c(t,r,s){for(var n=[],a=0;a<s/10;a++){var l={},o=10*a;l.first=t.readUInt32LE(r+0+o),l.second=t.readUInt32LE(r+4+o),l.amount=t.readInt16LE(r+8+o),n[a]=l}return n}function p(t,r){for(var a=r;a<t.length&&0!==t[a];a++);return t.slice(r,a)}function u(t,r){return p(t,r).toString("utf8")}var m=[66,77,70];r.exports=function(t){if(6>t.length)throw new Error("invalid buffer length for BMFont");if(!m.every(function(r,a){return t.readUInt8(a)===r}))throw new Error("BMFont missing BMF byte header");var r=3;if(3<t.readUInt8(r++))throw new Error("Only supports BMFont Binary v3 (BMFont App v1.10)");for(var i={kernings:[],chars:[]},n=0;5>n;n++)r+=o(i,t,r);return i}},{}],29:[function(t,r){function o(t){return a(t).reduce(function(r,a){return r[i(a.nodeName)]=a.nodeValue,r},{})}function a(a){for(var o=[],t=0;t<a.attributes.length;t++)o.push(a.attributes[t]);return o}function i(t){return n[t.toLowerCase()]||t}var l=t("./parse-attribs"),d=t("xml-parse-from-string"),n={scaleh:"scaleH",scalew:"scaleW",stretchh:"stretchH",lineheight:"lineHeight",alphachnl:"alphaChnl",redchnl:"redChnl",greenchnl:"greenChnl",bluechnl:"blueChnl"};r.exports=function(c){c=c.toString();var p=d(c),t={pages:[],chars:[],kernings:[]};["info","common"].forEach(function(r){var i=p.getElementsByTagName(r)[0];i&&(t[r]=l(o(i)))});var r=p.getElementsByTagName("pages")[0];if(!r)throw new Error("malformed file -- no <pages> element");for(var u=r.getElementsByTagName("page"),n=0;n<u.length;n++){var i=u[n],s=parseInt(i.getAttribute("id"),10),m=i.getAttribute("file");if(isNaN(s))throw new Error("malformed file -- page \"id\" attribute is NaN");if(!m)throw new Error("malformed file -- needs page \"file\" attribute");t.pages[parseInt(s,10)]=m}return["chars","kernings"].forEach(function(r){var d=p.getElementsByTagName(r)[0];if(d)for(var a=r.substring(0,r.length-1),n=d.getElementsByTagName(a),i=0,s;i<n.length;i++)s=n[i],t[r].push(l(o(s)))}),t}},{"./parse-attribs":30,"xml-parse-from-string":74}],30:[function(t,r){function a(r){return r.split(",").map(function(r){return parseInt(r,10)})}var o="chasrset";r.exports=function(r){for(var t in o in r&&(r.charset=r[o],delete r[o]),r)"face"!==t&&"charset"!==t&&(r[t]="padding"===t||"spacing"===t?a(r[t]):parseInt(r[t],10));return r}},{}],31:[function(t,r){var a=t("trim"),o=t("for-each"),n=function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.exports=function(i){if(!i)return{};var s={};return o(a(i).split("\n"),function(t){var r=t.indexOf(":"),i=a(t.slice(0,r)).toLowerCase(),l=a(t.slice(r+1));void 0===s[i]?s[i]=l:n(s[i])?s[i].push(l):s[i]=[s[i],l]}),s}},{"for-each":16,trim:46}],32:[function(t,r,a){(function(o){function i(a,r){for(var t=0,o=a.length-1,i;0<=o;o--)i=a[o],"."===i?a.splice(o,1):".."===i?(a.splice(o,1),t++):t&&(a.splice(o,1),t--);if(r)for(;t--;t)a.unshift("..");return a}function s(a,r){if(a.filter)return a.filter(r);for(var t=[],o=0;o<a.length;o++)r(a[o],o,a)&&t.push(a[o]);return t}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,l=function(a){return t.exec(a).slice(1)};a.resolve=function(){for(var a="",r=!1,l=arguments.length-1,d;-1<=l&&!r;l--){if(d=0<=l?arguments[l]:o.cwd(),"string"!=typeof d)throw new TypeError("Arguments to path.resolve must be strings");d&&(a=d+"/"+a,r="/"===d.charAt(0))}return a=i(s(a.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+a||"."},a.normalize=function(o){var r=a.isAbsolute(o),l="/"===n(o,-1);return o=i(s(o.split("/"),function(t){return!!t}),!r).join("/"),o||r||(o="."),o&&l&&(o+="/"),(r?"/":"")+o},a.isAbsolute=function(t){return"/"===t.charAt(0)},a.join=function(){var t=Array.prototype.slice.call(arguments,0);return a.normalize(s(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},a.relative=function(d,r){function t(a){for(var r=0;r<a.length&&""===a[r];r++);for(var t=a.length-1;0<=t&&""===a[t];t--);return r>t?[]:a.slice(r,t-r+1)}d=a.resolve(d).substr(1),r=a.resolve(r).substr(1);for(var c=t(d.split("/")),n=t(r.split("/")),s=N(c.length,n.length),i=s,o=0;o<s;o++)if(c[o]!==n[o]){i=o;break}for(var p=[],o=i;o<c.length;o++)p.push("..");return p=p.concat(n.slice(i)),p.join("/")},a.sep="/",a.delimiter=":",a.dirname=function(a){var r=l(a),t=r[0],o=r[1];return t||o?(o&&(o=o.substr(0,o.length-1)),t+o):"."},a.basename=function(a,r){var t=l(a)[2];return r&&t.substr(-1*r.length)===r&&(t=t.substr(0,t.length-r.length)),t},a.extname=function(t){return l(t)[3]};var n=function(a,r,t){return a.substr(r,t)}}).call(this,t("_process"))},{_process:6}],33:[function(t,r){(function(t){var a=t.performance||{},o=function(){for(var t=["now","webkitNow","msNow","mozNow","oNow"],i;t.length;)if(i=t.shift(),i in a)return a[i].bind(a);var n=Date.now||function(){return new Date().getTime()},r=(a.timing||{}).navigationStart||n();return function(){return n()-r}}();o.performanceNow=a.now,o.noConflict=function(){a.now=o.performanceNow},o.conflict=function(){a.now=o},o.conflict(),r.exports=o}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{}],34:[function(t,a){!function(d){function p(r,t){return function(){r.apply(t,arguments)}}function m(a){if("object"!=babelHelpers.typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof a)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],c(a,p(o,this),p(r,this))}function g(r){var t=this;return null===this._state?void this._deferreds.push(r):void s(function(){var a=t._state?r.onFulfilled:r.onRejected;if(null===a)return void(t._state?r.resolve:r.reject)(t._value);var i;try{i=a(t._value)}catch(t){return void r.reject(t)}r.resolve(i)})}function o(a){try{if(a===this)throw new TypeError("A promise cannot be resolved with itself.");if(a&&("object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void c(p(s,a),p(o,this),p(r,this))}this._state=!0,this._value=a,i.call(this)}catch(a){r.call(this,a)}}function r(r){this._state=!1,this._value=r,i.call(this)}function i(){for(var r=0,t=this._deferreds.length;r<t;r++)g.call(this,this._deferreds[r]);this._deferreds=null}function u(r,a,i,n){this.onFulfilled="function"==typeof r?r:null,this.onRejected="function"==typeof a?a:null,this.resolve=i,this.reject=n}function c(r,a,i){var n=!1;try{r(function(r){n||(n=!0,a(r))},function(r){n||(n=!0,i(r))})}catch(r){if(n)return;n=!0,i(r)}}var n=setTimeout,s="function"==typeof setImmediate&&setImmediate||function(r){n(r,1)},l=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};m.prototype.catch=function(r){return this.then(null,r)},m.prototype.then=function(a,t){var o=this;return new m(function(r,n){g.call(o,new u(a,t,r,n))})},m.all=function(){var a=Array.prototype.slice.call(1===arguments.length&&l(arguments[0])?arguments[0]:arguments);return new m(function(t,s){function n(r,i){try{if(i&&("object"==("undefined"===typeof i?"undefined":babelHelpers.typeof(i))||"function"==typeof i)){var l=i.then;if("function"==typeof l)return void l.call(i,function(a){n(r,a)},s)}a[r]=i,0==--o&&t(a)}catch(r){s(r)}}if(0===a.length)return t([]);for(var o=a.length,r=0;r<a.length;r++)n(r,a[r])})},m.resolve=function(r){return r&&"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&r.constructor===m?r:new m(function(t){t(r)})},m.reject=function(r){return new m(function(t,a){a(r)})},m.race=function(a){return new m(function(t,i){for(var n=0,o=a.length;n<o;n++)a[n].then(t,i)})},m._setImmediateFn=function(r){s=r},"undefined"!=typeof a&&a.exports?a.exports=m:d.Promise||(d.Promise=m)}(this)},{}],35:[function(t,r){var l=t("dtype"),d=t("an-array"),m=t("is-buffer"),g=[0,2,3],h=[2,1,3];r.exports=function(M,r){M&&(d(M)||m(M))||(r=M||{},M=null),r="number"==typeof r?{count:r}:r||{};for(var x="string"==typeof r.type?r.type:"uint16",t="number"==typeof r.count?r.count:1,u=r.start||0,n=!1===r.clockwise?h:g,a=n[0],f=n[1],o=n[2],y=6*t,i=M||new(l(x))(y),p=0,s=0,c;p<y;p+=6,s+=4)c=p+u,i[c+0]=s+0,i[c+1]=s+1,i[c+2]=s+2,i[c+3]=s+a,i[c+4]=s+f,i[c+5]=s+o;return i}},{"an-array":2,dtype:14,"is-buffer":20}],36:[function(t,r){function a(t,r){r=r||{};var a=r.preserveNumbers,n={};return s(t).map(function(t){return t.trim()}).filter(Boolean).forEach(function(i){var r=i.indexOf(":"),s=i.substr(0,r).trim(),t=i.substr(r+1).trim();a&&o(t)&&(t=+t),n[s]=t}),n}function o(t){return!isNaN(parseFloat(t))&&isFinite(t)}function s(a){for(var r=[],o=0,t=/url\([^\)]+$/,i="",n;o<a.length;)n=a.indexOf(";",o),-1===n&&(n=a.length),i+=a.substring(o,n),t.test(i)?(i+=";",o=n+1):(r.push(i),i="",o=n+1);return r}function i(t){return Object.keys(t).map(function(r){return r+":"+t[r]}).join(";")}r.exports.parse=a,r.exports.stringify=i,r.exports.normalize=function(t,r){return i(a(t,r))}},{}],37:[function(t,r){function a(t){i.call(this),"string"==typeof t&&(t={text:t}),this._opt=p({},t),t&&this.update(t)}var l=t("layout-bmfont-text"),o=t("inherits"),d=t("quad-indices"),c=t("three-buffer-vertex-data"),p=t("object-assign"),m=t("./lib/vertices"),n=t("./lib/utils"),i=THREE.BufferGeometry;r.exports=function(t){return new a(t)},o(a,i),a.prototype.update=function(g){if("string"==typeof g&&(g={text:g}),g=p({},this._opt,g),!g.font)throw new TypeError("must specify a { font } in options");this.layout=l(g);var y=!1!==g.flipY,t=g.font,i=t.common.scaleW,r=t.common.scaleH,o=this.layout.glyphs.filter(function(r){var a=r.data;return 0<a.width*a.height});this.visibleGlyphs=o;var s=m.positions(o),n=m.uvs(o,i,r,y),u=d({clockwise:!0,type:"uint16",count:o.length});if(c.index(this,u,1,"uint16"),c.attr(this,"position",s,2),c.attr(this,"uv",n,2),!g.multipage&&"page"in this.attributes)this.removeAttribute("page");else if(g.multipage){var a=m.pages(o);c.attr(this,"page",a,1)}},a.prototype.computeBoundingSphere=function(){null===this.boundingSphere&&(this.boundingSphere=new THREE.Sphere);var r=this.attributes.position.array,a=this.attributes.position.itemSize;return r&&a&&!(2>r.length)?void(n.computeSphere(r,this.boundingSphere),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.")):(this.boundingSphere.radius=0,void this.boundingSphere.center.set(0,0,0))},a.prototype.computeBoundingBox=function(){null===this.boundingBox&&(this.boundingBox=new THREE.Box3);var r=this.boundingBox,a=this.attributes.position.array,t=this.attributes.position.itemSize;return a&&t&&!(2>a.length)?void n.computeBox(a,r):void r.makeEmpty()}},{"./lib/utils":38,"./lib/vertices":39,inherits:19,"layout-bmfont-text":23,"object-assign":26,"quad-indices":35,"three-buffer-vertex-data":40}],38:[function(t,r){function s(t){var r=t.length/n;l.min[0]=t[0],l.min[1]=t[1],l.max[0]=t[0],l.max[1]=t[1];for(var s=0;s<r;s++){var o=t[s*n+0],i=t[s*n+1];l.min[0]=N(o,l.min[0]),l.min[1]=N(i,l.min[1]),l.max[0]=L(o,l.max[0]),l.max[1]=L(i,l.max[1])}}var n=2,l={min:[0,0],max:[0,0]};r.exports.computeBox=function(t,r){s(t),r.min.set(l.min[0],l.min[1],0),r.max.set(l.max[0],l.max[1],0)},r.exports.computeSphere=function(r,d){s(r);var c=l.min[0],o=l.min[1],i=l.max[0],a=l.max[1],n=i-c,p=a-o,u=S(n*n+p*p);d.center.set(c+n/2,o+p/2,0),d.radius=u/2}},{}],39:[function(t,r){r.exports.pages=function(r){var a=new Float32Array(1*(4*r.length)),o=0;return r.forEach(function(i){var t=i.data.page||0;a[o++]=t,a[o++]=t,a[o++]=t,a[o++]=t}),a},r.exports.uvs=function(i,d,o,n){var r=new Float32Array(2*(4*i.length)),a=0;return i.forEach(function(p){var t=p.data,i=t.x+t.width,m=t.y+t.height,u=t.x/d,g=t.y/o,s=i/d,c=m/o;n&&(g=(o-t.y)/o,c=(o-m)/o),r[a++]=u,r[a++]=g,r[a++]=u,r[a++]=c,r[a++]=s,r[a++]=c,r[a++]=s,r[a++]=g}),r},r.exports.positions=function(r){var s=new Float32Array(2*(4*r.length)),o=0;return r.forEach(function(n){var t=n.data,r=n.position[0]+t.xoffset,a=n.position[1]+t.yoffset,l=t.width,i=t.height;s[o++]=r,s[o++]=a,s[o++]=r,s[o++]=a+i,s[o++]=r+l,s[o++]=a+i,s[o++]=r+l,s[o++]=a}),s}},{}],40:[function(t,r){function o(o,d,t,r){if(d=d||[],!o||a(o,d,t)){d=s(d,r);var n=o&&"function"!=typeof o.setArray;return o&&!n||(n&&!l&&(l=!0,console.warn("A WebGL buffer is being updated with a new size or itemSize, however this version of ThreeJS only supports fixed-size buffers.\nThe old buffer may still be kept in memory.\nTo avoid memory leaks, it is recommended that you dispose your geometries and create new ones, or update to ThreeJS r82 or newer.\nSee here for discussion:\nhttps://github.com/mrdoob/three.js/pull/9631")),o=new THREE.BufferAttribute(d,t)),o.itemSize=t,o.needsUpdate=!0,"function"==typeof o.setArray&&o.setArray(d),o}return s(d,o.array),o.needsUpdate=!0,null}function a(a,o,t){if(a.itemSize!==t)return!0;if(!a.array)return!0;var r=a.array.length;return Array.isArray(o)&&Array.isArray(o[0])?r!==o.length*t:r!==o.length}var s=t("flatten-vertex-data"),l=!1;r.exports.attr=function(s,l,t,r,d){if("number"!=typeof r&&(r=3),"string"!=typeof d&&(d="float32"),Array.isArray(t)&&Array.isArray(t[0])&&t[0].length!==r)throw new Error("Nested vertex array has unexpected size; expected "+r+" but found "+t[0].length);var c=s.getAttribute(l),a=o(c,t,r,d);a&&s.addAttribute(l,a)},r.exports.index=function(s,l,t,d){"number"!=typeof t&&(t=1),"string"!=typeof d&&(d="uint16");var c=!s.index&&"function"!=typeof s.setIndex,i=c?s.getAttribute("index"):s.index,a=o(i,l,t,d);a&&(c?s.addAttribute("index",a):s.index=a)}},{"flatten-vertex-data":15}],41:[function(t,o,i){!function(r,t){"object"==("undefined"===typeof i?"undefined":babelHelpers.typeof(i))&&"undefined"!=typeof o?t(i):"function"==typeof a&&a.amd?a(["exports"],t):t(r.THREE=r.THREE||{})}(this,function(zr){"use strict";function t(){}function Br(r,t){this.x=r||0,this.y=t||0}function kr(i,t,n,r,a,o,s,d,c,l){Object.defineProperty(this,"id",{value:gs++}),this.uuid=Mc.generateUUID(),this.name="",this.image=void 0===i?kr.DEFAULT_IMAGE:i,this.mipmaps=[],this.mapping=void 0===t?kr.DEFAULT_MAPPING:t,this.wrapS=void 0===n?nc:n,this.wrapT=void 0===r?nc:r,this.magFilter=void 0===a?pc:a,this.minFilter=void 0===o?mc:o,this.anisotropy=void 0===c?1:c,this.format=void 0===s?hc:s,this.type=void 0===d?gc:d,this.offset=new Br(0,0),this.repeat=new Br(1,1),this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0===l?os:l,this.version=0,this.onUpdate=null}function Fr(r,t,a,o){this.x=r||0,this.y=t||0,this.z=a||0,this.w=void 0===o?1:o}function Gr(r,t,a){this.uuid=Mc.generateUUID(),this.width=r,this.height=t,this.scissor=new Fr(0,0,r,t),this.scissorTest=!1,this.viewport=new Fr(0,0,r,t),a=a||{},void 0===a.minFilter&&(a.minFilter=pc),this.texture=new kr(void 0,void 0,a.wrapS,a.wrapT,a.magFilter,a.minFilter,a.format,a.type,a.anisotropy,a.encoding),this.depthBuffer=void 0===a.depthBuffer||a.depthBuffer,this.stencilBuffer=void 0===a.stencilBuffer||a.stencilBuffer,this.depthTexture=void 0===a.depthTexture?null:a.depthTexture}function Vr(r,t,a){Gr.call(this,r,t,a),this.activeCubeFace=0,this.activeMipMapLevel=0}function Hr(r,t,a,o){this._x=r||0,this._y=t||0,this._z=a||0,this._w=void 0===o?1:o}function Qr(r,t,a){this.x=r||0,this.y=t||0,this.z=a||0}function Yr(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function s(n,d,m,g,r,a,o,s,c,h,y,u){kr.call(this,null,a,o,s,c,h,g,r,y,u),this.image={data:n,width:d,height:m},this.magFilter=void 0===c?lc:c,this.minFilter=void 0===h?lc:h,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function c(n,t,d,i,r,a,o,s,c,p){n=void 0===n?[]:n,t=void 0===t?ho:t,kr.call(this,n,t,d,i,r,a,o,s,c,p),this.flipY=!1}function u(){this.seq=[],this.map={}}function a(l,t,d){var i=l[0];if(0>=i||0<i)return l;var n=t*d,r=xs[n];if(void 0===r&&(r=new Float32Array(n),xs[n]=r),0!==t){i.toArray(r,0);for(var a=1,o=0;a!==t;++a)o+=d,l[a].toArray(r,o)}return r}function o(r,t){var a=bs[t];void 0===a&&(a=new Int32Array(t),bs[t]=a);for(var o=0;o!==t;++o)a[o]=r.allocTextureUnit();return a}function i(r,t){r.uniform1f(this.addr,t)}function d(r,t){r.uniform1i(this.addr,t)}function p(r,t){void 0===t.x?r.uniform2fv(this.addr,t):r.uniform2f(this.addr,t.x,t.y)}function h(r,t){void 0===t.x?void 0===t.r?r.uniform3fv(this.addr,t):r.uniform3f(this.addr,t.r,t.g,t.b):r.uniform3f(this.addr,t.x,t.y,t.z)}function f(r,t){void 0===t.x?r.uniform4fv(this.addr,t):r.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function v(r,t){r.uniformMatrix2fv(this.addr,!1,t.elements||t)}function b(r,t){void 0===t.elements?r.uniformMatrix3fv(this.addr,!1,t):(ws.set(t.elements),r.uniformMatrix3fv(this.addr,!1,ws))}function _(r,t){void 0===t.elements?r.uniformMatrix4fv(this.addr,!1,t):(_s.set(t.elements),r.uniformMatrix4fv(this.addr,!1,_s))}function w(r,t,a){var o=a.allocTextureUnit();r.uniform1i(this.addr,o),a.setTexture2D(t||vs,o)}function Wr(r,t,a){var o=a.allocTextureUnit();r.uniform1i(this.addr,o),a.setTextureCube(t||ys,o)}function E(r,t){r.uniform2iv(this.addr,t)}function T(r,t){r.uniform3iv(this.addr,t)}function Xr(r,t){r.uniform4iv(this.addr,t)}function qr(r){return 5126===r?i:35664===r?p:35665===r?h:35666===r?f:35674===r?v:35675===r?b:35676===r?_:35678===r||36198===r?w:35680===r?Wr:5124===r||35670===r?d:35667===r||35671===r?E:35668===r||35672===r?T:35669===r||35673===r?Xr:void 0}function R(r,t){r.uniform1fv(this.addr,t)}function Zr(r,t){r.uniform1iv(this.addr,t)}function P(r,t){r.uniform2fv(this.addr,a(t,this.size,2))}function Kr(r,t){r.uniform3fv(this.addr,a(t,this.size,3))}function Jr(r,t){r.uniform4fv(this.addr,a(t,this.size,4))}function U(r,t){r.uniformMatrix2fv(this.addr,!1,a(t,this.size,4))}function $r(r,t){r.uniformMatrix3fv(this.addr,!1,a(t,this.size,9))}function ea(r,t){r.uniformMatrix4fv(this.addr,!1,a(t,this.size,16))}function ta(s,t,l){var i=t.length,n=o(l,i);s.uniform1iv(this.addr,n);for(var r=0;r!==i;++r)l.setTexture2D(t[r]||vs,n[r])}function F(s,t,l){var i=t.length,n=o(l,i);s.uniform1iv(this.addr,n);for(var r=0;r!==i;++r)l.setTextureCube(t[r]||ys,n[r])}function B(r){return 5126===r?R:35664===r?P:35665===r?Kr:35666===r?Jr:35674===r?U:35675===r?$r:35676===r?ea:35678===r?ta:35680===r?F:5124===r||35670===r?Zr:35667===r||35671===r?E:35668===r||35672===r?T:35669===r||35673===r?Xr:void 0}function z(r,t,a){this.id=r,this.addr=a,this.setValue=qr(t.type)}function G(r,t,a){this.id=r,this.addr=a,this.size=t.size,this.setValue=B(t.type)}function H(r){this.id=r,u.call(this)}function V(r,t){r.seq.push(t),r.map[t.id]=t}function k(d,t,p){var i=d.name,n=i.length;for(Ms.lastIndex=0;;){var r=Ms.exec(i),a=Ms.lastIndex,o=r[1],s="]"===r[2],c=r[3];if(s&&(o|=0),void 0===c||"["===c&&a+2===n){V(p,void 0===c?new z(o,d,t):new G(o,d,t));break}var m=p.map,l=m[o];void 0===l&&(l=new H(o),V(p,l)),p=l}}function j(s,t,l){u.call(this),this.renderer=l;for(var i=s.getProgramParameter(t,s.ACTIVE_UNIFORMS),n=0;n<i;++n){var r=s.getActiveUniform(t,n),a=r.name;k(r,s.getUniformLocation(t,a),this)}}function W(r,t,a){return void 0===t&&void 0===a?this.set(r):this.setRGB(r,t,a)}function X(r,t){this.min=void 0===r?new Br(1/0,1/0):r,this.max=void 0===t?new Br(-1/0,-1/0):t}function q(i,c,D,t,y){function r(){var r=new Float32Array([-1,-1,0,0,1,-1,1,0,1,1,1,1,-1,1,0,1]),t=new Uint16Array([0,1,2,0,2,3]);o=c.createBuffer(),n=c.createBuffer(),c.bindBuffer(c.ARRAY_BUFFER,o),c.bufferData(c.ARRAY_BUFFER,r,c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),c.bufferData(c.ELEMENT_ARRAY_BUFFER,t,c.STATIC_DRAW),h=c.createTexture(),m=c.createTexture(),D.bindTexture(c.TEXTURE_2D,h),c.texImage2D(c.TEXTURE_2D,0,c.RGB,16,16,0,c.RGB,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),D.bindTexture(c.TEXTURE_2D,m),c.texImage2D(c.TEXTURE_2D,0,c.RGBA,16,16,0,c.RGBA,c.UNSIGNED_BYTE,null),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST),s={vertexShader:"uniform lowp int renderType;\nuniform vec3 screenPosition;\nuniform vec2 scale;\nuniform float rotation;\nuniform sampler2D occlusionMap;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nvUV = uv;\nvec2 pos = position;\nif ( renderType == 2 ) {\nvec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );\nvisibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );\nvVisibility =        visibility.r / 9.0;\nvVisibility *= 1.0 - visibility.g / 9.0;\nvVisibility *=       visibility.b / 9.0;\nvVisibility *= 1.0 - visibility.a / 9.0;\npos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;\npos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;\n}\ngl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );\n}",fragmentShader:"uniform lowp int renderType;\nuniform sampler2D map;\nuniform float opacity;\nuniform vec3 color;\nvarying vec2 vUV;\nvarying float vVisibility;\nvoid main() {\nif ( renderType == 0 ) {\ngl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );\n} else if ( renderType == 1 ) {\ngl_FragColor = texture2D( map, vUV );\n} else {\nvec4 texture = texture2D( map, vUV );\ntexture.a *= opacity * vVisibility;\ngl_FragColor = texture;\ngl_FragColor.rgb *= color;\n}\n}"},l=a(s),p={vertex:c.getAttribLocation(l,"position"),uv:c.getAttribLocation(l,"uv")},d={renderType:c.getUniformLocation(l,"renderType"),map:c.getUniformLocation(l,"map"),occlusionMap:c.getUniformLocation(l,"occlusionMap"),opacity:c.getUniformLocation(l,"opacity"),color:c.getUniformLocation(l,"color"),scale:c.getUniformLocation(l,"scale"),rotation:c.getUniformLocation(l,"rotation"),screenPosition:c.getUniformLocation(l,"screenPosition")}}function a(a){var t=c.createProgram(),i=c.createShader(c.FRAGMENT_SHADER),n=c.createShader(c.VERTEX_SHADER),r="precision "+y.precision+" float;\n";return c.shaderSource(i,r+a.fragmentShader),c.shaderSource(n,r+a.vertexShader),c.compileShader(i),c.compileShader(n),c.attachShader(t,i),c.attachShader(t,n),c.linkProgram(t),t}var o,n,s,l,p,d,h,m;this.render=function(i,g,a,s){if(0!==i.length){var u=new Qr,f=s.w/s.z,y=.5*s.z,x=.5*s.w,v=16/s.w,b=new Br(v*f,v),N=new Qr(1,1,0),M=new Br(1,1),E=new X;E.min.set(s.x,s.y),E.max.set(s.x+(s.z-16),s.y+(s.w-16)),void 0===l&&r(),D.useProgram(l),D.initAttributes(),D.enableAttribute(p.vertex),D.enableAttribute(p.uv),D.disableUnusedAttributes(),c.uniform1i(d.occlusionMap,0),c.uniform1i(d.map,1),c.bindBuffer(c.ARRAY_BUFFER,o),c.vertexAttribPointer(p.vertex,2,c.FLOAT,!1,16,0),c.vertexAttribPointer(p.uv,2,c.FLOAT,!1,16,8),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,n),D.disable(c.CULL_FACE),D.buffers.depth.setMask(!1);for(var T=0,w=i.length;T<w;T++){v=16/s.w,b.set(v*f,v);var A=i[T];if(u.set(A.matrixWorld.elements[12],A.matrixWorld.elements[13],A.matrixWorld.elements[14]),u.applyMatrix4(a.matrixWorldInverse),u.applyMatrix4(a.projectionMatrix),N.copy(u),M.x=s.x+N.x*y+y-8,M.y=s.y+N.y*x+x-8,!0===E.containsPoint(M)){D.activeTexture(c.TEXTURE0),D.bindTexture(c.TEXTURE_2D,null),D.activeTexture(c.TEXTURE1),D.bindTexture(c.TEXTURE_2D,h),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGB,M.x,M.y,16,16,0),c.uniform1i(d.renderType,0),c.uniform2f(d.scale,b.x,b.y),c.uniform3f(d.screenPosition,N.x,N.y,N.z),D.disable(c.BLEND),D.enable(c.DEPTH_TEST),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),D.activeTexture(c.TEXTURE0),D.bindTexture(c.TEXTURE_2D,m),c.copyTexImage2D(c.TEXTURE_2D,0,c.RGBA,M.x,M.y,16,16,0),c.uniform1i(d.renderType,1),D.disable(c.DEPTH_TEST),D.activeTexture(c.TEXTURE1),D.bindTexture(c.TEXTURE_2D,h),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0),A.positionScreen.copy(N),A.customUpdateCallback?A.customUpdateCallback(A):A.updateLensFlares(),c.uniform1i(d.renderType,2),D.enable(c.BLEND);for(var S=0,L=A.lensFlares.length,I;S<L;S++)I=A.lensFlares[S],.001<I.opacity&&.001<I.scale&&(N.x=I.x,N.y=I.y,N.z=I.z,v=I.size*I.scale/s.w,b.x=v*f,b.y=v,c.uniform3f(d.screenPosition,N.x,N.y,N.z),c.uniform2f(d.scale,b.x,b.y),c.uniform1f(d.rotation,I.rotation),c.uniform1f(d.opacity,I.opacity),c.uniform3f(d.color,I.color.r,I.color.g,I.color.b),D.setBlending(I.blending,I.blendEquation,I.blendSrc,I.blendDst),t.setTexture2D(I.texture,1),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0))}}D.enable(c.CULL_FACE),D.enable(c.DEPTH_TEST),D.buffers.depth.setMask(!0),D.reset()}}}function Y(n,t,l,i,r,a,o,s,d){kr.call(this,n,t,l,i,r,a,o,s,d),this.needsUpdate=!0}function Z(A,L,t,i,s){function n(){var o=new Float32Array([-0.5,-0.5,0,0,0.5,-0.5,1,0,0.5,0.5,1,1,-0.5,0.5,0,1]),t=new Uint16Array([0,1,2,0,2,3]);y=L.createBuffer(),l=L.createBuffer(),L.bindBuffer(L.ARRAY_BUFFER,y),L.bufferData(L.ARRAY_BUFFER,o,L.STATIC_DRAW),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,l),L.bufferData(L.ELEMENT_ARRAY_BUFFER,t,L.STATIC_DRAW),u=a(),p={position:L.getAttribLocation(u,"position"),uv:L.getAttribLocation(u,"uv")},d={uvOffset:L.getUniformLocation(u,"uvOffset"),uvScale:L.getUniformLocation(u,"uvScale"),rotation:L.getUniformLocation(u,"rotation"),scale:L.getUniformLocation(u,"scale"),color:L.getUniformLocation(u,"color"),map:L.getUniformLocation(u,"map"),opacity:L.getUniformLocation(u,"opacity"),modelViewMatrix:L.getUniformLocation(u,"modelViewMatrix"),projectionMatrix:L.getUniformLocation(u,"projectionMatrix"),fogType:L.getUniformLocation(u,"fogType"),fogDensity:L.getUniformLocation(u,"fogDensity"),fogNear:L.getUniformLocation(u,"fogNear"),fogFar:L.getUniformLocation(u,"fogFar"),fogColor:L.getUniformLocation(u,"fogColor"),alphaTest:L.getUniformLocation(u,"alphaTest")};var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");i.width=8,i.height=8;var n=i.getContext("2d");n.fillStyle="white",n.fillRect(0,0,8,8),f=new Y(i)}function a(){var r=L.createProgram(),t=L.createShader(L.VERTEX_SHADER),a=L.createShader(L.FRAGMENT_SHADER);return L.shaderSource(t,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform float rotation;","uniform vec2 scale;","uniform vec2 uvOffset;","uniform vec2 uvScale;","attribute vec2 position;","attribute vec2 uv;","varying vec2 vUV;","void main() {","vUV = uvOffset + uv * uvScale;","vec2 alignedPosition = position * scale;","vec2 rotatedPosition;","rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;","rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;","vec4 finalPosition;","finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );","finalPosition.xy += rotatedPosition;","finalPosition = projectionMatrix * finalPosition;","gl_Position = finalPosition;","}"].join("\n")),L.shaderSource(a,["precision "+s.precision+" float;","#define SHADER_NAME SpriteMaterial","uniform vec3 color;","uniform sampler2D map;","uniform float opacity;","uniform int fogType;","uniform vec3 fogColor;","uniform float fogDensity;","uniform float fogNear;","uniform float fogFar;","uniform float alphaTest;","varying vec2 vUV;","void main() {","vec4 texture = texture2D( map, vUV );","if ( texture.a < alphaTest ) discard;","gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );","if ( fogType > 0 ) {","float depth = gl_FragCoord.z / gl_FragCoord.w;","float fogFactor = 0.0;","if ( fogType == 1 ) {","fogFactor = smoothstep( fogNear, fogFar, depth );","} else {","const float LOG2 = 1.442695;","fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );","fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );","}","gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );","}","}"].join("\n")),L.compileShader(t),L.compileShader(a),L.attachShader(r,t),L.attachShader(r,a),L.linkProgram(r),r}function D(r,t){return r.renderOrder===t.renderOrder?r.z===t.z?t.id-r.id:t.z-r.z:r.renderOrder-t.renderOrder}var r=new Qr,g=new Hr,h=new Qr,y,l,u,p,d,f;this.render=function(a,m,o){if(0!==a.length){void 0===u&&n(),t.useProgram(u),t.initAttributes(),t.enableAttribute(p.position),t.enableAttribute(p.uv),t.disableUnusedAttributes(),t.disable(L.CULL_FACE),t.enable(L.BLEND),L.bindBuffer(L.ARRAY_BUFFER,y),L.vertexAttribPointer(p.position,2,L.FLOAT,!1,16,0),L.vertexAttribPointer(p.uv,2,L.FLOAT,!1,16,8),L.bindBuffer(L.ELEMENT_ARRAY_BUFFER,l),L.uniformMatrix4fv(d.projectionMatrix,!1,o.projectionMatrix.elements),t.activeTexture(L.TEXTURE0),L.uniform1i(d.map,0);var s=0,c=0,x=m.fog;x?(L.uniform3f(d.fogColor,x.color.r,x.color.g,x.color.b),x.isFog?(L.uniform1f(d.fogNear,x.near),L.uniform1f(d.fogFar,x.far),L.uniform1i(d.fogType,1),s=1,c=1):x.isFogExp2&&(L.uniform1f(d.fogDensity,x.density),L.uniform1i(d.fogType,2),s=2,c=2)):(L.uniform1i(d.fogType,0),s=0,c=0);for(var v=0,b=a.length,N;v<b;v++)N=a[v],N.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,N.matrixWorld),N.z=-N.modelViewMatrix.elements[14];a.sort(D);for(var M=[],v=0,b=a.length;v<b;v++){var N=a[v],E=N.material;if(!1!==E.visible){N.onBeforeRender(A,m,o,void 0,E,void 0),L.uniform1f(d.alphaTest,E.alphaTest),L.uniformMatrix4fv(d.modelViewMatrix,!1,N.modelViewMatrix.elements),N.matrixWorld.decompose(r,g,h),M[0]=h.x,M[1]=h.y;var T=0;m.fog&&E.fog&&(T=c),s!==T&&(L.uniform1i(d.fogType,T),s=T),null===E.map?(L.uniform2f(d.uvOffset,0,0),L.uniform2f(d.uvScale,1,1)):(L.uniform2f(d.uvOffset,E.map.offset.x,E.map.offset.y),L.uniform2f(d.uvScale,E.map.repeat.x,E.map.repeat.y)),L.uniform1f(d.opacity,E.opacity),L.uniform3f(d.color,E.color.r,E.color.g,E.color.b),L.uniform1f(d.rotation,E.rotation),L.uniform2fv(d.scale,M),t.setBlending(E.blending,E.blendEquation,E.blendSrc,E.blendDst,E.blendEquationAlpha,E.blendSrcAlpha,E.blendDstAlpha,E.premultipliedAlpha),t.buffers.depth.setTest(E.depthTest),t.buffers.depth.setMask(E.depthWrite),i.setTexture2D(E.map||f,0),L.drawElements(L.TRIANGLES,6,L.UNSIGNED_SHORT,0),N.onAfterRender(A,m,o,void 0,E,void 0)}}t.enable(L.CULL_FACE),t.reset()}}}function J(){Object.defineProperty(this,"id",{value:Ls++}),this.uuid=Mc.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=Wd,this.side=xa,this.flatShading=!1,this.vertexColors=wa,this.opacity=1,this.transparent=!1,this.blendSrc=Ga,this.blendDst=Ha,this.blendEquation=Jd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ja,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function aa(r){J.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,void 0!==r&&(void 0!==r.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(r))}function oa(r){J.call(this),this.type="MeshDepthMaterial",this.depthPacking=ds,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(r)}function sa(r){J.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Qr,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(r)}function la(r,t){this.min=void 0===r?new Qr(1/0,1/0,1/0):r,this.max=void 0===t?new Qr(-1/0,-1/0,-1/0):t}function et(r,t){this.center=void 0===r?new Qr:r,this.radius=void 0===t?0:t}function it(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function nt(r,t){this.normal=void 0===r?new Qr(1,0,0):r,this.constant=void 0===t?0:t}function da(o,t,s,i,n,r){this.planes=[void 0===o?new nt:o,void 0===t?new nt:t,void 0===s?new nt:s,void 0===i?new nt:i,void 0===n?new nt:n,void 0===r?new nt:r]}function at(D,t,r){function n(t,E,i,n,r,a){var v=t.geometry,s=null,c=g,A=t.customDepthMaterial;if(i&&(c=x,A=t.customDistanceMaterial),A)s=A;else{var l=!1;E.morphTargets&&(v&&v.isBufferGeometry?l=v.morphAttributes&&v.morphAttributes.position&&0<v.morphAttributes.position.length:v&&v.isGeometry&&(l=v.morphTargets&&0<v.morphTargets.length)),t.isSkinnedMesh&&!1===E.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t);var u=t.isSkinnedMesh&&E.skinning,p=0;l&&(p|=o),u&&(p|=m),s=c[p]}if(D.localClippingEnabled&&!0===E.clipShadows&&0!==E.clippingPlanes.length){var d=s.uuid,f=E.uuid,T=h[d];void 0===T&&(T={},h[d]=T);var y=T[f];void 0===y&&(y=s.clone(),T[f]=y),s=y}s.visible=E.visible,s.wireframe=E.wireframe;var b=E.side;return N.renderSingleSided&&b==Hd&&(b=xa),N.renderReverseSided&&(b===xa?b=ba:b===ba&&(b=xa)),s.side=b,s.clipShadows=E.clipShadows,s.clippingPlanes=E.clippingPlanes,s.clipIntersection=E.clipIntersection,s.wireframeLinewidth=E.wireframeLinewidth,s.linewidth=E.linewidth,i&&s.isMeshDistanceMaterial&&(s.referencePosition.copy(n),s.nearDistance=r,s.farDistance=a),s}function c(o,i,l,r){if(!1!==o.visible){if(o.layers.test(i.layers)&&(o.isMesh||o.isLine||o.isPoints)&&o.castShadow&&(!o.frustumCulled||s.intersectsObject(o))){o.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,o.matrixWorld);var a=t.update(o),m=o.material;if(Array.isArray(m))for(var h=a.groups,M=0,p=h.length;M<p;M++){var d=h[M],f=m[d.materialIndex];if(f&&f.visible){var g=n(o,f,r,u,l.near,l.far);D.renderBufferDirect(l,null,a,g,o,d)}}else if(m.visible){var g=n(o,m,r,u,l.near,l.far);D.renderBufferDirect(l,null,a,g,o,null)}}for(var E=o.children,y=0,x=E.length;y<x;y++)c(E[y],i,l,r)}}for(var s=new da,a=new Yr,l=new Br,p=new Br(r,r),d=new Qr,u=new Qr,o=1,m=2,g=[,,,,],x=[,,,,],h={},i=[new Qr(1,0,0),new Qr(-1,0,0),new Qr(0,0,1),new Qr(0,0,-1),new Qr(0,1,0),new Qr(0,-1,0)],y=[new Qr(0,1,0),new Qr(0,1,0),new Qr(0,1,0),new Qr(0,1,0),new Qr(0,0,1),new Qr(0,0,-1)],f=[new Fr,new Fr,new Fr,new Fr,new Fr,new Fr],M=0;M!==1+(o|m);++M){var E=0!=(M&o),v=0!=(M&m),T=new oa({depthPacking:fs,morphTargets:E,skinning:v});g[M]=T;var b=new sa({morphTargets:E,skinning:v});x[M]=b}var N=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=va,this.renderReverseSided=!0,this.renderSingleSided=!0,this.render=function(t,m,M){if(!1!==N.enabled&&(!1!==N.autoUpdate||!1!==N.needsUpdate)&&0!==t.length){var n=D.context,r=D.state;r.disable(n.BLEND),r.buffers.color.setClear(1,1,1,1),r.buffers.depth.setTest(!0),r.setScissorTest(!1);for(var o=0,h=t.length,g;o<h;o++){var E=t[o],v=E.shadow,w=E&&E.isPointLight;if(void 0!==v){var x=v.camera;if(l.copy(v.mapSize),l.min(p),w){var b=l.x,S=l.y;f[0].set(2*b,S,b,S),f[1].set(0,S,b,S),f[2].set(3*b,S,b,S),f[3].set(b,S,b,S),f[4].set(3*b,0,b,S),f[5].set(b,0,b,S),l.x*=4,l.y*=2}if(null===v.map){v.map=new Gr(l.x,l.y,{minFilter:lc,magFilter:lc,format:hc}),v.map.texture.name=E.name+".shadowMap",x.updateProjectionMatrix()}v.isSpotLightShadow&&v.update(E);var T=v.map,A=v.matrix;u.setFromMatrixPosition(E.matrixWorld),x.position.copy(u),w?(g=6,A.makeTranslation(-u.x,-u.y,-u.z)):(g=1,d.setFromMatrixPosition(E.target.matrixWorld),x.lookAt(d),x.updateMatrixWorld(),A.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),A.multiply(x.projectionMatrix),A.multiply(x.matrixWorldInverse)),D.setRenderTarget(T),D.clear();for(var I=0;I<g;I++){if(w){d.copy(x.position),d.add(i[I]),x.up.copy(y[I]),x.lookAt(d),x.updateMatrixWorld();var L=f[I];r.viewport(L)}a.multiplyMatrices(x.projectionMatrix,x.matrixWorldInverse),s.setFromMatrix(a),c(m,M,x,w)}}else console.warn("THREE.WebGLShadowMap:",E,"has no shadow.")}N.needsUpdate=!1}}}function rt(s){function a(t,l){var i=t.array,n=t.dynamic?s.DYNAMIC_DRAW:s.STATIC_DRAW,r=s.createBuffer();s.bindBuffer(l,r),s.bufferData(l,i,n),t.onUploadCallback();var d=s.FLOAT;return i instanceof Float32Array?d=s.FLOAT:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?d=s.UNSIGNED_SHORT:i instanceof Int16Array?d=s.SHORT:i instanceof Uint32Array?d=s.UNSIGNED_INT:i instanceof Int32Array?d=s.INT:i instanceof Int8Array?d=s.BYTE:i instanceof Uint8Array&&(d=s.UNSIGNED_BYTE),{buffer:r,type:d,bytesPerElement:i.BYTES_PER_ELEMENT,version:t.version}}function l(t,o,l){var n=o.array,r=o.updateRange;s.bindBuffer(l,t),!1===o.dynamic?s.bufferData(l,n,s.STATIC_DRAW):-1===r.count?s.bufferSubData(l,0,n):0===r.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(s.bufferSubData(l,r.offset*n.BYTES_PER_ELEMENT,n.subarray(r.offset,r.offset+r.count)),r.count=-1)}var d={};return{get:function(r){return r.isInterleavedBufferAttribute&&(r=r.data),d[r.uuid]},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var r=d[t.uuid];r&&(s.deleteBuffer(r.buffer),delete d[t.uuid])},update:function(o,t){o.isInterleavedBufferAttribute&&(o=o.data);var i=d[o.uuid];void 0===i?d[o.uuid]=a(o,t):i.version<o.version&&(l(i.buffer,o,t),i.version=o.version)}}}function ot(r,t,a,o){this._x=r||0,this._y=t||0,this._z=a||0,this._order=o||ot.DefaultOrder}function st(){this.mask=1}function ct(){Object.defineProperty(this,"id",{value:Ps++}),this.uuid=Mc.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=ct.DefaultUp.clone();var t=new Qr,o=new ot,s=new Hr,l=new Qr(1,1,1);o.onChange(function(){s.setFromEuler(o,!1)}),s.onChange(function(){o.setFromQuaternion(s,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:t},rotation:{enumerable:!0,value:o},quaternion:{enumerable:!0,value:s},scale:{enumerable:!0,value:l},modelViewMatrix:{value:new Yr},normalMatrix:{value:new it}}),this.matrix=new Yr,this.matrixWorld=new Yr,this.matrixAutoUpdate=ct.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new st,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function lt(){ct.call(this),this.type="Camera",this.matrixWorldInverse=new Yr,this.projectionMatrix=new Yr}function ht(o,t,s,i,n,r){lt.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=o,this.right=t,this.top=s,this.bottom=i,this.near=void 0===n?.1:n,this.far=void 0===r?2e3:r,this.updateProjectionMatrix()}function ca(r,t,a,o){lt.call(this),this.type="PerspectiveCamera",this.fov=void 0===r?50:r,this.zoom=1,this.near=void 0===a?.1:a,this.far=void 0===o?2e3:o,this.focus=10,this.aspect=void 0===t?1:t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function ua(o,t,s,i,n,r){this.a=o,this.b=t,this.c=s,this.normal=i&&i.isVector3?i:new Qr,this.vertexNormals=Array.isArray(i)?i:[],this.color=n&&n.isColor?n:new W,this.vertexColors=Array.isArray(n)?n:[],this.materialIndex=void 0===r?0:r}function ft(){return Cs++}function mt(){Object.defineProperty(this,"id",{value:ft()}),this.uuid=Mc.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function gt(r,t,a){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.uuid=Mc.generateUUID(),this.name="",this.array=r,this.itemSize=t,this.count=void 0===r?0:r.length/t,this.normalized=!0===a,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function vt(r,t){gt.call(this,new Int8Array(r),t)}function yt(r,t){gt.call(this,new Uint8Array(r),t)}function xt(r,t){gt.call(this,new Uint8ClampedArray(r),t)}function bt(r,t){gt.call(this,new Int16Array(r),t)}function _t(r,t){gt.call(this,new Uint16Array(r),t)}function wt(r,t){gt.call(this,new Int32Array(r),t)}function Mt(r,t){gt.call(this,new Uint32Array(r),t)}function Et(r,t){gt.call(this,new Float32Array(r),t)}function Tt(r,t){gt.call(this,new Float64Array(r),t)}function St(){this.indices=[],this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function At(r){if(0===r.length)return-1/0;for(var t=r[0],a=1,o=r.length;a<o;++a)r[a]>t&&(t=r[a]);return t}function Rt(){Object.defineProperty(this,"id",{value:ft()}),this.uuid=Mc.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0}}function Lt(o,s,l,d,c,p){mt.call(this),this.type="BoxGeometry",this.parameters={width:o,height:s,depth:l,widthSegments:d,heightSegments:c,depthSegments:p},this.fromBufferGeometry(new ha(o,s,l,d,c,p)),this.mergeVertices()}function ha(c,m,g,y,M,x){function E(c,t,h,i,n,r,a,f,m,g,M){var y=m+1,E=0,v=0,T=new Qr,L,x;for(x=0;x<g+1;x++){var b=x*(a/g)-a/2;for(L=0;L<y;L++){var w=L*(r/m)-r/2;T[c]=w*i,T[t]=b*n,T[h]=f/2,s.push(T.x,T.y,T.z),T[c]=0,T[t]=0,T[h]=0<f?1:-1,l.push(T.x,T.y,T.z),u.push(L/m),u.push(1-x/g),E+=1}}for(x=0;x<g;x++)for(L=0;L<m;L++){var C=p+L+y*x,S=p+L+y*(x+1),N=p+(L+1)+y*(x+1),D=p+(L+1)+y*x;o.push(C,S,D),o.push(S,N,D),v+=6}A.addGroup(d,v,M),d+=v,p+=E}Rt.call(this),this.type="BoxBufferGeometry",this.parameters={width:c,height:m,depth:g,widthSegments:y,heightSegments:M,depthSegments:x};var A=this;y=C(y)||1,M=C(M)||1,x=C(x)||1;var o=[],s=[],l=[],u=[],p=0,d=0;E("z","y","x",-1,-1,g,m,c,x,M,0),E("z","y","x",1,-1,g,m,-c,x,M,1),E("x","z","y",1,1,c,g,m,y,x,2),E("x","z","y",1,-1,c,g,-m,y,x,3),E("x","y","z",1,-1,c,m,g,y,M,4),E("x","y","z",-1,-1,c,m,-g,y,M,5),this.setIndex(o),this.addAttribute("position",new Et(s,3)),this.addAttribute("normal",new Et(l,3)),this.addAttribute("uv",new Et(u,2))}function jo(r,a,o,s){mt.call(this),this.type="PlaneGeometry",this.parameters={width:r,height:a,widthSegments:o,heightSegments:s},this.fromBufferGeometry(new el(r,a,o,s)),this.mergeVertices()}function el(o,s,d,p){Rt.call(this),this.type="PlaneBufferGeometry",this.parameters={width:o,height:s,widthSegments:d,heightSegments:p};var u=C(d)||1,c=C(p)||1,h=u+1,l=[],f=[],m=[],g=[],E,r;for(r=0;r<c+1;r++){var a=r*(s/c)-s/2;for(E=0;E<h;E++){var v=E*(o/u)-o/2;f.push(v,-a,0),m.push(0,0,1),g.push(E/u),g.push(1-r/c)}}for(r=0;r<c;r++)for(E=0;E<u;E++){var x=E+h*r,A=E+h*(r+1),T=E+1+h*(r+1),b=E+1+h*r;l.push(x,A,b),l.push(A,T,b)}this.setIndex(l),this.addAttribute("position",new Et(f,3)),this.addAttribute("normal",new Et(m,3)),this.addAttribute("uv",new Et(g,2))}function tl(r){J.call(this),this.type="MeshBasicMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(r)}function rl(r,t){this.origin=void 0===r?new Qr:r,this.direction=void 0===t?new Qr:t}function Dt(r,t){this.start=void 0===r?new Qr:r,this.end=void 0===t?new Qr:t}function Ot(r,t,a){this.a=void 0===r?new Qr:r,this.b=void 0===t?new Qr:t,this.c=void 0===a?new Qr:a}function Ft(r,t){ct.call(this),this.type="Mesh",this.geometry=void 0===r?new Rt:r,this.material=void 0===t?new tl({color:16777215*Math.random()}):t,this.drawMode=fc,this.updateMorphTargets()}function al(d,p,t,u){function i(i,c,n,h){var u=c.background;null===u?m(a,g):u&&u.isColor&&(m(u,1),h=!0),(d.autoClear||h)&&d.clear(d.autoClearColor,d.autoClearDepth,d.autoClearStencil),u&&u.isCubeTexture?(void 0===s&&(s=new Ft(new ha(1,1,1),new aa({uniforms:Rs.cube.uniforms,vertexShader:Rs.cube.vertexShader,fragmentShader:Rs.cube.fragmentShader,side:ba,depthTest:!0,depthWrite:!1,polygonOffset:!0,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(r,t,a){var o=a.far;this.matrixWorld.makeScale(o,o,o),this.matrixWorld.copyPosition(a.matrixWorld),this.material.polygonOffsetUnits=10*o},t.update(s.geometry)),s.material.uniforms.tCube.value=u,i.push(s,s.geometry,s.material,0,null)):u&&u.isTexture&&(void 0===l&&(l=new ht(-1,1,1,-1,0,1),o=new Ft(new el(2,2),new tl({depthTest:!1,depthWrite:!1,fog:!1})),t.update(o.geometry)),o.material.map=u,d.renderBufferDirect(l,null,o.geometry,o.material,o,null))}function m(r,t){p.buffers.color.setClear(r.r,r.g,r.b,t,u)}var a=new W(0),g=0,l,o,s;return{getClearColor:function(){return a},setClearColor:function(r,t){a.set(r),g=void 0===t?1:t,m(a,g)},getClearAlpha:function(){return g},setClearAlpha:function(r){g=r,m(a,g)},render:i}}function zt(r,t){return r.renderOrder===t.renderOrder?r.program&&t.program&&r.program!==t.program?r.program.id-t.program.id:r.material.id===t.material.id?r.z===t.z?r.id-t.id:r.z-t.z:r.material.id-t.material.id:r.renderOrder-t.renderOrder}function Gt(r,t){return r.renderOrder===t.renderOrder?r.z===t.z?r.id-t.id:t.z-r.z:r.renderOrder-t.renderOrder}function Ht(){function t(a,o,p,u,m){var g=l[n];void 0===g?(g={id:a.id,object:a,geometry:o,material:p,program:p.program,renderOrder:a.renderOrder,z:u,group:m},l[n]=g):(g.id=a.id,g.object=a,g.geometry=o,g.material=p,g.program=p.program,g.renderOrder=a.renderOrder,g.z=u,g.group=m),(!0===p.transparent?d:r).push(g),n++}var l=[],n=0,r=[],d=[];return{opaque:r,transparent:d,init:function(){n=0,r.length=0,d.length=0},push:t,sort:function(){1<r.length&&r.sort(zt),1<d.length&&d.sort(Gt)}}}function ol(){function r(o,i){var s=o.id+","+i.id,n=a[s];return void 0===n&&(n=new Ht,a[s]=n),n}var a={};return{get:r,dispose:function(){a={}}}}function kt(r,t){return D(t[1])-D(r[1])}function il(g){function t(t,n,r,a){var o=t.morphTargetInfluences,s=o.length,c=y[n.id];if(void 0===c){c=[];for(var h=0;h<s;h++)c[h]=[h,0];y[n.id]=c}for(var l=r.morphTargets&&n.morphAttributes.position,u=r.morphNormals&&n.morphAttributes.normal,h=0,p;h<s;h++)p=c[h],0!==p[1]&&(l&&n.removeAttribute("morphTarget"+h),u&&n.removeAttribute("morphNormal"+h));for(var h=0,p;h<s;h++)p=c[h],p[0]=h,p[1]=o[h];c.sort(kt);for(var h=0,p;8>h;h++){if(p=c[h],p){var d=p[0],f=p[1];if(f){l&&n.addAttribute("morphTarget"+h,l[d]),u&&n.addAttribute("morphNormal"+h,u[d]),i[h]=f;continue}}i[h]=0}a.getUniforms().setValue(g,"morphTargetInfluences",i)}var y={},i=new Float32Array(8);return{update:t}}function Wt(l,t,d){function r(p,n,r){var a=t.get("ANGLE_instanced_arrays");return null===a?void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):void(a.drawElementsInstancedANGLE(i,r,s,n*c,p.maxInstancedCount),d.calls++,d.vertices+=r*p.maxInstancedCount,i===l.TRIANGLES?d.faces+=p.maxInstancedCount*r/3:i===l.POINTS&&(d.points+=p.maxInstancedCount*r))}var i,s,c;this.setMode=function(r){i=r},this.setIndex=function(r){s=r.type,c=r.bytesPerElement},this.render=function(t,r){l.drawElements(i,r,s,t*c),d.calls++,d.vertices+=r,i===l.TRIANGLES?d.faces+=r/3:i===l.POINTS&&(d.points+=r)},this.renderInstances=r}function Xt(l,t,d){function r(o,n,r){var p=t.get("ANGLE_instanced_arrays");if(null===p)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");var s=o.attributes.position;s.isInterleavedBufferAttribute?(r=s.data.count,p.drawArraysInstancedANGLE(i,0,r,o.maxInstancedCount)):p.drawArraysInstancedANGLE(i,n,r,o.maxInstancedCount),d.calls++,d.vertices+=r*o.maxInstancedCount,i===l.TRIANGLES?d.faces+=o.maxInstancedCount*r/3:i===l.POINTS&&(d.points+=o.maxInstancedCount*r)}var i;this.setMode=function(r){i=r},this.render=function(t,r){l.drawArrays(i,t,r),d.calls++,d.vertices+=r,i===l.TRIANGLES?d.faces+=r/3:i===l.POINTS&&(d.points+=r)},this.renderInstances=r}function qt(m,g,l){function i(n){var t=n.target,r=p[t.id];for(var a in null!==r.index&&g.remove(r.index),r.attributes)g.remove(r.attributes[a]);t.removeEventListener("dispose",i),delete p[t.id];var o=y[t.id];o&&(g.remove(o),delete y[t.id]),o=y[r.id],o&&(g.remove(o),delete y[r.id]),l.geometries--}function t(a,t){var o=p[t.id];return o||(t.addEventListener("dispose",i),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=new Rt().setFromObject(a)),o=t._bufferGeometry),p[t.id]=o,l.geometries++,o)}function n(t){var i=t.index,n=t.attributes;for(var r in null!==i&&g.update(i,m.ELEMENT_ARRAY_BUFFER),n)g.update(n[r],m.ARRAY_BUFFER);var l=t.morphAttributes;for(var r in l)for(var o=l[r],s=0,d=o.length;s<d;s++)g.update(o[s],m.ARRAY_BUFFER)}function d(t){var i=y[t.id];if(i)return i;var n=[],r=t.index,a=t.attributes;if(null!==r)for(var c=r.array,s=0,h=c.length;s<h;s+=3){var l=c[s+0],u=c[s+1],p=c[s+2];n.push(l,u,u,p,p,l)}else for(var c=a.position.array,s=0,h=c.length/3-1;s<h;s+=3){var l=s+0,u=s+1,p=s+2;n.push(l,u,u,p,p,l)}return i=new(65535<At(n)?Mt:_t)(n,1),g.update(i,m.ELEMENT_ARRAY_BUFFER),y[t.id]=i,i}var p={},y={};return{get:t,update:n,getWireframeAttribute:d}}function jt(){var r={};return{get:function(t){if(void 0!==r[t.id])return r[t.id];var a;switch(t.type){case"DirectionalLight":a={direction:new Qr,color:new W,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Br};break;case"SpotLight":a={position:new Qr,direction:new Qr,color:new W,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Br};break;case"PointLight":a={position:new Qr,color:new W,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new Br,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":a={direction:new Qr,skyColor:new W,groundColor:new W};break;case"RectAreaLight":a={color:new W,position:new Qr,halfWidth:new Qr,halfHeight:new Qr};}return r[t.id]=a,a}}}function Yt(){function o(a,i,o){for(var L=0,c=0,h=0,D=0,u=0,p=0,d=0,f=0,m=o.matrixWorldInverse,g=0,v=a.length;g<v;g++){var y=a[g],x=y.color,b=y.intensity,N=y.distance,w=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)L+=x.r*b,c+=x.g*b,h+=x.b*b;else if(y.isDirectionalLight){var M=s.get(y);if(M.color.copy(y.color).multiplyScalar(y.intensity),M.direction.setFromMatrixPosition(y.matrixWorld),l.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(l),M.direction.transformDirection(m),M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}A.directionalShadowMap[D]=w,A.directionalShadowMatrix[D]=y.shadow.matrix,A.directional[D]=M,D++}else if(y.isSpotLight){var M=s.get(y);if(M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),M.color.copy(x).multiplyScalar(b),M.distance=N,M.direction.setFromMatrixPosition(y.matrixWorld),l.setFromMatrixPosition(y.target.matrixWorld),M.direction.sub(l),M.direction.transformDirection(m),M.coneCos=O(y.angle),M.penumbraCos=O(y.angle*(1-y.penumbra)),M.decay=0===y.distance?0:y.decay,M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize}A.spotShadowMap[p]=w,A.spotShadowMatrix[p]=y.shadow.matrix,A.spot[p]=M,p++}else if(y.isRectAreaLight){var M=s.get(y);M.color.copy(x).multiplyScalar(b/(y.width*y.height)),M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),r.identity(),n.copy(y.matrixWorld),n.premultiply(m),r.extractRotation(n),M.halfWidth.set(.5*y.width,0,0),M.halfHeight.set(0,.5*y.height,0),M.halfWidth.applyMatrix4(r),M.halfHeight.applyMatrix4(r),A.rectArea[d]=M,d++}else if(y.isPointLight){var M=s.get(y);if(M.position.setFromMatrixPosition(y.matrixWorld),M.position.applyMatrix4(m),M.color.copy(y.color).multiplyScalar(y.intensity),M.distance=y.distance,M.decay=0===y.distance?0:y.decay,M.shadow=y.castShadow,y.castShadow){var E=y.shadow;M.shadowBias=E.bias,M.shadowRadius=E.radius,M.shadowMapSize=E.mapSize,M.shadowCameraNear=E.camera.near,M.shadowCameraFar=E.camera.far}A.pointShadowMap[u]=w,A.pointShadowMatrix[u]=y.shadow.matrix,A.point[u]=M,u++}else if(y.isHemisphereLight){var M=s.get(y);M.direction.setFromMatrixPosition(y.matrixWorld),M.direction.transformDirection(m),M.direction.normalize(),M.skyColor.copy(y.color).multiplyScalar(b),M.groundColor.copy(y.groundColor).multiplyScalar(b),A.hemi[f]=M,f++}}A.ambient[0]=L,A.ambient[1]=c,A.ambient[2]=h,A.directional.length=D,A.spot.length=p,A.rectArea.length=d,A.point.length=u,A.hemi.length=f,A.hash=D+","+u+","+p+","+d+","+f+","+i.length}var s=new jt,A={hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},l=new Qr,n=new Yr,r=new Yr;return{setup:o,state:A}}function Jt(s,t){function a(r){var d=t.frame,n=r.geometry,a=s.get(r,n);return l[a.id]!==d&&(n.isGeometry&&a.updateFromObject(r),s.update(a),l[a.id]=d),a}var l={};return{update:a,clear:function(){l={}}}}function Vt(r){for(var t=r.split("\n"),a=0;a<t.length;a++)t[a]=a+1+": "+t[a];return t.join("\n")}function Qt(r,t,a){var o=r.createShader(t);return r.shaderSource(o,a),r.compileShader(o),!1===r.getShaderParameter(o,r.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==r.getShaderInfoLog(o)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===r.VERTEX_SHADER?"vertex":"fragment",r.getShaderInfoLog(o),Vt(a)),o}function Zt(r){switch(r){case os:return["Linear","( value )"];case ss:return["sRGB","( value )"];case hs:return["RGBE","( value )"];case ls:return["RGBM","( value, 7.0 )"];case us:return["RGBM","( value, 16.0 )"];case ps:return["RGBD","( value, 256.0 )"];case cs:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+r);}}function te(r,t){var a=Zt(t);return"vec4 "+r+"( vec4 value ) { return "+a[0]+"ToLinear"+a[1]+"; }"}function ee(r,t){var a=Zt(t);return"vec4 "+r+"( vec4 value ) { return LinearTo"+a[0]+a[1]+"; }"}function ie(r,t){var a;switch(t){case ao:a="Linear";break;case oo:a="Reinhard";break;case so:a="Uncharted2";break;case co:a="OptimizedCineon";break;default:throw new Error("unsupported toneMapping: "+t);}return"vec3 "+r+"( vec3 color ) { return "+a+"ToneMapping( color ); }"}function ne(r,t,a){return r=r||{},[r.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(r.fragDepth||t.logarithmicDepthBuffer)&&a.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",r.drawBuffers&&a.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(r.shaderTextureLOD||t.envMap)&&a.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(oe).join("\n")}function re(r){var t=[];for(var a in r){var o=r[a];!1!==o&&t.push("#define "+a+" "+o)}return t.join("\n")}function ae(i,t){for(var l={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES),r=0;r<n;r++){var a=i.getActiveAttrib(t,r),o=a.name;l[o]=i.getAttribLocation(t,o)}return l}function oe(r){return""!==r}function se(r,t){return r.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function ce(r){function t(r,t){var a=As[t];if(void 0===a)throw new Error("Can not resolve #include <"+t+">");return ce(a)}var a=/^[ \t]*#include +<([\w\d.]+)>/gm;return r.replace(a,t)}function he(r){function t(o,t,s,i){for(var n="",r=parseInt(t);r<parseInt(s);r++)n+=i.replace(/\[ i \]/g,"[ "+r+" ]");return n}var a=/for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return r.replace(a,t)}function le(D,t,N,i,C,r){var a=D.context,o=i.defines,s=C.vertexShader,c=C.fragmentShader,h="SHADOWMAP_TYPE_BASIC";r.shadowMapType===va?h="SHADOWMAP_TYPE_PCF":r.shadowMapType===ya&&(h="SHADOWMAP_TYPE_PCF_SOFT");var l="ENVMAP_TYPE_CUBE",u="ENVMAP_MODE_REFLECTION",p="ENVMAP_BLENDING_MULTIPLY";if(r.envMap){switch(i.envMap.mapping){case ho:case $d:l="ENVMAP_TYPE_CUBE";break;case ac:case oc:l="ENVMAP_TYPE_CUBE_UV";break;case ec:case tc:l="ENVMAP_TYPE_EQUIREC";break;case rc:l="ENVMAP_TYPE_SPHERE";}switch(i.envMap.mapping){case $d:case tc:u="ENVMAP_MODE_REFRACTION";}switch(i.combine){case eo:p="ENVMAP_BLENDING_MULTIPLY";break;case io:p="ENVMAP_BLENDING_MIX";break;case no:p="ENVMAP_BLENDING_ADD";}}var d=0<D.gammaFactor?D.gammaFactor:1,g=ne(i.extensions,r,t),v=re(o),y=a.createProgram(),x,I;i.isRawShaderMaterial?(x=[v,"\n"].filter(oe).join("\n"),I=[g,v,"\n"].filter(oe).join("\n")):(x=["precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+C.name,v,r.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+r.maxBones,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+u:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.displacementMap&&r.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.flatShading?"#define FLAT_SHADED":"",r.skinning?"#define USE_SKINNING":"",r.useVertexTexture?"#define BONE_TEXTURE":"",r.morphTargets?"#define USE_MORPHTARGETS":"",r.morphNormals&&!1===r.flatShading?"#define USE_MORPHNORMALS":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.sizeAttenuation?"#define USE_SIZEATTENUATION":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(oe).join("\n"),I=[g,"precision "+r.precision+" float;","precision "+r.precision+" int;","#define SHADER_NAME "+C.name,v,r.alphaTest?"#define ALPHATEST "+r.alphaTest:"","#define GAMMA_FACTOR "+d,r.useFog&&r.fog?"#define USE_FOG":"",r.useFog&&r.fogExp?"#define FOG_EXP2":"",r.map?"#define USE_MAP":"",r.envMap?"#define USE_ENVMAP":"",r.envMap?"#define "+l:"",r.envMap?"#define "+u:"",r.envMap?"#define "+p:"",r.lightMap?"#define USE_LIGHTMAP":"",r.aoMap?"#define USE_AOMAP":"",r.emissiveMap?"#define USE_EMISSIVEMAP":"",r.bumpMap?"#define USE_BUMPMAP":"",r.normalMap?"#define USE_NORMALMAP":"",r.specularMap?"#define USE_SPECULARMAP":"",r.roughnessMap?"#define USE_ROUGHNESSMAP":"",r.metalnessMap?"#define USE_METALNESSMAP":"",r.alphaMap?"#define USE_ALPHAMAP":"",r.vertexColors?"#define USE_COLOR":"",r.gradientMap?"#define USE_GRADIENTMAP":"",r.flatShading?"#define FLAT_SHADED":"",r.doubleSided?"#define DOUBLE_SIDED":"",r.flipSided?"#define FLIP_SIDED":"","#define NUM_CLIPPING_PLANES "+r.numClippingPlanes,"#define UNION_CLIPPING_PLANES "+(r.numClippingPlanes-r.numClipIntersection),r.shadowMapEnabled?"#define USE_SHADOWMAP":"",r.shadowMapEnabled?"#define "+h:"",r.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",r.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",r.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",r.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",r.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",r.toneMapping===ro?"":"#define TONE_MAPPING",r.toneMapping===ro?"":As.tonemapping_pars_fragment,r.toneMapping===ro?"":ie("toneMapping",r.toneMapping),r.dithering?"#define DITHERING":"",r.outputEncoding||r.mapEncoding||r.envMapEncoding||r.emissiveMapEncoding?As.encodings_pars_fragment:"",r.mapEncoding?te("mapTexelToLinear",r.mapEncoding):"",r.envMapEncoding?te("envMapTexelToLinear",r.envMapEncoding):"",r.emissiveMapEncoding?te("emissiveMapTexelToLinear",r.emissiveMapEncoding):"",r.outputEncoding?ee("linearToOutputTexel",r.outputEncoding):"",r.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(oe).join("\n")),s=ce(s),s=se(s,r),c=ce(c),c=se(c,r),i.isShaderMaterial||(s=he(s),c=he(c));var O=x+s,b=I+c,_=Qt(a,a.VERTEX_SHADER,O),w=Qt(a,a.FRAGMENT_SHADER,b);a.attachShader(y,_),a.attachShader(y,w),void 0===i.index0AttributeName?!0===r.morphTargets&&a.bindAttribLocation(y,0,"position"):a.bindAttribLocation(y,0,i.index0AttributeName),a.linkProgram(y);var M=a.getProgramInfoLog(y),z=a.getShaderInfoLog(_),U=a.getShaderInfoLog(w),B=!0,k=!0;!1===a.getProgramParameter(y,a.LINK_STATUS)?(B=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(y,a.VALIDATE_STATUS),"gl.getProgramInfoLog",M,z,U)):""===M?""!==z&&""!==U||(k=!1):console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",M),k&&(this.diagnostics={runnable:B,material:i,programLog:M,vertexShader:{log:z,prefix:x},fragmentShader:{log:U,prefix:I}}),a.deleteShader(_),a.deleteShader(w);var R;this.getUniforms=function(){return void 0===R&&(R=new j(a,y,D)),R};var L;return this.getAttributes=function(){return void 0===L&&(L=ae(a,y)),L},this.destroy=function(){a.deleteProgram(y),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.id=Is++,this.code=N,this.usedTimes=1,this.program=y,this.vertexShader=_,this.fragmentShader=w,this}function ue(g,t,y){function i(i){var t=i.skeleton,s=t.bones;if(y.floatVertexTextures)return 1024;var l=y.maxVertexUniforms,r=C((l-20)/4),a=N(r,s.length);return a<s.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+s.length+" bones. This GPU supports "+a+"."),0):a}function n(r,t){var a;return r?r.isTexture?a=r.encoding:r.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),a=r.texture.encoding):a=os,a===os&&t&&(a=cs),a}var d=[],r={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},o=["precision","supportsVertexTextures","map","mapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(t,o,a,s,M,x,E){var u=r[t.type],v=E.isSkinnedMesh?i(E):0,A=y.precision;null!==t.precision&&(A=y.getMaxPrecision(t.precision))!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",A,"instead.");var T=g.getRenderTarget();return{shaderID:u,precision:A,supportsVertexTextures:y.vertexTextures,outputEncoding:n(T?T.texture:null,g.gammaOutput),map:!!t.map,mapEncoding:n(t.map,g.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:n(t.envMap,g.gammaInput),envMapCubeUV:!!t.envMap&&(t.envMap.mapping===ac||t.envMap.mapping===oc),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:n(t.emissiveMap,g.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:y.logarithmicDepthBuffer,skinning:t.skinning&&0<v,maxBones:v,useVertexTexture:y.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:g.maxMorphTargets,maxMorphNormals:g.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numClippingPlanes:M,numClipIntersection:x,dithering:t.dithering,shadowMapEnabled:g.shadowMap.enabled&&E.receiveShadow&&0<a.length,shadowMapType:g.shadowMap.type,toneMapping:g.toneMapping,physicallyCorrectLights:g.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:t.side===Hd,flipSided:t.side===ba,depthPacking:void 0!==t.depthPacking&&t.depthPacking}},this.getProgramCode=function(t,s){var i=[];if(s.shaderID?i.push(s.shaderID):(i.push(t.fragmentShader),i.push(t.vertexShader)),void 0!==t.defines)for(var n in t.defines)i.push(n),i.push(t.defines[n]);for(var r=0;r<o.length;r++)i.push(s[o[r]]);return i.push(t.onBeforeCompile.toString()),i.push(g.gammaOutput),i.join()},this.acquireProgram=function(a,i,n,r){for(var o=0,c=d.length,p,s;o<c;o++)if(s=d[o],s.code===r){p=s,++p.usedTimes;break}return void 0===p&&(p=new le(g,t,r,a,i,n),d.push(p)),p},this.releaseProgram=function(r){if(0==--r.usedTimes){var t=d.indexOf(r);d[t]=d[d.length-1],d.pop(),r.destroy()}},this.programs=d}function pe(A,t,D,S,I,j,i){function r(r,t){if(r.width>t||r.height>t){var a=t/L(r.width,r.height),o=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return o.width=C(r.width*a),o.height=C(r.height*a),(o.getContext("2d").drawImage(r,0,0,r.width,r.height,0,0,o.width,o.height),console.warn("THREE.WebGLRenderer: image is too big ("+r.width+"x"+r.height+"). Resized to "+o.width+"x"+o.height,r),o)}return r}function O(r){return Mc.isPowerOfTwo(r.width)&&Mc.isPowerOfTwo(r.height)}function a(r){if(r instanceof HTMLImageElement||r instanceof HTMLCanvasElement){var t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.width=Mc.nearestPowerOfTwo(r.width),t.height=Mc.nearestPowerOfTwo(r.height),(t.getContext("2d").drawImage(r,0,0,t.width,t.height),console.warn("THREE.WebGLRenderer: image is not power of two ("+r.width+"x"+r.height+"). Resized to "+t.width+"x"+t.height,r),t)}return r}function o(r){return r.wrapS!==nc||r.wrapT!==nc||r.minFilter!==lc&&r.minFilter!==pc}function c(r,t){return r.generateMipmaps&&t&&r.minFilter!==lc&&r.minFilter!==pc}function n(t){return t===lc||t===dc||t===cc?A.NEAREST:A.LINEAR}function s(r){var t=r.target;t.removeEventListener("dispose",s),l(t),i.textures--}function d(r){var t=r.target;t.removeEventListener("dispose",d),p(t),i.textures--}function l(t){var r=S.get(t);if(t.image&&r.__image__webglTextureCube)A.deleteTexture(r.__image__webglTextureCube);else{if(void 0===r.__webglInit)return;A.deleteTexture(r.__webglTexture)}S.remove(t)}function p(t){var o=S.get(t),i=S.get(t.texture);if(t){if(void 0!==i.__webglTexture&&A.deleteTexture(i.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(var r=0;6>r;r++)A.deleteFramebuffer(o.__webglFramebuffer[r]),o.__webglDepthbuffer&&A.deleteRenderbuffer(o.__webglDepthbuffer[r]);else A.deleteFramebuffer(o.__webglFramebuffer),o.__webglDepthbuffer&&A.deleteRenderbuffer(o.__webglDepthbuffer);S.remove(t.texture),S.remove(t)}}function u(t,i){var r=S.get(t);if(0<t.version&&r.__version!==t.version){var a=t.image;if(void 0===a)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==a.complete)return void g(r,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}}D.activeTexture(A.TEXTURE0+i),D.bindTexture(A.TEXTURE_2D,r.__webglTexture)}function m(t,a){var o=S.get(t);if(6===t.image.length)if(0<t.version&&o.__version!==t.version){o.__image__webglTextureCube||(t.addEventListener("dispose",s),o.__image__webglTextureCube=A.createTexture(),i.textures++),D.activeTexture(A.TEXTURE0+a),D.bindTexture(A.TEXTURE_CUBE_MAP,o.__image__webglTextureCube),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,t.flipY);for(var n=t&&t.isCompressedTexture,l=t.image[0]&&t.image[0].isDataTexture,d=[],p=0;6>p;p++)d[p]=n||l?l?t.image[p].image:t.image[p]:r(t.image[p],I.maxCubemapSize);var u=d[0],m=O(u),g=j.convert(t.format),h=j.convert(t.type);z(A.TEXTURE_CUBE_MAP,t,m);for(var p=0;6>p;p++)if(n)for(var f=d[p].mipmaps,M=0,x=f.length,E;M<x;M++)E=f[M],t.format!==hc&&t.format!==zo?-1<D.getCompressedTextureFormats().indexOf(g)?D.compressedTexImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+p,M,g,E.width,E.height,0,E.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):D.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+p,M,g,E.width,E.height,0,g,h,E.data);else l?D.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,g,d[p].width,d[p].height,0,g,h,d[p].data):D.texImage2D(A.TEXTURE_CUBE_MAP_POSITIVE_X+p,0,g,g,h,d[p]);c(t,m)&&A.generateMipmap(A.TEXTURE_CUBE_MAP),o.__version=t.version,t.onUpdate&&t.onUpdate(t)}else D.activeTexture(A.TEXTURE0+a),D.bindTexture(A.TEXTURE_CUBE_MAP,o.__image__webglTextureCube)}function z(r,a,o){var i;if(o?(A.texParameteri(r,A.TEXTURE_WRAP_S,j.convert(a.wrapS)),A.texParameteri(r,A.TEXTURE_WRAP_T,j.convert(a.wrapT)),A.texParameteri(r,A.TEXTURE_MAG_FILTER,j.convert(a.magFilter)),A.texParameteri(r,A.TEXTURE_MIN_FILTER,j.convert(a.minFilter))):(A.texParameteri(r,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(r,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),a.wrapS===nc&&a.wrapT===nc||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),A.texParameteri(r,A.TEXTURE_MAG_FILTER,n(a.magFilter)),A.texParameteri(r,A.TEXTURE_MIN_FILTER,n(a.minFilter)),a.minFilter!==lc&&a.minFilter!==pc&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),i=t.get("EXT_texture_filter_anisotropic")){if(a.type===Io&&null===t.get("OES_texture_float_linear"))return;if(a.type===Uo&&null===t.get("OES_texture_half_float_linear"))return;(1<a.anisotropy||S.get(a).__currentAnisotropy)&&(A.texParameterf(r,i.TEXTURE_MAX_ANISOTROPY_EXT,N(a.anisotropy,I.getMaxAnisotropy())),S.get(a).__currentAnisotropy=a.anisotropy)}}function g(t,l,n){void 0===t.__webglInit&&(t.__webglInit=!0,l.addEventListener("dispose",s),t.__webglTexture=A.createTexture(),i.textures++),D.activeTexture(A.TEXTURE0+n),D.bindTexture(A.TEXTURE_2D,t.__webglTexture),A.pixelStorei(A.UNPACK_FLIP_Y_WEBGL,l.flipY),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l.premultiplyAlpha),A.pixelStorei(A.UNPACK_ALIGNMENT,l.unpackAlignment);var d=r(l.image,I.maxTextureSize);o(l)&&!1===O(d)&&(d=a(d));var p=O(d),u=j.convert(l.format),m=j.convert(l.type);z(A.TEXTURE_2D,l,p);var g=l.mipmaps,h;if(l.isDepthTexture){var y=A.DEPTH_COMPONENT;if(l.type===Io){if(!x)throw new Error("Float Depth Texture only supported in WebGL2.0");y=A.DEPTH_COMPONENT32F}else x&&(y=A.DEPTH_COMPONENT16);l.format===ko&&y===A.DEPTH_COMPONENT&&l.type!==Lo&&l.type!==Co&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),l.type=Lo,m=j.convert(l.type)),l.format===Wo&&(y=A.DEPTH_STENCIL,l.type!==Fo&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),l.type=Fo,m=j.convert(l.type))),D.texImage2D(A.TEXTURE_2D,0,y,d.width,d.height,0,u,m,null)}else if(l.isDataTexture){if(0<g.length&&p){for(var f=0,E=g.length;f<E;f++)h=g[f],D.texImage2D(A.TEXTURE_2D,f,u,h.width,h.height,0,u,m,h.data);l.generateMipmaps=!1}else D.texImage2D(A.TEXTURE_2D,0,u,d.width,d.height,0,u,m,d.data);}else if(l.isCompressedTexture)for(var f=0,E=g.length;f<E;f++)h=g[f],l.format!==hc&&l.format!==zo?-1<D.getCompressedTextureFormats().indexOf(u)?D.compressedTexImage2D(A.TEXTURE_2D,f,u,h.width,h.height,0,h.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):D.texImage2D(A.TEXTURE_2D,f,u,h.width,h.height,0,u,m,h.data);else if(0<g.length&&p){for(var f=0,E=g.length;f<E;f++)h=g[f],D.texImage2D(A.TEXTURE_2D,f,u,u,m,h);l.generateMipmaps=!1}else D.texImage2D(A.TEXTURE_2D,0,u,u,m,d);c(l,p)&&A.generateMipmap(A.TEXTURE_2D),t.__version=l.version,l.onUpdate&&l.onUpdate(l)}function y(t,a,r,o){var i=j.convert(a.texture.format),n=j.convert(a.texture.type);D.texImage2D(o,0,i,a.width,a.height,0,i,n,null),A.bindFramebuffer(A.FRAMEBUFFER,t),A.framebufferTexture2D(A.FRAMEBUFFER,r,o,S.get(a.texture).__webglTexture,0),A.bindFramebuffer(A.FRAMEBUFFER,null)}function h(t,r){A.bindRenderbuffer(A.RENDERBUFFER,t),r.depthBuffer&&!r.stencilBuffer?(A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,r.width,r.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.RENDERBUFFER,t)):r.depthBuffer&&r.stencilBuffer?(A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,r.width,r.height),A.framebufferRenderbuffer(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.RENDERBUFFER,t)):A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,r.width,r.height),A.bindRenderbuffer(A.RENDERBUFFER,null)}function f(t,a){if(a&&a.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(A.bindFramebuffer(A.FRAMEBUFFER,t),!a.depthTexture||!a.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");S.get(a.depthTexture).__webglTexture&&a.depthTexture.image.width===a.width&&a.depthTexture.image.height===a.height||(a.depthTexture.image.width=a.width,a.depthTexture.image.height=a.height,a.depthTexture.needsUpdate=!0),u(a.depthTexture,0);var o=S.get(a.depthTexture).__webglTexture;if(a.depthTexture.format===ko)A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_ATTACHMENT,A.TEXTURE_2D,o,0);else{if(a.depthTexture.format!==Wo)throw new Error("Unknown depthTexture format");A.framebufferTexture2D(A.FRAMEBUFFER,A.DEPTH_STENCIL_ATTACHMENT,A.TEXTURE_2D,o,0)}}function M(t){var o=S.get(t),i=!0===t.isWebGLRenderTargetCube;if(t.depthTexture){if(i)throw new Error("target.depthTexture not supported in Cube render targets");f(o.__webglFramebuffer,t)}else if(i){o.__webglDepthbuffer=[];for(var r=0;6>r;r++)A.bindFramebuffer(A.FRAMEBUFFER,o.__webglFramebuffer[r]),o.__webglDepthbuffer[r]=A.createRenderbuffer(),h(o.__webglDepthbuffer[r],t)}else A.bindFramebuffer(A.FRAMEBUFFER,o.__webglFramebuffer),o.__webglDepthbuffer=A.createRenderbuffer(),h(o.__webglDepthbuffer,t);A.bindFramebuffer(A.FRAMEBUFFER,null)}var x="undefined"!=typeof WebGL2RenderingContext&&A instanceof WebGL2RenderingContext;this.setTexture2D=u,this.setTextureCube=m,this.setTextureCubeDynamic=function(t,a){D.activeTexture(A.TEXTURE0+a),D.bindTexture(A.TEXTURE_CUBE_MAP,S.get(t).__webglTexture)},this.setupRenderTarget=function(t){var o=S.get(t),r=S.get(t.texture);t.addEventListener("dispose",d),r.__webglTexture=A.createTexture(),i.textures++;var a=!0===t.isWebGLRenderTargetCube,n=O(t);if(a){o.__webglFramebuffer=[];for(var s=0;6>s;s++)o.__webglFramebuffer[s]=A.createFramebuffer()}else o.__webglFramebuffer=A.createFramebuffer();if(a){D.bindTexture(A.TEXTURE_CUBE_MAP,r.__webglTexture),z(A.TEXTURE_CUBE_MAP,t.texture,n);for(var s=0;6>s;s++)y(o.__webglFramebuffer[s],t,A.COLOR_ATTACHMENT0,A.TEXTURE_CUBE_MAP_POSITIVE_X+s);c(t.texture,n)&&A.generateMipmap(A.TEXTURE_CUBE_MAP),D.bindTexture(A.TEXTURE_CUBE_MAP,null)}else D.bindTexture(A.TEXTURE_2D,r.__webglTexture),z(A.TEXTURE_2D,t.texture,n),y(o.__webglFramebuffer,t,A.COLOR_ATTACHMENT0,A.TEXTURE_2D),c(t.texture,n)&&A.generateMipmap(A.TEXTURE_2D),D.bindTexture(A.TEXTURE_2D,null);t.depthBuffer&&M(t)},this.updateRenderTargetMipmap=function(t){var i=t.texture;if(c(i,O(t))){var r=t.isWebGLRenderTargetCube?A.TEXTURE_CUBE_MAP:A.TEXTURE_2D,a=S.get(i).__webglTexture;D.bindTexture(r,a),A.generateMipmap(r),D.bindTexture(r,null)}}}function de(){function r(r){var o=r.uuid,n=a[o];return void 0===n&&(n={},a[o]=n),n}var a={};return{get:r,remove:function(r){delete a[r.uuid]},clear:function(){a={}}}}function fe(l,t,u){function r(){var r=!1,t=new Fr,o=null,i=new Fr(0,0,0,0);return{setMask:function(t){o===t||r||(l.colorMask(t,t,t,t),o=t)},setLocked:function(a){r=a},setClear:function(a,d,n,r,o){!0===o&&(a*=r,d*=r,n*=r),t.set(a,d,n,r),!1===i.equals(t)&&(l.clearColor(a,d,n,r),i.copy(t))},reset:function(){r=!1,o=null,i.set(-1,0,0,0)}}}function a(){var d=!1,t=null,p=null,n=null,r=null,a=null,u=null,s=null,i=null;return{setTest:function(t){t?m(l.STENCIL_TEST):f(l.STENCIL_TEST)},setMask:function(r){t===r||d||(l.stencilMask(r),t=r)},setFunc:function(t,a,i){p===t&&n===a&&r===i||(l.stencilFunc(t,a,i),p=t,n=a,r=i)},setOp:function(t,r,o){a===t&&u===r&&s===o||(l.stencilOp(t,r,o),a=t,u=r,s=o)},setLocked:function(r){d=r},setClear:function(t){i!==t&&(l.clearStencil(t),i=t)},reset:function(){d=!1,t=null,p=null,n=null,r=null,a=null,u=null,s=null,i=null}}}function o(t,s,i){var n=new Uint8Array(4),r=l.createTexture();l.bindTexture(t,r),l.texParameteri(t,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(t,l.TEXTURE_MAG_FILTER,l.NEAREST);for(var a=0;a<i;a++)l.texImage2D(s+a,0,l.RGBA,1,1,0,l.RGBA,l.UNSIGNED_BYTE,n);return r}function m(t){!0!==N[t]&&(l.enable(t),N[t]=!0)}function f(t){!1!==N[t]&&(l.disable(t),N[t]=!1)}function i(t,i,n,r,a,o,s,d){(t===Yd?f(l.BLEND):m(l.BLEND),t!==Kd)?((t!==O||d!==F)&&(t===Xd?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE,l.ONE,l.ONE)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.SRC_ALPHA,l.ONE)):t===qd?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ZERO,l.ZERO,l.ONE_MINUS_SRC_COLOR,l.ONE_MINUS_SRC_ALPHA)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.ONE_MINUS_SRC_COLOR)):t===Zd?d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ZERO,l.SRC_COLOR,l.ZERO,l.SRC_ALPHA)):(l.blendEquation(l.FUNC_ADD),l.blendFunc(l.ZERO,l.SRC_COLOR)):d?(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.ONE,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA)):(l.blendEquationSeparate(l.FUNC_ADD,l.FUNC_ADD),l.blendFuncSeparate(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA,l.ONE,l.ONE_MINUS_SRC_ALPHA))),z=null,R=null,U=null,B=null,j=null,k=null):(a=a||i,o=o||n,s=s||r,i===z&&a===B||(l.blendEquationSeparate(u.convert(i),u.convert(a)),z=i,B=a),n===R&&r===U&&o===j&&s===k||(l.blendFuncSeparate(u.convert(n),u.convert(r),u.convert(o),u.convert(s)),R=n,U=r,j=o,k=s));O=t,F=d}function n(t){G!==t&&(t?l.frontFace(l.CW):l.frontFace(l.CCW),G=t)}function s(t){t===pa?f(l.CULL_FACE):(m(l.CULL_FACE),t!==V&&(t===fa?l.cullFace(l.BACK):t===ma?l.cullFace(l.FRONT):l.cullFace(l.FRONT_AND_BACK))),V=t}function c(t,r,a){t?(m(l.POLYGON_OFFSET_FILL),Y===r&&Q===a||(l.polygonOffset(r,a),Y=r,Q=a)):f(l.POLYGON_OFFSET_FILL)}function h(t){void 0===t&&(t=l.TEXTURE0+W-1),Z!==t&&(l.activeTexture(t),Z=t)}var E=new r,v=new function(){var a=!1,t=null,o=null,i=null;return{setTest:function(t){t?m(l.DEPTH_TEST):f(l.DEPTH_TEST)},setMask:function(r){t===r||a||(l.depthMask(r),t=r)},setFunc:function(t){o!==t&&(t?t===qa?l.depthFunc(l.NEVER):t===Ya?l.depthFunc(l.ALWAYS):t===Za?l.depthFunc(l.LESS):t===Ja?l.depthFunc(l.LEQUAL):t===Qa?l.depthFunc(l.EQUAL):t===Ka?l.depthFunc(l.GEQUAL):t===$a?l.depthFunc(l.GREATER):t===to?l.depthFunc(l.NOTEQUAL):l.depthFunc(l.LEQUAL):l.depthFunc(l.LEQUAL),o=t)},setLocked:function(r){a=r},setClear:function(t){i!==t&&(l.clearDepth(t),i=t)},reset:function(){a=!1,t=null,o=null,i=null}}},A=new a,T=l.getParameter(l.MAX_VERTEX_ATTRIBS),b=new Uint8Array(T),L=new Uint8Array(T),D=new Uint8Array(T),N={},w=null,S=null,O=null,z=null,R=null,U=null,B=null,j=null,k=null,F=!1,G=null,V=null,H=null,Y=null,Q=null,W=l.getParameter(l.MAX_COMBINED_TEXTURE_IMAGE_UNITS),X=parseFloat(/^WebGL\ ([0-9])/.exec(l.getParameter(l.VERSION))[1]),q=1<=parseFloat(X),Z=null,K={},J=new Fr,$=new Fr,ee={};return ee[l.TEXTURE_2D]=o(l.TEXTURE_2D,l.TEXTURE_2D,1),ee[l.TEXTURE_CUBE_MAP]=o(l.TEXTURE_CUBE_MAP,l.TEXTURE_CUBE_MAP_POSITIVE_X,6),E.setClear(0,0,0,1),v.setClear(1),A.setClear(0),m(l.DEPTH_TEST),v.setFunc(Ja),n(!1),s(fa),m(l.CULL_FACE),m(l.BLEND),i(Wd),{buffers:{color:E,depth:v,stencil:A},initAttributes:function(){for(var r=0,t=b.length;r<t;r++)b[r]=0},enableAttribute:function(r){(b[r]=1,0===L[r]&&(l.enableVertexAttribArray(r),L[r]=1),0!==D[r])&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,0),D[r]=0)},enableAttributeAndDivisor:function(r,a){(b[r]=1,0===L[r]&&(l.enableVertexAttribArray(r),L[r]=1),D[r]!==a)&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(r,a),D[r]=a)},disableUnusedAttributes:function(){for(var t=0,r=L.length;t!==r;++t)L[t]!==b[t]&&(l.disableVertexAttribArray(t),L[t]=0)},enable:m,disable:f,getCompressedTextureFormats:function(){if(null===w&&(w=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")))for(var r=l.getParameter(l.COMPRESSED_TEXTURE_FORMATS),a=0;a<r.length;a++)w.push(r[a]);return w},useProgram:function(t){return S!==t&&(l.useProgram(t),S=t,!0)},setBlending:i,setMaterial:function(t){t.side===Hd?f(l.CULL_FACE):m(l.CULL_FACE),n(t.side===ba),!0===t.transparent?i(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):i(Yd),v.setFunc(t.depthFunc),v.setTest(t.depthTest),v.setMask(t.depthWrite),E.setMask(t.colorWrite),c(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:n,setCullFace:s,setLineWidth:function(t){t!==H&&(q&&l.lineWidth(t),H=t)},setPolygonOffset:c,setScissorTest:function(t){t?m(l.SCISSOR_TEST):f(l.SCISSOR_TEST)},activeTexture:h,bindTexture:function(t,r){null===Z&&h();var a=K[Z];void 0===a&&(a={type:void 0,texture:void 0},K[Z]=a),a.type===t&&a.texture===r||(l.bindTexture(t,r||ee[t]),a.type=t,a.texture=r)},compressedTexImage2D:function(){try{l.compressedTexImage2D.apply(l,arguments)}catch(r){console.error("THREE.WebGLState:",r)}},texImage2D:function(){try{l.texImage2D.apply(l,arguments)}catch(r){console.error("THREE.WebGLState:",r)}},scissor:function(t){!1===J.equals(t)&&(l.scissor(t.x,t.y,t.z,t.w),J.copy(t))},viewport:function(t){!1===$.equals(t)&&(l.viewport(t.x,t.y,t.z,t.w),$.copy(t))},reset:function(){for(var t=0;t<L.length;t++)1===L[t]&&(l.disableVertexAttribArray(t),L[t]=0);N={},w=null,Z=null,K={},S=null,O=null,G=null,V=null,E.reset(),v.reset(),A.reset()}}}function me(n,t,M){function i(t){if("highp"===t){if(0<n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision&&0<n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision&&0<n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision?"mediump":"lowp"}var x=void 0===M.precision?"highp":M.precision,E=i(x),s;E!==x&&(console.warn("THREE.WebGLRenderer:",x,"not supported, using",E,"instead."),x=E);var a=!0===M.logarithmicDepthBuffer&&!!t.get("EXT_frag_depth"),A=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),T=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),L=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),D=n.getParameter(n.MAX_VERTEX_ATTRIBS),N=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),w=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),S=0<T,I=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==s)return s;var r=t.get("EXT_texture_filter_anisotropic");return s=null===r?0:n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT)},getMaxPrecision:i,precision:x,logarithmicDepthBuffer:a,maxTextures:A,maxVertexTextures:T,maxTextureSize:b,maxCubemapSize:L,maxAttributes:D,maxVertexUniforms:N,maxVaryings:w,maxFragmentUniforms:C,vertexTextures:S,floatFragmentTextures:I,floatVertexTextures:S&&I}}function ge(r){ca.call(this),this.cameras=r||[]}function nl(m){function t(){if(null!==y&&y.isPresenting){var t=y.getEyeParameters("left"),o=t.renderWidth,r=t.renderHeight;d=m.getPixelRatio(),i=m.getSize(),m.setDrawingBufferSize(2*o,r,1)}else g.enabled&&m.setDrawingBufferSize(i.width,i.height,d)}var g=this,y=null,n=null;"VRFrameData"in window&&(n=new window.VRFrameData);var a=new Yr,o=new Yr,s=new Yr,c=new ca;c.bounds=new Fr(0,0,.5,1),c.layers.enable(1);var l=new ca;l.bounds=new Fr(.5,0,.5,1),l.layers.enable(2);var u=new ge([c,l]);u.layers.enable(1),u.layers.enable(2);var i,d;window.addEventListener("vrdisplaypresentchange",t,!1),this.enabled=!1,this.standing=!1,this.getDevice=function(){return y},this.setDevice=function(r){void 0!==r&&(y=r)},this.getCamera=function(p){if(null===y)return p;y.depthNear=p.near,y.depthFar=p.far,y.getFrameData(n);var t=n.pose;null===t.position?p.position.set(0,0,0):p.position.fromArray(t.position),null!==t.orientation&&p.quaternion.fromArray(t.orientation),p.updateMatrixWorld();var m=y.stageParameters;if(this.standing&&m&&(o.fromArray(m.sittingToStandingTransform),s.getInverse(o),p.matrixWorld.multiply(o),p.matrixWorldInverse.multiply(s)),!1===y.isPresenting)return p;c.near=p.near,l.near=p.near,c.far=p.far,l.far=p.far,u.matrixWorld.copy(p.matrixWorld),u.matrixWorldInverse.copy(p.matrixWorldInverse),c.matrixWorldInverse.fromArray(n.leftViewMatrix),l.matrixWorldInverse.fromArray(n.rightViewMatrix),this.standing&&m&&(c.matrixWorldInverse.multiply(s),l.matrixWorldInverse.multiply(s));var i=p.parent;null!==i&&(a.getInverse(i.matrixWorld),c.matrixWorldInverse.multiply(a),l.matrixWorldInverse.multiply(a)),c.matrixWorld.getInverse(c.matrixWorldInverse),l.matrixWorld.getInverse(l.matrixWorldInverse),c.projectionMatrix.fromArray(n.leftProjectionMatrix),l.projectionMatrix.fromArray(n.rightProjectionMatrix),u.projectionMatrix.copy(c.projectionMatrix);var r=y.getLayers();if(r.length){var g=r[0];null!==g.leftBounds&&4===g.leftBounds.length&&c.bounds.fromArray(g.leftBounds),null!==g.rightBounds&&4===g.rightBounds.length&&l.bounds.fromArray(g.rightBounds)}return u},this.getStandingMatrix=function(){return o},this.submitFrame=function(){y&&y.isPresenting&&y.submitFrame()},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",t)}}function ye(r){var t={};return{get:function(a){if(void 0!==t[a])return t[a];var o;return o="WEBGL_depth_texture"===a?r.getExtension("WEBGL_depth_texture")||r.getExtension("MOZ_WEBGL_depth_texture")||r.getExtension("WEBKIT_WEBGL_depth_texture"):"EXT_texture_filter_anisotropic"===a?r.getExtension("EXT_texture_filter_anisotropic")||r.getExtension("MOZ_EXT_texture_filter_anisotropic")||r.getExtension("WEBKIT_EXT_texture_filter_anisotropic"):"WEBGL_compressed_texture_s3tc"===a?r.getExtension("WEBGL_compressed_texture_s3tc")||r.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc"):"WEBGL_compressed_texture_pvrtc"===a?r.getExtension("WEBGL_compressed_texture_pvrtc")||r.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"):"WEBGL_compressed_texture_etc1"===a?r.getExtension("WEBGL_compressed_texture_etc1"):r.getExtension(a),null===o&&console.warn("THREE.WebGLRenderer: "+a+" extension not supported."),t[a]=o,o}}}function xe(){function y(){c.value!==l&&(c.value=l,c.needsUpdate=0<n),m.numPlanes=n,m.numIntersection=0}function M(g,t,h,n){var r=null===g?0:g.length,a=null;if(0!==r){if(a=c.value,!0!==n||null===a){var o=h+4*r,l=t.matrixWorldInverse;s.getNormalMatrix(l),(null===a||a.length<o)&&(a=new Float32Array(o));for(var u=0,p=h;u!==r;++u,p+=4)i.copy(g[u]).applyMatrix4(l,s),i.normal.toArray(a,p),a[p+3]=i.constant}c.value=a,c.needsUpdate=!0}return m.numPlanes=r,a}var m=this,l=null,n=0,r=!1,t=!1,i=new nt,s=new it,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(a,t,i){var o=0!==a.length||t||0!==n||r;return r=t,l=M(a,i,0),n=a.length,o},this.beginShadows=function(){t=!0,M(null)},this.endShadows=function(){t=!1,y()},this.setState=function(o,i,s,h,x,u){if(!r||null===o||0===o.length||t&&!s)t?M(null):y();else{var p=t?0:n,d=4*p,f=x.clippingState||null;c.value=f,f=M(o,h,d,u);for(var m=0;m!==d;++m)f[m]=l[m];x.clippingState=f,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=p}}}function be(r,t){function a(a){var o;if(a===ic)return r.REPEAT;if(a===nc)return r.CLAMP_TO_EDGE;if(a===sc)return r.MIRRORED_REPEAT;if(a===lc)return r.NEAREST;if(a===dc)return r.NEAREST_MIPMAP_NEAREST;if(a===cc)return r.NEAREST_MIPMAP_LINEAR;if(a===pc)return r.LINEAR;if(a===uc)return r.LINEAR_MIPMAP_NEAREST;if(a===mc)return r.LINEAR_MIPMAP_LINEAR;if(a===gc)return r.UNSIGNED_BYTE;if(a===No)return r.UNSIGNED_SHORT_4_4_4_4;if(a===Do)return r.UNSIGNED_SHORT_5_5_5_1;if(a===Oo)return r.UNSIGNED_SHORT_5_6_5;if(a===Ao)return r.BYTE;if(a===Ro)return r.SHORT;if(a===Lo)return r.UNSIGNED_SHORT;if(a===Po)return r.INT;if(a===Co)return r.UNSIGNED_INT;if(a===Io)return r.FLOAT;if(a===Uo&&null!==(o=t.get("OES_texture_half_float")))return o.HALF_FLOAT_OES;if(a===Bo)return r.ALPHA;if(a===zo)return r.RGB;if(a===hc)return r.RGBA;if(a===yc)return r.LUMINANCE;if(a===Vo)return r.LUMINANCE_ALPHA;if(a===ko)return r.DEPTH_COMPONENT;if(a===Wo)return r.DEPTH_STENCIL;if(a===Jd)return r.FUNC_ADD;if(a===Ia)return r.FUNC_SUBTRACT;if(a===Ua)return r.FUNC_REVERSE_SUBTRACT;if(a===Oa)return r.ZERO;if(a===Fa)return r.ONE;if(a===Ba)return r.SRC_COLOR;if(a===za)return r.ONE_MINUS_SRC_COLOR;if(a===Ga)return r.SRC_ALPHA;if(a===Ha)return r.ONE_MINUS_SRC_ALPHA;if(a===Va)return r.DST_ALPHA;if(a===ka)return r.ONE_MINUS_DST_ALPHA;if(a===ja)return r.DST_COLOR;if(a===Wa)return r.ONE_MINUS_DST_COLOR;if(a===Xa)return r.SRC_ALPHA_SATURATE;if((a===Xo||a===qo||a===Yo||a===Zo)&&null!==(o=t.get("WEBGL_compressed_texture_s3tc"))){if(a===Xo)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(a===qo)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(a===Yo)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(a===Zo)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((a===Jo||a===Qo||a===Ko||a===$o)&&null!==(o=t.get("WEBGL_compressed_texture_pvrtc"))){if(a===Jo)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(a===Qo)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(a===Ko)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(a===$o)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(a===ts&&null!==(o=t.get("WEBGL_compressed_texture_etc1")))return o.COMPRESSED_RGB_ETC1_WEBGL;if((a===Na||a===Da)&&null!==(o=t.get("EXT_blend_minmax"))){if(a===Na)return o.MIN_EXT;if(a===Da)return o.MAX_EXT}return a===Fo&&null!==(o=t.get("WEBGL_depth_texture"))?o.UNSIGNED_INT_24_8_WEBGL:0}return{convert:a}}function _e(l){function t(){return null===Ae?ze:1}function c(){qe=new ye(We),qe.get("WEBGL_depth_texture"),qe.get("OES_texture_float"),qe.get("OES_texture_float_linear"),qe.get("OES_texture_half_float"),qe.get("OES_texture_half_float_linear"),qe.get("OES_standard_derivatives"),qe.get("ANGLE_instanced_arrays"),qe.get("OES_element_index_uint")&&(Rt.MaxIndex=4294967296),te=new be(We,qe),Ze=new me(We,qe,l),Ke=new fe(We,qe,te),Ke.scissor(Se.copy(Ue).multiplyScalar(ze)),Ke.viewport(Ce.copy(Re).multiplyScalar(ze)),Je=new de,$e=new pe(We,qe,Ke,Je,Ze,te,Qe),et=new rt(We),tt=new qt(We,et,Qe),ot=new Jt(tt,Ye),ct=new il(We),nt=new ue(Q,qe,Ze),it=new Yt,st=new ol,lt=new al(Q,Ke,tt,ce),pt=new Xt(We,qe,Ye),ut=new Wt(We,qe,Ye),mt=new q(Q,We,Ke,$e,Ze),gt=new Z(Q,We,Ke,$e,Ze),Q.info.programs=nt.programs,Q.context=We,Q.capabilities=Ze,Q.extensions=qe,Q.properties=Je,Q.renderLists=st,Q.state=Ke}function i(r){r.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),K=!0}function n(){console.log("THREE.WebGLRenderer: Context Restored."),K=!1,c()}function D(r){var t=r.target;t.removeEventListener("dispose",D),a(t)}function a(r){o(r),Je.remove(r)}function o(r){var t=Je.get(r).program;r.program=void 0,void 0!==t&&nt.releaseProgram(t)}function u(r,a,o){r.render(function(r){Q.renderBufferImmediate(r,a,o)})}function Y(M,t,E,i){if(E&&E.isInstancedBufferGeometry&&null===qe.get("ANGLE_instanced_arrays"))return void console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");void 0===i&&(i=0),Ke.initAttributes();var n=E.attributes,r=t.getAttributes(),a=M.defaultAttributeValues;for(var o in r){var s=r[o];if(0<=s){var c=n[o];if(void 0!==c){var h=c.normalized,l=c.itemSize,u=et.get(c);if(void 0===u)continue;var p=u.buffer,A=u.type,f=u.bytesPerElement;if(c.isInterleavedBufferAttribute){var m=c.data,g=m.stride,v=c.offset;m&&m.isInstancedInterleavedBuffer?(Ke.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===E.maxInstancedCount&&(E.maxInstancedCount=m.meshPerAttribute*m.count)):Ke.enableAttribute(s),We.bindBuffer(We.ARRAY_BUFFER,p),We.vertexAttribPointer(s,l,A,h,g*f,(i*g+v)*f)}else c.isInstancedBufferAttribute?(Ke.enableAttributeAndDivisor(s,c.meshPerAttribute),void 0===E.maxInstancedCount&&(E.maxInstancedCount=c.meshPerAttribute*c.count)):Ke.enableAttribute(s),We.bindBuffer(We.ARRAY_BUFFER,p),We.vertexAttribPointer(s,l,A,h,0,i*l*f)}else if(void 0!==a){var y=a[o];if(void 0!==y)switch(y.length){case 2:We.vertexAttrib2fv(s,y);break;case 3:We.vertexAttrib3fv(s,y);break;case 4:We.vertexAttrib4fv(s,y);break;default:We.vertexAttrib1fv(s,y);}}}}Ke.disableUnusedAttributes()}function d(){ne||((ee.getDevice()||window).requestAnimationFrame(p),ne=!0)}function p(r){null!==re&&re(r),(ee.getDevice()||window).requestAnimationFrame(p)}function h(d,t,p){if(d.visible){if(d.layers.test(t.layers))if(d.isLight)he.push(d),d.castShadow&&Me.push(d);else if(d.isSprite)d.frustumCulled&&!Be.intersectsSprite(d)||Ee.push(d);else if(d.isLensFlare)ve.push(d);else if(d.isImmediateRenderObject)p&&He.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Ve),X.push(d,null,d.material,He.z,null);else if((d.isMesh||d.isLine||d.isPoints)&&(d.isSkinnedMesh&&d.skeleton.update(),!d.frustumCulled||Be.intersectsObject(d))){p&&He.setFromMatrixPosition(d.matrixWorld).applyMatrix4(Ve);var i=ot.update(d),n=d.material;if(Array.isArray(n))for(var r=i.groups,a=0,o=r.length;a<o;a++){var s=r[a],c=n[s.materialIndex];c&&c.visible&&X.push(d,i,c,He.z,s)}else n.visible&&X.push(d,i,n,He.z,null)}for(var u=d.children,a=0,o=u.length;a<o;a++)h(u[a],t,p)}}function g(y,t,M,i){for(var n=0,r=y.length;n<r;n++){var a=y[n],o=a.object,s=a.geometry,c=void 0===i?a.material:i,h=a.group;if(M.isArrayCamera){we=M;for(var l=M.cameras,u=0,p=l.length,d;u<p;u++)if(d=l[u],o.layers.test(d.layers)){var f=d.bounds,m=f.x*je,g=f.y*Oe,E=f.z*je,x=f.w*Oe;Ke.viewport(Ce.set(m,g,E,x).multiplyScalar(ze)),W(o,t,d,s,c,h)}}else we=null,W(o,t,M,s,c,h)}}function W(s,t,l,i,n,r){if(s.onBeforeRender(Q,t,l,i,n,r),s.modelViewMatrix.multiplyMatrices(l.matrixWorldInverse,s.matrixWorld),s.normalMatrix.getNormalMatrix(s.modelViewMatrix),s.isImmediateRenderObject){Ke.setMaterial(n);var a=oe(l,t.fog,n,s);De="",u(s,a,n)}else Q.renderBufferDirect(l,t.fog,i,n,s,r);s.onAfterRender(Q,t,l,i,n,r)}function J(u,t,g){var i=Je.get(u),n=nt.getParameters(u,it.state,Me,t,ke.numPlanes,ke.numIntersection,g),r=nt.getProgramCode(u,n),a=i.program,s=!0;if(void 0===a)u.addEventListener("dispose",D);else if(a.code!==r)o(u);else{if(void 0!==n.shaderID)return;s=!1}if(s){if(n.shaderID){var c=Rs[n.shaderID];i.shader={name:u.type,uniforms:Ss.clone(c.uniforms),vertexShader:c.vertexShader,fragmentShader:c.fragmentShader}}else i.shader={name:u.type,uniforms:u.uniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader};u.onBeforeCompile(i.shader),a=nt.acquireProgram(u,i.shader,n,r),i.program=a,u.program=a}var h=a.getAttributes();if(u.morphTargets){u.numSupportedMorphTargets=0;for(var l=0;l<Q.maxMorphTargets;l++)0<=h["morphTarget"+l]&&u.numSupportedMorphTargets++}if(u.morphNormals){u.numSupportedMorphNormals=0;for(var l=0;l<Q.maxMorphNormals;l++)0<=h["morphNormal"+l]&&u.numSupportedMorphNormals++}var p=i.shader.uniforms;(u.isShaderMaterial||u.isRawShaderMaterial)&&!0!==u.clipping||(i.numClippingPlanes=ke.numPlanes,i.numIntersection=ke.numIntersection,p.clippingPlanes=ke.uniform),i.fog=t,i.lightsHash=it.state.hash,u.lights&&(p.ambientLightColor.value=it.state.ambient,p.directionalLights.value=it.state.directional,p.spotLights.value=it.state.spot,p.rectAreaLights.value=it.state.rectArea,p.pointLights.value=it.state.point,p.hemisphereLights.value=it.state.hemi,p.directionalShadowMap.value=it.state.directionalShadowMap,p.directionalShadowMatrix.value=it.state.directionalShadowMatrix,p.spotShadowMap.value=it.state.spotShadowMap,p.spotShadowMatrix.value=it.state.spotShadowMatrix,p.pointShadowMap.value=it.state.pointShadowMap,p.pointShadowMatrix.value=it.state.pointShadowMatrix);var d=i.program.getUniforms(),y=j.seqWithValue(d.seq,p);i.uniformsList=y}function oe(l,t,D,i){_e=0;var n=Je.get(D);if(Fe&&(Ge||l!==Ne)){var N=l===Ne&&D.id===Le;ke.setState(D.clippingPlanes,D.clipIntersection,D.clipShadows,l,n,N)}!1===D.needsUpdate&&(void 0===n.program?D.needsUpdate=!0:D.fog&&n.fog!==t?D.needsUpdate=!0:D.lights&&n.lightsHash!==it.state.hash?D.needsUpdate=!0:void 0===n.numClippingPlanes||n.numClippingPlanes===ke.numPlanes&&n.numIntersection===ke.numIntersection||(D.needsUpdate=!0)),D.needsUpdate&&(J(D,t,i),D.needsUpdate=!1);var a=!1,o=!1,O=!1,c=n.program,h=c.getUniforms(),u=n.shader.uniforms;if(Ke.useProgram(c.program)&&(a=!0,o=!0,O=!0),D.id!==Le&&(Le=D.id,o=!0),a||l!==Ne){if(h.setValue(We,"projectionMatrix",l.projectionMatrix),Ze.logarithmicDepthBuffer&&h.setValue(We,"logDepthBufFC",2/(m(l.far+1)/r)),Ne!==(we||l)&&(Ne=we||l,o=!0,O=!0),D.isShaderMaterial||D.isMeshPhongMaterial||D.isMeshStandardMaterial||D.envMap){var p=h.map.cameraPosition;void 0!==p&&p.setValue(We,He.setFromMatrixPosition(l.matrixWorld))}(D.isMeshPhongMaterial||D.isMeshLambertMaterial||D.isMeshBasicMaterial||D.isMeshStandardMaterial||D.isShaderMaterial||D.skinning)&&h.setValue(We,"viewMatrix",l.matrixWorldInverse)}if(D.skinning){h.setOptional(We,i,"bindMatrix"),h.setOptional(We,i,"bindMatrixInverse");var d=i.skeleton;if(d){var f=d.bones;if(Ze.floatVertexTextures){if(void 0===d.boneTexture){var z=S(4*f.length);z=Mc.nextPowerOfTwo(Gd(z)),z=L(z,4);var g=new Float32Array(4*(z*z));g.set(d.boneMatrices);var v=new s(g,z,z,hc,Io);d.boneMatrices=g,d.boneTexture=v,d.boneTextureSize=z}h.setValue(We,"boneTexture",d.boneTexture),h.setValue(We,"boneTextureSize",d.boneTextureSize)}else h.setOptional(We,d,"boneMatrices")}}return o&&(h.setValue(We,"toneMappingExposure",Q.toneMappingExposure),h.setValue(We,"toneMappingWhitePoint",Q.toneMappingWhitePoint),D.lights&&U(u,O),t&&D.fog&&E(u,t),D.isMeshBasicMaterial?x(u,D):D.isMeshLambertMaterial?(x(u,D),T(u,D)):D.isMeshPhongMaterial?(x(u,D),D.isMeshToonMaterial?A(u,D):_(u,D)):D.isMeshStandardMaterial?(x(u,D),D.isMeshPhysicalMaterial?se(u,D):R(u,D)):D.isMeshDepthMaterial?(x(u,D),P(u,D)):D.isMeshDistanceMaterial?(x(u,D),C(u,D)):D.isMeshNormalMaterial?(x(u,D),I(u,D)):D.isLineBasicMaterial?(b(u,D),D.isLineDashedMaterial&&w(u,D)):D.isPointsMaterial?M(u,D):D.isShadowMaterial&&(u.color.value=D.color,u.opacity.value=D.opacity),void 0!==u.ltcMat&&(u.ltcMat.value=Ts.LTC_MAT_TEXTURE),void 0!==u.ltcMag&&(u.ltcMag.value=Ts.LTC_MAG_TEXTURE),j.upload(We,n.uniformsList,u,Q)),h.setValue(We,"modelViewMatrix",i.modelViewMatrix),h.setValue(We,"normalMatrix",i.normalMatrix),h.setValue(We,"modelMatrix",i.matrixWorld),c}function x(a,t){a.opacity.value=t.opacity,t.color&&(a.diffuse.value=t.color),t.emissive&&a.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(a.map.value=t.map),t.alphaMap&&(a.alphaMap.value=t.alphaMap),t.specularMap&&(a.specularMap.value=t.specularMap),t.envMap&&(a.envMap.value=t.envMap,a.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,a.reflectivity.value=t.reflectivity,a.refractionRatio.value=t.refractionRatio),t.lightMap&&(a.lightMap.value=t.lightMap,a.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(a.aoMap.value=t.aoMap,a.aoMapIntensity.value=t.aoMapIntensity);var o;if(t.map?o=t.map:t.specularMap?o=t.specularMap:t.displacementMap?o=t.displacementMap:t.normalMap?o=t.normalMap:t.bumpMap?o=t.bumpMap:t.roughnessMap?o=t.roughnessMap:t.metalnessMap?o=t.metalnessMap:t.alphaMap?o=t.alphaMap:t.emissiveMap&&(o=t.emissiveMap),void 0!==o){o.isWebGLRenderTarget&&(o=o.texture);var i=o.offset,n=o.repeat;a.offsetRepeat.value.set(i.x,i.y,n.x,n.y)}}function b(r,t){r.diffuse.value=t.color,r.opacity.value=t.opacity}function w(r,t){r.dashSize.value=t.dashSize,r.totalSize.value=t.dashSize+t.gapSize,r.scale.value=t.scale}function M(r,t){if(r.diffuse.value=t.color,r.opacity.value=t.opacity,r.size.value=t.size*ze,r.scale.value=.5*Oe,r.map.value=t.map,null!==t.map){var a=t.map.offset,o=t.map.repeat;r.offsetRepeat.value.set(a.x,a.y,o.x,o.y)}}function E(r,t){r.fogColor.value=t.color,t.isFog?(r.fogNear.value=t.near,r.fogFar.value=t.far):t.isFogExp2&&(r.fogDensity.value=t.density)}function T(r,t){t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap)}function _(r,t){r.specular.value=t.specular,r.shininess.value=L(t.shininess,1e-4),t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap),t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function A(r,t){_(r,t),t.gradientMap&&(r.gradientMap.value=t.gradientMap)}function R(r,t){r.roughness.value=t.roughness,r.metalness.value=t.metalness,t.roughnessMap&&(r.roughnessMap.value=t.roughnessMap),t.metalnessMap&&(r.metalnessMap.value=t.metalnessMap),t.emissiveMap&&(r.emissiveMap.value=t.emissiveMap),t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias),t.envMap&&(r.envMapIntensity.value=t.envMapIntensity)}function se(r,t){r.clearCoat.value=t.clearCoat,r.clearCoatRoughness.value=t.clearCoatRoughness,R(r,t)}function P(r,t){t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function C(r,t){t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias),r.referencePosition.value.copy(t.referencePosition),r.nearDistance.value=t.nearDistance,r.farDistance.value=t.farDistance}function I(r,t){t.bumpMap&&(r.bumpMap.value=t.bumpMap,r.bumpScale.value=t.bumpScale),t.normalMap&&(r.normalMap.value=t.normalMap,r.normalScale.value.copy(t.normalScale)),t.displacementMap&&(r.displacementMap.value=t.displacementMap,r.displacementScale.value=t.displacementScale,r.displacementBias.value=t.displacementBias)}function U(r,t){r.ambientLightColor.needsUpdate=t,r.directionalLights.needsUpdate=t,r.pointLights.needsUpdate=t,r.spotLights.needsUpdate=t,r.rectAreaLights.needsUpdate=t,r.hemisphereLights.needsUpdate=t}console.log("THREE.WebGLRenderer",Vd),l=l||{};var y=void 0===l.canvas?document.createElementNS("http://www.w3.org/1999/xhtml","canvas"):l.canvas,f=void 0===l.context?null:l.context,v=void 0!==l.alpha&&l.alpha,O=void 0===l.depth||l.depth,F=void 0===l.stencil||l.stencil,le=void 0!==l.antialias&&l.antialias,ce=void 0===l.premultipliedAlpha||l.premultipliedAlpha,ge=void 0!==l.preserveDrawingBuffer&&l.preserveDrawingBuffer,he=[],Me=[],X=null,Ee=[],ve=[];this.domElement=y,this.context=null,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=ao,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var Q=this,K=!1,Ae=null,Te=null,Le=-1,De="",Ne=null,we=null,Ce=new Fr,Se=new Fr,Ie=null,_e=0,je=y.width,Oe=y.height,ze=1,Re=new Fr(0,0,je,Oe),Ue=new Fr(0,0,je,Oe),Pe=!1,Be=new da,ke=new xe,Fe=!1,Ge=!1,Ve=new Yr,He=new Qr,Qe={geometries:0,textures:0},Ye={frame:0,calls:0,vertices:0,faces:0,points:0};this.info={render:Ye,memory:Qe,programs:null};var We;try{var Xe={alpha:v,depth:O,stencil:F,antialias:le,premultipliedAlpha:ce,preserveDrawingBuffer:ge};if(null===(We=f||y.getContext("webgl",Xe)||y.getContext("experimental-webgl",Xe)))throw null===y.getContext("webgl")?"Error creating WebGL context.":"Error creating WebGL context with your selected attributes.";void 0===We.getShaderPrecisionFormat&&(We.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}}),y.addEventListener("webglcontextlost",i,!1),y.addEventListener("webglcontextrestored",n,!1)}catch(r){console.error("THREE.WebGLRenderer: "+r)}var qe,Ze,Ke,Je,$e,et,tt,ot,it,nt,st,lt,ct,pt,ut,mt,gt,te;c();var ee=new nl(Q);this.vr=ee;var ie=new at(Q,ot,Ze.maxTextureSize);this.shadowMap=ie,this.getContext=function(){return We},this.getContextAttributes=function(){return We.getContextAttributes()},this.forceContextLoss=function(){var r=qe.get("WEBGL_lose_context");r&&r.loseContext()},this.forceContextRestore=function(){var r=qe.get("WEBGL_lose_context");r&&r.restoreContext()},this.getPixelRatio=function(){return ze},this.setPixelRatio=function(r){void 0!==r&&(ze=r,this.setSize(je,Oe,!1))},this.getSize=function(){return{width:je,height:Oe}},this.setSize=function(r,t,a){var o=ee.getDevice();return o&&o.isPresenting?void console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):void(je=r,Oe=t,y.width=r*ze,y.height=t*ze,!1!==a&&(y.style.width=r+"px",y.style.height=t+"px"),this.setViewport(0,0,r,t))},this.getDrawingBufferSize=function(){return{width:je*ze,height:Oe*ze}},this.setDrawingBufferSize=function(r,t,a){je=r,Oe=t,ze=a,y.width=r*a,y.height=t*a,this.setViewport(0,0,r,t)},this.setViewport=function(r,t,a,o){Re.set(r,Oe-t-o,a,o),Ke.viewport(Ce.copy(Re).multiplyScalar(ze))},this.setScissor=function(r,t,a,o){Ue.set(r,Oe-t-o,a,o),Ke.scissor(Se.copy(Ue).multiplyScalar(ze))},this.setScissorTest=function(r){Ke.setScissorTest(Pe=r)},this.getClearColor=lt.getClearColor,this.setClearColor=lt.setClearColor,this.getClearAlpha=lt.getClearAlpha,this.setClearAlpha=lt.setClearAlpha,this.clear=function(r,t,a){var o=0;(void 0===r||r)&&(o|=We.COLOR_BUFFER_BIT),(void 0===t||t)&&(o|=We.DEPTH_BUFFER_BIT),(void 0===a||a)&&(o|=We.STENCIL_BUFFER_BIT),We.clear(o)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(r,t,a,o){this.setRenderTarget(r),this.clear(t,a,o)},this.dispose=function(){y.removeEventListener("webglcontextlost",i,!1),y.removeEventListener("webglcontextrestored",n,!1),st.dispose(),ee.dispose()},this.renderBufferImmediate=function(d,t,p){Ke.initAttributes();var i=Je.get(d);d.hasPositions&&!i.position&&(i.position=We.createBuffer()),d.hasNormals&&!i.normal&&(i.normal=We.createBuffer()),d.hasUvs&&!i.uv&&(i.uv=We.createBuffer()),d.hasColors&&!i.color&&(i.color=We.createBuffer());var n=t.getAttributes();if(d.hasPositions&&(We.bindBuffer(We.ARRAY_BUFFER,i.position),We.bufferData(We.ARRAY_BUFFER,d.positionArray,We.DYNAMIC_DRAW),Ke.enableAttribute(n.position),We.vertexAttribPointer(n.position,3,We.FLOAT,!1,0,0)),d.hasNormals){if(We.bindBuffer(We.ARRAY_BUFFER,i.normal),!p.isMeshPhongMaterial&&!p.isMeshStandardMaterial&&!p.isMeshNormalMaterial&&!0===p.flatShading)for(var r=0,a=3*d.count;r<a;r+=9){var o=d.normalArray,s=(o[r+0]+o[r+3]+o[r+6])/3,c=(o[r+1]+o[r+4]+o[r+7])/3,u=(o[r+2]+o[r+5]+o[r+8])/3;o[r+0]=s,o[r+1]=c,o[r+2]=u,o[r+3]=s,o[r+4]=c,o[r+5]=u,o[r+6]=s,o[r+7]=c,o[r+8]=u}We.bufferData(We.ARRAY_BUFFER,d.normalArray,We.DYNAMIC_DRAW),Ke.enableAttribute(n.normal),We.vertexAttribPointer(n.normal,3,We.FLOAT,!1,0,0)}d.hasUvs&&p.map&&(We.bindBuffer(We.ARRAY_BUFFER,i.uv),We.bufferData(We.ARRAY_BUFFER,d.uvArray,We.DYNAMIC_DRAW),Ke.enableAttribute(n.uv),We.vertexAttribPointer(n.uv,2,We.FLOAT,!1,0,0)),d.hasColors&&p.vertexColors!==wa&&(We.bindBuffer(We.ARRAY_BUFFER,i.color),We.bufferData(We.ARRAY_BUFFER,d.colorArray,We.DYNAMIC_DRAW),Ke.enableAttribute(n.color),We.vertexAttribPointer(n.color,3,We.FLOAT,!1,0,0)),Ke.disableUnusedAttributes(),We.drawArrays(We.TRIANGLES,0,d.count),d.count=0},this.renderBufferDirect=function(d,A,i,n,r,a){Ke.setMaterial(n);var o=oe(d,A,n,r),s=i.id+"_"+o.id+"_"+(!0===n.wireframe),c=!1;s!==De&&(De=s,c=!0),r.morphTargetInfluences&&(ct.update(r,i,n,o),c=!0);var h=i.index,l=i.attributes.position,u=1;!0===n.wireframe&&(h=tt.getWireframeAttribute(i),u=2);var p=pt,m;null!==h&&(m=et.get(h),p=ut,p.setIndex(m)),c&&(Y(n,o,i),null!==h&&We.bindBuffer(We.ELEMENT_ARRAY_BUFFER,m.buffer));var f=0;null===h?void 0!==l&&(f=l.count):f=h.count;var g=i.drawRange.start*u,v=i.drawRange.count*u,y=null===a?0:a.start*u,x=null===a?1/0:a.count*u,b=L(g,y),D=N(f,g+v,y+x)-1,M=L(0,D-b+1);if(0!==M){if(r.isMesh){if(!0===n.wireframe)Ke.setLineWidth(n.wireframeLinewidth*t()),p.setMode(We.LINES);else switch(r.drawMode){case fc:p.setMode(We.TRIANGLES);break;case rs:p.setMode(We.TRIANGLE_STRIP);break;case as:p.setMode(We.TRIANGLE_FAN);}}else if(r.isLine){var E=n.linewidth;void 0===E&&(E=1),Ke.setLineWidth(E*t()),r.isLineSegments?p.setMode(We.LINES):r.isLineLoop?p.setMode(We.LINE_LOOP):p.setMode(We.LINE_STRIP)}else r.isPoints&&p.setMode(We.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&p.renderInstances(i,b,M):p.render(b,M)}},this.compile=function(r,t){he.length=0,Me.length=0,r.traverse(function(r){r.isLight&&(he.push(r),r.castShadow&&Me.push(r))}),it.setup(he,Me,t),r.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var a=0;a<t.material.length;a++)J(t.material[a],r.fog,t);else J(t.material,r.fog,t)})};var ne=!1,re=null;this.animate=function(r){re=r,d()},this.render=function(s,t,l,i){if(!t||!t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!K){De="",Le=-1,Ne=null,!0===s.autoUpdate&&s.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),ee.enabled&&(t=ee.getCamera(t)),Ve.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),Be.setFromMatrix(Ve),he.length=0,Me.length=0,Ee.length=0,ve.length=0,Ge=this.localClippingEnabled,Fe=ke.init(this.clippingPlanes,Ge,t),X=st.get(s,t),X.init(),h(s,t,Q.sortObjects),!0===Q.sortObjects&&X.sort(),Fe&&ke.beginShadows(),ie.render(Me,s,t),it.setup(he,Me,t),Fe&&ke.endShadows(),Ye.frame++,Ye.calls=0,Ye.vertices=0,Ye.faces=0,Ye.points=0,void 0===l&&(l=null),this.setRenderTarget(l),lt.render(X,s,t,i);var n=X.opaque,r=X.transparent;if(s.overrideMaterial){var a=s.overrideMaterial;n.length&&g(n,s,t,a),r.length&&g(r,s,t,a)}else n.length&&g(n,s,t),r.length&&g(r,s,t);gt.render(Ee,s,t),mt.render(ve,s,t,Ce),l&&$e.updateRenderTargetMipmap(l),Ke.buffers.depth.setTest(!0),Ke.buffers.depth.setMask(!0),Ke.buffers.color.setMask(!0),Ke.setPolygonOffset(!1),ee.enabled&&ee.submitFrame()}},this.setFaceCulling=function(r,t){Ke.setCullFace(r),Ke.setFlipSided(t===ga)},this.allocTextureUnit=function(){var r=_e;return r>=Ze.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+r+" texture units while this GPU supports only "+Ze.maxTextures),_e+=1,r},this.setTexture2D=function(){var r=!1;return function(t,a){t&&t.isWebGLRenderTarget&&(r||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),r=!0),t=t.texture),$e.setTexture2D(t,a)}}(),this.setTexture=function(){var r=!1;return function(t,a){r||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),r=!0),$e.setTexture2D(t,a)}}(),this.setTextureCube=function(){var r=!1;return function(t,a){t&&t.isWebGLRenderTargetCube&&(r||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),r=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?$e.setTextureCube(t,a):$e.setTextureCubeDynamic(t,a)}}(),this.getRenderTarget=function(){return Ae},this.setRenderTarget=function(a){Ae=a,a&&void 0===Je.get(a).__webglFramebuffer&&$e.setupRenderTarget(a);var t=null,o=!1;if(a){var i=Je.get(a).__webglFramebuffer;a.isWebGLRenderTargetCube?(t=i[a.activeCubeFace],o=!0):t=i,Ce.copy(a.viewport),Se.copy(a.scissor),Ie=a.scissorTest}else Ce.copy(Re).multiplyScalar(ze),Se.copy(Ue).multiplyScalar(ze),Ie=Pe;if(Te!==t&&(We.bindFramebuffer(We.FRAMEBUFFER,t),Te=t),Ke.viewport(Ce),Ke.scissor(Se),Ke.setScissorTest(Ie),o){var n=Je.get(a.texture);We.framebufferTexture2D(We.FRAMEBUFFER,We.COLOR_ATTACHMENT0,We.TEXTURE_CUBE_MAP_POSITIVE_X+a.activeCubeFace,n.__webglTexture,a.activeMipMapLevel)}},this.readRenderTargetPixels=function(d,p,u,i,n,r){if(!d||!d.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");var a=Je.get(d).__webglFramebuffer;if(a){var o=!1;a!==Te&&(We.bindFramebuffer(We.FRAMEBUFFER,a),o=!0);try{var s=d.texture,c=s.format,m=s.type;if(c!==hc&&te.convert(c)!==We.getParameter(We.IMPLEMENTATION_COLOR_READ_FORMAT))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(m===gc||te.convert(m)===We.getParameter(We.IMPLEMENTATION_COLOR_READ_TYPE)||m===Io&&(qe.get("OES_texture_float")||qe.get("WEBGL_color_buffer_float"))||m===Uo&&qe.get("EXT_color_buffer_half_float")))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");We.checkFramebufferStatus(We.FRAMEBUFFER)===We.FRAMEBUFFER_COMPLETE?0<=p&&p<=d.width-i&&0<=u&&u<=d.height-n&&We.readPixels(p,u,i,n,te.convert(c),te.convert(m),r):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{o&&We.bindFramebuffer(We.FRAMEBUFFER,Te)}}}}function we(r,t){this.name="",this.color=new W(r),this.density=void 0===t?25e-5:t}function Me(r,t,a){this.name="",this.color=new W(r),this.near=void 0===t?1:t,this.far=void 0===a?1e3:a}function Ee(){ct.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function Kt(a,t,o,i,n){ct.call(this),this.lensFlares=[],this.positionScreen=new Qr,this.customUpdateCallback=void 0,void 0!==a&&this.add(a,t,o,i,n)}function $t(r){J.call(this),this.type="SpriteMaterial",this.color=new W(16777215),this.map=null,this.rotation=0,this.fog=!1,this.lights=!1,this.setValues(r)}function sl(r){ct.call(this),this.type="Sprite",this.material=void 0===r?new $t:r}function ll(){ct.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function dl(r,t){if(r=r||[],this.bones=r.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var a=0,o=this.bones.length;a<o;a++)this.boneInverses.push(new Yr)}}function Pe(){ct.call(this),this.type="Bone"}function cl(r,t){Ft.call(this,r,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Yr,this.bindMatrixInverse=new Yr;var a=this.initBones(),o=new dl(a);this.bind(o,this.matrixWorld),this.normalizeSkinWeights()}function pl(r){J.call(this),this.type="LineBasicMaterial",this.color=new W(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(r)}function ul(r,t,a){return 1===a?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new ml(r,t)):void(ct.call(this),this.type="Line",this.geometry=void 0===r?new Rt:r,this.material=void 0===t?new pl({color:16777215*Math.random()}):t)}function ml(r,t){ul.call(this,r,t),this.type="LineSegments"}function gl(r,t){ul.call(this,r,t),this.type="LineLoop"}function hl(r){J.call(this),this.type="PointsMaterial",this.color=new W(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(r)}function yl(r,t){ct.call(this),this.type="Points",this.geometry=void 0===r?new Rt:r,this.material=void 0===t?new hl({color:16777215*Math.random()}):t}function fl(){ct.call(this),this.type="Group"}function Ml(n,t,d,i,r,a,o,s,c){function p(){requestAnimationFrame(p),n.readyState>=n.HAVE_CURRENT_DATA&&(l.needsUpdate=!0)}kr.call(this,n,t,d,i,r,a,o,s,c),this.generateMipmaps=!1;var l=this;p()}function Ge(n,t,d,m,r,a,o,s,c,g,l,u){kr.call(this,null,a,o,s,c,g,m,r,l,u),this.image={width:t,height:d},this.mipmaps=n,this.flipY=!1,this.generateMipmaps=!1}function He(n,d,p,i,r,a,o,s,c,u){if((u=void 0===u?ko:u)!==ko&&u!==Wo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===p&&u===ko&&(p=Lo),void 0===p&&u===Wo&&(p=Fo),kr.call(this,null,i,r,a,o,s,u,p,c),this.image={width:n,height:d},this.magFilter=void 0===o?lc:o,this.minFilter=void 0===s?lc:s,this.flipY=!1,this.generateMipmaps=!1}function Ve(c){Rt.call(this),this.type="WireframeGeometry";var t=[],p=[0,0],d={},f=["a","b","c"],m,A,i,n,r,a,o,s,h,l;if(c&&c.isGeometry){var u=c.faces;for(m=0,i=u.length;m<i;m++){var g=u[m];for(A=0;3>A;A++)o=g[f[A]],s=g[f[(A+1)%3]],p[0]=N(o,s),p[1]=L(o,s),h=p[0]+","+p[1],void 0===d[h]&&(d[h]={index1:p[0],index2:p[1]})}for(h in d)a=d[h],l=c.vertices[a.index1],t.push(l.x,l.y,l.z),l=c.vertices[a.index2],t.push(l.x,l.y,l.z)}else if(c&&c.isBufferGeometry){var v,y,x,b,D,w,M,E;if(l=new Qr,null!==c.index){for(v=c.attributes.position,y=c.index,x=c.groups,0===x.length&&(x=[{start:0,count:y.count,materialIndex:0}]),n=0,r=x.length;n<r;++n)for(b=x[n],D=b.start,w=b.count,m=D,i=D+w;m<i;m+=3)for(A=0;3>A;A++)o=y.getX(m+A),s=y.getX(m+(A+1)%3),p[0]=N(o,s),p[1]=L(o,s),h=p[0]+","+p[1],void 0===d[h]&&(d[h]={index1:p[0],index2:p[1]});for(h in d)a=d[h],l.fromBufferAttribute(v,a.index1),t.push(l.x,l.y,l.z),l.fromBufferAttribute(v,a.index2),t.push(l.x,l.y,l.z)}else for(v=c.attributes.position,m=0,i=v.count/3;m<i;m++)for(A=0;3>A;A++)M=3*m+A,l.fromBufferAttribute(v,M),t.push(l.x,l.y,l.z),E=3*m+(A+1)%3,l.fromBufferAttribute(v,E),t.push(l.x,l.y,l.z)}this.addAttribute("position",new Et(t,3))}function xl(r,a,o){mt.call(this),this.type="ParametricGeometry",this.parameters={func:r,slices:a,stacks:o},this.fromBufferGeometry(new El(r,a,o)),this.mergeVertices()}function El(c,M,E){Rt.call(this),this.type="ParametricBufferGeometry",this.parameters={func:c,slices:M,stacks:E};var A=[],a=[],o=[],s=[],h=new Qr,l=new Qr,u=new Qr,p=new Qr,d=new Qr,f=M+1,m,n;for(m=0;m<=E;m++){var r=m/E;for(n=0;n<=M;n++){var g=n/M;l=c(g,r,l),a.push(l.x,l.y,l.z),0<=g-1e-5?(u=c(g-1e-5,r,u),p.subVectors(l,u)):(u=c(g+1e-5,r,u),p.subVectors(u,l)),0<=r-1e-5?(u=c(g,r-1e-5,u),d.subVectors(l,u)):(u=c(g,r+1e-5,u),d.subVectors(u,l)),h.crossVectors(p,d).normalize(),o.push(h.x,h.y,h.z),s.push(g,r)}}for(m=0;m<E;m++)for(n=0;n<M;n++){var v=m*f+n,y=m*f+n+1,x=(m+1)*f+n+1,T=(m+1)*f+n;A.push(v,y,T),A.push(y,x,T)}this.setIndex(A),this.addAttribute("position",new Et(a,3)),this.addAttribute("normal",new Et(o,3)),this.addAttribute("uv",new Et(s,2))}function vl(r,a,o,s){mt.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:r,indices:a,radius:o,detail:s},this.fromBufferGeometry(new Al(r,a,o,s)),this.mergeVertices()}function Al(c,y,i,M){function x(s,t,d,i){var n=g(2,i),m=[],c,r;for(c=0;c<=n;c++){m[c]=[];var y=s.clone().lerp(d,c/n),h=t.clone().lerp(d,c/n),l=n-c;for(r=0;r<=l;r++)m[c][r]=0===r&&c===n?y:y.clone().lerp(h,r/l)}for(c=0;c<n;c++)for(r=0;r<2*(n-c)-1;r++){var u=C(r/2);0==r%2?(o(m[c][u+1]),o(m[c+1][u]),o(m[c][u])):(o(m[c][u+1]),o(m[c+1][u+1]),o(m[c+1][u]))}}function a(){for(var o=0;o<f.length;o+=6){var t=f[o+0],s=f[o+2],i=f[o+4],n=L(t,s,i),r=N(t,s,i);.9<n&&.1>r&&(.2>t&&(f[o+0]+=1),.2>s&&(f[o+2]+=1),.2>i&&(f[o+4]+=1))}}function o(r){p.push(r.x,r.y,r.z)}function s(t,r){var a=3*t;r.x=c[a+0],r.y=c[a+1],r.z=c[a+2]}function h(){for(var i=new Qr,t=new Qr,c=new Qr,n=new Qr,r=new Br,a=new Br,o=new Br,s=0,m=0;s<p.length;s+=9,m+=6){i.set(p[s+0],p[s+1],p[s+2]),t.set(p[s+3],p[s+4],p[s+5]),c.set(p[s+6],p[s+7],p[s+8]),r.set(f[m+0],f[m+1]),a.set(f[m+2],f[m+3]),o.set(f[m+4],f[m+5]),n.copy(i).add(t).add(c).divideScalar(3);var g=u(n);E(r,m+0,i,g),E(a,m+2,t,g),E(o,m+4,c,g)}}function E(r,t,a,o){0>o&&1===r.x&&(f[t]=r.x-1),0===a.x&&0===a.z&&(f[t]=o/2/Or+.5)}function u(r){return Fd(r.z,-r.x)}function l(r){return Fd(-r.y,S(r.x*r.x+r.z*r.z))}Rt.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:c,indices:y,radius:i,detail:M},i=i||1,M=M||0;var p=[],f=[];!function(a){for(var t=new Qr,i=new Qr,n=new Qr,r=0;r<y.length;r+=3)s(y[r+0],t),s(y[r+1],i),s(y[r+2],n),x(t,i,n,a)}(M),function(r){for(var t=new Qr,a=0;a<p.length;a+=3)t.x=p[a+0],t.y=p[a+1],t.z=p[a+2],t.normalize().multiplyScalar(r),p[a+0]=t.x,p[a+1]=t.y,p[a+2]=t.z}(i),function(){for(var r=new Qr,t=0;t<p.length;t+=3){r.x=p[t+0],r.y=p[t+1],r.z=p[t+2];var o=u(r)/2/Or+.5,i=l(r)/Or+.5;f.push(o,1-i)}h(),a()}(),this.addAttribute("position",new Et(p,3)),this.addAttribute("normal",new Et(p.slice(),3)),this.addAttribute("uv",new Et(f,2)),0===M?this.computeVertexNormals():this.normalizeNormals()}function Tl(r,a){mt.call(this),this.type="TetrahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new bl(r,a)),this.mergeVertices()}function bl(r,a){Al.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],r,a),this.type="TetrahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Ll(r,a){mt.call(this),this.type="OctahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new Dl(r,a)),this.mergeVertices()}function Dl(r,a){Al.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],r,a),this.type="OctahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Nl(r,a){mt.call(this),this.type="IcosahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new wl(r,a)),this.mergeVertices()}function wl(r,a){var o=(1+2.23606797749979)/2;Al.call(this,[-1,o,0,1,o,0,-1,-o,0,1,-o,0,0,-1,o,0,1,o,0,-1,-o,0,1,-o,o,0,-1,o,0,1,-o,0,-1,-o,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],r,a),this.type="IcosahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Cl(r,a){mt.call(this),this.type="DodecahedronGeometry",this.parameters={radius:r,detail:a},this.fromBufferGeometry(new Sl(r,a)),this.mergeVertices()}function Sl(r,a){var o=(1+2.23606797749979)/2,s=1/o;Al.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-s,-o,0,-s,o,0,s,-o,0,s,o,-s,-o,0,-s,o,0,s,-o,0,s,o,0,-o,0,-s,o,0,-s,-o,0,s,o,0,s],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],r,a),this.type="DodecahedronBufferGeometry",this.parameters={radius:r,detail:a}}function Il(s,l,d,c,p,u){mt.call(this),this.type="TubeGeometry",this.parameters={path:s,tubularSegments:l,radius:d,radialSegments:c,closed:p},void 0!==u&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new _l(s,l,d,c,p);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function _l(M,E,i,A,c){function T(t){var r=M.getPointAt(t/E),a=b.normals[t],n=b.binormals[t];for(v=0;v<=A;v++){var s=2*(v/A*Or),c=I(s),p=-O(s);d.x=p*a.x+c*n.x,d.y=p*a.y+c*n.y,d.z=p*a.z+c*n.z,d.normalize(),g.push(d.x,d.y,d.z),l.x=r.x+i*d.x,l.y=r.y+i*d.y,l.z=r.z+i*d.z,m.push(l.x,l.y,l.z)}}function o(){for(v=1;v<=E;v++)for(x=1;x<=A;x++){var r=(A+1)*(v-1)+(x-1),t=(A+1)*v+(x-1),o=(A+1)*v+x,i=(A+1)*(v-1)+x;y.push(r,t,i),y.push(t,o,i)}}function s(){for(x=0;x<=E;x++)for(v=0;v<=A;v++)h.x=x/E,h.y=v/A,f.push(h.x,h.y)}Rt.call(this),this.type="TubeBufferGeometry",this.parameters={path:M,tubularSegments:E,radius:i,radialSegments:A,closed:c},E=E||64,i=i||1,A=A||8,c=c||!1;var b=M.computeFrenetFrames(E,c);this.tangents=b.tangents,this.normals=b.normals,this.binormals=b.binormals;var l=new Qr,d=new Qr,h=new Br,m=[],g=[],f=[],y=[],x,v;!function(){for(x=0;x<E;x++)T(x);T(!1===c?E:0),s(),o()}(),this.setIndex(y),this.addAttribute("position",new Et(m,3)),this.addAttribute("normal",new Et(g,3)),this.addAttribute("uv",new Et(f,2))}function jl(s,l,d,c,p,u,m){mt.call(this),this.type="TorusKnotGeometry",this.parameters={radius:s,tube:l,tubularSegments:d,radialSegments:c,p:p,q:u},void 0!==m&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ol(s,l,d,c,p,u)),this.mergeVertices()}function Ol(c,L,D,N,j,z){function U(l,t,d,i,n){var r=O(l),a=I(l),p=d/t*l,s=O(p);n.x=.5*(i*(2+s))*r,n.y=.5*(i*(2+s)*a),n.z=.5*(i*I(p))}Rt.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:c,tube:L,tubularSegments:D,radialSegments:N,p:j,q:z},c=c||100,L=L||40,D=C(D)||64,N=C(N)||8,j=j||2,z=z||3;var o=[],l=[],u=[],p=[],d=new Qr,f=new Qr,m=new Qr,g=new Qr,v=new Qr,y=new Qr,x=new Qr,b,s;for(b=0;b<=D;++b){var h=2*(b/D*j*Or);for(U(h,j,z,c,m),U(h+.01,j,z,c,g),y.subVectors(g,m),x.addVectors(g,m),v.crossVectors(y,x),x.crossVectors(v,y),v.normalize(),x.normalize(),s=0;s<=N;++s){var _=2*(s/N*Or),w=-L*O(_),M=L*I(_);d.x=m.x+(w*x.x+M*v.x),d.y=m.y+(w*x.y+M*v.y),d.z=m.z+(w*x.z+M*v.z),l.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),u.push(f.x,f.y,f.z),p.push(b/D),p.push(s/N)}}for(s=1;s<=D;s++)for(b=1;b<=N;b++){var E=(N+1)*(s-1)+(b-1),T=(N+1)*s+(b-1),S=(N+1)*s+b,A=(N+1)*(s-1)+b;o.push(E,T,A),o.push(T,S,A)}this.setIndex(o),this.addAttribute("position",new Et(l,3)),this.addAttribute("normal",new Et(u,3)),this.addAttribute("uv",new Et(p,2))}function zl(a,o,s,l,d){mt.call(this),this.type="TorusGeometry",this.parameters={radius:a,tube:o,radialSegments:s,tubularSegments:l,arc:d},this.fromBufferGeometry(new Rl(a,o,s,l,d)),this.mergeVertices()}function Rl(c,M,E,A,T){Rt.call(this),this.type="TorusBufferGeometry",this.parameters={radius:c,tube:M,radialSegments:E,tubularSegments:A,arc:T},c=c||100,M=M||40,E=C(E)||8,A=C(A)||6,T=T||2*Or;var L=[],s=[],h=[],l=[],u=new Qr,p=new Qr,d=new Qr,f,a;for(f=0;f<=E;f++)for(a=0;a<=A;a++){var o=a/A*T,m=2*(f/E*Or);p.x=(c+M*O(m))*O(o),p.y=(c+M*O(m))*I(o),p.z=M*I(m),s.push(p.x,p.y,p.z),u.x=c*O(o),u.y=c*I(o),d.subVectors(p,u).normalize(),h.push(d.x,d.y,d.z),l.push(a/A),l.push(f/E)}for(f=1;f<=E;f++)for(a=1;a<=A;a++){var g=(A+1)*f+a-1,v=(A+1)*(f-1)+a-1,y=(A+1)*(f-1)+a,x=(A+1)*f+a;L.push(g,v,x),L.push(v,y,x)}this.setIndex(L),this.addAttribute("position",new Et(s,3)),this.addAttribute("normal",new Et(h,3)),this.addAttribute("uv",new Et(l,2))}function Ul(r,a){mt.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:r,options:a},this.fromBufferGeometry(new Pl(r,a)),this.mergeVertices()}function Pl(r,t){void 0!==r&&(Rt.call(this),this.type="ExtrudeBufferGeometry",r=Array.isArray(r)?r:[r],this.addShapeList(r,t),this.computeVertexNormals())}function Bl(r,a){mt.call(this),this.type="TextGeometry",this.parameters={text:r,parameters:a},this.fromBufferGeometry(new kl(r,a)),this.mergeVertices()}function kl(r,t){t=t||{};var a=t.font;if(!a||!a.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new mt;var o=a.generateShapes(r,t.size,t.curveSegments);t.amount=void 0===t.height?50:t.height,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Pl.call(this,o,t),this.type="TextBufferGeometry"}function Fl(s,l,d,c,p,u,m){mt.call(this),this.type="SphereGeometry",this.parameters={radius:s,widthSegments:l,heightSegments:d,phiStart:c,phiLength:p,thetaStart:u,thetaLength:m},this.fromBufferGeometry(new Gl(s,l,d,c,p,u,m)),this.mergeVertices()}function Gl(c,A,D,N,S,j,z){Rt.call(this),this.type="SphereBufferGeometry",this.parameters={radius:c,widthSegments:A,heightSegments:D,phiStart:N,phiLength:S,thetaStart:j,thetaLength:z},c=c||50,A=L(3,C(A)||8),D=L(2,C(D)||6),N=void 0===N?0:N,S=void 0===S?2*Or:S,j=void 0===j?0:j,z=void 0===z?Or:z;var R=j+z,l=0,u=[],p=new Qr,d=new Qr,f=[],m=[],g=[],v=[],y,s;for(s=0;s<=D;s++){var h=[],x=s/D;for(y=0;y<=A;y++){var b=y/A;p.x=-c*O(N+b*S)*I(j+x*z),p.y=c*O(j+x*z),p.z=c*I(N+b*S)*I(j+x*z),m.push(p.x,p.y,p.z),d.set(p.x,p.y,p.z).normalize(),g.push(d.x,d.y,d.z),v.push(b,1-x),h.push(l++)}u.push(h)}for(s=0;s<D;s++)for(y=0;y<A;y++){var _=u[s][y+1],w=u[s][y],M=u[s+1][y],E=u[s+1][y+1];(0!==s||0<j)&&f.push(_,w,E),(s!==D-1||R<Or)&&f.push(w,M,E)}this.setIndex(f),this.addAttribute("position",new Et(m,3)),this.addAttribute("normal",new Et(g,3)),this.addAttribute("uv",new Et(v,2))}function Vl(o,s,l,d,c,p){mt.call(this),this.type="RingGeometry",this.parameters={innerRadius:o,outerRadius:s,thetaSegments:l,phiSegments:d,thetaStart:c,thetaLength:p},this.fromBufferGeometry(new Hl(o,s,l,d,c,p)),this.mergeVertices()}function Hl(i,c,E,A,T,D){Rt.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:i,outerRadius:c,thetaSegments:E,phiSegments:A,thetaStart:T,thetaLength:D},i=i||20,c=c||50,T=void 0===T?0:T,D=void 0===D?2*Or:D,E=void 0===E?8:L(3,E),A=void 0===A?1:L(1,A);var N=[],u=[],p=[],d=[],f=i,m=(c-i)/A,g=new Qr,v=new Br,y,s,h;for(s=0;s<=A;s++){for(h=0;h<=E;h++)y=T+h/E*D,g.x=f*O(y),g.y=f*I(y),u.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/c+1)/2,v.y=(g.y/c+1)/2,d.push(v.x,v.y);f+=m}for(s=0;s<A;s++){var l=s*(E+1);for(h=0;h<E;h++){y=h+l;var x=y,b=y+E+1,C=y+E+2,w=y+1;N.push(x,b,w),N.push(b,C,w)}}this.setIndex(N),this.addAttribute("position",new Et(u,3)),this.addAttribute("normal",new Et(p,3)),this.addAttribute("uv",new Et(d,2))}function Ql(r,a,o,s){mt.call(this),this.type="LatheGeometry",this.parameters={points:r,segments:a,phiStart:o,phiLength:s},this.fromBufferGeometry(new Yl(r,a,o,s)),this.mergeVertices()}function Yl(i,c,A,L){Rt.call(this),this.type="LatheBufferGeometry",this.parameters={points:i,segments:c,phiStart:A,phiLength:L},c=C(c)||12,A=A||0,L=L||2*Or,L=Mc.clamp(L,0,2*Or);var D=[],h=[],l=[],u=1/c,p=new Qr,d=new Br,f,a,o;for(a=0;a<=c;a++){var s=A+a*u*L,m=I(s),g=O(s);for(o=0;o<=i.length-1;o++)p.x=i[o].x*m,p.y=i[o].y,p.z=i[o].x*g,h.push(p.x,p.y,p.z),d.x=a/c,d.y=o/(i.length-1),l.push(d.x,d.y)}for(a=0;a<c;a++)for(o=0;o<i.length-1;o++){f=o+a*i.length;var v=f,y=f+i.length,x=f+i.length+1,b=f+1;D.push(v,y,b),D.push(y,x,b)}if(this.setIndex(D),this.addAttribute("position",new Et(h,3)),this.addAttribute("uv",new Et(l,2)),this.computeVertexNormals(),L===2*Or){var N=this.attributes.normal.array,w=new Qr,M=new Qr,E=new Qr;for(f=3*(c*i.length),a=0,o=0;a<i.length;a++,o+=3)w.x=N[o+0],w.y=N[o+1],w.z=N[o+2],M.x=N[f+o+0],M.y=N[f+o+1],M.z=N[f+o+2],E.addVectors(w,M).normalize(),N[o+0]=N[f+o+0]=E.x,N[o+1]=N[f+o+1]=E.y,N[o+2]=N[f+o+2]=E.z}}function Wl(r,a){mt.call(this),this.type="ShapeGeometry","object"==("undefined"===typeof a?"undefined":babelHelpers.typeof(a))&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),a=a.curveSegments),this.parameters={shapes:r,curveSegments:a},this.fromBufferGeometry(new Xl(r,a)),this.mergeVertices()}function Xl(l,M){function d(o){var t=n.length/3,l=o.extractPoints(M),c=l.shape,u=l.holes,d,E,A;if(!1===Us.isClockWise(c))for(c=c.reverse(),d=0,E=u.length;d<E;d++)A=u[d],!0===Us.isClockWise(A)&&(u[d]=A.reverse());var h=Us.triangulateShape(c,u);for(d=0,E=u.length;d<E;d++)A=u[d],c=c.concat(A);for(d=0,E=c.length;d<E;d++){var f=c[d];n.push(f.x,f.y,0),r.push(0,0,1),a.push(f.x,f.y)}for(d=0,E=h.length;d<E;d++){var m=h[d],g=m[0]+t,v=m[1]+t,y=m[2]+t;p.push(g,v,y),s+=3}}Rt.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:l,curveSegments:M},M=M||12;var p=[],n=[],r=[],a=[],o=0,s=0;if(!1===Array.isArray(l))d(l);else for(var i=0;i<l.length;i++)d(l[i]),this.addGroup(o,s,i),o+=s,s=0;this.setIndex(p),this.addAttribute("position",new Et(n,3)),this.addAttribute("normal",new Et(r,3)),this.addAttribute("uv",new Et(a,2))}function ql(M,t){Rt.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t},t=void 0===t?1:t;var x=[],o=O(Mc.DEG2RAD*t),s=[0,0],c={},h=["a","b","c"],l,i,n,r;M.isBufferGeometry?(r=new mt,r.fromBufferGeometry(M)):r=M.clone(),r.mergeVertices(),r.computeFaceNormals();for(var a=r.vertices,u=r.faces,p=0,E=u.length;p<E;p++)for(var f=u[p],m=0;3>m;m++)l=f[h[m]],i=f[h[(m+1)%3]],s[0]=N(l,i),s[1]=L(l,i),n=s[0]+","+s[1],void 0===c[n]?c[n]={index1:s[0],index2:s[1],face1:p,face2:void 0}:c[n].face2=p;for(n in c){var g=c[n];if(void 0===g.face2||u[g.face1].normal.dot(u[g.face2].normal)<=o){var v=a[g.index1];x.push(v.x,v.y,v.z),v=a[g.index2],x.push(v.x,v.y,v.z)}}this.addAttribute("position",new Et(x,3))}function Zl(l,d,c,p,u,m,g,h){mt.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:l,radiusBottom:d,height:c,radialSegments:p,heightSegments:u,openEnded:m,thetaStart:g,thetaLength:h},this.fromBufferGeometry(new Kl(l,d,c,p,u,m,g,h)),this.mergeVertices()}function Kl(c,D,N,j,z,i,_,U){function M(t){var r=new Br,i=new Qr,n=0,s=!0===t?c:D,g=!0===t?1:-1,h,a,o;for(a=m,h=1;h<=j;h++)p.push(0,P*g,0),d.push(0,g,0),f.push(.5,.5),m++;for(o=m,h=0;h<=j;h++){var M=h/j,x=M*U+_,E=O(x),v=I(x);i.x=s*v,i.y=P*g,i.z=s*E,p.push(i.x,i.y,i.z),d.push(0,g,0),r.x=.5*E+.5,r.y=.5*v*g+.5,f.push(r.x,r.y),m++}for(h=0;h<j;h++){var A=a+h,T=o+h;!0===t?u.push(T,T+1,A):u.push(T+1,T,A),n+=3}B.addGroup(y,n,!0===t?1:2),y+=n}Rt.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:c,radiusBottom:D,height:N,radialSegments:j,heightSegments:z,openEnded:i,thetaStart:_,thetaLength:U};var B=this;c=void 0===c?20:c,D=void 0===D?20:D,N=void 0===N?100:N,j=C(j)||8,z=C(z)||1,i=void 0!==i&&i,_=void 0===_?0:_,U=void 0===U?2*Or:U;var u=[],p=[],d=[],f=[],m=0,g=[],P=N/2,y=0;!function(){var t=new Qr,r=new Qr,a=0,n=(D-c)/N,s,i;for(i=0;i<=z;i++){var o=[],l=i/z,h=l*(D-c)+c;for(s=0;s<=j;s++){var M=s/j,x=M*U+_,v=I(x),A=O(x);r.x=h*v,r.y=-l*N+P,r.z=h*A,p.push(r.x,r.y,r.z),t.set(v,n,A).normalize(),d.push(t.x,t.y,t.z),f.push(M,1-l),o.push(m++)}g.push(o)}for(s=0;s<j;s++)for(i=0;i<z;i++){var T=g[i][s],b=g[i+1][s],L=g[i+1][s+1],w=g[i][s+1];u.push(T,b,w),u.push(b,L,w),a+=6}B.addGroup(y,a,0),y+=a}(),!1===i&&(0<c&&M(!0),0<D&&M(!1)),this.setIndex(u),this.addAttribute("position",new Et(p,3)),this.addAttribute("normal",new Et(d,3)),this.addAttribute("uv",new Et(f,2))}function Jl(s,l,d,c,p,u,m){Zl.call(this,0,s,l,d,c,p,u,m),this.type="ConeGeometry",this.parameters={radius:s,height:l,radialSegments:d,heightSegments:c,openEnded:p,thetaStart:u,thetaLength:m}}function $l(s,l,d,c,p,u,m){Kl.call(this,0,s,l,d,c,p,u,m),this.type="ConeBufferGeometry",this.parameters={radius:s,height:l,radialSegments:d,heightSegments:c,openEnded:p,thetaStart:u,thetaLength:m}}function ed(r,a,o,s){mt.call(this),this.type="CircleGeometry",this.parameters={radius:r,segments:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new td(r,a,o,s)),this.mergeVertices()}function td(i,c,m,g){Rt.call(this),this.type="CircleBufferGeometry",this.parameters={radius:i,segments:c,thetaStart:m,thetaLength:g},i=i||50,c=void 0===c?8:L(3,c),m=void 0===m?0:m,g=void 0===g?2*Or:g;var y=[],s=[],h=[],l=[],u=new Qr,p=new Br,d,a;for(s.push(0,0,0),h.push(0,0,1),l.push(.5,.5),a=0,d=3;a<=c;a++,d+=3){var o=m+a/c*g;u.x=i*O(o),u.y=i*I(o),s.push(u.x,u.y,u.z),h.push(0,0,1),p.x=(s[d]/i+1)/2,p.y=(s[d+1]/i+1)/2,l.push(p.x,p.y)}for(d=1;d<=c;d++)y.push(d,d+1,0);this.setIndex(y),this.addAttribute("position",new Et(s,3)),this.addAttribute("normal",new Et(h,3)),this.addAttribute("uv",new Et(l,2))}function rd(r){J.call(this),this.type="ShadowMaterial",this.color=new W(0),this.opacity=1,this.lights=!0,this.transparent=!0,this.setValues(r)}function ad(r){aa.call(this,r),this.type="RawShaderMaterial"}function od(r){J.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new W(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Br(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function id(r){od.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(r)}function nd(r){J.call(this),this.type="MeshPhongMaterial",this.color=new W(16777215),this.specular=new W(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Br(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function sd(r){nd.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(r)}function ld(r){J.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new Br(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function dd(r){J.call(this),this.type="MeshLambertMaterial",this.color=new W(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new W(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=eo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(r)}function cd(r){pl.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(r)}function pd(s,t,l){var i=this,n=!1,r=0,a=0;this.onStart=void 0,this.onLoad=s,this.onProgress=t,this.onError=l,this.itemStart=function(o){a++,!1===n&&void 0!==i.onStart&&i.onStart(o,r,a),n=!0},this.itemEnd=function(o){r++,void 0!==i.onProgress&&i.onProgress(o,r,a),r===a&&(n=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(r){void 0!==i.onError&&i.onError(r)}}function Oi(r){this.manager=void 0===r?Fs:r}function Fi(r){this.manager=void 0===r?Fs:r,this._parser=null}function Bi(r){this.manager=void 0===r?Fs:r,this._parser=null}function zi(r){this.manager=void 0===r?Fs:r}function Gi(r){this.manager=void 0===r?Fs:r}function Hi(r){this.manager=void 0===r?Fs:r}function Vi(r,t){ct.call(this),this.type="Light",this.color=new W(r),this.intensity=void 0===t?1:t,this.receiveShadow=void 0}function ud(r,t,a){Vi.call(this,r,a),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(ct.DefaultUp),this.updateMatrix(),this.groundColor=new W(t)}function md(r){this.camera=r,this.bias=0,this.radius=1,this.mapSize=new Br(512,512),this.map=null,this.matrix=new Yr}function Wi(){md.call(this,new ca(50,1,.5,500))}function gd(o,t,s,i,n,r){Vi.call(this,o,t),this.type="SpotLight",this.position.copy(ct.DefaultUp),this.updateMatrix(),this.target=new ct,Object.defineProperty(this,"power",{get:function(){return this.intensity*Or},set:function(r){this.intensity=r/Or}}),this.distance=void 0===s?0:s,this.angle=void 0===i?Or/3:i,this.penumbra=void 0===n?0:n,this.decay=void 0===r?1:r,this.shadow=new Wi}function hd(r,t,a,o){Vi.call(this,r,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Or},set:function(r){this.intensity=r/(4*Or)}}),this.distance=void 0===a?0:a,this.decay=void 0===o?1:o,this.shadow=new md(new ca(90,1,.5,500))}function yd(){md.call(this,new ht(-5,5,5,-5,.5,500))}function fd(r,t){Vi.call(this,r,t),this.type="DirectionalLight",this.position.copy(ct.DefaultUp),this.updateMatrix(),this.target=new ct,this.shadow=new yd}function Md(r,t){Vi.call(this,r,t),this.type="AmbientLight",this.castShadow=void 0}function xd(r,t,a,o){Vi.call(this,r,t),this.type="RectAreaLight",this.position.set(0,1,0),this.updateMatrix(),this.width=void 0===a?10:a,this.height=void 0===o?10:o}function Ed(r,t,a,o){this.parameterPositions=r,this._cachedIndex=0,this.resultBuffer=void 0===o?new t.constructor(a):o,this.sampleValues=t,this.valueSize=a}function $i(r,t,a,o){Ed.call(this,r,t,a,o),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function vd(r,t,a,o){Ed.call(this,r,t,a,o)}function Ad(r,t,a,o){Ed.call(this,r,t,a,o)}function Td(r,t,a,o){if(void 0===r)throw new Error("track name is undefined");if(void 0===t||0===t.length)throw new Error("no keyframes in track named "+r);this.name=r,this.times=Bs.convertArray(t,this.TimeBufferType),this.values=Bs.convertArray(a,this.ValueBufferType),this.setInterpolation(o||this.DefaultInterpolation),this.validate(),this.optimize()}function rn(r,t,a,o){Td.call(this,r,t,a,o)}function bd(r,t,a,o){Ed.call(this,r,t,a,o)}function Ld(r,t,a,o){Td.call(this,r,t,a,o)}function Dd(r,t,a,o){Td.call(this,r,t,a,o)}function Nd(r,t,a,o){Td.call(this,r,t,a,o)}function wd(r,t,a){Td.call(this,r,t,a)}function Cd(r,t,a,o){Td.call(this,r,t,a,o)}function Sd(){Td.apply(this,arguments)}function pn(r,t,a){this.name=r,this.tracks=a,this.duration=void 0===t?-1:t,this.uuid=Mc.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function dn(r){this.manager=void 0===r?Fs:r,this.textures={}}function fn(r){this.manager=void 0===r?Fs:r}function mn(){this.onLoadStart=function(){},this.onLoadProgress=function(){},this.onLoadComplete=function(){}}function gn(r){"boolean"==typeof r&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),r=void 0),this.manager=void 0===r?Fs:r,this.withCredentials=!1}function vn(r){this.manager=void 0===r?Fs:r,this.texturePath=""}function yn(l,t,d,i,n){var r=.5*(i-t),a=.5*(n-d),o=l*l;return(2*d-2*i+r+a)*(l*o)+(-3*d+3*i-2*r-a)*o+r*l+d}function xn(r,t){var a=1-r;return a*a*t}function bn(r,t){return 2*(1-r)*r*t}function _n(r,t){return r*r*t}function wn(r,t,a,o){return xn(r,t)+bn(r,a)+_n(r,o)}function Mn(r,t){var a=1-r;return a*a*a*t}function En(r,t){var a=1-r;return 3*a*a*r*t}function Tn(r,t){return 3*(1-r)*r*r*t}function Sn(r,t){return r*r*r*t}function An(a,t,o,i,n){return Mn(a,t)+En(a,o)+Tn(a,i)+Sn(a,n)}function Rn(){this.arcLengthDivisions=200}function Ln(r,t){Rn.call(this),this.v1=r,this.v2=t}function Pn(){Rn.call(this),this.curves=[],this.autoClose=!1}function Id(l,t,d,i,n,r,a,o){Rn.call(this),this.aX=l,this.aY=t,this.xRadius=d,this.yRadius=i,this.aStartAngle=n,this.aEndAngle=r,this.aClockwise=a,this.aRotation=o||0}function In(r){Rn.call(this),this.points=void 0===r?[]:r}function Un(r,t,a,o){Rn.call(this),this.v0=r,this.v1=t,this.v2=a,this.v3=o}function Nn(r,t,a){Rn.call(this),this.v0=r,this.v1=t,this.v2=a}function Dn(r){Pn.call(this),this.currentPoint=new Br,r&&this.fromPoints(r)}function On(){Dn.apply(this,arguments),this.holes=[]}function _d(){this.subPaths=[],this.currentPath=null}function Bn(r){this.data=r}function zn(r){this.manager=void 0===r?Fs:r}function Gn(r){this.manager=void 0===r?Fs:r}function Hn(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ca,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ca,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function Vn(o,t,d){ct.call(this),this.type="CubeCamera";var c=new ca(90,1,o,t);c.up.set(0,-1,0),c.lookAt(new Qr(1,0,0)),this.add(c);var n=new ca(90,1,o,t);n.up.set(0,-1,0),n.lookAt(new Qr(-1,0,0)),this.add(n);var r=new ca(90,1,o,t);r.up.set(0,0,1),r.lookAt(new Qr(0,1,0)),this.add(r);var a=new ca(90,1,o,t);a.up.set(0,0,-1),a.lookAt(new Qr(0,-1,0)),this.add(a);var s=new ca(90,1,o,t);s.up.set(0,-1,0),s.lookAt(new Qr(0,0,1)),this.add(s);var p=new ca(90,1,o,t);p.up.set(0,-1,0),p.lookAt(new Qr(0,0,-1)),this.add(p);this.renderTarget=new Vr(d,d,{format:zo,magFilter:pc,minFilter:pc}),this.renderTarget.texture.name="CubeCamera",this.update=function(l,t){null===this.parent&&this.updateMatrixWorld();var d=this.renderTarget,i=d.texture.generateMipmaps;d.texture.generateMipmaps=!1,d.activeCubeFace=0,l.render(t,c,d),d.activeCubeFace=1,l.render(t,n,d),d.activeCubeFace=2,l.render(t,r,d),d.activeCubeFace=3,l.render(t,a,d),d.activeCubeFace=4,l.render(t,s,d),d.texture.generateMipmaps=i,d.activeCubeFace=5,l.render(t,p,d),l.setRenderTarget(null)},this.clear=function(o,t,s,i){for(var n=this.renderTarget,r=0;6>r;r++)n.activeCubeFace=r,o.setRenderTarget(n),o.clear(t,s,i);o.setRenderTarget(null)}}function kn(){ct.call(this),this.type="AudioListener",this.context=Ws.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function jd(r){ct.call(this),this.type="Audio",this.context=r.context,this.gain=this.context.createGain(),this.gain.connect(r.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Od(r){jd.call(this,r),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function zd(r,t){this.analyser=r.context.createAnalyser(),this.analyser.fftSize=void 0===t?2048:t,this.data=new Uint8Array(this.analyser.frequencyBinCount),r.getOutput().connect(this.analyser)}function qn(a,t,o){this.binding=a,this.valueSize=o;var i=Float64Array,r;"quaternion"===t?r=this._slerp:"string"===t||"bool"===t?(i=Array,r=this._select):r=this._lerp;this.buffer=new i(4*o),this._mixBufferRegion=r,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function Yn(r,t,a){var o=a||Rd.parseTrackName(t);this._targetGroup=r,this._bindings=r.subscribe_(t,o)}function Rd(r,t,a){this.path=t,this.parsedPath=a||Rd.parseTrackName(t),this.node=Rd.findNode(r,this.parsedPath.nodeName)||r,this.rootNode=r}function Jn(){this.uuid=Mc.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var a=0,o=arguments.length;a!==o;++a)t[arguments[a].uuid]=a;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Qn(l,t,d){this._mixer=l,this._clip=t,this._localRoot=d||null;for(var i=t.tracks,n=i.length,r=Array(n),a={endingStart:is,endingEnd:is},o=0,s;o!==n;++o)s=i[o].createInterpolant(null),r[o]=s,s.settings=a;this._interpolantSettings=a,this._interpolants=r,this._propertyBindings=Array(n),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=es,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Kn(r){this._root=r,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function $n(r){"string"==typeof r&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),r=arguments[1]),this.value=r}function tr(){Rt.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Ud(r,t,a,o){this.uuid=Mc.generateUUID(),this.data=r,this.itemSize=t,this.offset=a,this.normalized=!0===o}function ir(r,t){this.uuid=Mc.generateUUID(),this.array=r,this.stride=t,this.count=void 0===r?0:r.length/t,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.onUploadCallback=function(){},this.version=0}function nr(r,t,a){ir.call(this,r,t),this.meshPerAttribute=a||1}function Pd(r,t,a){gt.call(this,r,t),this.meshPerAttribute=a||1}function Bd(r,t,a,o){this.ray=new rl(r,t),this.near=a||0,this.far=o||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function or(r,t){return r.distance-t.distance}function sr(s,t,l,i){if(!1!==s.visible&&(s.raycast(t,l),!0===i))for(var n=s.children,r=0,a=n.length;r<a;r++)sr(n[r],t,l,!0)}function cr(r){this.autoStart=void 0===r||r,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function hr(r,t,a){return this.radius=void 0===r?1:r,this.phi=void 0===t?0:t,this.theta=void 0===a?0:a,this}function lr(r,t,a){return this.radius=void 0===r?1:r,this.theta=void 0===t?0:t,this.y=void 0===a?0:a,this}function ur(r){ct.call(this),this.material=r,this.render=function(){}}function pr(l,t,d,i){this.object=l,this.size=void 0===t?1:t;var n=void 0===d?16711680:d,p=void 0===i?1:i,u=0,o=this.object.geometry;o&&o.isGeometry?u=3*o.faces.length:o&&o.isBufferGeometry&&(u=o.attributes.normal.count);var s=new Rt,c=new Et(3*(2*u),3);s.addAttribute("position",c),ml.call(this,s,new pl({color:n,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function dr(l,t){ct.call(this),this.light=l,this.light.updateMatrixWorld(),this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;for(var d=new Rt,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],n=0,r=1;32>n;n++,r++){var a=2*(n/32*Or),o=2*(r/32*Or);i.push(O(a),I(a),1,O(o),I(o),1)}d.addAttribute("position",new Et(i,3));var s=new pl({fog:!1});this.cone=new ml(d,s),this.add(this.cone),this.update()}function fr(r){var t=[];r&&r.isBone&&t.push(r);for(var a=0;a<r.children.length;a++)t.push.apply(t,fr(r.children[a]));return t}function mr(l){for(var t=fr(l),d=new Rt,i=[],n=[],r=new W(0,0,1),a=new W(0,1,0),o=0,s;o<t.length;o++)s=t[o],s.parent&&s.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),n.push(r.r,r.g,r.b),n.push(a.r,a.g,a.b));d.addAttribute("position",new Et(i,3)),d.addAttribute("color",new Et(n,3));var c=new pl({vertexColors:Qd,depthTest:!1,depthWrite:!1,transparent:!0});ml.call(this,d,c),this.root=l,this.bones=t,this.matrix=l.matrixWorld,this.matrixAutoUpdate=!1,this.onBeforeRender()}function gr(a,t,o){this.light=a,this.light.updateMatrixWorld(),this.color=o;var i=new Gl(t,4,2),n=new tl({wireframe:!0,fog:!1});Ft.call(this,i,n),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function vr(r,t){ct.call(this),this.light=r,this.light.updateMatrixWorld(),this.matrix=r.matrixWorld,this.matrixAutoUpdate=!1,this.color=t;var a=new pl({fog:!1}),o=new Rt;o.addAttribute("position",new gt(new Float32Array(15),3)),this.line=new ul(o,a),this.add(this.line),this.update()}function yr(o,t,s){ct.call(this),this.light=o,this.light.updateMatrixWorld(),this.matrix=o.matrixWorld,this.matrixAutoUpdate=!1,this.color=s;var i=new Dl(t);i.rotateY(.5*Or),this.material=new tl({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=Qd);var n=i.getAttribute("position"),r=new Float32Array(3*n.count);i.addAttribute("color",new gt(r,3)),this.add(new Ft(i,this.material)),this.update()}function xr(m,t,g,i){m=m||10,t=t||10,g=new W(void 0===g?4473924:g),i=new W(void 0===i?8947848:i);for(var n=t/2,r=m/t,a=m/2,y=[],s=[],c=0,h=0,l=-a;c<=t;c++,l+=r){y.push(-a,0,l,a,0,l),y.push(l,0,-a,l,0,a);var u=c===n?g:i;u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3,u.toArray(s,h),h+=3}var p=new Rt;p.addAttribute("position",new Et(y,3)),p.addAttribute("color",new Et(s,3));var d=new pl({vertexColors:Qd});ml.call(this,p,d)}function br(y,t,M,i,n,r){y=y||10,t=t||16,M=M||8,i=i||64,n=new W(void 0===n?4473924:n),r=new W(void 0===r?8947848:r);var a=[],d=[],f,o,s,c,h,l,u;for(c=0;c<=t;c++)s=c/t*(2*Or),f=I(s)*y,o=O(s)*y,a.push(0,0,0),a.push(f,0,o),u=1&c?n:r,d.push(u.r,u.g,u.b),d.push(u.r,u.g,u.b);for(c=0;c<=M;c++)for(u=1&c?n:r,l=y-y/M*c,h=0;h<i;h++)s=h/i*(2*Or),f=I(s)*l,o=O(s)*l,a.push(f,0,o),d.push(u.r,u.g,u.b),s=(h+1)/i*(2*Or),f=I(s)*l,o=O(s)*l,a.push(f,0,o),d.push(u.r,u.g,u.b);var p=new Rt;p.addAttribute("position",new Et(a,3)),p.addAttribute("color",new Et(d,3));var m=new pl({vertexColors:Qd});ml.call(this,p,m)}function _r(l,t,d,i){this.object=l,this.size=void 0===t?1:t;var n=void 0===d?16776960:d,p=void 0===i?1:i,u=0,o=this.object.geometry;o&&o.isGeometry?u=o.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var s=new Rt,c=new Et(3*(2*u),3);s.addAttribute("position",c),ml.call(this,s,new pl({color:n,linewidth:p})),this.matrixAutoUpdate=!1,this.update()}function wr(a,t,o){ct.call(this),this.light=a,this.light.updateMatrixWorld(),this.matrix=a.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,void 0===t&&(t=1);var i=new Rt;i.addAttribute("position",new Et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));var n=new pl({fog:!1});this.lightPlane=new ul(i,n),this.add(this.lightPlane),i=new Rt,i.addAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new ul(i,n),this.add(this.targetLine),this.update()}function Mr(d){function t(r,t,a){m(r,a),m(t,a)}function m(i,t){r.push(0,0,0),a.push(t.r,t.g,t.b),void 0===o[i]&&(o[i]=[]),o[i].push(r.length/3-1)}var i=new Rt,n=new pl({color:16777215,vertexColors:Ma}),r=[],a=[],o={},s=new W(16755200),c=new W(16711680),g=new W(43775),l=new W(16777215),u=new W(3355443);t("n1","n2",s),t("n2","n4",s),t("n4","n3",s),t("n3","n1",s),t("f1","f2",s),t("f2","f4",s),t("f4","f3",s),t("f3","f1",s),t("n1","f1",s),t("n2","f2",s),t("n3","f3",s),t("n4","f4",s),t("p","n1",c),t("p","n2",c),t("p","n3",c),t("p","n4",c),t("u1","u2",g),t("u2","u3",g),t("u3","u1",g),t("c","t",l),t("p","c",u),t("cn1","cn2",u),t("cn3","cn4",u),t("cf1","cf2",u),t("cf3","cf4",u),i.addAttribute("position",new Et(r,3)),i.addAttribute("color",new Et(a,3)),ml.call(this,i,n),this.camera=d,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=d.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Er(a,t){this.object=a,void 0===t&&(t=16776960);var o=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),n=new Rt;n.setIndex(new gt(o,1)),n.addAttribute("position",new gt(i,3)),ml.call(this,n,new pl({color:t})),this.matrixAutoUpdate=!1,this.update()}function Tr(r,t){this.type="Box3Helper",this.box=r;var o=void 0===t?16776960:t,s=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),n=new Rt;n.setIndex(new gt(s,1)),n.addAttribute("position",new Et([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),ml.call(this,n,new pl({color:o})),this.geometry.computeBoundingSphere(),this.onBeforeRender()}function Sr(r,t,o){this.type="PlaneHelper",this.plane=r,this.size=void 0===t?1:t;var i=void 0===o?16776960:o,l=new Rt;l.addAttribute("position",new Et([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),l.computeBoundingSphere(),ul.call(this,l,new pl({color:i}));var a=new Rt;a.addAttribute("position",new Et([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new Ft(a,new tl({color:i,opacity:.2,transparent:!0,depthWrite:!1}))),this.onBeforeRender()}function Ar(o,t,s,i,l,r){ct.call(this),void 0===i&&(i=16776960),void 0===s&&(s=1),void 0===l&&(l=.2*s),void 0===r&&(r=.2*l),void 0===Xs&&(Xs=new Rt,Xs.addAttribute("position",new Et([0,0,0,0,1,0],3)),Ys=new Kl(0,.5,1,5,1),Ys.translate(0,-.5,0)),this.position.copy(t),this.line=new ul(Xs,new pl({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Ft(Ys,new tl({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(o),this.setLength(s,l,r)}function Rr(a){a=a||1;var t=[0,0,0,a,0,0,0,0,0,0,a,0,0,0,0,0,0,a],o=new Rt;o.addAttribute("position",new Et(t,3)),o.addAttribute("color",new Et([1,0,0,1,0.6,0,0,1,0,0.6,1,0,0,0,1,0,0.6,1],3));var i=new pl({vertexColors:Qd});ml.call(this,o,i)}function Lr(){function l(r,l,a,o){d=r,c=a,i=-3*r+3*l-2*a-o,n=2*r-2*l+a+o}var d=0,c=0,i=0,n=0;return{initCatmullRom:function(t,o,i,n,r){l(o,i,r*(i-t),r*(n-o))},initNonuniformCatmullRom:function(t,d,i,n,r,a,o){var s=(d-t)/r-(i-t)/(r+a)+(i-d)/a,c=(i-d)/a-(n-d)/(a+o)+(n-i)/o;s*=a,c*=a,l(d,i,s,c)},calc:function(r){var t=r*r;return d+c*r+i*t+n*(t*r)}}}function Pr(r){Rn.call(this),2>r.length&&console.warn("THREE.CatmullRomCurve3: Points array needs at least two entries."),this.points=r||[],this.closed=!1}function Cr(r,t,a,o){Rn.call(this),this.v0=r,this.v1=t,this.v2=a,this.v3=o}function Ir(r,t,a){Rn.call(this),this.v0=r,this.v1=t,this.v2=a}function Ur(r,t){Rn.call(this),this.v1=r,this.v2=t}function Nr(o,t,s,i,n,r){Id.call(this,o,t,s,s,i,n,r)}function Dr(r){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Pr.call(this,r),this.type="catmullrom",this.closed=!0}function ia(r){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Pr.call(this,r),this.type="catmullrom"}function na(r){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Pr.call(this,r),this.type="catmullrom"}var ra=Number.isInteger,kd=Number.EPSILON,Fd=Math.atan2,Gd=Math.ceil;void 0===kd&&(kd=2.220446049250313e-16),void 0===ra&&(ra=function(r){return"number"==typeof r&&isFinite(r)&&C(r)===r}),void 0===jr&&(jr=function(r){return 0>r?-1:0<r?1:+r}),void 0===Function.prototype.name&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(a){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(a),o=1,i;o<arguments.length;o++)if(i=arguments[o],void 0!==i&&null!==i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);return t}}(),Object.assign(t.prototype,{addEventListener:function(r,t){void 0===this._listeners&&(this._listeners={});var a=this._listeners;void 0===a[r]&&(a[r]=[]),-1===a[r].indexOf(t)&&a[r].push(t)},hasEventListener:function(r,t){if(void 0===this._listeners)return!1;var a=this._listeners;return void 0!==a[r]&&-1!==a[r].indexOf(t)},removeEventListener:function(a,t){if(void 0!==this._listeners){var o=this._listeners,i=o[a];if(void 0!==i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}}},dispatchEvent:function(o){if(void 0!==this._listeners){var t=this._listeners,s=t[o.type];if(void 0!==s){o.target=this;for(var i=s.slice(0),n=0,r=i.length;n<r;n++)i[n].call(this,o)}}}});var Vd="87",pa=0,fa=1,ma=2,ga=0,va=1,ya=2,xa=0,ba=1,Hd=2,wa=0,Ma=1,Qd=2,Yd=0,Wd=1,Xd=2,qd=3,Zd=4,Kd=5,Jd=100,Ia=101,Ua=102,Na=103,Da=104,Oa=200,Fa=201,Ba=202,za=203,Ga=204,Ha=205,Va=206,ka=207,ja=208,Wa=209,Xa=210,qa=0,Ya=1,Za=2,Ja=3,Qa=4,Ka=5,$a=6,to=7,eo=0,io=1,no=2,ro=0,ao=1,oo=2,so=3,co=4,ho=301,$d=302,ec=303,tc=304,rc=305,ac=306,oc=307,ic=1e3,nc=1001,sc=1002,lc=1003,dc=1004,cc=1005,pc=1006,uc=1007,mc=1008,gc=1009,Ao=1010,Ro=1011,Lo=1012,Po=1013,Co=1014,Io=1015,Uo=1016,No=1017,Do=1018,Oo=1019,Fo=1020,Bo=1021,zo=1022,hc=1023,yc=1024,Vo=1025,ko=1026,Wo=1027,Xo=2001,qo=2002,Yo=2003,Zo=2004,Jo=2100,Qo=2101,Ko=2102,$o=2103,ts=2151,es=2201,is=2400,fc=0,rs=1,as=2,os=3e3,ss=3001,cs=3007,hs=3002,ls=3004,us=3005,ps=3006,ds=3200,fs=3201,Mc={DEG2RAD:Or/180,RAD2DEG:180/Or,generateUUID:function(){var a=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],o=Array(36),i=0,n;return function(){for(var t=0;36>t;t++)8===t||13===t||18===t||23===t?o[t]="-":14===t?o[t]="4":(2>=i&&(i=0|33554432+16777216*Math.random()),n=15&i,i>>=4,o[t]=a[19===t?8|3&n:n]);return o.join("")}}(),clamp:function(r,t,a){return L(t,N(a,r))},euclideanModulo:function(r,t){return(r%t+t)%t},mapLinear:function(a,t,o,i,n){return i+(a-t)*(n-i)/(o-t)},lerp:function(r,t,a){return(1-a)*r+a*t},smoothstep:function(r,t,a){return r<=t?0:r>=a?1:(r=(r-t)/(a-t))*r*(3-2*r)},smootherstep:function(r,t,a){return r<=t?0:r>=a?1:(r=(r-t)/(a-t))*r*r*(r*(6*r-15)+10)},randInt:function(r,t){return r+C(Math.random()*(t-r+1))},randFloat:function(r,t){return r+Math.random()*(t-r)},randFloatSpread:function(r){return r*(.5-Math.random())},degToRad:function(r){return r*Mc.DEG2RAD},radToDeg:function(r){return r*Mc.RAD2DEG},isPowerOfTwo:function(r){return 0==(r&r-1)&&0!==r},nearestPowerOfTwo:function(a){return g(2,A(m(a)/r))},nextPowerOfTwo:function(r){return r--,r|=r>>1,r|=r>>2,r|=r>>4,r|=r>>8,r|=r>>16,++r}};Object.defineProperties(Br.prototype,{width:{get:function(){return this.x},set:function(r){this.x=r}},height:{get:function(){return this.y},set:function(r){this.y=r}}}),Object.assign(Br.prototype,{isVector2:!0,set:function(r,t){return this.x=r,this.y=t,this},setScalar:function(r){return this.x=r,this.y=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(r){return this.x=r.x,this.y=r.y,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this):(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this):(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this},multiply:function(r){return this.x*=r.x,this.y*=r.y,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this},divide:function(r){return this.x/=r.x,this.y/=r.y,this},divideScalar:function(r){return this.multiplyScalar(1/r)},min:function(r){return this.x=N(this.x,r.x),this.y=N(this.y,r.y),this},max:function(r){return this.x=L(this.x,r.x),this.y=L(this.y,r.y),this},clamp:function(r,t){return this.x=L(r.x,N(t.x,this.x)),this.y=L(r.y,N(t.y,this.y)),this},clampScalar:function(){var r=new Br,t=new Br;return function(a,o){return r.set(a,a),t.set(o,o),this.clamp(r,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(L(r,N(t,a)))},floor:function(){return this.x=C(this.x),this.y=C(this.y),this},ceil:function(){return this.x=Gd(this.x),this.y=Gd(this.y),this},round:function(){return this.x=A(this.x),this.y=A(this.y),this},roundToZero:function(){return this.x=0>this.x?Gd(this.x):C(this.x),this.y=0>this.y?Gd(this.y):C(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(r){return this.x*r.x+this.y*r.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return S(this.x*this.x+this.y*this.y)},lengthManhattan:function(){return D(this.x)+D(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var r=Fd(this.y,this.x);return 0>r&&(r+=2*Or),r},distanceTo:function(r){return S(this.distanceToSquared(r))},distanceToSquared:function(r){var t=this.x-r.x,a=this.y-r.y;return t*t+a*a},distanceToManhattan:function(r){return D(this.x-r.x)+D(this.y-r.y)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},equals:function(r){return r.x===this.x&&r.y===this.y},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this},rotateAround:function(o,t){var s=O(t),i=I(t),n=this.x-o.x,r=this.y-o.y;return this.x=n*s-r*i+o.x,this.y=n*i+r*s+o.y,this}});var gs=0;kr.DEFAULT_IMAGE=void 0,kr.DEFAULT_MAPPING=300,Object.defineProperty(kr.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(kr.prototype,t.prototype,{constructor:kr,isTexture:!0,clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.name=r.name,this.image=r.image,this.mipmaps=r.mipmaps.slice(0),this.mapping=r.mapping,this.wrapS=r.wrapS,this.wrapT=r.wrapT,this.magFilter=r.magFilter,this.minFilter=r.minFilter,this.anisotropy=r.anisotropy,this.format=r.format,this.type=r.type,this.offset.copy(r.offset),this.repeat.copy(r.repeat),this.generateMipmaps=r.generateMipmaps,this.premultiplyAlpha=r.premultiplyAlpha,this.flipY=r.flipY,this.unpackAlignment=r.unpackAlignment,this.encoding=r.encoding,this},toJSON:function(r){if(void 0!==r.textures[this.uuid])return r.textures[this.uuid];var t={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],wrap:[this.wrapS,this.wrapT],minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var a=this.image;void 0===a.uuid&&(a.uuid=Mc.generateUUID()),void 0===r.images[a.uuid]&&(r.images[a.uuid]={uuid:a.uuid,url:function(r){var t;if(r instanceof HTMLCanvasElement)t=r;else{t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),t.width=r.width,t.height=r.height;var a=t.getContext("2d");r instanceof ImageData?a.putImageData(r,0,0):a.drawImage(r,0,0,r.width,r.height)}return 2048<t.width||2048<t.height?t.toDataURL("image/jpeg",.6):t.toDataURL("image/png")}(a)}),t.image=a.uuid}return r.textures[this.uuid]=t,t},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(r){if(300===this.mapping){if(r.multiply(this.repeat),r.add(this.offset),0>r.x||1<r.x)switch(this.wrapS){case ic:r.x-=C(r.x);break;case nc:r.x=0>r.x?0:1;break;case sc:1===D(C(r.x)%2)?r.x=Gd(r.x)-r.x:r.x-=C(r.x);}if(0>r.y||1<r.y)switch(this.wrapT){case ic:r.y-=C(r.y);break;case nc:r.y=0>r.y?0:1;break;case sc:1===D(C(r.y)%2)?r.y=Gd(r.y)-r.y:r.y-=C(r.y);}this.flipY&&(r.y=1-r.y)}}}),Object.assign(Fr.prototype,{isVector4:!0,set:function(r,t,a,o){return this.x=r,this.y=t,this.z=a,this.w=o,this},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this.w=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setW:function(r){return this.w=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=void 0===r.w?1:r.w,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this.z+=r.z,this.w+=r.w,this):(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this.w+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this.z=r.z+t.z,this.w=r.w+t.w,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this.z+=r.z*t,this.w+=r.w*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this.z-=r.z,this.w-=r.w,this):(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this.w-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this.z=r.z-t.z,this.w=r.w-t.w,this},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this.w*=r,this},applyMatrix4:function(o){var t=this.x,s=this.y,i=this.z,n=this.w,r=o.elements;return this.x=r[0]*t+r[4]*s+r[8]*i+r[12]*n,this.y=r[1]*t+r[5]*s+r[9]*i+r[13]*n,this.z=r[2]*t+r[6]*s+r[10]*i+r[14]*n,this.w=r[3]*t+r[7]*s+r[11]*i+r[15]*n,this},divideScalar:function(r){return this.multiplyScalar(1/r)},setAxisAngleFromQuaternion:function(r){this.w=2*M(r.w);var t=S(1-r.w*r.w);return 1e-4>t?(this.x=1,this.y=0,this.z=0):(this.x=r.x/t,this.y=r.y/t,this.z=r.z/t),this},setAxisAngleFromRotationMatrix:function(E){var t=E.elements,a=t[0],o=t[4],s=t[8],c=t[1],h=t[5],l=t[9],u=t[2],p=t[6],d=t[10],f,A,i,n;if(.01>D(o-c)&&.01>D(s-u)&&.01>D(l-p)){if(.1>D(o+c)&&.1>D(s+u)&&.1>D(l+p)&&.1>D(a+h+d-3))return this.set(1,0,0,0),this;f=Or;var r=(a+1)/2,m=(h+1)/2,g=(d+1)/2,v=(o+c)/4,y=(s+u)/4,x=(l+p)/4;return r>m&&r>g?.01>r?(A=0,i=.707106781,n=.707106781):(A=S(r),i=v/A,n=y/A):m>g?.01>m?(A=.707106781,i=0,n=.707106781):(i=S(m),A=v/i,n=x/i):.01>g?(A=.707106781,i=.707106781,n=0):(n=S(g),A=y/n,i=x/n),this.set(A,i,n,f),this}var T=S((p-l)*(p-l)+(s-u)*(s-u)+(c-o)*(c-o));return .001>D(T)&&(T=1),this.x=(p-l)/T,this.y=(s-u)/T,this.z=(c-o)/T,this.w=M((a+h+d-1)/2),this},min:function(r){return this.x=N(this.x,r.x),this.y=N(this.y,r.y),this.z=N(this.z,r.z),this.w=N(this.w,r.w),this},max:function(r){return this.x=L(this.x,r.x),this.y=L(this.y,r.y),this.z=L(this.z,r.z),this.w=L(this.w,r.w),this},clamp:function(r,t){return this.x=L(r.x,N(t.x,this.x)),this.y=L(r.y,N(t.y,this.y)),this.z=L(r.z,N(t.z,this.z)),this.w=L(r.w,N(t.w,this.w)),this},clampScalar:function(){var r,t;return function(a,o){return void 0===r&&(r=new Fr,t=new Fr),r.set(a,a,a,a),t.set(o,o,o,o),this.clamp(r,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(L(r,N(t,a)))},floor:function(){return this.x=C(this.x),this.y=C(this.y),this.z=C(this.z),this.w=C(this.w),this},ceil:function(){return this.x=Gd(this.x),this.y=Gd(this.y),this.z=Gd(this.z),this.w=Gd(this.w),this},round:function(){return this.x=A(this.x),this.y=A(this.y),this.z=A(this.z),this.w=A(this.w),this},roundToZero:function(){return this.x=0>this.x?Gd(this.x):C(this.x),this.y=0>this.y?Gd(this.y):C(this.y),this.z=0>this.z?Gd(this.z):C(this.z),this.w=0>this.w?Gd(this.w):C(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z+this.w*r.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return D(this.x)+D(this.y)+D(this.z)+D(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this.z+=(r.z-this.z)*t,this.w+=(r.w-this.w)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z&&r.w===this.w},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this.z=r[t+2],this.w=r[t+3],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r[t+2]=this.z,r[t+3]=this.w,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this.z=r.getZ(t),this.w=r.getW(t),this}}),Object.assign(Gr.prototype,t.prototype,{isWebGLRenderTarget:!0,setSize:function(r,t){this.width===r&&this.height===t||(this.width=r,this.height=t,this.dispose()),this.viewport.set(0,0,r,t),this.scissor.set(0,0,r,t)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.width=r.width,this.height=r.height,this.viewport.copy(r.viewport),this.texture=r.texture.clone(),this.depthBuffer=r.depthBuffer,this.stencilBuffer=r.stencilBuffer,this.depthTexture=r.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Vr.prototype=Object.create(Gr.prototype),Vr.prototype.constructor=Vr,Vr.prototype.isWebGLRenderTargetCube=!0,Object.assign(Hr,{slerp:function(r,t,a,o){return a.copy(r).slerp(t,o)},slerpFlat:function(M,t,E,i,n,r,a){var o=E[i+0],s=E[i+1],c=E[i+2],h=E[i+3],l=n[r+0],u=n[r+1],p=n[r+2],d=n[r+3];if(h!==d||o!==l||s!==u||c!==p){var f=1-a,m=o*l+s*u+c*p+h*d,g=0<=m?1:-1,v=1-m*m;if(v>kd){var y=S(v),x=Fd(y,m*g);f=I(f*x)/y,a=I(a*x)/y}var A=a*g;if(o=o*f+l*A,s=s*f+u*A,c=c*f+p*A,h=h*f+d*A,f===1-a){var T=1/S(o*o+s*s+c*c+h*h);o*=T,s*=T,c*=T,h*=T}}M[t]=o,M[t+1]=s,M[t+2]=c,M[t+3]=h}}),Object.defineProperties(Hr.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(r){this._w=r,this.onChangeCallback()}}}),Object.assign(Hr.prototype,{set:function(r,t,a,o){return this._x=r,this._y=t,this._z=a,this._w=o,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(r){return this._x=r.x,this._y=r.y,this._z=r.z,this._w=r.w,this.onChangeCallback(),this},setFromEuler:function(m,g){if(!m||!m.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var y=m._x,i=m._y,n=m._z,r=m.order,a=O,o=I,s=a(y/2),c=a(i/2),h=a(n/2),l=o(y/2),u=o(i/2),p=o(n/2);return"XYZ"===r?(this._x=l*c*h+s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h-l*u*p):"YXZ"===r?(this._x=l*c*h+s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h+l*u*p):"ZXY"===r?(this._x=l*c*h-s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h-l*u*p):"ZYX"===r?(this._x=l*c*h-s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h+l*u*p):"YZX"===r?(this._x=l*c*h+s*u*p,this._y=s*u*h+l*c*p,this._z=s*c*p-l*u*h,this._w=s*c*h-l*u*p):"XZY"===r&&(this._x=l*c*h-s*u*p,this._y=s*u*h-l*c*p,this._z=s*c*p+l*u*h,this._w=s*c*h+l*u*p),!1!==g&&this.onChangeCallback(),this},setFromAxisAngle:function(r,t){var a=t/2,o=I(a);return this._x=r.x*o,this._y=r.y*o,this._z=r.z*o,this._w=O(a),this.onChangeCallback(),this},setFromRotationMatrix:function(d){var t=d.elements,i=t[0],n=t[4],r=t[8],a=t[1],o=t[5],s=t[9],c=t[2],m=t[6],l=t[10],u=i+o+l,p;return 0<u?(p=.5/S(u+1),this._w=.25/p,this._x=(m-s)*p,this._y=(r-c)*p,this._z=(a-n)*p):i>o&&i>l?(p=2*S(1+i-o-l),this._w=(m-s)/p,this._x=.25*p,this._y=(n+a)/p,this._z=(r+c)/p):o>l?(p=2*S(1+o-i-l),this._w=(r-c)/p,this._x=(n+a)/p,this._y=.25*p,this._z=(s+m)/p):(p=2*S(1+l-i-o),this._w=(a-n)/p,this._x=(r+c)/p,this._y=(s+m)/p,this._z=.25*p),this.onChangeCallback(),this},setFromUnitVectors:function(){var r=new Qr,a;return function(t,o){return void 0===r&&(r=new Qr),a=t.dot(o)+1,1e-6>a?(a=0,D(t.x)>D(t.z)?r.set(-t.y,t.x,0):r.set(0,-t.z,t.y)):r.crossVectors(t,o),this._x=r.x,this._y=r.y,this._z=r.z,this._w=a,this.normalize()}}(),inverse:function(){return this.conjugate().normalize()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(r){return this._x*r._x+this._y*r._y+this._z*r._z+this._w*r._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return S(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var r=this.length();return 0===r?(this._x=0,this._y=0,this._z=0,this._w=1):(r=1/r,this._x*=r,this._y*=r,this._z*=r,this._w*=r),this.onChangeCallback(),this},multiply:function(r,t){return void 0===t?this.multiplyQuaternions(this,r):(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(r,t))},premultiply:function(r){return this.multiplyQuaternions(r,this)},multiplyQuaternions:function(l,t){var d=l._x,i=l._y,n=l._z,r=l._w,a=t._x,o=t._y,s=t._z,c=t._w;return this._x=d*c+r*a+i*s-n*o,this._y=i*c+r*o+n*a-d*s,this._z=n*c+r*s+d*o-i*a,this._w=r*c-d*a-i*o-n*s,this.onChangeCallback(),this},slerp:function(d,t){if(0===t)return this;if(1===t)return this.copy(d);var p=this._x,i=this._y,n=this._z,r=this._w,a=r*d._w+p*d._x+i*d._y+n*d._z;if(0>a?(this._w=-d._w,this._x=-d._x,this._y=-d._y,this._z=-d._z,a=-a):this.copy(d),1<=a)return this._w=r,this._x=p,this._y=i,this._z=n,this;var u=S(1-a*a);if(.001>D(u))return this._w=.5*(r+this._w),this._x=.5*(p+this._x),this._y=.5*(i+this._y),this._z=.5*(n+this._z),this;var s=Fd(u,a),c=I((1-t)*s)/u,m=I(t*s)/u;return this._w=r*c+this._w*m,this._x=p*c+this._x*m,this._y=i*c+this._y*m,this._z=n*c+this._z*m,this.onChangeCallback(),this},equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._w===this._w},fromArray:function(r,t){return void 0===t&&(t=0),this._x=r[t],this._y=r[t+1],this._z=r[t+2],this._w=r[t+3],this.onChangeCallback(),this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this._x,r[t+1]=this._y,r[t+2]=this._z,r[t+3]=this._w,r},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){}}),Object.assign(Qr.prototype,{isVector3:!0,set:function(r,t,a){return this.x=r,this.y=t,this.z=a,this},setScalar:function(r){return this.x=r,this.y=r,this.z=r,this},setX:function(r){return this.x=r,this},setY:function(r){return this.y=r,this},setZ:function(r){return this.z=r,this},setComponent:function(r,t){switch(r){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+r);}return this},getComponent:function(r){switch(r){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+r);}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},add:function(r,t){return void 0===t?(this.x+=r.x,this.y+=r.y,this.z+=r.z,this):(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(r,t))},addScalar:function(r){return this.x+=r,this.y+=r,this.z+=r,this},addVectors:function(r,t){return this.x=r.x+t.x,this.y=r.y+t.y,this.z=r.z+t.z,this},addScaledVector:function(r,t){return this.x+=r.x*t,this.y+=r.y*t,this.z+=r.z*t,this},sub:function(r,t){return void 0===t?(this.x-=r.x,this.y-=r.y,this.z-=r.z,this):(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(r,t))},subScalar:function(r){return this.x-=r,this.y-=r,this.z-=r,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this.z=r.z-t.z,this},multiply:function(r,t){return void 0===t?(this.x*=r.x,this.y*=r.y,this.z*=r.z,this):(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(r,t))},multiplyScalar:function(r){return this.x*=r,this.y*=r,this.z*=r,this},multiplyVectors:function(r,t){return this.x=r.x*t.x,this.y=r.y*t.y,this.z=r.z*t.z,this},applyEuler:function(){var r=new Hr;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(r.setFromEuler(t))}}(),applyAxisAngle:function(){var r=new Hr;return function(t,a){return this.applyQuaternion(r.setFromAxisAngle(t,a))}}(),applyMatrix3:function(a){var t=this.x,o=this.y,i=this.z,n=a.elements;return this.x=n[0]*t+n[3]*o+n[6]*i,this.y=n[1]*t+n[4]*o+n[7]*i,this.z=n[2]*t+n[5]*o+n[8]*i,this},applyMatrix4:function(o){var t=this.x,s=this.y,i=this.z,n=o.elements,r=1/(n[3]*t+n[7]*s+n[11]*i+n[15]);return this.x=(n[0]*t+n[4]*s+n[8]*i+n[12])*r,this.y=(n[1]*t+n[5]*s+n[9]*i+n[13])*r,this.z=(n[2]*t+n[6]*s+n[10]*i+n[14])*r,this},applyQuaternion:function(d){var t=this.x,p=this.y,i=this.z,n=d.x,m=d.y,g=d.z,y=d.w,s=y*t+m*i-g*p,c=y*p+g*t-n*i,h=y*i+n*p-m*t,l=-n*t-m*p-g*i;return this.x=s*y+l*-n+c*-g-h*-m,this.y=c*y+l*-m+h*-n-s*-g,this.z=h*y+l*-g+s*-m-c*-n,this},project:function(){var r=new Yr;return function(t){return r.multiplyMatrices(t.projectionMatrix,r.getInverse(t.matrixWorld)),this.applyMatrix4(r)}}(),unproject:function(){var r=new Yr;return function(t){return r.multiplyMatrices(t.matrixWorld,r.getInverse(t.projectionMatrix)),this.applyMatrix4(r)}}(),transformDirection:function(a){var t=this.x,o=this.y,i=this.z,n=a.elements;return this.x=n[0]*t+n[4]*o+n[8]*i,this.y=n[1]*t+n[5]*o+n[9]*i,this.z=n[2]*t+n[6]*o+n[10]*i,this.normalize()},divide:function(r){return this.x/=r.x,this.y/=r.y,this.z/=r.z,this},divideScalar:function(r){return this.multiplyScalar(1/r)},min:function(r){return this.x=N(this.x,r.x),this.y=N(this.y,r.y),this.z=N(this.z,r.z),this},max:function(r){return this.x=L(this.x,r.x),this.y=L(this.y,r.y),this.z=L(this.z,r.z),this},clamp:function(r,t){return this.x=L(r.x,N(t.x,this.x)),this.y=L(r.y,N(t.y,this.y)),this.z=L(r.z,N(t.z,this.z)),this},clampScalar:function(){var r=new Qr,t=new Qr;return function(a,o){return r.set(a,a,a),t.set(o,o,o),this.clamp(r,t)}}(),clampLength:function(r,t){var a=this.length();return this.divideScalar(a||1).multiplyScalar(L(r,N(t,a)))},floor:function(){return this.x=C(this.x),this.y=C(this.y),this.z=C(this.z),this},ceil:function(){return this.x=Gd(this.x),this.y=Gd(this.y),this.z=Gd(this.z),this},round:function(){return this.x=A(this.x),this.y=A(this.y),this.z=A(this.z),this},roundToZero:function(){return this.x=0>this.x?Gd(this.x):C(this.x),this.y=0>this.y?Gd(this.y):C(this.y),this.z=0>this.z?Gd(this.z):C(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return D(this.x)+D(this.y)+D(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(r){return this.normalize().multiplyScalar(r)},lerp:function(r,t){return this.x+=(r.x-this.x)*t,this.y+=(r.y-this.y)*t,this.z+=(r.z-this.z)*t,this},lerpVectors:function(r,t,a){return this.subVectors(t,r).multiplyScalar(a).add(r)},cross:function(a,t){if(void 0!==t)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,t);var o=this.x,i=this.y,n=this.z;return this.x=i*a.z-n*a.y,this.y=n*a.x-o*a.z,this.z=o*a.y-i*a.x,this},crossVectors:function(l,t){var d=l.x,i=l.y,n=l.z,r=t.x,a=t.y,o=t.z;return this.x=i*o-n*a,this.y=n*r-d*o,this.z=d*a-i*r,this},projectOnVector:function(r){var t=r.dot(this)/r.lengthSq();return this.copy(r).multiplyScalar(t)},projectOnPlane:function(){var r=new Qr;return function(t){return r.copy(this).projectOnVector(t),this.sub(r)}}(),reflect:function(){var r=new Qr;return function(t){return this.sub(r.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(r){var t=this.dot(r)/S(this.lengthSq()*r.lengthSq());return M(Mc.clamp(t,-1,1))},distanceTo:function(r){return S(this.distanceToSquared(r))},distanceToSquared:function(r){var t=this.x-r.x,a=this.y-r.y,o=this.z-r.z;return t*t+a*a+o*o},distanceToManhattan:function(r){return D(this.x-r.x)+D(this.y-r.y)+D(this.z-r.z)},setFromSpherical:function(r){var t=I(r.phi)*r.radius;return this.x=t*I(r.theta),this.y=O(r.phi)*r.radius,this.z=t*O(r.theta),this},setFromCylindrical:function(r){return this.x=r.radius*I(r.theta),this.y=r.y,this.z=r.radius*O(r.theta),this},setFromMatrixPosition:function(r){var t=r.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this},setFromMatrixScale:function(r){var t=this.setFromMatrixColumn(r,0).length(),a=this.setFromMatrixColumn(r,1).length(),o=this.setFromMatrixColumn(r,2).length();return this.x=t,this.y=a,this.z=o,this},setFromMatrixColumn:function(r,t){return this.fromArray(r.elements,4*t)},equals:function(r){return r.x===this.x&&r.y===this.y&&r.z===this.z},fromArray:function(r,t){return void 0===t&&(t=0),this.x=r[t],this.y=r[t+1],this.z=r[t+2],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.x,r[t+1]=this.y,r[t+2]=this.z,r},fromBufferAttribute:function(r,t,a){return void 0!==a&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=r.getX(t),this.y=r.getY(t),this.z=r.getZ(t),this}}),Object.assign(Yr.prototype,{isMatrix4:!0,set:function(y,t,M,i,n,r,a,o,s,c,h,l,u,p,d,f){var m=this.elements;return m[0]=y,m[4]=t,m[8]=M,m[12]=i,m[1]=n,m[5]=r,m[9]=a,m[13]=o,m[2]=s,m[6]=c,m[10]=h,m[14]=l,m[3]=u,m[7]=p,m[11]=d,m[15]=f,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return new Yr().fromArray(this.elements)},copy:function(r){var t=this.elements,a=r.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],this},copyPosition:function(r){var t=this.elements,a=r.elements;return t[12]=a[12],t[13]=a[13],t[14]=a[14],this},extractBasis:function(r,t,a){return r.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),a.setFromMatrixColumn(this,2),this},makeBasis:function(r,t,a){return this.set(r.x,t.x,a.x,0,r.y,t.y,a.y,0,r.z,t.z,a.z,0,0,0,0,1),this},extractRotation:function(){var s=new Qr;return function(t){var l=this.elements,i=t.elements,n=1/s.setFromMatrixColumn(t,0).length(),r=1/s.setFromMatrixColumn(t,1).length(),a=1/s.setFromMatrixColumn(t,2).length();return l[0]=i[0]*n,l[1]=i[1]*n,l[2]=i[2]*n,l[4]=i[4]*r,l[5]=i[5]*r,l[6]=i[6]*r,l[8]=i[8]*a,l[9]=i[9]*a,l[10]=i[10]*a,this}}(),makeRotationFromEuler:function(M){M&&M.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,E=M.x,i=M.y,n=M.z,r=O(E),A=I(E),T=O(i),L=I(i),D=O(n),h=I(n);if("XYZ"===M.order){var N=r*D,u=r*h,p=A*D,d=A*h;t[0]=T*D,t[4]=-T*h,t[8]=L,t[1]=u+p*L,t[5]=N-d*L,t[9]=-A*T,t[2]=d-N*L,t[6]=p+u*L,t[10]=r*T}else if("YXZ"===M.order){var f=T*D,m=T*h,g=L*D,v=L*h;t[0]=f+v*A,t[4]=g*A-m,t[8]=r*L,t[1]=r*h,t[5]=r*D,t[9]=-A,t[2]=m*A-g,t[6]=v+f*A,t[10]=r*T}else if("ZXY"===M.order){var f=T*D,m=T*h,g=L*D,v=L*h;t[0]=f-v*A,t[4]=-r*h,t[8]=g+m*A,t[1]=m+g*A,t[5]=r*D,t[9]=v-f*A,t[2]=-r*L,t[6]=A,t[10]=r*T}else if("ZYX"===M.order){var N=r*D,u=r*h,p=A*D,d=A*h;t[0]=T*D,t[4]=p*L-u,t[8]=N*L+d,t[1]=T*h,t[5]=d*L+N,t[9]=u*L-p,t[2]=-L,t[6]=A*T,t[10]=r*T}else if("YZX"===M.order){var y=r*T,x=r*L,b=A*T,C=A*L;t[0]=T*D,t[4]=C-y*h,t[8]=b*h+x,t[1]=h,t[5]=r*D,t[9]=-A*D,t[2]=-L*D,t[6]=x*h+b,t[10]=y-C*h}else if("XZY"===M.order){var y=r*T,x=r*L,b=A*T,C=A*L;t[0]=T*D,t[4]=-h,t[8]=L*D,t[1]=y*h+C,t[5]=r*D,t[9]=x*h-b,t[2]=b*h-x,t[6]=A*D,t[10]=C*h+y}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(y){var t=this.elements,M=y._x,i=y._y,n=y._z,r=y._w,a=M+M,o=i+i,s=n+n,c=M*a,h=M*o,l=M*s,u=i*o,p=i*s,d=n*s,f=r*a,m=r*o,g=r*s;return t[0]=1-(u+d),t[4]=h-g,t[8]=l+m,t[1]=h+g,t[5]=1-(c+d),t[9]=p-f,t[2]=l-m,t[6]=p+f,t[10]=1-(c+u),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var s=new Qr,t=new Qr,l=new Qr;return function(i,n,r){var a=this.elements;return l.subVectors(i,n),0===l.lengthSq()&&(l.z=1),l.normalize(),s.crossVectors(r,l),0===s.lengthSq()&&(1===D(r.z)?l.x+=1e-4:l.z+=1e-4,l.normalize(),s.crossVectors(r,l)),s.normalize(),t.crossVectors(l,s),a[0]=s.x,a[4]=t.x,a[8]=l.x,a[1]=s.y,a[5]=t.y,a[9]=l.y,a[2]=s.z,a[6]=t.z,a[10]=l.z,this}}(),multiply:function(r,t){return void 0===t?this.multiplyMatrices(this,r):(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(r,t))},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(j,t){var z=j.elements,i=t.elements,n=this.elements,r=z[0],a=z[4],o=z[8],s=z[12],c=z[1],h=z[5],l=z[9],u=z[13],p=z[2],d=z[6],f=z[10],m=z[14],g=z[3],v=z[7],y=z[11],x=z[15],b=i[0],_=i[4],w=i[8],M=i[12],E=i[1],T=i[5],S=i[9],A=i[13],R=i[2],L=i[6],P=i[10],C=i[14],I=i[3],U=i[7],N=i[11],D=i[15];return n[0]=r*b+a*E+o*R+s*I,n[4]=r*_+a*T+o*L+s*U,n[8]=r*w+a*S+o*P+s*N,n[12]=r*M+a*A+o*C+s*D,n[1]=c*b+h*E+l*R+u*I,n[5]=c*_+h*T+l*L+u*U,n[9]=c*w+h*S+l*P+u*N,n[13]=c*M+h*A+l*C+u*D,n[2]=p*b+d*E+f*R+m*I,n[6]=p*_+d*T+f*L+m*U,n[10]=p*w+d*S+f*P+m*N,n[14]=p*M+d*A+f*C+m*D,n[3]=g*b+v*E+y*R+x*I,n[7]=g*_+v*T+y*L+x*U,n[11]=g*w+v*S+y*P+x*N,n[15]=g*M+v*A+y*C+x*D,this},multiplyScalar:function(r){var t=this.elements;return t[0]*=r,t[4]*=r,t[8]*=r,t[12]*=r,t[1]*=r,t[5]*=r,t[9]*=r,t[13]*=r,t[2]*=r,t[6]*=r,t[10]*=r,t[14]*=r,t[3]*=r,t[7]*=r,t[11]*=r,t[15]*=r,this},applyToBufferAttribute:function(){var r=new Qr;return function(t){for(var a=0,o=t.count;a<o;a++)r.x=t.getX(a),r.y=t.getY(a),r.z=t.getZ(a),r.applyMatrix4(this),t.setXYZ(a,r.x,r.y,r.z);return t}}(),determinant:function(){var d=this.elements,t=d[0],m=d[4],i=d[8],g=d[12],y=d[1],a=d[5],o=d[9],s=d[13],c=d[2],h=d[6],l=d[10],u=d[14];return d[3]*(+g*o*h-i*s*h-g*a*l+m*s*l+i*a*u-m*o*u)+d[7]*(+t*o*u-t*s*l+g*y*l-i*y*u+i*s*c-g*o*c)+d[11]*(+t*s*h-t*a*u-g*y*h+m*y*u+g*a*c-m*s*c)+d[15]*(-i*a*c-t*o*h+t*a*l+i*y*h-m*y*l+m*o*c)},transpose:function(){var r=this.elements,a;return a=r[1],r[1]=r[4],r[4]=a,a=r[2],r[2]=r[8],r[8]=a,a=r[6],r[6]=r[9],r[9]=a,a=r[3],r[3]=r[12],r[12]=a,a=r[7],r[7]=r[13],r[13]=a,a=r[11],r[11]=r[14],r[14]=a,this},setPosition:function(r){var t=this.elements;return t[12]=r.x,t[13]=r.y,t[14]=r.z,this},getInverse:function(A,t){var L=this.elements,i=A.elements,n=i[0],r=i[1],a=i[2],o=i[3],s=i[4],c=i[5],h=i[6],l=i[7],u=i[8],p=i[9],d=i[10],f=i[11],m=i[12],g=i[13],v=i[14],y=i[15],x=p*v*l-g*d*l+g*h*f-c*v*f-p*h*y+c*d*y,b=m*d*l-u*v*l-m*h*f+s*v*f+u*h*y-s*d*y,D=u*g*l-m*p*l+m*c*f-s*g*f-u*c*y+s*p*y,N=m*p*h-u*g*h-m*c*d+s*g*d+u*c*v-s*p*v,M=n*x+r*b+a*D+o*N;if(0===M){var E="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(E);return console.warn(E),this.identity()}var T=1/M;return L[0]=x*T,L[1]=(g*d*o-p*v*o-g*a*f+r*v*f+p*a*y-r*d*y)*T,L[2]=(c*v*o-g*h*o+g*a*l-r*v*l-c*a*y+r*h*y)*T,L[3]=(p*h*o-c*d*o-p*a*l+r*d*l+c*a*f-r*h*f)*T,L[4]=b*T,L[5]=(u*v*o-m*d*o+m*a*f-n*v*f-u*a*y+n*d*y)*T,L[6]=(m*h*o-s*v*o-m*a*l+n*v*l+s*a*y-n*h*y)*T,L[7]=(s*d*o-u*h*o+u*a*l-n*d*l-s*a*f+n*h*f)*T,L[8]=D*T,L[9]=(m*p*o-u*g*o-m*r*f+n*g*f+u*r*y-n*p*y)*T,L[10]=(s*g*o-m*c*o+m*r*l-n*g*l-s*r*y+n*c*y)*T,L[11]=(u*c*o-s*p*o-u*r*l+n*p*l+s*r*f-n*c*f)*T,L[12]=N*T,L[13]=(u*g*a-m*p*a+m*r*d-n*g*d-u*r*v+n*p*v)*T,L[14]=(m*c*a-s*g*a-m*r*h+n*g*h+s*r*v-n*c*v)*T,L[15]=(s*p*a-u*c*a+u*r*h-n*p*h-s*r*d+n*c*d)*T,this},scale:function(a){var t=this.elements,o=a.x,i=a.y,n=a.z;return t[0]*=o,t[4]*=i,t[8]*=n,t[1]*=o,t[5]*=i,t[9]*=n,t[2]*=o,t[6]*=i,t[10]*=n,t[3]*=o,t[7]*=i,t[11]*=n,this},getMaxScaleOnAxis:function(){var r=this.elements,t=r[0]*r[0]+r[1]*r[1]+r[2]*r[2],a=r[4]*r[4]+r[5]*r[5]+r[6]*r[6],o=r[8]*r[8]+r[9]*r[9]+r[10]*r[10];return S(L(t,a,o))},makeTranslation:function(r,t,a){return this.set(1,0,0,r,0,1,0,t,0,0,1,a,0,0,0,1),this},makeRotationX:function(r){var t=O(r),a=I(r);return this.set(1,0,0,0,0,t,-a,0,0,a,t,0,0,0,0,1),this},makeRotationY:function(r){var t=O(r),a=I(r);return this.set(t,0,a,0,0,1,0,0,-a,0,t,0,0,0,0,1),this},makeRotationZ:function(r){var t=O(r),a=I(r);return this.set(t,-a,0,0,a,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(l,t){var d=O(t),i=I(t),n=1-d,r=l.x,a=l.y,o=l.z,s=n*r,c=n*a;return this.set(s*r+d,s*a-i*o,s*o+i*a,0,s*a+i*o,c*a+d,c*o-i*r,0,s*o-i*a,c*o+i*r,n*o*o+d,0,0,0,0,1),this},makeScale:function(r,t,a){return this.set(r,0,0,0,0,t,0,0,0,0,a,0,0,0,0,1),this},makeShear:function(r,t,a){return this.set(1,t,a,0,r,1,a,0,r,t,1,0,0,0,0,1),this},compose:function(r,t,a){return this.makeRotationFromQuaternion(t),this.scale(a),this.setPosition(r),this},decompose:function(){var d=new Qr,t=new Yr;return function(p,i,n){var r=this.elements,a=d.set(r[0],r[1],r[2]).length(),m=d.set(r[4],r[5],r[6]).length(),s=d.set(r[8],r[9],r[10]).length();0>this.determinant()&&(a=-a),p.x=r[12],p.y=r[13],p.z=r[14],t.copy(this);var c=1/a,g=1/m,l=1/s;return t.elements[0]*=c,t.elements[1]*=c,t.elements[2]*=c,t.elements[4]*=g,t.elements[5]*=g,t.elements[6]*=g,t.elements[8]*=l,t.elements[9]*=l,t.elements[10]*=l,i.setFromRotationMatrix(t),n.x=a,n.y=m,n.z=s,this}}(),makePerspective:function(s,t,l,i,n,r){void 0===r&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*n/(t-s),a[4]=0,a[8]=(t+s)/(t-s),a[12]=0,a[1]=0,a[5]=2*n/(l-i),a[9]=(l+i)/(l-i),a[13]=0,a[2]=0,a[6]=0,a[10]=-(r+n)/(r-n),a[14]=-2*r*n/(r-n),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(l,t,d,i,n,r){var a=this.elements,o=1/(t-l),s=1/(d-i),c=1/(r-n);return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-((t+l)*o),a[1]=0,a[5]=2*s,a[9]=0,a[13]=-((d+i)*s),a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-((r+n)*c),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(r){for(var t=this.elements,a=r.elements,o=0;16>o;o++)if(t[o]!==a[o])return!1;return!0},fromArray:function(r,t){void 0===t&&(t=0);for(var a=0;16>a;a++)this.elements[a]=r[a+t];return this},toArray:function(r,t){void 0===r&&(r=[]),void 0===t&&(t=0);var a=this.elements;return r[t]=a[0],r[t+1]=a[1],r[t+2]=a[2],r[t+3]=a[3],r[t+4]=a[4],r[t+5]=a[5],r[t+6]=a[6],r[t+7]=a[7],r[t+8]=a[8],r[t+9]=a[9],r[t+10]=a[10],r[t+11]=a[11],r[t+12]=a[12],r[t+13]=a[13],r[t+14]=a[14],r[t+15]=a[15],r}}),s.prototype=Object.create(kr.prototype),s.prototype.constructor=s,s.prototype.isDataTexture=!0,c.prototype=Object.create(kr.prototype),c.prototype.constructor=c,c.prototype.isCubeTexture=!0,Object.defineProperty(c.prototype,"images",{get:function(){return this.image},set:function(r){this.image=r}});var vs=new kr,ys=new c,xs=[],bs=[],_s=new Float32Array(16),ws=new Float32Array(9);H.prototype.setValue=function(o,t){for(var s=this.seq,i=0,n=s.length,r;i!==n;++i)r=s[i],r.setValue(o,t[r.id])};var Ms=/([\w\d_]+)(\])?(\[|\.)?/g;j.prototype.setValue=function(r,t,a){var o=this.map[t];void 0!==o&&o.setValue(r,a,this.renderer)},j.prototype.setOptional=function(r,t,a){var o=t[a];void 0!==o&&this.setValue(r,a,o)},j.upload=function(l,t,d,i){for(var n=0,r=t.length;n!==r;++n){var a=t[n],o=d[a.id];!1!==o.needsUpdate&&a.setValue(l,o.value,i)}},j.seqWithValue=function(o,t){for(var s=[],i=0,n=o.length,r;i!==n;++i)r=o[i],r.id in t&&s.push(r);return s};var Es={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(W.prototype,{isColor:!0,r:1,g:1,b:1,set:function(r){return r&&r.isColor?this.copy(r):"number"==typeof r?this.setHex(r):"string"==typeof r&&this.setStyle(r),this},setScalar:function(r){return this.r=r,this.g=r,this.b=r,this},setHex:function(r){return r=C(r),this.r=(255&r>>16)/255,this.g=(255&r>>8)/255,this.b=(255&r)/255,this},setRGB:function(r,t,a){return this.r=r,this.g=t,this.b=a,this},setHSL:function(){function o(r,a,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?r+6*(a-r)*o:.5>o?a:o<2/3?r+6*(a-r)*(2/3-o):r}return function(t,s,i){if(t=Mc.euclideanModulo(t,1),s=Mc.clamp(s,0,1),i=Mc.clamp(i,0,1),0===s)this.r=this.g=this.b=i;else{var n=.5>=i?i*(1+s):i+s-i*s,r=2*i-n;this.r=o(r,n,t+1/3),this.g=o(r,n,t),this.b=o(r,n,t-1/3)}return this}}(),setStyle:function(d){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+d+" will be ignored.")}var p;if(p=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(d)){var i=p[1],r=p[2],a;switch(i){case"rgb":case"rgba":if(a=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=N(255,parseInt(a[1],10))/255,this.g=N(255,parseInt(a[2],10))/255,this.b=N(255,parseInt(a[3],10))/255,t(a[5]),this;if(a=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r))return this.r=N(100,parseInt(a[1],10))/100,this.g=N(100,parseInt(a[2],10))/100,this.b=N(100,parseInt(a[3],10))/100,t(a[5]),this;break;case"hsl":case"hsla":if(a=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(r)){var n=parseFloat(a[1])/360,o=parseInt(a[2],10)/100,s=parseInt(a[3],10)/100;return t(a[5]),this.setHSL(n,o,s)}}}else if(p=/^\#([A-Fa-f0-9]+)$/.exec(d)){var c=p[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(d&&0<d.length){var c=Es[d];void 0===c?console.warn("THREE.Color: Unknown color "+d):this.setHex(c)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(r){return this.r=r.r,this.g=r.g,this.b=r.b,this},copyGammaToLinear:function(r,t){return void 0===t&&(t=2),this.r=g(r.r,t),this.g=g(r.g,t),this.b=g(r.b,t),this},copyLinearToGamma:function(r,t){void 0===t&&(t=2);var a=0<t?1/t:1;return this.r=g(r.r,a),this.g=g(r.g,a),this.b=g(r.b,a),this},convertGammaToLinear:function(){var r=this.r,t=this.g,a=this.b;return this.r=r*r,this.g=t*t,this.b=a*a,this},convertLinearToGamma:function(){return this.r=S(this.r),this.g=S(this.g),this.b=S(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(d){var t=d||{h:0,s:0,l:0},n=this.r,r=this.g,a=this.b,o=L(n,r,a),s=N(n,r,a),c=(s+o)/2,p,u;if(s===o)p=0,u=0;else{var i=o-s;switch(u=.5>=c?i/(o+s):i/(2-o-s),o){case n:p=(r-a)/i+(r<a?6:0);break;case r:p=(a-n)/i+2;break;case a:p=(n-r)/i+4;}p/=6}return t.h=p,t.s=u,t.l=c,t},getStyle:function(){return"rgb("+(0|255*this.r)+","+(0|255*this.g)+","+(0|255*this.b)+")"},offsetHSL:function(r,t,a){var o=this.getHSL();return o.h+=r,o.s+=t,o.l+=a,this.setHSL(o.h,o.s,o.l),this},add:function(r){return this.r+=r.r,this.g+=r.g,this.b+=r.b,this},addColors:function(r,t){return this.r=r.r+t.r,this.g=r.g+t.g,this.b=r.b+t.b,this},addScalar:function(r){return this.r+=r,this.g+=r,this.b+=r,this},sub:function(r){return this.r=L(0,this.r-r.r),this.g=L(0,this.g-r.g),this.b=L(0,this.b-r.b),this},multiply:function(r){return this.r*=r.r,this.g*=r.g,this.b*=r.b,this},multiplyScalar:function(r){return this.r*=r,this.g*=r,this.b*=r,this},lerp:function(r,t){return this.r+=(r.r-this.r)*t,this.g+=(r.g-this.g)*t,this.b+=(r.b-this.b)*t,this},equals:function(r){return r.r===this.r&&r.g===this.g&&r.b===this.b},fromArray:function(r,t){return void 0===t&&(t=0),this.r=r[t],this.g=r[t+1],this.b=r[t+2],this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this.r,r[t+1]=this.g,r[t+2]=this.b,r},toJSON:function(){return this.getHex()}});var Ts={common:{diffuse:{value:new W(15658734)},opacity:{value:1},map:{value:null},offsetRepeat:{value:new Fr(0,0,1,1)},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new Br(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new W(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new W(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},offsetRepeat:{value:new Fr(0,0,1,1)}}},Ss={merge:function(a){for(var t={},o=0,i;o<a.length;o++)for(var n in i=this.clone(a[o]),i)t[n]=i[n];return t},clone:function(a){var t={};for(var o in a)for(var i in t[o]={},a[o]){var n=a[o][i];t[o][i]=n&&(n.isColor||n.isMatrix3||n.isMatrix4||n.isVector2||n.isVector3||n.isVector4||n.isTexture)?n.clone():Array.isArray(n)?n.slice():n}return t}},As={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tif( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tfloat maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\treturn distanceFalloff * maxDistanceCutoffFactor;\n#else\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n\t}\n\treturn 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat theta = acos( dot( N, V ) );\n\tvec2 uv = vec2(\n\t\tsqrt( saturate( roughness ) ),\n\t\tsaturate( theta / ( 0.5 * PI ) ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.86267 + (0.49788 + 0.01436 * y ) * y;\n\tfloat b = 3.45068 + (4.18814 + y) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = (x > 0.0) ? v : 0.5 * inversesqrt( 1.0 - x * x ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transpose( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tvec3 result = vec3( LTC_ClippedSphereFormFactor( vectorFormFactor ) );\n\treturn result;\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n\treturn specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; ++ i ) {\n\t\tvec4 plane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t\t\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; ++ i ) {\n\t\t\tvec4 plane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t\n\t#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvarying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transpose( const in mat3 v ) {\n\tmat3 tmp;\n\ttmp[0] = vec3(v[0].x, v[1].x, v[2].x);\n\ttmp[1] = vec3(v[0].y, v[1].y, v[2].y);\n\ttmp[2] = vec3(v[0].z, v[1].z, v[2].z);\n\treturn tmp;\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM            = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\n\tfloat D      = max( maxRange / maxRGB, 1.0 );\n\tD            = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract(Le);\n\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n\treturn vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif\n",lights_pars:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltcMat;\tuniform sampler2D ltcMag;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif\n#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar - 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos - halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tfloat norm = texture2D( ltcMag, uv ).a;\n\t\tvec4 t = texture2D( ltcMat, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3(   1,   0, t.y ),\n\t\t\tvec3(   0, t.z,   0 ),\n\t\t\tvec3( t.w,   0, t.x )\n\t\t);\n\t\treflectedLight.directSpecular += lightColor * material.specularColor * norm * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_template:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, 8 );\n\t#endif\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tvec3 radiance = getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), 8 );\n\t#ifndef STANDARD\n\t\tvec3 clearCoatRadiance = getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), 8 );\n\t#else\n\t\tvec3 clearCoatRadiance = vec3( 0.0 );\n\t#endif\n\tRE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\tgl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n\tuniform float logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#endif\n\tuniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tgl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC;\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\t#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) * offsetRepeat.zw + offsetRepeat.xy );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform vec4 offsetRepeat;\n\tuniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif\n",normal_fragment:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n#endif\n#ifdef USE_NORMALMAP\n\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 S = normalize( q0 * st1.t - q1 * st0.t );\n\t\tvec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n\t\tvec3 N = normalize( surf_norm );\n\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\tmapN.xy = normalScale * mapN.xy;\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 1.0 - 2.0 * rgb.xyz;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#define saturate(a) clamp( a, 0.0, 1.0 )\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform vec4 offsetRepeat;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( PHYSICAL ) || defined( LAMBERT ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n\tgl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n\tgl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldPosition );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n\tvWorldPosition = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_template>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#ifdef USE_SIZEATTENUATION\n\t\tgl_PointSize = size * ( scale / - mvPosition.z );\n\t#else\n\t\tgl_PointSize = size;\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <bsdfs>\n#include <lights_pars>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n}\n",shadow_vert:"#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n}\n"},Rs={basic:{uniforms:Ss.merge([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.fog]),vertexShader:As.meshbasic_vert,fragmentShader:As.meshbasic_frag},lambert:{uniforms:Ss.merge([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.fog,Ts.lights,{emissive:{value:new W(0)}}]),vertexShader:As.meshlambert_vert,fragmentShader:As.meshlambert_frag},phong:{uniforms:Ss.merge([Ts.common,Ts.specularmap,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.gradientmap,Ts.fog,Ts.lights,{emissive:{value:new W(0)},specular:{value:new W(1118481)},shininess:{value:30}}]),vertexShader:As.meshphong_vert,fragmentShader:As.meshphong_frag},standard:{uniforms:Ss.merge([Ts.common,Ts.envmap,Ts.aomap,Ts.lightmap,Ts.emissivemap,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,Ts.roughnessmap,Ts.metalnessmap,Ts.fog,Ts.lights,{emissive:{value:new W(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},points:{uniforms:Ss.merge([Ts.points,Ts.fog]),vertexShader:As.points_vert,fragmentShader:As.points_frag},dashed:{uniforms:Ss.merge([Ts.common,Ts.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:As.linedashed_vert,fragmentShader:As.linedashed_frag},depth:{uniforms:Ss.merge([Ts.common,Ts.displacementmap]),vertexShader:As.depth_vert,fragmentShader:As.depth_frag},normal:{uniforms:Ss.merge([Ts.common,Ts.bumpmap,Ts.normalmap,Ts.displacementmap,{opacity:{value:1}}]),vertexShader:As.normal_vert,fragmentShader:As.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:As.cube_vert,fragmentShader:As.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:As.equirect_vert,fragmentShader:As.equirect_frag},distanceRGBA:{uniforms:Ss.merge([Ts.common,Ts.displacementmap,{referencePosition:{value:new Qr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:As.distanceRGBA_vert,fragmentShader:As.distanceRGBA_frag},shadow:{uniforms:Ss.merge([Ts.lights,{color:{value:new W(0)},opacity:{value:1}}]),vertexShader:As.shadow_vert,fragmentShader:As.shadow_frag}};Rs.physical={uniforms:Ss.merge([Rs.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:As.meshphysical_vert,fragmentShader:As.meshphysical_frag},Object.assign(X.prototype,{set:function(r,t){return this.min.copy(r),this.max.copy(t),this},setFromPoints:function(r){this.makeEmpty();for(var t=0,a=r.length;t<a;t++)this.expandByPoint(r[t]);return this},setFromCenterAndSize:function(){var r=new Br;return function(t,a){var o=r.copy(a).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(r){var t=r||new Br;return this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){var t=r||new Br;return this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y},getParameter:function(r,t){return(t||new Br).set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y)},clampPoint:function(r,t){return(t||new Br).copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new Br;return function(t){return r.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}),Y.prototype=Object.create(kr.prototype),Y.prototype.constructor=Y;var Ls=0;Object.assign(J.prototype,t.prototype,{isMaterial:!0,onBeforeCompile:function(){},setValues:function(r){if(void 0!==r)for(var t in r){var a=r[t];if(!(void 0!==a))console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"!==t){var o=this[t];void 0===o?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):o&&o.isColor?o.set(a):o&&o.isVector3&&a&&a.isVector3?o.copy(a):this[t]="overdraw"===t?+a:a}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===a}},toJSON:function(o){function t(r){var t=[];for(var a in r){var o=r[a];delete o.metadata,t.push(o)}return t}var s=void 0===o;s&&(o={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(o).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(o).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(o).uuid),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(o).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(o).uuid,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(o).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(o).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(o).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(o).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(o).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(o).uuid,i.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(o).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Wd&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==xa&&(i.side=this.side),this.vertexColors!==wa&&(i.vertexColors=this.vertexColors),1>this.opacity&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,!0===this.dithering&&(i.dithering=!0),0<this.alphaTest&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),1<this.wireframeLinewidth&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),s){var n=t(o.textures),r=t(o.images);0<n.length&&(i.textures=n),0<r.length&&(i.images=r)}return i},clone:function(){return new this.constructor().copy(this)},copy:function(a){this.name=a.name,this.fog=a.fog,this.lights=a.lights,this.blending=a.blending,this.side=a.side,this.flatShading=a.flatShading,this.vertexColors=a.vertexColors,this.opacity=a.opacity,this.transparent=a.transparent,this.blendSrc=a.blendSrc,this.blendDst=a.blendDst,this.blendEquation=a.blendEquation,this.blendSrcAlpha=a.blendSrcAlpha,this.blendDstAlpha=a.blendDstAlpha,this.blendEquationAlpha=a.blendEquationAlpha,this.depthFunc=a.depthFunc,this.depthTest=a.depthTest,this.depthWrite=a.depthWrite,this.colorWrite=a.colorWrite,this.precision=a.precision,this.polygonOffset=a.polygonOffset,this.polygonOffsetFactor=a.polygonOffsetFactor,this.polygonOffsetUnits=a.polygonOffsetUnits,this.dithering=a.dithering,this.alphaTest=a.alphaTest,this.premultipliedAlpha=a.premultipliedAlpha,this.overdraw=a.overdraw,this.visible=a.visible,this.userData=JSON.parse(JSON.stringify(a.userData)),this.clipShadows=a.clipShadows,this.clipIntersection=a.clipIntersection;var t=a.clippingPlanes,o=null;if(null!==t){var i=t.length;o=Array(i);for(var n=0;n!==i;++n)o[n]=t[n].clone()}return this.clippingPlanes=o,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),aa.prototype=Object.create(J.prototype),aa.prototype.constructor=aa,aa.prototype.isShaderMaterial=!0,aa.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.fragmentShader=r.fragmentShader,this.vertexShader=r.vertexShader,this.uniforms=Ss.clone(r.uniforms),this.defines=r.defines,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.lights=r.lights,this.clipping=r.clipping,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this.extensions=r.extensions,this},aa.prototype.toJSON=function(r){var t=J.prototype.toJSON.call(this,r);return t.uniforms=this.uniforms,t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t},oa.prototype=Object.create(J.prototype),oa.prototype.constructor=oa,oa.prototype.isMeshDepthMaterial=!0,oa.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.depthPacking=r.depthPacking,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this},sa.prototype=Object.create(J.prototype),sa.prototype.constructor=sa,sa.prototype.isMeshDistanceMaterial=!0,sa.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.referencePosition.copy(r.referencePosition),this.nearDistance=r.nearDistance,this.farDistance=r.farDistance,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.map=r.map,this.alphaMap=r.alphaMap,this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this},Object.assign(la.prototype,{isBox3:!0,set:function(r,t){return this.min.copy(r),this.max.copy(t),this},setFromArray:function(d){for(var t=1/0,p=1/0,i=1/0,n=-1/0,r=-1/0,a=-1/0,o=0,s=d.length;o<s;o+=3){var c=d[o],m=d[o+1],l=d[o+2];c<t&&(t=c),m<p&&(p=m),l<i&&(i=l),c>n&&(n=c),m>r&&(r=m),l>a&&(a=l)}return this.min.set(t,p,i),this.max.set(n,r,a),this},setFromBufferAttribute:function(d){for(var t=1/0,p=1/0,i=1/0,n=-1/0,r=-1/0,a=-1/0,o=0,s=d.count;o<s;o++){var c=d.getX(o),m=d.getY(o),l=d.getZ(o);c<t&&(t=c),m<p&&(p=m),l<i&&(i=l),c>n&&(n=c),m>r&&(r=m),l>a&&(a=l)}return this.min.set(t,p,i),this.max.set(n,r,a),this},setFromPoints:function(r){this.makeEmpty();for(var t=0,a=r.length;t<a;t++)this.expandByPoint(r[t]);return this},setFromCenterAndSize:function(){var r=new Qr;return function(t,a){var o=r.copy(a).multiplyScalar(.5);return this.min.copy(t).sub(o),this.max.copy(t).add(o),this}}(),setFromObject:function(r){return this.makeEmpty(),this.expandByObject(r)},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.min.copy(r.min),this.max.copy(r.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(r){var t=r||new Qr;return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(r){var t=r||new Qr;return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(r){return this.min.min(r),this.max.max(r),this},expandByVector:function(r){return this.min.sub(r),this.max.add(r),this},expandByScalar:function(r){return this.min.addScalar(-r),this.max.addScalar(r),this},expandByObject:function(){var a=new Qr;return function(t){var l=this;return t.updateMatrixWorld(!0),t.traverse(function(t){var i=t.geometry,d,n;if(void 0!==i)if(i.isGeometry){var r=i.vertices;for(d=0,n=r.length;d<n;d++)a.copy(r[d]),a.applyMatrix4(t.matrixWorld),l.expandByPoint(a)}else if(i.isBufferGeometry){var o=i.attributes.position;if(void 0!==o)for(d=0,n=o.count;d<n;d++)a.fromBufferAttribute(o,d).applyMatrix4(t.matrixWorld),l.expandByPoint(a)}}),this}}(),containsPoint:function(r){return!(r.x<this.min.x||r.x>this.max.x||r.y<this.min.y||r.y>this.max.y||r.z<this.min.z||r.z>this.max.z)},containsBox:function(r){return this.min.x<=r.min.x&&r.max.x<=this.max.x&&this.min.y<=r.min.y&&r.max.y<=this.max.y&&this.min.z<=r.min.z&&r.max.z<=this.max.z},getParameter:function(r,t){return(t||new Qr).set((r.x-this.min.x)/(this.max.x-this.min.x),(r.y-this.min.y)/(this.max.y-this.min.y),(r.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(r){return!(r.max.x<this.min.x||r.min.x>this.max.x||r.max.y<this.min.y||r.min.y>this.max.y||r.max.z<this.min.z||r.min.z>this.max.z)},intersectsSphere:function(){var r=new Qr;return function(t){return this.clampPoint(t.center,r),r.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(r){var t,a;return 0<r.normal.x?(t=r.normal.x*this.min.x,a=r.normal.x*this.max.x):(t=r.normal.x*this.max.x,a=r.normal.x*this.min.x),0<r.normal.y?(t+=r.normal.y*this.min.y,a+=r.normal.y*this.max.y):(t+=r.normal.y*this.max.y,a+=r.normal.y*this.min.y),0<r.normal.z?(t+=r.normal.z*this.min.z,a+=r.normal.z*this.max.z):(t+=r.normal.z*this.max.z,a+=r.normal.z*this.min.z),t<=r.constant&&a>=r.constant},clampPoint:function(r,t){return(t||new Qr).copy(r).clamp(this.min,this.max)},distanceToPoint:function(){var r=new Qr;return function(t){return r.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var r=new Qr;return function(t){var a=t||new et;return this.getCenter(a.center),a.radius=.5*this.getSize(r).length(),a}}(),intersect:function(r){return this.min.max(r.min),this.max.min(r.max),this.isEmpty()&&this.makeEmpty(),this},union:function(r){return this.min.min(r.min),this.max.max(r.max),this},applyMatrix4:function(){var r=[new Qr,new Qr,new Qr,new Qr,new Qr,new Qr,new Qr,new Qr];return function(t){return this.isEmpty()?this:(r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(r),this)}}(),translate:function(r){return this.min.add(r),this.max.add(r),this},equals:function(r){return r.min.equals(this.min)&&r.max.equals(this.max)}}),Object.assign(et.prototype,{set:function(r,t){return this.center.copy(r),this.radius=t,this},setFromPoints:function(){var s=new la;return function(t,l){var i=this.center;void 0===l?s.setFromPoints(t).getCenter(i):i.copy(l);for(var n=0,r=0,a=t.length;r<a;r++)n=L(n,i.distanceToSquared(t[r]));return this.radius=S(n),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.center.copy(r.center),this.radius=r.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(r){return r.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(r){return r.distanceTo(this.center)-this.radius},intersectsSphere:function(r){var t=this.radius+r.radius;return r.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(r){return r.intersectsSphere(this)},intersectsPlane:function(r){return D(r.distanceToPoint(this.center))<=this.radius},clampPoint:function(r,t){var a=this.center.distanceToSquared(r),o=t||new Qr;return o.copy(r),a>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o},getBoundingBox:function(r){var t=r||new la;return t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(r){return this.center.applyMatrix4(r),this.radius*=r.getMaxScaleOnAxis(),this},translate:function(r){return this.center.add(r),this},equals:function(r){return r.center.equals(this.center)&&r.radius===this.radius}}),Object.assign(it.prototype,{isMatrix3:!0,set:function(l,t,d,i,n,r,a,o,s){var c=this.elements;return c[0]=l,c[1]=i,c[2]=a,c[3]=t,c[4]=n,c[5]=o,c[6]=d,c[7]=r,c[8]=s,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return new this.constructor().fromArray(this.elements)},copy:function(r){var t=this.elements,a=r.elements;return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],this},setFromMatrix4:function(r){var t=r.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this},applyToBufferAttribute:function(){var r=new Qr;return function(t){for(var a=0,o=t.count;a<o;a++)r.x=t.getX(a),r.y=t.getY(a),r.z=t.getZ(a),r.applyMatrix3(this),t.setXYZ(a,r.x,r.y,r.z);return t}}(),multiply:function(r){return this.multiplyMatrices(this,r)},premultiply:function(r){return this.multiplyMatrices(r,this)},multiplyMatrices:function(M,t){var E=M.elements,i=t.elements,n=this.elements,r=E[0],a=E[3],o=E[6],s=E[1],c=E[4],h=E[7],l=E[2],u=E[5],p=E[8],d=i[0],f=i[3],m=i[6],g=i[1],v=i[4],y=i[7],x=i[2],A=i[5],T=i[8];return n[0]=r*d+a*g+o*x,n[3]=r*f+a*v+o*A,n[6]=r*m+a*y+o*T,n[1]=s*d+c*g+h*x,n[4]=s*f+c*v+h*A,n[7]=s*m+c*y+h*T,n[2]=l*d+u*g+p*x,n[5]=l*f+u*v+p*A,n[8]=l*m+u*y+p*T,this},multiplyScalar:function(r){var t=this.elements;return t[0]*=r,t[3]*=r,t[6]*=r,t[1]*=r,t[4]*=r,t[7]*=r,t[2]*=r,t[5]*=r,t[8]*=r,this},determinant:function(){var l=this.elements,t=l[0],d=l[1],i=l[2],n=l[3],r=l[4],a=l[5],o=l[6],s=l[7],c=l[8];return t*r*c-t*a*s-d*n*c+d*a*o+i*n*s-i*r*o},getInverse:function(M,t){M&&M.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var x=M.elements,i=this.elements,n=x[0],r=x[1],a=x[2],o=x[3],s=x[4],c=x[5],h=x[6],l=x[7],u=x[8],p=u*s-c*l,d=c*h-u*o,f=l*o-s*h,m=n*p+r*d+a*f;if(0===m){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===t)throw new Error(g);return console.warn(g),this.identity()}var E=1/m;return i[0]=p*E,i[1]=(a*l-u*r)*E,i[2]=(c*r-a*s)*E,i[3]=d*E,i[4]=(u*n-a*h)*E,i[5]=(a*o-c*n)*E,i[6]=f*E,i[7]=(r*h-l*n)*E,i[8]=(s*n-r*o)*E,this},transpose:function(){var r=this.elements,a;return a=r[1],r[1]=r[3],r[3]=a,a=r[2],r[2]=r[6],r[6]=a,a=r[5],r[5]=r[7],r[7]=a,this},getNormalMatrix:function(r){return this.setFromMatrix4(r).getInverse(this).transpose()},transposeIntoArray:function(r){var t=this.elements;return r[0]=t[0],r[1]=t[3],r[2]=t[6],r[3]=t[1],r[4]=t[4],r[5]=t[7],r[6]=t[2],r[7]=t[5],r[8]=t[8],this},equals:function(r){for(var t=this.elements,a=r.elements,o=0;9>o;o++)if(t[o]!==a[o])return!1;return!0},fromArray:function(r,t){void 0===t&&(t=0);for(var a=0;9>a;a++)this.elements[a]=r[a+t];return this},toArray:function(r,t){void 0===r&&(r=[]),void 0===t&&(t=0);var a=this.elements;return r[t]=a[0],r[t+1]=a[1],r[t+2]=a[2],r[t+3]=a[3],r[t+4]=a[4],r[t+5]=a[5],r[t+6]=a[6],r[t+7]=a[7],r[t+8]=a[8],r}}),Object.assign(nt.prototype,{set:function(r,t){return this.normal.copy(r),this.constant=t,this},setComponents:function(r,t,a,o){return this.normal.set(r,t,a),this.constant=o,this},setFromNormalAndCoplanarPoint:function(r,t){return this.normal.copy(r),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var o=new Qr,t=new Qr;return function(s,i,n){var r=o.subVectors(n,i).cross(t.subVectors(s,i)).normalize();return this.setFromNormalAndCoplanarPoint(r,s),this}}(),clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.normal.copy(r.normal),this.constant=r.constant,this},normalize:function(){var r=1/this.normal.length();return this.normal.multiplyScalar(r),this.constant*=r,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(r){return this.normal.dot(r)+this.constant},distanceToSphere:function(r){return this.distanceToPoint(r.center)-r.radius},projectPoint:function(r,t){return(t||new Qr).copy(this.normal).multiplyScalar(-this.distanceToPoint(r)).add(r)},intersectLine:function(){var s=new Qr;return function(t,l){var i=l||new Qr,n=t.delta(s),r=this.normal.dot(n);if(0!==r){var a=-(t.start.dot(this.normal)+this.constant)/r;if(!(0>a||1<a))return i.copy(n).multiplyScalar(a).add(t.start)}else if(0===this.distanceToPoint(t.start))return i.copy(t.start)}}(),intersectsLine:function(r){var t=this.distanceToPoint(r.start),a=this.distanceToPoint(r.end);return 0>t&&0<a||0>a&&0<t},intersectsBox:function(r){return r.intersectsPlane(this)},intersectsSphere:function(r){return r.intersectsPlane(this)},coplanarPoint:function(r){return(r||new Qr).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var s=new Qr,t=new it;return function(l,i){var n=i||t.getNormalMatrix(l),r=this.coplanarPoint(s).applyMatrix4(l),a=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(a),this}}(),translate:function(r){return this.constant-=r.dot(this.normal),this},equals:function(r){return r.normal.equals(this.normal)&&r.constant===this.constant}}),Object.assign(da.prototype,{set:function(s,t,l,i,n,r){var a=this.planes;return a[0].copy(s),a[1].copy(t),a[2].copy(l),a[3].copy(i),a[4].copy(n),a[5].copy(r),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){for(var t=this.planes,a=0;6>a;a++)t[a].copy(r.planes[a]);return this},setFromMatrix:function(M){var t=this.planes,x=M.elements,i=x[0],n=x[1],r=x[2],a=x[3],o=x[4],s=x[5],c=x[6],h=x[7],l=x[8],u=x[9],p=x[10],d=x[11],f=x[12],m=x[13],g=x[14],E=x[15];return t[0].setComponents(a-i,h-o,d-l,E-f).normalize(),t[1].setComponents(a+i,h+o,d+l,E+f).normalize(),t[2].setComponents(a+n,h+s,d+u,E+m).normalize(),t[3].setComponents(a-n,h-s,d-u,E-m).normalize(),t[4].setComponents(a-r,h-c,d-p,E-g).normalize(),t[5].setComponents(a+r,h+c,d+p,E+g).normalize(),this},intersectsObject:function(){var r=new et;return function(t){var a=t.geometry;return null===a.boundingSphere&&a.computeBoundingSphere(),r.copy(a.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(r)}}(),intersectsSprite:function(){var r=new et;return function(t){return r.center.set(0,0,0),r.radius=.7071067811865476,r.applyMatrix4(t.matrixWorld),this.intersectsSphere(r)}}(),intersectsSphere:function(a){for(var t=this.planes,o=a.center,i=-a.radius,n=0;6>n;n++)if(t[n].distanceToPoint(o)<i)return!1;return!0},intersectsBox:function(){var l=new Qr,t=new Qr;return function(d){for(var i=this.planes,n=0,r;6>n;n++){r=i[n],l.x=0<r.normal.x?d.min.x:d.max.x,t.x=0<r.normal.x?d.max.x:d.min.x,l.y=0<r.normal.y?d.min.y:d.max.y,t.y=0<r.normal.y?d.max.y:d.min.y,l.z=0<r.normal.z?d.min.z:d.max.z,t.z=0<r.normal.z?d.max.z:d.min.z;var a=r.distanceToPoint(l),o=r.distanceToPoint(t);if(0>a&&0>o)return!1}return!0}}(),containsPoint:function(r){for(var t=this.planes,a=0;6>a;a++)if(0>t[a].distanceToPoint(r))return!1;return!0}}),ot.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],ot.DefaultOrder="XYZ",Object.defineProperties(ot.prototype,{x:{get:function(){return this._x},set:function(r){this._x=r,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(r){this._y=r,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(r){this._z=r,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(r){this._order=r,this.onChangeCallback()}}}),Object.assign(ot.prototype,{isEuler:!0,set:function(r,t,a,o){return this._x=r,this._y=t,this._z=a,this._order=o||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(r){return this._x=r._x,this._y=r._y,this._z=r._z,this._order=r._order,this.onChangeCallback(),this},setFromRotationMatrix:function(m,t,g){var i=Math.asin,y=Mc.clamp,n=m.elements,r=n[0],a=n[4],f=n[8],s=n[1],c=n[5],h=n[9],M=n[2],x=n[6],p=n[10];return t=t||this._order,"XYZ"===t?(this._y=i(y(f,-1,1)),.99999>D(f)?(this._x=Fd(-h,p),this._z=Fd(-a,r)):(this._x=Fd(x,c),this._z=0)):"YXZ"===t?(this._x=i(-y(h,-1,1)),.99999>D(h)?(this._y=Fd(f,p),this._z=Fd(s,c)):(this._y=Fd(-M,r),this._z=0)):"ZXY"===t?(this._x=i(y(x,-1,1)),.99999>D(x)?(this._y=Fd(-M,p),this._z=Fd(-a,c)):(this._y=0,this._z=Fd(s,r))):"ZYX"===t?(this._y=i(-y(M,-1,1)),.99999>D(M)?(this._x=Fd(x,p),this._z=Fd(s,r)):(this._x=0,this._z=Fd(-a,c))):"YZX"===t?(this._z=i(y(s,-1,1)),.99999>D(s)?(this._x=Fd(-h,c),this._y=Fd(-M,r)):(this._x=0,this._y=Fd(f,p))):"XZY"===t?(this._z=i(-y(a,-1,1)),.99999>D(a)?(this._x=Fd(x,c),this._y=Fd(f,r)):(this._x=Fd(-h,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==g&&this.onChangeCallback(),this},setFromQuaternion:function(){var r=new Yr;return function(t,a,o){return r.makeRotationFromQuaternion(t),this.setFromRotationMatrix(r,a,o)}}(),setFromVector3:function(r,t){return this.set(r.x,r.y,r.z,t||this._order)},reorder:function(){var r=new Hr;return function(t){return r.setFromEuler(this),this.setFromQuaternion(r,t)}}(),equals:function(r){return r._x===this._x&&r._y===this._y&&r._z===this._z&&r._order===this._order},fromArray:function(r){return this._x=r[0],this._y=r[1],this._z=r[2],void 0!==r[3]&&(this._order=r[3]),this.onChangeCallback(),this},toArray:function(r,t){return void 0===r&&(r=[]),void 0===t&&(t=0),r[t]=this._x,r[t+1]=this._y,r[t+2]=this._z,r[t+3]=this._order,r},toVector3:function(r){return r?r.set(this._x,this._y,this._z):new Qr(this._x,this._y,this._z)},onChange:function(r){return this.onChangeCallback=r,this},onChangeCallback:function(){}}),Object.assign(st.prototype,{set:function(r){this.mask=0|1<<r},enable:function(r){this.mask|=0|1<<r},toggle:function(r){this.mask^=0|1<<r},disable:function(r){this.mask&=~(0|1<<r)},test:function(r){return 0!=(this.mask&r.mask)}});var Ps=0;ct.DefaultUp=new Qr(0,1,0),ct.DefaultMatrixAutoUpdate=!0,Object.assign(ct.prototype,t.prototype,{isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(r){this.matrix.multiplyMatrices(r,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(r){return this.quaternion.premultiply(r),this},setRotationFromAxisAngle:function(r,t){this.quaternion.setFromAxisAngle(r,t)},setRotationFromEuler:function(r){this.quaternion.setFromEuler(r,!0)},setRotationFromMatrix:function(r){this.quaternion.setFromRotationMatrix(r)},setRotationFromQuaternion:function(r){this.quaternion.copy(r)},rotateOnAxis:function(){var r=new Hr;return function(t,a){return r.setFromAxisAngle(t,a),this.quaternion.multiply(r),this}}(),rotateX:function(){var r=new Qr(1,0,0);return function(t){return this.rotateOnAxis(r,t)}}(),rotateY:function(){var r=new Qr(0,1,0);return function(t){return this.rotateOnAxis(r,t)}}(),rotateZ:function(){var r=new Qr(0,0,1);return function(t){return this.rotateOnAxis(r,t)}}(),translateOnAxis:function(){var r=new Qr;return function(t,a){return r.copy(t).applyQuaternion(this.quaternion),this.position.add(r.multiplyScalar(a)),this}}(),translateX:function(){var r=new Qr(1,0,0);return function(t){return this.translateOnAxis(r,t)}}(),translateY:function(){var r=new Qr(0,1,0);return function(t){return this.translateOnAxis(r,t)}}(),translateZ:function(){var r=new Qr(0,0,1);return function(t){return this.translateOnAxis(r,t)}}(),localToWorld:function(r){return r.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var r=new Yr;return function(t){return t.applyMatrix4(r.getInverse(this.matrixWorld))}}(),lookAt:function(){var r=new Yr;return function(t){this.isCamera?r.lookAt(this.position,t,this.up):r.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(r)}}(),add:function(r){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return r===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",r),this):(r&&r.isObject3D?(null!==r.parent&&r.parent.remove(r),r.parent=this,r.dispatchEvent({type:"added"}),this.children.push(r)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",r),this)},remove:function(r){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}var a=this.children.indexOf(r);return-1!==a&&(r.parent=null,r.dispatchEvent({type:"removed"}),this.children.splice(a,1)),this},getObjectById:function(r){return this.getObjectByProperty("id",r)},getObjectByName:function(r){return this.getObjectByProperty("name",r)},getObjectByProperty:function(o,t){if(this[o]===t)return this;for(var s=0,i=this.children.length;s<i;s++){var n=this.children[s],r=n.getObjectByProperty(o,t);if(void 0!==r)return r}},getWorldPosition:function(r){var t=r||new Qr;return this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var r=new Qr,t=new Qr;return function(a){var o=a||new Hr;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,o,t),o}}(),getWorldRotation:function(){var r=new Hr;return function(t){var a=t||new ot;return this.getWorldQuaternion(r),a.setFromQuaternion(r,this.rotation.order,!1)}}(),getWorldScale:function(){var r=new Qr,t=new Hr;return function(a){var o=a||new Qr;return this.updateMatrixWorld(!0),this.matrixWorld.decompose(r,t,o),o}}(),getWorldDirection:function(){var r=new Hr;return function(t){var a=t||new Qr;return this.getWorldQuaternion(r),a.set(0,0,1).applyQuaternion(r)}}(),raycast:function(){},traverse:function(r){r(this);for(var t=this.children,a=0,o=t.length;a<o;a++)t[a].traverse(r)},traverseVisible:function(r){if(!1!==this.visible){r(this);for(var t=this.children,a=0,o=t.length;a<o;a++)t[a].traverseVisible(r)}},traverseAncestors:function(r){var t=this.parent;null!==t&&(r(t),t.traverseAncestors(r))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(r){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||r)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,r=!0);for(var t=this.children,a=0,o=t.length;a<o;a++)t[a].updateMatrixWorld(r)},toJSON:function(d){function t(t,r){return void 0===t[r.uuid]&&(t[r.uuid]=r.toJSON(d)),r.uuid}function m(r){var t=[];for(var a in r){var o=r[a];delete o.metadata,t.push(o)}return t}var i=void 0===d||""===d,n={};i&&(d={geometries:{},materials:{},textures:{},images:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var r={};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),r.matrix=this.matrix.toArray(),void 0!==this.geometry&&(r.geometry=t(d.geometries,this.geometry)),void 0!==this.material)if(Array.isArray(this.material)){for(var a=[],o=0,s=this.material.length;o<s;o++)a.push(t(d.materials,this.material[o]));r.material=a}else r.material=t(d.materials,this.material);if(0<this.children.length){r.children=[];for(var o=0;o<this.children.length;o++)r.children.push(this.children[o].toJSON(d).object)}if(i){var c=m(d.geometries),g=m(d.materials),l=m(d.textures),u=m(d.images);0<c.length&&(n.geometries=c),0<g.length&&(n.materials=g),0<l.length&&(n.textures=l),0<u.length&&(n.images=u)}return n.object=r,n},clone:function(r){return new this.constructor().copy(this,r)},copy:function(r,t){if(void 0===t&&(t=!0),this.name=r.name,this.up.copy(r.up),this.position.copy(r.position),this.quaternion.copy(r.quaternion),this.scale.copy(r.scale),this.matrix.copy(r.matrix),this.matrixWorld.copy(r.matrixWorld),this.matrixAutoUpdate=r.matrixAutoUpdate,this.matrixWorldNeedsUpdate=r.matrixWorldNeedsUpdate,this.layers.mask=r.layers.mask,this.visible=r.visible,this.castShadow=r.castShadow,this.receiveShadow=r.receiveShadow,this.frustumCulled=r.frustumCulled,this.renderOrder=r.renderOrder,this.userData=JSON.parse(JSON.stringify(r.userData)),!0===t)for(var a=0,o;a<r.children.length;a++)o=r.children[a],this.add(o.clone());return this}}),lt.prototype=Object.assign(Object.create(ct.prototype),{constructor:lt,isCamera:!0,copy:function(r,t){return ct.prototype.copy.call(this,r,t),this.matrixWorldInverse.copy(r.matrixWorldInverse),this.projectionMatrix.copy(r.projectionMatrix),this},getWorldDirection:function(){var r=new Hr;return function(t){var a=t||new Qr;return this.getWorldQuaternion(r),a.set(0,0,-1).applyQuaternion(r)}}(),updateMatrixWorld:function(r){ct.prototype.updateMatrixWorld.call(this,r),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return new this.constructor().copy(this)}}),ht.prototype=Object.assign(Object.create(lt.prototype),{constructor:ht,isOrthographicCamera:!0,copy:function(r,t){return lt.prototype.copy.call(this,r,t),this.left=r.left,this.right=r.right,this.top=r.top,this.bottom=r.bottom,this.near=r.near,this.far=r.far,this.zoom=r.zoom,this.view=null===r.view?null:Object.assign({},r.view),this},setViewOffset:function(o,s,l,d,c,p){this.view={fullWidth:o,fullHeight:s,offsetX:l,offsetY:d,width:c,height:p},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var d=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),p=(this.right+this.left)/2,i=(this.top+this.bottom)/2,n=p-d,r=p+d,a=i+t,o=i-t;if(null!==this.view){var s=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),m=(this.right-this.left)/this.view.width,l=(this.top-this.bottom)/this.view.height;n+=m*(this.view.offsetX/s),r=n+m*(this.view.width/s),a-=l*(this.view.offsetY/c),o=a-l*(this.view.height/c)}this.projectionMatrix.makeOrthographic(n,r,a,o,this.near,this.far)},toJSON:function(r){var t=ct.prototype.toJSON.call(this,r);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}),ca.prototype=Object.assign(Object.create(lt.prototype),{constructor:ca,isPerspectiveCamera:!0,copy:function(r,t){return lt.prototype.copy.call(this,r,t),this.fov=r.fov,this.zoom=r.zoom,this.near=r.near,this.far=r.far,this.focus=r.focus,this.aspect=r.aspect,this.view=null===r.view?null:Object.assign({},r.view),this.filmGauge=r.filmGauge,this.filmOffset=r.filmOffset,this},setFocalLength:function(r){var t=.5*this.getFilmHeight()/r;this.fov=2*Mc.RAD2DEG*l(t),this.updateProjectionMatrix()},getFocalLength:function(){var r=x(.5*Mc.DEG2RAD*this.fov);return .5*this.getFilmHeight()/r},getEffectiveFOV:function(){return 2*Mc.RAD2DEG*l(x(.5*Mc.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*N(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/L(this.aspect,1)},setViewOffset:function(o,s,l,d,c,p){this.aspect=o/s,this.view={fullWidth:o,fullHeight:s,offsetX:l,offsetY:d,width:c,height:p},this.updateProjectionMatrix()},clearViewOffset:function(){this.view=null,this.updateProjectionMatrix()},updateProjectionMatrix:function(){var l=this.near,t=l*x(.5*Mc.DEG2RAD*this.fov)/this.zoom,d=2*t,i=this.aspect*d,n=-.5*i,r=this.view;if(null!==r){var a=r.fullWidth,o=r.fullHeight;n+=r.offsetX*i/a,t-=r.offsetY*d/o,i*=r.width/a,d*=r.height/o}var s=this.filmOffset;0!==s&&(n+=l*s/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+i,t,t-d,l,this.far)},toJSON:function(r){var t=ct.prototype.toJSON.call(this,r);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}),Object.assign(ua.prototype,{clone:function(){return new this.constructor().copy(this)},copy:function(r){this.a=r.a,this.b=r.b,this.c=r.c,this.normal.copy(r.normal),this.color.copy(r.color),this.materialIndex=r.materialIndex;for(var t=0,a=r.vertexNormals.length;t<a;t++)this.vertexNormals[t]=r.vertexNormals[t].clone();for(var t=0,a=r.vertexColors.length;t<a;t++)this.vertexColors[t]=r.vertexColors[t].clone();return this}});var Cs=0;Object.assign(mt.prototype,t.prototype,{isGeometry:!0,applyMatrix:function(s){for(var t=new it().getNormalMatrix(s),l=0,i=this.vertices.length;l<i;l++)this.vertices[l].applyMatrix4(s);for(var l=0,i=this.faces.length,n;l<i;l++){n=this.faces[l],n.normal.applyMatrix3(t).normalize();for(var r=0,a=n.vertexNormals.length;r<a;r++)n.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var r=new Yr;return function(t){return r.makeRotationX(t),this.applyMatrix(r),this}}(),rotateY:function(){var r=new Yr;return function(t){return r.makeRotationY(t),this.applyMatrix(r),this}}(),rotateZ:function(){var r=new Yr;return function(t){return r.makeRotationZ(t),this.applyMatrix(r),this}}(),translate:function(){var r=new Yr;return function(t,a,o){return r.makeTranslation(t,a,o),this.applyMatrix(r),this}}(),scale:function(){var r=new Yr;return function(t,a,o){return r.makeScale(t,a,o),this.applyMatrix(r),this}}(),lookAt:function(){var r=new ct;return function(t){r.lookAt(t),r.updateMatrix(),this.applyMatrix(r.matrix)}}(),fromBufferGeometry:function(i){function t(n,t,m,i){var r=void 0===E?[]:[u[n].clone(),u[t].clone(),u[m].clone()],a=void 0===s?[]:[M.colors[n].clone(),M.colors[t].clone(),M.colors[m].clone()],o=new ua(n,t,m,r,a,i);M.faces.push(o),void 0!==h&&M.faceVertexUvs[0].push([p[n].clone(),p[t].clone(),p[m].clone()]),void 0!==l&&M.faceVertexUvs[1].push([d[n].clone(),d[t].clone(),d[m].clone()])}var M=this,n=null===i.index?void 0:i.index.array,r=i.attributes,a=r.position.array,E=void 0===r.normal?void 0:r.normal.array,s=void 0===r.color?void 0:r.color.array,h=void 0===r.uv?void 0:r.uv.array,l=void 0===r.uv2?void 0:r.uv2.array;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var u=[],p=[],d=[],o=0,c=0;o<a.length;o+=3,c+=2)M.vertices.push(new Qr(a[o],a[o+1],a[o+2])),void 0!==E&&u.push(new Qr(E[o],E[o+1],E[o+2])),void 0!==s&&M.colors.push(new W(s[o],s[o+1],s[o+2])),void 0!==h&&p.push(new Br(h[c],h[c+1])),void 0!==l&&d.push(new Br(l[c],l[c+1]));var m=i.groups;if(0<m.length)for(var o=0;o<m.length;o++)for(var g=m[o],y=g.start,f=g.count,c=y;c<y+f;c+=3)void 0===n?t(c,c+1,c+2,g.materialIndex):t(n[c],n[c+1],n[c+2],g.materialIndex);else if(void 0!==n)for(var o=0;o<n.length;o+=3)t(n[o],n[o+1],n[o+2]);else for(var o=0;o<a.length/3;o+=3)t(o,o+1,o+2);return this.computeFaceNormals(),null!==i.boundingBox&&(this.boundingBox=i.boundingBox.clone()),null!==i.boundingSphere&&(this.boundingSphere=i.boundingSphere.clone()),this},center:function(){this.computeBoundingBox();var r=this.boundingBox.getCenter().negate();return this.translate(r.x,r.y,r.z),r},normalize:function(){this.computeBoundingSphere();var r=this.boundingSphere.center,t=this.boundingSphere.radius,a=0===t?1:1/t,o=new Yr;return o.set(a,0,0,-a*r.x,0,a,0,-a*r.y,0,0,a,-a*r.z,0,0,0,1),this.applyMatrix(o),this},computeFaceNormals:function(){for(var l=new Qr,t=new Qr,d=0,i=this.faces.length;d<i;d++){var n=this.faces[d],r=this.vertices[n.a],a=this.vertices[n.b],o=this.vertices[n.c];l.subVectors(o,a),t.subVectors(r,a),l.cross(t),l.normalize(),n.normal.copy(l)}},computeVertexNormals:function(c){void 0===c&&(c=!0);var t,m,i,n,r,a;for(a=Array(this.vertices.length),t=0,m=this.vertices.length;t<m;t++)a[t]=new Qr;if(c){var o=new Qr,u=new Qr,p,s,g;for(i=0,n=this.faces.length;i<n;i++)r=this.faces[i],p=this.vertices[r.a],s=this.vertices[r.b],g=this.vertices[r.c],o.subVectors(g,s),u.subVectors(p,s),o.cross(u),a[r.a].add(o),a[r.b].add(o),a[r.c].add(o)}else for(this.computeFaceNormals(),i=0,n=this.faces.length;i<n;i++)r=this.faces[i],a[r.a].add(r.normal),a[r.b].add(r.normal),a[r.c].add(r.normal);for(t=0,m=this.vertices.length;t<m;t++)a[t].normalize();for(i=0,n=this.faces.length;i<n;i++){r=this.faces[i];var l=r.vertexNormals;3===l.length?(l[0].copy(a[r.a]),l[1].copy(a[r.b]),l[2].copy(a[r.c])):(l[0]=a[r.a].clone(),l[1]=a[r.b].clone(),l[2]=a[r.c].clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var r,t,a;for(this.computeFaceNormals(),r=0,t=this.faces.length;r<t;r++){a=this.faces[r];var o=a.vertexNormals;3===o.length?(o[0].copy(a.normal),o[1].copy(a.normal),o[2].copy(a.normal)):(o[0]=a.normal.clone(),o[1]=a.normal.clone(),o[2]=a.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var d,t,c,i,n;for(c=0,i=this.faces.length;c<i;c++)for(n=this.faces[c],n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]),d=0,t=n.vertexNormals.length;d<t;d++)n.__originalVertexNormals[d]?n.__originalVertexNormals[d].copy(n.vertexNormals[d]):n.__originalVertexNormals[d]=n.vertexNormals[d].clone();var r=new mt;for(r.faces=this.faces,d=0,t=this.morphTargets.length;d<t;d++){if(!this.morphNormals[d]){this.morphNormals[d]={},this.morphNormals[d].faceNormals=[],this.morphNormals[d].vertexNormals=[];var a=this.morphNormals[d].faceNormals,p=this.morphNormals[d].vertexNormals,l,o;for(c=0,i=this.faces.length;c<i;c++)l=new Qr,o={a:new Qr,b:new Qr,c:new Qr},a.push(l),p.push(o)}var s=this.morphNormals[d];r.vertices=this.morphTargets[d].vertices,r.computeFaceNormals(),r.computeVertexNormals();var l,o;for(c=0,i=this.faces.length;c<i;c++)n=this.faces[c],l=s.faceNormals[c],o=s.vertexNormals[c],l.copy(n.normal),o.a.copy(n.vertexNormals[0]),o.b.copy(n.vertexNormals[1]),o.c.copy(n.vertexNormals[2])}for(c=0,i=this.faces.length;c<i;c++)n=this.faces[c],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeLineDistances:function(){for(var r=0,t=this.vertices,a=0,o=t.length;a<o;a++)0<a&&(r+=t[a].distanceTo(t[a-1])),this.lineDistances[a]=r},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new la),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new et),this.boundingSphere.setFromPoints(this.vertices)},merge:function(A,L,D){if(!A||!A.isGeometry)return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",A);var i=this.vertices.length,r=this.vertices,a=A.vertices,o=this.faces,s=A.faces,c=this.faceVertexUvs[0],h=A.faceVertexUvs[0],l=this.colors,u=A.colors,p;void 0===D&&(D=0),void 0!==L&&(p=new it().getNormalMatrix(L));for(var n=0,d=a.length;n<d;n++){var f=a[n],m=f.clone();void 0!==L&&m.applyMatrix4(L),r.push(m)}for(var n=0,d=u.length;n<d;n++)l.push(u[n].clone());for(n=0,d=s.length;n<d;n++){var g=s[n],b=g.vertexNormals,N=g.vertexColors,w,v,y;w=new ua(g.a+i,g.b+i,g.c+i),w.normal.copy(g.normal),void 0!==p&&w.normal.applyMatrix3(p).normalize();for(var x=0,M=b.length;x<M;x++)v=b[x].clone(),void 0!==p&&v.applyMatrix3(p).normalize(),w.vertexNormals.push(v);w.color.copy(g.color);for(var x=0,M=N.length;x<M;x++)y=N[x],w.vertexColors.push(y.clone());w.materialIndex=g.materialIndex+D,o.push(w)}for(n=0,d=h.length;n<d;n++){var E=h[n],T=[];if(void 0!==E){for(var x=0,M=E.length;x<M;x++)T.push(E[x].clone());c.push(T)}}},mergeMesh:function(r){return r&&r.isMesh?void(r.matrixAutoUpdate&&r.updateMatrix(),this.merge(r.geometry,r.matrix)):void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",r)},mergeVertices:function(){var g={},c=[],h=[],l=10000,u,t,y,i,n,r,a,o;for(y=0,i=this.vertices.length;y<i;y++)u=this.vertices[y],t=A(u.x*l)+"_"+A(u.y*l)+"_"+A(u.z*l),void 0===g[t]?(g[t]=y,c.push(this.vertices[y]),h[y]=c.length-1):h[y]=h[g[t]];var s=[];for(y=0,i=this.faces.length;y<i;y++){n=this.faces[y],n.a=h[n.a],n.b=h[n.b],n.c=h[n.c],r=[n.a,n.b,n.c];for(var p=0;3>p;p++)if(r[p]===r[(p+1)%3]){s.push(y);break}}for(y=s.length-1;0<=y;y--){var d=s[y];for(this.faces.splice(d,1),a=0,o=this.faceVertexUvs.length;a<o;a++)this.faceVertexUvs[a].splice(d,1)}var f=this.vertices.length-c.length;return this.vertices=c,f},sortFacesByMaterialIndex:function(){function l(r,a){return r.materialIndex-a.materialIndex}for(var t=this.faces,d=t.length,i=0;i<d;i++)t[i]._id=i;t.sort(l);var n=this.faceVertexUvs[0],o=this.faceVertexUvs[1],s,r;n&&n.length===d&&(s=[]),o&&o.length===d&&(r=[]);for(var i=0,a;i<d;i++)a=t[i]._id,s&&s.push(n[a]),r&&r.push(o[a]);s&&(this.faceVertexUvs[0]=s),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function A(r,a,o){return o?r|1<<a:r&~(1<<a)}function t(r){var t=r.x.toString()+r.y.toString()+r.z.toString();return void 0===u[t]?(u[t]=l.length/3,l.push(r.x,r.y,r.z),u[t]):u[t]}function L(r){var t=r.r.toString()+r.g.toString()+r.b.toString();return void 0===d[t]?(d[t]=p.length,p.push(r.getHex()),d[t]):d[t]}function i(r){var t=r.x.toString()+r.y.toString();return void 0===m[t]?(m[t]=f.length/2,f.push(r.x,r.y),m[t]):m[t]}var n={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),void 0!==this.parameters){var r=this.parameters;for(var a in r)void 0!==r[a]&&(n[a]=r[a]);return n}for(var o=[],s=0,c;s<this.vertices.length;s++)c=this.vertices[s],o.push(c.x,c.y,c.z);for(var h=[],l=[],u={},p=[],d={},f=[],m={},s=0;s<this.faces.length;s++){var g=this.faces[s],v=void 0!==this.faceVertexUvs[0][s],y=0<g.normal.length(),x=0<g.vertexNormals.length,b=1!==g.color.r||1!==g.color.g||1!==g.color.b,D=0<g.vertexColors.length,N=0;if(N=A(N,0,0),N=A(N,1,!0),N=A(N,2,!1),N=A(N,3,v),N=A(N,4,y),N=A(N,5,x),N=A(N,6,b),N=A(N,7,D),h.push(N),h.push(g.a,g.b,g.c),h.push(g.materialIndex),v){var M=this.faceVertexUvs[0][s];h.push(i(M[0]),i(M[1]),i(M[2]))}if(y&&h.push(t(g.normal)),x){var E=g.vertexNormals;h.push(t(E[0]),t(E[1]),t(E[2]))}if(b&&h.push(L(g.color)),D){var T=g.vertexColors;h.push(L(T[0]),L(T[1]),L(T[2]))}}return n.data={},n.data.vertices=o,n.data.normals=l,0<p.length&&(n.data.colors=p),0<f.length&&(n.data.uvs=[f]),n.data.faces=h,n},clone:function(){return new mt().copy(this)},copy:function(A){var t,T,i,n,r,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=A.name;var o=A.vertices;for(t=0,T=o.length;t<T;t++)this.vertices.push(o[t].clone());var s=A.colors;for(t=0,T=s.length;t<T;t++)this.colors.push(s[t].clone());var c=A.faces;for(t=0,T=c.length;t<T;t++)this.faces.push(c[t].clone());for(t=0,T=A.faceVertexUvs.length;t<T;t++){var h=A.faceVertexUvs[t];for(void 0===this.faceVertexUvs[t]&&(this.faceVertexUvs[t]=[]),i=0,n=h.length;i<n;i++){var l=h[i],u=[];for(r=0,a=l.length;r<a;r++){var p=l[r];u.push(p.clone())}this.faceVertexUvs[t].push(u)}}var d=A.morphTargets;for(t=0,T=d.length;t<T;t++){var f={};if(f.name=d[t].name,void 0!==d[t].vertices)for(f.vertices=[],i=0,n=d[t].vertices.length;i<n;i++)f.vertices.push(d[t].vertices[i].clone());if(void 0!==d[t].normals)for(f.normals=[],i=0,n=d[t].normals.length;i<n;i++)f.normals.push(d[t].normals[i].clone());this.morphTargets.push(f)}var m=A.morphNormals;for(t=0,T=m.length;t<T;t++){var g={};if(void 0!==m[t].vertexNormals)for(g.vertexNormals=[],i=0,n=m[t].vertexNormals.length;i<n;i++){var v=m[t].vertexNormals[i],y={};y.a=v.a.clone(),y.b=v.b.clone(),y.c=v.c.clone(),g.vertexNormals.push(y)}if(void 0!==m[t].faceNormals)for(g.faceNormals=[],i=0,n=m[t].faceNormals.length;i<n;i++)g.faceNormals.push(m[t].faceNormals[i].clone());this.morphNormals.push(g)}var x=A.skinWeights;for(t=0,T=x.length;t<T;t++)this.skinWeights.push(x[t].clone());var b=A.skinIndices;for(t=0,T=b.length;t<T;t++)this.skinIndices.push(b[t].clone());var L=A.lineDistances;for(t=0,T=L.length;t<T;t++)this.lineDistances.push(L[t]);var D=A.boundingBox;null!==D&&(this.boundingBox=D.clone());var M=A.boundingSphere;return null!==M&&(this.boundingSphere=M.clone()),this.elementsNeedUpdate=A.elementsNeedUpdate,this.verticesNeedUpdate=A.verticesNeedUpdate,this.uvsNeedUpdate=A.uvsNeedUpdate,this.normalsNeedUpdate=A.normalsNeedUpdate,this.colorsNeedUpdate=A.colorsNeedUpdate,this.lineDistancesNeedUpdate=A.lineDistancesNeedUpdate,this.groupsNeedUpdate=A.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(gt.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(gt.prototype,{isBufferAttribute:!0,setArray:function(r){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===r?0:r.length/this.itemSize,this.array=r},setDynamic:function(r){return this.dynamic=r,this},copy:function(r){return this.array=new r.array.constructor(r.array),this.itemSize=r.itemSize,this.count=r.count,this.normalized=r.normalized,this.dynamic=r.dynamic,this},copyAt:function(a,t,o){a*=this.itemSize,o*=t.itemSize;for(var i=0,n=this.itemSize;i<n;i++)this.array[a+i]=t.array[o+i];return this},copyArray:function(r){return this.array.set(r),this},copyColorsArray:function(o){for(var t=this.array,s=0,i=0,n=o.length,r;i<n;i++)r=o[i],void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new W),t[s++]=r.r,t[s++]=r.g,t[s++]=r.b;return this},copyIndicesArray:function(o){for(var t=this.array,s=0,i=0,n=o.length,r;i<n;i++)r=o[i],t[s++]=r.a,t[s++]=r.b,t[s++]=r.c;return this},copyVector2sArray:function(i){for(var t=this.array,s=0,n=0,r=i.length,a;n<r;n++)a=i[n],void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",n),a=new Br),t[s++]=a.x,t[s++]=a.y;return this},copyVector3sArray:function(o){for(var t=this.array,s=0,i=0,n=o.length,r;i<n;i++)r=o[i],void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Qr),t[s++]=r.x,t[s++]=r.y,t[s++]=r.z;return this},copyVector4sArray:function(r){for(var t=this.array,s=0,i=0,n=r.length,a;i<n;i++)a=r[i],void 0===a&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),a=new Fr),t[s++]=a.x,t[s++]=a.y,t[s++]=a.z,t[s++]=a.w;return this},set:function(r,t){return void 0===t&&(t=0),this.array.set(r,t),this},getX:function(r){return this.array[r*this.itemSize]},setX:function(r,t){return this.array[r*this.itemSize]=t,this},getY:function(r){return this.array[r*this.itemSize+1]},setY:function(r,t){return this.array[r*this.itemSize+1]=t,this},getZ:function(r){return this.array[r*this.itemSize+2]},setZ:function(r,t){return this.array[r*this.itemSize+2]=t,this},getW:function(r){return this.array[r*this.itemSize+3]},setW:function(r,t){return this.array[r*this.itemSize+3]=t,this},setXY:function(r,t,a){return r*=this.itemSize,this.array[r+0]=t,this.array[r+1]=a,this},setXYZ:function(r,t,a,o){return r*=this.itemSize,this.array[r+0]=t,this.array[r+1]=a,this.array[r+2]=o,this},setXYZW:function(a,t,o,i,n){return a*=this.itemSize,this.array[a+0]=t,this.array[a+1]=o,this.array[a+2]=i,this.array[a+3]=n,this},onUpload:function(r){return this.onUploadCallback=r,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),vt.prototype=Object.create(gt.prototype),vt.prototype.constructor=vt,yt.prototype=Object.create(gt.prototype),yt.prototype.constructor=yt,xt.prototype=Object.create(gt.prototype),xt.prototype.constructor=xt,bt.prototype=Object.create(gt.prototype),bt.prototype.constructor=bt,_t.prototype=Object.create(gt.prototype),_t.prototype.constructor=_t,wt.prototype=Object.create(gt.prototype),wt.prototype.constructor=wt,Mt.prototype=Object.create(gt.prototype),Mt.prototype.constructor=Mt,Et.prototype=Object.create(gt.prototype),Et.prototype.constructor=Et,Tt.prototype=Object.create(gt.prototype),Tt.prototype.constructor=Tt,Object.assign(St.prototype,{computeGroups:function(s){for(var t=[],i=void 0,l=s.faces,r=0,a,d;r<l.length;r++)d=l[r],d.materialIndex!==i&&(i=d.materialIndex,void 0!==a&&(a.count=3*r-a.start,t.push(a)),a={start:3*r,materialIndex:i});void 0!==a&&(a.count=3*r-a.start,t.push(a)),this.groups=t},fromGeometry:function(i){var t=i.faces,n=i.vertices,r=i.faceVertexUvs,a=r[0]&&0<r[0].length,o=r[1]&&0<r[1].length,s=i.morphTargets,c=s.length,h;if(0<c){h=[];for(var A=0;A<c;A++)h[A]=[];this.morphTargets.position=h}var l=i.morphNormals,p=l.length,d;if(0<p){d=[];for(var A=0;A<p;A++)d[A]=[];this.morphTargets.normal=d}for(var u=i.skinIndices,f=i.skinWeights,m=u.length===n.length,g=f.length===n.length,A=0,v;A<t.length;A++){v=t[A],this.vertices.push(n[v.a],n[v.b],n[v.c]);var y=v.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var x=v.normal;this.normals.push(x,x,x)}var b=v.vertexColors;if(3===b.length)this.colors.push(b[0],b[1],b[2]);else{var L=v.color;this.colors.push(L,L,L)}if(!0===a){var D=r[0][A];void 0===D?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",A),this.uvs.push(new Br,new Br,new Br)):this.uvs.push(D[0],D[1],D[2])}if(!0===o){var D=r[1][A];void 0===D?(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",A),this.uvs2.push(new Br,new Br,new Br)):this.uvs2.push(D[0],D[1],D[2])}for(var M=0,E;M<c;M++)E=s[M].vertices,h[M].push(E[v.a],E[v.b],E[v.c]);for(var M=0,T;M<p;M++)T=l[M].vertexNormals[A],d[M].push(T.a,T.b,T.c);m&&this.skinIndices.push(u[v.a],u[v.b],u[v.c]),g&&this.skinWeights.push(f[v.a],f[v.b],f[v.c])}return this.computeGroups(i),this.verticesNeedUpdate=i.verticesNeedUpdate,this.normalsNeedUpdate=i.normalsNeedUpdate,this.colorsNeedUpdate=i.colorsNeedUpdate,this.uvsNeedUpdate=i.uvsNeedUpdate,this.groupsNeedUpdate=i.groupsNeedUpdate,this}}),Rt.MaxIndex=65535,Object.assign(Rt.prototype,t.prototype,{isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(r){this.index=Array.isArray(r)?new(65535<At(r)?Mt:_t)(r,1):r},addAttribute:function(r,t){return t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute?"index"===r?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),void this.setIndex(t)):(this.attributes[r]=t,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),void this.addAttribute(r,new gt(arguments[1],arguments[2])))},getAttribute:function(r){return this.attributes[r]},removeAttribute:function(r){return delete this.attributes[r],this},addGroup:function(r,a,o){this.groups.push({start:r,count:a,materialIndex:void 0===o?0:o})},clearGroups:function(){this.groups=[]},setDrawRange:function(r,t){this.drawRange.start=r,this.drawRange.count=t},applyMatrix:function(r){var t=this.attributes.position;void 0!==t&&(r.applyToBufferAttribute(t),t.needsUpdate=!0);var a=this.attributes.normal;return void 0!==a&&(new it().getNormalMatrix(r).applyToBufferAttribute(a),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var r=new Yr;return function(t){return r.makeRotationX(t),this.applyMatrix(r),this}}(),rotateY:function(){var r=new Yr;return function(t){return r.makeRotationY(t),this.applyMatrix(r),this}}(),rotateZ:function(){var r=new Yr;return function(t){return r.makeRotationZ(t),this.applyMatrix(r),this}}(),translate:function(){var r=new Yr;return function(t,a,o){return r.makeTranslation(t,a,o),this.applyMatrix(r),this}}(),scale:function(){var r=new Yr;return function(t,a,o){return r.makeScale(t,a,o),this.applyMatrix(r),this}}(),lookAt:function(){var r=new ct;return function(t){r.lookAt(t),r.updateMatrix(),this.applyMatrix(r.matrix)}}(),center:function(){this.computeBoundingBox();var r=this.boundingBox.getCenter().negate();return this.translate(r.x,r.y,r.z),r},setFromObject:function(a){var t=a.geometry;if(a.isPoints||a.isLine){var o=new Et(3*t.vertices.length,3),i=new Et(3*t.colors.length,3);if(this.addAttribute("position",o.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length){var n=new Et(t.lineDistances.length,1);this.addAttribute("lineDistance",n.copyArray(t.lineDistances))}null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else a.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},updateFromObject:function(r){var t=r.geometry;if(r.isMesh){var a=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(a=void 0,t.elementsNeedUpdate=!1),void 0===a)return this.fromGeometry(t);a.verticesNeedUpdate=t.verticesNeedUpdate,a.normalsNeedUpdate=t.normalsNeedUpdate,a.colorsNeedUpdate=t.colorsNeedUpdate,a.uvsNeedUpdate=t.uvsNeedUpdate,a.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=a}var o;return!0===t.verticesNeedUpdate&&(o=this.attributes.position,void 0!==o&&(o.copyVector3sArray(t.vertices),o.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(o=this.attributes.normal,void 0!==o&&(o.copyVector3sArray(t.normals),o.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(o=this.attributes.color,void 0!==o&&(o.copyColorsArray(t.colors),o.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(o=this.attributes.uv,void 0!==o&&(o.copyVector2sArray(t.uvs),o.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(o=this.attributes.lineDistance,void 0!==o&&(o.copyArray(t.lineDistances),o.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(r.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(r){return r.__directGeometry=new St().fromGeometry(r),this.fromDirectGeometry(r.__directGeometry)},fromDirectGeometry:function(y){var t=new Float32Array(3*y.vertices.length);if(this.addAttribute("position",new gt(t,3).copyVector3sArray(y.vertices)),0<y.normals.length){var M=new Float32Array(3*y.normals.length);this.addAttribute("normal",new gt(M,3).copyVector3sArray(y.normals))}if(0<y.colors.length){var i=new Float32Array(3*y.colors.length);this.addAttribute("color",new gt(i,3).copyColorsArray(y.colors))}if(0<y.uvs.length){var n=new Float32Array(2*y.uvs.length);this.addAttribute("uv",new gt(n,2).copyVector2sArray(y.uvs))}if(0<y.uvs2.length){var r=new Float32Array(2*y.uvs2.length);this.addAttribute("uv2",new gt(r,2).copyVector2sArray(y.uvs2))}if(0<y.indices.length){var a=65535<At(y.indices)?Uint32Array:Uint16Array,o=new a(3*y.indices.length);this.setIndex(new gt(o,1).copyIndicesArray(y.indices))}for(var s in this.groups=y.groups,y.morphTargets){for(var c=[],h=y.morphTargets[s],l=0,u=h.length;l<u;l++){var p=h[l],d=new Et(3*p.length,3);c.push(d.copyVector3sArray(p))}this.morphAttributes[s]=c}if(0<y.skinIndices.length){var f=new Et(4*y.skinIndices.length,4);this.addAttribute("skinIndex",f.copyVector4sArray(y.skinIndices))}if(0<y.skinWeights.length){var m=new Et(4*y.skinWeights.length,4);this.addAttribute("skinWeight",m.copyVector4sArray(y.skinWeights))}return null!==y.boundingSphere&&(this.boundingSphere=y.boundingSphere.clone()),null!==y.boundingBox&&(this.boundingBox=y.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new la);var r=this.attributes.position;void 0===r?this.boundingBox.makeEmpty():this.boundingBox.setFromBufferAttribute(r),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error("THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.",this)},computeBoundingSphere:function(){var s=new la,t=new Qr;return function(){null===this.boundingSphere&&(this.boundingSphere=new et);var l=this.attributes.position;if(l){var i=this.boundingSphere.center;s.setFromBufferAttribute(l),s.getCenter(i);for(var n=0,r=0,a=l.count;r<a;r++)t.x=l.getX(r),t.y=l.getY(r),t.z=l.getZ(r),n=L(n,i.distanceToSquared(t));this.boundingSphere.radius=S(n),isNaN(this.boundingSphere.radius)&&console.error("THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.",this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var c=this.index,t=this.attributes,M=this.groups;if(t.position){var i=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new gt(new Float32Array(i.length),3));else for(var n=t.normal.array,r=0,a=n.length;r<a;r++)n[r]=0;var o=t.normal.array,u=new Qr,p=new Qr,d=new Qr,f=new Qr,m=new Qr,g,s,h;if(c){var l=c.array;0===M.length&&this.addGroup(0,l.length);for(var E=0,y=M.length;E<y;++E)for(var x=M[E],v=x.start,A=x.count,r=v,a=v+A;r<a;r+=3)g=3*l[r+0],s=3*l[r+1],h=3*l[r+2],u.fromArray(i,g),p.fromArray(i,s),d.fromArray(i,h),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),o[g]+=f.x,o[g+1]+=f.y,o[g+2]+=f.z,o[s]+=f.x,o[s+1]+=f.y,o[s+2]+=f.z,o[h]+=f.x,o[h+1]+=f.y,o[h+2]+=f.z}else for(var r=0,a=i.length;r<a;r+=9)u.fromArray(i,r),p.fromArray(i,r+3),d.fromArray(i,r+6),f.subVectors(d,p),m.subVectors(u,p),f.cross(m),o[r]=f.x,o[r+1]=f.y,o[r+2]=f.z,o[r+3]=f.x,o[r+4]=f.y,o[r+5]=f.z,o[r+6]=f.x,o[r+7]=f.y,o[r+8]=f.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(d,p){if(!d||!d.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",d);void 0===p&&(p=0);var u=this.attributes;for(var i in u)if(void 0!==d.attributes[i])for(var n=u[i],r=n.array,a=d.attributes[i],o=a.array,s=a.itemSize,c=0,m=s*p;c<o.length;c++,m++)r[m]=o[c];return this},normalizeNormals:function(){var r=new Qr;return function(){for(var t=this.attributes.normal,a=0,o=t.count;a<o;a++)r.x=t.getX(a),r.y=t.getY(a),r.z=t.getZ(a),r.normalize(),t.setXYZ(a,r.x,r.y,r.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var d=new Rt,t=this.index.array,m=this.attributes;for(var i in m){for(var n=m[i],r=n.array,a=n.itemSize,o=new r.constructor(t.length*a),s=0,c=0,g=0,l=t.length;g<l;g++){s=t[g]*a;for(var u=0;u<a;u++)o[c++]=r[s++]}d.addAttribute(i,new gt(o,a))}return d},toJSON:function(){var l={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(l.uuid=this.uuid,l.type=this.type,""!==this.name&&(l.name=this.name),void 0!==this.parameters){var t=this.parameters;for(var d in t)void 0!==t[d]&&(l[d]=t[d]);return l}l.data={attributes:{}};var i=this.index;if(null!==i){var n=Array.prototype.slice.call(i.array);l.data.index={type:i.array.constructor.name,array:n}}var p=this.attributes;for(var d in p){var a=p[d],n=Array.prototype.slice.call(a.array);l.data.attributes[d]={itemSize:a.itemSize,type:a.array.constructor.name,array:n,normalized:a.normalized}}var o=this.groups;0<o.length&&(l.data.groups=JSON.parse(JSON.stringify(o)));var s=this.boundingSphere;return null!==s&&(l.data.boundingSphere={center:s.center.toArray(),radius:s.radius}),l},clone:function(){return new Rt().copy(this)},copy:function(m){var t,g,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=m.name;var n=m.index;null!==n&&this.setIndex(n.clone());var r=m.attributes;for(t in r){var a=r[t];this.addAttribute(t,a.clone())}var o=m.morphAttributes;for(t in o){var s=[],c=o[t];for(g=0,i=c.length;g<i;g++)s.push(c[g].clone());this.morphAttributes[t]=s}var h=m.groups;for(g=0,i=h.length;g<i;g++){var l=h[g];this.addGroup(l.start,l.count,l.materialIndex)}var u=m.boundingBox;null!==u&&(this.boundingBox=u.clone());var p=m.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=m.drawRange.start,this.drawRange.count=m.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Lt.prototype=Object.create(mt.prototype),Lt.prototype.constructor=Lt,ha.prototype=Object.create(Rt.prototype),ha.prototype.constructor=ha,jo.prototype=Object.create(mt.prototype),jo.prototype.constructor=jo,el.prototype=Object.create(Rt.prototype),el.prototype.constructor=el,tl.prototype=Object.create(J.prototype),tl.prototype.constructor=tl,tl.prototype.isMeshBasicMaterial=!0,tl.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this},Object.assign(rl.prototype,{set:function(r,t){return this.origin.copy(r),this.direction.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.origin.copy(r.origin),this.direction.copy(r.direction),this},at:function(r,t){return(t||new Qr).copy(this.direction).multiplyScalar(r).add(this.origin)},lookAt:function(r){return this.direction.copy(r).sub(this.origin).normalize(),this},recast:function(){var r=new Qr;return function(t){return this.origin.copy(this.at(t,r)),this}}(),closestPointToPoint:function(r,t){var a=t||new Qr;a.subVectors(r,this.origin);var o=a.dot(this.direction);return 0>o?a.copy(this.origin):a.copy(this.direction).multiplyScalar(o).add(this.origin)},distanceToPoint:function(r){return S(this.distanceSqToPoint(r))},distanceSqToPoint:function(){var r=new Qr;return function(t){var a=r.subVectors(t,this.origin).dot(this.direction);return 0>a?this.origin.distanceToSquared(t):(r.copy(this.direction).multiplyScalar(a).add(this.origin),r.distanceToSquared(t))}}(),distanceSqToSegment:function(){var y=new Qr,t=new Qr,M=new Qr;return function(i,n,r,a){y.copy(i).add(n).multiplyScalar(.5),t.copy(n).sub(i).normalize(),M.copy(this.origin).sub(y);var o=.5*i.distanceTo(n),x=-this.direction.dot(t),E=M.dot(this.direction),d=-M.dot(t),A=M.lengthSq(),m=D(1-x*x),g,T,c,h;if(!(0<m))T=0<x?-o:o,g=L(0,-(x*T+E)),c=-g*g+T*(T+2*d)+A;else if(g=x*d-E,T=x*E-d,h=o*m,!(0<=g))T<=-h?(g=L(0,-(-x*o+E)),T=0<g?-o:N(L(-o,-d),o),c=-g*g+T*(T+2*d)+A):T<=h?(g=0,T=N(L(-o,-d),o),c=T*(T+2*d)+A):(g=L(0,-(x*o+E)),T=0<g?o:N(L(-o,-d),o),c=-g*g+T*(T+2*d)+A);else if(!(T>=-h))T=-o,g=L(0,-(x*T+E)),c=-g*g+T*(T+2*d)+A;else if(T<=h){var b=1/m;g*=b,T*=b,c=g*(g+x*T+2*E)+T*(x*g+T+2*d)+A}else T=o,g=L(0,-(x*T+E)),c=-g*g+T*(T+2*d)+A;return r&&r.copy(this.direction).multiplyScalar(g).add(this.origin),a&&a.copy(t).multiplyScalar(T).add(y),c}}(),intersectSphere:function(){var l=new Qr;return function(t,d){l.subVectors(t.center,this.origin);var i=l.dot(this.direction),n=l.dot(l)-i*i,r=t.radius*t.radius;if(n>r)return null;var a=S(r-n),o=i-a,s=i+a;return 0>o&&0>s?null:0>o?this.at(s,d):this.at(o,d)}}(),intersectsSphere:function(r){return this.distanceToPoint(r.center)<=r.radius},distanceToPlane:function(r){var t=r.normal.dot(this.direction);if(0===t)return 0===r.distanceToPoint(this.origin)?0:null;var a=-(this.origin.dot(r.normal)+r.constant)/t;return 0<=a?a:null},intersectPlane:function(r,t){var a=this.distanceToPlane(r);return null===a?null:this.at(a,t)},intersectsPlane:function(r){var t=r.distanceToPoint(this.origin);return 0===t||0>r.normal.dot(this.direction)*t},intersectBox:function(d,t){var p=1/this.direction.x,c=1/this.direction.y,m=1/this.direction.z,l=this.origin,u,i,n,r,a,o;return 0<=p?(u=(d.min.x-l.x)*p,i=(d.max.x-l.x)*p):(u=(d.max.x-l.x)*p,i=(d.min.x-l.x)*p),0<=c?(n=(d.min.y-l.y)*c,r=(d.max.y-l.y)*c):(n=(d.max.y-l.y)*c,r=(d.min.y-l.y)*c),u>r||n>i?null:((n>u||u!==u)&&(u=n),(r<i||i!==i)&&(i=r),0<=m?(a=(d.min.z-l.z)*m,o=(d.max.z-l.z)*m):(a=(d.max.z-l.z)*m,o=(d.min.z-l.z)*m),u>o||a>i?null:((a>u||u!==u)&&(u=a),(o<i||i!==i)&&(i=o),0>i?null:this.at(0<=u?u:i,t)))},intersectsBox:function(){var r=new Qr;return function(t){return null!==this.intersectBox(t,r)}}(),intersectTriangle:function(){var m=new Qr,t=new Qr,g=new Qr,i=new Qr;return function(n,r,a,o,s){t.subVectors(r,n),g.subVectors(a,n),i.crossVectors(t,g);var c=this.direction.dot(i),y;if(0<c){if(o)return null;y=1}else{if(!(0>c))return null;y=-1,c=-c}m.subVectors(this.origin,n);var f=y*this.direction.dot(g.crossVectors(m,g));if(0>f)return null;var u=y*this.direction.dot(t.cross(m));if(0>u)return null;if(f+u>c)return null;var p=-y*m.dot(i);return 0>p?null:this.at(p/c,s)}}(),applyMatrix4:function(r){return this.origin.applyMatrix4(r),this.direction.transformDirection(r),this},equals:function(r){return r.origin.equals(this.origin)&&r.direction.equals(this.direction)}}),Object.assign(Dt.prototype,{set:function(r,t){return this.start.copy(r),this.end.copy(t),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.start.copy(r.start),this.end.copy(r.end),this},getCenter:function(r){return(r||new Qr).addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(r){return(r||new Qr).subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(r,t){var a=t||new Qr;return this.delta(a).multiplyScalar(r).add(this.start)},closestPointToPointParameter:function(){var s=new Qr,t=new Qr;return function(l,i){s.subVectors(l,this.start),t.subVectors(this.end,this.start);var n=t.dot(t),r=t.dot(s),a=r/n;return i&&(a=Mc.clamp(a,0,1)),a}}(),closestPointToPoint:function(a,t,o){var i=this.closestPointToPointParameter(a,t),n=o||new Qr;return this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(r){return this.start.applyMatrix4(r),this.end.applyMatrix4(r),this},equals:function(r){return r.start.equals(this.start)&&r.end.equals(this.end)}}),Object.assign(Ot,{normal:function(){var s=new Qr;return function(t,l,i,n){var r=n||new Qr;r.subVectors(i,l),s.subVectors(t,l),r.cross(s);var a=r.lengthSq();return 0<a?r.multiplyScalar(1/S(a)):r.set(0,0,0)}}(),barycoordFromPoint:function(){var c=new Qr,t=new Qr,M=new Qr;return function(i,n,r,a,o){c.subVectors(a,n),t.subVectors(r,n),M.subVectors(i,n);var s=c.dot(c),h=c.dot(t),l=c.dot(M),u=t.dot(t),p=t.dot(M),d=s*u-h*h,f=o||new Qr;if(0===d)return f.set(-2,-1,-1);var m=1/d,g=(u*l-h*p)*m,x=(s*p-h*l)*m;return f.set(1-g-x,x,g)}}(),containsPoint:function(){var o=new Qr;return function(t,s,i,n){var r=Ot.barycoordFromPoint(t,s,i,n,o);return 0<=r.x&&0<=r.y&&1>=r.x+r.y}}()}),Object.assign(Ot.prototype,{set:function(r,t,a){return this.a.copy(r),this.b.copy(t),this.c.copy(a),this},setFromPointsAndIndices:function(r,t,a,o){return this.a.copy(r[t]),this.b.copy(r[a]),this.c.copy(r[o]),this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.a.copy(r.a),this.b.copy(r.b),this.c.copy(r.c),this},area:function(){var r=new Qr,t=new Qr;return function(){return r.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*r.cross(t).length()}}(),midpoint:function(r){return(r||new Qr).addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},normal:function(r){return Ot.normal(this.a,this.b,this.c,r)},plane:function(r){return(r||new nt).setFromCoplanarPoints(this.a,this.b,this.c)},barycoordFromPoint:function(r,t){return Ot.barycoordFromPoint(r,this.a,this.b,this.c,t)},containsPoint:function(r){return Ot.containsPoint(r,this.a,this.b,this.c)},closestPointToPoint:function(){var d=new nt,t=[new Dt,new Dt,new Dt],c=new Qr,r=new Qr;return function(i,n){var a=n||new Qr,o=1/0;if(d.setFromCoplanarPoints(this.a,this.b,this.c),d.projectPoint(i,c),!0===this.containsPoint(c))a.copy(c);else{t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a);for(var s=0;s<t.length;s++){t[s].closestPointToPoint(c,!0,r);var p=c.distanceToSquared(r);p<o&&(o=p,a.copy(r))}}return a}}(),equals:function(r){return r.a.equals(this.a)&&r.b.equals(this.b)&&r.c.equals(this.c)}}),Ft.prototype=Object.assign(Object.create(ct.prototype),{constructor:Ft,isMesh:!0,setDrawMode:function(r){this.drawMode=r},copy:function(r){return ct.prototype.copy.call(this,r),this.drawMode=r.drawMode,this},updateMorphTargets:function(){var l=this.geometry,n,t,d;if(l.isBufferGeometry){var i=l.morphAttributes,r=Object.keys(i);if(0<r.length){var a=i[r[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},n=0,t=a.length;n<t;n++)d=a[n].name||n+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=n}}else{var o=l.morphTargets;if(void 0!==o&&0<o.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},n=0,t=o.length;n<t;n++)d=o[n].name||n+"",this.morphTargetInfluences.push(0),this.morphTargetDictionary[d]=n}},raycast:function(){function M(s,l,d,i,n,r,a){return Ot.barycoordFromPoint(s,l,d,i,c),n.multiplyScalar(c.x),r.multiplyScalar(c.y),a.multiplyScalar(c.z),n.add(r).add(a),n.clone()}function t(l,d,u,i,n,r,a,o){if(null===(d.side===ba?i.intersectTriangle(a,r,n,!0,o):i.intersectTriangle(n,r,a,d.side!==Hd,o)))return null;p.copy(o),p.applyMatrix4(l.matrixWorld);var s=u.ray.origin.distanceTo(p);return s<u.near||s>u.far?null:{distance:s,point:p.clone(),object:l}}function h(f,i,x,r,a,o,c,h){E.fromBufferAttribute(r,o),s.fromBufferAttribute(r,c),l.fromBufferAttribute(r,h);var p=t(f,f.material,i,x,E,s,l,y);return p&&(a&&(u.fromBufferAttribute(a,o),m.fromBufferAttribute(a,c),g.fromBufferAttribute(a,h),p.uv=M(y,E,s,l,u,m,g)),p.face=new ua(o,c,h,Ot.normal(E,s,l)),p.faceIndex=o),p}var n=new Yr,r=new rl,a=new et,E=new Qr,s=new Qr,l=new Qr,o=new Qr,i=new Qr,d=new Qr,u=new Br,m=new Br,g=new Br,c=new Qr,y=new Qr,p=new Qr;return function(p,f){var c=this.geometry,x=this.material,v=this.matrixWorld;if(void 0!==x&&(null===c.boundingSphere&&c.computeBoundingSphere(),a.copy(c.boundingSphere),a.applyMatrix4(v),!1!==p.ray.intersectsSphere(a)&&(n.getInverse(v),r.copy(p.ray).applyMatrix4(n),null===c.boundingBox||!1!==r.intersectsBox(c.boundingBox)))){var b;if(c.isBufferGeometry){var _=c.index,A=c.attributes.position,R=c.attributes.uv,L,w,Q,Z,T;if(null!==_)for(Z=0,T=_.count;Z<T;Z+=3)L=_.getX(Z),w=_.getX(Z+1),Q=_.getX(Z+2),(b=h(this,p,r,A,R,L,w,Q))&&(b.faceIndex=C(Z/3),f.push(b));else for(Z=0,T=A.count;Z<T;Z+=3)L=Z,w=Z+1,Q=Z+2,(b=h(this,p,r,A,R,L,w,Q))&&(b.index=L,f.push(b))}else if(c.isGeometry){var S=Array.isArray(x),N=c.vertices,D=c.faces,O=c.faceVertexUvs[0],F,P,K,I;0<O.length&&(I=O);for(var U=0,B=D.length;U<B;U++){var z=D[U],G=S?x[z.materialIndex]:x;if(void 0!==G){if(F=N[z.a],P=N[z.b],K=N[z.c],!0===G.morphTargets){var H=c.morphTargets,V=this.morphTargetInfluences;E.set(0,0,0),s.set(0,0,0),l.set(0,0,0);for(var k=0,j=H.length,W;k<j;k++)if(W=V[k],0!==W){var X=H[k].vertices;E.addScaledVector(o.subVectors(X[z.a],F),W),s.addScaledVector(i.subVectors(X[z.b],P),W),l.addScaledVector(d.subVectors(X[z.c],K),W)}E.add(F),s.add(P),l.add(K),F=E,P=s,K=l}if(b=t(this,G,p,r,F,P,K,y)){if(I&&I[U]){var q=I[U];u.copy(q[0]),m.copy(q[1]),g.copy(q[2]),b.uv=M(y,F,P,K,u,m,g)}b.face=z,b.faceIndex=U,f.push(b)}}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}});var Is=0;ge.prototype=Object.assign(Object.create(ca.prototype),{constructor:ge,isArrayCamera:!0}),we.prototype.isFogExp2=!0,we.prototype.clone=function(){return new we(this.color.getHex(),this.density)},we.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},Me.prototype.isFog=!0,Me.prototype.clone=function(){return new Me(this.color.getHex(),this.near,this.far)},Me.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},Ee.prototype=Object.assign(Object.create(ct.prototype),{constructor:Ee,copy:function(r,t){return ct.prototype.copy.call(this,r,t),null!==r.background&&(this.background=r.background.clone()),null!==r.fog&&(this.fog=r.fog.clone()),null!==r.overrideMaterial&&(this.overrideMaterial=r.overrideMaterial.clone()),this.autoUpdate=r.autoUpdate,this.matrixAutoUpdate=r.matrixAutoUpdate,this},toJSON:function(r){var t=ct.prototype.toJSON.call(this,r);return null!==this.background&&(t.object.background=this.background.toJSON(r)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Kt.prototype=Object.assign(Object.create(ct.prototype),{constructor:Kt,isLensFlare:!0,copy:function(r){ct.prototype.copy.call(this,r),this.positionScreen.copy(r.positionScreen),this.customUpdateCallback=r.customUpdateCallback;for(var t=0,a=r.lensFlares.length;t<a;t++)this.lensFlares.push(r.lensFlares[t]);return this},add:function(o,s,l,d,c,p){void 0===s&&(s=-1),void 0===l&&(l=0),void 0===p&&(p=1),void 0===c&&(c=new W(16777215)),void 0===d&&(d=Wd),l=N(l,L(0,l)),this.lensFlares.push({texture:o,size:s,distance:l,x:0,y:0,z:0,scale:1,rotation:0,opacity:p,color:c,blending:d})},updateLensFlares:function(){var a=this.lensFlares.length,o=2*-this.positionScreen.x,i=2*-this.positionScreen.y,r,t;for(r=0;r<a;r++)t=this.lensFlares[r],t.x=this.positionScreen.x+o*t.distance,t.y=this.positionScreen.y+i*t.distance,t.wantedRotation=.25*(t.x*Or),t.rotation+=.25*(t.wantedRotation-t.rotation)}}),$t.prototype=Object.create(J.prototype),$t.prototype.constructor=$t,$t.prototype.isSpriteMaterial=!0,$t.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.rotation=r.rotation,this},sl.prototype=Object.assign(Object.create(ct.prototype),{constructor:sl,isSprite:!0,raycast:function(){var s=new Qr,t=new Qr,l=new Qr;return function(i,n){t.setFromMatrixPosition(this.matrixWorld),i.ray.closestPointToPoint(t,s),l.setFromMatrixScale(this.matrixWorld);var r=l.x*l.y/4;if(!(t.distanceToSquared(s)>r)){var a=i.ray.origin.distanceTo(s);a<i.near||a>i.far||n.push({distance:a,point:s.clone(),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)}}),ll.prototype=Object.assign(Object.create(ct.prototype),{constructor:ll,copy:function(a){ct.prototype.copy.call(this,a,!1);for(var t=a.levels,o=0,i=t.length,n;o<i;o++)n=t[o],this.addLevel(n.object.clone(),n.distance);return this},addLevel:function(r,a){void 0===a&&(a=0),a=D(a);for(var o=this.levels,i=0;i<o.length&&!(a<o[i].distance);i++);o.splice(i,0,{distance:a,object:r}),this.add(r)},getObjectForDistance:function(r){for(var t=this.levels,a=1,o=t.length;a<o&&!(r<t[a].distance);a++);return t[a-1].object},raycast:function(){var r=new Qr;return function(t,a){r.setFromMatrixPosition(this.matrixWorld);var o=t.ray.origin.distanceTo(r);this.getObjectForDistance(o).raycast(t,a)}}(),update:function(){var s=new Qr,t=new Qr;return function(l){var i=this.levels;if(1<i.length){s.setFromMatrixPosition(l.matrixWorld),t.setFromMatrixPosition(this.matrixWorld);var n=s.distanceTo(t);i[0].object.visible=!0;for(var r=1,a=i.length;r<a&&n>=i[r].distance;r++)i[r-1].object.visible=!1,i[r].object.visible=!0;for(;r<a;r++)i[r].object.visible=!1}}}(),toJSON:function(o){var t=ct.prototype.toJSON.call(this,o);t.object.levels=[];for(var s=this.levels,i=0,n=s.length,r;i<n;i++)r=s[i],t.object.levels.push({object:r.object.uuid,distance:r.distance});return t}}),Object.assign(dl.prototype,{calculateInverses:function(){this.boneInverses=[];for(var r=0,t=this.bones.length,a;r<t;r++)a=new Yr,this.bones[r]&&a.getInverse(this.bones[r].matrixWorld),this.boneInverses.push(a)},pose:function(){var r,t,a;for(t=0,a=this.bones.length;t<a;t++)(r=this.bones[t])&&r.matrixWorld.getInverse(this.boneInverses[t]);for(t=0,a=this.bones.length;t<a;t++)(r=this.bones[t])&&(r.parent&&r.parent.isBone?(r.matrix.getInverse(r.parent.matrixWorld),r.matrix.multiply(r.matrixWorld)):r.matrix.copy(r.matrixWorld),r.matrix.decompose(r.position,r.quaternion,r.scale))},update:function(){var a=new Yr,t=new Yr;return function(){for(var l=this.bones,i=this.boneInverses,n=this.boneMatrices,r=this.boneTexture,d=0,o=l.length,s;d<o;d++)s=l[d]?l[d].matrixWorld:t,a.multiplyMatrices(s,i[d]),a.toArray(n,16*d);void 0!==r&&(r.needsUpdate=!0)}}(),clone:function(){return new dl(this.bones,this.boneInverses)}}),Pe.prototype=Object.assign(Object.create(ct.prototype),{constructor:Pe,isBone:!0}),cl.prototype=Object.assign(Object.create(Ft.prototype),{constructor:cl,isSkinnedMesh:!0,initBones:function(){var a=[],r,t,o,i;if(this.geometry&&void 0!==this.geometry.bones){for(o=0,i=this.geometry.bones.length;o<i;o++)t=this.geometry.bones[o],r=new Pe,a.push(r),r.name=t.name,r.position.fromArray(t.pos),r.quaternion.fromArray(t.rotq),void 0!==t.scl&&r.scale.fromArray(t.scl);for(o=0,i=this.geometry.bones.length;o<i;o++)t=this.geometry.bones[o],-1!==t.parent&&null!==t.parent&&void 0!==a[t.parent]?a[t.parent].add(a[o]):this.add(a[o])}return this.updateMatrixWorld(!0),a},bind:function(r,t){this.skeleton=r,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var r,t;if(this.geometry&&this.geometry.isGeometry)for(t=0;t<this.geometry.skinWeights.length;t++){var o=this.geometry.skinWeights[t];r=1/o.lengthManhattan(),r===1/0?o.set(1,0,0,0):o.multiplyScalar(r)}else if(this.geometry&&this.geometry.isBufferGeometry){var i=new Fr,n=this.geometry.attributes.skinWeight;for(t=0;t<n.count;t++)i.x=n.getX(t),i.y=n.getY(t),i.z=n.getZ(t),i.w=n.getW(t),r=1/i.lengthManhattan(),r===1/0?i.set(1,0,0,0):i.multiplyScalar(r),n.setXYZW(t,i.x,i.y,i.z,i.w)}},updateMatrixWorld:function(r){Ft.prototype.updateMatrixWorld.call(this,r),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),pl.prototype=Object.create(J.prototype),pl.prototype.constructor=pl,pl.prototype.isLineBasicMaterial=!0,pl.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.linewidth=r.linewidth,this.linecap=r.linecap,this.linejoin=r.linejoin,this},ul.prototype=Object.assign(Object.create(ct.prototype),{constructor:ul,isLine:!0,raycast:function(){var a=new Yr,t=new rl,c=new et;return function(i,n){var r=i.linePrecision,A=r*r,o=this.geometry,s=this.matrixWorld;if(null===o.boundingSphere&&o.computeBoundingSphere(),c.copy(o.boundingSphere),c.applyMatrix4(s),!1!==i.ray.intersectsSphere(c)){a.getInverse(s),t.copy(i.ray).applyMatrix4(a);var h=new Qr,l=new Qr,u=new Qr,p=new Qr,d=this&&this.isLineSegments?2:1;if(o.isBufferGeometry){var f=o.index,m=o.attributes,g=m.position.array;if(null!==f)for(var v=f.array,y=0,L=v.length-1;y<L;y+=d){var b=v[y],D=v[y+1];h.fromArray(g,3*b),l.fromArray(g,3*D);var N=t.distanceSqToSegment(h,l,p,u);if(!(N>A)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||n.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else for(var y=0,L=g.length/3-1;y<L;y+=d){h.fromArray(g,3*y),l.fromArray(g,3*y+3);var N=t.distanceSqToSegment(h,l,p,u);if(!(N>A)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||n.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}else if(o.isGeometry)for(var w=o.vertices,T=w.length,y=0,N;y<T-1;y+=d)if(N=t.distanceSqToSegment(w[y],w[y+1],p,u),!(N>A)){p.applyMatrix4(this.matrixWorld);var M=i.ray.origin.distanceTo(p);M<i.near||M>i.far||n.push({distance:M,point:u.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ml.prototype=Object.assign(Object.create(ul.prototype),{constructor:ml,isLineSegments:!0}),gl.prototype=Object.assign(Object.create(ul.prototype),{constructor:gl,isLineLoop:!0}),hl.prototype=Object.create(J.prototype),hl.prototype.constructor=hl,hl.prototype.isPointsMaterial=!0,hl.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.size=r.size,this.sizeAttenuation=r.sizeAttenuation,this},yl.prototype=Object.assign(Object.create(ct.prototype),{constructor:yl,isPoints:!0,raycast:function(){var r=new Yr,M=new rl,t=new et;return function(E,n){function i(r,t){var l=M.distanceSqToPoint(r);if(l<u){var d=M.closestPointToPoint(r);d.applyMatrix4(T);var s=E.ray.origin.distanceTo(d);if(s<E.near||s>E.far)return;n.push({distance:s,distanceToRay:S(l),point:d.clone(),index:t,face:null,object:A})}}var A=this,a=this.geometry,T=this.matrixWorld,s=E.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),t.copy(a.boundingSphere),t.applyMatrix4(T),t.radius+=s,!1!==E.ray.intersectsSphere(t)){r.getInverse(T),M.copy(E.ray).applyMatrix4(r);var l=s/((this.scale.x+this.scale.y+this.scale.z)/3),u=l*l,c=new Qr;if(a.isBufferGeometry){var d=a.index,p=a.attributes,m=p.position.array;if(null!==d)for(var g=d.array,h=0,y=g.length,f;h<y;h++)f=g[h],c.fromArray(m,3*f),i(c,f);else for(var h=0,x=m.length/3;h<x;h++)c.fromArray(m,3*h),i(c,h)}else for(var v=a.vertices,h=0,x=v.length;h<x;h++)i(v[h],h)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),fl.prototype=Object.assign(Object.create(ct.prototype),{constructor:fl}),Ml.prototype=Object.create(kr.prototype),Ml.prototype.constructor=Ml,Ge.prototype=Object.create(kr.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isCompressedTexture=!0,He.prototype=Object.create(kr.prototype),He.prototype.constructor=He,He.prototype.isDepthTexture=!0,Ve.prototype=Object.create(Rt.prototype),Ve.prototype.constructor=Ve,xl.prototype=Object.create(mt.prototype),xl.prototype.constructor=xl,El.prototype=Object.create(Rt.prototype),El.prototype.constructor=El,vl.prototype=Object.create(mt.prototype),vl.prototype.constructor=vl,Al.prototype=Object.create(Rt.prototype),Al.prototype.constructor=Al,Tl.prototype=Object.create(mt.prototype),Tl.prototype.constructor=Tl,bl.prototype=Object.create(Al.prototype),bl.prototype.constructor=bl,Ll.prototype=Object.create(mt.prototype),Ll.prototype.constructor=Ll,Dl.prototype=Object.create(Al.prototype),Dl.prototype.constructor=Dl,Nl.prototype=Object.create(mt.prototype),Nl.prototype.constructor=Nl,wl.prototype=Object.create(Al.prototype),wl.prototype.constructor=wl,Cl.prototype=Object.create(mt.prototype),Cl.prototype.constructor=Cl,Sl.prototype=Object.create(Al.prototype),Sl.prototype.constructor=Sl,Il.prototype=Object.create(mt.prototype),Il.prototype.constructor=Il,_l.prototype=Object.create(Rt.prototype),_l.prototype.constructor=_l,jl.prototype=Object.create(mt.prototype),jl.prototype.constructor=jl,Ol.prototype=Object.create(Rt.prototype),Ol.prototype.constructor=Ol,zl.prototype=Object.create(mt.prototype),zl.prototype.constructor=zl,Rl.prototype=Object.create(Rt.prototype),Rl.prototype.constructor=Rl;var Us={area:function(a){for(var t=a.length,o=0,i=t-1,n=0;n<t;i=n++)o+=a[i].x*a[n].y-a[n].x*a[i].y;return .5*o},triangulate:function(){function n(D,N,C,i,n,r){var a,o,s,c,h,l,u,p,d;if(o=D[r[N]].x,s=D[r[N]].y,c=D[r[C]].x,h=D[r[C]].y,l=D[r[i]].x,u=D[r[i]].y,0>=(c-o)*(u-s)-(h-s)*(l-o))return!1;var f,m,g,v,y,x,b,I,w,M,E,T,S,A,_;for(f=l-c,m=u-h,g=o-l,v=s-u,y=c-o,x=h-s,a=0;a<n;a++)if(p=D[r[a]].x,d=D[r[a]].y,(p!==o||d!==s)&&(p!==c||d!==h)&&(p!==l||d!==u)&&(b=p-o,I=d-s,w=p-c,M=d-h,E=p-l,T=d-u,_=f*M-m*w,S=y*I-x*b,A=g*T-v*E,_>=-kd&&A>=-kd&&S>=-kd))return!1;return!0}return function(t,y){var i=t.length;if(3>i)return null;var M=[],s=[],c=[],h,r,a;if(0<Us.area(t))for(r=0;r<i;r++)s[r]=r;else for(r=0;r<i;r++)s[r]=i-1-r;var o=i,l=2*o;for(r=o-1;2<o;){if(0>=l--)return console.warn("THREE.ShapeUtils: Unable to triangulate polygon! in triangulate()"),y?c:M;if(h=r,o<=h&&(h=0),r=h+1,o<=r&&(r=0),a=r+1,o<=a&&(a=0),n(t,h,r,a,o,s)){var u,p,d,f,m;for(u=s[h],p=s[r],d=s[a],M.push([t[u],t[p],t[d]]),c.push([s[h],s[r],s[a]]),f=r,m=r+1;m<o;f++,m++)s[f]=s[m];o--,l=2*o}}return y?c:M}}(),triangulateShape:function(y,t){function M(r){var t=r.length;2<t&&r[t-1].equals(r[0])&&r.pop()}function A(r,t,a){return r.x===t.x?r.y<t.y?r.y<=a.y&&a.y<=t.y:t.y<=a.y&&a.y<=r.y:r.x<t.x?r.x<=a.x&&a.x<=t.x:t.x<=a.x&&a.x<=r.x}function x(n,t,L,i,N){var a=t.x-n.x,o=t.y-n.y,s=i.x-L.x,c=i.y-L.y,h=n.x-L.x,l=n.y-L.y,u=o*s-a*c,p=o*h-a*l;if(D(u)>kd){var d;if(0<u){if(0>p||p>u)return[];if(0>(d=c*h-s*l)||d>u)return[]}else{if(0<p||p<u)return[];if(0<(d=c*h-s*l)||d<u)return[]}if(0===d)return N&&(0===p||p===u)?[]:[n];if(d===u)return N&&(0===p||p===u)?[]:[t];if(0===p)return[L];if(p===u)return[i];var f=d/u;return[{x:n.x+f*a,y:n.y+f*o}]}if(0!==p||c*h!=s*l)return[];var m=0===a&&0===o,g=0===s&&0===c;if(m&&g)return n.x!==L.x||n.y!==L.y?[]:[n];if(m)return A(L,i,n)?[n]:[];if(g)return A(n,t,L)?[L]:[];var v,y,x,b,C,w,M,E;return 0===a?(n.y<t.y?(v=n,x=n.y,y=t,b=t.y):(v=t,x=t.y,y=n,b=n.y),L.y<i.y?(C=L,M=L.y,w=i,E=i.y):(C=i,M=i.y,w=L,E=L.y)):(n.x<t.x?(v=n,x=n.x,y=t,b=t.x):(v=t,x=t.x,y=n,b=n.x),L.x<i.x?(C=L,M=L.x,w=i,E=i.x):(C=i,M=i.x,w=L,E=L.x)),x<=M?b<M?[]:b===M?N?[]:[C]:b<=E?[C,y]:[C,w]:x>E?[]:x===E?N?[]:[v]:b<=E?[v,y]:[v,w]}function E(d,t,m,i){var n=t.x-d.x,r=t.y-d.y,g=m.x-d.x,o=m.y-d.y,s=i.x-d.x,c=i.y-d.y,h=n*o-r*g,l=n*c-r*s;if(D(h)>kd){var u=s*o-c*g;return 0<h?0<=l&&0<=u:0<=l||0<=u}return 0<l}M(y),t.forEach(M);for(var r={},a=y.concat(),i=0,n=t.length,d,o,s,c,p,l;i<n;i++)Array.prototype.push.apply(a,t[i]);for(d=0,o=a.length;d<o;d++)p=a[d].x+":"+a[d].y,void 0!==r[p]&&console.warn("THREE.ShapeUtils: Duplicate point",p,d),r[p]=d;var u=function(r,M){for(var A=r.concat(),m=[],t=[],a=0,g=M.length,y,i,n,o,s,c,h,l,u,p,d;a<g;a++)m.push(a);for(var f=0,v=2*m.length;0<m.length;){if(0>--v){console.log("THREE.ShapeUtils: Infinite Loop! Holes left:\" + indepHoles.length + \", Probably Hole outside Shape!");break}for(n=f;n<A.length;n++){o=A[n],i=-1;for(var a=0;a<m.length;a++)if(c=m[a],h=o.x+":"+o.y+":"+c,void 0===t[h]){y=M[c];for(var T=0;T<y.length;T++)if(s=y[T],function(a,t){var i=A.length-1,n=a-1;0>n&&(n=i);var r=a+1;r>i&&(r=0);var o=E(A[a],A[n],A[r],y[t]);if(!o)return!1;var d=y.length-1,c=t-1;0>c&&(c=d);var p=t+1;return p>d&&(p=0),!!(o=E(y[t],y[c],y[p],A[a]))}(n,T)&&!function(r,t){var o,i,n;for(o=0;o<A.length;o++)if(i=o+1,i%=A.length,n=x(r,t,A[o],A[i],!0),0<n.length)return!0;return!1}(o,s)&&!function(r,t){var i,n,a,o,s;for(i=0;i<m.length;i++)for(n=M[m[i]],a=0;a<n.length;a++)if(o=a+1,o%=n.length,s=x(r,t,n[a],n[o],!0),0<s.length)return!0;return!1}(o,s)){i=T,m.splice(a,1),l=A.slice(0,n+1),u=A.slice(n),p=y.slice(i),d=y.slice(0,i+1),A=l.concat(p).concat(d).concat(u),f=n;break}if(0<=i)break;t[h]=!0}if(0<=i)break}}return A}(y,t),m=Us.triangulate(u,!1);for(d=0,o=m.length;d<o;d++)for(c=m[d],s=0;3>s;s++)p=c[s].x+":"+c[s].y,void 0!==(l=r[p])&&(c[s]=l);return m.concat()},isClockWise:function(r){return 0>Us.area(r)}};Ul.prototype=Object.create(mt.prototype),Ul.prototype.constructor=Ul,Pl.prototype=Object.create(Rt.prototype),Pl.prototype.constructor=Pl,Pl.prototype.getArrays=function(){var a=this.getAttribute("position"),t=a?Array.prototype.slice.call(a.array):[],o=this.getAttribute("uv"),i=o?Array.prototype.slice.call(o.array):[],s=this.index;return{position:t,uv:i,index:s?Array.prototype.slice.call(s.array):[]}},Pl.prototype.addShapeList=function(a,t){var o=a.length;t.arrays=this.getArrays();for(var i=0,n;i<o;i++)n=a[i],this.addShape(n,t);this.setIndex(t.arrays.index),this.addAttribute("position",new Et(t.arrays.position,3)),this.addAttribute("uv",new Et(t.arrays.uv,2))},Pl.prototype.addShape=function(i,c){function t(r,t,a){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(a).add(r)}function n(i,t,p){var n=i.x-t.x,s=i.y-t.y,M=p.x-i.x,h=p.y-i.y,l=n*n+s*s,u,E,a;if(D(n*h-s*M)>kd){var o=S(l),d=S(M*M+h*h),f=t.x-s/o,m=t.y+n/o,g=p.x-h/d,v=p.y+M/d,y=((g-f)*h-(v-m)*M)/(n*h-s*M);u=f+n*y-i.x,E=m+s*y-i.y;var x=u*u+E*E;if(2>=x)return new Br(u,E);a=S(x/2)}else{var A=!1;n>kd?M>kd&&(A=!0):n<-kd?M<-kd&&(A=!0):jr(s)===jr(h)&&(A=!0),A?(u=-s,E=n,a=S(l)):(u=n,E=s,a=S(l/2))}return new Br(u/a,E/a)}function r(l,t){var d,i;for(Z=l.length;0<=--Z;){d=Z,i=Z-1,0>i&&(i=l.length-1);var n=0,r=A+2*E;for(n=0;n<r;n++){var c=G*n,o=G*(n+1);ee(t+d+c,t+i+c,t+i+o,t+d+o,l,n,r,d,i)}}}function a(r,t,a){x.push(r),x.push(t),x.push(a)}function o(a,t,o){s(a),s(t),s(o);var i=v.length/3,n=P.generateTopUV(g,v,i-3,i-2,i-1);l(n[0]),l(n[1]),l(n[2])}function ee(r,t,a,o){s(r),s(t),s(o),s(t),s(a),s(o);var i=v.length/3,n=P.generateSideWallUV(g,v,i-6,i-3,i-2,i-1);l(n[0]),l(n[1]),l(n[3]),l(n[1]),l(n[2]),l(n[3])}function s(r){h.push(v.length/3),v.push(x[3*r+0]),v.push(x[3*r+1]),v.push(x[3*r+2])}function l(r){y.push(r.x),y.push(r.y)}var u=c.arrays?c.arrays:this.getArrays(),v=u.position,h=u.index,y=u.uv,x=[],b=void 0===c.amount?100:c.amount,w=void 0===c.bevelThickness?6:c.bevelThickness,M=void 0===c.bevelSize?w-2:c.bevelSize,E=void 0===c.bevelSegments?3:c.bevelSegments,T=void 0===c.bevelEnabled||c.bevelEnabled,_=void 0===c.curveSegments?12:c.curveSegments,A=void 0===c.steps?1:c.steps,R=c.extrudePath,L=!1,P=void 0===c.UVGenerator?Ul.WorldUVGenerator:c.UVGenerator,C,p,d,f,m;R&&(C=R.getSpacedPoints(A),L=!0,T=!1,p=void 0===c.frames?R.computeFrenetFrames(A,!1):c.frames,d=new Qr,f=new Qr,m=new Qr),T||(E=0,w=0,M=0);var g=this,te=i.extractPoints(_),re=te.shape,F=te.holes,B,ae,U;if(!Us.isClockWise(re))for(re=re.reverse(),ae=0,U=F.length;ae<U;ae++)B=F[ae],Us.isClockWise(B)&&(F[ae]=B.reverse());var N=Us.triangulateShape(re,F),z=re;for(ae=0,U=F.length;ae<U;ae++)B=F[ae],re=re.concat(B);for(var G=re.length,q=N.length,Y=[],Z=0,J=z.length,Q=J-1,K=Z+1,$,H,V,k,oe,W;Z<J;Z++,Q++,K++)Q===J&&(Q=0),K===J&&(K=0),Y[Z]=n(z[Z],z[Q],z[K]);var X=[],ie=Y.concat(),ne;for(ae=0,U=F.length;ae<U;ae++){for(B=F[ae],ne=[],Z=0,J=B.length,Q=J-1,K=Z+1;Z<J;Z++,Q++,K++)Q===J&&(Q=0),K===J&&(K=0),ne[Z]=n(B[Z],B[Q],B[K]);X.push(ne),ie=ie.concat(ne)}for($=0;$<E;$++){for(V=$/E,k=w*O(V*Or/2),H=M*I(V*Or/2),Z=0,J=z.length;Z<J;Z++)oe=t(z[Z],Y[Z],H),a(oe.x,oe.y,-k);for(ae=0,U=F.length;ae<U;ae++)for(B=F[ae],ne=X[ae],Z=0,J=B.length;Z<J;Z++)oe=t(B[Z],ne[Z],H),a(oe.x,oe.y,-k)}for(H=M,Z=0;Z<G;Z++)oe=T?t(re[Z],ie[Z],H):re[Z],L?(f.copy(p.normals[0]).multiplyScalar(oe.x),d.copy(p.binormals[0]).multiplyScalar(oe.y),m.copy(C[0]).add(f).add(d),a(m.x,m.y,m.z)):a(oe.x,oe.y,0);var se;for(se=1;se<=A;se++)for(Z=0;Z<G;Z++)oe=T?t(re[Z],ie[Z],H):re[Z],L?(f.copy(p.normals[se]).multiplyScalar(oe.x),d.copy(p.binormals[se]).multiplyScalar(oe.y),m.copy(C[se]).add(f).add(d),a(m.x,m.y,m.z)):a(oe.x,oe.y,b/A*se);for($=E-1;0<=$;$--){for(V=$/E,k=w*O(V*Or/2),H=M*I(V*Or/2),Z=0,J=z.length;Z<J;Z++)oe=t(z[Z],Y[Z],H),a(oe.x,oe.y,b+k);for(ae=0,U=F.length;ae<U;ae++)for(B=F[ae],ne=X[ae],Z=0,J=B.length;Z<J;Z++)oe=t(B[Z],ne[Z],H),L?a(oe.x,oe.y+C[A-1].y,C[A-1].x+k):a(oe.x,oe.y,b+k)}!function(){var r=v.length/3;if(T){var t=0,a=G*t;for(Z=0;Z<q;Z++)W=N[Z],o(W[2]+a,W[1]+a,W[0]+a);for(t=A+2*E,a=G*t,Z=0;Z<q;Z++)W=N[Z],o(W[0]+a,W[1]+a,W[2]+a)}else{for(Z=0;Z<q;Z++)W=N[Z],o(W[2],W[1],W[0]);for(Z=0;Z<q;Z++)W=N[Z],o(W[0]+G*A,W[1]+G*A,W[2]+G*A)}g.addGroup(r,v.length/3-r,void 0===c.material?0:c.material)}(),function(){var a=v.length/3,t=0;for(r(z,t),t+=z.length,ae=0,U=F.length;ae<U;ae++)B=F[ae],r(B,t),t+=B.length;g.addGroup(a,v.length/3-a,void 0===c.extrudeMaterial?1:c.extrudeMaterial)}(),c.arrays||(this.setIndex(h),this.addAttribute("position",new Et(v,3)),this.addAttribute("uv",new Et(c.arrays.uv,2)))},Ul.WorldUVGenerator={generateTopUV:function(i,t,d,n,r){var a=t[3*d],o=t[3*d+1],s=t[3*n],c=t[3*n+1],p=t[3*r],l=t[3*r+1];return[new Br(a,o),new Br(s,c),new Br(p,l)]},generateSideWallUV:function(i,t,M,n,r,a){var o=t[3*M],s=t[3*M+1],c=t[3*M+2],h=t[3*n],l=t[3*n+1],u=t[3*n+2],p=t[3*r],d=t[3*r+1],f=t[3*r+2],m=t[3*a],g=t[3*a+1],x=t[3*a+2];return .01>D(s-l)?[new Br(o,1-c),new Br(h,1-u),new Br(p,1-f),new Br(m,1-x)]:[new Br(s,1-c),new Br(l,1-u),new Br(d,1-f),new Br(g,1-x)]}},Bl.prototype=Object.create(mt.prototype),Bl.prototype.constructor=Bl,kl.prototype=Object.create(Pl.prototype),kl.prototype.constructor=kl,Fl.prototype=Object.create(mt.prototype),Fl.prototype.constructor=Fl,Gl.prototype=Object.create(Rt.prototype),Gl.prototype.constructor=Gl,Vl.prototype=Object.create(mt.prototype),Vl.prototype.constructor=Vl,Hl.prototype=Object.create(Rt.prototype),Hl.prototype.constructor=Hl,Ql.prototype=Object.create(mt.prototype),Ql.prototype.constructor=Ql,Yl.prototype=Object.create(Rt.prototype),Yl.prototype.constructor=Yl,Wl.prototype=Object.create(mt.prototype),Wl.prototype.constructor=Wl,Xl.prototype=Object.create(Rt.prototype),Xl.prototype.constructor=Xl,ql.prototype=Object.create(Rt.prototype),ql.prototype.constructor=ql,Zl.prototype=Object.create(mt.prototype),Zl.prototype.constructor=Zl,Kl.prototype=Object.create(Rt.prototype),Kl.prototype.constructor=Kl,Jl.prototype=Object.create(Zl.prototype),Jl.prototype.constructor=Jl,$l.prototype=Object.create(Kl.prototype),$l.prototype.constructor=$l,ed.prototype=Object.create(mt.prototype),ed.prototype.constructor=ed,td.prototype=Object.create(Rt.prototype),td.prototype.constructor=td;var Ns=Object.freeze({WireframeGeometry:Ve,ParametricGeometry:xl,ParametricBufferGeometry:El,TetrahedronGeometry:Tl,TetrahedronBufferGeometry:bl,OctahedronGeometry:Ll,OctahedronBufferGeometry:Dl,IcosahedronGeometry:Nl,IcosahedronBufferGeometry:wl,DodecahedronGeometry:Cl,DodecahedronBufferGeometry:Sl,PolyhedronGeometry:vl,PolyhedronBufferGeometry:Al,TubeGeometry:Il,TubeBufferGeometry:_l,TorusKnotGeometry:jl,TorusKnotBufferGeometry:Ol,TorusGeometry:zl,TorusBufferGeometry:Rl,TextGeometry:Bl,TextBufferGeometry:kl,SphereGeometry:Fl,SphereBufferGeometry:Gl,RingGeometry:Vl,RingBufferGeometry:Hl,PlaneGeometry:jo,PlaneBufferGeometry:el,LatheGeometry:Ql,LatheBufferGeometry:Yl,ShapeGeometry:Wl,ShapeBufferGeometry:Xl,ExtrudeGeometry:Ul,ExtrudeBufferGeometry:Pl,EdgesGeometry:ql,ConeGeometry:Jl,ConeBufferGeometry:$l,CylinderGeometry:Zl,CylinderBufferGeometry:Kl,CircleGeometry:ed,CircleBufferGeometry:td,BoxGeometry:Lt,BoxBufferGeometry:ha});rd.prototype=Object.create(J.prototype),rd.prototype.constructor=rd,rd.prototype.isShadowMaterial=!0,ad.prototype=Object.create(aa.prototype),ad.prototype.constructor=ad,ad.prototype.isRawShaderMaterial=!0,od.prototype=Object.create(J.prototype),od.prototype.constructor=od,od.prototype.isMeshStandardMaterial=!0,od.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.defines={STANDARD:""},this.color.copy(r.color),this.roughness=r.roughness,this.metalness=r.metalness,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.roughnessMap=r.roughnessMap,this.metalnessMap=r.metalnessMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.envMapIntensity=r.envMapIntensity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},id.prototype=Object.create(od.prototype),id.prototype.constructor=id,id.prototype.isMeshPhysicalMaterial=!0,id.prototype.copy=function(r){return od.prototype.copy.call(this,r),this.defines={PHYSICAL:""},this.reflectivity=r.reflectivity,this.clearCoat=r.clearCoat,this.clearCoatRoughness=r.clearCoatRoughness,this},nd.prototype=Object.create(J.prototype),nd.prototype.constructor=nd,nd.prototype.isMeshPhongMaterial=!0,nd.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.specular.copy(r.specular),this.shininess=r.shininess,this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},sd.prototype=Object.create(nd.prototype),sd.prototype.constructor=sd,sd.prototype.isMeshToonMaterial=!0,sd.prototype.copy=function(r){return nd.prototype.copy.call(this,r),this.gradientMap=r.gradientMap,this},ld.prototype=Object.create(J.prototype),ld.prototype.constructor=ld,ld.prototype.isMeshNormalMaterial=!0,ld.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.bumpMap=r.bumpMap,this.bumpScale=r.bumpScale,this.normalMap=r.normalMap,this.normalScale.copy(r.normalScale),this.displacementMap=r.displacementMap,this.displacementScale=r.displacementScale,this.displacementBias=r.displacementBias,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},dd.prototype=Object.create(J.prototype),dd.prototype.constructor=dd,dd.prototype.isMeshLambertMaterial=!0,dd.prototype.copy=function(r){return J.prototype.copy.call(this,r),this.color.copy(r.color),this.map=r.map,this.lightMap=r.lightMap,this.lightMapIntensity=r.lightMapIntensity,this.aoMap=r.aoMap,this.aoMapIntensity=r.aoMapIntensity,this.emissive.copy(r.emissive),this.emissiveMap=r.emissiveMap,this.emissiveIntensity=r.emissiveIntensity,this.specularMap=r.specularMap,this.alphaMap=r.alphaMap,this.envMap=r.envMap,this.combine=r.combine,this.reflectivity=r.reflectivity,this.refractionRatio=r.refractionRatio,this.wireframe=r.wireframe,this.wireframeLinewidth=r.wireframeLinewidth,this.wireframeLinecap=r.wireframeLinecap,this.wireframeLinejoin=r.wireframeLinejoin,this.skinning=r.skinning,this.morphTargets=r.morphTargets,this.morphNormals=r.morphNormals,this},cd.prototype=Object.create(pl.prototype),cd.prototype.constructor=cd,cd.prototype.isLineDashedMaterial=!0,cd.prototype.copy=function(r){return pl.prototype.copy.call(this,r),this.scale=r.scale,this.dashSize=r.dashSize,this.gapSize=r.gapSize,this};var Ds=Object.freeze({ShadowMaterial:rd,SpriteMaterial:$t,RawShaderMaterial:ad,ShaderMaterial:aa,PointsMaterial:hl,MeshPhysicalMaterial:id,MeshStandardMaterial:od,MeshPhongMaterial:nd,MeshToonMaterial:sd,MeshNormalMaterial:ld,MeshLambertMaterial:dd,MeshDepthMaterial:oa,MeshDistanceMaterial:sa,MeshBasicMaterial:tl,LineDashedMaterial:cd,LineBasicMaterial:pl,Material:J}),Os={enabled:!1,files:{},add:function(r,t){!1!==this.enabled&&(this.files[r]=t)},get:function(r){if(!1!==this.enabled)return this.files[r]},remove:function(r){delete this.files[r]},clear:function(){this.files={}}},Fs=new pd;Object.assign(Oi.prototype,{load:function(y,t,M,x){void 0===y&&(y=""),void 0!==this.path&&(y=this.path+y);var n=this,r=Os.get(y);if(void 0!==r)return n.manager.itemStart(y),setTimeout(function(){t&&t(r),n.manager.itemEnd(y)},0),r;var a=/^data:(.*?)(;base64)?,(.*)$/,o=y.match(a);if(o){var i=o[1],s=!!o[2],h=o[3];h=window.decodeURIComponent(h),s&&(h=window.atob(h));try{var l=(this.responseType||"").toLowerCase(),p;switch(l){case"arraybuffer":case"blob":p=new ArrayBuffer(h.length);for(var u=new Uint8Array(p),d=0;d<h.length;d++)u[d]=h.charCodeAt(d);"blob"===l&&(p=new Blob([p],{type:i}));break;case"document":var f=new DOMParser;p=f.parseFromString(h,i);break;case"json":p=JSON.parse(h);break;default:p=h;}window.setTimeout(function(){t&&t(p),n.manager.itemEnd(y)},0)}catch(t){window.setTimeout(function(){x&&x(t),n.manager.itemEnd(y),n.manager.itemError(y)},0)}}else{var m=new XMLHttpRequest;for(var g in m.open("GET",y,!0),m.addEventListener("load",function(r){var o=r.target.response;Os.add(y,o),200===this.status?(t&&t(o),n.manager.itemEnd(y)):0===this.status?(console.warn("THREE.FileLoader: HTTP Status 0 received."),t&&t(o),n.manager.itemEnd(y)):(x&&x(r),n.manager.itemEnd(y),n.manager.itemError(y))},!1),void 0!==M&&m.addEventListener("progress",function(r){M(r)},!1),m.addEventListener("error",function(t){x&&x(t),n.manager.itemEnd(y),n.manager.itemError(y)},!1),void 0!==this.responseType&&(m.responseType=this.responseType),void 0!==this.withCredentials&&(m.withCredentials=this.withCredentials),m.overrideMimeType&&m.overrideMimeType(void 0===this.mimeType?"text/plain":this.mimeType),this.requestHeader)m.setRequestHeader(g,this.requestHeader[g]);m.send(null)}return n.manager.itemStart(y),m},setPath:function(r){return this.path=r,this},setResponseType:function(r){return this.responseType=r,this},setWithCredentials:function(r){return this.withCredentials=r,this},setMimeType:function(r){return this.mimeType=r,this},setRequestHeader:function(r){return this.requestHeader=r,this}}),Object.assign(Fi.prototype,{load:function(d,p,t,i){var u=this,r=[],a=new Ge;a.image=r;var o=new Oi(this.manager);if(o.setPath(this.path),o.setResponseType("arraybuffer"),Array.isArray(d))for(var n=0,s=0,c=d.length;s<c;++s)!function(s){o.load(d[s],function(o){var t=u._parser(o,!0);r[s]={width:t.width,height:t.height,format:t.format,mipmaps:t.mipmaps},6===(n+=1)&&(1===t.mipmapCount&&(a.minFilter=pc),a.format=t.format,a.needsUpdate=!0,p&&p(a))},t,i)}(s);else o.load(d,function(o){var t=u._parser(o,!0);if(t.isCubemap)for(var i=t.mipmaps.length/t.mipmapCount,n=0;n<i;n++){r[n]={mipmaps:[]};for(var s=0;s<t.mipmapCount;s++)r[n].mipmaps.push(t.mipmaps[n*t.mipmapCount+s]),r[n].format=t.format,r[n].width=t.width,r[n].height=t.height}else a.image.width=t.width,a.image.height=t.height,a.mipmaps=t.mipmaps;1===t.mipmapCount&&(a.minFilter=pc),a.format=t.format,a.needsUpdate=!0,p&&p(a)},t,i);return a},setPath:function(r){return this.path=r,this}}),Object.assign(Bi.prototype,{load:function(l,d,t,i){var n=this,r=new s,a=new Oi(this.manager);return a.setResponseType("arraybuffer"),a.load(l,function(a){var t=n._parser(a);t&&(void 0===t.image?void 0!==t.data&&(r.image.width=t.width,r.image.height=t.height,r.image.data=t.data):r.image=t.image,r.wrapS=void 0===t.wrapS?nc:t.wrapS,r.wrapT=void 0===t.wrapT?nc:t.wrapT,r.magFilter=void 0===t.magFilter?pc:t.magFilter,r.minFilter=void 0===t.minFilter?mc:t.minFilter,r.anisotropy=void 0===t.anisotropy?1:t.anisotropy,void 0!==t.format&&(r.format=t.format),void 0!==t.type&&(r.type=t.type),void 0!==t.mipmaps&&(r.mipmaps=t.mipmaps),1===t.mipmapCount&&(r.minFilter=pc),r.needsUpdate=!0,d&&d(r,t))},t,i),r}}),Object.assign(zi.prototype,{crossOrigin:"Anonymous",load:function(s,t,l,i){void 0===s&&(s=""),void 0!==this.path&&(s=this.path+s);var n=this,r=Os.get(s);if(void 0!==r)return n.manager.itemStart(s),setTimeout(function(){t&&t(r),n.manager.itemEnd(s)},0),r;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");return a.addEventListener("load",function(){Os.add(s,this),t&&t(this),n.manager.itemEnd(s)},!1),a.addEventListener("error",function(t){i&&i(t),n.manager.itemEnd(s),n.manager.itemError(s)},!1),"data:"!==s.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),n.manager.itemStart(s),a.src=s,a},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Object.assign(Gi.prototype,{crossOrigin:"Anonymous",load:function(l,d,t,p){var n=new c,r=new zi(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);for(var a=0,o=0;o<l.length;++o)!function(o){r.load(l[o],function(r){n.images[o]=r,6==++a&&(n.needsUpdate=!0,d&&d(n))},void 0,p)}(o);return n},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Object.assign(Hi.prototype,{crossOrigin:"Anonymous",load:function(n,t,s,i){var r=new zi(this.manager);r.setCrossOrigin(this.crossOrigin),r.setPath(this.path);var a=new kr;return a.image=r.load(n,function(){var r=0<n.search(/\.(jpg|jpeg)$/)||0===n.search(/^data\:image\/jpeg/);a.format=r?zo:hc,a.needsUpdate=!0,void 0!==t&&t(a)},s,i),a},setCrossOrigin:function(r){return this.crossOrigin=r,this},setPath:function(r){return this.path=r,this}}),Vi.prototype=Object.assign(Object.create(ct.prototype),{constructor:Vi,isLight:!0,copy:function(r){return ct.prototype.copy.call(this,r),this.color.copy(r.color),this.intensity=r.intensity,this},toJSON:function(r){var t=ct.prototype.toJSON.call(this,r);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}),ud.prototype=Object.assign(Object.create(Vi.prototype),{constructor:ud,isHemisphereLight:!0,copy:function(r){return Vi.prototype.copy.call(this,r),this.groundColor.copy(r.groundColor),this}}),Object.assign(md.prototype,{copy:function(r){return this.camera=r.camera.clone(),this.bias=r.bias,this.radius=r.radius,this.mapSize.copy(r.mapSize),this},clone:function(){return new this.constructor().copy(this)},toJSON:function(){var r={};return 0!==this.bias&&(r.bias=this.bias),1!==this.radius&&(r.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(r.mapSize=this.mapSize.toArray()),r.camera=this.camera.toJSON(!1).object,delete r.camera.matrix,r}}),Wi.prototype=Object.assign(Object.create(md.prototype),{constructor:Wi,isSpotLightShadow:!0,update:function(a){var t=this.camera,o=2*Mc.RAD2DEG*a.angle,i=this.mapSize.width/this.mapSize.height,n=a.distance||t.far;o===t.fov&&i===t.aspect&&n===t.far||(t.fov=o,t.aspect=i,t.far=n,t.updateProjectionMatrix())}}),gd.prototype=Object.assign(Object.create(Vi.prototype),{constructor:gd,isSpotLight:!0,copy:function(r){return Vi.prototype.copy.call(this,r),this.distance=r.distance,this.angle=r.angle,this.penumbra=r.penumbra,this.decay=r.decay,this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),hd.prototype=Object.assign(Object.create(Vi.prototype),{constructor:hd,isPointLight:!0,copy:function(r){return Vi.prototype.copy.call(this,r),this.distance=r.distance,this.decay=r.decay,this.shadow=r.shadow.clone(),this}}),yd.prototype=Object.assign(Object.create(md.prototype),{constructor:yd}),fd.prototype=Object.assign(Object.create(Vi.prototype),{constructor:fd,isDirectionalLight:!0,copy:function(r){return Vi.prototype.copy.call(this,r),this.target=r.target.clone(),this.shadow=r.shadow.clone(),this}}),Md.prototype=Object.assign(Object.create(Vi.prototype),{constructor:Md,isAmbientLight:!0}),xd.prototype=Object.assign(Object.create(Vi.prototype),{constructor:xd,isRectAreaLight:!0,copy:function(r){return Vi.prototype.copy.call(this,r),this.width=r.width,this.height=r.height,this},toJSON:function(r){var t=Vi.prototype.toJSON.call(this,r);return t.object.width=this.width,t.object.height=this.height,t}});var Bs={arraySlice:function(r,t,a){return Bs.isTypedArray(r)?new r.constructor(r.subarray(t,void 0===a?r.length:a)):r.slice(t,a)},convertArray:function(r,t,a){return r&&(a||r.constructor!==t)?"number"==typeof t.BYTES_PER_ELEMENT?new t(r):Array.prototype.slice.call(r):r},isTypedArray:function(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)},getKeyframeOrder:function(a){function t(t,r){return a[t]-a[r]}for(var o=a.length,i=Array(o),n=0;n!==o;++n)i[n]=n;return i.sort(t),i},sortedArray:function(l,t,d){for(var i=l.length,n=new l.constructor(i),r=0,a=0;a!==i;++r)for(var o=d[r]*t,s=0;s!==t;++s)n[a++]=l[o+s];return n},flattenJSON:function(s,t,l,i){for(var n=1,r=s[0];void 0!==r&&void 0===r[i];)r=s[n++];if(void 0!==r){var a=r[i];if(void 0!==a)if(Array.isArray(a))do a=r[i],void 0!==a&&(t.push(r.time),l.push.apply(l,a)),r=s[n++];while(void 0!==r);else if(void 0!==a.toArray)do a=r[i],void 0!==a&&(t.push(r.time),a.toArray(l,l.length)),r=s[n++];while(void 0!==r);else do a=r[i],void 0!==a&&(t.push(r.time),l.push(a)),r=s[n++];while(void 0!==r)}}};Object.assign(Ed.prototype,{evaluate:function(l){var t=this.parameterPositions,d=this._cachedIndex,i=t[d],n=t[d-1];t:{e:{var r;i:{n:if(!(l<i)){for(var a=d+2;;){if(void 0===i){if(l<n)break n;return d=t.length,this._cachedIndex=d,this.afterEnd_(d-1,l,n)}if(d===a)break;if(n=i,i=t[++d],l<i)break e}r=t.length;break i}{if(l>=n)break t;var o=t[1];l<o&&(d=2,n=o);for(var a=d-2;;){if(void 0===n)return this._cachedIndex=0,this.beforeStart_(0,l,i);if(d===a)break;if(i=n,n=t[--d-1],l>=n)break e}r=d,d=0}}for(;d<r;){var s=d+r>>>1;l<t[s]?r=s:d=s+1}if(i=t[d],void 0===(n=t[d-1]))return this._cachedIndex=0,this.beforeStart_(0,l,i);if(void 0===i)return d=t.length,this._cachedIndex=d,this.afterEnd_(d-1,n,l)}this._cachedIndex=d,this.intervalChanged_(d,n,i)}return this.interpolate_(d,n,l,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(r){for(var t=this.resultBuffer,o=this.sampleValues,i=this.valueSize,n=0;n!==i;++n)t[n]=o[r*i+n];return t},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Ed.prototype,{beforeStart_:Ed.prototype.copySampleValue_,afterEnd_:Ed.prototype.copySampleValue_}),$i.prototype=Object.assign(Object.create(Ed.prototype),{constructor:$i,DefaultSettings_:{endingStart:is,endingEnd:is},intervalChanged_:function(l,t,d){var i=this.parameterPositions,n=l-2,r=l+1,a=i[n],o=i[r];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:n=l,a=2*t-d;break;case 2402:n=i.length-2,a=t+i[n]-i[n+1];break;default:n=l,a=d;}if(void 0===o)switch(this.getSettings_().endingEnd){case 2401:r=l,o=2*d-t;break;case 2402:r=1,o=d+i[1]-i[0];break;default:r=l-1,o=t;}var s=.5*(d-t),c=this.valueSize;this._weightPrev=s/(t-a),this._weightNext=s/(o-d),this._offsetPrev=n*c,this._offsetNext=r*c},interpolate_:function(c,t,g,i){for(var n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=c*a,s=this._offsetPrev,h=this._offsetNext,l=this._weightPrev,y=this._weightNext,p=(g-t)/(i-t),d=p*p,f=d*p,m=0;m!==a;++m)n[m]=(-l*f+2*l*d-l*p)*r[s+m]+((1+l)*f+(-1.5-2*l)*d+(-.5+l)*p+1)*r[o-a+m]+((-1-y)*f+(1.5+y)*d+.5*p)*r[o+m]+(y*f-y*d)*r[h+m];return n}}),vd.prototype=Object.assign(Object.create(Ed.prototype),{constructor:vd,interpolate_:function(l,t,d,i){for(var n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=l*a,s=(d-t)/(i-t),c=0;c!==a;++c)n[c]=r[o-a+c]*(1-s)+r[o+c]*s;return n}}),Ad.prototype=Object.assign(Object.create(Ed.prototype),{constructor:Ad,interpolate_:function(r){return this.copySampleValue_(r-1)}});var zs;zs={TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(r){return new Ad(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodLinear:function(r){return new vd(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:function(r){return new $i(this.times,this.values,this.getValueSize(),r)},setInterpolation:function(r){var t;if(2300===r?t=this.InterpolantFactoryMethodDiscrete:2301===r?t=this.InterpolantFactoryMethodLinear:2302===r?t=this.InterpolantFactoryMethodSmooth:void 0,void 0===t){var a="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(r===this.DefaultInterpolation)throw new Error(a);this.setInterpolation(this.DefaultInterpolation)}return void console.warn("THREE.KeyframeTrackPrototype:",a)}this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302;}},getValueSize:function(){return this.values.length/this.times.length},shift:function(r){if(0!==r)for(var t=this.times,a=0,o=t.length;a!==o;++a)t[a]+=r;return this},scale:function(r){if(1!==r)for(var t=this.times,a=0,o=t.length;a!==o;++a)t[a]*=r;return this},trim:function(s,t){for(var l=this.times,i=l.length,n=0,r=i-1;n!==i&&l[n]<s;)++n;for(;-1!==r&&l[r]>t;)--r;if(++r,0!==n||r!==i){n>=r&&(r=L(r,1),n=r-1);var a=this.getValueSize();this.times=Bs.arraySlice(l,n,r),this.values=Bs.arraySlice(this.values,n*a,r*a)}return this},validate:function(){var l=!0,t=this.getValueSize();0!=t-C(t)&&(console.error("THREE.KeyframeTrackPrototype: Invalid value size in track.",this),l=!1);var d=this.times,i=this.values,n=d.length;0===n&&(console.error("THREE.KeyframeTrackPrototype: Track is empty.",this),l=!1);for(var r=null,a=0,o;a!==n;a++){if(o=d[a],"number"==typeof o&&isNaN(o)){console.error("THREE.KeyframeTrackPrototype: Time is not a valid number.",this,a,o),l=!1;break}if(null!==r&&r>o){console.error("THREE.KeyframeTrackPrototype: Out of order keys.",this,a,o,r),l=!1;break}r=o}if(void 0!==i&&Bs.isTypedArray(i))for(var a=0,p=i.length,c;a!==p;++a)if(c=i[a],isNaN(c)){console.error("THREE.KeyframeTrackPrototype: Value is not a valid number.",this,a,c),l=!1;break}return l},optimize:function(){for(var l=this.times,t=this.values,u=this.getValueSize(),i=2302===this.getInterpolation(),n=1,r=l.length-1,a=1;a<r;++a){var o=!1,s=l[a];if(s!==l[a+1]&&(1!==a||s!==s[0]))if(i)o=!0;else for(var c=a*u,g=0,p;g!==u;++g)if(p=t[c+g],p!==t[c-u+g]||p!==t[c+u+g]){o=!0;break}if(o){if(a!==n){l[n]=l[a];for(var d=a*u,h=n*u,g=0;g!==u;++g)t[h+g]=t[d+g]}++n}}if(0<r){l[n]=l[r];for(var d=r*u,h=n*u,g=0;g!==u;++g)t[h+g]=t[d+g];++n}return n!==l.length&&(this.times=Bs.arraySlice(l,0,n),this.values=Bs.arraySlice(t,0,n*u)),this}},rn.prototype=Object.assign(Object.create(zs),{constructor:rn,ValueTypeName:"vector"}),bd.prototype=Object.assign(Object.create(Ed.prototype),{constructor:bd,interpolate_:function(s,t,d,i){for(var n=this.resultBuffer,r=this.sampleValues,a=this.valueSize,o=s*a,c=o+a;o!==c;o+=4)Hr.slerpFlat(n,0,r,o-a,r,o,(d-t)/(i-t));return n}}),Ld.prototype=Object.assign(Object.create(zs),{constructor:Ld,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(r){return new bd(this.times,this.values,this.getValueSize(),r)},InterpolantFactoryMethodSmooth:void 0}),Dd.prototype=Object.assign(Object.create(zs),{constructor:Dd,ValueTypeName:"number"}),Nd.prototype=Object.assign(Object.create(zs),{constructor:Nd,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),wd.prototype=Object.assign(Object.create(zs),{constructor:wd,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Cd.prototype=Object.assign(Object.create(zs),{constructor:Cd,ValueTypeName:"color"}),Sd.prototype=zs,zs.constructor=Sd,Object.assign(Sd,{parse:function(r){if(void 0===r.type)throw new Error("track type undefined, can not parse");var t=Sd._getTrackTypeForValueTypeName(r.type);if(void 0===r.times){var a=[],o=[];Bs.flattenJSON(r.keys,a,o,"value"),r.times=a,r.values=o}return void 0===t.parse?new t(r.name,r.times,r.values,r.interpolation):t.parse(r)},toJSON:function(r){var t=r.constructor,a;if(void 0!==t.toJSON)a=t.toJSON(r);else{a={name:r.name,times:Bs.convertArray(r.times,Array),values:Bs.convertArray(r.values,Array)};var o=r.getInterpolation();o!==r.DefaultInterpolation&&(a.interpolation=o)}return a.type=r.ValueTypeName,a},_getTrackTypeForValueTypeName:function(r){switch(r.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Dd;case"vector":case"vector2":case"vector3":case"vector4":return rn;case"color":return Cd;case"quaternion":return Ld;case"bool":case"boolean":return wd;case"string":return Nd;}throw new Error("Unsupported typeName: "+r)}}),Object.assign(pn,{parse:function(o){for(var t=[],s=o.tracks,i=1/(o.fps||1),n=0,r=s.length;n!==r;++n)t.push(Sd.parse(s[n]).scale(i));return new pn(o.name,o.duration,t)},toJSON:function(o){for(var t=[],s=o.tracks,i={name:o.name,duration:o.duration,tracks:t},n=0,r=s.length;n!==r;++n)t.push(Sd.toJSON(s[n]));return i},CreateFromMorphTargetSequence:function(l,t,d,i){for(var n=t.length,r=[],a=0;a<n;a++){var o=[],s=[];o.push((a+n-1)%n,a,(a+1)%n),s.push(0,1,0);var c=Bs.getKeyframeOrder(o);o=Bs.sortedArray(o,1,c),s=Bs.sortedArray(s,1,c),i||0!==o[0]||(o.push(n),s.push(s[0])),r.push(new Dd(".morphTargetInfluences["+t[a].name+"]",o,s).scale(1/d))}return new pn(l,-1,r)},findByName:function(a,t){var o=a;if(!Array.isArray(a)){var i=a;o=i.geometry&&i.geometry.animations||i.animations}for(var n=0;n<o.length;n++)if(o[n].name===t)return o[n];return null},CreateClipsFromMorphTargetSequences:function(d,t,p){for(var i={},n=/^([\w-]*?)([\d]+)$/,r=0,a=d.length;r<a;r++){var o=d[r],s=o.name.match(n);if(s&&1<s.length){var c=s[1],m=i[c];m||(i[c]=m=[]),m.push(o)}}var l=[];for(var c in i)l.push(pn.CreateFromMorphTargetSequence(c,i[c],t,p));return l},parseAnimation:function(y,M){if(!y)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var x=function(i,t,s,l,n){if(0!==s.length){var r=[],a=[];Bs.flattenJSON(s,r,a,l),0!==r.length&&n.push(new i(t,r,a))}},i=[],n=y.name||"default",r=y.length||-1,a=y.fps||30,o=y.hierarchy||[],s=0,c;s<o.length;s++)if(c=o[s].keys,c&&0!==c.length)if(c[0].morphTargets){for(var h={},l=0;l<c.length;l++)if(c[l].morphTargets)for(var u=0;u<c[l].morphTargets.length;u++)h[c[l].morphTargets[u]]=-1;for(var p in h){for(var d=[],f=[],u=0,m;u!==c[l].morphTargets.length;++u)m=c[l],d.push(m.time),f.push(m.morphTarget===p?1:0);i.push(new Dd(".morphTargetInfluence["+p+"]",d,f))}r=h.length*(a||1)}else{var g=".bones["+M[s].name+"]";x(rn,g+".position",c,"pos",i),x(Ld,g+".quaternion",c,"rot",i),x(rn,g+".scale",c,"scl",i)}return 0===i.length?null:new pn(n,r,i)}}),Object.assign(pn.prototype,{resetDuration:function(){for(var a=this.tracks,t=0,o=0,i=a.length,n;o!==i;++o)n=this.tracks[o],t=L(t,n.times[n.times.length-1]);this.duration=t},trim:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].trim(0,this.duration);return this},optimize:function(){for(var r=0;r<this.tracks.length;r++)this.tracks[r].optimize();return this}}),Object.assign(dn.prototype,{load:function(a,o,t,i){var n=this;new Oi(n.manager).load(a,function(r){o(n.parse(JSON.parse(r)))},t,i)},setTextures:function(r){this.textures=r},parse:function(o){function t(r){return void 0===i[r]&&console.warn("THREE.MaterialLoader: Undefined texture",r),i[r]}var i=this.textures,n=new Ds[o.type];if(void 0!==o.uuid&&(n.uuid=o.uuid),void 0!==o.name&&(n.name=o.name),void 0!==o.color&&n.color.setHex(o.color),void 0!==o.roughness&&(n.roughness=o.roughness),void 0!==o.metalness&&(n.metalness=o.metalness),void 0!==o.emissive&&n.emissive.setHex(o.emissive),void 0!==o.specular&&n.specular.setHex(o.specular),void 0!==o.shininess&&(n.shininess=o.shininess),void 0!==o.clearCoat&&(n.clearCoat=o.clearCoat),void 0!==o.clearCoatRoughness&&(n.clearCoatRoughness=o.clearCoatRoughness),void 0!==o.uniforms&&(n.uniforms=o.uniforms),void 0!==o.vertexShader&&(n.vertexShader=o.vertexShader),void 0!==o.fragmentShader&&(n.fragmentShader=o.fragmentShader),void 0!==o.vertexColors&&(n.vertexColors=o.vertexColors),void 0!==o.fog&&(n.fog=o.fog),void 0!==o.flatShading&&(n.flatShading=o.flatShading),void 0!==o.blending&&(n.blending=o.blending),void 0!==o.side&&(n.side=o.side),void 0!==o.opacity&&(n.opacity=o.opacity),void 0!==o.transparent&&(n.transparent=o.transparent),void 0!==o.alphaTest&&(n.alphaTest=o.alphaTest),void 0!==o.depthTest&&(n.depthTest=o.depthTest),void 0!==o.depthWrite&&(n.depthWrite=o.depthWrite),void 0!==o.colorWrite&&(n.colorWrite=o.colorWrite),void 0!==o.wireframe&&(n.wireframe=o.wireframe),void 0!==o.wireframeLinewidth&&(n.wireframeLinewidth=o.wireframeLinewidth),void 0!==o.wireframeLinecap&&(n.wireframeLinecap=o.wireframeLinecap),void 0!==o.wireframeLinejoin&&(n.wireframeLinejoin=o.wireframeLinejoin),void 0!==o.skinning&&(n.skinning=o.skinning),void 0!==o.morphTargets&&(n.morphTargets=o.morphTargets),void 0!==o.dithering&&(n.dithering=o.dithering),void 0!==o.visible&&(n.visible=o.visible),void 0!==o.userData&&(n.userData=o.userData),void 0!==o.shading&&(n.flatShading=1===o.shading),void 0!==o.size&&(n.size=o.size),void 0!==o.sizeAttenuation&&(n.sizeAttenuation=o.sizeAttenuation),void 0!==o.map&&(n.map=t(o.map)),void 0!==o.alphaMap&&(n.alphaMap=t(o.alphaMap),n.transparent=!0),void 0!==o.bumpMap&&(n.bumpMap=t(o.bumpMap)),void 0!==o.bumpScale&&(n.bumpScale=o.bumpScale),void 0!==o.normalMap&&(n.normalMap=t(o.normalMap)),void 0!==o.normalScale){var r=o.normalScale;!1===Array.isArray(r)&&(r=[r,r]),n.normalScale=new Br().fromArray(r)}return void 0!==o.displacementMap&&(n.displacementMap=t(o.displacementMap)),void 0!==o.displacementScale&&(n.displacementScale=o.displacementScale),void 0!==o.displacementBias&&(n.displacementBias=o.displacementBias),void 0!==o.roughnessMap&&(n.roughnessMap=t(o.roughnessMap)),void 0!==o.metalnessMap&&(n.metalnessMap=t(o.metalnessMap)),void 0!==o.emissiveMap&&(n.emissiveMap=t(o.emissiveMap)),void 0!==o.emissiveIntensity&&(n.emissiveIntensity=o.emissiveIntensity),void 0!==o.specularMap&&(n.specularMap=t(o.specularMap)),void 0!==o.envMap&&(n.envMap=t(o.envMap)),void 0!==o.reflectivity&&(n.reflectivity=o.reflectivity),void 0!==o.lightMap&&(n.lightMap=t(o.lightMap)),void 0!==o.lightMapIntensity&&(n.lightMapIntensity=o.lightMapIntensity),void 0!==o.aoMap&&(n.aoMap=t(o.aoMap)),void 0!==o.aoMapIntensity&&(n.aoMapIntensity=o.aoMapIntensity),void 0!==o.gradientMap&&(n.gradientMap=t(o.gradientMap)),n}}),Object.assign(fn.prototype,{load:function(a,o,t,i){var n=this;new Oi(n.manager).load(a,function(r){o(n.parse(JSON.parse(r)))},t,i)},parse:function(c){var t=new Rt,m=c.data.index;if(void 0!==m){var i=new Gs[m.type](m.array);t.setIndex(new gt(i,1))}var n=c.data.attributes;for(var r in n){var a=n[r],i=new Gs[a.type](a.array);t.addAttribute(r,new gt(i,a.itemSize,a.normalized))}var o=c.data.groups||c.data.drawcalls||c.data.offsets;if(void 0!==o)for(var s=0,g=o.length,l;s!==g;++s)l=o[s],t.addGroup(l.start,l.count,l.materialIndex);var u=c.data.boundingSphere;if(void 0!==u){var p=new Qr;void 0!==u.center&&p.fromArray(u.center),t.boundingSphere=new et(p,u.radius)}return t}});var Gs={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"==typeof Uint8ClampedArray?Uint8Array:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};mn.Handlers={handlers:[],add:function(r,t){this.handlers.push(r,t)},get:function(o){for(var t=this.handlers,s=0,i=t.length;s<i;s+=2){var n=t[s],r=t[s+1];if(n.test(o))return r}return null}},Object.assign(mn.prototype,{crossOrigin:void 0,extractUrlBase:function(r){var t=r.split("/");return 1===t.length?"./":(t.pop(),t.join("/")+"/")},initMaterials:function(a,t,o){for(var i=[],n=0;n<a.length;++n)i[n]=this.createMaterial(a[n],t,o);return i},createMaterial:function(){var a={NoBlending:Yd,NormalBlending:Wd,AdditiveBlending:Xd,SubtractiveBlending:qd,MultiplyBlending:Zd,CustomBlending:Kd},t=new W,d=new Hi,i=new dn;return function(n,m,g){function r(a,t,i,n,r){var c=m+a,l=mn.Handlers.get(c),u;null===l?(d.setCrossOrigin(g),u=d.load(c)):u=l.load(c),void 0!==t&&(u.repeat.fromArray(t),1!==t[0]&&(u.wrapS=ic),1!==t[1]&&(u.wrapT=ic)),void 0!==i&&u.offset.fromArray(i),void 0!==n&&("repeat"===n[0]&&(u.wrapS=ic),"mirror"===n[0]&&(u.wrapS=sc),"repeat"===n[1]&&(u.wrapT=ic),"mirror"===n[1]&&(u.wrapT=sc)),void 0!==r&&(u.anisotropy=r);var h=Mc.generateUUID();return o[h]=u,h}var o={},s={uuid:Mc.generateUUID(),type:"MeshLambertMaterial"};for(var c in n){var l=n[c];switch(c){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":s.name=l;break;case"blending":s.blending=a[l];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",c,"is no longer supported.");break;case"colorDiffuse":s.color=t.fromArray(l).getHex();break;case"colorSpecular":s.specular=t.fromArray(l).getHex();break;case"colorEmissive":s.emissive=t.fromArray(l).getHex();break;case"specularCoef":s.shininess=l;break;case"shading":"basic"===l.toLowerCase()&&(s.type="MeshBasicMaterial"),"phong"===l.toLowerCase()&&(s.type="MeshPhongMaterial"),"standard"===l.toLowerCase()&&(s.type="MeshStandardMaterial");break;case"mapDiffuse":s.map=r(l,n.mapDiffuseRepeat,n.mapDiffuseOffset,n.mapDiffuseWrap,n.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":s.emissiveMap=r(l,n.mapEmissiveRepeat,n.mapEmissiveOffset,n.mapEmissiveWrap,n.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":s.lightMap=r(l,n.mapLightRepeat,n.mapLightOffset,n.mapLightWrap,n.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":s.aoMap=r(l,n.mapAORepeat,n.mapAOOffset,n.mapAOWrap,n.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":s.bumpMap=r(l,n.mapBumpRepeat,n.mapBumpOffset,n.mapBumpWrap,n.mapBumpAnisotropy);break;case"mapBumpScale":s.bumpScale=l;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":s.normalMap=r(l,n.mapNormalRepeat,n.mapNormalOffset,n.mapNormalWrap,n.mapNormalAnisotropy);break;case"mapNormalFactor":s.normalScale=[l,l];break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":s.specularMap=r(l,n.mapSpecularRepeat,n.mapSpecularOffset,n.mapSpecularWrap,n.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":s.metalnessMap=r(l,n.mapMetalnessRepeat,n.mapMetalnessOffset,n.mapMetalnessWrap,n.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":s.roughnessMap=r(l,n.mapRoughnessRepeat,n.mapRoughnessOffset,n.mapRoughnessWrap,n.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":s.alphaMap=r(l,n.mapAlphaRepeat,n.mapAlphaOffset,n.mapAlphaWrap,n.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":s.side=ba;break;case"doubleSided":s.side=Hd;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),s.opacity=l;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":s[c]=l;break;case"vertexColors":!0===l&&(s.vertexColors=Qd),"face"===l&&(s.vertexColors=Ma);break;default:console.error("THREE.Loader.createMaterial: Unsupported",c,l);}}return"MeshBasicMaterial"===s.type&&delete s.emissive,"MeshPhongMaterial"!==s.type&&delete s.specular,1>s.opacity&&(s.transparent=!0),i.setTextures(o),i.parse(s)}}()}),Object.assign(gn.prototype,{load:function(l,t,s,i){var d=this,r=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:mn.prototype.extractUrlBase(l),a=new Oi(this.manager);a.setWithCredentials(this.withCredentials),a.load(l,function(a){var i=JSON.parse(a),n=i.metadata;if(void 0!==n){var o=n.type;if(void 0!==o){if("object"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.ObjectLoader instead.");if("scene"===o.toLowerCase())return void console.error("THREE.JSONLoader: "+l+" should be loaded with THREE.SceneLoader instead.")}}var s=d.parse(i,r);t(s.geometry,s.materials)},s,i)},setTexturePath:function(r){this.texturePath=r},parse:function(){function s(i,c){function j(r,t){return r&1<<t}var n=i.faces,I=i.vertices,z=i.normals,N=i.colors,D=i.scale,O=0,U,r,a,o,s,h,l,u,p,d,f,m,g,v,y,x,b,_,w,M,E,T,S,A,R,L,P;if(void 0!==i.uvs){for(U=0;U<i.uvs.length;U++)i.uvs[U].length&&O++;for(U=0;U<O;U++)c.faceVertexUvs[U]=[]}for(o=0,s=I.length;o<s;)_=new Qr,_.x=I[o++]*D,_.y=I[o++]*D,_.z=I[o++]*D,c.vertices.push(_);for(o=0,s=n.length;o<s;)if(d=n[o++],f=j(d,0),m=j(d,1),g=j(d,3),v=j(d,4),y=j(d,5),x=j(d,6),b=j(d,7),f){if(M=new ua,M.a=n[o],M.b=n[o+1],M.c=n[o+3],E=new ua,E.a=n[o+1],E.b=n[o+2],E.c=n[o+3],o+=4,m&&(p=n[o++],M.materialIndex=p,E.materialIndex=p),a=c.faces.length,g)for(U=0;U<O;U++)for(A=i.uvs[U],c.faceVertexUvs[U][a]=[],c.faceVertexUvs[U][a+1]=[],r=0;4>r;r++)u=n[o++],L=A[2*u],P=A[2*u+1],R=new Br(L,P),2!==r&&c.faceVertexUvs[U][a].push(R),0!==r&&c.faceVertexUvs[U][a+1].push(R);if(v&&(l=3*n[o++],M.normal.set(z[l++],z[l++],z[l]),E.normal.copy(M.normal)),y)for(U=0;4>U;U++)l=3*n[o++],S=new Qr(z[l++],z[l++],z[l]),2!==U&&M.vertexNormals.push(S),0!==U&&E.vertexNormals.push(S);if(x&&(h=n[o++],T=N[h],M.color.setHex(T),E.color.setHex(T)),b)for(U=0;4>U;U++)h=n[o++],T=N[h],2!==U&&M.vertexColors.push(new W(T)),0!==U&&E.vertexColors.push(new W(T));c.faces.push(M),c.faces.push(E)}else{if(w=new ua,w.a=n[o++],w.b=n[o++],w.c=n[o++],m&&(p=n[o++],w.materialIndex=p),a=c.faces.length,g)for(U=0;U<O;U++)for(A=i.uvs[U],c.faceVertexUvs[U][a]=[],r=0;3>r;r++)u=n[o++],L=A[2*u],P=A[2*u+1],R=new Br(L,P),c.faceVertexUvs[U][a].push(R);if(v&&(l=3*n[o++],w.normal.set(z[l++],z[l++],z[l])),y)for(U=0;3>U;U++)l=3*n[o++],S=new Qr(z[l++],z[l++],z[l]),w.vertexNormals.push(S);if(x&&(h=n[o++],w.color.setHex(N[h])),b)for(U=0;3>U;U++)h=n[o++],w.vertexColors.push(new W(N[h]));c.faces.push(w)}}function t(r,t){var m=void 0===r.influencesPerVertex?2:r.influencesPerVertex;if(r.skinWeights)for(var i=0,n=r.skinWeights.length;i<n;i+=m){var a=r.skinWeights[i],o=1<m?r.skinWeights[i+1]:0,s=2<m?r.skinWeights[i+2]:0,c=3<m?r.skinWeights[i+3]:0;t.skinWeights.push(new Fr(a,o,s,c))}if(r.skinIndices)for(var i=0,n=r.skinIndices.length;i<n;i+=m){var g=r.skinIndices[i],l=1<m?r.skinIndices[i+1]:0,u=2<m?r.skinIndices[i+2]:0,p=3<m?r.skinIndices[i+3]:0;t.skinIndices.push(new Fr(g,l,u,p))}t.bones=r.bones,t.bones&&0<t.bones.length&&(t.skinWeights.length!==t.skinIndices.length||t.skinIndices.length!==t.vertices.length)&&console.warn("When skinning, number of vertices ("+t.vertices.length+"), skinIndices ("+t.skinIndices.length+"), and skinWeights ("+t.skinWeights.length+") should match.")}function l(d,t){var c=d.scale;if(void 0!==d.morphTargets)for(var i=0,m=d.morphTargets.length;i<m;i++){t.morphTargets[i]={},t.morphTargets[i].name=d.morphTargets[i].name,t.morphTargets[i].vertices=[];for(var r=t.morphTargets[i].vertices,a=d.morphTargets[i].vertices,o=0,s=a.length,g;o<s;o+=3)g=new Qr,g.x=a[o]*c,g.y=a[o+1]*c,g.z=a[o+2]*c,r.push(g)}if(void 0!==d.morphColors&&0<d.morphColors.length){console.warn("THREE.JSONLoader: \"morphColors\" no longer supported. Using them as face colors.");for(var l=t.faces,u=d.morphColors[0].colors,i=0,m=l.length;i<m;i++)l[i].color.fromArray(u,3*i)}}function n(s,t){var l=[],i=[];void 0!==s.animation&&i.push(s.animation),void 0!==s.animations&&(s.animations.length?i=i.concat(s.animations):i.push(s.animations));for(var n=0,r;n<i.length;n++)r=pn.parseAnimation(i[n],t.bones),r&&l.push(r);if(t.morphTargets){var d=pn.CreateClipsFromMorphTargetSequences(t.morphTargets,10);l=l.concat(d)}0<l.length&&(t.animations=l)}return function(a,i){void 0!==a.data&&(a=a.data),a.scale=void 0===a.scale?1:1/a.scale;var r=new mt;return s(a,r),t(a,r),l(a,r),n(a,r),r.computeFaceNormals(),r.computeBoundingSphere(),void 0===a.materials||0===a.materials.length?{geometry:r}:{geometry:r,materials:mn.prototype.initMaterials(a.materials,i,this.crossOrigin)}}}()}),Object.assign(vn.prototype,{load:function(s,t,a,o){""===this.texturePath&&(this.texturePath=s.substring(0,s.lastIndexOf("/")+1));var n=this;new Oi(n.manager).load(s,function(r){var i=null;try{i=JSON.parse(r)}catch(t){return void 0!==o&&o(t),void console.error("THREE:ObjectLoader: Can't parse "+s+".",t.message)}var a=i.metadata;return void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase()?void console.error("THREE.ObjectLoader: Can't load "+s+". Use THREE.JSONLoader instead."):void n.parse(i,t)},a,o)},setTexturePath:function(r){this.texturePath=r},setCrossOrigin:function(r){this.crossOrigin=r},parse:function(s,t){var l=this.parseGeometries(s.geometries),i=this.parseImages(s.images,function(){void 0!==t&&t(a)}),n=this.parseTextures(s.textures,i),r=this.parseMaterials(s.materials,n),a=this.parseObject(s.object,l,r);return s.animations&&(a.animations=this.parseAnimations(s.animations)),void 0!==s.images&&0!==s.images.length||void 0!==t&&t(a),a},parseGeometries:function(l){var t={};if(void 0!==l)for(var d=new gn,i=new fn,n=0,r=l.length;n<r;n++){var a=l[n],s;switch(a.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Ns[a.type](a.width,a.height,a.widthSegments,a.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Ns[a.type](a.width,a.height,a.depth,a.widthSegments,a.heightSegments,a.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Ns[a.type](a.radius,a.segments,a.thetaStart,a.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Ns[a.type](a.radiusTop,a.radiusBottom,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Ns[a.type](a.radius,a.height,a.radialSegments,a.heightSegments,a.openEnded,a.thetaStart,a.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Ns[a.type](a.radius,a.widthSegments,a.heightSegments,a.phiStart,a.phiLength,a.thetaStart,a.thetaLength);break;case"DodecahedronGeometry":case"IcosahedronGeometry":case"OctahedronGeometry":case"TetrahedronGeometry":s=new Ns[a.type](a.radius,a.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Ns[a.type](a.innerRadius,a.outerRadius,a.thetaSegments,a.phiSegments,a.thetaStart,a.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Ns[a.type](a.radius,a.tube,a.radialSegments,a.tubularSegments,a.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Ns[a.type](a.radius,a.tube,a.tubularSegments,a.radialSegments,a.p,a.q);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Ns[a.type](a.points,a.segments,a.phiStart,a.phiLength);break;case"BufferGeometry":s=i.parse(a);break;case"Geometry":s=d.parse(a,this.texturePath).geometry;break;default:console.warn("THREE.ObjectLoader: Unsupported geometry type \""+a.type+"\"");continue;}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),t[a.uuid]=s}return t},parseMaterials:function(l,t){var d={};if(void 0!==l){var i=new dn;i.setTextures(t);for(var n=0,r=l.length,a;n<r;n++)if(a=l[n],"MultiMaterial"===a.type){for(var o=[],s=0;s<a.materials.length;s++)o.push(i.parse(a.materials[s]));d[a.uuid]=o}else d[a.uuid]=i.parse(a)}return d},parseAnimations:function(r){for(var t=[],a=0,o;a<r.length;a++)o=pn.parse(r[a]),t.push(o);return t},parseImages:function(l,t){var d=this,i={};if(void 0!==l&&0<l.length){var n=new pd(t),r=new zi(n);r.setCrossOrigin(this.crossOrigin);for(var a=0,o=l.length;a<o;a++){var s=l[a],c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:d.texturePath+s.url;i[s.uuid]=function(a){return d.manager.itemStart(a),r.load(a,function(){d.manager.itemEnd(a)},void 0,function(){d.manager.itemEnd(a),d.manager.itemError(a)})}(c)}}return i},parseTextures:function(n,t){function l(r,a){return"number"==typeof r?r:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",r),a[r])}var i={};if(void 0!==n)for(var r=0,a=n.length,o;r<a;r++){o=n[r],void 0===o.image&&console.warn("THREE.ObjectLoader: No \"image\" specified for",o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);var s=new kr(t[o.image]);s.needsUpdate=!0,s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.mapping&&(s.mapping=l(o.mapping,Hs)),void 0!==o.offset&&s.offset.fromArray(o.offset),void 0!==o.repeat&&s.repeat.fromArray(o.repeat),void 0!==o.wrap&&(s.wrapS=l(o.wrap[0],Vs),s.wrapT=l(o.wrap[1],Vs)),void 0!==o.minFilter&&(s.minFilter=l(o.minFilter,ks)),void 0!==o.magFilter&&(s.magFilter=l(o.magFilter,ks)),void 0!==o.anisotropy&&(s.anisotropy=o.anisotropy),void 0!==o.flipY&&(s.flipY=o.flipY),i[o.uuid]=s}return i},parseObject:function(){var m=new Yr;return function(t,g,y){function i(r){return void 0===g[r]&&console.warn("THREE.ObjectLoader: Undefined geometry",r),g[r]}function r(o){if(void 0!==o){if(Array.isArray(o)){for(var t=[],n=0,i=o.length,r;n<i;n++)r=o[n],void 0===y[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(y[r]);return t}return void 0===y[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),y[o]}}var a;switch(t.type){case"Scene":a=new Ee,void 0!==t.background&&ra(t.background)&&(a.background=new W(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Me(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new we(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new ca(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new ht(t.left,t.right,t.top,t.bottom,t.near,t.far);break;case"AmbientLight":a=new Md(t.color,t.intensity);break;case"DirectionalLight":a=new fd(t.color,t.intensity);break;case"PointLight":a=new hd(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new xd(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new gd(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new ud(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var o=i(t.geometry),n=r(t.material);a=o.bones&&0<o.bones.length?new cl(o,n):new Ft(o,n);break;case"LOD":a=new ll;break;case"Line":a=new ul(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new gl(i(t.geometry),r(t.material));break;case"LineSegments":a=new ml(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new yl(i(t.geometry),r(t.material));break;case"Sprite":a=new sl(r(t.material));break;case"Group":a=new fl;break;default:a=new ct;}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0===t.matrix?(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)):(m.fromArray(t.matrix),m.decompose(a.position,a.quaternion,a.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.children)for(var s=t.children,c=0;c<s.length;c++)a.add(this.parseObject(s[c],g,y));if("LOD"===t.type)for(var l=t.levels,u=0;u<l.length;u++){var p=l[u],d=a.getObjectByProperty("uuid",p.object);void 0!==d&&a.addLevel(d,p.distance)}return a}}()});var Hs={UVMapping:300,CubeReflectionMapping:ho,CubeRefractionMapping:$d,EquirectangularReflectionMapping:ec,EquirectangularRefractionMapping:tc,SphericalReflectionMapping:rc,CubeUVReflectionMapping:ac,CubeUVRefractionMapping:oc},Vs={RepeatWrapping:ic,ClampToEdgeWrapping:nc,MirroredRepeatWrapping:sc},ks={NearestFilter:lc,NearestMipMapNearestFilter:dc,NearestMipMapLinearFilter:cc,LinearFilter:pc,LinearMipMapNearestFilter:uc,LinearMipMapLinearFilter:mc};Object.assign(Rn.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(r){var t=this.getUtoTmapping(r);return this.getPoint(t)},getPoints:function(r){void 0===r&&(r=5);for(var t=[],a=0;a<=r;a++)t.push(this.getPoint(a/r));return t},getSpacedPoints:function(r){void 0===r&&(r=5);for(var t=[],a=0;a<=r;a++)t.push(this.getPointAt(a/r));return t},getLength:function(){var r=this.getLengths();return r[r.length-1]},getLengths:function(o){if(void 0===o&&(o=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===o+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t=[],n=this.getPoint(0),r=0,a,s;for(t.push(0),s=1;s<=o;s++)a=this.getPoint(s/o),r+=a.distanceTo(n),t.push(r),n=a;return this.cacheArcLengths=t,t},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(l,t){var d=this.getLengths(),n=0,r=d.length,a;a=t||l*d[r-1];for(var i=0,s=r-1,c;i<=s;)if(n=C(i+(s-i)/2),0>(c=d[n]-a))i=n+1;else{if(!(0<c)){s=n;break}s=n-1}if(n=s,d[n]===a)return n/(r-1);var o=d[n];return(n+(a-o)/(d[n+1]-o))/(r-1)},getTangent:function(r){var t=r-1e-4,a=r+1e-4;0>t&&(t=0),1<a&&(a=1);var o=this.getPoint(t);return this.getPoint(a).clone().sub(o).normalize()},getTangentAt:function(r){var t=this.getUtoTmapping(r);return this.getTangent(t)},computeFrenetFrames:function(c,t){var h=new Qr,a=[],x=[],E=[],v=new Qr,u=new Yr,p,i,n;for(p=0;p<=c;p++)i=p/c,a[p]=this.getTangentAt(i),a[p].normalize();x[0]=new Qr,E[0]=new Qr;var A=y,d=D(a[0].x),f=D(a[0].y),m=D(a[0].z);for(d<=A&&(A=d,h.set(1,0,0)),f<=A&&(A=f,h.set(0,1,0)),m<=A&&h.set(0,0,1),v.crossVectors(a[0],h).normalize(),x[0].crossVectors(a[0],v),E[0].crossVectors(a[0],x[0]),p=1;p<=c;p++)x[p]=x[p-1].clone(),E[p]=E[p-1].clone(),v.crossVectors(a[p-1],a[p]),v.length()>kd&&(v.normalize(),n=M(Mc.clamp(a[p-1].dot(a[p]),-1,1)),x[p].applyMatrix4(u.makeRotationAxis(v,n))),E[p].crossVectors(a[p],x[p]);if(!0===t)for(n=M(Mc.clamp(x[0].dot(x[c]),-1,1)),n/=c,0<a[0].dot(v.crossVectors(x[0],x[c]))&&(n=-n),p=1;p<=c;p++)x[p].applyMatrix4(u.makeRotationAxis(a[p],n*p)),E[p].crossVectors(a[p],x[p]);return{tangents:a,normals:x,binormals:E}}}),Ln.prototype=Object.create(Rn.prototype),Ln.prototype.constructor=Ln,Ln.prototype.isLineCurve=!0,Ln.prototype.getPoint=function(r){if(1===r)return this.v2.clone();var t=this.v2.clone().sub(this.v1);return t.multiplyScalar(r).add(this.v1),t},Ln.prototype.getPointAt=function(r){return this.getPoint(r)},Ln.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},Pn.prototype=Object.assign(Object.create(Rn.prototype),{constructor:Pn,add:function(r){this.curves.push(r)},closePath:function(){var r=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);r.equals(t)||this.curves.push(new Ln(t,r))},getPoint:function(l){for(var t=l*this.getLength(),d=this.getCurveLengths(),i=0;i<d.length;){if(d[i]>=t){var n=d[i]-t,r=this.curves[i],a=r.getLength(),o=0===a?0:1-n/a;return r.getPointAt(o)}i++}return null},getLength:function(){var r=this.getCurveLengths();return r[r.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var r=[],t=0,a=0,o=this.curves.length;a<o;a++)t+=this.curves[a].getLength(),r.push(t);return this.cacheLengths=r,r},getSpacedPoints:function(r){void 0===r&&(r=40);for(var t=[],a=0;a<=r;a++)t.push(this.getPoint(a/r));return this.autoClose&&t.push(t[0]),t},getPoints:function(l){l=l||12;for(var t=[],i=0,n=this.curves,r;i<n.length;i++)for(var d=n[i],a=d&&d.isEllipseCurve?2*l:d&&d.isLineCurve?1:d&&d.isSplineCurve?l*d.points.length:l,o=d.getPoints(a),s=0,c;s<o.length;s++)c=o[s],r&&r.equals(c)||(t.push(c),r=c);return this.autoClose&&1<t.length&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t},createPointsGeometry:function(r){var t=this.getPoints(r);return this.createGeometry(t)},createSpacedPointsGeometry:function(r){var t=this.getSpacedPoints(r);return this.createGeometry(t)},createGeometry:function(a){for(var t=new mt,o=0,i=a.length,n;o<i;o++)n=a[o],t.vertices.push(new Qr(n.x,n.y,n.z||0));return t}}),Id.prototype=Object.create(Rn.prototype),Id.prototype.constructor=Id,Id.prototype.isEllipseCurve=!0,Id.prototype.getPoint=function(i){for(var t=2*Or,d=this.aEndAngle-this.aStartAngle,n=D(d)<kd;0>d;)d+=t;for(;d>t;)d-=t;d<kd&&(d=n?0:t),!0!==this.aClockwise||n||(d===t?d=-t:d-=t);var r=this.aStartAngle+i*d,a=this.aX+this.xRadius*O(r),o=this.aY+this.yRadius*I(r);if(0!==this.aRotation){var s=O(this.aRotation),c=I(this.aRotation),p=a-this.aX,l=o-this.aY;a=p*s-l*c+this.aX,o=p*c+l*s+this.aY}return new Br(a,o)},In.prototype=Object.create(Rn.prototype),In.prototype.constructor=In,In.prototype.isSplineCurve=!0,In.prototype.getPoint=function(i){var t=this.points,l=(t.length-1)*i,n=C(l),r=l-n,a=t[0===n?n:n-1],o=t[n],s=t[n>t.length-2?t.length-1:n+1],d=t[n>t.length-3?t.length-1:n+2];return new Br(yn(r,a.x,o.x,s.x,d.x),yn(r,a.y,o.y,s.y,d.y))},Un.prototype=Object.create(Rn.prototype),Un.prototype.constructor=Un,Un.prototype.getPoint=function(o){var t=this.v0,i=this.v1,n=this.v2,r=this.v3;return new Br(An(o,t.x,i.x,n.x,r.x),An(o,t.y,i.y,n.y,r.y))},Nn.prototype=Object.create(Rn.prototype),Nn.prototype.constructor=Nn,Nn.prototype.getPoint=function(a){var t=this.v0,o=this.v1,i=this.v2;return new Br(wn(a,t.x,o.x,i.x),wn(a,t.y,o.y,i.y))};var js=Object.assign(Object.create(Pn.prototype),{fromPoints:function(r){this.moveTo(r[0].x,r[0].y);for(var t=1,a=r.length;t<a;t++)this.lineTo(r[t].x,r[t].y)},moveTo:function(r,t){this.currentPoint.set(r,t)},lineTo:function(r,t){var a=new Ln(this.currentPoint.clone(),new Br(r,t));this.curves.push(a),this.currentPoint.set(r,t)},quadraticCurveTo:function(o,t,i,n){var r=new Nn(this.currentPoint.clone(),new Br(o,t),new Br(i,n));this.curves.push(r),this.currentPoint.set(i,n)},bezierCurveTo:function(i,t,l,n,r,a){var o=new Un(this.currentPoint.clone(),new Br(i,t),new Br(l,n),new Br(r,a));this.curves.push(o),this.currentPoint.set(r,a)},splineThru:function(r){var t=[this.currentPoint.clone()].concat(r),a=new In(t);this.curves.push(a),this.currentPoint.copy(r[r.length-1])},arc:function(l,t,d,i,n,r){var a=this.currentPoint.x,o=this.currentPoint.y;this.absarc(l+a,t+o,d,i,n,r)},absarc:function(o,t,s,i,n,r){this.absellipse(o,t,s,s,i,n,r)},ellipse:function(l,t,d,i,n,r,a,o){var s=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(l+s,t+c,d,i,n,r,a,o)},absellipse:function(d,t,p,i,n,r,a,o){var s=new Id(d,t,p,i,n,r,a,o);if(0<this.curves.length){var c=s.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(s);var u=s.getPoint(1);this.currentPoint.copy(u)}});Dn.prototype=js,js.constructor=Dn,On.prototype=Object.assign(Object.create(js),{constructor:On,getPointsHoles:function(r){for(var t=[],a=0,o=this.holes.length;a<o;a++)t[a]=this.holes[a].getPoints(r);return t},extractAllPoints:function(r){return{shape:this.getPoints(r),holes:this.getPointsHoles(r)}},extractPoints:function(r){return this.extractAllPoints(r)}}),Object.assign(_d.prototype,{moveTo:function(r,t){this.currentPath=new Dn,this.subPaths.push(this.currentPath),this.currentPath.moveTo(r,t)},lineTo:function(r,t){this.currentPath.lineTo(r,t)},quadraticCurveTo:function(r,t,a,o){this.currentPath.quadraticCurveTo(r,t,a,o)},bezierCurveTo:function(o,t,s,i,n,r){this.currentPath.bezierCurveTo(o,t,s,i,n,r)},splineThru:function(r){this.currentPath.splineThru(r)},toShapes:function(N,t){function C(o){for(var t=[],s=0,l=o.length;s<l;s++){var n=o[s],r=new On;r.curves=n.curves,t.push(r)}return t}var i=Us.isClockWise,n=this.subPaths;if(0===n.length)return[];if(!0===t)return C(n);var r=[],c,I,j;if(1===n.length)return I=n[0],j=new On,j.curves=I.curves,r.push(j),r;var s=!i(n[0].getPoints());s=N?!s:s;var O=[],u=[],p=[],d=0,f;u[d]=void 0,p[d]=[];for(var z=0,m=n.length;z<m;z++)I=n[z],f=I.getPoints(),c=i(f),c=N?!c:c,c?(!s&&u[d]&&d++,u[d]={s:new On,p:f},u[d].s.curves=I.curves,s&&d++,p[d]=[]):p[d].push({h:I,p:f[0]});if(!u[0])return C(n);if(1<u.length){for(var g=!1,v=[],y=0,U=u.length;y<U;y++)O[y]=[];for(var y=0,U=u.length;y<U;y++)for(var b=p[y],_=0;_<b.length;_++){for(var P=b[_],M=!0,E=0;E<u.length;E++)(function(d,t){for(var p=t.length,i=!1,u=p-1,r=0;r<p;u=r++){var a=t[u],o=t[r],s=o.x-a.x,m=o.y-a.y;if(D(m)>kd){if(0>m&&(a=t[r],s=-s,o=t[u],m=-m),d.y<a.y||d.y>o.y)continue;if(d.y!==a.y){var g=m*(d.x-a.x)-s*(d.y-a.y);if(0===g)return!0;if(0>g)continue;i=!i}else if(d.x===a.x)return!0}else{if(d.y!==a.y)continue;if(o.x<=d.x&&d.x<=a.x||a.x<=d.x&&d.x<=o.x)return!0}}return i})(P.p,u[E].p)&&(y!==E&&v.push({froms:y,tos:E,hole:_}),M?(M=!1,O[E].push(P)):g=!0);M&&O[y].push(P)}0<v.length&&(g||(p=O))}for(var z=0,B=u.length,A;z<B;z++){j=u[z].s,r.push(j),A=p[z];for(var S=0,R=A.length;S<R;S++)j.holes.push(A[S].h)}return r}}),Object.assign(Bn.prototype,{isFont:!0,generateShapes:function(l,d,t){function i(r,i,L,D){var a=A.glyphs[r]||A.glyphs["?"];if(a){var o=new _d,N=[],x,s,c,h,l,u,p,d,f,m,g;if(a.o)for(var v=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),b=0,C=v.length,w;b<C;)switch(w=v[b++],w){case"m":x=v[b++]*i+L,s=v[b++]*i+D,o.moveTo(x,s);break;case"l":x=v[b++]*i+L,s=v[b++]*i+D,o.lineTo(x,s);break;case"q":if(c=v[b++]*i+L,h=v[b++]*i+D,p=v[b++]*i+L,d=v[b++]*i+D,o.quadraticCurveTo(p,d,c,h),g=N[N.length-1]){l=g.x,u=g.y;for(var M=1,E;M<=t;M++)E=M/t,wn(E,l,p,c),wn(E,u,d,h)}break;case"b":if(c=v[b++]*i+L,h=v[b++]*i+D,p=v[b++]*i+L,d=v[b++]*i+D,f=v[b++]*i+L,m=v[b++]*i+D,o.bezierCurveTo(p,d,f,m,c,h),g=N[N.length-1]){l=g.x,u=g.y;for(var M=1,E;M<=t;M++)E=M/t,An(E,l,p,f,c),An(E,u,d,m,h)}}return{offsetX:a.ha*i,path:o}}}void 0===d&&(d=100),void 0===t&&(t=4);for(var A=this.data,r=function(r){for(var t=(r+"").split(""),n=d/A.resolution,a=(A.boundingBox.yMax-A.boundingBox.yMin+A.underlineThickness)*n,o=0,s=0,c=[],m=0,l;m<t.length;m++)if(l=t[m],"\n"===l)o=0,s-=a;else{var u=i(l,n,o,s);o+=u.offsetX,c.push(u.path)}return c}(l),a=[],o=0,n=r.length;o<n;o++)Array.prototype.push.apply(a,r[o].toShapes());return a}}),Object.assign(zn.prototype,{load:function(a,o,t,i){var s=this;new Oi(this.manager).load(a,function(r){var t;try{t=JSON.parse(r)}catch(a){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),t=JSON.parse(r.substring(65,r.length-2))}var a=s.parse(t);o&&o(a)},t,i)},parse:function(r){return new Bn(r)}});var Ws={getContext:function(){return void 0===qs&&(qs=new(window.AudioContext||window.webkitAudioContext)),qs},setContext:function(r){qs=r}},qs;Object.assign(Gn.prototype,{load:function(a,o,t,i){var n=new Oi(this.manager);n.setResponseType("arraybuffer"),n.load(a,function(r){Ws.getContext().decodeAudioData(r,function(r){o(r)})},t,i)}}),Object.assign(Hn.prototype,{update:function(){var g=new Yr,c=new Yr,l,t,y,i,n,r,a,o;return function(M){if(l!==this||t!==M.focus||y!==M.fov||i!==M.aspect*this.aspect||n!==M.near||r!==M.far||a!==M.zoom||o!==this.eyeSep){l=this,t=M.focus,y=M.fov,i=M.aspect*this.aspect,n=M.near,r=M.far,a=M.zoom;var h=M.projectionMatrix.clone();o=this.eyeSep/2;var u=o*n/t,f=n*x(.5*(Mc.DEG2RAD*y))/a,E,p;c.elements[12]=-o,g.elements[12]=o,E=-f*i+u,p=f*i+u,h.elements[0]=2*n/(p-E),h.elements[8]=(p+E)/(p-E),this.cameraL.projectionMatrix.copy(h),E=-f*i-u,p=f*i-u,h.elements[0]=2*n/(p-E),h.elements[8]=(p+E)/(p-E),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(M.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(M.matrixWorld).multiply(g)}}()}),Vn.prototype=Object.create(ct.prototype),Vn.prototype.constructor=Vn,kn.prototype=Object.assign(Object.create(ct.prototype),{constructor:kn,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(r){null===this.filter?this.gain.disconnect(this.context.destination):(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)),this.filter=r,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(r){this.gain.gain.value=r},updateMatrixWorld:function(){var s=new Qr,t=new Hr,l=new Qr,i=new Qr;return function(n){ct.prototype.updateMatrixWorld.call(this,n);var r=this.context.listener,a=this.up;this.matrixWorld.decompose(s,t,l),i.set(0,0,-1).applyQuaternion(t),r.positionX?(r.positionX.setValueAtTime(s.x,this.context.currentTime),r.positionY.setValueAtTime(s.y,this.context.currentTime),r.positionZ.setValueAtTime(s.z,this.context.currentTime),r.forwardX.setValueAtTime(i.x,this.context.currentTime),r.forwardY.setValueAtTime(i.y,this.context.currentTime),r.forwardZ.setValueAtTime(i.z,this.context.currentTime),r.upX.setValueAtTime(a.x,this.context.currentTime),r.upY.setValueAtTime(a.y,this.context.currentTime),r.upZ.setValueAtTime(a.z,this.context.currentTime)):(r.setPosition(s.x,s.y,s.z),r.setOrientation(i.x,i.y,i.z,a.x,a.y,a.z))}}()}),jd.prototype=Object.assign(Object.create(ct.prototype),{constructor:jd,getOutput:function(){return this.gain},setNodeSource:function(r){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=r,this.connect(),this},setBuffer:function(r){return this.buffer=r,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");var r=this.context.createBufferSource();return r.buffer=this.buffer,r.loop=this.loop,r.onended=this.onEnded.bind(this),r.playbackRate.setValueAtTime(this.playbackRate,this.startTime),r.start(0,this.startTime),this.isPlaying=!0,this.source=r,this.connect()},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=this.context.currentTime,this.isPlaying=!1,this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.startTime=0,this.isPlaying=!1,this)},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var r=1,t=this.filters.length;r<t;r++)this.filters[r-1].connect(this.filters[r]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var r=1,t=this.filters.length;r<t;r++)this.filters[r-1].disconnect(this.filters[r]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(r){return r||(r=[]),!0===this.isPlaying?(this.disconnect(),this.filters=r,this.connect()):this.filters=r,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(r){return this.setFilters(r?[r]:[])},setPlaybackRate:function(r){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=r,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(r){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=r,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(r){return this.gain.gain.value=r,this}}),Od.prototype=Object.assign(Object.create(jd.prototype),{constructor:Od,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(r){this.panner.refDistance=r},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(r){this.panner.rolloffFactor=r},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(r){this.panner.distanceModel=r},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(r){this.panner.maxDistance=r},updateMatrixWorld:function(){var r=new Qr;return function(t){ct.prototype.updateMatrixWorld.call(this,t),r.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(r.x,r.y,r.z)}}()}),Object.assign(zd.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var r=0,t=this.getFrequencyData(),a=0;a<t.length;a++)r+=t[a];return r/t.length}}),Object.assign(qn.prototype,{accumulate:function(l,t){var d=this.buffer,i=this.valueSize,n=l*i+i,r=this.cumulativeWeight;if(0===r){for(var a=0;a!==i;++a)d[n+a]=d[a];r=t}else{r+=t;var o=t/r;this._mixBufferRegion(d,n,0,o,i)}this.cumulativeWeight=r},apply:function(o){var t=this.valueSize,l=this.buffer,i=o*t+t,n=this.cumulativeWeight,r=this.binding;if(this.cumulativeWeight=0,1>n){this._mixBufferRegion(l,i,3*t,1-n,t)}for(var a=t;a!==t+t;++a)if(l[a]!==l[a+t]){r.setValue(l,i);break}},saveOriginalState:function(){var a=this.binding,t=this.buffer,o=this.valueSize,i=3*o;a.getValue(t,i);for(var n=o;n!==i;++n)t[n]=t[i+n%o];this.cumulativeWeight=0},restoreOriginalState:function(){var r=3*this.valueSize;this.binding.setValue(this.buffer,r)},_select:function(o,t,s,i,n){if(.5<=i)for(var r=0;r!==n;++r)o[t+r]=o[s+r]},_slerp:function(r,t,a,o){Hr.slerpFlat(r,t,r,t,r,a,o)},_lerp:function(a,t,l,i,n){for(var r=0,o;r!==n;++r)o=t+r,a[o]=a[o]*(1-i)+a[l+r]*i}}),Object.assign(Yn.prototype,{getValue:function(r,t){this.bind();var a=this._targetGroup.nCachedObjects_,o=this._bindings[a];void 0!==o&&o.getValue(r,t)},setValue:function(a,t){for(var o=this._bindings,i=this._targetGroup.nCachedObjects_,n=o.length;i!==n;++i)o[i].setValue(a,t)},bind:function(){for(var r=this._bindings,t=this._targetGroup.nCachedObjects_,a=r.length;t!==a;++t)r[t].bind()},unbind:function(){for(var r=this._bindings,t=this._targetGroup.nCachedObjects_,a=r.length;t!==a;++t)r[t].unbind()}}),Object.assign(Rd,{Composite:Yn,create:function(r,t,a){return r&&r.isAnimationObjectGroup?new Rd.Composite(r,t,a):new Rd(r,t,a)},sanitizeNodeName:function(r){return r.replace(/\s/g,"_").replace(/[^\w-]/g,"")},parseTrackName:function(){var o=/((?:[\w-]+[\/:])*)/,t=/([\w-\.]+)?/,s=/(?:\.([\w-]+)(?:\[(.+)\])?)?/,i=/\.([\w-]+)(?:\[(.+)\])?/,l=new RegExp("^"+o.source+t.source+s.source+i.source+"$"),r=["material","materials","bones"];return function(a){var t=l.exec(a);if(!t)throw new Error("PropertyBinding: Cannot parse trackName: "+a);var s={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=s.nodeName&&s.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=s.nodeName.substring(i+1);-1!==r.indexOf(n)&&(s.nodeName=s.nodeName.substring(0,i),s.objectName=n)}if(null===s.propertyName||0===s.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+a);return s}}(),findNode:function(a,o){if(!o||""===o||"root"===o||"."===o||-1===o||o===a.name||o===a.uuid)return a;if(a.skeleton){var t=function(r){for(var t=0,a;t<r.bones.length;t++)if(a=r.bones[t],a.name===o)return a;return null}(a.skeleton);if(t)return t}if(a.children){var i=function s(n){for(var t=0,i;t<n.length;t++){if(i=n[t],i.name===o||i.uuid===o)return i;var r=s(i.children);if(r)return r}return null},n=i(a.children);if(n)return n}return null}}),Object.assign(Rd.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(r,t){r[t]=this.node[this.propertyName]},function(a,t){for(var o=this.resolvedProperty,i=0,n=o.length;i!==n;++i)a[t++]=o[i]},function(r,t){r[t]=this.resolvedProperty[this.propertyIndex]},function(r,t){this.resolvedProperty.toArray(r,t)}],SetterByBindingTypeAndVersioning:[[function(r,t){this.node[this.propertyName]=r[t]},function(r,t){this.node[this.propertyName]=r[t],this.targetObject.needsUpdate=!0},function(r,t){this.node[this.propertyName]=r[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(a,t){for(var o=this.resolvedProperty,i=0,n=o.length;i!==n;++i)o[i]=a[t++]},function(a,t){for(var o=this.resolvedProperty,i=0,n=o.length;i!==n;++i)o[i]=a[t++];this.targetObject.needsUpdate=!0},function(a,t){for(var o=this.resolvedProperty,i=0,n=o.length;i!==n;++i)o[i]=a[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,t){this.resolvedProperty[this.propertyIndex]=r[t]},function(r,t){this.resolvedProperty[this.propertyIndex]=r[t],this.targetObject.needsUpdate=!0},function(r,t){this.resolvedProperty[this.propertyIndex]=r[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(r,t){this.resolvedProperty.fromArray(r,t)},function(r,t){this.resolvedProperty.fromArray(r,t),this.targetObject.needsUpdate=!0},function(r,t){this.resolvedProperty.fromArray(r,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(r,t){this.bind(),this.getValue(r,t)},setValue:function(r,t){this.bind(),this.setValue(r,t)},bind:function(){var d=this.node,p=this.parsedPath,u=p.objectName,i=p.propertyName,n=p.propertyIndex;if(d||(d=Rd.findNode(this.rootNode,p.nodeName)||this.rootNode,this.node=d),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!d)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(u){var r=p.objectIndex;switch(u){case"materials":if(!d.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!d.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);d=d.material.materials;break;case"bones":if(!d.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);d=d.skeleton.bones;for(var a=0;a<d.length;a++)if(d[a].name===r){r=a;break}break;default:if(void 0===d[u])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);d=d[u];}if(void 0!==r){if(void 0===d[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,d);d=d[r]}}var o=d[i];if(void 0===o){var s=p.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+s+"."+i+" but it wasn't found.",d)}var c=this.Versioning.None;void 0===d.needsUpdate?void 0!==d.matrixWorldNeedsUpdate&&(c=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=d):(c=this.Versioning.NeedsUpdate,this.targetObject=d);var m=this.BindingType.Direct;if(void 0!==n){if("morphTargetInfluences"===i){if(!d.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(d.geometry.isBufferGeometry){if(!d.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(var a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(d.geometry.morphAttributes.position[a].name===n){n=a;break}}else{if(!d.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(var a=0;a<this.node.geometry.morphTargets.length;a++)if(d.geometry.morphTargets[a].name===n){n=a;break}}}m=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=n}else void 0!==o.fromArray&&void 0!==o.toArray?(m=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(m=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[m],this.setValue=this.SetterByBindingTypeAndVersioning[m][c]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(Rd.prototype,{_getValue_unbound:Rd.prototype.getValue,_setValue_unbound:Rd.prototype.setValue}),Object.assign(Jn.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,M=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,a=this._parsedPaths,o=this._bindings,s=o.length,c=0,h=arguments.length;c!==h;++c){var l=arguments[c],u=l.uuid,p=n[u],d=void 0;if(void 0===p){p=M++,n[u]=p,t.push(l);for(var f=0,m=s;f!==m;++f)o[f].push(new Rd(l,r[f],a[f]))}else if(p<i){d=t[p];var g=--i,E=t[g];n[E.uuid]=p,t[p]=E,n[u]=g,t[g]=l;for(var f=0,m=s;f!==m;++f){var y=o[f],x=y[g],v=y[p];y[p]=x,void 0===v&&(v=new Rd(l,r[f],a[f])),y[g]=v}}else t[p]!==d&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var t=this._objects,y=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],c=s.uuid,h=i[c];if(void 0!==h&&h>=y){var l=y++,u=t[l];i[u.uuid]=h,t[h]=u,i[c]=l,t[l]=s;for(var p=0;p!==r;++p){var d=n[p],m=d[l],g=d[h];d[h]=m,d[l]=g}}}this.nCachedObjects_=y},uncache:function(){for(var t=this._objects,M=t.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,a=r.length,o=0,s=arguments.length;o!==s;++o){var c=arguments[o],h=c.uuid,l=n[h];if(void 0!==l)if(delete n[h],l<i){var u=--i,p=t[u],d=--M,f=t[d];n[p.uuid]=l,t[l]=p,n[f.uuid]=u,t[u]=f,t.pop();for(var m=0,g=a;m!==g;++m){var E=r[m],y=E[u],x=E[d];E[l]=y,E[u]=x,E.pop()}}else{var d=--M,f=t[d];n[f.uuid]=l,t[l]=f,t.pop();for(var m=0,g=a,E;m!==g;++m)E=r[m],E[l]=E[d],E.pop()}}this.nCachedObjects_=i},subscribe_:function(m,t){var g=this._bindingsIndicesByPath,i=g[m],n=this._bindings;if(void 0!==i)return n[i];var r=this._paths,a=this._parsedPaths,o=this._objects,s=o.length,c=this.nCachedObjects_,h=Array(s);i=n.length,g[m]=i,r.push(m),a.push(t),n.push(h);for(var l=c,u=o.length,p;l!==u;++l)p=o[l],h[l]=new Rd(p,m,t);return h},unsubscribe_:function(l){var t=this._bindingsIndicesByPath,d=t[l];if(void 0!==d){var i=this._paths,n=this._parsedPaths,r=this._bindings,a=r.length-1,o=r[a];t[l[a]]=d,r[d]=o,r.pop(),n[d]=n[a],n.pop(),i[d]=i[a],i.pop()}}}),Object.assign(Qn.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(r){return this._startTime=r,this},setLoop:function(r,t){return this.loop=r,this.repetitions=t,this},setEffectiveWeight:function(r){return this.weight=r,this._effectiveWeight=this.enabled?r:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(r){return this._scheduleFading(r,0,1)},fadeOut:function(r){return this._scheduleFading(r,1,0)},crossFadeFrom:function(a,t,o){if(a.fadeOut(t),this.fadeIn(t),o){var i=this._clip.duration,n=a._clip.duration;a.warp(1,n/i,t),this.warp(i/n,1,t)}return this},crossFadeTo:function(r,t,a){return r.crossFadeFrom(this,t,a)},stopFading:function(){var r=this._weightInterpolant;return null!==r&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},setEffectiveTimeScale:function(r){return this.timeScale=r,this._effectiveTimeScale=this.paused?0:r,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(r){return this.timeScale=this._clip.duration/r,this.stopWarping()},syncWith:function(r){return this.time=r.time,this.timeScale=r.timeScale,this.stopWarping()},halt:function(r){return this.warp(this._effectiveTimeScale,0,r)},warp:function(l,t,d){var i=this._mixer,n=i.time,r=this._timeScaleInterpolant,a=this.timeScale;null===r&&(r=i._lendControlInterpolant(),this._timeScaleInterpolant=r);var o=r.parameterPositions,s=r.sampleValues;return o[0]=n,o[1]=n+d,s[0]=l/a,s[1]=t/a,this},stopWarping:function(){var r=this._timeScaleInterpolant;return null!==r&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(r)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(d,t,p,i){if(!this.enabled)return void this._updateWeight(d);var n=this._startTime;if(null!==n){var r=(d-n)*p;if(0>r||0===p)return;this._startTime=null,t=p*r}t*=this._updateTimeScale(d);var a=this._updateTime(t),o=this._updateWeight(d);if(0<o)for(var s=this._interpolants,c=this._propertyBindings,m=0,l=s.length;m!==l;++m)s[m].evaluate(a),c[m].accumulate(i,o)},_updateWeight:function(r){var t=0;if(this.enabled){t=this.weight;var a=this._weightInterpolant;if(null!==a){var o=a.evaluate(r)[0];t*=o,r>a.parameterPositions[1]&&(this.stopFading(),0===o&&(this.enabled=!1))}}return this._effectiveWeight=t,t},_updateTimeScale:function(r){var t=0;if(!this.paused){t=this.timeScale;var a=this._timeScaleInterpolant;null!==a&&(t*=a.evaluate(r)[0],r>a.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t))}return this._effectiveTimeScale=t,t},_updateTime:function(l){var t=this.time+l;if(0===l)return t;var d=this._clip.duration,i=this.loop,n=this._loopCount;if(2200===i){-1===n&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(t>=d)t=d;else{if(!(0>t))break t;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>l?-1:1})}}else{var r=2202===i;if(-1===n&&(0<=l?(n=0,this._setEndings(!0,0===this.repetitions,r)):this._setEndings(0===this.repetitions,!0,r)),t>=d||0>t){var a=C(t/d);t-=d*a,n+=D(a);var p=this.repetitions-n;if(0>p)this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=0<l?d:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:0<l?1:-1});else{if(0===p){var s=0>l;this._setEndings(s,!s,r)}else this._setEndings(!1,!1,r);this._loopCount=n,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}if(r&&1==(1&n))return this.time=t,d-t}return this.time=t,t},_setEndings:function(r,t,a){var o=this._interpolantSettings;a?(o.endingStart=2401,o.endingEnd=2401):(o.endingStart=r?this.zeroSlopeAtStart?2401:is:2402,o.endingEnd=t?this.zeroSlopeAtEnd?2401:is:2402)},_scheduleFading:function(l,t,d){var i=this._mixer,n=i.time,r=this._weightInterpolant;null===r&&(r=i._lendControlInterpolant(),this._weightInterpolant=r);var a=r.parameterPositions,o=r.sampleValues;return a[0]=n,o[0]=t,a[1]=n+l,o[1]=d,this}}),Object.assign(Kn.prototype,t.prototype,{_bindAction:function(m,t){var g=m._localRoot||this._root,i=m._clip.tracks,n=i.length,r=m._propertyBindings,a=m._interpolants,o=g.uuid,s=this._bindingsByRootAndName,c=s[o];void 0===c&&(c={},s[o]=c);for(var h=0;h!==n;++h){var l=i[h],u=l.name,p=c[u];if(void 0!==p)r[h]=p;else{if(void 0!==(p=r[h])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,o,u));continue}var d=t&&t._propertyBindings[h].binding.parsedPath;p=new qn(Rd.create(g,u,d),l.ValueTypeName,l.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,o,u),r[h]=p}a[h].resultBuffer=p.buffer}},_activateAction:function(l){if(!this._isActiveAction(l)){if(null===l._cacheIndex){var t=(l._localRoot||this._root).uuid,d=l._clip.uuid,i=this._actionsByClip[d];this._bindAction(l,i&&i.knownActions[0]),this._addInactiveAction(l,d,t)}for(var n=l._propertyBindings,r=0,a=n.length,o;r!==a;++r)o=n[r],0==o.useCount++&&(this._lendBinding(o),o.saveOriginalState());this._lendAction(l)}},_deactivateAction:function(a){if(this._isActiveAction(a)){for(var t=a._propertyBindings,o=0,i=t.length,n;o!==i;++o)n=t[o],0==--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n));this._takeBackAction(a)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var r=this;this.stats={actions:{get total(){return r._actions.length},get inUse(){return r._nActiveActions}},bindings:{get total(){return r._bindings.length},get inUse(){return r._nActiveBindings}},controlInterpolants:{get total(){return r._controlInterpolants.length},get inUse(){return r._nActiveControlInterpolants}}}},_isActiveAction:function(r){var t=r._cacheIndex;return null!==t&&t<this._nActiveActions},_addInactiveAction:function(s,t,l){var i=this._actions,n=this._actionsByClip,r=n[t];if(void 0===r)r={knownActions:[s],actionByRoot:{}},s._byClipCacheIndex=0,n[t]=r;else{var a=r.knownActions;s._byClipCacheIndex=a.length,a.push(s)}s._cacheIndex=i.length,i.push(s),r.actionByRoot[l]=s},_removeInactiveAction:function(l){var t=this._actions,d=t[t.length-1],i=l._cacheIndex;d._cacheIndex=i,t[i]=d,t.pop(),l._cacheIndex=null;var n=l._clip.uuid,r=this._actionsByClip,a=r[n],o=a.knownActions,s=o[o.length-1],c=l._byClipCacheIndex;s._byClipCacheIndex=c,o[c]=s,o.pop(),l._byClipCacheIndex=null,delete a.actionByRoot[(l._localRoot||this._root).uuid],0===o.length&&delete r[n],this._removeInactiveBindingsForAction(l)},_removeInactiveBindingsForAction:function(a){for(var t=a._propertyBindings,o=0,i=t.length,n;o!==i;++o)n=t[o],0==--n.referenceCount&&this._removeInactiveBinding(n)},_lendAction:function(a){var t=this._actions,o=a._cacheIndex,i=this._nActiveActions++,n=t[i];a._cacheIndex=i,t[i]=a,n._cacheIndex=o,t[o]=n},_takeBackAction:function(a){var t=this._actions,o=a._cacheIndex,i=--this._nActiveActions,n=t[i];a._cacheIndex=i,t[i]=a,n._cacheIndex=o,t[o]=n},_addInactiveBinding:function(o,t,s){var i=this._bindingsByRootAndName,n=i[t],r=this._bindings;void 0===n&&(n={},i[t]=n),n[s]=o,o._cacheIndex=r.length,r.push(o)},_removeInactiveBinding:function(l){var t=this._bindings,d=l.binding,i=d.rootNode.uuid,n=d.path,r=this._bindingsByRootAndName,a=r[i],o=t[t.length-1],s=l._cacheIndex;o._cacheIndex=s,t[s]=o,t.pop(),delete a[n];t:{for(var c in a)break t;delete r[i]}},_lendBinding:function(a){var t=this._bindings,o=a._cacheIndex,i=this._nActiveBindings++,n=t[i];a._cacheIndex=i,t[i]=a,n._cacheIndex=o,t[o]=n},_takeBackBinding:function(a){var t=this._bindings,o=a._cacheIndex,i=--this._nActiveBindings,n=t[i];a._cacheIndex=i,t[i]=a,n._cacheIndex=o,t[o]=n},_lendControlInterpolant:function(){var r=this._controlInterpolants,t=this._nActiveControlInterpolants++,a=r[t];return void 0===a&&(a=new vd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),a.__cacheIndex=t,r[t]=a),a},_takeBackControlInterpolant:function(a){var t=this._controlInterpolants,o=a.__cacheIndex,i=--this._nActiveControlInterpolants,n=t[i];a.__cacheIndex=i,t[i]=a,n.__cacheIndex=o,t[o]=n},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(l,d){var p=d||this._root,i=p.uuid,n="string"==typeof l?pn.findByName(p,l):l,r=null===n?l:n.uuid,a=this._actionsByClip[r],o=null;if(void 0!==a){var s=a.actionByRoot[i];if(void 0!==s)return s;o=a.knownActions[0],null===n&&(n=o._clip)}if(null===n)return null;var c=new Qn(this,n,d);return this._bindAction(c,o),this._addInactiveAction(c,r,i),c},existingAction:function(s,l){var d=l||this._root,i=d.uuid,n="string"==typeof s?pn.findByName(d,s):s,r=n?n.uuid:s,a=this._actionsByClip[r];return void 0===a?null:a.actionByRoot[i]||null},stopAllAction:function(){var a=this._actions,t=this._nActiveActions,o=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var n=0;n!==t;++n)a[n].reset();for(var n=0;n!==i;++n)o[n].useCount=0;return this},update:function(l){l*=this.timeScale;for(var t=this._actions,d=this._nActiveActions,i=this.time+=l,n=jr(l),r=this._accuIndex^=1,a=0;a!==d;++a)t[a]._update(i,l,n,r);for(var o=this._bindings,s=this._nActiveBindings,a=0;a!==s;++a)o[a].apply(r);return this},getRoot:function(){return this._root},uncacheClip:function(d){var t=this._actions,p=d.uuid,i=this._actionsByClip,n=i[p];if(void 0!==n){for(var r=n.knownActions,a=0,o=r.length,s;a!==o;++a){s=r[a],this._deactivateAction(s);var c=s._cacheIndex,u=t[t.length-1];s._cacheIndex=null,s._byClipCacheIndex=null,u._cacheIndex=c,t[c]=u,t.pop(),this._removeInactiveBindingsForAction(s)}delete i[p]}},uncacheRoot:function(l){var t=l.uuid,d=this._actionsByClip;for(var i in d){var n=d[i].actionByRoot,r=n[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName,o=a[t];if(void 0!==o)for(var s in o){var c=o[s];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(r,t){var a=this.existingAction(r,t);null!==a&&(this._deactivateAction(a),this._removeInactiveAction(a))}}),$n.prototype.clone=function(){return new $n(void 0===this.value.clone?this.value:this.value.clone())},tr.prototype=Object.assign(Object.create(Rt.prototype),{constructor:tr,isInstancedBufferGeometry:!0,addGroup:function(r,a,o){this.groups.push({start:r,count:a,materialIndex:o})},copy:function(l){var t=l.index;null!==t&&this.setIndex(t.clone());var d=l.attributes;for(var i in d){var n=d[i];this.addAttribute(i,n.clone())}for(var r=l.groups,a=0,o=r.length,s;a<o;a++)s=r[a],this.addGroup(s.start,s.count,s.materialIndex);return this}}),Object.defineProperties(Ud.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(Ud.prototype,{isInterleavedBufferAttribute:!0,setX:function(r,t){return this.data.array[r*this.data.stride+this.offset]=t,this},setY:function(r,t){return this.data.array[r*this.data.stride+this.offset+1]=t,this},setZ:function(r,t){return this.data.array[r*this.data.stride+this.offset+2]=t,this},setW:function(r,t){return this.data.array[r*this.data.stride+this.offset+3]=t,this},getX:function(r){return this.data.array[r*this.data.stride+this.offset]},getY:function(r){return this.data.array[r*this.data.stride+this.offset+1]},getZ:function(r){return this.data.array[r*this.data.stride+this.offset+2]},getW:function(r){return this.data.array[r*this.data.stride+this.offset+3]},setXY:function(r,t,a){return r=r*this.data.stride+this.offset,this.data.array[r+0]=t,this.data.array[r+1]=a,this},setXYZ:function(r,t,a,o){return r=r*this.data.stride+this.offset,this.data.array[r+0]=t,this.data.array[r+1]=a,this.data.array[r+2]=o,this},setXYZW:function(a,t,o,i,n){return a=a*this.data.stride+this.offset,this.data.array[a+0]=t,this.data.array[a+1]=o,this.data.array[a+2]=i,this.data.array[a+3]=n,this}}),Object.defineProperty(ir.prototype,"needsUpdate",{set:function(r){!0===r&&this.version++}}),Object.assign(ir.prototype,{isInterleavedBuffer:!0,setArray:function(r){if(Array.isArray(r))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.count=void 0===r?0:r.length/this.stride,this.array=r},setDynamic:function(r){return this.dynamic=r,this},copy:function(r){return this.array=new r.array.constructor(r.array),this.count=r.count,this.stride=r.stride,this.dynamic=r.dynamic,this},copyAt:function(a,t,o){a*=this.stride,o*=t.stride;for(var i=0,n=this.stride;i<n;i++)this.array[a+i]=t.array[o+i];return this},set:function(r,t){return void 0===t&&(t=0),this.array.set(r,t),this},clone:function(){return new this.constructor().copy(this)},onUpload:function(r){return this.onUploadCallback=r,this}}),nr.prototype=Object.assign(Object.create(ir.prototype),{constructor:nr,isInstancedInterleavedBuffer:!0,copy:function(r){return ir.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this}}),Pd.prototype=Object.assign(Object.create(gt.prototype),{constructor:Pd,isInstancedBufferAttribute:!0,copy:function(r){return gt.prototype.copy.call(this,r),this.meshPerAttribute=r.meshPerAttribute,this}}),Object.assign(Bd.prototype,{linePrecision:1,set:function(r,t){this.ray.set(r,t)},setFromCamera:function(r,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(r.x,r.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(r.x,r.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(r,t){var a=[];return sr(r,this,a,t),a.sort(or),a},intersectObjects:function(a,t){var o=[];if(!1===Array.isArray(a))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),o;for(var i=0,n=a.length;i<n;i++)sr(a[i],this,o,t);return o.sort(or),o}}),Object.assign(cr.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var r=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();r=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=r}return r}}),Object.assign(hr.prototype,{set:function(r,t,a){return this.radius=r,this.phi=t,this.theta=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.phi=r.phi,this.theta=r.theta,this},makeSafe:function(){return this.phi=L(1e-6,N(Or-1e-6,this.phi)),this},setFromVector3:function(r){return this.radius=r.length(),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Fd(r.x,r.z),this.phi=M(Mc.clamp(r.y/this.radius,-1,1))),this}}),Object.assign(lr.prototype,{set:function(r,t,a){return this.radius=r,this.theta=t,this.y=a,this},clone:function(){return new this.constructor().copy(this)},copy:function(r){return this.radius=r.radius,this.theta=r.theta,this.y=r.y,this},setFromVector3:function(r){return this.radius=S(r.x*r.x+r.z*r.z),this.theta=Fd(r.x,r.z),this.y=r.y,this}}),ur.prototype=Object.create(ct.prototype),ur.prototype.constructor=ur,ur.prototype.isImmediateRenderObject=!0,pr.prototype=Object.create(ml.prototype),pr.prototype.constructor=pr,pr.prototype.update=function(){var l=new Qr,t=new Qr,M=new it;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),M.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,r=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var o=a.vertices,s=a.faces,c=0,h=0,x=s.length;h<x;h++)for(var u=s[h],p=0,d=u.vertexNormals.length;p<d;p++){var f=o[u[i[p]]],m=u.vertexNormals[p];l.copy(f).applyMatrix4(n),t.copy(m).applyMatrix3(M).normalize().multiplyScalar(this.size).add(l),r.setXYZ(c,l.x,l.y,l.z),c+=1,r.setXYZ(c,t.x,t.y,t.z),c+=1}else if(a&&a.isBufferGeometry)for(var g=a.attributes.position,E=a.attributes.normal,c=0,p=0,d=g.count;p<d;p++)l.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(n),t.set(E.getX(p),E.getY(p),E.getZ(p)),t.applyMatrix3(M).normalize().multiplyScalar(this.size).add(l),r.setXYZ(c,l.x,l.y,l.z),c+=1,r.setXYZ(c,t.x,t.y,t.z),c+=1;r.needsUpdate=!0}}(),dr.prototype=Object.create(ct.prototype),dr.prototype.constructor=dr,dr.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},dr.prototype.update=function(){var r=new Qr,t=new Qr;return function(){this.light.updateMatrixWorld();var a=this.light.distance?this.light.distance:1e3,o=a*x(this.light.angle);this.cone.scale.set(o,o,a),r.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(r)),void 0===this.color?this.cone.material.color.copy(this.light.color):this.cone.material.color.set(this.color)}}(),mr.prototype=Object.create(ml.prototype),mr.prototype.constructor=mr,mr.prototype.onBeforeRender=function(){var r=new Qr,t=new Yr,l=new Yr;return function(){var i=this.bones,n=this.geometry,d=n.getAttribute("position");l.getInverse(this.root.matrixWorld);for(var a=0,o=0,s;a<i.length;a++)s=i[a],s.parent&&s.parent.isBone&&(t.multiplyMatrices(l,s.matrixWorld),r.setFromMatrixPosition(t),d.setXYZ(o,r.x,r.y,r.z),t.multiplyMatrices(l,s.parent.matrixWorld),r.setFromMatrixPosition(t),d.setXYZ(o+1,r.x,r.y,r.z),o+=2);n.getAttribute("position").needsUpdate=!0}}(),gr.prototype=Object.create(Ft.prototype),gr.prototype.constructor=gr,gr.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},gr.prototype.update=function(){void 0===this.color?this.material.color.copy(this.light.color):this.material.color.set(this.color)},vr.prototype=Object.create(ct.prototype),vr.prototype.constructor=vr,vr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},vr.prototype.update=function(){var r=.5*this.light.width,a=.5*this.light.height,o=this.line.geometry.attributes.position,i=o.array;i[0]=r,i[1]=-a,i[2]=0,i[3]=r,i[4]=a,i[5]=0,i[6]=-r,i[7]=a,i[8]=0,i[9]=-r,i[10]=-a,i[11]=0,i[12]=r,i[13]=-a,i[14]=0,o.needsUpdate=!0,void 0===this.color?this.line.material.color.copy(this.light.color):this.line.material.color.set(this.color)},yr.prototype=Object.create(ct.prototype),yr.prototype.constructor=yr,yr.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},yr.prototype.update=function(){var l=new Qr,t=new W,d=new W;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var n=i.geometry.getAttribute("color");t.copy(this.light.color),d.copy(this.light.groundColor);for(var r=0,a=n.count,o;r<a;r++)o=r<a/2?t:d,n.setXYZ(r,o.r,o.g,o.b);n.needsUpdate=!0}i.lookAt(l.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),xr.prototype=Object.create(ml.prototype),xr.prototype.constructor=xr,br.prototype=Object.create(ml.prototype),br.prototype.constructor=br,_r.prototype=Object.create(ml.prototype),_r.prototype.constructor=_r,_r.prototype.update=function(){var a=new Qr,t=new Qr,d=new it;return function(){this.object.updateMatrixWorld(!0),d.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,n=this.geometry.attributes.position,r=this.object.geometry,m=r.vertices,o=r.faces,s=0,c=0,g=o.length;c<g;c++){var l=o[c],u=l.normal;a.copy(m[l.a]).add(m[l.b]).add(m[l.c]).divideScalar(3).applyMatrix4(i),t.copy(u).applyMatrix3(d).normalize().multiplyScalar(this.size).add(a),n.setXYZ(s,a.x,a.y,a.z),s+=1,n.setXYZ(s,t.x,t.y,t.z),s+=1}n.needsUpdate=!0}}(),wr.prototype=Object.create(ct.prototype),wr.prototype.constructor=wr,wr.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},wr.prototype.update=function(){var r=new Qr,t=new Qr,a=new Qr;return function(){r.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),a.subVectors(t,r),this.lightPlane.lookAt(a),void 0===this.color?(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)):(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)),this.targetLine.lookAt(a),this.targetLine.scale.z=a.length()}}(),Mr.prototype=Object.create(ml.prototype),Mr.prototype.constructor=Mr,Mr.prototype.update=function(){function a(i,p,a,o){d.set(p,a,o).unproject(n);var s=r[i];if(void 0!==s)for(var c=t.getAttribute("position"),m=0,l=s.length;m<l;m++)c.setXYZ(s[m],d.x,d.y,d.z)}var d=new Qr,n=new lt,t,r;return function(){t=this.geometry,r=this.pointMap,n.projectionMatrix.copy(this.camera.projectionMatrix),a("c",0,0,-1),a("t",0,0,1),a("n1",-1,-1,-1),a("n2",1,-1,-1),a("n3",-1,1,-1),a("n4",1,1,-1),a("f1",-1,-1,1),a("f2",1,-1,1),a("f3",-1,1,1),a("f4",1,1,1),a("u1",.7,1.1,-1),a("u2",-.7,1.1,-1),a("u3",0,2,-1),a("cf1",-1,0,1),a("cf2",1,0,1),a("cf3",0,-1,1),a("cf4",0,1,1),a("cn1",-1,0,-1),a("cn2",1,0,-1),a("cn3",0,-1,-1),a("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Er.prototype=Object.create(ml.prototype),Er.prototype.constructor=Er,Er.prototype.update=function(){var o=new la;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&o.setFromObject(this.object),!o.isEmpty()){var s=o.min,i=o.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=s.x,r[4]=i.y,r[5]=i.z,r[6]=s.x,r[7]=s.y,r[8]=i.z,r[9]=i.x,r[10]=s.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=s.z,r[15]=s.x,r[16]=i.y,r[17]=s.z,r[18]=s.x,r[19]=s.y,r[20]=s.z,r[21]=i.x,r[22]=s.y,r[23]=s.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Er.prototype.setFromObject=function(r){return this.object=r,this.update(),this},Tr.prototype=Object.create(ml.prototype),Tr.prototype.constructor=Tr,Tr.prototype.onBeforeRender=function(){var r=this.box;r.isEmpty()||(r.getCenter(this.position),r.getSize(this.scale),this.scale.multiplyScalar(.5))},Sr.prototype=Object.create(ul.prototype),Sr.prototype.constructor=Sr,Sr.prototype.onBeforeRender=function(){var r=-this.plane.constant;1e-8>D(r)&&(r=1e-8),this.scale.set(.5*this.size,.5*this.size,r),this.lookAt(this.plane.normal),this.updateMatrixWorld()};var Xs,Ys;Ar.prototype=Object.create(ct.prototype),Ar.prototype.constructor=Ar,Ar.prototype.setDirection=function(){var r=new Qr,a;return function(t){.99999<t.y?this.quaternion.set(0,0,0,1):-.99999>t.y?this.quaternion.set(1,0,0,0):(r.set(t.z,0,-t.x).normalize(),a=M(t.y),this.quaternion.setFromAxisAngle(r,a))}}(),Ar.prototype.setLength=function(r,t,a){void 0===t&&(t=.2*r),void 0===a&&(a=.2*t),this.line.scale.set(1,L(0,r-t),1),this.line.updateMatrix(),this.cone.scale.set(a,t,a),this.cone.position.y=r,this.cone.updateMatrix()},Ar.prototype.setColor=function(r){this.line.material.color.copy(r),this.cone.material.color.copy(r)},Rr.prototype=Object.create(ml.prototype),Rr.prototype.constructor=Rr;var Zs=new Qr,Js=new Lr,Qs=new Lr,Ks=new Lr;Pr.prototype=Object.create(Rn.prototype),Pr.prototype.constructor=Pr,Pr.prototype.getPoint=function(c){var t=this.points,y=t.length,i=(y-(this.closed?0:1))*c,n=C(i),r=i-n;this.closed?n+=0<n?0:(C(D(n)/t.length)+1)*t.length:0===r&&n===y-1&&(n=y-2,r=1);var a,o,s,h;if(this.closed||0<n?a=t[(n-1)%y]:(Zs.subVectors(t[0],t[1]).add(t[0]),a=Zs),o=t[n%y],s=t[(n+1)%y],this.closed||n+2<y?h=t[(n+2)%y]:(Zs.subVectors(t[y-1],t[y-2]).add(t[y-1]),h=Zs),void 0===this.type||"centripetal"===this.type||"chordal"===this.type){var l="chordal"===this.type?.5:.25,u=g(a.distanceToSquared(o),l),p=g(o.distanceToSquared(s),l),d=g(s.distanceToSquared(h),l);1e-4>p&&(p=1),1e-4>u&&(u=p),1e-4>d&&(d=p),Js.initNonuniformCatmullRom(a.x,o.x,s.x,h.x,u,p,d),Qs.initNonuniformCatmullRom(a.y,o.y,s.y,h.y,u,p,d),Ks.initNonuniformCatmullRom(a.z,o.z,s.z,h.z,u,p,d)}else if("catmullrom"===this.type){var f=void 0===this.tension?.5:this.tension;Js.initCatmullRom(a.x,o.x,s.x,h.x,f),Qs.initCatmullRom(a.y,o.y,s.y,h.y,f),Ks.initCatmullRom(a.z,o.z,s.z,h.z,f)}return new Qr(Js.calc(r),Qs.calc(r),Ks.calc(r))},Cr.prototype=Object.create(Rn.prototype),Cr.prototype.constructor=Cr,Cr.prototype.getPoint=function(a){var t=this.v0,o=this.v1,i=this.v2,n=this.v3;return new Qr(An(a,t.x,o.x,i.x,n.x),An(a,t.y,o.y,i.y,n.y),An(a,t.z,o.z,i.z,n.z))},Ir.prototype=Object.create(Rn.prototype),Ir.prototype.constructor=Ir,Ir.prototype.getPoint=function(r){var t=this.v0,a=this.v1,o=this.v2;return new Qr(wn(r,t.x,a.x,o.x),wn(r,t.y,a.y,o.y),wn(r,t.z,a.z,o.z))},Ur.prototype=Object.create(Rn.prototype),Ur.prototype.constructor=Ur,Ur.prototype.getPoint=function(r){if(1===r)return this.v2.clone();var t=new Qr;return t.subVectors(this.v2,this.v1),t.multiplyScalar(r),t.add(this.v1),t},Nr.prototype=Object.create(Id.prototype),Nr.prototype.constructor=Nr;Rn.create=function(r,t){return console.log("THREE.Curve.create() has been deprecated"),r.prototype=Object.create(Rn.prototype),r.prototype.constructor=r,r.prototype.getPoint=t,r},Dr.prototype=Object.create(Pr.prototype),ia.prototype=Object.create(Pr.prototype),na.prototype=Object.create(Pr.prototype),Object.assign(na.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),xr.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},mr.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(X.prototype,{center:function(r){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},size:function(r){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(r)}}),Object.assign(la.prototype,{center:function(r){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(r)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(r){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionSphere:function(r){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)},size:function(r){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(r)}}),Dt.prototype.center=function(r){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(r)},Mc.random16=function(){return console.warn("THREE.Math.random16() has been deprecated. Use Math.random() instead."),Math.random()},Object.assign(it.prototype,{flattenToArrayOffset:function(r,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)},multiplyVector3:function(r){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),r.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(r){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(r)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Yr.prototype,{extractPosition:function(r){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(r)},flattenToArrayOffset:function(r,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(r,t)},getPosition:function(){var r;return function(){return void 0===r&&(r=new Qr),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),r.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(r){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(r)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(r){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector4:function(r){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(r){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),r.transformDirection(this)},crossVector:function(r){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),r.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(r){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(r)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(o,t,s,i,n,r){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(o,t,i,s,n,r)}}),nt.prototype.isIntersectionLine=function(r){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(r)},Hr.prototype.multiplyVector3=function(r){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),r.applyQuaternion(this)},Object.assign(rl.prototype,{isIntersectionBox:function(r){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(r)},isIntersectionPlane:function(r){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(r)},isIntersectionSphere:function(r){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(r)}}),Object.assign(On.prototype,{extrude:function(r){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Ul(this,r)},makeGeometry:function(r){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Wl(this,r)}}),Object.assign(Br.prototype,{fromAttribute:function(r,t,a){return console.error("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)}}),Object.assign(Qr.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(r){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(r)},getScaleFromMatrix:function(r){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(r)},getColumnFromMatrix:function(r,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,r)},applyProjection:function(r){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(r)},fromAttribute:function(r,t,a){return console.error("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)}}),Object.assign(Fr.prototype,{fromAttribute:function(r,t,a){return console.error("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(r,t,a)}}),mt.prototype.computeTangents=function(){console.warn("THREE.Geometry: .computeTangents() has been removed.")},Object.assign(ct.prototype,{getChildByName:function(r){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(r)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(r,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,r)}}),Object.defineProperties(ct.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(r){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=r}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(ll.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(dl.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(Rn.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(r){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=r}}),ca.prototype.setLens=function(r,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(r)},Object.defineProperties(Vi.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(r){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=r}},shadowCameraLeft:{set:function(r){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=r}},shadowCameraRight:{set:function(r){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=r}},shadowCameraTop:{set:function(r){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=r}},shadowCameraBottom:{set:function(r){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=r}},shadowCameraNear:{set:function(r){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=r}},shadowCameraFar:{set:function(r){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=r}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(r){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=r}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(r){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=r}},shadowMapHeight:{set:function(r){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=r}}}),Object.defineProperties(gt.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}}}),Object.assign(Rt.prototype,{addIndex:function(r){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(r)},addDrawCall:function(r,t,a){void 0!==a&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(r,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Rt.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties($n.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(J.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new W}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(r){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===r}}}),Object.defineProperties(nd.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(aa.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(r){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=r}}}),Object.assign(_e.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(r){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(r)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")}}),Object.defineProperties(_e.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=r}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=r}},shadowMapCullFace:{get:function(){return this.shadowMap.cullFace},set:function(r){console.warn("THREE.WebGLRenderer: .shadowMapCullFace is now .shadowMap.cullFace."),this.shadowMap.cullFace=r}}}),Object.defineProperties(at.prototype,{cullFace:{get:function(){return this.renderReverseSided?ma:fa},set:function(r){var t=r!==fa;console.warn("WebGLRenderer: .shadowMap.cullFace is deprecated. Set .shadowMap.renderReverseSided to "+t+"."),this.renderReverseSided=t}}}),Object.defineProperties(Gr.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=r}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(r){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=r}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=r}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(r){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=r}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(r){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=r}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(r){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=r}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(r){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=r}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(r){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=r}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(r){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=r}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(r){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=r}}}),jd.prototype.load=function(r){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var a=this;return new Gn().load(r,function(r){a.setBuffer(r)}),this},zd.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Vn.prototype.updateCubeMap=function(r,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(r,t)};zr.WebGLRenderTargetCube=Vr,zr.WebGLRenderTarget=Gr,zr.WebGLRenderer=_e,zr.ShaderLib=Rs,zr.UniformsLib=Ts,zr.UniformsUtils=Ss,zr.ShaderChunk=As,zr.FogExp2=we,zr.Fog=Me,zr.Scene=Ee,zr.LensFlare=Kt,zr.Sprite=sl,zr.LOD=ll,zr.SkinnedMesh=cl,zr.Skeleton=dl,zr.Bone=Pe,zr.Mesh=Ft,zr.LineSegments=ml,zr.LineLoop=gl,zr.Line=ul,zr.Points=yl,zr.Group=fl,zr.VideoTexture=Ml,zr.DataTexture=s,zr.CompressedTexture=Ge,zr.CubeTexture=c,zr.CanvasTexture=Y,zr.DepthTexture=He,zr.Texture=kr,zr.CompressedTextureLoader=Fi,zr.DataTextureLoader=Bi,zr.CubeTextureLoader=Gi,zr.TextureLoader=Hi,zr.ObjectLoader=vn,zr.MaterialLoader=dn,zr.BufferGeometryLoader=fn,zr.DefaultLoadingManager=Fs,zr.LoadingManager=pd,zr.JSONLoader=gn,zr.ImageLoader=zi,zr.FontLoader=zn,zr.FileLoader=Oi,zr.Loader=mn,zr.Cache=Os,zr.AudioLoader=Gn,zr.SpotLightShadow=Wi,zr.SpotLight=gd,zr.PointLight=hd,zr.RectAreaLight=xd,zr.HemisphereLight=ud,zr.DirectionalLightShadow=yd,zr.DirectionalLight=fd,zr.AmbientLight=Md,zr.LightShadow=md,zr.Light=Vi,zr.StereoCamera=Hn,zr.PerspectiveCamera=ca,zr.OrthographicCamera=ht,zr.CubeCamera=Vn,zr.ArrayCamera=ge,zr.Camera=lt,zr.AudioListener=kn,zr.PositionalAudio=Od,zr.AudioContext=Ws,zr.AudioAnalyser=zd,zr.Audio=jd,zr.VectorKeyframeTrack=rn,zr.StringKeyframeTrack=Nd,zr.QuaternionKeyframeTrack=Ld,zr.NumberKeyframeTrack=Dd,zr.ColorKeyframeTrack=Cd,zr.BooleanKeyframeTrack=wd,zr.PropertyMixer=qn,zr.PropertyBinding=Rd,zr.KeyframeTrack=Sd,zr.AnimationUtils=Bs,zr.AnimationObjectGroup=Jn,zr.AnimationMixer=Kn,zr.AnimationClip=pn,zr.Uniform=$n,zr.InstancedBufferGeometry=tr,zr.BufferGeometry=Rt,zr.GeometryIdCount=ft,zr.Geometry=mt,zr.InterleavedBufferAttribute=Ud,zr.InstancedInterleavedBuffer=nr,zr.InterleavedBuffer=ir,zr.InstancedBufferAttribute=Pd,zr.Face3=ua,zr.Object3D=ct,zr.Raycaster=Bd,zr.Layers=st,zr.EventDispatcher=t,zr.Clock=cr,zr.QuaternionLinearInterpolant=bd,zr.LinearInterpolant=vd,zr.DiscreteInterpolant=Ad,zr.CubicInterpolant=$i,zr.Interpolant=Ed,zr.Triangle=Ot,zr.Math=Mc,zr.Spherical=hr,zr.Cylindrical=lr,zr.Plane=nt,zr.Frustum=da,zr.Sphere=et,zr.Ray=rl,zr.Matrix4=Yr,zr.Matrix3=it,zr.Box3=la,zr.Box2=X,zr.Line3=Dt,zr.Euler=ot,zr.Vector4=Fr,zr.Vector3=Qr,zr.Vector2=Br,zr.Quaternion=Hr,zr.Color=W,zr.ImmediateRenderObject=ur,zr.VertexNormalsHelper=pr,zr.SpotLightHelper=dr,zr.SkeletonHelper=mr,zr.PointLightHelper=gr,zr.RectAreaLightHelper=vr,zr.HemisphereLightHelper=yr,zr.GridHelper=xr,zr.PolarGridHelper=br,zr.FaceNormalsHelper=_r,zr.DirectionalLightHelper=wr,zr.CameraHelper=Mr,zr.BoxHelper=Er,zr.Box3Helper=Tr,zr.PlaneHelper=Sr,zr.ArrowHelper=Ar,zr.AxisHelper=Rr,zr.CatmullRomCurve3=Pr,zr.CubicBezierCurve3=Cr,zr.QuadraticBezierCurve3=Ir,zr.LineCurve3=Ur,zr.ArcCurve=Nr,zr.EllipseCurve=Id,zr.SplineCurve=In,zr.CubicBezierCurve=Un,zr.QuadraticBezierCurve=Nn,zr.LineCurve=Ln,zr.Shape=On,zr.Path=Dn,zr.ShapePath=_d,zr.Font=Bn,zr.CurvePath=Pn,zr.Curve=Rn,zr.ShapeUtils=Us,zr.SceneUtils={createMultiMaterialObject:function(a,t){for(var o=new fl,i=0,n=t.length;i<n;i++)o.add(new Ft(a,t[i]));return o},detach:function(r,t,a){r.applyMatrix(t.matrixWorld),t.remove(r),a.add(r)},attach:function(r,t,a){r.applyMatrix(new Yr().getInverse(a.matrixWorld)),t.remove(r),a.add(r)}},zr.WebGLUtils=be,zr.WireframeGeometry=Ve,zr.ParametricGeometry=xl,zr.ParametricBufferGeometry=El,zr.TetrahedronGeometry=Tl,zr.TetrahedronBufferGeometry=bl,zr.OctahedronGeometry=Ll,zr.OctahedronBufferGeometry=Dl,zr.IcosahedronGeometry=Nl,zr.IcosahedronBufferGeometry=wl,zr.DodecahedronGeometry=Cl,zr.DodecahedronBufferGeometry=Sl,zr.PolyhedronGeometry=vl,zr.PolyhedronBufferGeometry=Al,zr.TubeGeometry=Il,zr.TubeBufferGeometry=_l,zr.TorusKnotGeometry=jl,zr.TorusKnotBufferGeometry=Ol,zr.TorusGeometry=zl,zr.TorusBufferGeometry=Rl,zr.TextGeometry=Bl,zr.TextBufferGeometry=kl,zr.SphereGeometry=Fl,zr.SphereBufferGeometry=Gl,zr.RingGeometry=Vl,zr.RingBufferGeometry=Hl,zr.PlaneGeometry=jo,zr.PlaneBufferGeometry=el,zr.LatheGeometry=Ql,zr.LatheBufferGeometry=Yl,zr.ShapeGeometry=Wl,zr.ShapeBufferGeometry=Xl,zr.ExtrudeGeometry=Ul,zr.ExtrudeBufferGeometry=Pl,zr.EdgesGeometry=ql,zr.ConeGeometry=Jl,zr.ConeBufferGeometry=$l,zr.CylinderGeometry=Zl,zr.CylinderBufferGeometry=Kl,zr.CircleGeometry=ed,zr.CircleBufferGeometry=td,zr.BoxGeometry=Lt,zr.BoxBufferGeometry=ha,zr.ShadowMaterial=rd,zr.SpriteMaterial=$t,zr.RawShaderMaterial=ad,zr.ShaderMaterial=aa,zr.PointsMaterial=hl,zr.MeshPhysicalMaterial=id,zr.MeshStandardMaterial=od,zr.MeshPhongMaterial=nd,zr.MeshToonMaterial=sd,zr.MeshNormalMaterial=ld,zr.MeshLambertMaterial=dd,zr.MeshDepthMaterial=oa,zr.MeshDistanceMaterial=sa,zr.MeshBasicMaterial=tl,zr.LineDashedMaterial=cd,zr.LineBasicMaterial=pl,zr.Material=J,zr.Float64BufferAttribute=Tt,zr.Float32BufferAttribute=Et,zr.Uint32BufferAttribute=Mt,zr.Int32BufferAttribute=wt,zr.Uint16BufferAttribute=_t,zr.Int16BufferAttribute=bt,zr.Uint8ClampedBufferAttribute=xt,zr.Uint8BufferAttribute=yt,zr.Int8BufferAttribute=vt,zr.BufferAttribute=gt,zr.REVISION=Vd,zr.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},zr.CullFaceNone=pa,zr.CullFaceBack=fa,zr.CullFaceFront=ma,zr.CullFaceFrontBack=3,zr.FrontFaceDirectionCW=ga,zr.FrontFaceDirectionCCW=1,zr.BasicShadowMap=0,zr.PCFShadowMap=va,zr.PCFSoftShadowMap=ya,zr.FrontSide=xa,zr.BackSide=ba,zr.DoubleSide=Hd,zr.FlatShading=1,zr.SmoothShading=2,zr.NoColors=wa,zr.FaceColors=Ma,zr.VertexColors=Qd,zr.NoBlending=Yd,zr.NormalBlending=Wd,zr.AdditiveBlending=Xd,zr.SubtractiveBlending=qd,zr.MultiplyBlending=Zd,zr.CustomBlending=Kd,zr.AddEquation=Jd,zr.SubtractEquation=Ia,zr.ReverseSubtractEquation=Ua,zr.MinEquation=Na,zr.MaxEquation=Da,zr.ZeroFactor=Oa,zr.OneFactor=Fa,zr.SrcColorFactor=Ba,zr.OneMinusSrcColorFactor=za,zr.SrcAlphaFactor=Ga,zr.OneMinusSrcAlphaFactor=Ha,zr.DstAlphaFactor=Va,zr.OneMinusDstAlphaFactor=ka,zr.DstColorFactor=ja,zr.OneMinusDstColorFactor=Wa,zr.SrcAlphaSaturateFactor=Xa,zr.NeverDepth=qa,zr.AlwaysDepth=Ya,zr.LessDepth=Za,zr.LessEqualDepth=Ja,zr.EqualDepth=Qa,zr.GreaterEqualDepth=Ka,zr.GreaterDepth=$a,zr.NotEqualDepth=to,zr.MultiplyOperation=eo,zr.MixOperation=io,zr.AddOperation=no,zr.NoToneMapping=ro,zr.LinearToneMapping=ao,zr.ReinhardToneMapping=oo,zr.Uncharted2ToneMapping=so,zr.CineonToneMapping=co,zr.UVMapping=300,zr.CubeReflectionMapping=ho,zr.CubeRefractionMapping=$d,zr.EquirectangularReflectionMapping=ec,zr.EquirectangularRefractionMapping=tc,zr.SphericalReflectionMapping=rc,zr.CubeUVReflectionMapping=ac,zr.CubeUVRefractionMapping=oc,zr.RepeatWrapping=ic,zr.ClampToEdgeWrapping=nc,zr.MirroredRepeatWrapping=sc,zr.NearestFilter=lc,zr.NearestMipMapNearestFilter=dc,zr.NearestMipMapLinearFilter=cc,zr.LinearFilter=pc,zr.LinearMipMapNearestFilter=uc,zr.LinearMipMapLinearFilter=mc,zr.UnsignedByteType=gc,zr.ByteType=Ao,zr.ShortType=Ro,zr.UnsignedShortType=Lo,zr.IntType=Po,zr.UnsignedIntType=Co,zr.FloatType=Io,zr.HalfFloatType=Uo,zr.UnsignedShort4444Type=No,zr.UnsignedShort5551Type=Do,zr.UnsignedShort565Type=Oo,zr.UnsignedInt248Type=Fo,zr.AlphaFormat=Bo,zr.RGBFormat=zo,zr.RGBAFormat=hc,zr.LuminanceFormat=yc,zr.LuminanceAlphaFormat=Vo,zr.RGBEFormat=hc,zr.DepthFormat=ko,zr.DepthStencilFormat=Wo,zr.RGB_S3TC_DXT1_Format=Xo,zr.RGBA_S3TC_DXT1_Format=qo,zr.RGBA_S3TC_DXT3_Format=Yo,zr.RGBA_S3TC_DXT5_Format=Zo,zr.RGB_PVRTC_4BPPV1_Format=Jo,zr.RGB_PVRTC_2BPPV1_Format=Qo,zr.RGBA_PVRTC_4BPPV1_Format=Ko,zr.RGBA_PVRTC_2BPPV1_Format=$o,zr.RGB_ETC1_Format=ts,zr.LoopOnce=2200,zr.LoopRepeat=es,zr.LoopPingPong=2202,zr.InterpolateDiscrete=2300,zr.InterpolateLinear=2301,zr.InterpolateSmooth=2302,zr.ZeroCurvatureEnding=is,zr.ZeroSlopeEnding=2401,zr.WrapAroundEnding=2402,zr.TrianglesDrawMode=fc,zr.TriangleStripDrawMode=rs,zr.TriangleFanDrawMode=as,zr.LinearEncoding=os,zr.sRGBEncoding=ss,zr.GammaEncoding=cs,zr.RGBEEncoding=hs,zr.LogLuvEncoding=3003,zr.RGBM7Encoding=ls,zr.RGBM16Encoding=us,zr.RGBDEncoding=ps,zr.BasicDepthPacking=ds,zr.RGBADepthPacking=fs,zr.CubeGeometry=Lt,zr.Face4=function(s,t,l,i,n,r,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new ua(s,t,l,n,r,a)},zr.LineStrip=0,zr.LinePieces=1,zr.MeshFaceMaterial=function(r){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),r},zr.MultiMaterial=function(r){return void 0===r&&(r=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),r.isMultiMaterial=!0,r.materials=r,r.clone=function(){return r.slice()},r},zr.PointCloud=function(r,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new yl(r,t)},zr.Particle=function(r){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new sl(r)},zr.ParticleSystem=function(r,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new yl(r,t)},zr.PointCloudMaterial=function(r){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new hl(r)},zr.ParticleBasicMaterial=function(r){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new hl(r)},zr.ParticleSystemMaterial=function(r){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new hl(r)},zr.Vertex=function(r,t,a){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Qr(r,t,a)},zr.DynamicBufferAttribute=function(r,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new gt(r,t).setDynamic(!0)},zr.Int8Attribute=function(r,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new vt(r,t)},zr.Uint8Attribute=function(r,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new yt(r,t)},zr.Uint8ClampedAttribute=function(r,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new xt(r,t)},zr.Int16Attribute=function(r,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new bt(r,t)},zr.Uint16Attribute=function(r,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new _t(r,t)},zr.Int32Attribute=function(r,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new wt(r,t)},zr.Uint32Attribute=function(r,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Mt(r,t)},zr.Float32Attribute=function(r,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Et(r,t)},zr.Float64Attribute=function(r,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Tt(r,t)},zr.ClosedSplineCurve3=Dr,zr.SplineCurve3=ia,zr.Spline=na,zr.BoundingBoxHelper=function(r,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Er(r,t)},zr.EdgesHelper=function(r,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new ml(new ql(r.geometry),new pl({color:void 0===t?16777215:t}))},zr.WireframeHelper=function(r,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new ml(new Ve(r.geometry),new pl({color:void 0===t?16777215:t}))},zr.XHRLoader=function(r){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Oi(r)},zr.BinaryTextureLoader=function(r){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new Bi(r)},zr.GeometryUtils={merge:function(r,t,a){console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");var o;t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),o=t.matrix,t=t.geometry),r.merge(t,o,a)},center:function(r){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),r.center()}},zr.ImageUtils={crossOrigin:void 0,loadTexture:function(o,t,s,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var n=new Hi;n.setCrossOrigin(this.crossOrigin);var r=n.load(o,s,void 0,i);return t&&(r.mapping=t),r},loadTextureCube:function(o,t,s,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var n=new Gi;n.setCrossOrigin(this.crossOrigin);var r=n.load(o,s,void 0,i);return t&&(r.mapping=t),r},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},zr.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(r,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),r.project(t)},this.unprojectVector=function(r,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),r.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},zr.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},Object.defineProperty(zr,"__esModule",{value:!0})})},{}],42:[function(){THREE.ColladaLoader=function(){function Qe(t,o,i,s){var r=0;if(document.implementation&&document.implementation.createDocument){var l=new XMLHttpRequest;l.onreadystatechange=function(){4===l.readyState?0===l.status||200===l.status?l.response?(ot=o,Ke(l.response,void 0,t)):s?s({type:"error",url:t}):console.error("ColladaLoader: Empty or non-existing file ("+t+")"):s?s({type:"error",url:t}):console.error("ColladaLoader: Couldn't load \""+t+"\" ("+l.status+")"):3===l.readyState&&i&&(0===r&&(r=l.getResponseHeader("Content-Length")),i({total:r,loaded:l.responseText.length}))},l.open("GET",t,!0),l.send(null)}else alert("Don't know how to parse XML!")}function Ke(n,p,m){if(Ee=new DOMParser().parseFromString(n,"text/xml"),p=p||ot,void 0!==m){var o=m.split("/");o.pop(),xt=(1>o.length?".":o.join("/"))+"/"}$e(),ye(),Xe=i("library_images image",T,"image"),lt=i("library_materials material",B,"material"),dt=i("library_effects effect",J,"effect"),st=i("library_geometries geometry",H,"geometry"),ct=i("library_cameras camera",te,"camera"),pt=i("library_lights light",se,"light"),nt=i("library_controllers controller",E,"controller"),it=i("library_animations animation",Q,"animation"),ft=i("library_visual_scenes visual_scene",A,"visual_scene"),Mt=i("library_kinematics_models kinematics_model",ae,"kinematics_model"),je=[],Et=[],We=s(),Ie=new THREE.Group;for(var g=0;g<We.nodes.length;g++)Ie.add(u(We.nodes[g]));Ie.scale.multiplyScalar(mt),a(),gt=r(),d();var l={scene:Ie,morphs:je,skins:Et,animations:ht,kinematics:yt,dae:{images:Xe,materials:lt,cameras:ct,lights:pt,effects:dt,geometries:st,controllers:nt,animations:it,visualScenes:ft,visualScene:We,scene:We,kinematicsModels:Mt,kinematicsModel:gt}};return p&&p(l),l}function $e(){var a=Ee.querySelectorAll("asset"),o=a[0];if(o&&o.childNodes)for(var t=0,n;t<o.childNodes.length;t++)switch(n=o.childNodes[t],n.nodeName){case"unit":var s=n.getAttribute("meter");s&&(mt=parseFloat(s));break;case"up_axis":Ge=n.textContent.charAt(0);}}function i(d,c,t){for(var i=Ee.querySelectorAll(d),p={},r=0,a=i.length,n=0;n<a;n++){var o=i[n],u=new c().parse(o);u.id&&0!==u.id.length||(u.id=t+r++),p[u.id]=u}return p}function s(){var r=Ee.querySelectorAll("scene instance_visual_scene")[0];if(r){var a=r.getAttribute("url").replace(/^#/,"");return ft[0<a.length?a:"visual_scene0"]}return null}function r(){var r=Ee.querySelectorAll("instance_kinematics_model")[0];if(r){var a=r.getAttribute("url").replace(/^#/,"");return Mt[0<a.length?a:"kinematics_model0"]}return null}function a(){ht=[],et(Ie)}function et(o){var l=We.getChildById(o.colladaId,!0),d=null;if(l&&l.keys){d={fps:60,hierarchy:[{node:l,keys:l.keys,sids:l.sids}],node:o,name:"animation_"+o.name,length:0},ht.push(d);for(var i=0,s=l.keys.length;i<s;i++)d.length=L(d.length,l.keys[i].time)}else d={hierarchy:[{keys:[],sids:[]}]};for(var i=0,s=o.children.length;i<s;i++)for(var r=et(o.children[i]),a=0,n=r.hierarchy.length;a<n;a++)d.hierarchy.push({keys:[],sids:[]});return d}function tt(){var l=1e6,d=-l,c=0,p;for(var u in it){var r=it[u];p=p||r.id;for(var a=0,n;a<r.sampler.length;a++)n=r.sampler[a],n.create(),l=N(l,n.startTime),d=L(d,n.endTime),c=L(c,n.input.length)}return{start:l,end:d,frames:c,ID:p}}function o(l,d){var t=d instanceof k?nt[d.url]:d;if(!t||!t.morph)return void console.log("could not find morph controller!");for(var c=t.morph,s=0;s<c.targets.length;s++){var r=c.targets[s],a=st[r];if(a.mesh&&a.mesh.primitives&&a.mesh.primitives.length){var n=a.mesh.primitives[0].geometry;n.vertices.length===l.vertices.length&&l.morphTargets.push({name:"target_1",vertices:n.vertices})}}l.morphTargets.push({name:"target_Z",vertices:l.vertices})}function rt(o,l,t,i){if(o.world=o.world||new THREE.Matrix4,o.localworld=o.localworld||new THREE.Matrix4,o.world.copy(o.matrix),o.localworld.copy(o.matrix),o.channels&&o.channels.length){var s=o.channels[0],r=s.sampler.output[t];r instanceof THREE.Matrix4&&(o.world.copy(r),o.localworld.copy(r),0===t&&o.matrix.copy(r))}i&&o.world.multiplyMatrices(i,o.world),l.push(o);for(var a=0;a<o.nodes.length;a++)rt(o.nodes[a],l,t,o.world)}function c(l,d){for(var t=0;t<l.length;t++){var i=l[t],s=-1;if("JOINT"==i.type){for(var r=0;r<d.joints.length;r++)if(i.sid===d.joints[r]){s=r;break}if(0<=s){var a=d.invBindMatrices[s];i.invBindMatrix=a,i.skinningMatrix=new THREE.Matrix4,i.skinningMatrix.multiplyMatrices(i.world,a),i.animatrix=new THREE.Matrix4,i.animatrix.copy(i.localworld),i.weights=[];for(var r=0;r<d.weights.length;r++)for(var n=0,o;n<d.weights[r].length;n++)o=d.weights[r][n],o.joint===s&&i.weights.push(o)}else console.warn("ColladaLoader: Could not find joint '"+i.sid+"'."),i.skinningMatrix=new THREE.Matrix4,i.weights=[]}}}function p(r){var a=[];return function o(i,l,t){var s={name:l.sid,parent:i,matrix:l.matrix},r=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];for(var a in s.matrix.decompose(r[0],r[1],r[2]),s.pos=[r[0].x,r[0].y,r[0].z],s.scl=[r[2].x,r[2].y,r[2].z],s.rotq=[r[1].x,r[1].y,r[1].z,r[1].w],t.push(s),l.nodes)o(l.sid,l.nodes[a],t)}(-1,r,a),a}function n(p,m,t){var i=[];rt(m,i,-1),c(i,t.skin);for(var s=new THREE.Vector3,r=[],a=0;a<p.vertices.length;a++)r.push(new THREE.Vector3);for(a=0;a<i.length;a++)if("JOINT"==i[a].type)for(var n=0;n<i[a].weights.length;n++){var o=i[a].weights[n],g=o.index,l=o.weight,d=p.vertices[g],h=r[g];s.x=d.x,s.y=d.y,s.z=d.z,s.applyMatrix4(i[a].skinningMatrix),h.x+=s.x*l,h.y+=s.y*l,h.z+=s.z*l}for(var a=0;a<p.vertices.length;a++)p.vertices[a]=r[a]}function l(d,u,t){void 0===t&&(t=40);var i=nt[u.url];if(!i||!i.skin)return void console.log("ColladaLoader: Could not find skin controller.");if(!u.skeleton||!u.skeleton.length)return void console.log("ColladaLoader: Could not find the skeleton for the skin. ");for(var h=tt(),r=We.getChildById(u.skeleton[0],!0)||We.getChildBySid(u.skeleton[0],!0),a=p(r),M=i.skin.joints,o=[],l=0;l<M.length;l++)for(var E=0;E<a.length;E++)a[E].name===M[l]&&(o[l]=a[E]);for(var l=0;l<o.length;l++)for(var E=0;E<o.length;E++)o[l].parent===o[E].name&&(o[l].parent=E);var l,E,m;for(new THREE.Vector3,l=0;l<d.vertices.length;l++)d.vertices[l].applyMatrix4(i.skin.bindShapeMatrix);for(var g=[],v=[],y=i.skin.weights,l=0;l<y.length;l++){var A=new THREE.Vector4(y[l][0]?y[l][0].joint:0,y[l][1]?y[l][1].joint:0,y[l][2]?y[l][2].joint:0,y[l][3]?y[l][3].joint:0),m=new THREE.Vector4(y[l][0]?y[l][0].weight:0,y[l][1]?y[l][1].weight:0,y[l][2]?y[l][2].weight:0,y[l][3]?y[l][3].weight:0);g.push(A),v.push(m)}d.skinIndices=g,d.skinWeights=v,d.bones=o;for(var b={name:h.ID,fps:30,length:h.frames/30,hierarchy:[]},E=0;E<o.length;E++)b.hierarchy.push({parent:o[E].parent,name:o[E].name,keys:[]});for(console.log("ColladaLoader:",h.ID+" has "+o.length+" bones."),n(d,r,i),t=0;t<h.frames;t++){var x=[];rt(r,x,t),c(x,i.skin);for(var l=0;l<x.length;l++)for(var E=0;E<b.hierarchy.length;E++)if(b.hierarchy[E].name===x[l].sid){var L={};L.time=t/30,L.matrix=x[l].animatrix,0===t&&(x[l].matrix=L.matrix);var D=[new THREE.Vector3,new THREE.Quaternion,new THREE.Vector3];L.matrix.decompose(D[0],D[1],D[2]),L.pos=[D[0].x,D[0].y,D[0].z],L.scl=[D[2].x,D[2].y,D[2].z],L.rot=D[1],b.hierarchy[E].keys.push(L)}d.animation=b}}function d(){if(gt&&0===gt.joints.length)return void(yt=void 0);var m={};yt={joints:gt&&gt.joints,getJointValue:function(r){var t=m[r];return t?t.position:void console.log("getJointValue: joint "+r+" doesn't exist")},setJointValue:function(i,t){var s=m[i];if(s){var r=s.joint;if(t>r.limits.max||t<r.limits.min)console.log("setJointValue: joint "+i+" value "+t+" outside of limits (min: "+r.limits.min+", max: "+r.limits.max+")");else if(r.static)console.log("setJointValue: joint "+i+" is static");else{var a=s.node,n=r.axis,o=s.transforms,g=new THREE.Matrix4,l=new THREE.Matrix4;for(d=0;d<o.length;d++){var c=o[d];if(c.sid&&-1!==c.sid.indexOf("joint"+i))switch(r.type){case"revolute":g.multiply(l.makeRotationAxis(n,THREE.Math.degToRad(t)));break;case"prismatic":g.multiply(l.makeTranslation(n.x*t,n.y*t,n.z*t));break;default:console.warn("setJointValue: unknown joint type: "+r.type);}else switch(c.type){case"matrix":g.multiply(c.obj);break;case"translate":g.multiply(l.makeTranslation(c.obj.x,c.obj.y,c.obj.z));break;case"rotate":g.multiply(l.makeRotationAxis(c.obj,c.angle));}}var p=g.elements,h=Array.prototype.slice.call(p),u=[h[0],h[4],h[8],h[12],h[1],h[5],h[9],h[13],h[2],h[6],h[10],h[14],h[3],h[7],h[11],h[15]];a.matrix.set.apply(a.matrix,u),a.matrix.decompose(a.position,a.quaternion,a.scale),m[i].position=t}}else console.log("setJointValue: joint "+i+" doesn't exist")}};var l=Ee.querySelector("scene instance_kinematics_scene");if(l)for(var d=0,t;d<l.childNodes.length;d++)if(t=l.childNodes[d],1==t.nodeType)switch(t.nodeName){case"bind_joint_axis":var i=t.getAttribute("target").split("/").pop(),r=t.querySelector("axis param").textContent,a=parseInt(r.split("joint").pop().split(".")[0]),n=Ee.querySelector("[sid=\""+i+"\"]");if(n){var o=n.parentElement;!function(o,t){var n=t.getAttribute("id"),s=We.getChildById(n,!0),r=gt.joints[o];Ie.traverse(function(t){t.colladaId==n&&(m[o]={node:t,transforms:s.transforms,joint:r,position:r.zeroPosition})})}(a,o)}}}function u(t){var g=new THREE.Object3D,n,i,s,r;for(s=0;s<t.controllers.length;s++){var a=nt[t.controllers[s].url];switch(a.type){case"skin":if(st[a.skin.source]){var f=new O;f.url=a.skin.source,f.instance_material=t.controllers[s].instance_material,t.geometries.push(f),!0,n=t.controllers[s]}else if(nt[a.skin.source]){var h=nt[a.skin.source];if(i=h,h.morph&&st[h.morph.source]){var f=new O;f.url=h.morph.source,f.instance_material=t.controllers[s].instance_material,t.geometries.push(f)}}break;case"morph":if(st[a.morph.source]){var f=new O;f.url=a.morph.source,f.instance_material=t.controllers[s].instance_material,t.geometries.push(f),i=t.controllers[s]}console.log("ColladaLoader: Morph-controller partially supported.");}}var c={};for(s=0;s<t.geometries.length;s++){var p=t.geometries[s],D=p.instance_material,m=st[p.url],v={},y=[],b=0,w;if(m){if(!m.mesh||!m.mesh.primitives)continue;if(0===g.name.length&&(g.name=m.id),D)for(r=0;r<D.length;r++){var d=D[r],x=lt[d.target],N=x.instance_effect.url,S=dt[N].shader,T=S.material;if(m.doubleSided){if(!(d.symbol in c)){var E=T.clone();E.side=THREE.DoubleSide,c[d.symbol]=E}T=c[d.symbol]}T.opacity=T.opacity?T.opacity:1,v[d.symbol]=b,y.push(T),w=T,w.name=null===x.name||""===x.name?x.id:x.name,b++}var R=w||new THREE.MeshLambertMaterial({color:14540253,side:m.doubleSided?THREE.DoubleSide:THREE.FrontSide}),A=m.mesh.geometry3js,C;if(1<b)for(R=new THREE.MultiMaterial(y),r=0;r<A.faces.length;r++){var _=A.faces[r];_.materialIndex=v[_.daeMaterial]}void 0===n?void 0===i?C=!0===A.isLineStrip?new THREE.Line(A):new THREE.Mesh(A,R):(o(A,i),R.morphTargets=!0,C=new THREE.Mesh(A,R),C.name="morph_"+je.length,je.push(C)):(l(A,n),0<A.morphTargets.length?(R.morphTargets=!0,R.skinning=!1):(R.morphTargets=!1,R.skinning=!0),C=new THREE.SkinnedMesh(A,R,!1),C.name="skin_"+Et.length,Et.push(C)),g.add(C)}}for(s=0;s<t.cameras.length;s++){var M=t.cameras[s],U=ct[M.url],j=new THREE.PerspectiveCamera(U.yfov,parseFloat(U.aspect_ratio),parseFloat(U.znear),parseFloat(U.zfar));g.add(j)}for(s=0;s<t.lights.length;s++){var P=null,I=t.lights[s],B=pt[I.url];if(B&&B.technique){var k=B.color.getHex(),F=B.intensity,L=B.distance,G=B.falloff_angle;switch(B.technique){case"directional":P=new THREE.DirectionalLight(k,F,L),P.position.set(0,0,1);break;case"point":P=new THREE.PointLight(k,F,L);break;case"spot":P=new THREE.SpotLight(k,F,L,G),P.position.set(0,0,1);break;case"ambient":P=new THREE.AmbientLight(k);}}P&&g.add(P)}if(g.name=t.name||t.id||"",g.colladaId=t.id||"",g.layer=t.layer||"",g.matrix=t.matrix,g.matrix.decompose(g.position,g.quaternion,g.scale),ut.centerGeometry&&g.geometry){var V=g.geometry.center();V.multiply(g.scale),V.applyQuaternion(g.quaternion),g.position.sub(V)}for(s=0;s<t.nodes.length;s++)g.add(u(t.nodes[s],t));return g}function m(r){for(var a=Ee.querySelectorAll("library_nodes node"),t=0,o;t<a.length;t++)if(o=a[t].attributes.getNamedItem("id"),o&&o.value===r)return a[t]}function g(l){var d=[],t=1e6,i=-1e6;for(var s in it)for(var r=it[s],a=0;a<r.channel.length;a++){var n=r.channel[a],o=r.sampler[a],s=n.target.split("/")[0];s==l.id&&(o.create(),n.sampler=o,t=N(t,o.startTime),i=L(i,o.endTime),d.push(n))}return d.length&&(l.startTime=t,l.endTime=i),d}function h(M){if(M.channels&&M.channels.length){for(var E=[],t=[],i=0,s=M.channels.length;i<s;i++){var r=M.channels[i],n=r.fullSid,o=r.sampler,h=o.input,l=M.getTransformBySid(r.sid),c;if(r.arrIndices){c=[];for(var a=0,p=r.arrIndices.length;a<p;a++)c[a]=ke(r.arrIndices[a])}else c=Te(r.member);if(l){-1===t.indexOf(n)&&t.push(n);for(var a=0,p=h.length;a<p;a++){var d=h[a],u=o.getData(l.type,a,c),f=y(E,d);if(!f){f=new ee(d);var A=v(E,d);E.splice(-1===A?E.length:A,0,f)}f.addTarget(n,l,c,u)}}else console.log("Could not find transform \""+r.sid+"\" in node "+M.id)}for(var i=0;i<t.length;i++)for(var g=t[i],a=0,f;a<E.length;a++)f=E[a],f.hasTarget(g)||x(E,f,a,g);M.keys=E,M.sids=t}}function y(o,n){for(var t=null,i=0,s=o.length,r;i<s&&null===t;i++)if(r=o[i],r.time===n)t=r;else if(r.time>n)break;return t}function v(a,o){for(var t=-1,i=0,n=a.length;i<n&&-1===t;i++)a[i].time>=o&&(t=i);return t}function x(d,u,t,i){var s=w(d,i,t?t-1:0),r=b(d,i,t+1);if(s&&r){var a=(u.time-s.time)/(r.time-s.time),o=s.getTarget(i),m=r.getTarget(i).data,l=o.data,c;if("matrix"===o.type)c=l;else if(l.length){c=[];for(var n=0;n<l.length;++n)c[n]=l[n]+(m[n]-l[n])*a}else c=l+(m-l)*a;u.addTarget(i,o.transform,o.member,c)}}function b(r,a,t){for(;t<r.length;t++){var o=r[t];if(o.hasTarget(a))return o}return null}function w(r,a,t){for(t=0<=t?t:t+r.length;0<=t;t--){var o=r[t];if(o.hasTarget(a))return o}return null}function T(){this.id="",this.init_from=""}function E(){this.id="",this.name="",this.type="",this.skin=null,this.morph=null}function R(){this.method=null,this.source=null,this.targets=null,this.weights=null}function _(){this.source="",this.bindShapeMatrix=null,this.invBindMatrices=[],this.joints=[],this.weights=[]}function A(){this.id="",this.name="",this.nodes=[],this.scene=new THREE.Group}function C(){this.id="",this.name="",this.sid="",this.nodes=[],this.controllers=[],this.transforms=[],this.geometries=[],this.channels=[],this.matrix=new THREE.Matrix4}function M(){this.sid="",this.type="",this.data=[],this.obj=null}function k(){this.url="",this.skeleton=[],this.instance_material=[]}function j(){this.symbol="",this.target=""}function O(){this.url="",this.instance_material=[]}function H(){this.id="",this.mesh=null}function I(t){this.geometry=t.id,this.primitives=[],this.vertices=null,this.geometry3js=null}function q(){this.material="",this.count=0,this.inputs=[],this.vcount=null,this.p=[],this.geometry=new THREE.Geometry}function V(){q.call(this),this.vcount=[]}function X(){q.call(this),this.vcount=1}function at(){q.call(this),this.vcount=3}function Y(){this.source="",this.count=0,this.stride=0,this.params=[]}function Z(){this.input={}}function z(){this.semantic="",this.offset=0,this.source="",this.set=0}function F(t){this.id=t,this.type=null}function B(){this.id="",this.name="",this.instance_effect=null}function D(){this.color=new THREE.Color,this.color.setRGB(Math.random(),Math.random(),Math.random()),this.color.a=1,this.texture=null,this.texcoord=null,this.texOpts=null}function P(r,a){this.type=r,this.effect=a,this.material=null}function U(t){this.effect=t,this.init_from=null,this.format=null}function G(t){this.effect=t,this.source=null,this.wrap_s=null,this.wrap_t=null,this.minfilter=null,this.magfilter=null,this.mipfilter=null}function J(){this.id="",this.name="",this.shader=null,this.surface={},this.sampler={}}function W(){this.url=""}function Q(){this.id="",this.name="",this.source={},this.sampler=[],this.channel=[]}function $(t){this.animation=t,this.source="",this.target="",this.fullSid=null,this.sid=null,this.dotSyntax=null,this.arrSyntax=null,this.arrIndices=null,this.member=null}function K(t){this.id="",this.animation=t,this.inputs=[],this.input=null,this.output=null,this.strideOut=null,this.interpolation=null,this.startTime=null,this.endTime=null,this.duration=0}function ee(t){this.targets=[],this.time=t}function te(){this.id="",this.name="",this.technique=""}function ie(){this.url=""}function se(){this.id="",this.name="",this.technique=""}function re(){this.url=""}function ae(){this.id="",this.name="",this.joints=[],this.links=[]}function ne(){this.sid="",this.name="",this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0}function oe(){this.sid="",this.name="",this.transforms=[],this.attachments=[]}function he(){this.joint="",this.transforms=[],this.links=[]}function le(r){var a=r.getAttribute("id");return void 0==Ve[a]?(Ve[a]=new F(a).parse(r),Ve[a]):Ve[a]}function ce(a){for(var o=ue(a),t=[],i=0,n=o.length;i<n;i++)t.push("true"===o[i]||"1"===o[i]);return t}function pe(a){for(var o=ue(a),t=[],i=0,n=o.length;i<n;i++)t.push(parseFloat(o[i]));return t}function de(a){for(var o=ue(a),t=[],i=0,n=o.length;i<n;i++)t.push(parseInt(o[i],10));return t}function ue(t){return 0<t.length?fe(t).split(/\s+/):[]}function fe(t){return t.replace(/^\s+/,"").replace(/\s+$/,"")}function me(r,a,t){return r.hasAttribute(a)?parseInt(r.getAttribute(a),10):t}function ge(r,a){new THREE.ImageLoader().load(a,function(a){r.image=a,r.needsUpdate=!0})}function ve(r,a){r.doubleSided=!1;var t=a.querySelectorAll("extra double_sided")[0];t&&t&&1===parseInt(t.textContent,10)&&(r.doubleSided=!0)}function ye(){!0!==ut.convertUpAxis||Ge===ut.upAxis?Je=null:"X"===Ge?Je="Y"===ut.upAxis?"XtoY":"XtoZ":"Y"===Ge?Je="X"===ut.upAxis?"YtoX":"YtoZ":"Z"===Ge?Je="X"===ut.upAxis?"ZtoX":"ZtoY":void 0}function be(r,a){if(!0===ut.convertUpAxis&&Ge!==ut.upAxis)switch(Je){case"XtoY":var t=r[0];r[0]=a*r[1],r[1]=t;break;case"XtoZ":var t=r[2];r[2]=r[1],r[1]=r[0],r[0]=t;break;case"YtoX":var t=r[0];r[0]=r[1],r[1]=a*t;break;case"YtoZ":var t=r[1];r[1]=a*r[2],r[2]=t;break;case"ZtoX":var t=r[0];r[0]=r[1],r[1]=r[2],r[2]=t;break;case"ZtoY":var t=r[1];r[1]=r[2],r[2]=a*t;}}function we(r,a){return!0!==ut.convertUpAxis||Ge===ut.upAxis?a:("X"===r?a="XtoY"===Je?-1*a:a:"Y"===r?a="YtoZ"===Je||"YtoX"===Je?-1*a:a:"Z"===r?a="ZtoY"===Je?-1*a:a:void 0,a)}function xe(r,a){var t=[r[a],r[a+1],r[a+2]];return be(t,-1),new THREE.Vector3(t[0],t[1],t[2])}function Ne(r){if(ut.convertUpAxis){var a=[r[0],r[4],r[8]];be(a,-1),r[0]=a[0],r[4]=a[1],r[8]=a[2],a=[r[1],r[5],r[9]],be(a,-1),r[1]=a[0],r[5]=a[1],r[9]=a[2],a=[r[2],r[6],r[10]],be(a,-1),r[2]=a[0],r[6]=a[1],r[10]=a[2],a=[r[0],r[1],r[2]],be(a,-1),r[0]=a[0],r[1]=a[1],r[2]=a[2],a=[r[4],r[5],r[6]],be(a,-1),r[4]=a[0],r[5]=a[1],r[6]=a[2],a=[r[8],r[9],r[10]],be(a,-1),r[8]=a[0],r[9]=a[1],r[10]=a[2],a=[r[3],r[7],r[11]],be(a,-1),r[3]=a[0],r[7]=a[1],r[11]=a[2]}return new THREE.Matrix4().set(r[0],r[1],r[2],r[3],r[4],r[5],r[6],r[7],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}function ke(t){if(-1<t&&3>t){t=Te(["X","Y","Z"][t]),t={X:0,Y:1,Z:2}[t]}return t}function Te(t){return ut.convertUpAxis&&("X"===t?"XtoY"===Je||"XtoZ"===Je||"YtoX"===Je?t="Y":"ZtoX"===Je?t="Z":void 0:"Y"===t?"XtoY"===Je||"YtoX"===Je||"ZtoX"===Je?t="X":"XtoZ"===Je||"YtoZ"===Je||"ZtoY"===Je?t="Z":void 0:"Z"===t?"XtoZ"===Je?t="X":"YtoZ"===Je||"ZtoX"===Je||"ZtoY"===Je?t="Y":void 0:void 0),t}var Ee=null,Ie=null,ot=null,Ve={},Xe={},it={},nt={},st={},lt={},dt={},ct={},pt={},ut={centerGeometry:!1,convertUpAxis:!1,subdivideFaces:!0,upAxis:"Y",defaultEnvMap:null},mt=1,Ge="Y",Je=null,We,gt,ht,yt,ft,Mt,xt,je,Et;return T.prototype.parse=function(r){this.id=r.getAttribute("id");for(var a=0,t;a<r.childNodes.length;a++)t=r.childNodes[a],"init_from"===t.nodeName&&(this.init_from=t.textContent);return this},E.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name"),this.type="none";for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"skin":this.skin=new _().parse(t),this.type=t.nodeName;break;case"morph":this.morph=new R().parse(t),this.type=t.nodeName;}return this},R.prototype.parse=function(o){var l={},i=[],s;for(this.method=o.getAttribute("method"),this.source=o.getAttribute("source").replace(/^#/,""),s=0;s<o.childNodes.length;s++){var t=o.childNodes[s];if(1==t.nodeType)switch(t.nodeName){case"source":var r=new F().parse(t);l[r.id]=r;break;case"targets":i=this.parseInputs(t);break;default:console.log(t.nodeName);}}for(s=0;s<i.length;s++){var a=i[s],r=l[a.source];switch(a.semantic){case"MORPH_TARGET":this.targets=r.read();break;case"MORPH_WEIGHT":this.weights=r.read();}}return this},R.prototype.parseInputs=function(r){for(var a=[],t=0,o;t<r.childNodes.length;t++)if(o=r.childNodes[t],1==o.nodeType)switch(o.nodeName){case"input":a.push(new z().parse(o));}return a},_.prototype.parse=function(l){var d={},s,t;this.source=l.getAttribute("source").replace(/^#/,""),this.invBindMatrices=[],this.joints=[],this.weights=[];for(var i=0,r;i<l.childNodes.length;i++)if(r=l.childNodes[i],1==r.nodeType)switch(r.nodeName){case"bind_shape_matrix":var a=pe(r.textContent);this.bindShapeMatrix=Ne(a);break;case"source":var n=new F().parse(r);d[n.id]=n;break;case"joints":s=r;break;case"vertex_weights":t=r;break;default:console.log(r.nodeName);}return this.parseJoints(s,d),this.parseWeights(t,d),this},_.prototype.parseJoints=function(o,n){for(var t=0,i;t<o.childNodes.length;t++)if(i=o.childNodes[t],1==i.nodeType)switch(i.nodeName){case"input":var s=new z().parse(i),r=n[s.source];"JOINT"===s.semantic?this.joints=r.read():"INV_BIND_MATRIX"===s.semantic&&(this.invBindMatrices=r.read());}},_.prototype.parseWeights=function(m,g){for(var t=[],r=0,a,i,s;r<m.childNodes.length;r++)if(s=m.childNodes[r],1==s.nodeType)switch(s.nodeName){case"input":t.push(new z().parse(s));break;case"v":a=de(s.textContent);break;case"vcount":i=de(s.textContent);}for(var n=0,r=0;r<i.length;r++){for(var o=i[r],h=[],l=0;l<o;l++){for(var c={},p=0;p<t.length;p++){var d=t[p],u=a[n+d.offset];switch(d.semantic){case"JOINT":c.joint=u;break;case"WEIGHT":c.weight=g[d.source].data[u];}}h.push(c),n+=t.length}for(var l=0;l<h.length;l++)h[l].index=r;this.weights.push(h)}},A.prototype.getChildById=function(r,a){for(var t=0,o;t<this.nodes.length;t++)if(o=this.nodes[t].getChildById(r,a),o)return o;return null},A.prototype.getChildBySid=function(r,a){for(var t=0,o;t<this.nodes.length;t++)if(o=this.nodes[t].getChildBySid(r,a),o)return o;return null},A.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name"),this.nodes=[];for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"node":this.nodes.push(new C().parse(t));}return this},C.prototype.getChannelForTransform=function(l){for(var d=0;d<this.channels.length;d++){var t=this.channels[d],s=t.target.split("/"),r=(s.shift(),s.shift()),c=0<=r.indexOf("."),p=0<=r.indexOf("("),u;if(c)s=r.split("."),r=s.shift();else if(p){u=r.split("("),r=u.shift();for(var m=0;m<u.length;m++)u[m]=parseInt(u[m].replace(/\)/,""))}if(r===l)return t.info={sid:r,dotSyntax:c,arrSyntax:p,arrIndices:u},t}return null},C.prototype.getChildById=function(r,a){if(this.id===r)return this;if(a)for(var t=0,o;t<this.nodes.length;t++)if(o=this.nodes[t].getChildById(r,a),o)return o;return null},C.prototype.getChildBySid=function(r,a){if(this.sid===r)return this;if(a)for(var t=0,o;t<this.nodes.length;t++)if(o=this.nodes[t].getChildBySid(r,a),o)return o;return null},C.prototype.getTransformBySid=function(r){for(var a=0;a<this.transforms.length;a++)if(this.transforms[a].sid===r)return this.transforms[a];return null},C.prototype.parse=function(a){var o;this.id=a.getAttribute("id"),this.sid=a.getAttribute("sid"),this.name=a.getAttribute("name"),this.type=a.getAttribute("type"),this.layer=a.getAttribute("layer"),this.type="JOINT"===this.type?this.type:"NODE",this.nodes=[],this.transforms=[],this.geometries=[],this.cameras=[],this.lights=[],this.controllers=[],this.matrix=new THREE.Matrix4;for(var t=0,i;t<a.childNodes.length;t++)if(i=a.childNodes[t],1==i.nodeType)switch(i.nodeName){case"node":this.nodes.push(new C().parse(i));break;case"instance_camera":this.cameras.push(new ie().parse(i));break;case"instance_controller":this.controllers.push(new k().parse(i));break;case"instance_geometry":this.geometries.push(new O().parse(i));break;case"instance_light":this.lights.push(new re().parse(i));break;case"instance_node":o=i.getAttribute("url").replace(/^#/,"");var n=m(o);n&&this.nodes.push(new C().parse(n));break;case"rotate":case"translate":case"scale":case"matrix":case"lookat":case"skew":this.transforms.push(new M().parse(i));break;case"extra":break;default:console.log(i.nodeName);}return this.channels=g(this),h(this),this.updateMatrix(),this},C.prototype.updateMatrix=function(){this.matrix.identity();for(var t=0;t<this.transforms.length;t++)this.transforms[t].apply(this.matrix)},M.prototype.parse=function(t){return this.sid=t.getAttribute("sid"),this.type=t.nodeName,this.data=pe(t.textContent),this.convert(),this},M.prototype.convert=function(){switch(this.type){case"matrix":this.obj=Ne(this.data);break;case"rotate":this.angle=THREE.Math.degToRad(this.data[3]);case"translate":be(this.data,-1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;case"scale":be(this.data,1),this.obj=new THREE.Vector3(this.data[0],this.data[1],this.data[2]);break;default:console.log("Can not convert Transform of type "+this.type);}},M.prototype.apply=function(){var r=new THREE.Matrix4;return function(a){switch(this.type){case"matrix":a.multiply(this.obj);break;case"translate":a.multiply(r.makeTranslation(this.obj.x,this.obj.y,this.obj.z));break;case"rotate":a.multiply(r.makeRotationAxis(this.obj,this.angle));break;case"scale":a.scale(this.obj);}}}(),M.prototype.update=function(r,a){var o=["X","Y","Z","ANGLE"];switch(this.type){case"matrix":if(!a)this.obj.copy(r);else if(1===a.length)switch(a[0]){case 0:this.obj.n11=r[0],this.obj.n21=r[1],this.obj.n31=r[2],this.obj.n41=r[3];break;case 1:this.obj.n12=r[0],this.obj.n22=r[1],this.obj.n32=r[2],this.obj.n42=r[3];break;case 2:this.obj.n13=r[0],this.obj.n23=r[1],this.obj.n33=r[2],this.obj.n43=r[3];break;case 3:this.obj.n14=r[0],this.obj.n24=r[1],this.obj.n34=r[2],this.obj.n44=r[3];}else if(2===a.length){var i="n"+(a[0]+1)+(a[1]+1);this.obj[i]=r}else console.log("Incorrect addressing of matrix in transform.");break;case"translate":case"scale":switch("[object Array]"===Object.prototype.toString.call(a)&&(a=o[a[0]]),a){case"X":this.obj.x=r;break;case"Y":this.obj.y=r;break;case"Z":this.obj.z=r;break;default:this.obj.x=r[0],this.obj.y=r[1],this.obj.z=r[2];}break;case"rotate":switch("[object Array]"===Object.prototype.toString.call(a)&&(a=o[a[0]]),a){case"X":this.obj.x=r;break;case"Y":this.obj.y=r;break;case"Z":this.obj.z=r;break;case"ANGLE":this.angle=THREE.Math.degToRad(r);break;default:this.obj.x=r[0],this.obj.y=r[1],this.obj.z=r[2],this.angle=THREE.Math.degToRad(r[3]);}}},k.prototype.parse=function(o){this.url=o.getAttribute("url").replace(/^#/,""),this.skeleton=[],this.instance_material=[];for(var n=0,t;n<o.childNodes.length;n++)if(t=o.childNodes[n],1===t.nodeType)switch(t.nodeName){case"skeleton":this.skeleton.push(t.textContent.replace(/^#/,""));break;case"bind_material":for(var i=t.querySelectorAll("instance_material"),s=0,r;s<i.length;s++)r=i[s],this.instance_material.push(new j().parse(r));}return this},j.prototype.parse=function(t){return this.symbol=t.getAttribute("symbol"),this.target=t.getAttribute("target").replace(/^#/,""),this},O.prototype.parse=function(o){this.url=o.getAttribute("url").replace(/^#/,""),this.instance_material=[];for(var n=0,t;n<o.childNodes.length;n++)if(t=o.childNodes[n],1==t.nodeType&&"bind_material"===t.nodeName){for(var i=t.querySelectorAll("instance_material"),s=0,r;s<i.length;s++)r=i[s],this.instance_material.push(new j().parse(r));break}return this},H.prototype.parse=function(r){this.id=r.getAttribute("id"),ve(this,r);for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"mesh":this.mesh=new I(this).parse(t);}return this},I.prototype.parse=function(a){this.primitives=[];for(var o=0,t;o<a.childNodes.length;o++)switch(t=a.childNodes[o],t.nodeName){case"source":le(t);break;case"vertices":this.vertices=new Z().parse(t);break;case"linestrips":this.primitives.push(new X().parse(t));break;case"triangles":this.primitives.push(new at().parse(t));break;case"polygons":this.primitives.push(new q().parse(t));break;case"polylist":this.primitives.push(new V().parse(t));}if(this.geometry3js=new THREE.Geometry,null===this.vertices)return this;for(var i=Ve[this.vertices.input.POSITION.source].data,o=0;o<i.length;o+=3)this.geometry3js.vertices.push(xe(i,o).clone());for(var o=0,n;o<this.primitives.length;o++)n=this.primitives[o],n.setVertices(this.vertices),this.handlePrimitive(n,this.geometry3js);return this.geometry3js.calcNormals&&(this.geometry3js.computeVertexNormals(),delete this.geometry3js.calcNormals),this},I.prototype.handlePrimitive=function(M,L){if(M instanceof X)return void(L.isLineStrip=!0);var t=M.p,c=M.inputs,p=0,d=0,u=[],f,i,s,r,a,n,o,h;for(f=0;f<c.length;f++){s=c[f];var l=s.offset+1;switch(d=d<l?l:d,s.semantic){case"TEXCOORD":u.push(s.set);}}for(var m=0;m<t.length;++m)for(var g=t[m],v=0;v<g.length;){var y=[],b=[],D=null,w=[];for(h=M.vcount?M.vcount.length?M.vcount[p++]:M.vcount:g.length/d,f=0;f<h;f++)for(i=0;i<c.length;i++)switch(s=c[i],n=Ve[s.source],r=g[v+f*d+s.offset],o=n.accessor.params.length,a=r*o,s.semantic){case"VERTEX":y.push(r);break;case"NORMAL":b.push(xe(n.data,a));break;case"TEXCOORD":D=D||{},void 0===D[s.set]&&(D[s.set]=[]),D[s.set].push(new THREE.Vector2(n.data[a],n.data[a+1]));break;case"COLOR":w.push(new THREE.Color().setRGB(n.data[a],n.data[a+1],n.data[a+2]));}if(0===b.length)if(s=this.vertices.input.NORMAL){n=Ve[s.source],o=n.accessor.params.length;for(var N=0,S=y.length;N<S;N++)b.push(xe(n.data,y[N]*o))}else L.calcNormals=!0;if(!D&&(D={},s=this.vertices.input.TEXCOORD)){u.push(s.set),n=Ve[s.source],o=n.accessor.params.length;for(var N=0,S=y.length;N<S;N++)a=y[N]*o,void 0===D[s.set]&&(D[s.set]=[]),D[s.set].push(new THREE.Vector2(n.data[a],1-n.data[a+1]))}if(0===w.length&&(s=this.vertices.input.COLOR)){n=Ve[s.source],o=n.accessor.params.length;for(var N=0,S=y.length;N<S;N++)a=y[N]*o,w.push(new THREE.Color().setRGB(n.data[a],n.data[a+1],n.data[a+2]))}var T=null,I=[],A,E;if(3===h)I.push(new THREE.Face3(y[0],y[1],y[2],b,w.length?w:new THREE.Color));else if(4===h)I.push(new THREE.Face3(y[0],y[1],y[3],b.length?[b[0].clone(),b[1].clone(),b[3].clone()]:[],w.length?[w[0],w[1],w[3]]:new THREE.Color)),I.push(new THREE.Face3(y[1],y[2],y[3],b.length?[b[1].clone(),b[2].clone(),b[3].clone()]:[],w.length?[w[1],w[2],w[3]]:new THREE.Color));else if(4<h&&ut.subdivideFaces){var _=w.length?w:new THREE.Color;for(i=1;i<h-1;)I.push(new THREE.Face3(y[0],y[i],y[i+1],b.length?[b[0].clone(),b[i++].clone(),b[i].clone()]:[],_))}if(I.length)for(var N=0,S=I.length;N<S;N++)for(T=I[N],T.daeMaterial=M.material,L.faces.push(T),i=0;i<u.length;i++)A=D[u[i]],E=4<h?[A[0],A[N+1],A[N+2]]:4===h?0===N?[A[0],A[1],A[3]]:[A[1].clone(),A[2],A[3].clone()]:[A[0],A[1],A[2]],void 0===L.faceVertexUvs[i]&&(L.faceVertexUvs[i]=[]),L.faceVertexUvs[i].push(E);else console.log("dropped face with vcount "+h+" for geometry with id: "+L.id);v+=d*h}},q.prototype.setVertices=function(r){for(var a=0;a<this.inputs.length;a++)this.inputs[a].source===r.id&&(this.inputs[a].source=r.input.POSITION.source)},q.prototype.parse=function(r){this.material=r.getAttribute("material"),this.count=me(r,"count",0);for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"input":this.inputs.push(new z().parse(r.childNodes[a]));break;case"vcount":this.vcount=de(t.textContent);break;case"p":this.p.push(de(t.textContent));break;case"ph":console.warn("polygon holes not yet supported!");}return this},V.prototype=Object.create(q.prototype),V.prototype.constructor=V,X.prototype=Object.create(q.prototype),X.prototype.constructor=X,at.prototype=Object.create(q.prototype),at.prototype.constructor=at,Y.prototype.parse=function(r){this.params=[],this.source=r.getAttribute("source"),this.count=me(r,"count",0),this.stride=me(r,"stride",0);for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],"param"===t.nodeName){var o={};o.name=t.getAttribute("name"),o.type=t.getAttribute("type"),this.params.push(o)}return this},Z.prototype.parse=function(r){this.id=r.getAttribute("id");for(var a=0;a<r.childNodes.length;a++)if("input"===r.childNodes[a].nodeName){var t=new z().parse(r.childNodes[a]);this.input[t.semantic]=t}return this},z.prototype.parse=function(t){return this.semantic=t.getAttribute("semantic"),this.source=t.getAttribute("source").replace(/^#/,""),this.set=me(t,"set",-1),this.offset=me(t,"offset",0),"TEXCOORD"===this.semantic&&0>this.set&&(this.set=0),this},F.prototype.parse=function(r){this.id=r.getAttribute("id");for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"bool_array":this.data=ce(t.textContent),this.type=t.nodeName;break;case"float_array":this.data=pe(t.textContent),this.type=t.nodeName;break;case"int_array":this.data=de(t.textContent),this.type=t.nodeName;break;case"IDREF_array":case"Name_array":this.data=ue(t.textContent),this.type=t.nodeName;break;case"technique_common":for(var o=0;o<t.childNodes.length;o++)if("accessor"===t.childNodes[o].nodeName){this.accessor=new Y().parse(t.childNodes[o]);break}}return this},F.prototype.read=function(){var a=[],o=this.accessor.params[0];switch(o.type){case"IDREF":case"Name":case"name":case"float":return this.data;case"float4x4":for(var t=0;t<this.data.length;t+=16){var i=this.data.slice(t,t+16),n=Ne(i);a.push(n)}break;default:console.log("ColladaLoader: Source: Read dont know how to read "+o.type+".");}return a},B.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name");for(var a=0;a<r.childNodes.length;a++)if("instance_effect"===r.childNodes[a].nodeName){this.instance_effect=new W().parse(r.childNodes[a]);break}return this},D.prototype.isColor=function(){return null===this.texture},D.prototype.isTexture=function(){return null!=this.texture},D.prototype.parse=function(r){"transparent"===r.nodeName&&(this.opaque=r.getAttribute("opaque"));for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"color":var o=pe(t.textContent);this.color=new THREE.Color,this.color.setRGB(o[0],o[1],o[2]),this.color.a=o[3];break;case"texture":this.texture=t.getAttribute("texture"),this.texcoord=t.getAttribute("texcoord"),this.texOpts={offsetU:0,offsetV:0,repeatU:1,repeatV:1,wrapU:1,wrapV:1},this.parseTexture(t);}return this},D.prototype.parseTexture=function(r){if(!r.childNodes)return this;r.childNodes[1]&&"extra"===r.childNodes[1].nodeName&&(r=r.childNodes[1],r.childNodes[1]&&"technique"===r.childNodes[1].nodeName&&(r=r.childNodes[1]));for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"offsetU":case"offsetV":case"repeatU":case"repeatV":this.texOpts[t.nodeName]=parseFloat(t.textContent);break;case"wrapU":case"wrapV":this.texOpts[t.nodeName]="TRUE"===t.textContent.toUpperCase()?1:parseInt(t.textContent);break;default:this.texOpts[t.nodeName]=t.textContent;}return this},P.prototype.parse=function(a){for(var o=0,t;o<a.childNodes.length;o++)if(t=a.childNodes[o],1==t.nodeType)switch(t.nodeName){case"emission":case"diffuse":case"specular":case"transparent":this[t.nodeName]=new D().parse(t);break;case"bump":var i=t.getAttribute("bumptype");i?"heightfield"===i.toLowerCase()?this.bump=new D().parse(t):"normalmap"===i.toLowerCase()?this.normal=new D().parse(t):(console.error("Shader.prototype.parse: Invalid value for attribute 'bumptype' ("+i+") - valid bumptypes are 'HEIGHTFIELD' and 'NORMALMAP' - defaulting to 'HEIGHTFIELD'"),this.bump=new D().parse(t)):(console.warn("Shader.prototype.parse: Attribute 'bumptype' missing from bump node - defaulting to 'HEIGHTFIELD'"),this.bump=new D().parse(t));break;case"shininess":case"reflectivity":case"index_of_refraction":case"transparency":var n=t.querySelectorAll("float");0<n.length&&(this[t.nodeName]=parseFloat(n[0].textContent));}return this.create(),this},P.prototype.create=function(){var u={},m=!1;if(void 0!==this.transparency&&void 0!==this.transparent){var t=(this.transparent,(this.transparent.color.r+this.transparent.color.g+this.transparent.color.b)/3*this.transparency);0<t&&(m=!0,u.transparent=!0,u.opacity=1-t)}var i={diffuse:"map",ambient:"lightMap",specular:"specularMap",emission:"emissionMap",bump:"bumpMap",normal:"normalMap"};for(var s in this)switch(s){case"ambient":case"emission":case"diffuse":case"specular":case"bump":case"normal":var r=this[s];if(r instanceof D)if(r.isTexture()){var a=r.texture,n=this.effect.sampler[a];if(void 0!==n&&void 0!==n.source){var o=this.effect.surface[n.source];if(void 0!==o){var g=Xe[o.init_from];if(g){var l=xt+g.init_from,p=THREE.Loader.Handlers.get(l),d;null===p?(d=new THREE.Texture,ge(d,l)):d=p.load(l),d.wrapS="MIRROR"===n.wrap_s?THREE.MirroredRepeatWrapping:"WRAP"===n.wrap_s||r.texOpts.wrapU?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,d.wrapT="MIRROR"===n.wrap_t?THREE.MirroredRepeatWrapping:"WRAP"===n.wrap_t||r.texOpts.wrapV?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,d.offset.x=r.texOpts.offsetU,d.offset.y=r.texOpts.offsetV,d.repeat.x=r.texOpts.repeatU,d.repeat.y=r.texOpts.repeatV,u[i[s]]=d,"emission"===s&&(u.emissive=16777215)}}}}else"diffuse"!==s&&m||("emission"===s?u.emissive=r.color.getHex():u[s]=r.color.getHex());break;case"shininess":u[s]=this[s];break;case"reflectivity":u[s]=this[s],0<u[s]&&(u.envMap=ut.defaultEnvMap),u.combine=THREE.MixOperation;break;case"index_of_refraction":u.refractionRatio=this[s],1!==this[s]&&(u.envMap=ut.defaultEnvMap);}switch(u.side=this.effect.doubleSided?THREE.DoubleSide:THREE.FrontSide,void 0!==u.diffuse&&(u.color=u.diffuse,delete u.diffuse),this.type){case"constant":void 0!=u.emissive&&(u.color=u.emissive),this.material=new THREE.MeshBasicMaterial(u);break;case"phong":case"blinn":this.material=new THREE.MeshPhongMaterial(u);break;case"lambert":default:this.material=new THREE.MeshLambertMaterial(u);}return this.material},U.prototype.parse=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"init_from":this.init_from=t.textContent;break;case"format":this.format=t.textContent;break;default:console.log("unhandled Surface prop: "+t.nodeName);}return this},G.prototype.parse=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"source":this.source=t.textContent;break;case"minfilter":this.minfilter=t.textContent;break;case"magfilter":this.magfilter=t.textContent;break;case"mipfilter":this.mipfilter=t.textContent;break;case"wrap_s":this.wrap_s=t.textContent;break;case"wrap_t":this.wrap_t=t.textContent;break;default:console.log("unhandled Sampler2D prop: "+t.nodeName);}return this},J.prototype.create=function(){if(null===this.shader)return null},J.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name"),ve(this,r),this.shader=null;for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"profile_COMMON":this.parseTechnique(this.parseProfileCOMMON(t));}return this},J.prototype.parseNewparam=function(r){for(var a=r.getAttribute("sid"),t=0,o;t<r.childNodes.length;t++)if(o=r.childNodes[t],1==o.nodeType)switch(o.nodeName){case"surface":this.surface[a]=new U(this).parse(o);break;case"sampler2D":this.sampler[a]=new G(this).parse(o);break;case"extra":break;default:console.log(o.nodeName);}},J.prototype.parseProfileCOMMON=function(a){for(var o=0,i,t;o<a.childNodes.length;o++)if(t=a.childNodes[o],1==t.nodeType)switch(t.nodeName){case"profile_COMMON":this.parseProfileCOMMON(t);break;case"technique":i=t;break;case"newparam":this.parseNewparam(t);break;case"image":var n=new T().parse(t);Xe[n.id]=n;break;case"extra":break;default:console.log(t.nodeName);}return i},J.prototype.parseTechnique=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"constant":case"lambert":case"blinn":case"phong":this.shader=new P(t.nodeName,this).parse(t);break;case"extra":this.parseExtra(t);}},J.prototype.parseExtra=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"technique":this.parseExtraTechnique(t);}},J.prototype.parseExtraTechnique=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"bump":this.shader.parse(r);}},W.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},Q.prototype.parse=function(o){this.id=o.getAttribute("id"),this.name=o.getAttribute("name"),this.source={};for(var n=0,t;n<o.childNodes.length;n++)if(t=o.childNodes[n],1==t.nodeType)switch(t.nodeName){case"animation":var i=new Q().parse(t);for(var s in i.source)this.source[s]=i.source[s];for(var r=0;r<i.channel.length;r++)this.channel.push(i.channel[r]),this.sampler.push(i.sampler[r]);break;case"source":var s=new F().parse(t);this.source[s.id]=s;break;case"sampler":this.sampler.push(new K(this).parse(t));break;case"channel":this.channel.push(new $(this).parse(t));}return this},$.prototype.parse=function(o){this.source=o.getAttribute("source").replace(/^#/,""),this.target=o.getAttribute("target");var l=this.target.split("/"),t=(l.shift(),l.shift()),i=0<=t.indexOf("."),s=0<=t.indexOf("(");if(i)l=t.split("."),this.sid=l.shift(),this.member=l.shift();else if(s){var r=t.split("(");this.sid=r.shift();for(var a=0;a<r.length;a++)r[a]=parseInt(r[a].replace(/\)/,""));this.arrIndices=r}else this.sid=t;return this.fullSid=t,this.dotSyntax=i,this.arrSyntax=s,this},K.prototype.parse=function(r){this.id=r.getAttribute("id"),this.inputs=[];for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"input":this.inputs.push(new z().parse(t));}return this},K.prototype.create=function(){for(var r=0;r<this.inputs.length;r++){var a=this.inputs[r],t=this.animation.source[a.source];switch(a.semantic){case"INPUT":this.input=t.read();break;case"OUTPUT":this.output=t.read(),this.strideOut=t.accessor.stride;break;case"INTERPOLATION":this.interpolation=t.read();break;case"IN_TANGENT":case"OUT_TANGENT":break;default:console.log(a.semantic);}}if(this.startTime=0,this.endTime=0,this.duration=0,this.input.length){this.startTime=1e8,this.endTime=-1e8;for(var r=0;r<this.input.length;r++)this.startTime=N(this.startTime,this.input[r]),this.endTime=L(this.endTime,this.input[r]);this.duration=this.endTime-this.startTime}},K.prototype.getData=function(a,o,t){var i;if("matrix"===a&&16===this.strideOut)i=this.output[o];else if(1<this.strideOut){i=[],o*=this.strideOut;for(var n=0;n<this.strideOut;++n)i[n]=this.output[o+n];3===this.strideOut?"rotate"===a||"translate"===a?be(i,-1):"scale"===a?be(i,1):void 0:4===this.strideOut&&"matrix"===a&&be(i,-1)}else i=this.output[o],t&&"translate"===a&&(i=we(t,i));return i},ee.prototype.addTarget=function(r,a,o,n){this.targets.push({sid:r,member:o,transform:a,data:n})},ee.prototype.apply=function(r){for(var a=0,t;a<this.targets.length;++a)t=this.targets[a],r&&t.sid!==r||t.transform.update(t.data,t.member)},ee.prototype.getTarget=function(r){for(var a=0;a<this.targets.length;++a)if(this.targets[a].sid===r)return this.targets[a];return null},ee.prototype.hasTarget=function(r){for(var a=0;a<this.targets.length;++a)if(this.targets[a].sid===r)return!0;return!1},ee.prototype.interpolate=function(d,p){for(var t=0,i=this.targets.length;t<i;t++){var s=this.targets[t],a=d.getTarget(s.sid),n;if("matrix"!==s.transform.type&&a){var r=(p-this.time)/(d.time-this.time),o=a.data,u=s.data;if(0>r&&(r=0),1<r&&(r=1),u.length){n=[];for(var l=0;l<u.length;++l)n[l]=u[l]+(o[l]-u[l])*r}else n=u+(o-u)*r}else n=s.data;s.transform.update(n,s.member)}},te.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name");for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"optics":this.parseOptics(t);}return this},te.prototype.parseOptics=function(l){for(var d=0;d<l.childNodes.length;d++)if("technique_common"===l.childNodes[d].nodeName)for(var t=l.childNodes[d],i=0;i<t.childNodes.length;i++)if(this.technique=t.childNodes[i].nodeName,"perspective"===this.technique)for(var s=t.childNodes[i],r=0,a;r<s.childNodes.length;r++)switch(a=s.childNodes[r],a.nodeName){case"yfov":this.yfov=a.textContent;break;case"xfov":this.xfov=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent;}else if("orthographic"===this.technique)for(var n=t.childNodes[i],r=0,a;r<n.childNodes.length;r++)switch(a=n.childNodes[r],a.nodeName){case"xmag":this.xmag=a.textContent;break;case"ymag":this.ymag=a.textContent;break;case"znear":this.znear=a.textContent;break;case"zfar":this.zfar=a.textContent;break;case"aspect_ratio":this.aspect_ratio=a.textContent;}return this},ie.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},se.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name");for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"technique_common":this.parseCommon(t);break;case"technique":this.parseTechnique(t);}return this},se.prototype.parseCommon=function(o){for(var l=0;l<o.childNodes.length;l++)switch(o.childNodes[l].nodeName){case"directional":case"point":case"spot":case"ambient":this.technique=o.childNodes[l].nodeName;for(var t=o.childNodes[l],i=0,s;i<t.childNodes.length;i++)switch(s=t.childNodes[i],s.nodeName){case"color":var r=pe(s.textContent);this.color=new THREE.Color(0),this.color.setRGB(r[0],r[1],r[2]),this.color.a=r[3];break;case"falloff_angle":this.falloff_angle=parseFloat(s.textContent);break;case"quadratic_attenuation":var a=parseFloat(s.textContent);this.distance=a?S(1/a):0;}}return this},se.prototype.parseTechnique=function(r){this.profile=r.getAttribute("profile");for(var a=0,t;a<r.childNodes.length;a++)switch(t=r.childNodes[a],t.nodeName){case"intensity":this.intensity=parseFloat(t.textContent);}return this},re.prototype.parse=function(t){return this.url=t.getAttribute("url").replace(/^#/,""),this},ae.prototype.parse=function(r){this.id=r.getAttribute("id"),this.name=r.getAttribute("name"),this.joints=[],this.links=[];for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"technique_common":this.parseCommon(t);}return this},ae.prototype.parseCommon=function(r){for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(r.childNodes[a].nodeName){case"joint":this.joints.push(new ne().parse(t));break;case"link":this.links.push(new oe().parse(t));}return this},ne.prototype.parse=function(l){this.sid=l.getAttribute("sid"),this.name=l.getAttribute("name"),this.axis=new THREE.Vector3,this.limits={min:0,max:0},this.type="",this.static=!1,this.zeroPosition=0,this.middlePosition=0;var d=l.querySelector("axis"),t=pe(d.textContent);this.axis=xe(t,0);var i=l.querySelector("limits min")?parseFloat(l.querySelector("limits min").textContent):-360,c=l.querySelector("limits max")?parseFloat(l.querySelector("limits max").textContent):360;this.limits={min:i,max:c};for(var p=["prismatic","revolute"],a=0,n;a<p.length;a++)n=p[a],l.querySelector(n)&&(this.type=n);return this.limits.min>=this.limits.max&&(this.static=!0),this.middlePosition=(this.limits.min+this.limits.max)/2,this},oe.prototype.parse=function(r){this.sid=r.getAttribute("sid"),this.name=r.getAttribute("name"),this.transforms=[],this.attachments=[];for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"attachment_full":this.attachments.push(new he().parse(t));break;case"rotate":case"translate":case"matrix":this.transforms.push(new M().parse(t));}return this},he.prototype.parse=function(r){this.joint=r.getAttribute("joint").split("/").pop(),this.links=[];for(var a=0,t;a<r.childNodes.length;a++)if(t=r.childNodes[a],1==t.nodeType)switch(t.nodeName){case"link":this.links.push(new oe().parse(t));break;case"rotate":case"translate":case"matrix":this.transforms.push(new M().parse(t));}return this},{load:Qe,parse:Ke,applySkin:l,geometries:st,options:ut}}},{}],43:[function(){THREE.GLTFLoader=function(){function y(t){this.manager=void 0===t?THREE.DefaultLoadingManager:t}function x(){var o={};return{get:function(t){return o[t]},add:function(t,a){o[t]=a},remove:function(t){delete o[t]},removeAll:function(){o={}},update:function(i,a){for(var r in o){var t=o[r];t.update&&t.update(i,a)}}}}function b(o){this.name=C.KHR_LIGHTS,this.lights={};var l=o.extensions&&o.extensions[C.KHR_LIGHTS]||{},a=l.lights||{};for(var d in a){var t=a[d],s=new THREE.Color().fromArray(t.color),i;switch(t.type){case"directional":i=new THREE.DirectionalLight(s),i.position.set(0,0,1);break;case"point":i=new THREE.PointLight(s);break;case"spot":i=new THREE.SpotLight(s),i.position.set(0,0,1);break;case"ambient":i=new THREE.AmbientLight(s);}i&&(void 0!==t.constantAttenuation&&(i.intensity=t.constantAttenuation),void 0!==t.linearAttenuation&&(i.distance=1/t.linearAttenuation),void 0!==t.quadraticAttenuation&&(i.decay=t.quadraticAttenuation),void 0!==t.fallOffAngle&&(i.angle=t.fallOffAngle),void 0!==t.fallOffExponent&&console.warn("THREE.GLTFLoader:: light.fallOffExponent not currently supported."),i.name=t.name||"light_"+d,this.lights[d]=i)}}function r(){this.name=C.KHR_MATERIALS_COMMON}function t(c){this.name=C.KHR_BINARY_GLTF,this.content=null,this.body=null;var p=new DataView(c,0,d);if(this.header={magic:N(new Uint8Array(c.slice(0,4))),version:p.getUint32(4,!0),length:p.getUint32(8,!0)},this.header.magic!==l)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(2>this.header.version)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use GLTFLoader instead.");for(var u=new DataView(c,d),r=0,t;r<u.byteLength;){t=u.getUint32(r,!0),r+=4;var m=u.getUint32(r,!0);if(r+=4,m===a.JSON){var s=new Uint8Array(c,d+r,t);this.content=N(s)}else if(m===a.BIN){var i=d+r;this.body=c.slice(i,i+t)}r+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function n(){return{name:C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,getMaterialType:function(){return THREE.ShaderMaterial},extendParams:function(o,i,a){var r=i.extensions[this.name],t=THREE.ShaderLib.standard,n=THREE.UniformsUtils.clone(t.uniforms),s=t.fragmentShader.replace("#include <specularmap_fragment>","").replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>","#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif").replace("#include <metalnessmap_pars_fragment>","#ifdef USE_GLOSSINESSMAP\n\tuniform sampler2D glossinessMap;\n#endif").replace("#include <roughnessmap_fragment>","vec3 specularFactor = specular;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tspecularFactor *= texelSpecular.rgb;\n#endif").replace("#include <metalnessmap_fragment>","float glossinessFactor = glossiness;\n#ifdef USE_GLOSSINESSMAP\n\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );\n\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture\n\tglossinessFactor *= texelGlossiness.a;\n#endif").replace("#include <lights_physical_fragment>","PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );\nmaterial.specularColor = specularFactor.rgb;");delete n.roughness,delete n.metalness,delete n.roughnessMap,delete n.metalnessMap,n.specular={value:new THREE.Color().setHex(1118481)},n.glossiness={value:.5},n.specularMap={value:null},n.glossinessMap={value:null},o.vertexShader=t.vertexShader,o.fragmentShader=s,o.uniforms=n,o.defines={STANDARD:""},o.color=new THREE.Color(1,1,1),o.opacity=1;var l=[];if(Array.isArray(r.diffuseFactor)){var c=r.diffuseFactor;o.color.fromArray(c),o.opacity=c[3]}if(void 0!==r.diffuseTexture&&l.push(a.assignTexture(o,"map",r.diffuseTexture.index)),o.emissive=new THREE.Color(0,0,0),o.glossiness=void 0===r.glossinessFactor?1:r.glossinessFactor,o.specular=new THREE.Color(1,1,1),Array.isArray(r.specularFactor)&&o.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var d=r.specularGlossinessTexture.index;l.push(a.assignTexture(o,"glossinessMap",d)),l.push(a.assignTexture(o,"specularMap",d))}return Promise.all(l)},createMaterial:function(t){var r=new THREE.ShaderMaterial({defines:t.defines,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,fog:!0,lights:!0,opacity:t.opacity,transparent:t.transparent});return r.isGLTFSpecularGlossinessMaterial=!0,r.color=t.color,r.map=void 0===t.map?null:t.map,r.lightMap=null,r.lightMapIntensity=1,r.aoMap=void 0===t.aoMap?null:t.aoMap,r.aoMapIntensity=1,r.emissive=t.emissive,r.emissiveIntensity=1,r.emissiveMap=void 0===t.emissiveMap?null:t.emissiveMap,r.bumpMap=void 0===t.bumpMap?null:t.bumpMap,r.bumpScale=1,r.normalMap=void 0===t.normalMap?null:t.normalMap,r.normalScale=new THREE.Vector2(1,1),r.displacementMap=null,r.displacementScale=1,r.displacementBias=0,r.specularMap=void 0===t.specularMap?null:t.specularMap,r.specular=t.specular,r.glossinessMap=void 0===t.glossinessMap?null:t.glossinessMap,r.glossiness=t.glossiness,r.alphaMap=null,r.envMap=void 0===t.envMap?null:t.envMap,r.envMapIntensity=1,r.refractionRatio=.98,r.extensions.derivatives=!0,r},refreshUniforms:function(s,d,a,r,t){var n=t.uniforms,i=t.defines;n.opacity.value=t.opacity,n.diffuse.value.copy(t.color),n.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),n.map.value=t.map,n.specularMap.value=t.specularMap,n.alphaMap.value=t.alphaMap,n.lightMap.value=t.lightMap,n.lightMapIntensity.value=t.lightMapIntensity,n.aoMap.value=t.aoMap,n.aoMapIntensity.value=t.aoMapIntensity;var o;if(t.map?o=t.map:t.specularMap?o=t.specularMap:t.displacementMap?o=t.displacementMap:t.normalMap?o=t.normalMap:t.bumpMap?o=t.bumpMap:t.glossinessMap?o=t.glossinessMap:t.alphaMap?o=t.alphaMap:t.emissiveMap&&(o=t.emissiveMap),void 0!==o){o.isWebGLRenderTarget&&(o=o.texture);var l=o.offset,p=o.repeat;n.offsetRepeat.value.set(l.x,l.y,p.x,p.y)}n.envMap.value=t.envMap,n.envMapIntensity.value=t.envMapIntensity,n.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,n.refractionRatio.value=t.refractionRatio,n.specular.value.copy(t.specular),n.glossiness.value=t.glossiness,n.glossinessMap.value=t.glossinessMap,n.emissiveMap.value=t.emissiveMap,n.bumpMap.value=t.bumpMap,n.normalMap.value=t.normalMap,n.displacementMap.value=t.displacementMap,n.displacementScale.value=t.displacementScale,n.displacementBias.value=t.displacementBias,null!==n.glossinessMap.value&&void 0===i.USE_GLOSSINESSMAP&&(i.USE_GLOSSINESSMAP="",i.USE_ROUGHNESSMAP=""),null===n.glossinessMap.value&&void 0!==i.USE_GLOSSINESSMAP&&(delete i.USE_GLOSSINESSMAP,delete i.USE_ROUGHNESSMAP)}}}function D(d,c,a){if(!d)return Promise.resolve();var r=[],n;if("[object Array]"===Object.prototype.toString.call(d)){n=[];for(var t=d.length,s=0,p;s<t;s++)p=c.call(a||this,d[s],s),p&&(r.push(p),p instanceof Promise?p.then(function(t,r){n[t]=r}.bind(this,s)):n[s]=p)}else for(var o in n={},d)if(d.hasOwnProperty(o)){var p=c.call(a||this,d[o],o);p&&(r.push(p),p instanceof Promise?p.then(function(t,r){n[t]=r}.bind(this,o)):n[o]=p)}return Promise.all(r).then(function(){return n})}function i(t,r){return"string"!=typeof t||""===t?"":/^(https?:)?\/\//i.test(t)?t:/^data:.*,.*$/i.test(t)?t:/^blob:.*$/i.test(t)?t:(r||"")+t}function N(i){if(void 0!==window.TextDecoder)return new TextDecoder().decode(i);for(var n="",a=0,r=i.length;a<r;a++)n+=o(i[a]);return n}function w(){return new THREE.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:THREE.FrontSide})}function u(g,y,a,r){var t=g.geometry,n=g.material,s=a.targets,i=t.morphAttributes;i.position=[],i.normal=[],n.morphTargets=!0;for(var o=0,l=s.length;o<l;o++){var u=s[o],M="morphTarget"+o,d,x;if(void 0!==u.POSITION){d=r.accessors[u.POSITION].clone();for(var p=t.attributes.position,f=0,m=d.count;f<m;f++)d.setXYZ(f,d.getX(f)+p.getX(f),d.getY(f)+p.getY(f),d.getZ(f)+p.getZ(f))}else d=t.attributes.position.clone();if(void 0!==u.NORMAL){n.morphNormals=!0,x=r.accessors[u.NORMAL].clone();for(var h=t.attributes.normal,f=0,m=x.count;f<m;f++)x.setXYZ(f,x.getX(f)+h.getX(f),x.getY(f)+h.getY(f),x.getZ(f)+h.getZ(f))}else x=t.attributes.normal.clone();u.TANGENT,d.name=M,x.name=M,i.position.push(d),i.normal.push(x)}if(g.updateMorphTargets(),void 0!==y.weights)for(var o=0,l=y.weights.length;o<l;o++)g.morphTargetInfluences[o]=y.weights[o]}function s(a,o,r){this.json=a||{},this.extensions=o||{},this.options=r||{},this.cache=new x}y.prototype={constructor:y,crossOrigin:"Anonymous",load:function(o,l,a,r){var t=this,n=this.path&&"string"==typeof this.path?this.path:THREE.Loader.prototype.extractUrlBase(o),s=new THREE.FileLoader(t.manager);s.setResponseType("arraybuffer"),s.load(o,function(a){try{t.parse(a,n,l,r)}catch(t){r(t.constructor===Error?t:new Error("THREE.GLTFLoader: Unable to parse model."))}},a,r)},setCrossOrigin:function(t){this.crossOrigin=t},setPath:function(t){this.path=t},parse:function(d,p,m,a){var o={},i;N(new Uint8Array(d,0,4))===l?(o[C.KHR_BINARY_GLTF]=new t(d),i=o[C.KHR_BINARY_GLTF].content):i=N(new Uint8Array(d));var c=JSON.parse(i);return void 0===c.asset||2>c.asset.version[0]?void a(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")):void(c.extensionsUsed&&(0<=c.extensionsUsed.indexOf(C.KHR_LIGHTS)&&(o[C.KHR_LIGHTS]=new b(c)),0<=c.extensionsUsed.indexOf(C.KHR_MATERIALS_COMMON)&&(o[C.KHR_MATERIALS_COMMON]=new r(c)),0<=c.extensionsUsed.indexOf(C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS)&&(o[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]=new n)),console.time("GLTFLoader"),new s(c,o,{path:p||this.path,crossOrigin:this.crossOrigin}).parse(function(o,i,n,s){console.timeEnd("GLTFLoader"),m({scene:o,scenes:i,cameras:n,animations:s})},a))}};var C={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_LIGHTS:"KHR_lights",KHR_MATERIALS_COMMON:"KHR_materials_common",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness"};r.prototype.getMaterialType=function(t){switch(t.extensions[this.name].type){case"commonBlinn":case"commonPhong":return THREE.MeshPhongMaterial;case"commonLambert":return THREE.MeshLambertMaterial;case"commonConstant":default:return THREE.MeshBasicMaterial;}},r.prototype.extendParams=function(o,l,a){var r=l.extensions[this.name],t=[],n=[];switch(r.type){case"commonBlinn":case"commonPhong":n.push("diffuseFactor","diffuseTexture","specularFactor","specularTexture","shininessFactor");break;case"commonLambert":n.push("diffuseFactor","diffuseTexture");}var s={};return n.forEach(function(t){void 0!==r[t]&&(s[t]=r[t])}),void 0!==s.diffuseFactor&&(o.color=new THREE.Color().fromArray(s.diffuseFactor),o.opacity=s.diffuseFactor[3]),void 0!==s.diffuseTexture&&t.push(a.assignTexture(o,"map",s.diffuseTexture.index)),void 0!==s.specularFactor&&(o.specular=new THREE.Color().fromArray(s.specularFactor)),void 0!==s.specularTexture&&t.push(a.assignTexture(o,"specularMap",s.specularTexture.index)),void 0!==s.shininessFactor&&(o.shininess=s.shininessFactor),Promise.all(t)};var l="glTF",d=12,a={JSON:1313821514,BIN:5130562},c={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},p=(Number,THREE.Matrix3,THREE.Matrix4,THREE.Vector2,THREE.Vector3,THREE.Vector4,THREE.Texture,{5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array}),m={9728:THREE.NearestFilter,9729:THREE.LinearFilter,9984:THREE.NearestMipMapNearestFilter,9985:THREE.LinearMipMapNearestFilter,9986:THREE.NearestMipMapLinearFilter,9987:THREE.LinearMipMapLinearFilter},h={33071:THREE.ClampToEdgeWrapping,33648:THREE.MirroredRepeatWrapping,10497:THREE.RepeatWrapping},f={6406:THREE.AlphaFormat,6407:THREE.RGBFormat,6408:THREE.RGBAFormat,6409:THREE.LuminanceFormat,6410:THREE.LuminanceAlphaFormat},g={5121:THREE.UnsignedByteType,32819:THREE.UnsignedShort4444Type,32820:THREE.UnsignedShort5551Type,33635:THREE.UnsignedShort565Type},M=(THREE.BackSide,THREE.FrontSide,THREE.NeverDepth,THREE.LessDepth,THREE.EqualDepth,THREE.LessEqualDepth,THREE.GreaterEqualDepth,THREE.NotEqualDepth,THREE.GreaterEqualDepth,THREE.AlwaysDepth,THREE.AddEquation,THREE.SubtractEquation,THREE.ReverseSubtractEquation,THREE.ZeroFactor,THREE.OneFactor,THREE.SrcColorFactor,THREE.OneMinusSrcColorFactor,THREE.SrcAlphaFactor,THREE.OneMinusSrcAlphaFactor,THREE.DstAlphaFactor,THREE.OneMinusDstAlphaFactor,THREE.DstColorFactor,THREE.OneMinusDstColorFactor,THREE.SrcAlphaSaturateFactor,{SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16}),S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I={CATMULLROMSPLINE:THREE.InterpolateSmooth,CUBICSPLINE:THREE.InterpolateSmooth,LINEAR:THREE.InterpolateLinear,STEP:THREE.InterpolateDiscrete},E={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};return s.prototype._withDependencies=function(i){for(var l={},a=0;a<i.length;a++){var r=i[a],t="load"+r.charAt(0).toUpperCase()+r.slice(1),n=this.cache.get(r);if(void 0!==n)l[r]=n;else if(this[t]){var s=this[t]();this.cache.add(r,s),l[r]=s}}return D(l,function(t){return t})},s.prototype.parse=function(d,t){var c=this.json;this.cache.removeAll(),this._withDependencies(["scenes","cameras","animations"]).then(function(r){var a=[];for(var t in r.scenes)a.push(r.scenes[t]);var n=void 0===c.scene?a[0]:r.scenes[c.scene],s=[];for(var t in r.cameras){var i=r.cameras[t];s.push(i)}var o=[];for(var t in r.animations)o.push(r.animations[t]);d(n,a,s,o)}).catch(t)},s.prototype.getDependency=function(o,i){var a=o+":"+i,r=this.cache.get(a);return r||(r=this["load"+o.charAt(0).toUpperCase()+o.slice(1)](i),this.cache.add(a,r)),r},s.prototype.loadBuffer=function(t){var o=this.json.buffers[t];if(o.type&&"arraybuffer"!==o.type)throw new Error("THREE.GLTFLoader: %s buffer type is not supported.",o.type);if(void 0===o.uri&&0===t)return Promise.resolve(this.extensions[C.KHR_BINARY_GLTF].body);var a=this.options;return new Promise(function(r){var n=new THREE.FileLoader;n.setResponseType("arraybuffer"),n.load(i(o.uri,a.path),r)})},s.prototype.loadBufferView=function(t){var o=this.json.bufferViews[t];return this.getDependency("buffer",o.buffer).then(function(a){var i=o.byteLength||0,r=o.byteOffset||0;return a.slice(r,r+i)})},s.prototype.loadAccessors=function(){var t=this,o=this.json;return D(o.accessors,function(a){return t.getDependency("bufferView",a.bufferView).then(function(r){var d=M[a.type],n=p[a.componentType],s=n.BYTES_PER_ELEMENT,i=o.bufferViews[a.bufferView].byteStride,l;if(i&&i!==s*d){l=new n(r);var t=new THREE.InterleavedBuffer(l,i/s);return new THREE.InterleavedBufferAttribute(t,d,a.byteOffset/s)}return l=new n(r,a.byteOffset,a.count*d),new THREE.BufferAttribute(l,d)})})},s.prototype.loadTexture=function(o){var d=this,c=this.json,p=this.options,r=window.URL||window.webkitURL,n=c.textures[o],t=c.images[n.source],s=t.uri,l=!1;return void 0!==t.bufferView&&(s=d.getDependency("bufferView",t.bufferView).then(function(o){l=!0;var i=new Blob([o],{type:t.mimeType});return s=r.createObjectURL(i)})),Promise.resolve(s).then(function(t){var o=THREE.Loader.Handlers.get(t)||new THREE.TextureLoader;return o.setCrossOrigin(p.crossOrigin),new Promise(function(a,r){o.load(i(t,p.path),a,void 0,r)})}).then(function(o){void 0!==l&&r.revokeObjectURL(s),o.flipY=!1,void 0!==n.name&&(o.name=n.name),o.format=void 0===n.format?THREE.RGBAFormat:f[n.format],void 0!==n.internalFormat&&o.format!==f[n.internalFormat]&&console.warn("THREE.GLTFLoader: Three.js does not support texture internalFormat which is different from texture format. internalFormat will be forced to be the same value as format."),o.type=void 0===n.type?THREE.UnsignedByteType:g[n.type];var i=c.samplers||{},a=i[n.sampler]||{};return o.magFilter=m[a.magFilter]||THREE.LinearFilter,o.minFilter=m[a.minFilter]||THREE.LinearMipMapLinearFilter,o.wrapS=h[a.wrapS]||THREE.RepeatWrapping,o.wrapT=h[a.wrapT]||THREE.RepeatWrapping,o})},s.prototype.assignTexture=function(t,o,a){return this.getDependency("texture",a).then(function(a){t[o]=a})},s.prototype.loadMaterials=function(){var m=this,t=this.json,s=this.extensions;return D(t.materials,function(r){var a={},n=r.extensions||{},g=[],i;if(n[C.KHR_MATERIALS_COMMON]){var t=s[C.KHR_MATERIALS_COMMON];i=t.getMaterialType(r),g.push(t.extendParams(a,r,m))}else if(n[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var o=s[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];i=o.getMaterialType(r),g.push(o.extendParams(a,r,m))}else if(void 0!==r.pbrMetallicRoughness){i=THREE.MeshStandardMaterial;var l=r.pbrMetallicRoughness;if(a.color=new THREE.Color(1,1,1),a.opacity=1,Array.isArray(l.baseColorFactor)){var u=l.baseColorFactor;a.color.fromArray(u),a.opacity=u[3]}if(void 0!==l.baseColorTexture&&g.push(m.assignTexture(a,"map",l.baseColorTexture.index)),a.metalness=void 0===l.metallicFactor?1:l.metallicFactor,a.roughness=void 0===l.roughnessFactor?1:l.roughnessFactor,void 0!==l.metallicRoughnessTexture){var c=l.metallicRoughnessTexture.index;g.push(m.assignTexture(a,"metalnessMap",c)),g.push(m.assignTexture(a,"roughnessMap",c))}}else i=THREE.MeshPhongMaterial;!0===r.doubleSided&&(a.side=THREE.DoubleSide);var p=r.alphaMode||E.OPAQUE;return a.transparent=p!==E.OPAQUE,void 0!==r.normalTexture&&g.push(m.assignTexture(a,"normalMap",r.normalTexture.index)),void 0!==r.occlusionTexture&&g.push(m.assignTexture(a,"aoMap",r.occlusionTexture.index)),void 0!==r.emissiveFactor&&(i===THREE.MeshBasicMaterial?a.color=new THREE.Color().fromArray(r.emissiveFactor):a.emissive=new THREE.Color().fromArray(r.emissiveFactor)),void 0!==r.emissiveTexture&&(i===THREE.MeshBasicMaterial?g.push(m.assignTexture(a,"map",r.emissiveTexture.index)):g.push(m.assignTexture(a,"emissiveMap",r.emissiveTexture.index))),Promise.all(g).then(function(){var t;return t=i===THREE.ShaderMaterial?s[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(a):new i(a),void 0!==r.name&&(t.name=r.name),t.normalScale.x=-1,t.userData=r.extras,t})})},s.prototype.loadGeometries=function(t){return this._withDependencies(["accessors"]).then(function(o){return D(t,function(a){var l=new THREE.BufferGeometry,r=a.attributes;for(var t in r){var n=r[t];if(void 0===n)return;var s=o.accessors[n];"POSITION"===t?l.addAttribute("position",s):"NORMAL"===t?l.addAttribute("normal",s):"TEXCOORD_0"===t||"TEXCOORD0"===t||"TEXCOORD"===t?l.addAttribute("uv",s):"TEXCOORD_1"===t?l.addAttribute("uv2",s):"COLOR_0"===t||"COLOR0"===t||"COLOR"===t?l.addAttribute("color",s):"WEIGHTS_0"===t||"WEIGHT"===t?l.addAttribute("skinWeight",s):"JOINTS_0"===t||"JOINT"===t?l.addAttribute("skinIndex",s):void 0}return void 0!==a.indices&&l.setIndex(o.accessors[a.indices]),l})})},s.prototype.loadMeshes=function(){var o=this,t=this.json;return this._withDependencies(["accessors","materials"]).then(function(d){return D(t.meshes,function(r){var a=new THREE.Group;void 0!==r.name&&(a.name=r.name),r.extras&&(a.userData=r.extras);var t=r.primitives||[];return o.loadGeometries(t).then(function(n){for(var m in t){var s=t[m],i=n[m],o=void 0===s.material?w():d.materials[s.material];o.aoMap&&void 0===i.attributes.uv2&&void 0!==i.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),i.addAttribute("uv2",new THREE.BufferAttribute(i.attributes.uv.array,2))),void 0!==i.attributes.color&&(o.vertexColors=THREE.VertexColors,o.needsUpdate=!0),void 0===i.attributes.normal&&(void 0===o.flatShading?o.shading=THREE.FlatShading:o.flatShading=!0);var l;if(s.mode===c.TRIANGLES||void 0===s.mode)l=new THREE.Mesh(i,o);else if(s.mode===c.TRIANGLE_STRIP)l=new THREE.Mesh(i,o),l.drawMode=THREE.TriangleStripDrawMode;else if(s.mode===c.TRIANGLE_FAN)l=new THREE.Mesh(i,o),l.drawMode=THREE.TriangleFanDrawMode;else if(s.mode===c.LINES)l=new THREE.LineSegments(i,o);else if(s.mode===c.LINE_STRIP)l=new THREE.Line(i,o);else if(s.mode===c.LINE_LOOP)l=new THREE.LineLoop(i,o);else{if(s.mode!==c.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: ",s.mode);l=new THREE.Points(i,o)}l.name=a.name+"_"+m,void 0!==s.targets&&u(l,r,s,d),s.extras&&(l.userData=s.extras),a.add(l)}return a})})})},s.prototype.loadCameras=function(){return D(this.json.cameras,function(o){var i=o[o.type],s;if(!i)return void console.warn("THREE.GLTFLoader: Missing camera parameters.");if("perspective"===o.type){var a=i.aspectRatio||1,t=i.yfov*a;s=new THREE.PerspectiveCamera(THREE.Math.radToDeg(t),a,i.znear||1,i.zfar||2e6)}else"orthographic"===o.type&&(s=new THREE.OrthographicCamera(i.xmag/-2,i.xmag/2,i.ymag/2,i.ymag/-2,i.znear,i.zfar));return void 0!==o.name&&(s.name=o.name),o.extras&&(s.userData=o.extras),s})},s.prototype.loadSkins=function(){var t=this.json;return this._withDependencies(["accessors"]).then(function(r){return D(t.skins,function(t){return{joints:t.joints,inverseBindMatrices:r.accessors[t.inverseBindMatrices]}})})},s.prototype.loadAnimations=function(){var t=this.json;return this._withDependencies(["accessors","nodes"]).then(function(r){return D(t.animations,function(a,g){var y=[];for(var t in a.channels){var n=a.channels[t],s=a.samplers[n.sampler];if(s){var i=n.target,o=void 0===i.node?i.id:i.node,l=void 0===a.parameters?s.input:a.parameters[s.input],u=void 0===a.parameters?s.output:a.parameters[s.output],c=r.accessors[l],p=r.accessors[u],M=r.nodes[o];if(M){M.updateMatrix(),M.matrixAutoUpdate=!0;var d;switch(S[i.path]){case S.weights:d=THREE.NumberKeyframeTrack;break;case S.rotation:d=THREE.QuaternionKeyframeTrack;break;case S.position:case S.scale:default:d=THREE.VectorKeyframeTrack;}var f=M.name?M.name:M.uuid;"CATMULLROMSPLINE"===s.interpolation&&console.warn("THREE.GLTFLoader: CATMULLROMSPLINE interpolation is not supported. Using CUBICSPLINE instead.");var m=void 0===s.interpolation?THREE.InterpolateLinear:I[s.interpolation],h=[];S[i.path]===S.weights?M.traverse(function(t){!0===t.isMesh&&!0===t.material.morphTargets&&h.push(t.name?t.name:t.uuid)}):h.push(f);for(var x=0,E=h.length;x<E;x++)y.push(new d(h[x]+"."+S[i.path],THREE.AnimationUtils.arraySlice(c.array,0),THREE.AnimationUtils.arraySlice(p.array,0),m))}}}var o=void 0===a.name?"animation_"+g:a.name;return new THREE.AnimationClip(o,void 0,y)})})},s.prototype.loadNodes=function(){var E=this.json,i=this.extensions,a=this,r=E.nodes||[];return(E.skins||[]).forEach(function(t){t.joints.forEach(function(t){r[t].isBone=!0})}),D(E.nodes,function(t){var o=new THREE.Matrix4,a=!0===t.isBone?new THREE.Bone:new THREE.Object3D;return void 0!==t.name&&(a.name=THREE.PropertyBinding.sanitizeNodeName(t.name)),t.extras&&(a.userData=t.extras),void 0===t.matrix?(void 0!==t.translation&&a.position.fromArray(t.translation),void 0!==t.rotation&&a.quaternion.fromArray(t.rotation),void 0!==t.scale&&a.scale.fromArray(t.scale)):(o.fromArray(t.matrix),a.applyMatrix(o)),a}).then(function(o){return a._withDependencies(["meshes","skins","cameras"]).then(function(t){return D(o,function(r,a){var n=E.nodes[a],s;if(void 0===n.mesh?void 0!==n.meshes&&(console.warn("THREE.GLTFLoader: Legacy glTF file detected. Nodes may have no more than one mesh."),s=n.meshes):s=[n.mesh],void 0!==s)for(var D in s){var l=s[D],u=t.meshes[l];if(void 0!==u){var c=u.clone(!1);for(var p in u.children){var d=u.children[p],f=d,m=d.material,h=d.geometry,T=d.morphTargetInfluences,v=d.userData,N=d.name,g=m;switch(d.type){case"LineSegments":d=new THREE.LineSegments(h,g);break;case"LineLoop":d=new THREE.LineLoop(h,g);break;case"Line":d=new THREE.Line(h,g);break;case"Points":d=new THREE.Points(h,g);break;default:d=new THREE.Mesh(h,g),d.drawMode=f.drawMode;}d.castShadow=!0,d.morphTargetInfluences=T,d.userData=v,d.name=N;var M;if(void 0!==n.skin&&(M=t.skins[n.skin]),M){g=m,g.skinning=!0,d=new THREE.SkinnedMesh(h,g),d.castShadow=!0,d.userData=v,d.name=N;for(var S=[],L=[],A=0,y=M.joints.length;A<y;A++){var w=M.joints[A],x=o[w];if(x){S.push(x);var _=M.inverseBindMatrices.array,b=new THREE.Matrix4().fromArray(_,16*A);L.push(b)}else console.warn("THREE.GLTFLoader: Joint \"%s\" could not be found.",w)}d.bind(new THREE.Skeleton(S,L),d.matrixWorld)}c.add(d)}r.add(c)}else console.warn("THREE.GLTFLoader: Could not find node \""+l+"\".")}if(void 0!==n.camera){var j=t.cameras[n.camera];r.add(j)}if(n.extensions&&n.extensions[C.KHR_LIGHTS]&&void 0!==n.extensions[C.KHR_LIGHTS].light){var I=i[C.KHR_LIGHTS].lights;r.add(I[n.extensions[C.KHR_LIGHTS].light])}return r})})})},s.prototype.loadScenes=function(){function d(a,r,t){var n=t[a];r.add(n);var s=p.nodes[a];if(s.children)for(var i=s.children,o=0,l=i.length,u;o<l;o++)u=i[o],d(u,n,t)}var p=this.json,t=this.extensions;return this._withDependencies(["nodes"]).then(function(r){return D(p.scenes,function(c){var a=new THREE.Scene;void 0!==c.name&&(a.name=c.name),c.extras&&(a.userData=c.extras);for(var n=c.nodes||[],s=0,i=n.length;s<i;s++)d(n[s],a,r.nodes);if(a.traverse(function(r){r.material&&r.material.isGLTFSpecularGlossinessMaterial&&(r.onBeforeRender=t[C.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms)}),c.extensions&&c.extensions[C.KHR_LIGHTS]&&void 0!==c.extensions[C.KHR_LIGHTS].light){var o=t[C.KHR_LIGHTS].lights;a.add(o[c.extensions[C.KHR_LIGHTS].light])}return a})})},y}()},{}],44:[function(){THREE.MTLLoader=function(r){this.manager=void 0===r?THREE.DefaultLoadingManager:r},THREE.MTLLoader.prototype={constructor:THREE.MTLLoader,load:function(o,n,t,a){var r=this,s=new THREE.FileLoader(this.manager);s.setPath(this.path),s.load(o,function(a){n(r.parse(a))},t,a)},setPath:function(r){this.path=r},setTexturePath:function(r){this.texturePath=r},setBaseUrl:function(r){console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(r)},setCrossOrigin:function(r){this.crossOrigin=r},setMaterialOptions:function(r){this.materialOptions=r},parse:function(d){for(var t=d.split("\n"),a={},u=/\s+/,r={},s=0,i;s<t.length;s++)if(i=t[s],i=i.trim(),0!==i.length&&"#"!==i.charAt(0)){var o=i.indexOf(" "),n=0<=o?i.substring(0,o):i;n=n.toLowerCase();var p=0<=o?i.substring(o+1):"";if(p=p.trim(),"newmtl"===n)a={name:p},r[p]=a;else if(a)if("ka"===n||"kd"===n||"ks"===n){var m=p.split(u,3);a[n]=[parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2])]}else a[n]=p}var l=new THREE.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return l.setCrossOrigin(this.crossOrigin),l.setManager(this.manager),l.setMaterials(r),l}},THREE.MTLLoader.MaterialCreator=function(r,t){this.baseUrl=r||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:THREE.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:THREE.RepeatWrapping},THREE.MTLLoader.MaterialCreator.prototype={constructor:THREE.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(r){this.crossOrigin=r},setManager:function(r){this.manager=r},setMaterials:function(r){this.materialsInfo=this.convert(r),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(l){if(!this.options)return l;var t={};for(var a in l){var d=l[a],r={};for(var s in t[a]=r,d){var i=!0,o=d[s],n=s.toLowerCase();"kd"===n||"ka"===n||"ks"===n?(this.options&&this.options.normalizeRGB&&(o=[o[0]/255,o[1]/255,o[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===o[0]&&0===o[1]&&0===o[2]&&(i=!1)):void 0,i&&(r[n]=o)}}return t},preload:function(){for(var r in this.materialsInfo)this.create(r)},getIndex:function(r){return this.nameLookup[r]},getAsArray:function(){var r=0;for(var t in this.materialsInfo)this.materialsArray[r]=this.create(t),this.nameLookup[t]=r,r++;return this.materialsArray},create:function(r){return void 0===this.materials[r]&&this.createMaterial_(r),this.materials[r]},createMaterial_:function(l){function d(r,t){return"string"!=typeof t||""===t?"":/^https?:\/\//i.test(t)?t:r+t}function a(r,t){if(!u[r]){var a=c.getTextureParams(t,u),i=c.loadTexture(d(c.baseUrl,a.url));i.repeat.copy(a.scale),i.offset.copy(a.offset),i.wrapS=c.wrap,i.wrapT=c.wrap,u[r]=i}}var c=this,r=this.materialsInfo[l],u={name:l,side:this.side};for(var i in r){var o=r[i],s;if(""!==o)switch(i.toLowerCase()){case"kd":u.color=new THREE.Color().fromArray(o);break;case"ks":u.specular=new THREE.Color().fromArray(o);break;case"map_kd":a("map",o);break;case"map_ks":a("specularMap",o);break;case"norm":a("normalMap",o);break;case"map_bump":case"bump":a("bumpMap",o);break;case"ns":u.shininess=parseFloat(o);break;case"d":s=parseFloat(o),1>s&&(u.opacity=s,u.transparent=!0);break;case"tr":s=parseFloat(o),0<s&&(u.opacity=1-s,u.transparent=!0);}}return this.materials[l]=new THREE.MeshPhongMaterial(u),this.materials[l]},getTextureParams:function(o,t){var a={scale:new THREE.Vector2(1,1),offset:new THREE.Vector2(0,0)},r=o.split(/\s+/),i;return i=r.indexOf("-bm"),0<=i&&(t.bumpScale=parseFloat(r[i+1]),r.splice(i,2)),i=r.indexOf("-s"),0<=i&&(a.scale.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),i=r.indexOf("-o"),0<=i&&(a.offset.set(parseFloat(r[i+1]),parseFloat(r[i+2])),r.splice(i,4)),a.url=r.join(" ").trim(),a},loadTexture:function(l,t,a,d,r){var s=THREE.Loader.Handlers.get(l),o=void 0===this.manager?THREE.DefaultLoadingManager:this.manager,n;return null===s&&(s=new THREE.TextureLoader(o)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),n=s.load(l,a,d,r),void 0!==t&&(n.mapping=t),n}}},{}],45:[function(){THREE.OBJLoader=function(){function k(){var r={objects:[],object:{},vertices:[],normals:[],uvs:[],materialLibraries:[],startObject:function(a,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=a,void(this.object.fromDeclaration=!1!==t);var o=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:a||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(a,t){var o=this._finalize(!1);o&&(o.inherited||0>=o.groupCount)&&this.materials.splice(o.index,1);var r={index:this.materials.length,name:a||"",mtllib:Array.isArray(t)&&0<t.length?t[t.length-1]:"",smooth:void 0===o?this.smooth:o.smooth,groupStart:void 0===o?0:o.groupEnd,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(r){var a={index:"number"==typeof r?r:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return a.clone=this.clone.bind(a),a}};return this.materials.push(r),r},currentMaterial:function(){if(0<this.materials.length)return this.materials[this.materials.length-1]},_finalize:function(a){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),a&&1<this.materials.length)for(var o=this.materials.length-1;0<=o;o--)0>=this.materials[o].groupCount&&this.materials.splice(o,1);return a&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},o&&o.name&&"function"==typeof o.clone){var r=o.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(a,t){var o=parseInt(a,10);return 3*(0<=o?o-1:o+t/3)},parseNormalIndex:function(a,t){var o=parseInt(a,10);return 3*(0<=o?o-1:o+t/3)},parseUVIndex:function(a,t){var o=parseInt(a,10);return 2*(0<=o?o-1:o+t/2)},addVertex:function(o,t,n){var r=this.vertices,i=this.object.geometry.vertices;i.push(r[o+0],r[o+1],r[o+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexLine:function(r){var t=this.vertices;this.object.geometry.vertices.push(t[r+0],t[r+1],t[r+2])},addNormal:function(o,t,n){var r=this.normals,i=this.object.geometry.normals;i.push(r[o+0],r[o+1],r[o+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addUV:function(o,t,n){var r=this.uvs,i=this.object.geometry.uvs;i.push(r[o+0],r[o+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addUVLine:function(r){var t=this.uvs;this.object.geometry.uvs.push(t[r+0],t[r+1])},addFace:function(d,t,g,r,i,a,s,n,o){var h=this.vertices.length,l=this.parseVertexIndex(d,h),u=this.parseVertexIndex(t,h),c=this.parseVertexIndex(g,h);if(this.addVertex(l,u,c),void 0!==r){var m=this.uvs.length;l=this.parseUVIndex(r,m),u=this.parseUVIndex(i,m),c=this.parseUVIndex(a,m),this.addUV(l,u,c)}if(void 0!==s){var y=this.normals.length;l=this.parseNormalIndex(s,y),u=s===n?l:this.parseNormalIndex(n,y),c=s===o?l:this.parseNormalIndex(o,y),this.addNormal(l,u,c)}},addLineGeometry:function(o,t){this.object.geometry.type="Line";for(var l=this.vertices.length,r=this.uvs.length,i=0,a=o.length;i<a;i++)this.addVertexLine(this.parseVertexIndex(o[i],l));for(var s=0,a=t.length;s<a;s++)this.addUVLine(this.parseUVIndex(t[s],r))}};return r.startObject("",!1),r}function t(r){this.manager=void 0===r?THREE.DefaultLoadingManager:r,this.materials=null}var u=/^[og]\s*(.+)?/,r=/^mtllib /,i=/^usemtl /;return t.prototype={constructor:t,load:function(o,n,t,r){var i=this,a=new THREE.FileLoader(i.manager);a.setPath(this.path),a.load(o,function(r){n(i.parse(r))},t,r)},setPath:function(r){this.path=r},setMaterials:function(r){return this.materials=r,this},parse:function(t){console.time("OBJLoader");var a=new k;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var s=t.split("\n"),n="",o="",h=[],l="function"==typeof"".trimLeft,Q=0,c=s.length;Q<c;Q++)if(n=s[Q],n=n.trimLeft(),0!==n.length&&"#"!==(o=n.charAt(0)))if("v"===o){var m=n.split(/\s+/);switch(m[0]){case"v":a.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vn":a.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":a.uvs.push(parseFloat(m[1]),parseFloat(m[2]));}}else if("f"===o){for(var f=n.substr(1).trim(),p=f.split(/\s+/),d=[],v=0,g=p.length,b;v<g;v++)if(b=p[v],0<b.length){var E=b.split("/");d.push(E)}for(var j=d[0],v=1,g=d.length-1;v<g;v++){var x=d[v],y=d[v+1];a.addFace(j[0],x[0],y[0],j[1],x[1],y[1],j[2],x[2],y[2])}}else if("l"===o){var L=n.substring(1).trim().split(" "),w=[],V=[];if(-1===n.indexOf("/"))w=L;else for(var I=0,H=L.length,M;I<H;I++)M=L[I].split("/"),""!==M[0]&&w.push(M[0]),""!==M[1]&&V.push(M[1]);a.addLineGeometry(w,V)}else if(null!==(h=u.exec(n))){var R=(" "+h[0].substr(1).trim()).substr(1);a.startObject(R)}else if(i.test(n))a.object.startMaterial(n.substring(7).trim(),a.materialLibraries);else if(r.test(n))a.materialLibraries.push(n.substring(7).trim());else{if("s"!==o){if("\0"===n)continue;throw new Error("Unexpected line: '"+n+"'")}if(h=n.split(" "),1<h.length){var T=h[1].trim().toLowerCase();a.object.smooth="0"!==T&&"off"!==T}else a.object.smooth=!0;var F=a.object.currentMaterial();F&&(F.smooth=a.object.smooth)}a.finalize();var A=new THREE.Group;A.materialLibraries=[].concat(a.materialLibraries);for(var Q=0,c=a.objects.length;Q<c;Q++){var B=a.objects[Q],U=B.geometry,O=B.materials,z="Line"===U.type;if(0!==U.vertices.length){var C=new THREE.BufferGeometry;C.addAttribute("position",new THREE.BufferAttribute(new Float32Array(U.vertices),3)),0<U.normals.length?C.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(U.normals),3)):C.computeVertexNormals(),0<U.uvs.length&&C.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(U.uvs),2));for(var N=[],S=0,_=O.length;S<_;S++){var G=O[S],F=void 0;if(null!==this.materials&&(F=this.materials.create(G.name),z&&F&&!(F instanceof THREE.LineBasicMaterial))){var D=new THREE.LineBasicMaterial;D.copy(F),F=D}F||(F=z?new THREE.LineBasicMaterial:new THREE.MeshPhongMaterial,F.name=G.name),F.flatShading=!G.smooth,N.push(F)}var Y;if(1<N.length){for(var S=0,_=O.length,G;S<_;S++)G=O[S],C.addGroup(G.groupStart,G.groupCount,S);Y=z?new THREE.LineSegments(C,N):new THREE.Mesh(C,N)}else Y=z?new THREE.LineSegments(C,N[0]):new THREE.Mesh(C,N[0]);Y.name=B.name,A.add(Y)}}return console.timeEnd("OBJLoader"),A}},t}()},{}],46:[function(t,r,a){a=r.exports=function(t){return t.replace(/^\s*|\s*$/g,"")},a.left=function(t){return t.replace(/^\s*/,"")},a.right=function(t){return t.replace(/\s*$/,"")}},{}],47:[function(t,r){r.exports={_args:[[{raw:"webvr-polyfill@0.9.38",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"0.9.38",spec:"0.9.38",type:"version"},"/Users/ngoke/Code/aframe"]],_from:"webvr-polyfill@0.9.38",_id:"webvr-polyfill@0.9.38",_inCache:!0,_location:"/webvr-polyfill",_nodeVersion:"8.1.4",_npmOperationalInternal:{host:"s3://npm-registry-packages",tmp:"tmp/webvr-polyfill-0.9.38.tgz_1505328121599_0.8887633208651096"},_npmUser:{name:"jsantell",email:"jsantell@gmail.com"},_npmVersion:"5.4.1",_phantomChildren:{},_requested:{raw:"webvr-polyfill@0.9.38",scope:null,escapedName:"webvr-polyfill",name:"webvr-polyfill",rawSpec:"0.9.38",spec:"0.9.38",type:"version"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.38.tgz",_shasum:"740099a2f268a56a0bf18181fb57395efad70712",_shrinkwrap:null,_spec:"webvr-polyfill@0.9.38",_where:"/Users/ngoke/Code/aframe",authors:["Boris Smus <boris@smus.com>","Brandon Jones <tojiro@gmail.com>","Jordan Santell <jordan@jsantell.com>"],bugs:{url:"https://github.com/googlevr/webvr-polyfill/issues"},dependencies:{},description:"Use WebVR today, on mobile or desktop, without requiring a special browser build.",devDependencies:{chai:"^3.5.0",jsdom:"^9.12.0",mocha:"^3.2.0",semver:"^5.3.0",webpack:"^2.6.1","webpack-dev-server":"^2.4.5"},directories:{},dist:{integrity:"sha512-HABweqWYE0suk6P5TdHlagJK56HSecB5xKj6ZshocrxSj9UmNOCjCRv4vFYHCaFZKtuKWa8niRHVbJ3Vo7JYDg==",shasum:"740099a2f268a56a0bf18181fb57395efad70712",tarball:"https://registry.npmjs.org/webvr-polyfill/-/webvr-polyfill-0.9.38.tgz"},gitHead:"8063169c6fc52342ebe5524d7f217987f9aa9cab",homepage:"https://github.com/googlevr/webvr-polyfill",keywords:["vr","webvr"],license:"Apache-2.0",main:"src/node-entry",maintainers:[{name:"jsantell",email:"jsantell@gmail.com"},{name:"toji",email:"tojiro@gmail.com"},{name:"smus",email:"boris@smus.com"}],name:"webvr-polyfill",optionalDependencies:{},readme:"ERROR: No README data found!",repository:{type:"git",url:"git+https://github.com/googlevr/webvr-polyfill.git"},scripts:{build:"webpack",start:"npm run watch",test:"mocha",watch:"webpack-dev-server"},version:"0.9.38"}},{}],48:[function(t,r){function a(){this.isPolyfilled=!0,this.displayId=l++,this.displayName="webvr-polyfill displayName",this.depthNear=.01,this.depthFar=1e4,this.isConnected=!0,this.isPresenting=!1,this.capabilities={hasPosition:!1,hasOrientation:!1,hasExternalDisplay:!1,canPresent:!1,maxLayers:1},this.stageParameters=null,this.waitingForPresent_=!1,this.layer_=null,this.fullscreenElement_=null,this.fullscreenWrapper_=null,this.fullscreenElementCachedStyle_=null,this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null,this.wakelock_=new s}function o(){this.isPolyfilled=!0,this.hardwareUnitId="webvr-polyfill hardwareUnitId",this.deviceId="webvr-polyfill deviceId",this.deviceName="webvr-polyfill deviceName"}function i(){}function n(){}var d=t("./util.js"),s=t("./wakelock.js"),l=1e3,c=!1,m=[0,0,0.5,1],g=[0.5,0,0.5,1];a.prototype.getFrameData=function(t){return d.frameDataFromPose(t,this.getPose(),this)},a.prototype.getPose=function(){return this.getImmediatePose()},a.prototype.requestAnimationFrame=function(t){return window.requestAnimationFrame(t)},a.prototype.cancelAnimationFrame=function(t){return window.cancelAnimationFrame(t)},a.prototype.wrapForFullscreen=function(a){if(d.isIOS())return a;if(!this.fullscreenWrapper_){this.fullscreenWrapper_=document.createElement("div");var o=["height: "+N(screen.height,screen.width)+"px !important","top: 0 !important","left: 0 !important","right: 0 !important","border: 0","margin: 0","padding: 0","z-index: 999999 !important","position: fixed"];this.fullscreenWrapper_.setAttribute("style",o.join("; ")+";"),this.fullscreenWrapper_.classList.add("webvr-polyfill-fullscreen-wrapper")}if(this.fullscreenElement_==a)return this.fullscreenWrapper_;this.removeFullscreenWrapper(),this.fullscreenElement_=a;var r=this.fullscreenElement_.parentElement;r.insertBefore(this.fullscreenWrapper_,this.fullscreenElement_),r.removeChild(this.fullscreenElement_),this.fullscreenWrapper_.insertBefore(this.fullscreenElement_,this.fullscreenWrapper_.firstChild),this.fullscreenElementCachedStyle_=this.fullscreenElement_.getAttribute("style");var t=this;return function(){if(t.fullscreenElement_){var r=["position: absolute","top: 0","left: 0","width: "+L(screen.width,screen.height)+"px","height: "+N(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0"];t.fullscreenElement_.setAttribute("style",r.join("; ")+";")}}(),this.fullscreenWrapper_},a.prototype.removeFullscreenWrapper=function(){if(this.fullscreenElement_){var t=this.fullscreenElement_;this.fullscreenElementCachedStyle_?t.setAttribute("style",this.fullscreenElementCachedStyle_):t.removeAttribute("style"),this.fullscreenElement_=null,this.fullscreenElementCachedStyle_=null;var a=this.fullscreenWrapper_.parentElement;return this.fullscreenWrapper_.removeChild(t),a.insertBefore(t,this.fullscreenWrapper_),a.removeChild(this.fullscreenWrapper_),t}},a.prototype.requestPresent=function(y){var f=this.isPresenting,r=this;return y instanceof Array||(c||(console.warn("Using a deprecated form of requestPresent. Should pass in an array of VRLayers."),c=!0),y=[y]),new Promise(function(t,n){if(!r.capabilities.canPresent)return void n(new Error("VRDisplay is not capable of presenting."));if(0==y.length||y.length>r.capabilities.maxLayers)return void n(new Error("Invalid number of layers."));var i=y[0];if(!i.source)return void t();var s=i.leftBounds||m,l=i.rightBounds||g;if(f){var a=r.layer_;a.source!==i.source&&(a.source=i.source);for(var o=0;4>o;o++)a.leftBounds[o]=s[o],a.rightBounds[o]=l[o];return void t()}if(r.layer_={predistorted:i.predistorted,source:i.source,leftBounds:s.slice(0),rightBounds:l.slice(0)},r.waitingForPresent_=!1,r.layer_&&r.layer_.source){var c=r.wrapForFullscreen(r.layer_.source),u=function(){var a=d.getFullscreenElement();r.isPresenting=c===a,r.isPresenting?(screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape-primary").catch(function(t){console.error("screen.orientation.lock() failed due to",t.message)}),r.waitingForPresent_=!1,r.beginPresent_(),t()):(screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),r.removeFullscreenWrapper(),r.wakelock_.release(),r.endPresent_(),r.removeFullscreenListeners_()),r.fireVRDisplayPresentChange_()},p=function(){r.waitingForPresent_&&(r.removeFullscreenWrapper(),r.removeFullscreenListeners_(),r.wakelock_.release(),r.waitingForPresent_=!1,r.isPresenting=!1,n(new Error("Unable to present.")))};r.addFullscreenListeners_(c,u,p),d.requestFullscreen(c)?(r.wakelock_.request(),r.waitingForPresent_=!0):(d.isIOS()||d.isWebViewAndroid())&&(r.wakelock_.request(),r.isPresenting=!0,r.beginPresent_(),r.fireVRDisplayPresentChange_(),t())}r.waitingForPresent_||d.isIOS()||(d.exitFullscreen(),n(new Error("Unable to present.")))})},a.prototype.exitPresent=function(){var a=this.isPresenting,o=this;return this.isPresenting=!1,this.layer_=null,this.wakelock_.release(),new Promise(function(r,t){a?(!d.exitFullscreen()&&d.isIOS()&&(o.endPresent_(),o.fireVRDisplayPresentChange_()),d.isWebViewAndroid()&&(o.removeFullscreenWrapper(),o.removeFullscreenListeners_(),o.endPresent_(),o.fireVRDisplayPresentChange_()),r()):t(new Error("Was not presenting to VRDisplay."))})},a.prototype.getLayers=function(){return this.layer_?[this.layer_]:[]},a.prototype.fireVRDisplayPresentChange_=function(){var t=new CustomEvent("vrdisplaypresentchange",{detail:{display:this}});window.dispatchEvent(t)},a.prototype.fireVRDisplayConnect_=function(){var t=new CustomEvent("vrdisplayconnect",{detail:{display:this}});window.dispatchEvent(t)},a.prototype.addFullscreenListeners_=function(a,o,r){this.removeFullscreenListeners_(),this.fullscreenEventTarget_=a,this.fullscreenChangeHandler_=o,this.fullscreenErrorHandler_=r,o&&(document.fullscreenEnabled?a.addEventListener("fullscreenchange",o,!1):document.webkitFullscreenEnabled?a.addEventListener("webkitfullscreenchange",o,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenchange",o,!1):document.msFullscreenEnabled&&a.addEventListener("msfullscreenchange",o,!1)),r&&(document.fullscreenEnabled?a.addEventListener("fullscreenerror",r,!1):document.webkitFullscreenEnabled?a.addEventListener("webkitfullscreenerror",r,!1):document.mozFullScreenEnabled?document.addEventListener("mozfullscreenerror",r,!1):document.msFullscreenEnabled&&a.addEventListener("msfullscreenerror",r,!1))},a.prototype.removeFullscreenListeners_=function(){if(this.fullscreenEventTarget_){var a=this.fullscreenEventTarget_;if(this.fullscreenChangeHandler_){var o=this.fullscreenChangeHandler_;a.removeEventListener("fullscreenchange",o,!1),a.removeEventListener("webkitfullscreenchange",o,!1),document.removeEventListener("mozfullscreenchange",o,!1),a.removeEventListener("msfullscreenchange",o,!1)}if(this.fullscreenErrorHandler_){var r=this.fullscreenErrorHandler_;a.removeEventListener("fullscreenerror",r,!1),a.removeEventListener("webkitfullscreenerror",r,!1),document.removeEventListener("mozfullscreenerror",r,!1),a.removeEventListener("msfullscreenerror",r,!1)}this.fullscreenEventTarget_=null,this.fullscreenChangeHandler_=null,this.fullscreenErrorHandler_=null}},a.prototype.beginPresent_=function(){},a.prototype.endPresent_=function(){},a.prototype.submitFrame=function(){},a.prototype.getEyeParameters=function(){return null},i.prototype=new o,n.prototype=new o,r.exports.VRFrameData=function(){this.leftProjectionMatrix=new Float32Array(16),this.leftViewMatrix=new Float32Array(16),this.rightProjectionMatrix=new Float32Array(16),this.rightViewMatrix=new Float32Array(16),this.pose=null},r.exports.VRDisplay=a,r.exports.VRDevice=o,r.exports.HMDVRDevice=i,r.exports.PositionSensorVRDevice=n},{"./util.js":68,"./wakelock.js":70}],49:[function(t,r){function a(t){this.gl=t,this.ctxAttribs=t.getContextAttributes(),this.meshWidth=20,this.meshHeight=20,this.bufferScale=window.WebVRConfig.BUFFER_SCALE,this.bufferWidth=t.drawingBufferWidth,this.bufferHeight=t.drawingBufferHeight,this.realBindFramebuffer=t.bindFramebuffer,this.realEnable=t.enable,this.realDisable=t.disable,this.realColorMask=t.colorMask,this.realClearColor=t.clearColor,this.realViewport=t.viewport,p.isIOS()||(this.realCanvasWidth=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"width"),this.realCanvasHeight=Object.getOwnPropertyDescriptor(t.canvas.__proto__,"height")),this.isPatched=!1,this.lastBoundFramebuffer=null,this.cullFace=!1,this.depthTest=!1,this.blend=!1,this.scissorTest=!1,this.stencilTest=!1,this.viewport=[0,0,0,0],this.colorMask=[!0,!0,!0,!0],this.clearColor=[0,0,0,0],this.attribs={position:0,texCoord:1},this.program=p.linkProgram(t,i,s,this.attribs),this.uniforms=p.getProgramUniforms(t,this.program),this.viewportOffsetScale=new Float32Array(8),this.setTextureBounds(),this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.indexCount=0,this.renderTarget=t.createTexture(),this.framebuffer=t.createFramebuffer(),this.depthStencilBuffer=null,this.depthBuffer=null,this.stencilBuffer=null,this.ctxAttribs.depth&&this.ctxAttribs.stencil?this.depthStencilBuffer=t.createRenderbuffer():this.ctxAttribs.depth?this.depthBuffer=t.createRenderbuffer():this.ctxAttribs.stencil&&(this.stencilBuffer=t.createRenderbuffer()),this.patch(),this.onResize(),window.WebVRConfig.CARDBOARD_UI_DISABLED||(this.cardboardUI=new o(t))}var o=t("./cardboard-ui.js"),p=t("./util.js"),n=t("./deps/wglu-preserve-state.js"),i="attribute vec2 position;\nattribute vec3 texCoord;\nvarying vec2 vTexCoord;\nuniform vec4 viewportOffsetScale[2];\nvoid main() {\n  vec4 viewport = viewportOffsetScale[int(texCoord.z)];\n  vTexCoord = (texCoord.xy * viewport.zw) + viewport.xy;\n  gl_Position = vec4( position, 1.0, 1.0 );\n}",s="precision mediump float;\nuniform sampler2D diffuse;\nvarying vec2 vTexCoord;\nvoid main() {\n  gl_FragColor = texture2D(diffuse, vTexCoord);\n}";a.prototype.destroy=function(){var t=this.gl;this.unpatch(),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer),t.deleteTexture(this.renderTarget),t.deleteFramebuffer(this.framebuffer),this.depthStencilBuffer&&t.deleteRenderbuffer(this.depthStencilBuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer),this.stencilBuffer&&t.deleteRenderbuffer(this.stencilBuffer),this.cardboardUI&&this.cardboardUI.destroy()},a.prototype.onResize=function(){var a=this.gl,o=this,r=[a.RENDERBUFFER_BINDING,a.TEXTURE_BINDING_2D,a.TEXTURE0];n(a,r,function(t){o.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),o.scissorTest&&o.realDisable.call(t,t.SCISSOR_TEST),o.realColorMask.call(t,!0,!0,!0,!0),o.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),o.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),o.realBindFramebuffer.call(t,t.FRAMEBUFFER,o.framebuffer),t.bindTexture(t.TEXTURE_2D,o.renderTarget),t.texImage2D(t.TEXTURE_2D,0,o.ctxAttribs.alpha?t.RGBA:t.RGB,o.bufferWidth,o.bufferHeight,0,o.ctxAttribs.alpha?t.RGBA:t.RGB,t.UNSIGNED_BYTE,null),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,o.renderTarget,0),o.ctxAttribs.depth&&o.ctxAttribs.stencil?(t.bindRenderbuffer(t.RENDERBUFFER,o.depthStencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,o.bufferWidth,o.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,o.depthStencilBuffer)):o.ctxAttribs.depth?(t.bindRenderbuffer(t.RENDERBUFFER,o.depthBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_COMPONENT16,o.bufferWidth,o.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,o.depthBuffer)):o.ctxAttribs.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,o.stencilBuffer),t.renderbufferStorage(t.RENDERBUFFER,t.STENCIL_INDEX8,o.bufferWidth,o.bufferHeight),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.STENCIL_ATTACHMENT,t.RENDERBUFFER,o.stencilBuffer)),!t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE&&console.error("Framebuffer incomplete!"),o.realBindFramebuffer.call(t,t.FRAMEBUFFER,o.lastBoundFramebuffer),o.scissorTest&&o.realEnable.call(t,t.SCISSOR_TEST),o.realColorMask.apply(t,o.colorMask),o.realViewport.apply(t,o.viewport),o.realClearColor.apply(t,o.clearColor)}),this.cardboardUI&&this.cardboardUI.onResize()},a.prototype.patch=function(){if(!this.isPatched){var o=this,a=this.gl.canvas,n=this.gl;p.isIOS()||(a.width=p.getScreenWidth()*this.bufferScale,a.height=p.getScreenHeight()*this.bufferScale,Object.defineProperty(a,"width",{configurable:!0,enumerable:!0,get:function(){return o.bufferWidth},set:function(r){o.bufferWidth=r,o.realCanvasWidth.set.call(a,r),o.onResize()}}),Object.defineProperty(a,"height",{configurable:!0,enumerable:!0,get:function(){return o.bufferHeight},set:function(r){o.bufferHeight=r,o.realCanvasHeight.set.call(a,r),o.onResize()}})),this.lastBoundFramebuffer=n.getParameter(n.FRAMEBUFFER_BINDING),null==this.lastBoundFramebuffer&&(this.lastBoundFramebuffer=this.framebuffer,this.gl.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer)),this.gl.bindFramebuffer=function(t,r){o.lastBoundFramebuffer=r||o.framebuffer,o.realBindFramebuffer.call(n,t,o.lastBoundFramebuffer)},this.cullFace=n.getParameter(n.CULL_FACE),this.depthTest=n.getParameter(n.DEPTH_TEST),this.blend=n.getParameter(n.BLEND),this.scissorTest=n.getParameter(n.SCISSOR_TEST),this.stencilTest=n.getParameter(n.STENCIL_TEST),n.enable=function(t){t===n.CULL_FACE?o.cullFace=!0:t===n.DEPTH_TEST?o.depthTest=!0:t===n.BLEND?o.blend=!0:t===n.SCISSOR_TEST?o.scissorTest=!0:t===n.STENCIL_TEST?o.stencilTest=!0:void 0;o.realEnable.call(n,t)},n.disable=function(t){t===n.CULL_FACE?o.cullFace=!1:t===n.DEPTH_TEST?o.depthTest=!1:t===n.BLEND?o.blend=!1:t===n.SCISSOR_TEST?o.scissorTest=!1:t===n.STENCIL_TEST?o.stencilTest=!1:void 0;o.realDisable.call(n,t)},this.colorMask=n.getParameter(n.COLOR_WRITEMASK),n.colorMask=function(t,r,i,a){o.colorMask[0]=t,o.colorMask[1]=r,o.colorMask[2]=i,o.colorMask[3]=a,o.realColorMask.call(n,t,r,i,a)},this.clearColor=n.getParameter(n.COLOR_CLEAR_VALUE),n.clearColor=function(t,r,i,a){o.clearColor[0]=t,o.clearColor[1]=r,o.clearColor[2]=i,o.clearColor[3]=a,o.realClearColor.call(n,t,r,i,a)},this.viewport=n.getParameter(n.VIEWPORT),n.viewport=function(t,r,i,a){o.viewport[0]=t,o.viewport[1]=r,o.viewport[2]=i,o.viewport[3]=a,o.realViewport.call(n,t,r,i,a)},this.isPatched=!0,p.safariCssSizeWorkaround(a)}},a.prototype.unpatch=function(){if(this.isPatched){var t=this.gl,a=this.gl.canvas;p.isIOS()||(Object.defineProperty(a,"width",this.realCanvasWidth),Object.defineProperty(a,"height",this.realCanvasHeight)),a.width=this.bufferWidth,a.height=this.bufferHeight,t.bindFramebuffer=this.realBindFramebuffer,t.enable=this.realEnable,t.disable=this.realDisable,t.colorMask=this.realColorMask,t.clearColor=this.realClearColor,t.viewport=this.realViewport,this.lastBoundFramebuffer==this.framebuffer&&t.bindFramebuffer(t.FRAMEBUFFER,null),this.isPatched=!1,setTimeout(function(){p.safariCssSizeWorkaround(a)},1)}},a.prototype.setTextureBounds=function(t,a){t||(t=[0,0,0.5,1]),a||(a=[0.5,0,0.5,1]),this.viewportOffsetScale[0]=t[0],this.viewportOffsetScale[1]=t[1],this.viewportOffsetScale[2]=t[2],this.viewportOffsetScale[3]=t[3],this.viewportOffsetScale[4]=a[0],this.viewportOffsetScale[5]=a[1],this.viewportOffsetScale[6]=a[2],this.viewportOffsetScale[7]=a[3]},a.prototype.submitFrame=function(){var a=this.gl,o=this,r=[];if(window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||r.push(a.CURRENT_PROGRAM,a.ARRAY_BUFFER_BINDING,a.ELEMENT_ARRAY_BUFFER_BINDING,a.TEXTURE_BINDING_2D,a.TEXTURE0),n(a,r,function(t){o.realBindFramebuffer.call(t,t.FRAMEBUFFER,null),o.cullFace&&o.realDisable.call(t,t.CULL_FACE),o.depthTest&&o.realDisable.call(t,t.DEPTH_TEST),o.blend&&o.realDisable.call(t,t.BLEND),o.scissorTest&&o.realDisable.call(t,t.SCISSOR_TEST),o.stencilTest&&o.realDisable.call(t,t.STENCIL_TEST),o.realColorMask.call(t,!0,!0,!0,!0),o.realViewport.call(t,0,0,t.drawingBufferWidth,t.drawingBufferHeight),(o.ctxAttribs.alpha||p.isIOS())&&(o.realClearColor.call(t,0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)),t.useProgram(o.program),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o.indexBuffer),t.bindBuffer(t.ARRAY_BUFFER,o.vertexBuffer),t.enableVertexAttribArray(o.attribs.position),t.enableVertexAttribArray(o.attribs.texCoord),t.vertexAttribPointer(o.attribs.position,2,t.FLOAT,!1,20,0),t.vertexAttribPointer(o.attribs.texCoord,3,t.FLOAT,!1,20,8),t.activeTexture(t.TEXTURE0),t.uniform1i(o.uniforms.diffuse,0),t.bindTexture(t.TEXTURE_2D,o.renderTarget),t.uniform4fv(o.uniforms.viewportOffsetScale,o.viewportOffsetScale),t.drawElements(t.TRIANGLES,o.indexCount,t.UNSIGNED_SHORT,0),o.cardboardUI&&o.cardboardUI.renderNoState(),o.realBindFramebuffer.call(o.gl,t.FRAMEBUFFER,o.framebuffer),o.ctxAttribs.preserveDrawingBuffer||(o.realClearColor.call(t,0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)),window.WebVRConfig.DIRTY_SUBMIT_FRAME_BINDINGS||o.realBindFramebuffer.call(t,t.FRAMEBUFFER,o.lastBoundFramebuffer),o.cullFace&&o.realEnable.call(t,t.CULL_FACE),o.depthTest&&o.realEnable.call(t,t.DEPTH_TEST),o.blend&&o.realEnable.call(t,t.BLEND),o.scissorTest&&o.realEnable.call(t,t.SCISSOR_TEST),o.stencilTest&&o.realEnable.call(t,t.STENCIL_TEST),o.realColorMask.apply(t,o.colorMask),o.realViewport.apply(t,o.viewport),!o.ctxAttribs.alpha&&o.ctxAttribs.preserveDrawingBuffer||o.realClearColor.apply(t,o.clearColor)}),p.isIOS()){var t=a.canvas;t.width==o.bufferWidth&&t.height==o.bufferHeight||(o.bufferWidth=t.width,o.bufferHeight=t.height,o.onResize())}},a.prototype.updateDeviceInfo=function(o){var a=this.gl,s=this,t=[a.ARRAY_BUFFER_BINDING,a.ELEMENT_ARRAY_BUFFER_BINDING];n(a,t,function(t){var r=s.computeMeshVertices_(s.meshWidth,s.meshHeight,o);if(t.bindBuffer(t.ARRAY_BUFFER,s.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),!s.indexCount){var i=s.computeMeshIndices_(s.meshWidth,s.meshHeight);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,s.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,i,t.STATIC_DRAW),s.indexCount=i.length}})},a.prototype.computeMeshVertices_=function(m,g,r){for(var t=new Float32Array(5*(2*m*g)),i=r.getLeftEyeVisibleTanAngles(),a=r.getLeftEyeNoLensTanAngles(),s=r.getLeftEyeVisibleScreenRect(a),l=0,y=0;2>y;y++){for(var o=0;o<g;o++)for(var n=0;n<m;n++,l++){var c=n/(m-1),h=o/(g-1),u=c,d=h,f=p.lerp(i[0],i[2],c),M=p.lerp(i[3],i[1],h),x=S(f*f+M*M),E=r.distortion.distortInverse(x);c=(f*E/x-a[0])/(a[2]-a[0]),h=(M*E/x-a[3])/(a[1]-a[3]),r.device.widthMeters,r.device.heightMeters,c=2*(s.x+c*s.width-.5),h=2*(s.y+h*s.height-.5),t[5*l+0]=c,t[5*l+1]=h,t[5*l+2]=u,t[5*l+3]=d,t[5*l+4]=y}var v=i[2]-i[0];i[0]=-(v+i[0]),i[2]=v-i[2],v=a[2]-a[0],a[0]=-(v+a[0]),a[2]=v-a[2],s.x=1-(s.x+s.width)}return t},a.prototype.computeMeshIndices_=function(a,i){for(var r=new Uint16Array(6*(2*(a-1)*(i-1))),t=0,s=0,l=0;2>l;l++)for(var d=0;d<i;d++)for(var o=0;o<a;o++,t++)0!=o&&0!=d&&(o<=a/2==d<=i/2?(r[s++]=t,r[s++]=t-a-1,r[s++]=t-a,r[s++]=t-a-1,r[s++]=t,r[s++]=t-1):(r[s++]=t-1,r[s++]=t-a,r[s++]=t,r[s++]=t-a,r[s++]=t-1,r[s++]=t-a-1));return r},a.prototype.getOwnPropertyDescriptor_=function(a,o){var r=Object.getOwnPropertyDescriptor(a,o);return void 0!==r.get&&void 0!==r.set||(r.configurable=!0,r.enumerable=!0,r.get=function(){return this.getAttribute(o)},r.set=function(t){this.setAttribute(o,t)}),r},r.exports=a},{"./cardboard-ui.js":50,"./deps/wglu-preserve-state.js":52,"./util.js":68}],50:[function(t,r){function a(t){this.gl=t,this.attribs={position:0},this.program=o.linkProgram(t,n,s,this.attribs),this.uniforms=o.getProgramUniforms(t,this.program),this.vertexBuffer=t.createBuffer(),this.gearOffset=0,this.gearVertexCount=0,this.arrowOffset=0,this.arrowVertexCount=0,this.projMat=new Float32Array(16),this.listener=null,this.onResize()}var o=t("./util.js"),i=t("./deps/wglu-preserve-state.js"),n="attribute vec2 position;\nuniform mat4 projectionMat;\nvoid main() {\n  gl_Position = projectionMat * vec4( position, -1.0, 1.0 );\n}",s="precision mediump float;\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}",p=Or/180,l=60,d=12,c=20,u=1,m=.75,g=.3125,y=28,M=1.5;a.prototype.destroy=function(){var t=this.gl;this.listener&&t.canvas.removeEventListener("click",this.listener,!1),t.deleteProgram(this.program),t.deleteBuffer(this.vertexBuffer)},a.prototype.listen=function(a,s){var t=this.gl.canvas;this.listener=function(r){var i=t.clientWidth/2,n=y*M;r.clientX>i-n&&r.clientX<i+n&&r.clientY>t.clientHeight-n?a(r):r.clientX<n&&r.clientY<n&&s(r)},t.addEventListener("click",this.listener,!1)},a.prototype.onResize=function(){var a=this.gl,x=this,t=[a.ARRAY_BUFFER_BINDING];i(a,t,function(E){function t(o,s){var t=(90-o)*p,l=O(t),i=I(t);v.push(g*l*h+n,g*i*h+h),v.push(s*l*h+n,s*i*h+h)}function r(a,t){v.push(T+a,E.drawingBufferHeight-T-t)}var v=[],n=E.drawingBufferWidth/2,o=L(screen.width,screen.height)*window.devicePixelRatio,a=E.drawingBufferWidth/o,i=a*window.devicePixelRatio,s=4*i/2,A=y*M*i,h=y*i/2,T=(y*M-y)*i;v.push(n-s,A),v.push(n-s,E.drawingBufferHeight),v.push(n+s,A),v.push(n+s,E.drawingBufferHeight),x.gearOffset=v.length/2;for(var f=0,b;6>=f;f++)b=f*l,t(b,u),t(b+d,u),t(b+c,m),t(b+(l-c),m),t(b+(l-d),u);x.gearVertexCount=v.length/2-x.gearOffset,x.arrowOffset=v.length/2;var D=s/I(45*p);r(0,h),r(h,0),r(h+D,D),r(D,h+D),r(D,h-D),r(0,h),r(h,2*h),r(h+D,2*h-D),r(D,h-D),r(0,h),r(D,h-s),r(y*i,h-s),r(D,h+s),r(y*i,h+s),x.arrowVertexCount=v.length/2-x.arrowOffset,E.bindBuffer(E.ARRAY_BUFFER,x.vertexBuffer),E.bufferData(E.ARRAY_BUFFER,new Float32Array(v),E.STATIC_DRAW)})},a.prototype.render=function(){var a=this.gl,o=this,t=[a.CULL_FACE,a.DEPTH_TEST,a.BLEND,a.SCISSOR_TEST,a.STENCIL_TEST,a.COLOR_WRITEMASK,a.VIEWPORT,a.CURRENT_PROGRAM,a.ARRAY_BUFFER_BINDING];i(a,t,function(t){t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.BLEND),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.viewport(0,0,t.drawingBufferWidth,t.drawingBufferHeight),o.renderNoState()})},a.prototype.renderNoState=function(){var t=this.gl;t.useProgram(this.program),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.enableVertexAttribArray(this.attribs.position),t.vertexAttribPointer(this.attribs.position,2,t.FLOAT,!1,8,0),t.uniform4f(this.uniforms.color,1,1,1,1),o.orthoMatrix(this.projMat,0,t.drawingBufferWidth,0,t.drawingBufferHeight,.1,1024),t.uniformMatrix4fv(this.uniforms.projectionMat,!1,this.projMat),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.drawArrays(t.TRIANGLE_STRIP,this.gearOffset,this.gearVertexCount),t.drawArrays(t.TRIANGLE_STRIP,this.arrowOffset,this.arrowVertexCount)},r.exports=a},{"./deps/wglu-preserve-state.js":52,"./util.js":68}],51:[function(t,r){function a(){this.displayName="Cardboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,this.capabilities.canPresent=!0,this.bufferScale_=window.WebVRConfig.BUFFER_SCALE,this.poseSensor_=new l,this.distorter_=null,this.cardboardUI_=null,this.dpdb_=new s(!0,this.onDeviceParamsUpdated_.bind(this)),this.deviceInfo_=new n(this.dpdb_.getDeviceParams()),this.viewerSelector_=new c,this.viewerSelector_.onChange(this.onViewerChanged_.bind(this)),this.deviceInfo_.setViewer(this.viewerSelector_.getCurrentViewer()),window.WebVRConfig.ROTATE_INSTRUCTIONS_DISABLED||(this.rotateInstructions_=new d),u.isIOS()&&window.addEventListener("resize",this.onResize_.bind(this))}var o=t("./cardboard-distorter.js"),i=t("./cardboard-ui.js"),n=t("./device-info.js"),s=t("./dpdb/dpdb.js"),l=t("./sensor-fusion/fusion-pose-sensor.js"),d=t("./rotate-instructions.js"),c=t("./viewer-selector.js"),p=t("./base.js").VRDisplay,u=t("./util.js"),m={LEFT:"left",RIGHT:"right"};a.prototype=new p,a.prototype.getImmediatePose=function(){return{position:this.poseSensor_.getPosition(),orientation:this.poseSensor_.getOrientation(),linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},a.prototype.resetPose=function(){this.poseSensor_.resetPose()},a.prototype.getEyeParameters=function(r){var a=[.5*this.deviceInfo_.viewer.interLensDistance,0,0],o;if(r==m.LEFT)a[0]*=-1,o=this.deviceInfo_.getFieldOfViewLeftEye();else{if(r!=m.RIGHT)return console.error("Invalid eye provided: %s",r),null;o=this.deviceInfo_.getFieldOfViewRightEye()}return{fieldOfView:o,offset:a,renderWidth:.5*this.deviceInfo_.device.width*this.bufferScale_,renderHeight:this.deviceInfo_.device.height*this.bufferScale_}},a.prototype.onDeviceParamsUpdated_=function(t){u.isDebug()&&console.log("DPDB reported that device params were updated."),this.deviceInfo_.updateDeviceParams(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_)},a.prototype.updateBounds_=function(){this.layer_&&this.distorter_&&(this.layer_.leftBounds||this.layer_.rightBounds)&&this.distorter_.setTextureBounds(this.layer_.leftBounds,this.layer_.rightBounds)},a.prototype.beginPresent_=function(){var t=this.layer_.source.getContext("webgl");t||(t=this.layer_.source.getContext("experimental-webgl")),t||(t=this.layer_.source.getContext("webgl2")),t&&(this.layer_.predistorted?window.WebVRConfig.CARDBOARD_UI_DISABLED||(t.canvas.width=u.getScreenWidth()*this.bufferScale_,t.canvas.height=u.getScreenHeight()*this.bufferScale_,this.cardboardUI_=new i(t)):(this.distorter_=new o(t),this.distorter_.updateDeviceInfo(this.deviceInfo_),this.cardboardUI_=this.distorter_.cardboardUI),this.cardboardUI_&&this.cardboardUI_.listen(function(t){this.viewerSelector_.show(this.layer_.source.parentElement),t.stopPropagation(),t.preventDefault()}.bind(this),function(t){this.exitPresent(),t.stopPropagation(),t.preventDefault()}.bind(this)),this.rotateInstructions_&&(u.isLandscapeMode()&&u.isMobile()?this.rotateInstructions_.showTemporarily(3e3,this.layer_.source.parentElement):this.rotateInstructions_.update()),this.orientationHandler=this.onOrientationChange_.bind(this),window.addEventListener("orientationchange",this.orientationHandler),this.vrdisplaypresentchangeHandler=this.updateBounds_.bind(this),window.addEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler),this.fireVRDisplayDeviceParamsChange_())},a.prototype.endPresent_=function(){this.distorter_&&(this.distorter_.destroy(),this.distorter_=null),this.cardboardUI_&&(this.cardboardUI_.destroy(),this.cardboardUI_=null),this.rotateInstructions_&&this.rotateInstructions_.hide(),this.viewerSelector_.hide(),window.removeEventListener("orientationchange",this.orientationHandler),window.removeEventListener("vrdisplaypresentchange",this.vrdisplaypresentchangeHandler)},a.prototype.submitFrame=function(){if(this.distorter_)this.updateBounds_(),this.distorter_.submitFrame();else if(this.cardboardUI_&&this.layer_){var r=this.layer_.source.getContext("webgl").canvas;r.width==this.lastWidth&&r.height==this.lastHeight||this.cardboardUI_.onResize(),this.lastWidth=r.width,this.lastHeight=r.height,this.cardboardUI_.render()}},a.prototype.onOrientationChange_=function(){this.viewerSelector_.hide(),this.rotateInstructions_&&this.rotateInstructions_.update(),this.onResize_()},a.prototype.onResize_=function(){if(this.layer_){var r=this.layer_.source.getContext("webgl"),t=["position: absolute","top: 0","left: 0","width: "+L(screen.width,screen.height)+"px","height: "+N(screen.height,screen.width)+"px","border: 0","margin: 0","padding: 0 10px 10px 0","box-sizing: content-box"];r.canvas.setAttribute("style",t.join("; ")+";"),u.safariCssSizeWorkaround(r.canvas)}},a.prototype.onViewerChanged_=function(t){this.deviceInfo_.setViewer(t),this.distorter_&&this.distorter_.updateDeviceInfo(this.deviceInfo_),this.fireVRDisplayDeviceParamsChange_()},a.prototype.fireVRDisplayDeviceParamsChange_=function(){var t=new CustomEvent("vrdisplaydeviceparamschange",{detail:{vrdisplay:this,deviceInfo:this.deviceInfo_}});window.dispatchEvent(t)},r.exports=a},{"./base.js":48,"./cardboard-distorter.js":49,"./cardboard-ui.js":50,"./device-info.js":53,"./dpdb/dpdb.js":57,"./rotate-instructions.js":62,"./sensor-fusion/fusion-pose-sensor.js":64,"./util.js":68,"./viewer-selector.js":69}],52:[function(t,r){r.exports=function(o,i,n){if(!i)return void n(o);for(var r=[],a=null,l=0,d;l<i.length;++l)switch(d=i[l],d){case o.TEXTURE_BINDING_2D:case o.TEXTURE_BINDING_CUBE_MAP:var c=i[++l];if(c<o.TEXTURE0||c>o.TEXTURE31){console.error("TEXTURE_BINDING_2D or TEXTURE_BINDING_CUBE_MAP must be followed by a valid texture unit"),r.push(null,null);break}a||(a=o.getParameter(o.ACTIVE_TEXTURE)),o.activeTexture(c),r.push(o.getParameter(d),null);break;case o.ACTIVE_TEXTURE:a=o.getParameter(o.ACTIVE_TEXTURE),r.push(null);break;default:r.push(o.getParameter(d));}n(o);for(var l=0;l<i.length;++l){var d=i[l],t=r[l];switch(d){case o.ACTIVE_TEXTURE:break;case o.ARRAY_BUFFER_BINDING:o.bindBuffer(o.ARRAY_BUFFER,t);break;case o.COLOR_CLEAR_VALUE:o.clearColor(t[0],t[1],t[2],t[3]);break;case o.COLOR_WRITEMASK:o.colorMask(t[0],t[1],t[2],t[3]);break;case o.CURRENT_PROGRAM:o.useProgram(t);break;case o.ELEMENT_ARRAY_BUFFER_BINDING:o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,t);break;case o.FRAMEBUFFER_BINDING:o.bindFramebuffer(o.FRAMEBUFFER,t);break;case o.RENDERBUFFER_BINDING:o.bindRenderbuffer(o.RENDERBUFFER,t);break;case o.TEXTURE_BINDING_2D:var c=i[++l];if(c<o.TEXTURE0||c>o.TEXTURE31)break;o.activeTexture(c),o.bindTexture(o.TEXTURE_2D,t);break;case o.TEXTURE_BINDING_CUBE_MAP:var c=i[++l];if(c<o.TEXTURE0||c>o.TEXTURE31)break;o.activeTexture(c),o.bindTexture(o.TEXTURE_CUBE_MAP,t);break;case o.VIEWPORT:o.viewport(t[0],t[1],t[2],t[3]);break;case o.BLEND:case o.CULL_FACE:case o.DEPTH_TEST:case o.SCISSOR_TEST:case o.STENCIL_TEST:t?o.enable(d):o.disable(d);break;default:console.log("No GL restore behavior for 0x"+d.toString(16));}a&&o.activeTexture(a)}}},{}],53:[function(t,r){function a(t){this.width=t.width||s.getScreenWidth(),this.height=t.height||s.getScreenHeight(),this.widthMeters=t.widthMeters,this.heightMeters=t.heightMeters,this.bevelMeters=t.bevelMeters}function o(t){this.viewer=u.CardboardV2,this.updateDeviceParams(t),this.distortion=new n(this.viewer.distortionCoefficients)}function i(t){this.id=t.id,this.label=t.label,this.fov=t.fov,this.interLensDistance=t.interLensDistance,this.baselineLensDistance=t.baselineLensDistance,this.screenLensDistance=t.screenLensDistance,this.distortionCoefficients=t.distortionCoefficients,this.inverseCoefficients=t.inverseCoefficients}var n=t("./distortion/distortion.js"),p=t("./math-util.js"),s=t("./util.js"),d=new a({widthMeters:.11,heightMeters:.062,bevelMeters:.004}),c=new a({widthMeters:.1038,heightMeters:.0584,bevelMeters:.004}),u={CardboardV1:new i({id:"CardboardV1",label:"Cardboard I/O 2014",fov:40,interLensDistance:.06,baselineLensDistance:.035,screenLensDistance:.042,distortionCoefficients:[0.441,0.156],inverseCoefficients:[-0.4410035,0.42756155,-0.4804439,0.5460139,-0.58821183,0.5733938,-0.48303202,0.33299083,-0.17573841,0.0651772,-0.01488963,0.001559834]}),CardboardV2:new i({id:"CardboardV2",label:"Cardboard I/O 2015",fov:60,interLensDistance:.064,baselineLensDistance:.035,screenLensDistance:.039,distortionCoefficients:[0.34,0.55],inverseCoefficients:[-0.33836704,-0.18162185,0.862655,-1.2462051,1.0560602,-0.58208317,0.21609078,-0.05444823,0.009177956,-0.0009904169,0.00006183535,-0.0000016981803]})};o.prototype.updateDeviceParams=function(t){this.device=this.determineDevice_(t)||this.device},o.prototype.getDevice=function(){return this.device},o.prototype.setViewer=function(t){this.viewer=t,this.distortion=new n(this.viewer.distortionCoefficients)},o.prototype.determineDevice_=function(r){if(!r)return s.isIOS()?(console.warn("Using fallback iOS device measurements."),c):(console.warn("Using fallback Android device measurements."),d);var o=.0254/r.xdpi,t=.0254/r.ydpi;return new a({widthMeters:o*s.getScreenWidth(),heightMeters:t*s.getScreenHeight(),bevelMeters:.001*r.bevelMm})},o.prototype.getDistortedFieldOfViewLeftEye=function(){var u=this.viewer,m=this.device,t=this.distortion,i=u.screenLensDistance,s=(m.widthMeters-u.interLensDistance)/2,n=u.interLensDistance/2,r=u.baselineLensDistance-m.bevelMeters,o=m.heightMeters-r,a=p.radToDeg*l(t.distort(s/i)),g=p.radToDeg*l(t.distort(n/i)),d=p.radToDeg*l(t.distort(r/i)),c=p.radToDeg*l(t.distort(o/i));return{leftDegrees:N(a,u.fov),rightDegrees:N(g,u.fov),downDegrees:N(d,u.fov),upDegrees:N(c,u.fov)}},o.prototype.getLeftEyeVisibleTanAngles=function(){var u=this.viewer,m=this.device,t=this.distortion,i=x(-p.degToRad*u.fov),s=x(p.degToRad*u.fov),n=x(p.degToRad*u.fov),r=x(-p.degToRad*u.fov),o=m.widthMeters/4,a=m.heightMeters/2,h=u.baselineLensDistance-m.bevelMeters-a,y=u.interLensDistance/2-o,c=-h,E=u.screenLensDistance,f=t.distort((y-o)/E),v=t.distort((c+a)/E),M=t.distort((y+o)/E),g=t.distort((c-a)/E),l=new Float32Array(4);return l[0]=L(i,f),l[1]=N(s,v),l[2]=N(n,M),l[3]=L(r,g),l},o.prototype.getLeftEyeNoLensTanAngles=function(){var l=this.viewer,u=this.device,t=this.distortion,i=new Float32Array(4),s=t.distortInverse(x(-p.degToRad*l.fov)),n=t.distortInverse(x(p.degToRad*l.fov)),r=t.distortInverse(x(p.degToRad*l.fov)),o=t.distortInverse(x(-p.degToRad*l.fov)),a=u.widthMeters/4,m=u.heightMeters/2,d=l.baselineLensDistance-u.bevelMeters-m,g=l.interLensDistance/2-a,h=-d,y=l.screenLensDistance;return i[0]=L(s,(g-a)/y),i[1]=N(n,(h+m)/y),i[2]=N(r,(g+a)/y),i[3]=L(o,(h-m)/y),i},o.prototype.getLeftEyeVisibleScreenRect=function(l){var c=this.viewer,t=this.device,i=c.screenLensDistance,s=(t.widthMeters-c.interLensDistance)/2,n=c.baselineLensDistance-t.bevelMeters,r=(l[0]*i+s)/t.widthMeters,p=(l[1]*i+n)/t.heightMeters,a=(l[2]*i+s)/t.widthMeters,u=(l[3]*i+n)/t.heightMeters;return{x:r,y:u,width:a-r,height:p-u}},o.prototype.getFieldOfViewLeftEye=function(t){return t?this.getUndistortedFieldOfViewLeftEye():this.getDistortedFieldOfViewLeftEye()},o.prototype.getFieldOfViewRightEye=function(r){var a=this.getFieldOfViewLeftEye(r);return{leftDegrees:a.rightDegrees,rightDegrees:a.leftDegrees,upDegrees:a.upDegrees,downDegrees:a.downDegrees}},o.prototype.getUndistortedFieldOfViewLeftEye=function(){var t=this.getUndistortedParams_();return{leftDegrees:p.radToDeg*l(t.outerDist),rightDegrees:p.radToDeg*l(t.innerDist),downDegrees:p.radToDeg*l(t.bottomDist),upDegrees:p.radToDeg*l(t.topDist)}},o.prototype.getUndistortedViewportLeftEye=function(){var l=this.getUndistortedParams_(),c=this.viewer,t=this.device,i=c.screenLensDistance,s=t.widthMeters/i,n=t.heightMeters/i,r=t.width/s,o=t.height/n,a=A((l.eyePosX-l.outerDist)*r),p=A((l.eyePosY-l.bottomDist)*o);return{x:a,y:p,width:A((l.eyePosX+l.innerDist)*r)-a,height:A((l.eyePosY+l.topDist)*o)-p}},o.prototype.getUndistortedParams_=function(){var l=this.viewer,u=this.device,t=this.distortion,i=l.screenLensDistance,s=l.interLensDistance/2/i,n=u.widthMeters/i,r=u.heightMeters/i,o=n/2-s,m=(l.baselineLensDistance-u.bevelMeters)/i,g=l.fov,d=t.distortInverse(x(p.degToRad*g)),c=N(o,d),y=N(s,d),M=N(m,d);return{outerDist:c,innerDist:y,topDist:N(r-m,d),bottomDist:M,eyePosX:o,eyePosY:m}},o.Viewers=u,r.exports=o},{"./distortion/distortion.js":55,"./math-util.js":59,"./util.js":68}],54:[function(t,r){function a(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:HMD:"+t.displayId,this.deviceName=t.displayName+" (HMD)"}function o(t){this.display=t,this.hardwareUnitId=t.displayId,this.deviceId="webvr-polyfill:PositionSensor: "+t.displayId,this.deviceName=t.displayName+" (PositionSensor)"}var i=t("./base.js").VRDisplay,n=t("./base.js").HMDVRDevice,s=t("./base.js").PositionSensorVRDevice;a.prototype=new n,a.prototype.getEyeParameters=function(t){var r=this.display.getEyeParameters(t);return{currentFieldOfView:r.fieldOfView,maximumFieldOfView:r.fieldOfView,minimumFieldOfView:r.fieldOfView,recommendedFieldOfView:r.fieldOfView,eyeTranslation:{x:r.offset[0],y:r.offset[1],z:r.offset[2]},renderRect:{x:"right"==t?r.renderWidth:0,y:0,width:r.renderWidth,height:r.renderHeight}}},a.prototype.setFieldOfView=function(){},o.prototype=new s,o.prototype.getState=function(){var t=this.display.getPose();return{position:t.position?{x:t.position[0],y:t.position[1],z:t.position[2]}:null,orientation:t.orientation?{x:t.orientation[0],y:t.orientation[1],z:t.orientation[2],w:t.orientation[3]}:null,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},o.prototype.resetState=function(){return this.positionDevice.resetPose()},r.exports.VRDisplayHMDDevice=a,r.exports.VRDisplayPositionSensorDevice=o},{"./base.js":48}],55:[function(t,r){function a(r){this.coefficients=r}a.prototype.distortInverse=function(a){for(var t=0,i=1,o=a-this.distort(t);1e-4<D(i-t);){var r=a-this.distort(i),s=i-r*((i-t)/(r-o));t=i,i=s,o=r}return i},a.prototype.distort=function(a){for(var t=0,o=0;o<this.coefficients.length;o++)t=a*a*(t+this.coefficients[o]);return(t+1)*a},r.exports=a},{}],56:[function(t,r){r.exports={format:1,last_updated:"2017-08-27T14:39:31Z",devices:[{type:"android",rules:[{mdmh:"asus/*/Nexus 7/*"},{ua:"Nexus 7"}],dpi:[320.8,323],bw:3,ac:500},{type:"android",rules:[{mdmh:"asus/*/ASUS_Z00AD/*"},{ua:"ASUS_Z00AD"}],dpi:[403,404.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Google/*/Pixel XL/*"},{ua:"Pixel XL"}],dpi:[537.9,533],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Google/*/Pixel/*"},{ua:"Pixel"}],dpi:[432.6,436.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"HTC/*/HTC6435LVW/*"},{ua:"HTC6435LVW"}],dpi:[449.7,443.3],bw:3,ac:1000},{type:"android",rules:[{mdmh:"HTC/*/HTC One XL/*"},{ua:"HTC One XL"}],dpi:[315.3,314.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"htc/*/Nexus 9/*"},{ua:"Nexus 9"}],dpi:289,bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One M9/*"},{ua:"HTC One M9"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One_M8/*"},{ua:"HTC One_M8"}],dpi:[449.7,447.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"HTC/*/HTC One/*"},{ua:"HTC One"}],dpi:472.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"Huawei/*/Nexus 6P/*"},{ua:"Nexus 6P"}],dpi:[515.1,518],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LENOVO/*/Lenovo PB2-690Y/*"},{ua:"Lenovo PB2-690Y"}],dpi:[457.2,454.713],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5X/*"},{ua:"Nexus 5X"}],dpi:[422,419.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGMS345/*"},{ua:"LGMS345"}],dpi:[221.7,219.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D800/*"},{ua:"LG-D800"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/LG-D850/*"},{ua:"LG-D850"}],dpi:[537.9,541.9],bw:3,ac:500},{type:"android",rules:[{mdmh:"LGE/*/VS985 4G/*"},{ua:"VS985 4G"}],dpi:[537.9,535.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/Nexus 5/*"},{ua:"Nexus 5 B"}],dpi:[442.4,444.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/Nexus 4/*"},{ua:"Nexus 4"}],dpi:[319.8,318.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LG-P769/*"},{ua:"LG-P769"}],dpi:[240.6,247.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGMS323/*"},{ua:"LGMS323"}],dpi:[206.6,204.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"LGE/*/LGLS996/*"},{ua:"LGLS996"}],dpi:[403.4,401.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/4560MMX/*"},{ua:"4560MMX"}],dpi:[240,219.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/A250/*"},{ua:"Micromax A250"}],dpi:[480,446.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Micromax/*/Micromax AQ4501/*"},{ua:"Micromax AQ4501"}],dpi:240,bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/DROID RAZR/*"},{ua:"DROID RAZR"}],dpi:[368.1,256.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT830C/*"},{ua:"XT830C"}],dpi:[254,255.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1021/*"},{ua:"XT1021"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1023/*"},{ua:"XT1023"}],dpi:[254,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1028/*"},{ua:"XT1028"}],dpi:[326.6,327.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1034/*"},{ua:"XT1034"}],dpi:[326.6,328.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1053/*"},{ua:"XT1053"}],dpi:[315.3,316.1],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1562/*"},{ua:"XT1562"}],dpi:[403.4,402.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/Nexus 6/*"},{ua:"Nexus 6 B"}],dpi:[494.3,489.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1063/*"},{ua:"XT1063"}],dpi:[295,296.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/XT1064/*"},{ua:"XT1064"}],dpi:[295,295.6],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1092/*"},{ua:"XT1092"}],dpi:[422,424.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"motorola/*/XT1095/*"},{ua:"XT1095"}],dpi:[422,423.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"motorola/*/G4/*"},{ua:"Moto G (4)"}],dpi:401,bw:4,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/A0001/*"},{ua:"A0001"}],dpi:[403.4,401],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/ONE E1005/*"},{ua:"ONE E1005"}],dpi:[442.4,441.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OnePlus/*/ONE A2005/*"},{ua:"ONE A2005"}],dpi:[391.9,405.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"OPPO/*/X909/*"},{ua:"X909"}],dpi:[442.4,444.1],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9082/*"},{ua:"GT-I9082"}],dpi:[184.7,185.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G360P/*"},{ua:"SM-G360P"}],dpi:[196.7,205.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/Nexus S/*"},{ua:"Nexus S"}],dpi:[234.5,229.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[304.8,303.9],bw:5,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-T230NU/*"},{ua:"SM-T230NU"}],dpi:216,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SGH-T399/*"},{ua:"SGH-T399"}],dpi:[217.7,231.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SGH-M919/*"},{ua:"SGH-M919"}],dpi:[440.8,437.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N9005/*"},{ua:"SM-N9005"}],dpi:[386.4,387],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SM-N900A/*"},{ua:"SAMSUNG-SM-N900A"}],dpi:[386.4,387.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9500/*"},{ua:"GT-I9500"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/GT-I9505/*"},{ua:"GT-I9505"}],dpi:439.4,bw:4,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G900F/*"},{ua:"SM-G900F"}],dpi:[415.6,431.6],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G900M/*"},{ua:"SM-G900M"}],dpi:[415.6,431.6],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G800F/*"},{ua:"SM-G800F"}],dpi:326.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G906S/*"},{ua:"SM-G906S"}],dpi:[562.7,572.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300/*"},{ua:"GT-I9300"}],dpi:[306.7,304.8],bw:5,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-T535/*"},{ua:"SM-T535"}],dpi:[142.6,136.4],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-N920C/*"},{ua:"SM-N920C"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N920W8/*"},{ua:"SM-N920W8"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9300I/*"},{ua:"GT-I9300I"}],dpi:[304.8,305.8],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-I9195/*"},{ua:"GT-I9195"}],dpi:[249.4,256.7],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SPH-L520/*"},{ua:"SPH-L520"}],dpi:[249.4,255.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SAMSUNG-SGH-I717/*"},{ua:"SAMSUNG-SGH-I717"}],dpi:285.8,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SPH-D710/*"},{ua:"SPH-D710"}],dpi:[217.7,204.2],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/GT-N7100/*"},{ua:"GT-N7100"}],dpi:265.1,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SCH-I605/*"},{ua:"SCH-I605"}],dpi:265.1,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/Galaxy Nexus/*"},{ua:"Galaxy Nexus"}],dpi:[315.3,314.2],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N910H/*"},{ua:"SM-N910H"}],dpi:[515.1,518],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-N910C/*"},{ua:"SM-N910C"}],dpi:[515.2,520.2],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G130M/*"},{ua:"SM-G130M"}],dpi:[165.9,164.8],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G928I/*"},{ua:"SM-G928I"}],dpi:[515.1,518.4],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G920F/*"},{ua:"SM-G920F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G920P/*"},{ua:"SM-G920P"}],dpi:[522.5,577],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G925F/*"},{ua:"SM-G925F"}],dpi:580.6,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G925V/*"},{ua:"SM-G925V"}],dpi:[522.5,576.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G930F/*"},{ua:"SM-G930F"}],dpi:576.6,bw:3,ac:1000},{type:"android",rules:[{mdmh:"samsung/*/SM-G935F/*"},{ua:"SM-G935F"}],dpi:533,bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G950F/*"},{ua:"SM-G950F"}],dpi:[562.707,565.293],bw:3,ac:500},{type:"android",rules:[{mdmh:"samsung/*/SM-G955U/*"},{ua:"SM-G955U"}],dpi:[522.514,525.762],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/C6903/*"},{ua:"C6903"}],dpi:[442.5,443.3],bw:3,ac:500},{type:"android",rules:[{mdmh:"Sony/*/D6653/*"},{ua:"D6653"}],dpi:[428.6,427.6],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/E6653/*"},{ua:"E6653"}],dpi:[428.6,425.7],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/E6853/*"},{ua:"E6853"}],dpi:[403.4,401.9],bw:3,ac:1000},{type:"android",rules:[{mdmh:"Sony/*/SGP321/*"},{ua:"SGP321"}],dpi:[224.7,224.1],bw:3,ac:500},{type:"android",rules:[{mdmh:"TCT/*/ALCATEL ONE TOUCH Fierce/*"},{ua:"ALCATEL ONE TOUCH Fierce"}],dpi:[240,247.5],bw:3,ac:1000},{type:"android",rules:[{mdmh:"THL/*/thl 5000/*"},{ua:"thl 5000"}],dpi:[480,443.3],bw:3,ac:1000},{type:"android",rules:[{mdmh:"ZTE/*/ZTE Blade L2/*"},{ua:"ZTE Blade L2"}],dpi:240,bw:3,ac:500},{type:"ios",rules:[{res:[640,960]}],dpi:[325.1,328.4],bw:4,ac:1000},{type:"ios",rules:[{res:[640,1136]}],dpi:[317.1,320.2],bw:3,ac:1000},{type:"ios",rules:[{res:[750,1334]}],dpi:326.4,bw:4,ac:1000},{type:"ios",rules:[{res:[1242,2208]}],dpi:[453.6,458.4],bw:4,ac:1000},{type:"ios",rules:[{res:[1125,2001]}],dpi:[410.9,415.4],bw:4,ac:1000}]}},{}],57:[function(t,r){function a(a,o){if(this.dpdb=n,this.recalculateDeviceParams_(),a){this.onDeviceParamsUpdated=o;var r=new XMLHttpRequest,i=this;r.open("GET",s,!0),r.addEventListener("load",function(){i.loading=!1,200<=r.status&&299>=r.status?(i.dpdb=JSON.parse(r.response),i.recalculateDeviceParams_()):console.error("Error loading online DPDB!")}),r.send()}}function o(t){this.xdpi=t.xdpi,this.ydpi=t.ydpi,this.bevelMm=t.bevelMm}var n=t("./dpdb.json"),p=t("../util.js"),s="https://dpdb.webvr.rocks/dpdb.json";a.prototype.getDeviceParams=function(){return this.deviceParams},a.prototype.recalculateDeviceParams_=function(){var t=this.calcDeviceParams_();t?(this.deviceParams=t,this.onDeviceParamsUpdated&&this.onDeviceParamsUpdated(this.deviceParams)):console.error("Failed to recalculate device parameters.")},a.prototype.calcDeviceParams_=function(){var u=this.dpdb;if(!u)return console.error("DPDB not available."),null;if(1!=u.format)return console.error("DPDB has unexpected format version."),null;if(!u.devices||!u.devices.length)return console.error("DPDB does not have a devices section."),null;var m=navigator.userAgent||navigator.vendor||window.opera,r=p.getScreenWidth(),i=p.getScreenHeight();if(!u.devices)return console.error("DPDB has no devices section."),null;for(var t=0,a;t<u.devices.length;t++)if(a=u.devices[t],!a.rules)console.warn("Device["+t+"] has no rules section.");else if("ios"!=a.type&&"android"!=a.type)console.warn("Device["+t+"] has invalid type.");else if(p.isIOS()==("ios"==a.type)){for(var s=!1,n=0,g;n<a.rules.length;n++)if(g=a.rules[n],this.matchRule_(g,m,r,i)){s=!0;break}if(s){var c=a.dpi[0]||a.dpi,h=a.dpi[1]||a.dpi;return new o({xdpi:c,ydpi:h,bevelMm:a.bw})}}return console.warn("No DPDB device match."),null},a.prototype.matchRule_=function(o,n,r,i){if(!o.ua&&!o.res)return!1;if(o.ua&&0>n.indexOf(o.ua))return!1;if(o.res){if(!o.res[0]||!o.res[1])return!1;var t=o.res[0],a=o.res[1];if(N(r,i)!=N(t,a)||L(r,i)!=L(t,a))return!1}return!0},r.exports=a},{"../util.js":68,"./dpdb.json":56}],58:[function(t){var r=t("./util.js"),a=t("./webvr-polyfill.js").WebVRPolyfill;window.WebVRConfig=r.extend({FORCE_ENABLE_VR:!1,K_FILTER:.98,PREDICTION_TIME_S:.04,TOUCH_PANNER_DISABLED:!0,CARDBOARD_UI_DISABLED:!1,ROTATE_INSTRUCTIONS_DISABLED:!1,YAW_ONLY:!1,MOUSE_KEYBOARD_CONTROLS_DISABLED:!1,DEFER_INITIALIZATION:!1,ENABLE_DEPRECATED_API:!1,BUFFER_SCALE:.5,DIRTY_SUBMIT_FRAME_BINDINGS:!1,ALWAYS_APPEND_POLYFILL_DISPLAY:!1,GET_VR_DISPLAYS_TIMEOUT:1e3},window.WebVRConfig),window.WebVRConfig.DEFER_INITIALIZATION?window.InitializeWebVRPolyfill=function(){new a}:new a,window.WebVRPolyfill=a},{"./util.js":68,"./webvr-polyfill.js":71}],59:[function(t,r){var a=window.MathUtil||{};a.degToRad=Or/180,a.radToDeg=180/Or,a.Vector2=function(r,t){this.x=r||0,this.y=t||0},a.Vector2.prototype={constructor:a.Vector2,set:function(r,t){return this.x=r,this.y=t,this},copy:function(r){return this.x=r.x,this.y=r.y,this},subVectors:function(r,t){return this.x=r.x-t.x,this.y=r.y-t.y,this}},a.Vector3=function(r,t,a){this.x=r||0,this.y=t||0,this.z=a||0},a.Vector3.prototype={constructor:a.Vector3,set:function(r,t,a){return this.x=r,this.y=t,this.z=a,this},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this},length:function(){return S(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var r=this.length();if(0!==r){this.multiplyScalar(1/r)}else this.x=0,this.y=0,this.z=0;return this},multiplyScalar:function(r){this.x*=r,this.y*=r,this.z*=r},applyQuaternion:function(l){var t=this.x,i=this.y,s=this.z,d=l.x,p=l.y,m=l.z,g=l.w,a=g*t+p*s-m*i,h=g*i+m*t-d*s,u=g*s+d*i-p*t,y=-d*t-p*i-m*s;return this.x=a*g+y*-d+h*-m-u*-p,this.y=h*g+y*-p+u*-d-a*-m,this.z=u*g+y*-m+a*-p-h*-d,this},dot:function(r){return this.x*r.x+this.y*r.y+this.z*r.z},crossVectors:function(l,t){var i=l.x,s=l.y,d=l.z,n=t.x,r=t.y,o=t.z;return this.x=s*o-d*r,this.y=d*n-i*o,this.z=i*r-s*n,this}},a.Quaternion=function(r,t,a,o){this.x=r||0,this.y=t||0,this.z=a||0,this.w=void 0===o?1:o},a.Quaternion.prototype={constructor:a.Quaternion,set:function(r,t,a,o){return this.x=r,this.y=t,this.z=a,this.w=o,this},copy:function(r){return this.x=r.x,this.y=r.y,this.z=r.z,this.w=r.w,this},setFromEulerXYZ:function(l,t,i){var s=O(l/2),d=O(t/2),n=O(i/2),r=I(l/2),o=I(t/2),a=I(i/2);return this.x=r*d*n+s*o*a,this.y=s*o*n-r*d*a,this.z=s*d*a+r*o*n,this.w=s*d*n-r*o*a,this},setFromEulerYXZ:function(l,t,i){var s=O(l/2),d=O(t/2),n=O(i/2),r=I(l/2),o=I(t/2),a=I(i/2);return this.x=r*d*n+s*o*a,this.y=s*o*n-r*d*a,this.z=s*d*a-r*o*n,this.w=s*d*n+r*o*a,this},setFromAxisAngle:function(r,t){var a=t/2,o=I(a);return this.x=r.x*o,this.y=r.y*o,this.z=r.z*o,this.w=O(a),this},multiply:function(r){return this.multiplyQuaternions(this,r)},multiplyQuaternions:function(l,t){var i=l.x,s=l.y,d=l.z,n=l.w,r=t.x,o=t.y,a=t.z,c=t.w;return this.x=i*c+n*r+s*a-d*o,this.y=s*c+n*o+d*r-i*a,this.z=d*c+n*a+i*o-s*r,this.w=n*c-i*r-s*o-d*a,this},inverse:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this.normalize(),this},normalize:function(){var r=S(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===r?(this.x=0,this.y=0,this.z=0,this.w=1):(r=1/r,this.x*=r,this.y*=r,this.z*=r,this.w*=r),this},slerp:function(l,t){if(0===t)return this;if(1===t)return this.copy(l);var i=this.x,s=this.y,d=this.z,n=this.w,r=n*l.w+i*l.x+s*l.y+d*l.z;if(0>r?(this.w=-l.w,this.x=-l.x,this.y=-l.y,this.z=-l.z,r=-r):this.copy(l),1<=r)return this.w=n,this.x=i,this.y=s,this.z=d,this;var c=M(r),a=S(1-r*r);if(.001>D(a))return this.w=.5*(n+this.w),this.x=.5*(i+this.x),this.y=.5*(s+this.y),this.z=.5*(d+this.z),this;var p=I((1-t)*c)/a,u=I(t*c)/a;return this.w=n*p+this.w*u,this.x=i*p+this.x*u,this.y=s*p+this.y*u,this.z=d*p+this.z*u,this},setFromUnitVectors:function(){var r,t;return function(o,i){return void 0===r&&(r=new a.Vector3),t=o.dot(i)+1,1e-6>t?(t=0,D(o.x)>D(o.z)?r.set(-o.y,o.x,0):r.set(0,-o.z,o.y)):r.crossVectors(o,i),this.x=r.x,this.y=r.y,this.z=r.z,this.w=t,this.normalize(),this}}()},r.exports=a},{}],60:[function(t,r){function a(){this.displayName="Mouse and Keyboard VRDisplay (webvr-polyfill)",this.capabilities.hasOrientation=!0,window.addEventListener("keydown",this.onKeyDown_.bind(this)),window.addEventListener("mousemove",this.onMouseMove_.bind(this)),window.addEventListener("mousedown",this.onMouseDown_.bind(this)),window.addEventListener("mouseup",this.onMouseUp_.bind(this)),this.phi_=0,this.theta_=0,this.targetAngle_=null,this.angleAnimation_=null,this.orientation_=new i.Quaternion,this.rotateStart_=new i.Vector2,this.rotateEnd_=new i.Vector2,this.rotateDelta_=new i.Vector2,this.isDragging_=!1,this.orientationOut_=new Float32Array(4)}var o=t("./base.js").VRDisplay,i=t("./math-util.js"),n=t("./util.js"),s=.15,l=80;a.prototype=new o,a.prototype.getImmediatePose=function(){return this.orientation_.setFromEulerYXZ(this.phi_,this.theta_,0),this.orientationOut_[0]=this.orientation_.x,this.orientationOut_[1]=this.orientation_.y,this.orientationOut_[2]=this.orientation_.z,this.orientationOut_[3]=this.orientation_.w,{position:null,orientation:this.orientationOut_,linearVelocity:null,linearAcceleration:null,angularVelocity:null,angularAcceleration:null}},a.prototype.onKeyDown_=function(r){38==r.keyCode?this.animatePhi_(this.phi_+s):39==r.keyCode?this.animateTheta_(this.theta_-s):40==r.keyCode?this.animatePhi_(this.phi_-s):37==r.keyCode&&this.animateTheta_(this.theta_+s)},a.prototype.animateTheta_=function(r){this.animateKeyTransitions_("theta_",r)},a.prototype.animatePhi_=function(r){r=n.clamp(r,-Or/2,Or/2),this.animateKeyTransitions_("phi_",r)},a.prototype.animateKeyTransitions_=function(r,t){this.angleAnimation_&&cancelAnimationFrame(this.angleAnimation_);var i=this[r],s=new Date;this.angleAnimation_=requestAnimationFrame(function o(){var n=new Date-s;if(n>=l)return this[r]=t,void cancelAnimationFrame(this.angleAnimation_);this.angleAnimation_=requestAnimationFrame(o.bind(this));this[r]=i+(t-i)*(n/l)}.bind(this))},a.prototype.onMouseDown_=function(r){this.rotateStart_.set(r.clientX,r.clientY),this.isDragging_=!0},a.prototype.onMouseMove_=function(r){if(this.isDragging_||this.isPointerLocked_()){if(this.isPointerLocked_()){var t=r.movementX||r.mozMovementX||0,a=r.movementY||r.mozMovementY||0;this.rotateEnd_.set(this.rotateStart_.x-t,this.rotateStart_.y-a)}else this.rotateEnd_.set(r.clientX,r.clientY);this.rotateDelta_.subVectors(this.rotateEnd_,this.rotateStart_),this.rotateStart_.copy(this.rotateEnd_),this.phi_+=2*Or*this.rotateDelta_.y/screen.height*.3,this.theta_+=2*Or*this.rotateDelta_.x/screen.width*.5,this.phi_=n.clamp(this.phi_,-Or/2,Or/2)}},a.prototype.onMouseUp_=function(){this.isDragging_=!1},a.prototype.isPointerLocked_=function(){return void 0!==(document.pointerLockElement||document.mozPointerLockElement||document.webkitPointerLockElement)},a.prototype.resetPose=function(){this.phi_=0,this.theta_=0},r.exports=a},{"./base.js":48,"./math-util.js":59,"./util.js":68}],61:[function(t){(function(r){"undefined"!=typeof r&&r.window&&(r.document=r.window.document,r.navigator=r.window.navigator),t("./main")}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"./main":58}],62:[function(t,r){function a(){this.loadIcon_();var t=document.createElement("div"),r=t.style;r.position="fixed",r.top=0,r.right=0,r.bottom=0,r.left=0,r.backgroundColor="gray",r.fontFamily="sans-serif",r.zIndex=1e6;var a=document.createElement("img");a.src=this.icon;var r=a.style;r.marginLeft="25%",r.marginTop="25%",r.width="50%",t.appendChild(a);var o=document.createElement("div"),r=o.style;r.textAlign="center",r.fontSize="16px",r.lineHeight="24px",r.margin="24px 25%",r.width="50%",o.innerHTML="Place your phone into your Cardboard viewer.",t.appendChild(o);var i=document.createElement("div"),r=i.style;r.backgroundColor="#CFD8DC",r.position="fixed",r.bottom=0,r.width="100%",r.height="48px",r.padding="14px 24px",r.boxSizing="border-box",r.color="#656A6B",t.appendChild(i);var n=document.createElement("div");n.style.float="left",n.innerHTML="No Cardboard viewer?";var s=document.createElement("a");s.href="https://www.google.com/get/cardboard/get-cardboard/",s.innerHTML="get one",s.target="_blank";var r=s.style;r.float="right",r.fontWeight=600,r.textTransform="uppercase",r.borderLeft="1px solid gray",r.paddingLeft="24px",r.textDecoration="none",r.color="#656A6B",i.appendChild(n),i.appendChild(s),this.overlay=t,this.text=o,this.hide()}var o=t("./util.js");a.prototype.show=function(t){t||this.overlay.parentElement?t&&(this.overlay.parentElement&&this.overlay.parentElement!=t&&this.overlay.parentElement.removeChild(this.overlay),t.appendChild(this.overlay)):document.body.appendChild(this.overlay),this.overlay.style.display="block";var r=this.overlay.querySelector("img"),a=r.style;o.isLandscapeMode()?(a.width="20%",a.marginLeft="40%",a.marginTop="3%"):(a.width="50%",a.marginLeft="25%",a.marginTop="25%")},a.prototype.hide=function(){this.overlay.style.display="none"},a.prototype.showTemporarily=function(t,r){this.show(r),this.timer=setTimeout(this.hide.bind(this),t)},a.prototype.disableShowTemporarily=function(){clearTimeout(this.timer)},a.prototype.update=function(){this.disableShowTemporarily(),!o.isLandscapeMode()&&o.isMobile()?this.show():this.hide()},a.prototype.loadIcon_=function(){this.icon=o.base64("image/svg+xml","PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgd2lkdGg9IjE5OHB4IiBoZWlnaHQ9IjI0MHB4IiB2aWV3Qm94PSIwIDAgMTk4IDI0MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4bWxuczpza2V0Y2g9Imh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaC9ucyI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDMuMy4zICgxMjA4MSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+CiAgICA8dGl0bGU+dHJhbnNpdGlvbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxkZWZzPjwvZGVmcz4KICAgIDxnIGlkPSJQYWdlLTEiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiIHNrZXRjaDp0eXBlPSJNU1BhZ2UiPgogICAgICAgIDxnIGlkPSJ0cmFuc2l0aW9uIiBza2V0Y2g6dHlwZT0iTVNBcnRib2FyZEdyb3VwIj4KICAgICAgICAgICAgPGcgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTQtKy1JbXBvcnRlZC1MYXllcnMtQ29weS0rLUltcG9ydGVkLUxheWVycy1Db3B5LTItQ29weSIgc2tldGNoOnR5cGU9Ik1TTGF5ZXJHcm91cCI+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHktNCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDEwNy4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjYyNSwyLjUyNyBDMTQ5LjYyNSwyLjUyNyAxNTUuODA1LDYuMDk2IDE1Ni4zNjIsNi40MTggTDE1Ni4zNjIsNy4zMDQgQzE1Ni4zNjIsNy40ODEgMTU2LjM3NSw3LjY2NCAxNTYuNCw3Ljg1MyBDMTU2LjQxLDcuOTM0IDE1Ni40Miw4LjAxNSAxNTYuNDI3LDguMDk1IEMxNTYuNTY3LDkuNTEgMTU3LjQwMSwxMS4wOTMgMTU4LjUzMiwxMi4wOTQgTDE2NC4yNTIsMTcuMTU2IEwxNjQuMzMzLDE3LjA2NiBDMTY0LjMzMywxNy4wNjYgMTY4LjcxNSwxNC41MzYgMTY5LjU2OCwxNC4wNDIgQzE3MS4wMjUsMTQuODgzIDE5NS41MzgsMjkuMDM1IDE5NS41MzgsMjkuMDM1IEwxOTUuNTM4LDgzLjAzNiBDMTk1LjUzOCw4My44MDcgMTk1LjE1Miw4NC4yNTMgMTk0LjU5LDg0LjI1MyBDMTk0LjM1Nyw4NC4yNTMgMTk0LjA5NSw4NC4xNzcgMTkzLjgxOCw4NC4wMTcgTDE2OS44NTEsNzAuMTc5IEwxNjkuODM3LDcwLjIwMyBMMTQyLjUxNSw4NS45NzggTDE0MS42NjUsODQuNjU1IEMxMzYuOTM0LDgzLjEyNiAxMzEuOTE3LDgxLjkxNSAxMjYuNzE0LDgxLjA0NSBDMTI2LjcwOSw4MS4wNiAxMjYuNzA3LDgxLjA2OSAxMjYuNzA3LDgxLjA2OSBMMTIxLjY0LDk4LjAzIEwxMTMuNzQ5LDEwMi41ODYgTDExMy43MTIsMTAyLjUyMyBMMTEzLjcxMiwxMzAuMTEzIEMxMTMuNzEyLDEzMC44ODUgMTEzLjMyNiwxMzEuMzMgMTEyLjc2NCwxMzEuMzMgQzExMi41MzIsMTMxLjMzIDExMi4yNjksMTMxLjI1NCAxMTEuOTkyLDEzMS4wOTQgTDY5LjUxOSwxMDYuNTcyIEM2OC41NjksMTA2LjAyMyA2Ny43OTksMTA0LjY5NSA2Ny43OTksMTAzLjYwNSBMNjcuNzk5LDEwMi41NyBMNjcuNzc4LDEwMi42MTcgQzY3LjI3LDEwMi4zOTMgNjYuNjQ4LDEwMi4yNDkgNjUuOTYyLDEwMi4yMTggQzY1Ljg3NSwxMDIuMjE0IDY1Ljc4OCwxMDIuMjEyIDY1LjcwMSwxMDIuMjEyIEM2NS42MDYsMTAyLjIxMiA2NS41MTEsMTAyLjIxNSA2NS40MTYsMTAyLjIxOSBDNjUuMTk1LDEwMi4yMjkgNjQuOTc0LDEwMi4yMzUgNjQuNzU0LDEwMi4yMzUgQzY0LjMzMSwxMDIuMjM1IDYzLjkxMSwxMDIuMjE2IDYzLjQ5OCwxMDIuMTc4IEM2MS44NDMsMTAyLjAyNSA2MC4yOTgsMTAxLjU3OCA1OS4wOTQsMTAwLjg4MiBMMTIuNTE4LDczLjk5MiBMMTIuNTIzLDc0LjAwNCBMMi4yNDUsNTUuMjU0IEMxLjI0NCw1My40MjcgMi4wMDQsNTEuMDM4IDMuOTQzLDQ5LjkxOCBMNTkuOTU0LDE3LjU3MyBDNjAuNjI2LDE3LjE4NSA2MS4zNSwxNy4wMDEgNjIuMDUzLDE3LjAwMSBDNjMuMzc5LDE3LjAwMSA2NC42MjUsMTcuNjYgNjUuMjgsMTguODU0IEw2NS4yODUsMTguODUxIEw2NS41MTIsMTkuMjY0IEw2NS41MDYsMTkuMjY4IEM2NS45MDksMjAuMDAzIDY2LjQwNSwyMC42OCA2Ni45ODMsMjEuMjg2IEw2Ny4yNiwyMS41NTYgQzY5LjE3NCwyMy40MDYgNzEuNzI4LDI0LjM1NyA3NC4zNzMsMjQuMzU3IEM3Ni4zMjIsMjQuMzU3IDc4LjMyMSwyMy44NCA4MC4xNDgsMjIuNzg1IEM4MC4xNjEsMjIuNzg1IDg3LjQ2NywxOC41NjYgODcuNDY3LDE4LjU2NiBDODguMTM5LDE4LjE3OCA4OC44NjMsMTcuOTk0IDg5LjU2NiwxNy45OTQgQzkwLjg5MiwxNy45OTQgOTIuMTM4LDE4LjY1MiA5Mi43OTIsMTkuODQ3IEw5Ni4wNDIsMjUuNzc1IEw5Ni4wNjQsMjUuNzU3IEwxMDIuODQ5LDI5LjY3NCBMMTAyLjc0NCwyOS40OTIgTDE0OS42MjUsMi41MjcgTTE0OS42MjUsMC44OTIgQzE0OS4zNDMsMC44OTIgMTQ5LjA2MiwwLjk2NSAxNDguODEsMS4xMSBMMTAyLjY0MSwyNy42NjYgTDk3LjIzMSwyNC41NDIgTDk0LjIyNiwxOS4wNjEgQzkzLjMxMywxNy4zOTQgOTEuNTI3LDE2LjM1OSA4OS41NjYsMTYuMzU4IEM4OC41NTUsMTYuMzU4IDg3LjU0NiwxNi42MzIgODYuNjQ5LDE3LjE1IEM4My44NzgsMTguNzUgNzkuNjg3LDIxLjE2OSA3OS4zNzQsMjEuMzQ1IEM3OS4zNTksMjEuMzUzIDc5LjM0NSwyMS4zNjEgNzkuMzMsMjEuMzY5IEM3Ny43OTgsMjIuMjU0IDc2LjA4NCwyMi43MjIgNzQuMzczLDIyLjcyMiBDNzIuMDgxLDIyLjcyMiA2OS45NTksMjEuODkgNjguMzk3LDIwLjM4IEw2OC4xNDUsMjAuMTM1IEM2Ny43MDYsMTkuNjcyIDY3LjMyMywxOS4xNTYgNjcuMDA2LDE4LjYwMSBDNjYuOTg4LDE4LjU1OSA2Ni45NjgsMTguNTE5IDY2Ljk0NiwxOC40NzkgTDY2LjcxOSwxOC4wNjUgQzY2LjY5LDE4LjAxMiA2Ni42NTgsMTcuOTYgNjYuNjI0LDE3LjkxMSBDNjUuNjg2LDE2LjMzNyA2My45NTEsMTUuMzY2IDYyLjA1MywxNS4zNjYgQzYxLjA0MiwxNS4zNjYgNjAuMDMzLDE1LjY0IDU5LjEzNiwxNi4xNTggTDMuMTI1LDQ4LjUwMiBDMC40MjYsNTAuMDYxIC0wLjYxMyw1My40NDIgMC44MTEsNTYuMDQgTDExLjA4OSw3NC43OSBDMTEuMjY2LDc1LjExMyAxMS41MzcsNzUuMzUzIDExLjg1LDc1LjQ5NCBMNTguMjc2LDEwMi4yOTggQzU5LjY3OSwxMDMuMTA4IDYxLjQzMywxMDMuNjMgNjMuMzQ4LDEwMy44MDYgQzYzLjgxMiwxMDMuODQ4IDY0LjI4NSwxMDMuODcgNjQuNzU0LDEwMy44NyBDNjUsMTAzLjg3IDY1LjI0OSwxMDMuODY0IDY1LjQ5NCwxMDMuODUyIEM2NS41NjMsMTAzLjg0OSA2NS42MzIsMTAzLjg0NyA2NS43MDEsMTAzLjg0NyBDNjUuNzY0LDEwMy44NDcgNjUuODI4LDEwMy44NDkgNjUuODksMTAzLjg1MiBDNjUuOTg2LDEwMy44NTYgNjYuMDgsMTAzLjg2MyA2Ni4xNzMsMTAzLjg3NCBDNjYuMjgyLDEwNS40NjcgNjcuMzMyLDEwNy4xOTcgNjguNzAyLDEwNy45ODggTDExMS4xNzQsMTMyLjUxIEMxMTEuNjk4LDEzMi44MTIgMTEyLjIzMiwxMzIuOTY1IDExMi43NjQsMTMyLjk2NSBDMTE0LjI2MSwxMzIuOTY1IDExNS4zNDcsMTMxLjc2NSAxMTUuMzQ3LDEzMC4xMTMgTDExNS4zNDcsMTAzLjU1MSBMMTIyLjQ1OCw5OS40NDYgQzEyMi44MTksOTkuMjM3IDEyMy4wODcsOTguODk4IDEyMy4yMDcsOTguNDk4IEwxMjcuODY1LDgyLjkwNSBDMTMyLjI3OSw4My43MDIgMTM2LjU1Nyw4NC43NTMgMTQwLjYwNyw4Ni4wMzMgTDE0MS4xNCw4Ni44NjIgQzE0MS40NTEsODcuMzQ2IDE0MS45NzcsODcuNjEzIDE0Mi41MTYsODcuNjEzIEMxNDIuNzk0LDg3LjYxMyAxNDMuMDc2LDg3LjU0MiAxNDMuMzMzLDg3LjM5MyBMMTY5Ljg2NSw3Mi4wNzYgTDE5Myw4NS40MzMgQzE5My41MjMsODUuNzM1IDE5NC4wNTgsODUuODg4IDE5NC41OSw4NS44ODggQzE5Ni4wODcsODUuODg4IDE5Ny4xNzMsODQuNjg5IDE5Ny4xNzMsODMuMDM2IEwxOTcuMTczLDI5LjAzNSBDMTk3LjE3MywyOC40NTEgMTk2Ljg2MSwyNy45MTEgMTk2LjM1NSwyNy42MTkgQzE5Ni4zNTUsMjcuNjE5IDE3MS44NDMsMTMuNDY3IDE3MC4zODUsMTIuNjI2IEMxNzAuMTMyLDEyLjQ4IDE2OS44NSwxMi40MDcgMTY5LjU2OCwxMi40MDcgQzE2OS4yODUsMTIuNDA3IDE2OS4wMDIsMTIuNDgxIDE2OC43NDksMTIuNjI3IEMxNjguMTQzLDEyLjk3OCAxNjUuNzU2LDE0LjM1NyAxNjQuNDI0LDE1LjEyNSBMMTU5LjYxNSwxMC44NyBDMTU4Ljc5NiwxMC4xNDUgMTU4LjE1NCw4LjkzNyAxNTguMDU0LDcuOTM0IEMxNTguMDQ1LDcuODM3IDE1OC4wMzQsNy43MzkgMTU4LjAyMSw3LjY0IEMxNTguMDA1LDcuNTIzIDE1Ny45OTgsNy40MSAxNTcuOTk4LDcuMzA0IEwxNTcuOTk4LDYuNDE4IEMxNTcuOTk4LDUuODM0IDE1Ny42ODYsNS4yOTUgMTU3LjE4MSw1LjAwMiBDMTU2LjYyNCw0LjY4IDE1MC40NDIsMS4xMTEgMTUwLjQ0MiwxLjExMSBDMTUwLjE4OSwwLjk2NSAxNDkuOTA3LDAuODkyIDE0OS42MjUsMC44OTIiIGlkPSJGaWxsLTEiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTYuMDI3LDI1LjYzNiBMMTQyLjYwMyw1Mi41MjcgQzE0My44MDcsNTMuMjIyIDE0NC41ODIsNTQuMTE0IDE0NC44NDUsNTUuMDY4IEwxNDQuODM1LDU1LjA3NSBMNjMuNDYxLDEwMi4wNTcgTDYzLjQ2LDEwMi4wNTcgQzYxLjgwNiwxMDEuOTA1IDYwLjI2MSwxMDEuNDU3IDU5LjA1NywxMDAuNzYyIEwxMi40ODEsNzMuODcxIEw5Ni4wMjcsMjUuNjM2IiBpZD0iRmlsbC0yIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYzLjQ2MSwxMDIuMTc0IEM2My40NTMsMTAyLjE3NCA2My40NDYsMTAyLjE3NCA2My40MzksMTAyLjE3MiBDNjEuNzQ2LDEwMi4wMTYgNjAuMjExLDEwMS41NjMgNTguOTk4LDEwMC44NjMgTDEyLjQyMiw3My45NzMgQzEyLjM4Niw3My45NTIgMTIuMzY0LDczLjkxNCAxMi4zNjQsNzMuODcxIEMxMi4zNjQsNzMuODMgMTIuMzg2LDczLjc5MSAxMi40MjIsNzMuNzcgTDk1Ljk2OCwyNS41MzUgQzk2LjAwNCwyNS41MTQgOTYuMDQ5LDI1LjUxNCA5Ni4wODUsMjUuNTM1IEwxNDIuNjYxLDUyLjQyNiBDMTQzLjg4OCw1My4xMzQgMTQ0LjY4Miw1NC4wMzggMTQ0Ljk1Nyw1NS4wMzcgQzE0NC45Nyw1NS4wODMgMTQ0Ljk1Myw1NS4xMzMgMTQ0LjkxNSw1NS4xNjEgQzE0NC45MTEsNTUuMTY1IDE0NC44OTgsNTUuMTc0IDE0NC44OTQsNTUuMTc3IEw2My41MTksMTAyLjE1OCBDNjMuNTAxLDEwMi4xNjkgNjMuNDgxLDEwMi4xNzQgNjMuNDYxLDEwMi4xNzQgTDYzLjQ2MSwxMDIuMTc0IFogTTEyLjcxNCw3My44NzEgTDU5LjExNSwxMDAuNjYxIEM2MC4yOTMsMTAxLjM0MSA2MS43ODYsMTAxLjc4MiA2My40MzUsMTAxLjkzNyBMMTQ0LjcwNyw1NS4wMTUgQzE0NC40MjgsNTQuMTA4IDE0My42ODIsNTMuMjg1IDE0Mi41NDQsNTIuNjI4IEw5Ni4wMjcsMjUuNzcxIEwxMi43MTQsNzMuODcxIEwxMi43MTQsNzMuODcxIFoiIGlkPSJGaWxsLTMiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ4LjMyNyw1OC40NzEgQzE0OC4xNDUsNTguNDggMTQ3Ljk2Miw1OC40OCAxNDcuNzgxLDU4LjQ3MiBDMTQ1Ljg4Nyw1OC4zODkgMTQ0LjQ3OSw1Ny40MzQgMTQ0LjYzNiw1Ni4zNCBDMTQ0LjY4OSw1NS45NjcgMTQ0LjY2NCw1NS41OTcgMTQ0LjU2NCw1NS4yMzUgTDYzLjQ2MSwxMDIuMDU3IEM2NC4wODksMTAyLjExNSA2NC43MzMsMTAyLjEzIDY1LjM3OSwxMDIuMDk5IEM2NS41NjEsMTAyLjA5IDY1Ljc0MywxMDIuMDkgNjUuOTI1LDEwMi4wOTggQzY3LjgxOSwxMDIuMTgxIDY5LjIyNywxMDMuMTM2IDY5LjA3LDEwNC4yMyBMMTQ4LjMyNyw1OC40NzEiIGlkPSJGaWxsLTQiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNjkuMDcsMTA0LjM0NyBDNjkuMDQ4LDEwNC4zNDcgNjkuMDI1LDEwNC4zNCA2OS4wMDUsMTA0LjMyNyBDNjguOTY4LDEwNC4zMDEgNjguOTQ4LDEwNC4yNTcgNjguOTU1LDEwNC4yMTMgQzY5LDEwMy44OTYgNjguODk4LDEwMy41NzYgNjguNjU4LDEwMy4yODggQzY4LjE1MywxMDIuNjc4IDY3LjEwMywxMDIuMjY2IDY1LjkyLDEwMi4yMTQgQzY1Ljc0MiwxMDIuMjA2IDY1LjU2MywxMDIuMjA3IDY1LjM4NSwxMDIuMjE1IEM2NC43NDIsMTAyLjI0NiA2NC4wODcsMTAyLjIzMiA2My40NSwxMDIuMTc0IEM2My4zOTksMTAyLjE2OSA2My4zNTgsMTAyLjEzMiA2My4zNDcsMTAyLjA4MiBDNjMuMzM2LDEwMi4wMzMgNjMuMzU4LDEwMS45ODEgNjMuNDAyLDEwMS45NTYgTDE0NC41MDYsNTUuMTM0IEMxNDQuNTM3LDU1LjExNiAxNDQuNTc1LDU1LjExMyAxNDQuNjA5LDU1LjEyNyBDMTQ0LjY0Miw1NS4xNDEgMTQ0LjY2OCw1NS4xNyAxNDQuNjc3LDU1LjIwNCBDMTQ0Ljc4MSw1NS41ODUgMTQ0LjgwNiw1NS45NzIgMTQ0Ljc1MSw1Ni4zNTcgQzE0NC43MDYsNTYuNjczIDE0NC44MDgsNTYuOTk0IDE0NS4wNDcsNTcuMjgyIEMxNDUuNTUzLDU3Ljg5MiAxNDYuNjAyLDU4LjMwMyAxNDcuNzg2LDU4LjM1NSBDMTQ3Ljk2NCw1OC4zNjMgMTQ4LjE0Myw1OC4zNjMgMTQ4LjMyMSw1OC4zNTQgQzE0OC4zNzcsNTguMzUyIDE0OC40MjQsNTguMzg3IDE0OC40MzksNTguNDM4IEMxNDguNDU0LDU4LjQ5IDE0OC40MzIsNTguNTQ1IDE0OC4zODUsNTguNTcyIEw2OS4xMjksMTA0LjMzMSBDNjkuMTExLDEwNC4zNDIgNjkuMDksMTA0LjM0NyA2OS4wNywxMDQuMzQ3IEw2OS4wNywxMDQuMzQ3IFogTTY1LjY2NSwxMDEuOTc1IEM2NS43NTQsMTAxLjk3NSA2NS44NDIsMTAxLjk3NyA2NS45MywxMDEuOTgxIEM2Ny4xOTYsMTAyLjAzNyA2OC4yODMsMTAyLjQ2OSA2OC44MzgsMTAzLjEzOSBDNjkuMDY1LDEwMy40MTMgNjkuMTg4LDEwMy43MTQgNjkuMTk4LDEwNC4wMjEgTDE0Ny44ODMsNTguNTkyIEMxNDcuODQ3LDU4LjU5MiAxNDcuODExLDU4LjU5MSAxNDcuNzc2LDU4LjU4OSBDMTQ2LjUwOSw1OC41MzMgMTQ1LjQyMiw1OC4xIDE0NC44NjcsNTcuNDMxIEMxNDQuNTg1LDU3LjA5MSAxNDQuNDY1LDU2LjcwNyAxNDQuNTIsNTYuMzI0IEMxNDQuNTYzLDU2LjAyMSAxNDQuNTUyLDU1LjcxNiAxNDQuNDg4LDU1LjQxNCBMNjMuODQ2LDEwMS45NyBDNjQuMzUzLDEwMi4wMDIgNjQuODY3LDEwMi4wMDYgNjUuMzc0LDEwMS45ODIgQzY1LjQ3MSwxMDEuOTc3IDY1LjU2OCwxMDEuOTc1IDY1LjY2NSwxMDEuOTc1IEw2NS42NjUsMTAxLjk3NSBaIiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTIuMjA4LDU1LjEzNCBDMS4yMDcsNTMuMzA3IDEuOTY3LDUwLjkxNyAzLjkwNiw0OS43OTcgTDU5LjkxNywxNy40NTMgQzYxLjg1NiwxNi4zMzMgNjQuMjQxLDE2LjkwNyA2NS4yNDMsMTguNzM0IEw2NS40NzUsMTkuMTQ0IEM2NS44NzIsMTkuODgyIDY2LjM2OCwyMC41NiA2Ni45NDUsMjEuMTY1IEw2Ny4yMjMsMjEuNDM1IEM3MC41NDgsMjQuNjQ5IDc1LjgwNiwyNS4xNTEgODAuMTExLDIyLjY2NSBMODcuNDMsMTguNDQ1IEM4OS4zNywxNy4zMjYgOTEuNzU0LDE3Ljg5OSA5Mi43NTUsMTkuNzI3IEw5Ni4wMDUsMjUuNjU1IEwxMi40ODYsNzMuODg0IEwyLjIwOCw1NS4xMzQgWiIgaWQ9IkZpbGwtNiIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMi40ODYsNzQuMDAxIEMxMi40NzYsNzQuMDAxIDEyLjQ2NSw3My45OTkgMTIuNDU1LDczLjk5NiBDMTIuNDI0LDczLjk4OCAxMi4zOTksNzMuOTY3IDEyLjM4NCw3My45NCBMMi4xMDYsNTUuMTkgQzEuMDc1LDUzLjMxIDEuODU3LDUwLjg0NSAzLjg0OCw0OS42OTYgTDU5Ljg1OCwxNy4zNTIgQzYwLjUyNSwxNi45NjcgNjEuMjcxLDE2Ljc2NCA2Mi4wMTYsMTYuNzY0IEM2My40MzEsMTYuNzY0IDY0LjY2NiwxNy40NjYgNjUuMzI3LDE4LjY0NiBDNjUuMzM3LDE4LjY1NCA2NS4zNDUsMTguNjYzIDY1LjM1MSwxOC42NzQgTDY1LjU3OCwxOS4wODggQzY1LjU4NCwxOS4xIDY1LjU4OSwxOS4xMTIgNjUuNTkxLDE5LjEyNiBDNjUuOTg1LDE5LjgzOCA2Ni40NjksMjAuNDk3IDY3LjAzLDIxLjA4NSBMNjcuMzA1LDIxLjM1MSBDNjkuMTUxLDIzLjEzNyA3MS42NDksMjQuMTIgNzQuMzM2LDI0LjEyIEM3Ni4zMTMsMjQuMTIgNzguMjksMjMuNTgyIDgwLjA1MywyMi41NjMgQzgwLjA2NCwyMi41NTcgODAuMDc2LDIyLjU1MyA4MC4wODgsMjIuNTUgTDg3LjM3MiwxOC4zNDQgQzg4LjAzOCwxNy45NTkgODguNzg0LDE3Ljc1NiA4OS41MjksMTcuNzU2IEM5MC45NTYsMTcuNzU2IDkyLjIwMSwxOC40NzIgOTIuODU4LDE5LjY3IEw5Ni4xMDcsMjUuNTk5IEM5Ni4xMzgsMjUuNjU0IDk2LjExOCwyNS43MjQgOTYuMDYzLDI1Ljc1NiBMMTIuNTQ1LDczLjk4NSBDMTIuNTI2LDczLjk5NiAxMi41MDYsNzQuMDAxIDEyLjQ4Niw3NC4wMDEgTDEyLjQ4Niw3NC4wMDEgWiBNNjIuMDE2LDE2Ljk5NyBDNjEuMzEyLDE2Ljk5NyA2MC42MDYsMTcuMTkgNTkuOTc1LDE3LjU1NCBMMy45NjUsNDkuODk5IEMyLjA4Myw1MC45ODUgMS4zNDEsNTMuMzA4IDIuMzEsNTUuMDc4IEwxMi41MzEsNzMuNzIzIEw5NS44NDgsMjUuNjExIEw5Mi42NTMsMTkuNzgyIEM5Mi4wMzgsMTguNjYgOTAuODcsMTcuOTkgODkuNTI5LDE3Ljk5IEM4OC44MjUsMTcuOTkgODguMTE5LDE4LjE4MiA4Ny40ODksMTguNTQ3IEw4MC4xNzIsMjIuNzcyIEM4MC4xNjEsMjIuNzc4IDgwLjE0OSwyMi43ODIgODAuMTM3LDIyLjc4NSBDNzguMzQ2LDIzLjgxMSA3Ni4zNDEsMjQuMzU0IDc0LjMzNiwyNC4zNTQgQzcxLjU4OCwyNC4zNTQgNjkuMDMzLDIzLjM0NyA2Ny4xNDIsMjEuNTE5IEw2Ni44NjQsMjEuMjQ5IEM2Ni4yNzcsMjAuNjM0IDY1Ljc3NCwxOS45NDcgNjUuMzY3LDE5LjIwMyBDNjUuMzYsMTkuMTkyIDY1LjM1NiwxOS4xNzkgNjUuMzU0LDE5LjE2NiBMNjUuMTYzLDE4LjgxOSBDNjUuMTU0LDE4LjgxMSA2NS4xNDYsMTguODAxIDY1LjE0LDE4Ljc5IEM2NC41MjUsMTcuNjY3IDYzLjM1NywxNi45OTcgNjIuMDE2LDE2Ljk5NyBMNjIuMDE2LDE2Ljk5NyBaIiBpZD0iRmlsbC03IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQyLjQzNCw0OC44MDggTDQyLjQzNCw0OC44MDggQzM5LjkyNCw0OC44MDcgMzcuNzM3LDQ3LjU1IDM2LjU4Miw0NS40NDMgQzM0Ljc3MSw0Mi4xMzkgMzYuMTQ0LDM3LjgwOSAzOS42NDEsMzUuNzg5IEw1MS45MzIsMjguNjkxIEM1My4xMDMsMjguMDE1IDU0LjQxMywyNy42NTggNTUuNzIxLDI3LjY1OCBDNTguMjMxLDI3LjY1OCA2MC40MTgsMjguOTE2IDYxLjU3MywzMS4wMjMgQzYzLjM4NCwzNC4zMjcgNjIuMDEyLDM4LjY1NyA1OC41MTQsNDAuNjc3IEw0Ni4yMjMsNDcuNzc1IEM0NS4wNTMsNDguNDUgNDMuNzQyLDQ4LjgwOCA0Mi40MzQsNDguODA4IEw0Mi40MzQsNDguODA4IFogTTU1LjcyMSwyOC4xMjUgQzU0LjQ5NSwyOC4xMjUgNTMuMjY1LDI4LjQ2MSA1Mi4xNjYsMjkuMDk2IEwzOS44NzUsMzYuMTk0IEMzNi41OTYsMzguMDg3IDM1LjMwMiw0Mi4xMzYgMzYuOTkyLDQ1LjIxOCBDMzguMDYzLDQ3LjE3MyA0MC4wOTgsNDguMzQgNDIuNDM0LDQ4LjM0IEM0My42NjEsNDguMzQgNDQuODksNDguMDA1IDQ1Ljk5LDQ3LjM3IEw1OC4yODEsNDAuMjcyIEM2MS41NiwzOC4zNzkgNjIuODUzLDM0LjMzIDYxLjE2NCwzMS4yNDggQzYwLjA5MiwyOS4yOTMgNTguMDU4LDI4LjEyNSA1NS43MjEsMjguMTI1IEw1NS43MjEsMjguMTI1IFoiIGlkPSJGaWxsLTgiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTQ5LjU4OCwyLjQwNyBDMTQ5LjU4OCwyLjQwNyAxNTUuNzY4LDUuOTc1IDE1Ni4zMjUsNi4yOTcgTDE1Ni4zMjUsNy4xODQgQzE1Ni4zMjUsNy4zNiAxNTYuMzM4LDcuNTQ0IDE1Ni4zNjIsNy43MzMgQzE1Ni4zNzMsNy44MTQgMTU2LjM4Miw3Ljg5NCAxNTYuMzksNy45NzUgQzE1Ni41Myw5LjM5IDE1Ny4zNjMsMTAuOTczIDE1OC40OTUsMTEuOTc0IEwxNjUuODkxLDE4LjUxOSBDMTY2LjA2OCwxOC42NzUgMTY2LjI0OSwxOC44MTQgMTY2LjQzMiwxOC45MzQgQzE2OC4wMTEsMTkuOTc0IDE2OS4zODIsMTkuNCAxNjkuNDk0LDE3LjY1MiBDMTY5LjU0MywxNi44NjggMTY5LjU1MSwxNi4wNTcgMTY5LjUxNywxNS4yMjMgTDE2OS41MTQsMTUuMDYzIEwxNjkuNTE0LDEzLjkxMiBDMTcwLjc4LDE0LjY0MiAxOTUuNTAxLDI4LjkxNSAxOTUuNTAxLDI4LjkxNSBMMTk1LjUwMSw4Mi45MTUgQzE5NS41MDEsODQuMDA1IDE5NC43MzEsODQuNDQ1IDE5My43ODEsODMuODk3IEwxNTEuMzA4LDU5LjM3NCBDMTUwLjM1OCw1OC44MjYgMTQ5LjU4OCw1Ny40OTcgMTQ5LjU4OCw1Ni40MDggTDE0OS41ODgsMjIuMzc1IiBpZD0iRmlsbC05IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE5NC41NTMsODQuMjUgQzE5NC4yOTYsODQuMjUgMTk0LjAxMyw4NC4xNjUgMTkzLjcyMiw4My45OTcgTDE1MS4yNSw1OS40NzYgQzE1MC4yNjksNTguOTA5IDE0OS40NzEsNTcuNTMzIDE0OS40NzEsNTYuNDA4IEwxNDkuNDcxLDIyLjM3NSBMMTQ5LjcwNSwyMi4zNzUgTDE0OS43MDUsNTYuNDA4IEMxNDkuNzA1LDU3LjQ1OSAxNTAuNDUsNTguNzQ0IDE1MS4zNjYsNTkuMjc0IEwxOTMuODM5LDgzLjc5NSBDMTk0LjI2Myw4NC4wNCAxOTQuNjU1LDg0LjA4MyAxOTQuOTQyLDgzLjkxNyBDMTk1LjIyNyw4My43NTMgMTk1LjM4NCw4My4zOTcgMTk1LjM4NCw4Mi45MTUgTDE5NS4zODQsMjguOTgyIEMxOTQuMTAyLDI4LjI0MiAxNzIuMTA0LDE1LjU0MiAxNjkuNjMxLDE0LjExNCBMMTY5LjYzNCwxNS4yMiBDMTY5LjY2OCwxNi4wNTIgMTY5LjY2LDE2Ljg3NCAxNjkuNjEsMTcuNjU5IEMxNjkuNTU2LDE4LjUwMyAxNjkuMjE0LDE5LjEyMyAxNjguNjQ3LDE5LjQwNSBDMTY4LjAyOCwxOS43MTQgMTY3LjE5NywxOS41NzggMTY2LjM2NywxOS4wMzIgQzE2Ni4xODEsMTguOTA5IDE2NS45OTUsMTguNzY2IDE2NS44MTQsMTguNjA2IEwxNTguNDE3LDEyLjA2MiBDMTU3LjI1OSwxMS4wMzYgMTU2LjQxOCw5LjQzNyAxNTYuMjc0LDcuOTg2IEMxNTYuMjY2LDcuOTA3IDE1Ni4yNTcsNy44MjcgMTU2LjI0Nyw3Ljc0OCBDMTU2LjIyMSw3LjU1NSAxNTYuMjA5LDcuMzY1IDE1Ni4yMDksNy4xODQgTDE1Ni4yMDksNi4zNjQgQzE1NS4zNzUsNS44ODMgMTQ5LjUyOSwyLjUwOCAxNDkuNTI5LDIuNTA4IEwxNDkuNjQ2LDIuMzA2IEMxNDkuNjQ2LDIuMzA2IDE1NS44MjcsNS44NzQgMTU2LjM4NCw2LjE5NiBMMTU2LjQ0Miw2LjIzIEwxNTYuNDQyLDcuMTg0IEMxNTYuNDQyLDcuMzU1IDE1Ni40NTQsNy41MzUgMTU2LjQ3OCw3LjcxNyBDMTU2LjQ4OSw3LjggMTU2LjQ5OSw3Ljg4MiAxNTYuNTA3LDcuOTYzIEMxNTYuNjQ1LDkuMzU4IDE1Ny40NTUsMTAuODk4IDE1OC41NzIsMTEuODg2IEwxNjUuOTY5LDE4LjQzMSBDMTY2LjE0MiwxOC41ODQgMTY2LjMxOSwxOC43MiAxNjYuNDk2LDE4LjgzNyBDMTY3LjI1NCwxOS4zMzYgMTY4LDE5LjQ2NyAxNjguNTQzLDE5LjE5NiBDMTY5LjAzMywxOC45NTMgMTY5LjMyOSwxOC40MDEgMTY5LjM3NywxNy42NDUgQzE2OS40MjcsMTYuODY3IDE2OS40MzQsMTYuMDU0IDE2OS40MDEsMTUuMjI4IEwxNjkuMzk3LDE1LjA2NSBMMTY5LjM5NywxMy43MSBMMTY5LjU3MiwxMy44MSBDMTcwLjgzOSwxNC41NDEgMTk1LjU1OSwyOC44MTQgMTk1LjU1OSwyOC44MTQgTDE5NS42MTgsMjguODQ3IEwxOTUuNjE4LDgyLjkxNSBDMTk1LjYxOCw4My40ODQgMTk1LjQyLDgzLjkxMSAxOTUuMDU5LDg0LjExOSBDMTk0LjkwOCw4NC4yMDYgMTk0LjczNyw4NC4yNSAxOTQuNTUzLDg0LjI1IiBpZD0iRmlsbC0xMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDUuNjg1LDU2LjE2MSBMMTY5LjgsNzAuMDgzIEwxNDMuODIyLDg1LjA4MSBMMTQyLjM2LDg0Ljc3NCBDMTM1LjgyNiw4Mi42MDQgMTI4LjczMiw4MS4wNDYgMTIxLjM0MSw4MC4xNTggQzExNi45NzYsNzkuNjM0IDExMi42NzgsODEuMjU0IDExMS43NDMsODMuNzc4IEMxMTEuNTA2LDg0LjQxNCAxMTEuNTAzLDg1LjA3MSAxMTEuNzMyLDg1LjcwNiBDMTEzLjI3LDg5Ljk3MyAxMTUuOTY4LDk0LjA2OSAxMTkuNzI3LDk3Ljg0MSBMMTIwLjI1OSw5OC42ODYgQzEyMC4yNiw5OC42ODUgOTQuMjgyLDExMy42ODMgOTQuMjgyLDExMy42ODMgTDcwLjE2Nyw5OS43NjEgTDE0NS42ODUsNTYuMTYxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik05NC4yODIsMTEzLjgxOCBMOTQuMjIzLDExMy43ODUgTDY5LjkzMyw5OS43NjEgTDcwLjEwOCw5OS42NiBMMTQ1LjY4NSw1Ni4wMjYgTDE0NS43NDMsNTYuMDU5IEwxNzAuMDMzLDcwLjA4MyBMMTQzLjg0Miw4NS4yMDUgTDE0My43OTcsODUuMTk1IEMxNDMuNzcyLDg1LjE5IDE0Mi4zMzYsODQuODg4IDE0Mi4zMzYsODQuODg4IEMxMzUuNzg3LDgyLjcxNCAxMjguNzIzLDgxLjE2MyAxMjEuMzI3LDgwLjI3NCBDMTIwLjc4OCw4MC4yMDkgMTIwLjIzNiw4MC4xNzcgMTE5LjY4OSw4MC4xNzcgQzExNS45MzEsODAuMTc3IDExMi42MzUsODEuNzA4IDExMS44NTIsODMuODE5IEMxMTEuNjI0LDg0LjQzMiAxMTEuNjIxLDg1LjA1MyAxMTEuODQyLDg1LjY2NyBDMTEzLjM3Nyw4OS45MjUgMTE2LjA1OCw5My45OTMgMTE5LjgxLDk3Ljc1OCBMMTE5LjgyNiw5Ny43NzkgTDEyMC4zNTIsOTguNjE0IEMxMjAuMzU0LDk4LjYxNyAxMjAuMzU2LDk4LjYyIDEyMC4zNTgsOTguNjI0IEwxMjAuNDIyLDk4LjcyNiBMMTIwLjMxNyw5OC43ODcgQzEyMC4yNjQsOTguODE4IDk0LjU5OSwxMTMuNjM1IDk0LjM0LDExMy43ODUgTDk0LjI4MiwxMTMuODE4IEw5NC4yODIsMTEzLjgxOCBaIE03MC40MDEsOTkuNzYxIEw5NC4yODIsMTEzLjU0OSBMMTE5LjA4NCw5OS4yMjkgQzExOS42Myw5OC45MTQgMTE5LjkzLDk4Ljc0IDEyMC4xMDEsOTguNjU0IEwxMTkuNjM1LDk3LjkxNCBDMTE1Ljg2NCw5NC4xMjcgMTEzLjE2OCw5MC4wMzMgMTExLjYyMiw4NS43NDYgQzExMS4zODIsODUuMDc5IDExMS4zODYsODQuNDA0IDExMS42MzMsODMuNzM4IEMxMTIuNDQ4LDgxLjUzOSAxMTUuODM2LDc5Ljk0MyAxMTkuNjg5LDc5Ljk0MyBDMTIwLjI0Niw3OS45NDMgMTIwLjgwNiw3OS45NzYgMTIxLjM1NSw4MC4wNDIgQzEyOC43NjcsODAuOTMzIDEzNS44NDYsODIuNDg3IDE0Mi4zOTYsODQuNjYzIEMxNDMuMjMyLDg0LjgzOCAxNDMuNjExLDg0LjkxNyAxNDMuNzg2LDg0Ljk2NyBMMTY5LjU2Niw3MC4wODMgTDE0NS42ODUsNTYuMjk1IEw3MC40MDEsOTkuNzYxIEw3MC40MDEsOTkuNzYxIFoiIGlkPSJGaWxsLTEyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2Ny4yMywxOC45NzkgTDE2Ny4yMyw2OS44NSBMMTM5LjkwOSw4NS42MjMgTDEzMy40NDgsNzEuNDU2IEMxMzIuNTM4LDY5LjQ2IDEzMC4wMiw2OS43MTggMTI3LjgyNCw3Mi4wMyBDMTI2Ljc2OSw3My4xNCAxMjUuOTMxLDc0LjU4NSAxMjUuNDk0LDc2LjA0OCBMMTE5LjAzNCw5Ny42NzYgTDkxLjcxMiwxMTMuNDUgTDkxLjcxMiw2Mi41NzkgTDE2Ny4yMywxOC45NzkiIGlkPSJGaWxsLTEzIiBmaWxsPSIjRkZGRkZGIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTkxLjcxMiwxMTMuNTY3IEM5MS42OTIsMTEzLjU2NyA5MS42NzIsMTEzLjU2MSA5MS42NTMsMTEzLjU1MSBDOTEuNjE4LDExMy41MyA5MS41OTUsMTEzLjQ5MiA5MS41OTUsMTEzLjQ1IEw5MS41OTUsNjIuNTc5IEM5MS41OTUsNjIuNTM3IDkxLjYxOCw2Mi40OTkgOTEuNjUzLDYyLjQ3OCBMMTY3LjE3MiwxOC44NzggQzE2Ny4yMDgsMTguODU3IDE2Ny4yNTIsMTguODU3IDE2Ny4yODgsMTguODc4IEMxNjcuMzI0LDE4Ljg5OSAxNjcuMzQ3LDE4LjkzNyAxNjcuMzQ3LDE4Ljk3OSBMMTY3LjM0Nyw2OS44NSBDMTY3LjM0Nyw2OS44OTEgMTY3LjMyNCw2OS45MyAxNjcuMjg4LDY5Ljk1IEwxMzkuOTY3LDg1LjcyNSBDMTM5LjkzOSw4NS43NDEgMTM5LjkwNSw4NS43NDUgMTM5Ljg3Myw4NS43MzUgQzEzOS44NDIsODUuNzI1IDEzOS44MTYsODUuNzAyIDEzOS44MDIsODUuNjcyIEwxMzMuMzQyLDcxLjUwNCBDMTMyLjk2Nyw3MC42ODIgMTMyLjI4LDcwLjIyOSAxMzEuNDA4LDcwLjIyOSBDMTMwLjMxOSw3MC4yMjkgMTI5LjA0NCw3MC45MTUgMTI3LjkwOCw3Mi4xMSBDMTI2Ljg3NCw3My4yIDEyNi4wMzQsNzQuNjQ3IDEyNS42MDYsNzYuMDgyIEwxMTkuMTQ2LDk3LjcwOSBDMTE5LjEzNyw5Ny43MzggMTE5LjExOCw5Ny43NjIgMTE5LjA5Miw5Ny43NzcgTDkxLjc3LDExMy41NTEgQzkxLjc1MiwxMTMuNTYxIDkxLjczMiwxMTMuNTY3IDkxLjcxMiwxMTMuNTY3IEw5MS43MTIsMTEzLjU2NyBaIE05MS44MjksNjIuNjQ3IEw5MS44MjksMTEzLjI0OCBMMTE4LjkzNSw5Ny41OTggTDEyNS4zODIsNzYuMDE1IEMxMjUuODI3LDc0LjUyNSAxMjYuNjY0LDczLjA4MSAxMjcuNzM5LDcxLjk1IEMxMjguOTE5LDcwLjcwOCAxMzAuMjU2LDY5Ljk5NiAxMzEuNDA4LDY5Ljk5NiBDMTMyLjM3Nyw2OS45OTYgMTMzLjEzOSw3MC40OTcgMTMzLjU1NCw3MS40MDcgTDEzOS45NjEsODUuNDU4IEwxNjcuMTEzLDY5Ljc4MiBMMTY3LjExMywxOS4xODEgTDkxLjgyOSw2Mi42NDcgTDkxLjgyOSw2Mi42NDcgWiIgaWQ9IkZpbGwtMTQiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTY4LjU0MywxOS4yMTMgTDE2OC41NDMsNzAuMDgzIEwxNDEuMjIxLDg1Ljg1NyBMMTM0Ljc2MSw3MS42ODkgQzEzMy44NTEsNjkuNjk0IDEzMS4zMzMsNjkuOTUxIDEyOS4xMzcsNzIuMjYzIEMxMjguMDgyLDczLjM3NCAxMjcuMjQ0LDc0LjgxOSAxMjYuODA3LDc2LjI4MiBMMTIwLjM0Niw5Ny45MDkgTDkzLjAyNSwxMTMuNjgzIEw5My4wMjUsNjIuODEzIEwxNjguNTQzLDE5LjIxMyIgaWQ9IkZpbGwtMTUiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTMuMDI1LDExMy44IEM5My4wMDUsMTEzLjggOTIuOTg0LDExMy43OTUgOTIuOTY2LDExMy43ODUgQzkyLjkzMSwxMTMuNzY0IDkyLjkwOCwxMTMuNzI1IDkyLjkwOCwxMTMuNjg0IEw5Mi45MDgsNjIuODEzIEM5Mi45MDgsNjIuNzcxIDkyLjkzMSw2Mi43MzMgOTIuOTY2LDYyLjcxMiBMMTY4LjQ4NCwxOS4xMTIgQzE2OC41MiwxOS4wOSAxNjguNTY1LDE5LjA5IDE2OC42MDEsMTkuMTEyIEMxNjguNjM3LDE5LjEzMiAxNjguNjYsMTkuMTcxIDE2OC42NiwxOS4yMTIgTDE2OC42Niw3MC4wODMgQzE2OC42Niw3MC4xMjUgMTY4LjYzNyw3MC4xNjQgMTY4LjYwMSw3MC4xODQgTDE0MS4yOCw4NS45NTggQzE0MS4yNTEsODUuOTc1IDE0MS4yMTcsODUuOTc5IDE0MS4xODYsODUuOTY4IEMxNDEuMTU0LDg1Ljk1OCAxNDEuMTI5LDg1LjkzNiAxNDEuMTE1LDg1LjkwNiBMMTM0LjY1NSw3MS43MzggQzEzNC4yOCw3MC45MTUgMTMzLjU5Myw3MC40NjMgMTMyLjcyLDcwLjQ2MyBDMTMxLjYzMiw3MC40NjMgMTMwLjM1Nyw3MS4xNDggMTI5LjIyMSw3Mi4zNDQgQzEyOC4xODYsNzMuNDMzIDEyNy4zNDcsNzQuODgxIDEyNi45MTksNzYuMzE1IEwxMjAuNDU4LDk3Ljk0MyBDMTIwLjQ1LDk3Ljk3MiAxMjAuNDMxLDk3Ljk5NiAxMjAuNDA1LDk4LjAxIEw5My4wODMsMTEzLjc4NSBDOTMuMDY1LDExMy43OTUgOTMuMDQ1LDExMy44IDkzLjAyNSwxMTMuOCBMOTMuMDI1LDExMy44IFogTTkzLjE0Miw2Mi44ODEgTDkzLjE0MiwxMTMuNDgxIEwxMjAuMjQ4LDk3LjgzMiBMMTI2LjY5NSw3Ni4yNDggQzEyNy4xNCw3NC43NTggMTI3Ljk3Nyw3My4zMTUgMTI5LjA1Miw3Mi4xODMgQzEzMC4yMzEsNzAuOTQyIDEzMS41NjgsNzAuMjI5IDEzMi43Miw3MC4yMjkgQzEzMy42ODksNzAuMjI5IDEzNC40NTIsNzAuNzMxIDEzNC44NjcsNzEuNjQxIEwxNDEuMjc0LDg1LjY5MiBMMTY4LjQyNiw3MC4wMTYgTDE2OC40MjYsMTkuNDE1IEw5My4xNDIsNjIuODgxIEw5My4xNDIsNjIuODgxIFoiIGlkPSJGaWxsLTE2IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS44LDcwLjA4MyBMMTQyLjQ3OCw4NS44NTcgTDEzNi4wMTgsNzEuNjg5IEMxMzUuMTA4LDY5LjY5NCAxMzIuNTksNjkuOTUxIDEzMC4zOTMsNzIuMjYzIEMxMjkuMzM5LDczLjM3NCAxMjguNSw3NC44MTkgMTI4LjA2NCw3Ni4yODIgTDEyMS42MDMsOTcuOTA5IEw5NC4yODIsMTEzLjY4MyBMOTQuMjgyLDYyLjgxMyBMMTY5LjgsMTkuMjEzIEwxNjkuOCw3MC4wODMgWiIgaWQ9IkZpbGwtMTciIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNOTQuMjgyLDExMy45MTcgQzk0LjI0MSwxMTMuOTE3IDk0LjIwMSwxMTMuOTA3IDk0LjE2NSwxMTMuODg2IEM5NC4wOTMsMTEzLjg0NSA5NC4wNDgsMTEzLjc2NyA5NC4wNDgsMTEzLjY4NCBMOTQuMDQ4LDYyLjgxMyBDOTQuMDQ4LDYyLjczIDk0LjA5Myw2Mi42NTIgOTQuMTY1LDYyLjYxMSBMMTY5LjY4MywxOS4wMSBDMTY5Ljc1NSwxOC45NjkgMTY5Ljg0NCwxOC45NjkgMTY5LjkxNywxOS4wMSBDMTY5Ljk4OSwxOS4wNTIgMTcwLjAzMywxOS4xMjkgMTcwLjAzMywxOS4yMTIgTDE3MC4wMzMsNzAuMDgzIEMxNzAuMDMzLDcwLjE2NiAxNjkuOTg5LDcwLjI0NCAxNjkuOTE3LDcwLjI4NSBMMTQyLjU5NSw4Ni4wNiBDMTQyLjUzOCw4Ni4wOTIgMTQyLjQ2OSw4Ni4xIDE0Mi40MDcsODYuMDggQzE0Mi4zNDQsODYuMDYgMTQyLjI5Myw4Ni4wMTQgMTQyLjI2Niw4NS45NTQgTDEzNS44MDUsNzEuNzg2IEMxMzUuNDQ1LDcwLjk5NyAxMzQuODEzLDcwLjU4IDEzMy45NzcsNzAuNTggQzEzMi45MjEsNzAuNTggMTMxLjY3Niw3MS4yNTIgMTMwLjU2Miw3Mi40MjQgQzEyOS41NCw3My41MDEgMTI4LjcxMSw3NC45MzEgMTI4LjI4Nyw3Ni4zNDggTDEyMS44MjcsOTcuOTc2IEMxMjEuODEsOTguMDM0IDEyMS43NzEsOTguMDgyIDEyMS43Miw5OC4xMTIgTDk0LjM5OCwxMTMuODg2IEM5NC4zNjIsMTEzLjkwNyA5NC4zMjIsMTEzLjkxNyA5NC4yODIsMTEzLjkxNyBMOTQuMjgyLDExMy45MTcgWiBNOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDExMy4yNzkgTDEyMS40MDYsOTcuNzU0IEwxMjcuODQsNzYuMjE1IEMxMjguMjksNzQuNzA4IDEyOS4xMzcsNzMuMjQ3IDEzMC4yMjQsNzIuMTAzIEMxMzEuNDI1LDcwLjgzOCAxMzIuNzkzLDcwLjExMiAxMzMuOTc3LDcwLjExMiBDMTM0Ljk5NSw3MC4xMTIgMTM1Ljc5NSw3MC42MzggMTM2LjIzLDcxLjU5MiBMMTQyLjU4NCw4NS41MjYgTDE2OS41NjYsNjkuOTQ4IEwxNjkuNTY2LDE5LjYxNyBMOTQuNTE1LDYyLjk0OCBMOTQuNTE1LDYyLjk0OCBaIiBpZD0iRmlsbC0xOCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMDkuODk0LDkyLjk0MyBMMTA5Ljg5NCw5Mi45NDMgQzEwOC4xMiw5Mi45NDMgMTA2LjY1Myw5Mi4yMTggMTA1LjY1LDkwLjgyMyBDMTA1LjU4Myw5MC43MzEgMTA1LjU5Myw5MC42MSAxMDUuNjczLDkwLjUyOSBDMTA1Ljc1Myw5MC40NDggMTA1Ljg4LDkwLjQ0IDEwNS45NzQsOTAuNTA2IEMxMDYuNzU0LDkxLjA1MyAxMDcuNjc5LDkxLjMzMyAxMDguNzI0LDkxLjMzMyBDMTEwLjA0Nyw5MS4zMzMgMTExLjQ3OCw5MC44OTQgMTEyLjk4LDkwLjAyNyBDMTE4LjI5MSw4Ni45NiAxMjIuNjExLDc5LjUwOSAxMjIuNjExLDczLjQxNiBDMTIyLjYxMSw3MS40ODkgMTIyLjE2OSw2OS44NTYgMTIxLjMzMyw2OC42OTIgQzEyMS4yNjYsNjguNiAxMjEuMjc2LDY4LjQ3MyAxMjEuMzU2LDY4LjM5MiBDMTIxLjQzNiw2OC4zMTEgMTIxLjU2Myw2OC4yOTkgMTIxLjY1Niw2OC4zNjUgQzEyMy4zMjcsNjkuNTM3IDEyNC4yNDcsNzEuNzQ2IDEyNC4yNDcsNzQuNTg0IEMxMjQuMjQ3LDgwLjgyNiAxMTkuODIxLDg4LjQ0NyAxMTQuMzgyLDkxLjU4NyBDMTEyLjgwOCw5Mi40OTUgMTExLjI5OCw5Mi45NDMgMTA5Ljg5NCw5Mi45NDMgTDEwOS44OTQsOTIuOTQzIFogTTEwNi45MjUsOTEuNDAxIEMxMDcuNzM4LDkyLjA1MiAxMDguNzQ1LDkyLjI3OCAxMDkuODkzLDkyLjI3OCBMMTA5Ljg5NCw5Mi4yNzggQzExMS4yMTUsOTIuMjc4IDExMi42NDcsOTEuOTUxIDExNC4xNDgsOTEuMDg0IEMxMTkuNDU5LDg4LjAxNyAxMjMuNzgsODAuNjIxIDEyMy43OCw3NC41MjggQzEyMy43OCw3Mi41NDkgMTIzLjMxNyw3MC45MjkgMTIyLjQ1NCw2OS43NjcgQzEyMi44NjUsNzAuODAyIDEyMy4wNzksNzIuMDQyIDEyMy4wNzksNzMuNDAyIEMxMjMuMDc5LDc5LjY0NSAxMTguNjUzLDg3LjI4NSAxMTMuMjE0LDkwLjQyNSBDMTExLjY0LDkxLjMzNCAxMTAuMTMsOTEuNzQyIDEwOC43MjQsOTEuNzQyIEMxMDguMDgzLDkxLjc0MiAxMDcuNDgxLDkxLjU5MyAxMDYuOTI1LDkxLjQwMSBMMTA2LjkyNSw5MS40MDEgWiIgaWQ9IkZpbGwtMTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjA5Nyw5MC4yMyBDMTE4LjQ4MSw4Ny4xMjIgMTIyLjg0NSw3OS41OTQgMTIyLjg0NSw3My40MTYgQzEyMi44NDUsNzEuMzY1IDEyMi4zNjIsNjkuNzI0IDEyMS41MjIsNjguNTU2IEMxMTkuNzM4LDY3LjMwNCAxMTcuMTQ4LDY3LjM2MiAxMTQuMjY1LDY5LjAyNiBDMTA4Ljg4MSw3Mi4xMzQgMTA0LjUxNyw3OS42NjIgMTA0LjUxNyw4NS44NCBDMTA0LjUxNyw4Ny44OTEgMTA1LDg5LjUzMiAxMDUuODQsOTAuNyBDMTA3LjYyNCw5MS45NTIgMTEwLjIxNCw5MS44OTQgMTEzLjA5Nyw5MC4yMyIgaWQ9IkZpbGwtMjAiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTA4LjcyNCw5MS42MTQgTDEwOC43MjQsOTEuNjE0IEMxMDcuNTgyLDkxLjYxNCAxMDYuNTY2LDkxLjQwMSAxMDUuNzA1LDkwLjc5NyBDMTA1LjY4NCw5MC43ODMgMTA1LjY2NSw5MC44MTEgMTA1LjY1LDkwLjc5IEMxMDQuNzU2LDg5LjU0NiAxMDQuMjgzLDg3Ljg0MiAxMDQuMjgzLDg1LjgxNyBDMTA0LjI4Myw3OS41NzUgMTA4LjcwOSw3MS45NTMgMTE0LjE0OCw2OC44MTIgQzExNS43MjIsNjcuOTA0IDExNy4yMzIsNjcuNDQ5IDExOC42MzgsNjcuNDQ5IEMxMTkuNzgsNjcuNDQ5IDEyMC43OTYsNjcuNzU4IDEyMS42NTYsNjguMzYyIEMxMjEuNjc4LDY4LjM3NyAxMjEuNjk3LDY4LjM5NyAxMjEuNzEyLDY4LjQxOCBDMTIyLjYwNiw2OS42NjIgMTIzLjA3OSw3MS4zOSAxMjMuMDc5LDczLjQxNSBDMTIzLjA3OSw3OS42NTggMTE4LjY1Myw4Ny4xOTggMTEzLjIxNCw5MC4zMzggQzExMS42NCw5MS4yNDcgMTEwLjEzLDkxLjYxNCAxMDguNzI0LDkxLjYxNCBMMTA4LjcyNCw5MS42MTQgWiBNMTA2LjAwNiw5MC41MDUgQzEwNi43OCw5MS4wMzcgMTA3LjY5NCw5MS4yODEgMTA4LjcyNCw5MS4yODEgQzExMC4wNDcsOTEuMjgxIDExMS40NzgsOTAuODY4IDExMi45OCw5MC4wMDEgQzExOC4yOTEsODYuOTM1IDEyMi42MTEsNzkuNDk2IDEyMi42MTEsNzMuNDAzIEMxMjIuNjExLDcxLjQ5NCAxMjIuMTc3LDY5Ljg4IDEyMS4zNTYsNjguNzE4IEMxMjAuNTgyLDY4LjE4NSAxMTkuNjY4LDY3LjkxOSAxMTguNjM4LDY3LjkxOSBDMTE3LjMxNSw2Ny45MTkgMTE1Ljg4Myw2OC4zNiAxMTQuMzgyLDY5LjIyNyBDMTA5LjA3MSw3Mi4yOTMgMTA0Ljc1MSw3OS43MzMgMTA0Ljc1MSw4NS44MjYgQzEwNC43NTEsODcuNzM1IDEwNS4xODUsODkuMzQzIDEwNi4wMDYsOTAuNTA1IEwxMDYuMDA2LDkwLjUwNSBaIiBpZD0iRmlsbC0yMSIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNDkuMzE4LDcuMjYyIEwxMzkuMzM0LDE2LjE0IEwxNTUuMjI3LDI3LjE3MSBMMTYwLjgxNiwyMS4wNTkgTDE0OS4zMTgsNy4yNjIiIGlkPSJGaWxsLTIyIiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2OS42NzYsMTMuODQgTDE1OS45MjgsMTkuNDY3IEMxNTYuMjg2LDIxLjU3IDE1MC40LDIxLjU4IDE0Ni43ODEsMTkuNDkxIEMxNDMuMTYxLDE3LjQwMiAxNDMuMTgsMTQuMDAzIDE0Ni44MjIsMTEuOSBMMTU2LjMxNyw2LjI5MiBMMTQ5LjU4OCwyLjQwNyBMNjcuNzUyLDQ5LjQ3OCBMMTEzLjY3NSw3NS45OTIgTDExNi43NTYsNzQuMjEzIEMxMTcuMzg3LDczLjg0OCAxMTcuNjI1LDczLjMxNSAxMTcuMzc0LDcyLjgyMyBDMTE1LjAxNyw2OC4xOTEgMTE0Ljc4MSw2My4yNzcgMTE2LjY5MSw1OC41NjEgQzEyMi4zMjksNDQuNjQxIDE0MS4yLDMzLjc0NiAxNjUuMzA5LDMwLjQ5MSBDMTczLjQ3OCwyOS4zODggMTgxLjk4OSwyOS41MjQgMTkwLjAxMywzMC44ODUgQzE5MC44NjUsMzEuMDMgMTkxLjc4OSwzMC44OTMgMTkyLjQyLDMwLjUyOCBMMTk1LjUwMSwyOC43NSBMMTY5LjY3NiwxMy44NCIgaWQ9IkZpbGwtMjMiIGZpbGw9IiNGQUZBRkEiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3Ni40NTkgQzExMy41OTQsNzYuNDU5IDExMy41MTQsNzYuNDM4IDExMy40NDIsNzYuMzk3IEw2Ny41MTgsNDkuODgyIEM2Ny4zNzQsNDkuNzk5IDY3LjI4NCw0OS42NDUgNjcuMjg1LDQ5LjQ3OCBDNjcuMjg1LDQ5LjMxMSA2Ny4zNzQsNDkuMTU3IDY3LjUxOSw0OS4wNzMgTDE0OS4zNTUsMi4wMDIgQzE0OS40OTksMS45MTkgMTQ5LjY3NywxLjkxOSAxNDkuODIxLDIuMDAyIEwxNTYuNTUsNS44ODcgQzE1Ni43NzQsNi4wMTcgMTU2Ljg1LDYuMzAyIDE1Ni43MjIsNi41MjYgQzE1Ni41OTIsNi43NDkgMTU2LjMwNyw2LjgyNiAxNTYuMDgzLDYuNjk2IEwxNDkuNTg3LDIuOTQ2IEw2OC42ODcsNDkuNDc5IEwxMTMuNjc1LDc1LjQ1MiBMMTE2LjUyMyw3My44MDggQzExNi43MTUsNzMuNjk3IDExNy4xNDMsNzMuMzk5IDExNi45NTgsNzMuMDM1IEMxMTQuNTQyLDY4LjI4NyAxMTQuMyw2My4yMjEgMTE2LjI1OCw1OC4zODUgQzExOS4wNjQsNTEuNDU4IDEyNS4xNDMsNDUuMTQzIDEzMy44NCw0MC4xMjIgQzE0Mi40OTcsMzUuMTI0IDE1My4zNTgsMzEuNjMzIDE2NS4yNDcsMzAuMDI4IEMxNzMuNDQ1LDI4LjkyMSAxODIuMDM3LDI5LjA1OCAxOTAuMDkxLDMwLjQyNSBDMTkwLjgzLDMwLjU1IDE5MS42NTIsMzAuNDMyIDE5Mi4xODYsMzAuMTI0IEwxOTQuNTY3LDI4Ljc1IEwxNjkuNDQyLDE0LjI0NCBDMTY5LjIxOSwxNC4xMTUgMTY5LjE0MiwxMy44MjkgMTY5LjI3MSwxMy42MDYgQzE2OS40LDEzLjM4MiAxNjkuNjg1LDEzLjMwNiAxNjkuOTA5LDEzLjQzNSBMMTk1LjczNCwyOC4zNDUgQzE5NS44NzksMjguNDI4IDE5NS45NjgsMjguNTgzIDE5NS45NjgsMjguNzUgQzE5NS45NjgsMjguOTE2IDE5NS44NzksMjkuMDcxIDE5NS43MzQsMjkuMTU0IEwxOTIuNjUzLDMwLjkzMyBDMTkxLjkzMiwzMS4zNSAxOTAuODksMzEuNTA4IDE4OS45MzUsMzEuMzQ2IEMxODEuOTcyLDI5Ljk5NSAxNzMuNDc4LDI5Ljg2IDE2NS4zNzIsMzAuOTU0IEMxNTMuNjAyLDMyLjU0MyAxNDIuODYsMzUuOTkzIDEzNC4zMDcsNDAuOTMxIEMxMjUuNzkzLDQ1Ljg0NyAxMTkuODUxLDUyLjAwNCAxMTcuMTI0LDU4LjczNiBDMTE1LjI3LDYzLjMxNCAxMTUuNTAxLDY4LjExMiAxMTcuNzksNzIuNjExIEMxMTguMTYsNzMuMzM2IDExNy44NDUsNzQuMTI0IDExNi45OSw3NC42MTcgTDExMy45MDksNzYuMzk3IEMxMTMuODM2LDc2LjQzOCAxMTMuNzU2LDc2LjQ1OSAxMTMuNjc1LDc2LjQ1OSIgaWQ9IkZpbGwtMjQiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUzLjMxNiwyMS4yNzkgQzE1MC45MDMsMjEuMjc5IDE0OC40OTUsMjAuNzUxIDE0Ni42NjQsMTkuNjkzIEMxNDQuODQ2LDE4LjY0NCAxNDMuODQ0LDE3LjIzMiAxNDMuODQ0LDE1LjcxOCBDMTQzLjg0NCwxNC4xOTEgMTQ0Ljg2LDEyLjc2MyAxNDYuNzA1LDExLjY5OCBMMTU2LjE5OCw2LjA5MSBDMTU2LjMwOSw2LjAyNSAxNTYuNDUyLDYuMDYyIDE1Ni41MTgsNi4xNzMgQzE1Ni41ODMsNi4yODQgMTU2LjU0Nyw2LjQyNyAxNTYuNDM2LDYuNDkzIEwxNDYuOTQsMTIuMTAyIEMxNDUuMjQ0LDEzLjA4MSAxNDQuMzEyLDE0LjM2NSAxNDQuMzEyLDE1LjcxOCBDMTQ0LjMxMiwxNy4wNTggMTQ1LjIzLDE4LjMyNiAxNDYuODk3LDE5LjI4OSBDMTUwLjQ0NiwyMS4zMzggMTU2LjI0LDIxLjMyNyAxNTkuODExLDE5LjI2NSBMMTY5LjU1OSwxMy42MzcgQzE2OS42NywxMy41NzMgMTY5LjgxMywxMy42MTEgMTY5Ljg3OCwxMy43MjMgQzE2OS45NDMsMTMuODM0IDE2OS45MDQsMTMuOTc3IDE2OS43OTMsMTQuMDQyIEwxNjAuMDQ1LDE5LjY3IEMxNTguMTg3LDIwLjc0MiAxNTUuNzQ5LDIxLjI3OSAxNTMuMzE2LDIxLjI3OSIgaWQ9IkZpbGwtMjUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEzLjY3NSw3NS45OTIgTDY3Ljc2Miw0OS40ODQiIGlkPSJGaWxsLTI2IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMy42NzUsNzYuMzQyIEMxMTMuNjE1LDc2LjM0MiAxMTMuNTU1LDc2LjMyNyAxMTMuNSw3Ni4yOTUgTDY3LjU4Nyw0OS43ODcgQzY3LjQxOSw0OS42OSA2Ny4zNjIsNDkuNDc2IDY3LjQ1OSw0OS4zMDkgQzY3LjU1Niw0OS4xNDEgNjcuNzcsNDkuMDgzIDY3LjkzNyw0OS4xOCBMMTEzLjg1LDc1LjY4OCBDMTE0LjAxOCw3NS43ODUgMTE0LjA3NSw3NiAxMTMuOTc4LDc2LjE2NyBDMTEzLjkxNCw3Ni4yNzkgMTEzLjc5Niw3Ni4zNDIgMTEzLjY3NSw3Ni4zNDIiIGlkPSJGaWxsLTI3IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY3Ljc2Miw0OS40ODQgTDY3Ljc2MiwxMDMuNDg1IEM2Ny43NjIsMTA0LjU3NSA2OC41MzIsMTA1LjkwMyA2OS40ODIsMTA2LjQ1MiBMMTExLjk1NSwxMzAuOTczIEMxMTIuOTA1LDEzMS41MjIgMTEzLjY3NSwxMzEuMDgzIDExMy42NzUsMTI5Ljk5MyBMMTEzLjY3NSw3NS45OTIiIGlkPSJGaWxsLTI4IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTExMi43MjcsMTMxLjU2MSBDMTEyLjQzLDEzMS41NjEgMTEyLjEwNywxMzEuNDY2IDExMS43OCwxMzEuMjc2IEw2OS4zMDcsMTA2Ljc1NSBDNjguMjQ0LDEwNi4xNDIgNjcuNDEyLDEwNC43MDUgNjcuNDEyLDEwMy40ODUgTDY3LjQxMiw0OS40ODQgQzY3LjQxMiw0OS4yOSA2Ny41NjksNDkuMTM0IDY3Ljc2Miw0OS4xMzQgQzY3Ljk1Niw0OS4xMzQgNjguMTEzLDQ5LjI5IDY4LjExMyw0OS40ODQgTDY4LjExMywxMDMuNDg1IEM2OC4xMTMsMTA0LjQ0NSA2OC44MiwxMDUuNjY1IDY5LjY1NywxMDYuMTQ4IEwxMTIuMTMsMTMwLjY3IEMxMTIuNDc0LDEzMC44NjggMTEyLjc5MSwxMzAuOTEzIDExMywxMzAuNzkyIEMxMTMuMjA2LDEzMC42NzMgMTEzLjMyNSwxMzAuMzgxIDExMy4zMjUsMTI5Ljk5MyBMMTEzLjMyNSw3NS45OTIgQzExMy4zMjUsNzUuNzk4IDExMy40ODIsNzUuNjQxIDExMy42NzUsNzUuNjQxIEMxMTMuODY5LDc1LjY0MSAxMTQuMDI1LDc1Ljc5OCAxMTQuMDI1LDc1Ljk5MiBMMTE0LjAyNSwxMjkuOTkzIEMxMTQuMDI1LDEzMC42NDggMTEzLjc4NiwxMzEuMTQ3IDExMy4zNSwxMzEuMzk5IEMxMTMuMTYyLDEzMS41MDcgMTEyLjk1MiwxMzEuNTYxIDExMi43MjcsMTMxLjU2MSIgaWQ9IkZpbGwtMjkiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTEyLjg2LDQwLjUxMiBDMTEyLjg2LDQwLjUxMiAxMTIuODYsNDAuNTEyIDExMi44NTksNDAuNTEyIEMxMTAuNTQxLDQwLjUxMiAxMDguMzYsMzkuOTkgMTA2LjcxNywzOS4wNDEgQzEwNS4wMTIsMzguMDU3IDEwNC4wNzQsMzYuNzI2IDEwNC4wNzQsMzUuMjkyIEMxMDQuMDc0LDMzLjg0NyAxMDUuMDI2LDMyLjUwMSAxMDYuNzU0LDMxLjUwNCBMMTE4Ljc5NSwyNC41NTEgQzEyMC40NjMsMjMuNTg5IDEyMi42NjksMjMuMDU4IDEyNS4wMDcsMjMuMDU4IEMxMjcuMzI1LDIzLjA1OCAxMjkuNTA2LDIzLjU4MSAxMzEuMTUsMjQuNTMgQzEzMi44NTQsMjUuNTE0IDEzMy43OTMsMjYuODQ1IDEzMy43OTMsMjguMjc4IEMxMzMuNzkzLDI5LjcyNCAxMzIuODQxLDMxLjA2OSAxMzEuMTEzLDMyLjA2NyBMMTE5LjA3MSwzOS4wMTkgQzExNy40MDMsMzkuOTgyIDExNS4xOTcsNDAuNTEyIDExMi44Niw0MC41MTIgTDExMi44Niw0MC41MTIgWiBNMTI1LjAwNywyMy43NTkgQzEyMi43OSwyMy43NTkgMTIwLjcwOSwyNC4yNTYgMTE5LjE0NiwyNS4xNTggTDEwNy4xMDQsMzIuMTEgQzEwNS42MDIsMzIuOTc4IDEwNC43NzQsMzQuMTA4IDEwNC43NzQsMzUuMjkyIEMxMDQuNzc0LDM2LjQ2NSAxMDUuNTg5LDM3LjU4MSAxMDcuMDY3LDM4LjQzNCBDMTA4LjYwNSwzOS4zMjMgMTEwLjY2MywzOS44MTIgMTEyLjg1OSwzOS44MTIgTDExMi44NiwzOS44MTIgQzExNS4wNzYsMzkuODEyIDExNy4xNTgsMzkuMzE1IDExOC43MjEsMzguNDEzIEwxMzAuNzYyLDMxLjQ2IEMxMzIuMjY0LDMwLjU5MyAxMzMuMDkyLDI5LjQ2MyAxMzMuMDkyLDI4LjI3OCBDMTMzLjA5MiwyNy4xMDYgMTMyLjI3OCwyNS45OSAxMzAuOCwyNS4xMzYgQzEyOS4yNjEsMjQuMjQ4IDEyNy4yMDQsMjMuNzU5IDEyNS4wMDcsMjMuNzU5IEwxMjUuMDA3LDIzLjc1OSBaIiBpZD0iRmlsbC0zMCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNjUuNjMsMTYuMjE5IEwxNTkuODk2LDE5LjUzIEMxNTYuNzI5LDIxLjM1OCAxNTEuNjEsMjEuMzY3IDE0OC40NjMsMTkuNTUgQzE0NS4zMTYsMTcuNzMzIDE0NS4zMzIsMTQuNzc4IDE0OC40OTksMTIuOTQ5IEwxNTQuMjMzLDkuNjM5IEwxNjUuNjMsMTYuMjE5IiBpZD0iRmlsbC0zMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xNTQuMjMzLDEwLjQ0OCBMMTY0LjIyOCwxNi4yMTkgTDE1OS41NDYsMTguOTIzIEMxNTguMTEyLDE5Ljc1IDE1Ni4xOTQsMjAuMjA2IDE1NC4xNDcsMjAuMjA2IEMxNTIuMTE4LDIwLjIwNiAxNTAuMjI0LDE5Ljc1NyAxNDguODE0LDE4Ljk0MyBDMTQ3LjUyNCwxOC4xOTkgMTQ2LjgxNCwxNy4yNDkgMTQ2LjgxNCwxNi4yNjkgQzE0Ni44MTQsMTUuMjc4IDE0Ny41MzcsMTQuMzE0IDE0OC44NSwxMy41NTYgTDE1NC4yMzMsMTAuNDQ4IE0xNTQuMjMzLDkuNjM5IEwxNDguNDk5LDEyLjk0OSBDMTQ1LjMzMiwxNC43NzggMTQ1LjMxNiwxNy43MzMgMTQ4LjQ2MywxOS41NSBDMTUwLjAzMSwyMC40NTUgMTUyLjA4NiwyMC45MDcgMTU0LjE0NywyMC45MDcgQzE1Ni4yMjQsMjAuOTA3IDE1OC4zMDYsMjAuNDQ3IDE1OS44OTYsMTkuNTMgTDE2NS42MywxNi4yMTkgTDE1NC4yMzMsOS42MzkiIGlkPSJGaWxsLTMyIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NS40NDUsNzIuNjY3IEwxNDUuNDQ1LDcyLjY2NyBDMTQzLjY3Miw3Mi42NjcgMTQyLjIwNCw3MS44MTcgMTQxLjIwMiw3MC40MjIgQzE0MS4xMzUsNzAuMzMgMTQxLjE0NSw3MC4xNDcgMTQxLjIyNSw3MC4wNjYgQzE0MS4zMDUsNjkuOTg1IDE0MS40MzIsNjkuOTQ2IDE0MS41MjUsNzAuMDExIEMxNDIuMzA2LDcwLjU1OSAxNDMuMjMxLDcwLjgyMyAxNDQuMjc2LDcwLjgyMiBDMTQ1LjU5OCw3MC44MjIgMTQ3LjAzLDcwLjM3NiAxNDguNTMyLDY5LjUwOSBDMTUzLjg0Miw2Ni40NDMgMTU4LjE2Myw1OC45ODcgMTU4LjE2Myw1Mi44OTQgQzE1OC4xNjMsNTAuOTY3IDE1Ny43MjEsNDkuMzMyIDE1Ni44ODQsNDguMTY4IEMxNTYuODE4LDQ4LjA3NiAxNTYuODI4LDQ3Ljk0OCAxNTYuOTA4LDQ3Ljg2NyBDMTU2Ljk4OCw0Ny43ODYgMTU3LjExNCw0Ny43NzQgMTU3LjIwOCw0Ny44NCBDMTU4Ljg3OCw0OS4wMTIgMTU5Ljc5OCw1MS4yMiAxNTkuNzk4LDU0LjA1OSBDMTU5Ljc5OCw2MC4zMDEgMTU1LjM3Myw2OC4wNDYgMTQ5LjkzMyw3MS4xODYgQzE0OC4zNiw3Mi4wOTQgMTQ2Ljg1LDcyLjY2NyAxNDUuNDQ1LDcyLjY2NyBMMTQ1LjQ0NSw3Mi42NjcgWiBNMTQyLjQ3Niw3MSBDMTQzLjI5LDcxLjY1MSAxNDQuMjk2LDcyLjAwMiAxNDUuNDQ1LDcyLjAwMiBDMTQ2Ljc2Nyw3Mi4wMDIgMTQ4LjE5OCw3MS41NSAxNDkuNyw3MC42ODIgQzE1NS4wMSw2Ny42MTcgMTU5LjMzMSw2MC4xNTkgMTU5LjMzMSw1NC4wNjUgQzE1OS4zMzEsNTIuMDg1IDE1OC44NjgsNTAuNDM1IDE1OC4wMDYsNDkuMjcyIEMxNTguNDE3LDUwLjMwNyAxNTguNjMsNTEuNTMyIDE1OC42Myw1Mi44OTIgQzE1OC42Myw1OS4xMzQgMTU0LjIwNSw2Ni43NjcgMTQ4Ljc2NSw2OS45MDcgQzE0Ny4xOTIsNzAuODE2IDE0NS42ODEsNzEuMjgzIDE0NC4yNzYsNzEuMjgzIEMxNDMuNjM0LDcxLjI4MyAxNDMuMDMzLDcxLjE5MiAxNDIuNDc2LDcxIEwxNDIuNDc2LDcxIFoiIGlkPSJGaWxsLTMzIiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0OC42NDgsNjkuNzA0IEMxNTQuMDMyLDY2LjU5NiAxNTguMzk2LDU5LjA2OCAxNTguMzk2LDUyLjg5MSBDMTU4LjM5Niw1MC44MzkgMTU3LjkxMyw0OS4xOTggMTU3LjA3NCw0OC4wMyBDMTU1LjI4OSw0Ni43NzggMTUyLjY5OSw0Ni44MzYgMTQ5LjgxNiw0OC41MDEgQzE0NC40MzMsNTEuNjA5IDE0MC4wNjgsNTkuMTM3IDE0MC4wNjgsNjUuMzE0IEMxNDAuMDY4LDY3LjM2NSAxNDAuNTUyLDY5LjAwNiAxNDEuMzkxLDcwLjE3NCBDMTQzLjE3Niw3MS40MjcgMTQ1Ljc2NSw3MS4zNjkgMTQ4LjY0OCw2OS43MDQiIGlkPSJGaWxsLTM0IiBmaWxsPSIjRkFGQUZBIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTE0NC4yNzYsNzEuMjc2IEwxNDQuMjc2LDcxLjI3NiBDMTQzLjEzMyw3MS4yNzYgMTQyLjExOCw3MC45NjkgMTQxLjI1Nyw3MC4zNjUgQzE0MS4yMzYsNzAuMzUxIDE0MS4yMTcsNzAuMzMyIDE0MS4yMDIsNzAuMzExIEMxNDAuMzA3LDY5LjA2NyAxMzkuODM1LDY3LjMzOSAxMzkuODM1LDY1LjMxNCBDMTM5LjgzNSw1OS4wNzMgMTQ0LjI2LDUxLjQzOSAxNDkuNyw0OC4yOTggQzE1MS4yNzMsNDcuMzkgMTUyLjc4NCw0Ni45MjkgMTU0LjE4OSw0Ni45MjkgQzE1NS4zMzIsNDYuOTI5IDE1Ni4zNDcsNDcuMjM2IDE1Ny4yMDgsNDcuODM5IEMxNTcuMjI5LDQ3Ljg1NCAxNTcuMjQ4LDQ3Ljg3MyAxNTcuMjYzLDQ3Ljg5NCBDMTU4LjE1Nyw0OS4xMzggMTU4LjYzLDUwLjg2NSAxNTguNjMsNTIuODkxIEMxNTguNjMsNTkuMTMyIDE1NC4yMDUsNjYuNzY2IDE0OC43NjUsNjkuOTA3IEMxNDcuMTkyLDcwLjgxNSAxNDUuNjgxLDcxLjI3NiAxNDQuMjc2LDcxLjI3NiBMMTQ0LjI3Niw3MS4yNzYgWiBNMTQxLjU1OCw3MC4xMDQgQzE0Mi4zMzEsNzAuNjM3IDE0My4yNDUsNzEuMDA1IDE0NC4yNzYsNzEuMDA1IEMxNDUuNTk4LDcxLjAwNSAxNDcuMDMsNzAuNDY3IDE0OC41MzIsNjkuNiBDMTUzLjg0Miw2Ni41MzQgMTU4LjE2Myw1OS4wMzMgMTU4LjE2Myw1Mi45MzkgQzE1OC4xNjMsNTEuMDMxIDE1Ny43MjksNDkuMzg1IDE1Ni45MDcsNDguMjIzIEMxNTYuMTMzLDQ3LjY5MSAxNTUuMjE5LDQ3LjQwOSAxNTQuMTg5LDQ3LjQwOSBDMTUyLjg2Nyw0Ny40MDkgMTUxLjQzNSw0Ny44NDIgMTQ5LjkzMyw0OC43MDkgQzE0NC42MjMsNTEuNzc1IDE0MC4zMDIsNTkuMjczIDE0MC4zMDIsNjUuMzY2IEMxNDAuMzAyLDY3LjI3NiAxNDAuNzM2LDY4Ljk0MiAxNDEuNTU4LDcwLjEwNCBMMTQxLjU1OCw3MC4xMDQgWiIgaWQ9IkZpbGwtMzUiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTUwLjcyLDY1LjM2MSBMMTUwLjM1Nyw2NS4wNjYgQzE1MS4xNDcsNjQuMDkyIDE1MS44NjksNjMuMDQgMTUyLjUwNSw2MS45MzggQzE1My4zMTMsNjAuNTM5IDE1My45NzgsNTkuMDY3IDE1NC40ODIsNTcuNTYzIEwxNTQuOTI1LDU3LjcxMiBDMTU0LjQxMiw1OS4yNDUgMTUzLjczMyw2MC43NDUgMTUyLjkxLDYyLjE3MiBDMTUyLjI2Miw2My4yOTUgMTUxLjUyNSw2NC4zNjggMTUwLjcyLDY1LjM2MSIgaWQ9IkZpbGwtMzYiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE1LjkxNyw4NC41MTQgTDExNS41NTQsODQuMjIgQzExNi4zNDQsODMuMjQ1IDExNy4wNjYsODIuMTk0IDExNy43MDIsODEuMDkyIEMxMTguNTEsNzkuNjkyIDExOS4xNzUsNzguMjIgMTE5LjY3OCw3Ni43MTcgTDEyMC4xMjEsNzYuODY1IEMxMTkuNjA4LDc4LjM5OCAxMTguOTMsNzkuODk5IDExOC4xMDYsODEuMzI2IEMxMTcuNDU4LDgyLjQ0OCAxMTYuNzIyLDgzLjUyMSAxMTUuOTE3LDg0LjUxNCIgaWQ9IkZpbGwtMzciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTE0LDEzMC40NzYgTDExNCwxMzAuMDA4IEwxMTQsNzYuMDUyIEwxMTQsNzUuNTg0IEwxMTQsNzYuMDUyIEwxMTQsMTMwLjAwOCBMMTE0LDEzMC40NzYiIGlkPSJGaWxsLTM4IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8L2c+CiAgICAgICAgICAgICAgICA8ZyBpZD0iSW1wb3J0ZWQtTGF5ZXJzLUNvcHkiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDYyLjAwMDAwMCwgMC4wMDAwMDApIiBza2V0Y2g6dHlwZT0iTVNTaGFwZUdyb3VwIj4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTkuODIyLDM3LjQ3NCBDMTkuODM5LDM3LjMzOSAxOS43NDcsMzcuMTk0IDE5LjU1NSwzNy4wODIgQzE5LjIyOCwzNi44OTQgMTguNzI5LDM2Ljg3MiAxOC40NDYsMzcuMDM3IEwxMi40MzQsNDAuNTA4IEMxMi4zMDMsNDAuNTg0IDEyLjI0LDQwLjY4NiAxMi4yNDMsNDAuNzkzIEMxMi4yNDUsNDAuOTI1IDEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQxLjM3MSBMMTIuMjQ1LDQxLjQxNCBMMTIuMjM4LDQxLjU0MiBDOC4xNDgsNDMuODg3IDUuNjQ3LDQ1LjMyMSA1LjY0Nyw0NS4zMjEgQzUuNjQ2LDQ1LjMyMSAzLjU3LDQ2LjM2NyAyLjg2LDUwLjUxMyBDMi44Niw1MC41MTMgMS45NDgsNTcuNDc0IDEuOTYyLDcwLjI1OCBDMS45NzcsODIuODI4IDIuNTY4LDg3LjMyOCAzLjEyOSw5MS42MDkgQzMuMzQ5LDkzLjI5MyA2LjEzLDkzLjczNCA2LjEzLDkzLjczNCBDNi40NjEsOTMuNzc0IDYuODI4LDkzLjcwNyA3LjIxLDkzLjQ4NiBMODIuNDgzLDQ5LjkzNSBDODQuMjkxLDQ4Ljg2NiA4NS4xNSw0Ni4yMTYgODUuNTM5LDQzLjY1MSBDODYuNzUyLDM1LjY2MSA4Ny4yMTQsMTAuNjczIDg1LjI2NCwzLjc3MyBDODUuMDY4LDMuMDggODQuNzU0LDIuNjkgODQuMzk2LDIuNDkxIEw4Mi4zMSwxLjcwMSBDODEuNTgzLDEuNzI5IDgwLjg5NCwyLjE2OCA4MC43NzYsMi4yMzYgQzgwLjYzNiwyLjMxNyA0MS44MDcsMjQuNTg1IDIwLjAzMiwzNy4wNzIgTDE5LjgyMiwzNy40NzQiIGlkPSJGaWxsLTEiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNODIuMzExLDEuNzAxIEw4NC4zOTYsMi40OTEgQzg0Ljc1NCwyLjY5IDg1LjA2OCwzLjA4IDg1LjI2NCwzLjc3MyBDODcuMjEzLDEwLjY3MyA4Ni43NTEsMzUuNjYgODUuNTM5LDQzLjY1MSBDODUuMTQ5LDQ2LjIxNiA4NC4yOSw0OC44NjYgODIuNDgzLDQ5LjkzNSBMNy4yMSw5My40ODYgQzYuODk3LDkzLjY2NyA2LjU5NSw5My43NDQgNi4zMTQsOTMuNzQ0IEw2LjEzMSw5My43MzMgQzYuMTMxLDkzLjczNCAzLjM0OSw5My4yOTMgMy4xMjgsOTEuNjA5IEMyLjU2OCw4Ny4zMjcgMS45NzcsODIuODI4IDEuOTYzLDcwLjI1OCBDMS45NDgsNTcuNDc0IDIuODYsNTAuNTEzIDIuODYsNTAuNTEzIEMzLjU3LDQ2LjM2NyA1LjY0Nyw0NS4zMjEgNS42NDcsNDUuMzIxIEM1LjY0Nyw0NS4zMjEgOC4xNDgsNDMuODg3IDEyLjIzOCw0MS41NDIgTDEyLjI0NSw0MS40MTQgTDEyLjI0NSw0MS4zNzEgQzEyLjI0NSw0MS4yNTQgMTIuMjQ1LDQwLjkyNSAxMi4yNDMsNDAuNzkzIEMxMi4yNCw0MC42ODYgMTIuMzAyLDQwLjU4MyAxMi40MzQsNDAuNTA4IEwxOC40NDYsMzcuMDM2IEMxOC41NzQsMzYuOTYyIDE4Ljc0NiwzNi45MjYgMTguOTI3LDM2LjkyNiBDMTkuMTQ1LDM2LjkyNiAxOS4zNzYsMzYuOTc5IDE5LjU1NCwzNy4wODIgQzE5Ljc0NywzNy4xOTQgMTkuODM5LDM3LjM0IDE5LjgyMiwzNy40NzQgTDIwLjAzMywzNy4wNzIgQzQxLjgwNiwyNC41ODUgODAuNjM2LDIuMzE4IDgwLjc3NywyLjIzNiBDODAuODk0LDIuMTY4IDgxLjU4MywxLjcyOSA4Mi4zMTEsMS43MDEgTTgyLjMxMSwwLjcwNCBMODIuMjcyLDAuNzA1IEM4MS42NTQsMC43MjggODAuOTg5LDAuOTQ5IDgwLjI5OCwxLjM2MSBMODAuMjc3LDEuMzczIEM4MC4xMjksMS40NTggNTkuNzY4LDEzLjEzNSAxOS43NTgsMzYuMDc5IEMxOS41LDM1Ljk4MSAxOS4yMTQsMzUuOTI5IDE4LjkyNywzNS45MjkgQzE4LjU2MiwzNS45MjkgMTguMjIzLDM2LjAxMyAxNy45NDcsMzYuMTczIEwxMS45MzUsMzkuNjQ0IEMxMS40OTMsMzkuODk5IDExLjIzNiw0MC4zMzQgMTEuMjQ2LDQwLjgxIEwxMS4yNDcsNDAuOTYgTDUuMTY3LDQ0LjQ0NyBDNC43OTQsNDQuNjQ2IDIuNjI1LDQ1Ljk3OCAxLjg3Nyw1MC4zNDUgTDEuODcxLDUwLjM4NCBDMS44NjIsNTAuNDU0IDAuOTUxLDU3LjU1NyAwLjk2NSw3MC4yNTkgQzAuOTc5LDgyLjg3OSAxLjU2OCw4Ny4zNzUgMi4xMzcsOTEuNzI0IEwyLjEzOSw5MS43MzkgQzIuNDQ3LDk0LjA5NCA1LjYxNCw5NC42NjIgNS45NzUsOTQuNzE5IEw2LjAwOSw5NC43MjMgQzYuMTEsOTQuNzM2IDYuMjEzLDk0Ljc0MiA2LjMxNCw5NC43NDIgQzYuNzksOTQuNzQyIDcuMjYsOTQuNjEgNy43MSw5NC4zNSBMODIuOTgzLDUwLjc5OCBDODQuNzk0LDQ5LjcyNyA4NS45ODIsNDcuMzc1IDg2LjUyNSw0My44MDEgQzg3LjcxMSwzNS45ODcgODguMjU5LDEwLjcwNSA4Ni4yMjQsMy41MDIgQzg1Ljk3MSwyLjYwOSA4NS41MiwxLjk3NSA4NC44ODEsMS42MiBMODQuNzQ5LDEuNTU4IEw4Mi42NjQsMC43NjkgQzgyLjU1MSwwLjcyNSA4Mi40MzEsMC43MDQgODIuMzExLDAuNzA0IiBpZD0iRmlsbC0yIiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTY2LjI2NywxMS41NjUgTDY3Ljc2MiwxMS45OTkgTDExLjQyMyw0NC4zMjUiIGlkPSJGaWxsLTMiIGZpbGw9IiNGRkZGRkYiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMjAyLDkwLjU0NSBDMTIuMDI5LDkwLjU0NSAxMS44NjIsOTAuNDU1IDExLjc2OSw5MC4yOTUgQzExLjYzMiw5MC4wNTcgMTEuNzEzLDg5Ljc1MiAxMS45NTIsODkuNjE0IEwzMC4zODksNzguOTY5IEMzMC42MjgsNzguODMxIDMwLjkzMyw3OC45MTMgMzEuMDcxLDc5LjE1MiBDMzEuMjA4LDc5LjM5IDMxLjEyNyw3OS42OTYgMzAuODg4LDc5LjgzMyBMMTIuNDUxLDkwLjQ3OCBMMTIuMjAyLDkwLjU0NSIgaWQ9IkZpbGwtNCIgZmlsbD0iIzYwN0Q4QiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMy43NjQsNDIuNjU0IEwxMy42NTYsNDIuNTkyIEwxMy43MDIsNDIuNDIxIEwxOC44MzcsMzkuNDU3IEwxOS4wMDcsMzkuNTAyIEwxOC45NjIsMzkuNjczIEwxMy44MjcsNDIuNjM3IEwxMy43NjQsNDIuNjU0IiBpZD0iRmlsbC01IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTguNTIsOTAuMzc1IEw4LjUyLDQ2LjQyMSBMOC41ODMsNDYuMzg1IEw3NS44NCw3LjU1NCBMNzUuODQsNTEuNTA4IEw3NS43NzgsNTEuNTQ0IEw4LjUyLDkwLjM3NSBMOC41Miw5MC4zNzUgWiBNOC43Nyw0Ni41NjQgTDguNzcsODkuOTQ0IEw3NS41OTEsNTEuMzY1IEw3NS41OTEsNy45ODUgTDguNzcsNDYuNTY0IEw4Ljc3LDQ2LjU2NCBaIiBpZD0iRmlsbC02IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTI0Ljk4Niw4My4xODIgQzI0Ljc1Niw4My4zMzEgMjQuMzc0LDgzLjU2NiAyNC4xMzcsODMuNzA1IEwxMi42MzIsOTAuNDA2IEMxMi4zOTUsOTAuNTQ1IDEyLjQyNiw5MC42NTggMTIuNyw5MC42NTggTDEzLjI2NSw5MC42NTggQzEzLjU0LDkwLjY1OCAxMy45NTgsOTAuNTQ1IDE0LjE5NSw5MC40MDYgTDI1LjcsODMuNzA1IEMyNS45MzcsODMuNTY2IDI2LjEyOCw4My40NTIgMjYuMTI1LDgzLjQ0OSBDMjYuMTIyLDgzLjQ0NyAyNi4xMTksODMuMjIgMjYuMTE5LDgyLjk0NiBDMjYuMTE5LDgyLjY3MiAyNS45MzEsODIuNTY5IDI1LjcwMSw4Mi43MTkgTDI0Ljk4Niw4My4xODIiIGlkPSJGaWxsLTciIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTMuMjY2LDkwLjc4MiBMMTIuNyw5MC43ODIgQzEyLjUsOTAuNzgyIDEyLjM4NCw5MC43MjYgMTIuMzU0LDkwLjYxNiBDMTIuMzI0LDkwLjUwNiAxMi4zOTcsOTAuMzk5IDEyLjU2OSw5MC4yOTkgTDI0LjA3NCw4My41OTcgQzI0LjMxLDgzLjQ1OSAyNC42ODksODMuMjI2IDI0LjkxOCw4My4wNzggTDI1LjYzMyw4Mi42MTQgQzI1LjcyMyw4Mi41NTUgMjUuODEzLDgyLjUyNSAyNS44OTksODIuNTI1IEMyNi4wNzEsODIuNTI1IDI2LjI0NCw4Mi42NTUgMjYuMjQ0LDgyLjk0NiBDMjYuMjQ0LDgzLjE2IDI2LjI0NSw4My4zMDkgMjYuMjQ3LDgzLjM4MyBMMjYuMjUzLDgzLjM4NyBMMjYuMjQ5LDgzLjQ1NiBDMjYuMjQ2LDgzLjUzMSAyNi4yNDYsODMuNTMxIDI1Ljc2Myw4My44MTIgTDE0LjI1OCw5MC41MTQgQzE0LDkwLjY2NSAxMy41NjQsOTAuNzgyIDEzLjI2Niw5MC43ODIgTDEzLjI2Niw5MC43ODIgWiBNMTIuNjY2LDkwLjUzMiBMMTIuNyw5MC41MzMgTDEzLjI2Niw5MC41MzMgQzEzLjUxOCw5MC41MzMgMTMuOTE1LDkwLjQyNSAxNC4xMzIsOTAuMjk5IEwyNS42MzcsODMuNTk3IEMyNS44MDUsODMuNDk5IDI1LjkzMSw4My40MjQgMjUuOTk4LDgzLjM4MyBDMjUuOTk0LDgzLjI5OSAyNS45OTQsODMuMTY1IDI1Ljk5NCw4Mi45NDYgTDI1Ljg5OSw4Mi43NzUgTDI1Ljc2OCw4Mi44MjQgTDI1LjA1NCw4My4yODcgQzI0LjgyMiw4My40MzcgMjQuNDM4LDgzLjY3MyAyNC4yLDgzLjgxMiBMMTIuNjk1LDkwLjUxNCBMMTIuNjY2LDkwLjUzMiBMMTIuNjY2LDkwLjUzMiBaIiBpZD0iRmlsbC04IiBmaWxsPSIjNjA3RDhCIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEzLjI2Niw4OS44NzEgTDEyLjcsODkuODcxIEMxMi41LDg5Ljg3MSAxMi4zODQsODkuODE1IDEyLjM1NCw4OS43MDUgQzEyLjMyNCw4OS41OTUgMTIuMzk3LDg5LjQ4OCAxMi41NjksODkuMzg4IEwyNC4wNzQsODIuNjg2IEMyNC4zMzIsODIuNTM1IDI0Ljc2OCw4Mi40MTggMjUuMDY3LDgyLjQxOCBMMjUuNjMyLDgyLjQxOCBDMjUuODMyLDgyLjQxOCAyNS45NDgsODIuNDc0IDI1Ljk3OCw4Mi41ODQgQzI2LjAwOCw4Mi42OTQgMjUuOTM1LDgyLjgwMSAyNS43NjMsODIuOTAxIEwxNC4yNTgsODkuNjAzIEMxNCw4OS43NTQgMTMuNTY0LDg5Ljg3MSAxMy4yNjYsODkuODcxIEwxMy4yNjYsODkuODcxIFogTTEyLjY2Niw4OS42MjEgTDEyLjcsODkuNjIyIEwxMy4yNjYsODkuNjIyIEMxMy41MTgsODkuNjIyIDEzLjkxNSw4OS41MTUgMTQuMTMyLDg5LjM4OCBMMjUuNjM3LDgyLjY4NiBMMjUuNjY3LDgyLjY2OCBMMjUuNjMyLDgyLjY2NyBMMjUuMDY3LDgyLjY2NyBDMjQuODE1LDgyLjY2NyAyNC40MTgsODIuNzc1IDI0LjIsODIuOTAxIEwxMi42OTUsODkuNjAzIEwxMi42NjYsODkuNjIxIEwxMi42NjYsODkuNjIxIFoiIGlkPSJGaWxsLTkiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMTIuMzcsOTAuODAxIEwxMi4zNyw4OS41NTQgTDEyLjM3LDkwLjgwMSIgaWQ9IkZpbGwtMTAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNi4xMyw5My45MDEgQzUuMzc5LDkzLjgwOCA0LjgxNiw5My4xNjQgNC42OTEsOTIuNTI1IEMzLjg2LDg4LjI4NyAzLjU0LDgzLjc0MyAzLjUyNiw3MS4xNzMgQzMuNTExLDU4LjM4OSA0LjQyMyw1MS40MjggNC40MjMsNTEuNDI4IEM1LjEzNCw0Ny4yODIgNy4yMSw0Ni4yMzYgNy4yMSw0Ni4yMzYgQzcuMjEsNDYuMjM2IDgxLjY2NywzLjI1IDgyLjA2OSwzLjAxNyBDODIuMjkyLDIuODg4IDg0LjU1NiwxLjQzMyA4NS4yNjQsMy45NCBDODcuMjE0LDEwLjg0IDg2Ljc1MiwzNS44MjcgODUuNTM5LDQzLjgxOCBDODUuMTUsNDYuMzgzIDg0LjI5MSw0OS4wMzMgODIuNDgzLDUwLjEwMSBMNy4yMSw5My42NTMgQzYuODI4LDkzLjg3NCA2LjQ2MSw5My45NDEgNi4xMyw5My45MDEgQzYuMTMsOTMuOTAxIDMuMzQ5LDkzLjQ2IDMuMTI5LDkxLjc3NiBDMi41NjgsODcuNDk1IDEuOTc3LDgyLjk5NSAxLjk2Miw3MC40MjUgQzEuOTQ4LDU3LjY0MSAyLjg2LDUwLjY4IDIuODYsNTAuNjggQzMuNTcsNDYuNTM0IDUuNjQ3LDQ1LjQ4OSA1LjY0Nyw0NS40ODkgQzUuNjQ2LDQ1LjQ4OSA4LjA2NSw0NC4wOTIgMTIuMjQ1LDQxLjY3OSBMMTMuMTE2LDQxLjU2IEwxOS43MTUsMzcuNzMgTDE5Ljc2MSwzNy4yNjkgTDYuMTMsOTMuOTAxIiBpZD0iRmlsbC0xMSIgZmlsbD0iI0ZBRkFGQSI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjMxNyw5NC4xNjEgTDYuMTAyLDk0LjE0OCBMNi4xMDEsOTQuMTQ4IEw1Ljg1Nyw5NC4xMDEgQzUuMTM4LDkzLjk0NSAzLjA4NSw5My4zNjUgMi44ODEsOTEuODA5IEMyLjMxMyw4Ny40NjkgMS43MjcsODIuOTk2IDEuNzEzLDcwLjQyNSBDMS42OTksNTcuNzcxIDIuNjA0LDUwLjcxOCAyLjYxMyw1MC42NDggQzMuMzM4LDQ2LjQxNyA1LjQ0NSw0NS4zMSA1LjUzNSw0NS4yNjYgTDEyLjE2Myw0MS40MzkgTDEzLjAzMyw0MS4zMiBMMTkuNDc5LDM3LjU3OCBMMTkuNTEzLDM3LjI0NCBDMTkuNTI2LDM3LjEwNyAxOS42NDcsMzcuMDA4IDE5Ljc4NiwzNy4wMjEgQzE5LjkyMiwzNy4wMzQgMjAuMDIzLDM3LjE1NiAyMC4wMDksMzcuMjkzIEwxOS45NSwzNy44ODIgTDEzLjE5OCw0MS44MDEgTDEyLjMyOCw0MS45MTkgTDUuNzcyLDQ1LjcwNCBDNS43NDEsNDUuNzIgMy43ODIsNDYuNzcyIDMuMTA2LDUwLjcyMiBDMy4wOTksNTAuNzgyIDIuMTk4LDU3LjgwOCAyLjIxMiw3MC40MjQgQzIuMjI2LDgyLjk2MyAyLjgwOSw4Ny40MiAzLjM3Myw5MS43MjkgQzMuNDY0LDkyLjQyIDQuMDYyLDkyLjg4MyA0LjY4Miw5My4xODEgQzQuNTY2LDkyLjk4NCA0LjQ4Niw5Mi43NzYgNC40NDYsOTIuNTcyIEMzLjY2NSw4OC41ODggMy4yOTEsODQuMzcgMy4yNzYsNzEuMTczIEMzLjI2Miw1OC41MiA0LjE2Nyw1MS40NjYgNC4xNzYsNTEuMzk2IEM0LjkwMSw0Ny4xNjUgNy4wMDgsNDYuMDU5IDcuMDk4LDQ2LjAxNCBDNy4wOTQsNDYuMDE1IDgxLjU0MiwzLjAzNCA4MS45NDQsMi44MDIgTDgxLjk3MiwyLjc4NSBDODIuODc2LDIuMjQ3IDgzLjY5MiwyLjA5NyA4NC4zMzIsMi4zNTIgQzg0Ljg4NywyLjU3MyA4NS4yODEsMy4wODUgODUuNTA0LDMuODcyIEM4Ny41MTgsMTEgODYuOTY0LDM2LjA5MSA4NS43ODUsNDMuODU1IEM4NS4yNzgsNDcuMTk2IDg0LjIxLDQ5LjM3IDgyLjYxLDUwLjMxNyBMNy4zMzUsOTMuODY5IEM2Ljk5OSw5NC4wNjMgNi42NTgsOTQuMTYxIDYuMzE3LDk0LjE2MSBMNi4zMTcsOTQuMTYxIFogTTYuMTcsOTMuNjU0IEM2LjQ2Myw5My42OSA2Ljc3NCw5My42MTcgNy4wODUsOTMuNDM3IEw4Mi4zNTgsNDkuODg2IEM4NC4xODEsNDguODA4IDg0Ljk2LDQ1Ljk3MSA4NS4yOTIsNDMuNzggQzg2LjQ2NiwzNi4wNDkgODcuMDIzLDExLjA4NSA4NS4wMjQsNC4wMDggQzg0Ljg0NiwzLjM3NyA4NC41NTEsMi45NzYgODQuMTQ4LDIuODE2IEM4My42NjQsMi42MjMgODIuOTgyLDIuNzY0IDgyLjIyNywzLjIxMyBMODIuMTkzLDMuMjM0IEM4MS43OTEsMy40NjYgNy4zMzUsNDYuNDUyIDcuMzM1LDQ2LjQ1MiBDNy4zMDQsNDYuNDY5IDUuMzQ2LDQ3LjUyMSA0LjY2OSw1MS40NzEgQzQuNjYyLDUxLjUzIDMuNzYxLDU4LjU1NiAzLjc3NSw3MS4xNzMgQzMuNzksODQuMzI4IDQuMTYxLDg4LjUyNCA0LjkzNiw5Mi40NzYgQzUuMDI2LDkyLjkzNyA1LjQxMiw5My40NTkgNS45NzMsOTMuNjE1IEM2LjA4Nyw5My42NCA2LjE1OCw5My42NTIgNi4xNjksOTMuNjU0IEw2LjE3LDkzLjY1NCBMNi4xNyw5My42NTQgWiIgaWQ9IkZpbGwtMTIiIGZpbGw9IiM0NTVBNjQiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4zMTcsNjguOTgyIEM3LjgwNiw2OC43MDEgOC4yMDIsNjguOTI2IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNi44MjksNzEuMjk0IDYuNDMzLDcxLjA2OSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIiBpZD0iRmlsbC0xMyIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik02LjkyLDcxLjEzMyBDNi42MzEsNzEuMTMzIDYuNDMzLDcwLjkwNSA2LjQzMyw3MC41MDggQzYuNDMzLDY5Ljk0OCA2LjgyOSw2OS4yNjUgNy4zMTcsNjguOTgyIEM3LjQ2LDY4LjkgNy41OTUsNjguODYxIDcuNzE0LDY4Ljg2MSBDOC4wMDMsNjguODYxIDguMjAyLDY5LjA5IDguMjAyLDY5LjQ4NyBDOC4yMDIsNzAuMDQ3IDcuODA2LDcwLjczIDcuMzE3LDcxLjAxMiBDNy4xNzQsNzEuMDk0IDcuMDM5LDcxLjEzMyA2LjkyLDcxLjEzMyBNNy43MTQsNjguNjc0IEM3LjU1Nyw2OC42NzQgNy4zOTIsNjguNzIzIDcuMjI0LDY4LjgyMSBDNi42NzYsNjkuMTM4IDYuMjQ2LDY5Ljg3OSA2LjI0Niw3MC41MDggQzYuMjQ2LDcwLjk5NCA2LjUxNyw3MS4zMiA2LjkyLDcxLjMyIEM3LjA3OCw3MS4zMiA3LjI0Myw3MS4yNzEgNy40MTEsNzEuMTc0IEM3Ljk1OSw3MC44NTcgOC4zODksNzAuMTE3IDguMzg5LDY5LjQ4NyBDOC4zODksNjkuMDAxIDguMTE3LDY4LjY3NCA3LjcxNCw2OC42NzQiIGlkPSJGaWxsLTE0IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTYuOTIsNzAuOTQ3IEM2LjY0OSw3MC45NDcgNi42MjEsNzAuNjQgNi42MjEsNzAuNTA4IEM2LjYyMSw3MC4wMTcgNi45ODIsNjkuMzkyIDcuNDExLDY5LjE0NSBDNy41MjEsNjkuMDgyIDcuNjI1LDY5LjA0OSA3LjcxNCw2OS4wNDkgQzcuOTg2LDY5LjA0OSA4LjAxNSw2OS4zNTUgOC4wMTUsNjkuNDg3IEM4LjAxNSw2OS45NzggNy42NTIsNzAuNjAzIDcuMjI0LDcwLjg1MSBDNy4xMTUsNzAuOTE0IDcuMDEsNzAuOTQ3IDYuOTIsNzAuOTQ3IE03LjcxNCw2OC44NjEgQzcuNTk1LDY4Ljg2MSA3LjQ2LDY4LjkgNy4zMTcsNjguOTgyIEM2LjgyOSw2OS4yNjUgNi40MzMsNjkuOTQ4IDYuNDMzLDcwLjUwOCBDNi40MzMsNzAuOTA1IDYuNjMxLDcxLjEzMyA2LjkyLDcxLjEzMyBDNy4wMzksNzEuMTMzIDcuMTc0LDcxLjA5NCA3LjMxNyw3MS4wMTIgQzcuODA2LDcwLjczIDguMjAyLDcwLjA0NyA4LjIwMiw2OS40ODcgQzguMjAyLDY5LjA5IDguMDAzLDY4Ljg2MSA3LjcxNCw2OC44NjEiIGlkPSJGaWxsLTE1IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTcuNDQ0LDg1LjM1IEM3LjcwOCw4NS4xOTggNy45MjEsODUuMzE5IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuOTI1IDcuNzA4LDg2LjI5MiA3LjQ0NCw4Ni40NDQgQzcuMTgxLDg2LjU5NyA2Ljk2Nyw4Ni40NzUgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IiBpZD0iRmlsbC0xNiIgZmlsbD0iI0ZGRkZGRiI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik03LjIzLDg2LjUxIEM3LjA3NCw4Ni41MSA2Ljk2Nyw4Ni4zODcgNi45NjcsODYuMTczIEM2Ljk2Nyw4NS44NzEgNy4xODEsODUuNTAyIDcuNDQ0LDg1LjM1IEM3LjUyMSw4NS4zMDUgNy41OTQsODUuMjg0IDcuNjU4LDg1LjI4NCBDNy44MTQsODUuMjg0IDcuOTIxLDg1LjQwOCA3LjkyMSw4NS42MjIgQzcuOTIxLDg1LjkyNSA3LjcwOCw4Ni4yOTIgNy40NDQsODYuNDQ0IEM3LjM2Nyw4Ni40ODkgNy4yOTQsODYuNTEgNy4yMyw4Ni41MSBNNy42NTgsODUuMDk4IEM3LjU1OCw4NS4wOTggNy40NTUsODUuMTI3IDcuMzUxLDg1LjE4OCBDNy4wMzEsODUuMzczIDYuNzgxLDg1LjgwNiA2Ljc4MSw4Ni4xNzMgQzYuNzgxLDg2LjQ4MiA2Ljk2Niw4Ni42OTcgNy4yMyw4Ni42OTcgQzcuMzMsODYuNjk3IDcuNDMzLDg2LjY2NiA3LjUzOCw4Ni42MDcgQzcuODU4LDg2LjQyMiA4LjEwOCw4NS45ODkgOC4xMDgsODUuNjIyIEM4LjEwOCw4NS4zMTMgNy45MjMsODUuMDk4IDcuNjU4LDg1LjA5OCIgaWQ9IkZpbGwtMTciIGZpbGw9IiM4MDk3QTIiPjwvcGF0aD4KICAgICAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNy4yMyw4Ni4zMjIgTDcuMTU0LDg2LjE3MyBDNy4xNTQsODUuOTM4IDcuMzMzLDg1LjYyOSA3LjUzOCw4NS41MTIgTDcuNjU4LDg1LjQ3MSBMNy43MzQsODUuNjIyIEM3LjczNCw4NS44NTYgNy41NTUsODYuMTY0IDcuMzUxLDg2LjI4MiBMNy4yMyw4Ni4zMjIgTTcuNjU4LDg1LjI4NCBDNy41OTQsODUuMjg0IDcuNTIxLDg1LjMwNSA3LjQ0NCw4NS4zNSBDNy4xODEsODUuNTAyIDYuOTY3LDg1Ljg3MSA2Ljk2Nyw4Ni4xNzMgQzYuOTY3LDg2LjM4NyA3LjA3NCw4Ni41MSA3LjIzLDg2LjUxIEM3LjI5NCw4Ni41MSA3LjM2Nyw4Ni40ODkgNy40NDQsODYuNDQ0IEM3LjcwOCw4Ni4yOTIgNy45MjEsODUuOTI1IDcuOTIxLDg1LjYyMiBDNy45MjEsODUuNDA4IDcuODE0LDg1LjI4NCA3LjY1OCw4NS4yODQiIGlkPSJGaWxsLTE4IiBmaWxsPSIjODA5N0EyIj48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTc3LjI3OCw3Ljc2OSBMNzcuMjc4LDUxLjQzNiBMMTAuMjA4LDkwLjE2IEwxMC4yMDgsNDYuNDkzIEw3Ny4yNzgsNy43NjkiIGlkPSJGaWxsLTE5IiBmaWxsPSIjNDU1QTY0Ij48L3BhdGg+CiAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTEwLjA4Myw5MC4zNzUgTDEwLjA4Myw0Ni40MjEgTDEwLjE0Niw0Ni4zODUgTDc3LjQwMyw3LjU1NCBMNzcuNDAzLDUxLjUwOCBMNzcuMzQxLDUxLjU0NCBMMTAuMDgzLDkwLjM3NSBMMTAuMDgzLDkwLjM3NSBaIE0xMC4zMzMsNDYuNTY0IEwxMC4zMzMsODkuOTQ0IEw3Ny4xNTQsNTEuMzY1IEw3Ny4xNTQsNy45ODUgTDEwLjMzMyw0Ni41NjQgTDEwLjMzMyw0Ni41NjQgWiIgaWQ9IkZpbGwtMjAiIGZpbGw9IiM2MDdEOEIiPjwvcGF0aD4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0xMjUuNzM3LDg4LjY0NyBMMTE4LjA5OCw5MS45ODEgTDExOC4wOTgsODQgTDEwNi42MzksODguNzEzIEwxMDYuNjM5LDk2Ljk4MiBMOTksMTAwLjMxNSBMMTEyLjM2OSwxMDMuOTYxIEwxMjUuNzM3LDg4LjY0NyIgaWQ9IkltcG9ydGVkLUxheWVycy1Db3B5LTIiIGZpbGw9IiM0NTVBNjQiIHNrZXRjaDp0eXBlPSJNU1NoYXBlR3JvdXAiPjwvcGF0aD4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+")},r.exports=a},{"./util.js":68}],63:[function(t,r){function a(r){this.kFilter=r,this.currentAccelMeasurement=new o,this.currentGyroMeasurement=new o,this.previousGyroMeasurement=new o,this.filterQ=l.isIOS()?new n.Quaternion(-1,0,0,1):new n.Quaternion(1,0,0,1),this.previousFilterQ=new n.Quaternion,this.previousFilterQ.copy(this.filterQ),this.accelQ=new n.Quaternion,this.isOrientationInitialized=!1,this.estimatedGravity=new n.Vector3,this.measuredGravity=new n.Vector3,this.gyroIntegralQ=new n.Quaternion}var o=t("./sensor-sample.js"),n=t("../math-util.js"),l=t("../util.js");a.prototype.addAccelMeasurement=function(r,t){this.currentAccelMeasurement.set(r,t)},a.prototype.addGyroMeasurement=function(r,t){this.currentGyroMeasurement.set(r,t);var a=t-this.previousGyroMeasurement.timestampS;l.isTimestampDeltaValid(a)&&this.run_(),this.previousGyroMeasurement.copy(this.currentGyroMeasurement)},a.prototype.run_=function(){if(!this.isOrientationInitialized)return this.accelQ=this.accelToQuaternion_(this.currentAccelMeasurement.sample),this.previousFilterQ.copy(this.accelQ),void(this.isOrientationInitialized=!0);var a=this.currentGyroMeasurement.timestampS-this.previousGyroMeasurement.timestampS,t=this.gyroToQuaternionDelta_(this.currentGyroMeasurement.sample,a);this.gyroIntegralQ.multiply(t),this.filterQ.copy(this.previousFilterQ),this.filterQ.multiply(t);var o=new n.Quaternion;o.copy(this.filterQ),o.inverse(),this.estimatedGravity.set(0,0,-1),this.estimatedGravity.applyQuaternion(o),this.estimatedGravity.normalize(),this.measuredGravity.copy(this.currentAccelMeasurement.sample),this.measuredGravity.normalize();var i=new n.Quaternion;i.setFromUnitVectors(this.estimatedGravity,this.measuredGravity),i.inverse(),l.isDebug()&&console.log("Delta: %d deg, G_est: (%s, %s, %s), G_meas: (%s, %s, %s)",n.radToDeg*l.getQuaternionAngle(i),this.estimatedGravity.x.toFixed(1),this.estimatedGravity.y.toFixed(1),this.estimatedGravity.z.toFixed(1),this.measuredGravity.x.toFixed(1),this.measuredGravity.y.toFixed(1),this.measuredGravity.z.toFixed(1));var r=new n.Quaternion;r.copy(this.filterQ),r.multiply(i),this.filterQ.slerp(r,1-this.kFilter),this.previousFilterQ.copy(this.filterQ)},a.prototype.getOrientation=function(){return this.filterQ},a.prototype.accelToQuaternion_=function(r){var t=new n.Vector3;t.copy(r),t.normalize();var a=new n.Quaternion;return a.setFromUnitVectors(new n.Vector3(0,0,-1),t),a.inverse(),a},a.prototype.gyroToQuaternionDelta_=function(a,t){var o=new n.Quaternion,i=new n.Vector3;return i.copy(a),i.normalize(),o.setFromAxisAngle(i,a.length()*t),o},r.exports=a},{"../math-util.js":59,"../util.js":68,"./sensor-sample.js":66}],64:[function(t,r){function a(){this.deviceId="webvr-polyfill:fused",this.deviceName="VR Position Device (webvr-polyfill:fused)",this.accelerometer=new s.Vector3,this.gyroscope=new s.Vector3,this.start(),this.filter=new o(window.WebVRConfig.K_FILTER),this.posePredictor=new i(window.WebVRConfig.PREDICTION_TIME_S),this.touchPanner=new n,this.filterToWorldQ=new s.Quaternion,l.isIOS()?this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),Or/2):this.filterToWorldQ.setFromAxisAngle(new s.Vector3(1,0,0),-Or/2),this.inverseWorldToScreenQ=new s.Quaternion,this.worldToScreenQ=new s.Quaternion,this.originalPoseAdjustQ=new s.Quaternion,this.originalPoseAdjustQ.setFromAxisAngle(new s.Vector3(0,0,1),-window.orientation*Or/180),this.setScreenTransform_(),l.isLandscapeMode()&&this.filterToWorldQ.multiply(this.inverseWorldToScreenQ),this.resetQ=new s.Quaternion,this.isFirefoxAndroid=l.isFirefoxAndroid(),this.isIOS=l.isIOS(),this.orientationOut_=new Float32Array(4)}var o=t("./complementary-filter.js"),i=t("./pose-predictor.js"),n=t("../touch-panner.js"),s=t("../math-util.js"),l=t("../util.js");a.prototype.getPosition=function(){return null},a.prototype.getOrientation=function(){var r=this.filter.getOrientation();this.predictedQ=this.posePredictor.getPrediction(r,this.gyroscope,this.previousTimestampS);var a=new s.Quaternion;return a.copy(this.filterToWorldQ),a.multiply(this.resetQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||a.multiply(this.touchPanner.getOrientation()),a.multiply(this.predictedQ),a.multiply(this.worldToScreenQ),window.WebVRConfig.YAW_ONLY&&(a.x=0,a.z=0,a.normalize()),this.orientationOut_[0]=a.x,this.orientationOut_[1]=a.y,this.orientationOut_[2]=a.z,this.orientationOut_[3]=a.w,this.orientationOut_},a.prototype.resetPose=function(){this.resetQ.copy(this.filter.getOrientation()),this.resetQ.x=0,this.resetQ.y=0,this.resetQ.z*=-1,this.resetQ.normalize(),l.isLandscapeMode()&&this.resetQ.multiply(this.inverseWorldToScreenQ),this.resetQ.multiply(this.originalPoseAdjustQ),window.WebVRConfig.TOUCH_PANNER_DISABLED||this.touchPanner.resetSensor()},a.prototype.onDeviceMotion_=function(t){this.updateDeviceMotion_(t)},a.prototype.updateDeviceMotion_=function(r){var a=r.accelerationIncludingGravity,t=r.rotationRate,i=r.timeStamp/1e3,o=i-this.previousTimestampS;return o<=l.MIN_TIMESTEP||o>l.MAX_TIMESTEP?(console.warn("Invalid timestamps detected. Time step between successive gyroscope sensor samples is very small or not monotonic"),void(this.previousTimestampS=i)):void(this.accelerometer.set(-a.x,-a.y,-a.z),this.gyroscope.set(t.alpha,t.beta,t.gamma),(this.isIOS||this.isFirefoxAndroid)&&this.gyroscope.multiplyScalar(Or/180),this.filter.addAccelMeasurement(this.accelerometer,i),this.filter.addGyroMeasurement(this.gyroscope,i),this.previousTimestampS=i)},a.prototype.onOrientationChange_=function(){this.setScreenTransform_()},a.prototype.onMessage_=function(r){var a=r.data;a&&a.type&&"devicemotion"===a.type.toLowerCase()&&this.updateDeviceMotion_(a.deviceMotionEvent)},a.prototype.setScreenTransform_=function(){switch(this.worldToScreenQ.set(0,0,0,1),window.orientation){case 0:break;case 90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),-Or/2);break;case-90:this.worldToScreenQ.setFromAxisAngle(new s.Vector3(0,0,1),Or/2);}this.inverseWorldToScreenQ.copy(this.worldToScreenQ),this.inverseWorldToScreenQ.inverse()},a.prototype.start=function(){this.onDeviceMotionCallback_=this.onDeviceMotion_.bind(this),this.onOrientationChangeCallback_=this.onOrientationChange_.bind(this),this.onMessageCallback_=this.onMessage_.bind(this),l.isIOS()&&l.isInsideCrossDomainIFrame()&&window.addEventListener("message",this.onMessageCallback_),window.addEventListener("orientationchange",this.onOrientationChangeCallback_),window.addEventListener("devicemotion",this.onDeviceMotionCallback_)},a.prototype.stop=function(){window.removeEventListener("devicemotion",this.onDeviceMotionCallback_),window.removeEventListener("orientationchange",this.onOrientationChangeCallback_),window.removeEventListener("message",this.onMessageCallback_)},r.exports=a},{"../math-util.js":59,"../touch-panner.js":67,"../util.js":68,"./complementary-filter.js":63,"./pose-predictor.js":65}],65:[function(t,r){function a(r){this.predictionTimeS=r,this.previousQ=new n.Quaternion,this.previousTimestampS=null,this.deltaQ=new n.Quaternion,this.outQ=new n.Quaternion}var n=t("../math-util"),l=t("../util");a.prototype.getPrediction=function(a,t,i){if(!this.previousTimestampS)return this.previousQ.copy(a),this.previousTimestampS=i,a;var d=new n.Vector3;d.copy(t),d.normalize();var o=t.length();if(o<20*n.degToRad)return l.isDebug()&&console.log("Moving slowly, at %s deg/s: no prediction",(n.radToDeg*o).toFixed(1)),this.outQ.copy(a),this.previousQ.copy(a),this.outQ;var s=(this.previousTimestampS,o*this.predictionTimeS);return this.deltaQ.setFromAxisAngle(d,s),this.outQ.copy(this.previousQ),this.outQ.multiply(this.deltaQ),this.previousQ.copy(a),this.previousTimestampS=i,this.outQ},r.exports=a},{"../math-util":59,"../util":68}],66:[function(t,r){function a(r,a){this.set(r,a)}a.prototype.set=function(r,a){this.sample=r,this.timestampS=a},a.prototype.copy=function(t){this.set(t.sample,t.timestampS)},r.exports=a},{}],67:[function(t,r){function a(){window.addEventListener("touchstart",this.onTouchStart_.bind(this)),window.addEventListener("touchmove",this.onTouchMove_.bind(this)),window.addEventListener("touchend",this.onTouchEnd_.bind(this)),this.isTouching=!1,this.rotateStart=new o.Vector2,this.rotateEnd=new o.Vector2,this.rotateDelta=new o.Vector2,this.theta=0,this.orientation=new o.Quaternion}var o=t("./math-util.js"),i=t("./util.js");a.prototype.getOrientation=function(){return this.orientation.setFromEulerXYZ(0,0,this.theta),this.orientation},a.prototype.resetSensor=function(){this.theta=0},a.prototype.onTouchStart_=function(r){r.touches&&1==r.touches.length&&(this.rotateStart.set(r.touches[0].pageX,r.touches[0].pageY),this.isTouching=!0)},a.prototype.onTouchMove_=function(r){if(this.isTouching){this.rotateEnd.set(r.touches[0].pageX,r.touches[0].pageY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart),this.rotateStart.copy(this.rotateEnd),i.isIOS()&&(this.rotateDelta.x*=-1);var t=document.body;this.theta+=2*Or*this.rotateDelta.x/t.clientWidth*.5}},a.prototype.onTouchEnd_=function(){this.isTouching=!1},r.exports=a},{"./math-util.js":59,"./util.js":68}],68:[function(t,r){var a=window.Util||{};a.MIN_TIMESTEP=.001,a.MAX_TIMESTEP=1,a.base64=function(r,a){return"data:"+r+";base64,"+a},a.clamp=function(r,a,t){return N(L(a,r),t)},a.lerp=function(r,a,t){return r+(a-r)*t},a.race=function(a){return Promise.race?Promise.race(a):new Promise(function(o,t){for(var i=0;i<a.length;i++)a[i].then(o,t)})},a.isIOS=function(){var t=/iPad|iPhone|iPod/.test(navigator.platform);return function(){return t}}(),a.isWebViewAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Version")&&-1!==navigator.userAgent.indexOf("Android")&&-1!==navigator.userAgent.indexOf("Chrome");return function(){return t}}(),a.isSafari=function(){var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);return function(){return t}}(),a.isFirefoxAndroid=function(){var t=-1!==navigator.userAgent.indexOf("Firefox")&&-1!==navigator.userAgent.indexOf("Android");return function(){return t}}(),a.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},a.isTimestampDeltaValid=function(t){return!isNaN(t)&&!(t<=a.MIN_TIMESTEP)&&!(t>a.MAX_TIMESTEP)},a.getScreenWidth=function(){return L(window.screen.width,window.screen.height)*window.devicePixelRatio},a.getScreenHeight=function(){return N(window.screen.width,window.screen.height)*window.devicePixelRatio},a.requestFullscreen=function(t){if(a.isWebViewAndroid())return!1;if(t.requestFullscreen)t.requestFullscreen();else if(t.webkitRequestFullscreen)t.webkitRequestFullscreen();else if(t.mozRequestFullScreen)t.mozRequestFullScreen();else{if(!t.msRequestFullscreen)return!1;t.msRequestFullscreen()}return!0},a.exitFullscreen=function(){if(document.exitFullscreen)document.exitFullscreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},a.getFullscreenElement=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement},a.linkProgram=function(s,d,t,i){var r=s.createShader(s.VERTEX_SHADER);s.shaderSource(r,d),s.compileShader(r);var n=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(n,t),s.compileShader(n);var o=s.createProgram();for(var a in s.attachShader(o,r),s.attachShader(o,n),i)s.bindAttribLocation(o,i[a],a);return s.linkProgram(o),s.deleteShader(r),s.deleteShader(n),o},a.getProgramUniforms=function(a,s){for(var t={},i=a.getProgramParameter(s,a.ACTIVE_UNIFORMS),r="",n=0;n<i;n++)r=a.getActiveUniform(s,n).name.replace("[0]",""),t[r]=a.getUniformLocation(s,r);return t},a.orthoMatrix=function(s,d,t,i,r,n,o){var a=1/(d-t),l=1/(i-r),c=1/(n-o);return s[0]=-2*a,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*l,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*c,s[11]=0,s[12]=(d+t)*a,s[13]=(r+i)*l,s[14]=(o+n)*c,s[15]=1,s},a.copyArray=function(a,o){for(var t=0,i=a.length;t<i;t++)o[t]=a[t]},a.isMobile=function(){var r=!1;return function(a){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(r=!0)}(navigator.userAgent||navigator.vendor||window.opera),r},a.extend=function(r,a){for(var t in a)a.hasOwnProperty(t)&&(r[t]=a[t]);return r},a.safariCssSizeWorkaround=function(r){if(a.isIOS()){var o=r.style.width,t=r.style.height;r.style.width=parseInt(o)+1+"px",r.style.height=parseInt(t)+"px",setTimeout(function(){r.style.width=o,r.style.height=t},100)}window.Util=a,window.canvas=r},a.isDebug=function(){return a.getQueryParameter("debug")},a.getQueryParameter=function(r){var r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),a=new RegExp("[\\?&]"+r+"=([^&#]*)"),t=a.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},a.frameDataFromPose=function(){function d(a,d,t,i){var r=x(d?d.upDegrees*g:o),n=x(d?d.downDegrees*g:o),l=x(d?d.leftDegrees*g:o),c=x(d?d.rightDegrees*g:o),p=2/(l+c),s=2/(r+n);return a[0]=p,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=s,a[6]=0,a[7]=0,a[8]=.5*(-(l-c)*p),a[9]=.5*((r-n)*s),a[10]=i/(t-i),a[11]=-1,a[12]=0,a[13]=0,a[14]=i*t/(t-i),a[15]=0,a}function p(y,M,x){var i=M[0],r=M[1],n=M[2],o=M[3],a=i+i,l=r+r,c=n+n,u=i*a,s=i*l,m=i*c,d=r*l,f=r*c,g=n*c,E=o*a,p=o*l,h=o*c;return y[0]=1-(d+g),y[1]=s+h,y[2]=m-p,y[3]=0,y[4]=s-h,y[5]=1-(u+g),y[6]=f+E,y[7]=0,y[8]=m+p,y[9]=f-E,y[10]=1-(u+d),y[11]=0,y[12]=x[0],y[13]=x[1],y[14]=x[2],y[15]=1,y}function t(y,M,t){var x=t[0],E=t[1],p=t[2],h,r,n,o,a,l,c,u,s,m,d,f;return M===y?(y[12]=M[0]*x+M[4]*E+M[8]*p+M[12],y[13]=M[1]*x+M[5]*E+M[9]*p+M[13],y[14]=M[2]*x+M[6]*E+M[10]*p+M[14],y[15]=M[3]*x+M[7]*E+M[11]*p+M[15]):(h=M[0],r=M[1],n=M[2],o=M[3],a=M[4],l=M[5],c=M[6],u=M[7],s=M[8],m=M[9],d=M[10],f=M[11],y[0]=h,y[1]=r,y[2]=n,y[3]=o,y[4]=a,y[5]=l,y[6]=c,y[7]=u,y[8]=s,y[9]=m,y[10]=d,y[11]=f,y[12]=h*x+a*E+s*p+M[12],y[13]=r*x+l*E+m*p+M[13],y[14]=n*x+c*E+d*p+M[14],y[15]=o*x+u*E+f*p+M[15]),y}function i(T,L){var t=L[0],i=L[1],D=L[2],n=L[3],o=L[4],a=L[5],l=L[6],c=L[7],u=L[8],s=L[9],m=L[10],d=L[11],f=L[12],g=L[13],N=L[14],p=L[15],h=t*a-i*o,v=t*l-D*o,w=t*c-n*o,b=i*l-D*a,x=i*c-n*a,C=D*c-n*l,_=u*g-s*f,y=u*N-m*f,j=u*p-d*f,S=s*N-m*g,M=s*p-d*g,E=m*p-d*N,A=h*E-v*M+w*S+b*j-x*y+C*_;return A?(A=1/A,T[0]=(a*E-l*M+c*S)*A,T[1]=(D*M-i*E-n*S)*A,T[2]=(g*C-N*x+p*b)*A,T[3]=(m*x-s*C-d*b)*A,T[4]=(l*j-o*E-c*y)*A,T[5]=(t*E-D*j+n*y)*A,T[6]=(N*w-f*C-p*v)*A,T[7]=(u*C-m*w+d*v)*A,T[8]=(o*M-a*j+c*_)*A,T[9]=(i*j-t*M-n*_)*A,T[10]=(f*x-g*w+p*h)*A,T[11]=(s*w-u*x-d*h)*A,T[12]=(a*y-o*S-l*_)*A,T[13]=(t*S-i*y+D*_)*A,T[14]=(g*v-f*b-N*h)*A,T[15]=(u*b-s*v+m*h)*A,T):null}function r(r,c,o,a,u){d(r,a?a.fieldOfView:null,u.depthNear,u.depthFar),p(c,o.orientation||m,o.position||l),a&&t(c,c,a.offset),i(c,c)}var g=Or/180,o=.25*Or,m=new Float32Array([0,0,0,1]),l=new Float32Array([0,0,0]);return function(a,o,t){return a&&o&&(a.pose=o,a.timestamp=o.timestamp,r(a.leftProjectionMatrix,a.leftViewMatrix,o,t.getEyeParameters("left"),t),r(a.rightProjectionMatrix,a.rightViewMatrix,o,t.getEyeParameters("right"),t),!0)}}(),a.isInsideCrossDomainIFrame=function(){var r=window.self!==window.top,o=a.getDomainFromUrl(document.referrer),t=a.getDomainFromUrl(window.location.href);return r&&o!==t},a.getDomainFromUrl=function(r){var a;return a=-1<r.indexOf("://")?r.split("/")[2]:r.split("/")[0],a=a.split(":")[0]},r.exports=a},{}],69:[function(t,r){function a(){try{this.selectedKey=localStorage.getItem(s)}catch(t){console.error("Failed to load viewer profile: %s",t)}this.selectedKey||(this.selectedKey=n),this.dialog=this.createDialog_(o.Viewers),this.root=null,this.onChangeCallbacks_=[]}var o=t("./device-info.js"),i=t("./util.js"),n="CardboardV1",s="WEBVR_CARDBOARD_VIEWER";a.prototype.show=function(t){this.root=t,t.appendChild(this.dialog),this.dialog.querySelector("#"+this.selectedKey).checked=!0,this.dialog.style.display="block"},a.prototype.hide=function(){this.root&&this.root.contains(this.dialog)&&this.root.removeChild(this.dialog),this.dialog.style.display="none"},a.prototype.getCurrentViewer=function(){return o.Viewers[this.selectedKey]},a.prototype.getSelectedKey_=function(){var t=this.dialog.querySelector("input[name=field]:checked");return t?t.id:null},a.prototype.onChange=function(t){this.onChangeCallbacks_.push(t)},a.prototype.fireOnChange_=function(r){for(var a=0;a<this.onChangeCallbacks_.length;a++)this.onChangeCallbacks_[a](r)},a.prototype.onSave_=function(){if(this.selectedKey=this.getSelectedKey_(),!this.selectedKey||!o.Viewers[this.selectedKey])return void console.error("ViewerSelector.onSave_: this should never happen!");this.fireOnChange_(o.Viewers[this.selectedKey]);try{localStorage.setItem(s,this.selectedKey)}catch(t){console.error("Failed to save viewer profile: %s",t)}this.hide()},a.prototype.createDialog_=function(a){var s=document.createElement("div");s.classList.add("webvr-polyfill-viewer-selector"),s.style.display="none";var t=document.createElement("div"),i=t.style;i.position="fixed",i.left=0,i.top=0,i.width="100%",i.height="100%",i.background="rgba(0, 0, 0, 0.3)",t.addEventListener("click",this.hide.bind(this));var o=document.createElement("div"),i=o.style;for(var r in i.boxSizing="border-box",i.position="fixed",i.top="24px",i.left="50%",i.marginLeft="-140px",i.width="280px",i.padding="24px",i.overflow="hidden",i.background="#fafafa",i.fontFamily="'Roboto', sans-serif",i.boxShadow="0px 5px 20px #666",o.appendChild(this.createH1_("Select your viewer")),a)o.appendChild(this.createChoice_(r,a[r].label));return o.appendChild(this.createButton_("Save",this.onSave_.bind(this))),s.appendChild(t),s.appendChild(o),s},a.prototype.createH1_=function(r){var a=document.createElement("h1"),t=a.style;return t.color="black",t.fontSize="20px",t.fontWeight="bold",t.marginTop=0,t.marginBottom="24px",a.innerHTML=r,a},a.prototype.createChoice_=function(a,n){var t=document.createElement("div");t.style.marginTop="8px",t.style.color="black";var i=document.createElement("input");i.style.fontSize="30px",i.setAttribute("id",a),i.setAttribute("type","radio"),i.setAttribute("value",a),i.setAttribute("name","field");var o=document.createElement("label");return o.style.marginLeft="4px",o.setAttribute("for",a),o.innerHTML=n,t.appendChild(i),t.appendChild(o),t},a.prototype.createButton_=function(r,a){var t=document.createElement("button");t.innerHTML=r;var i=t.style;return i.float="right",i.textTransform="uppercase",i.color="#1094f7",i.fontSize="14px",i.letterSpacing=0,i.border=0,i.background="none",i.marginTop="16px",t.addEventListener("click",a),t},r.exports=a},{"./device-info.js":53,"./util.js":68}],70:[function(t,r){function a(){function t(r,a,i){var o=document.createElement("source");o.src=i,o.type="video/"+a,r.appendChild(o)}var r=document.createElement("video");r.setAttribute("loop",""),t(r,"webm",i.base64("video/webm","GkXfo0AgQoaBAUL3gQFC8oEEQvOBCEKCQAR3ZWJtQoeBAkKFgQIYU4BnQI0VSalmQCgq17FAAw9CQE2AQAZ3aGFtbXlXQUAGd2hhbW15RIlACECPQAAAAAAAFlSua0AxrkAu14EBY8WBAZyBACK1nEADdW5khkAFVl9WUDglhohAA1ZQOIOBAeBABrCBCLqBCB9DtnVAIueBAKNAHIEAAIAwAQCdASoIAAgAAUAmJaQAA3AA/vz0AAA=")),t(r,"mp4",i.base64("video/mp4","AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAAG21kYXQAAAGzABAHAAABthADAowdbb9/AAAC6W1vb3YAAABsbXZoZAAAAAB8JbCAfCWwgAAAA+gAAAAAAAEAAAEAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIVdHJhawAAAFx0a2hkAAAAD3wlsIB8JbCAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAQAAAAAAIAAAACAAAAAABsW1kaWEAAAAgbWRoZAAAAAB8JbCAfCWwgAAAA+gAAAAAVcQAAAAAAC1oZGxyAAAAAAAAAAB2aWRlAAAAAAAAAAAAAAAAVmlkZW9IYW5kbGVyAAAAAVxtaW5mAAAAFHZtaGQAAAABAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAAEcc3RibAAAALhzdHNkAAAAAAAAAAEAAACobXA0dgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAIAAgASAAAAEgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABj//wAAAFJlc2RzAAAAAANEAAEABDwgEQAAAAADDUAAAAAABS0AAAGwAQAAAbWJEwAAAQAAAAEgAMSNiB9FAEQBFGMAAAGyTGF2YzUyLjg3LjQGAQIAAAAYc3R0cwAAAAAAAAABAAAAAQAAAAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAEAAAABAAAAFHN0c3oAAAAAAAAAEwAAAAEAAAAUc3RjbwAAAAAAAAABAAAALAAAAGB1ZHRhAAAAWG1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAG1kaXJhcHBsAAAAAAAAAAAAAAAAK2lsc3QAAAAjqXRvbwAAABtkYXRhAAAAAQAAAABMYXZmNTIuNzguMw==")),this.request=function(){r.paused&&r.play()},this.release=function(){r.pause()}}function o(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location=window.location,setTimeout(window.stop,0)},3e4))},this.release=function(){t&&(clearInterval(t),t=null)}}var i=t("./util.js");r.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?o:a}()},{"./util.js":68}],71:[function(t,r){function a(){this.displays=[],this.devices=[],this.devicesPopulated=!1,this.nativeWebVRAvailable=this.isWebVRAvailable(),this.nativeLegacyWebVRAvailable=this.isDeprecatedWebVRAvailable(),this.nativeGetVRDisplaysFunc=this.nativeWebVRAvailable?navigator.getVRDisplays:null,this.nativeLegacyWebVRAvailable||this.nativeWebVRAvailable||(this.enablePolyfill(),window.WebVRConfig.ENABLE_DEPRECATED_API&&this.enableDeprecatedPolyfill()),o()}function o(){"VRDisplay"in window&&!("VRFrameData"in window)&&(window.VRFrameData=d,"depthNear"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthNear=.01),"depthFar"in window.VRDisplay.prototype||(window.VRDisplay.prototype.depthFar=1e4),window.VRDisplay.prototype.getFrameData=function(t){return n.frameDataFromPose(t,this.getPose(),this)})}var n=t("./util.js"),i=t("./cardboard-vr-display.js"),s=t("./mouse-keyboard-vr-display.js"),l=t("./base.js").VRDisplay,d=t("./base.js").VRFrameData,c=t("./base.js").HMDVRDevice,p=t("./base.js").PositionSensorVRDevice,u=t("./display-wrappers.js").VRDisplayHMDDevice,m=t("./display-wrappers.js").VRDisplayPositionSensorDevice,g=t("../package.json").version;a.prototype.isWebVRAvailable=function(){return"getVRDisplays"in navigator},a.prototype.isDeprecatedWebVRAvailable=function(){return"getVRDevices"in navigator||"mozGetVRDevices"in navigator},a.prototype.connectDisplay=function(t){t.fireVRDisplayConnect_(),this.displays.push(t)},a.prototype.populateDevices=function(){if(!this.devicesPopulated){var t=null;this.isCardboardCompatible()&&(t=new i,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new m(t)))),this.isMobile()||window.WebVRConfig.MOUSE_KEYBOARD_CONTROLS_DISABLED||(t=new s,this.connectDisplay(t),window.WebVRConfig.ENABLE_DEPRECATED_API&&(this.devices.push(new u(t)),this.devices.push(new m(t)))),this.devicesPopulated=!0}},a.prototype.enablePolyfill=function(){if(navigator.getVRDisplays=this.getVRDisplays.bind(this),this.nativeWebVRAvailable&&window.VRFrameData){var r=window.VRFrameData,o=new window.VRFrameData,i=window.VRDisplay.prototype.getFrameData;window.VRFrameData=d,window.VRDisplay.prototype.getFrameData=function(t){return t instanceof r?void i.call(this,t):void(i.call(this,o),t.pose=o.pose,n.copyArray(o.leftProjectionMatrix,t.leftProjectionMatrix),n.copyArray(o.rightProjectionMatrix,t.rightProjectionMatrix),n.copyArray(o.leftViewMatrix,t.leftViewMatrix),n.copyArray(o.rightViewMatrix,t.rightViewMatrix))}}if(window.VRDisplay=l,navigator&&void 0===navigator.vrEnabled){var t=this;Object.defineProperty(navigator,"vrEnabled",{get:function(){return t.isCardboardCompatible()&&(t.isFullScreenAvailable()||n.isIOS())}})}"VRFrameData"in window||(window.VRFrameData=d)},a.prototype.enableDeprecatedPolyfill=function(){navigator.getVRDevices=this.getVRDevices.bind(this),window.HMDVRDevice=c,window.PositionSensorVRDevice=p},a.prototype.getVRDisplays=function(){this.populateDevices();var r=this.displays;if(!this.nativeWebVRAvailable)return Promise.resolve(r);var o=this.nativeGetVRDisplaysFunc.call(navigator),t=new Promise(function(t){a=setTimeout(function(){console.warn("Native WebVR implementation detected, but `getVRDisplays()` failed to resolve. Falling back to polyfill."),t([])},window.WebVRConfig.GET_VR_DISPLAYS_TIMEOUT)}),a;return n.race([o,t]).then(function(o){return clearTimeout(a),window.WebVRConfig.ALWAYS_APPEND_POLYFILL_DISPLAY?o.concat(r):0<o.length?o:r})},a.prototype.getVRDevices=function(){console.warn("getVRDevices is deprecated. Please update your code to use getVRDisplays instead.");var r=this;return new Promise(function(o,a){try{if(!r.devicesPopulated){if(r.nativeWebVRAvailable)return navigator.getVRDisplays(function(i){for(var t=0;t<i.length;++t)r.devices.push(new u(i[t])),r.devices.push(new m(i[t]));r.devicesPopulated=!0,o(r.devices)},a);if(r.nativeLegacyWebVRAvailable)return(navigator.getVRDDevices||navigator.mozGetVRDevices)(function(i){for(var t=0;t<i.length;++t)i[t]instanceof c&&r.devices.push(i[t]),i[t]instanceof p&&r.devices.push(i[t]);r.devicesPopulated=!0,o(r.devices)},a)}r.populateDevices(),o(r.devices)}catch(t){a(t)}})},a.prototype.NativeVRFrameData=window.VRFrameData,a.prototype.isMobile=function(){return /Android/i.test(navigator.userAgent)||/iPhone|iPad|iPod/i.test(navigator.userAgent)},a.prototype.isCardboardCompatible=function(){return this.isMobile()||window.WebVRConfig.FORCE_ENABLE_VR},a.prototype.isFullScreenAvailable=function(){return document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled||!1},a.InstallWebVRSpecShim=o,a.version=g,r.exports.WebVRPolyfill=a},{"../package.json":47,"./base.js":48,"./cardboard-vr-display.js":51,"./display-wrappers.js":54,"./mouse-keyboard-vr-display.js":60,"./util.js":68}],72:[function(t,r){function a(a,o,n,r){var t=a.indexOf(o,n);return-1===t||t>r?r:t}function o(t){return n.test(t)}function s(l,d,n,r,t){for(var i=[],a=n,o=n;o<r&&o<d.length;o++){var s=d.charAt(o),m=c.test(s);if(m||o===r-1){var u=m?o:o+1,g=l(d,a,u,t);i.push(g),a=o+1}}return i}function l(l,d,n,r,t,m){var g=[],M=t;for("nowrap"===m&&(M=y);n<r&&n<d.length;){for(var s=a(d,i,n,r);n<s&&o(d.charAt(n));)n++;var h=l(d,n,s,M),u=n+(h.end-h.start),f=u+i.length;if(u<s){for(;u>n&&!o(d.charAt(u));)u--;if(u===n)f>n+i.length&&f--,u=f;else for(f=u;u>n&&o(d.charAt(u-i.length));)u--}if(u>=n){var p=l(d,n,u,M);g.push(p)}n=f}return g}function d(a,o,i,r){return{start:o,end:o+N(r,i-o)}}var c=/\n/,i="\n",n=/\s/;r.exports=function(t,a){return r.exports.lines(t,a).map(function(r){return t.substring(r.start,r.end)}).join("\n")},r.exports.lines=function(c,p){if(p=p||{},0===p.width&&"nowrap"!==p.mode)return[];c=c||"";var n="number"==typeof p.width?p.width:y,r=L(0,p.start||0),t="number"==typeof p.end?p.end:c.length,i=p.mode,a=p.measure||d;return"pre"===i?s(a,c,r,t,n):l(a,c,r,t,n,i)}},{}],73:[function(t,r){"use strict";function g(r){for(var a in r)if(r.hasOwnProperty(a))return!1;return!0}function a(a,o,t){var r=a;return s(o)?(t=o,"string"==typeof a&&(r={uri:a})):r=l(o,{uri:a}),r.callback=t,r}function y(i,n,t){return n=a(i,n,t),o(n)}function o(M){function x(){var t;if(t=a.response?a.response:a.responseText||n(a),T)try{t=JSON.parse(t)}catch(t){}return t}function t(t){return clearTimeout(L),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,s(t,b)}function r(){if(!u){var r;clearTimeout(L),r=M.useXDR&&void 0===a.status?200:1223===a.status?204:a.status;var d=b,n=null;return 0===r?n=new Error("Internal XMLHttpRequest Error"):(d={body:x(),statusCode:r,method:v,headers:{},url:E,rawRequest:a},a.getAllResponseHeaders&&(d.headers=c(a.getAllResponseHeaders()))),s(n,d,d.body)}}if(void 0===M.callback)throw new Error("callback argument missing");var o=!1,s=function(a,t,r){o||(o=!0,M.callback(a,t,r))},a=M.xhr||null;a||(a=M.cors||M.useXDR?new y.XDomainRequest:new y.XMLHttpRequest);var E=a.url=M.uri||M.url,v=a.method=M.method||"GET",A=M.body||M.data,f=a.headers=M.headers||{},m=!!M.sync,T=!1,b={body:void 0,headers:{},statusCode:0,method:v,url:E,rawRequest:a},h,u,L;if("json"in M&&!1!==M.json&&(T=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),A=JSON.stringify(!0===M.json?A:M.json))),a.onreadystatechange=function(){4===a.readyState&&setTimeout(r,0)},a.onload=r,a.onerror=t,a.onprogress=function(){},a.onabort=function(){u=!0},a.ontimeout=t,a.open(v,E,!m,M.username,M.password),m||(a.withCredentials=!!M.withCredentials),!m&&0<M.timeout&&(L=setTimeout(function(){if(!u){u=!0,a.abort("timeout");var r=new Error("XMLHttpRequest timeout");r.code="ETIMEDOUT",t(r)}},M.timeout)),a.setRequestHeader)for(h in f)f.hasOwnProperty(h)&&a.setRequestHeader(h,f[h]);else if(M.headers&&!g(M.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in M&&(a.responseType=M.responseType),"beforeSend"in M&&"function"==typeof M.beforeSend&&M.beforeSend(a),a.send(A||null),a}function n(r){if("document"===r.responseType)return r.responseXML;var a=r.responseXML&&"parsererror"===r.responseXML.documentElement.nodeName;return""!==r.responseType||a?null:r.responseXML}var i=t("global/window"),s=t("is-function"),c=t("parse-headers"),l=t("xtend");r.exports=y,y.XMLHttpRequest=i.XMLHttpRequest||function(){},y.XDomainRequest="withCredentials"in new y.XMLHttpRequest?y.XMLHttpRequest:i.XDomainRequest,function(a,o){for(var t=0;t<a.length;t++)o(a[t])}(["get","put","post","patch","head","delete"],function(i){y["delete"===i?"del":i]=function(s,t,r){return t=a(s,t,r),t.method=i.toUpperCase(),o(t)}})},{"global/window":17,"is-function":21,"parse-headers":31,xtend:75}],74:[function(t,r){r.exports=function(){return void 0===self.DOMParser?void 0!==self.ActiveXObject&&new self.ActiveXObject("Microsoft.XMLDOM")?function(t){var r=new self.ActiveXObject("Microsoft.XMLDOM");return r.async="false",r.loadXML(t),r}:function(t){var r=document.createElement("div");return r.innerHTML=t,r}:function(t){return new self.DOMParser().parseFromString(t,"application/xml")}}()},{}],75:[function(t,r){r.exports=function(){for(var o={},r=0,i;r<arguments.length;r++)for(var t in i=arguments[r],i)a.call(i,t)&&(o[t]=i[t]);return o};var a=Object.prototype.hasOwnProperty},{}],76:[function(t,r){r.exports={name:"aframe",version:"0.7.0",description:"A web framework for building virtual reality experiences.",homepage:"https://aframe.io/",main:"dist/aframe-master.js",scripts:{browserify:"browserify src/index.js -s 'AFRAME' -p browserify-derequire",build:"shx mkdir -p build/ && npm run browserify -- --debug -t [envify --INSPECTOR_VERSION dev] -o build/aframe.js",codecov:"codecov",dev:"npm run build && cross-env INSPECTOR_VERSION=dev node ./scripts/budo -t envify",dist:"npm run dist:min && npm run dist:max","dist:max":"npm run browserify -s -- --debug | exorcist dist/aframe.js.map > dist/aframe.js","dist:min":"npm run browserify -s -- --debug -p [minifyify --map aframe.min.js.map --output dist/aframe.min.js.map] -o dist/aframe.min.js",docs:"markserv --dir docs --port 9001",preghpages:"node ./scripts/preghpages.js",ghpages:"ghpages -p gh-pages/",lint:"semistandard -v | snazzy","lint:fix":"semistandard --fix",precommit:"npm run lint",prerelease:"node scripts/release.js 0.6.1 0.7.0",start:"npm run dev",test:"karma start ./tests/karma.conf.js","test:docs":"node scripts/docsLint.js","test:firefox":"npm test -- --browsers Firefox","test:chrome":"npm test -- --browsers Chrome","test:node":"mocha --ui tdd tests/node"},repository:"aframevr/aframe",license:"MIT",dependencies:{"@tweenjs/tween.js":"^16.8.0","browserify-css":"^0.8.2",debug:"ngokevin/debug#noTimestamp","deep-assign":"^2.0.0","document-register-element":"dmarcos/document-register-element#8ccc532b7",envify:"^3.4.1","load-bmfont":"^1.2.3","object-assign":"^4.0.1",present:"0.0.6","promise-polyfill":"^3.1.0","style-attr":"^1.0.2",three:"^0.87.0","three-bmfont-text":"^2.1.0","webvr-polyfill":"^0.9.36"},devDependencies:{browserify:"^13.1.0","browserify-derequire":"^0.9.4","browserify-istanbul":"^2.0.0",budo:"^9.2.0",chai:"^3.5.0","chai-shallow-deep-equal":"^1.4.0",chalk:"^1.1.3",codecov:"^1.0.1","cross-env":"^5.0.1",exorcist:"^0.4.0",ghpages:"0.0.8","git-rev":"^0.2.1",glob:"^7.1.1",husky:"^0.11.7",istanbul:"^0.4.5",jsdom:"^9.11.0",karma:"1.4.1","karma-browserify":"^5.1.0","karma-chai-shallow-deep-equal":"0.0.4","karma-chrome-launcher":"^2.0.0","karma-coverage":"^1.1.1","karma-env-preprocessor":"^0.1.1","karma-firefox-launcher":"^1.0.0","karma-mocha":"^1.1.1","karma-mocha-reporter":"^2.1.0","karma-sinon-chai":"1.2.4",lolex:"^1.5.1",markserv:"0.0.20",minifyify:"^7.3.3",mocha:"^3.0.2","mozilla-download":"^1.1.1","replace-in-file":"^2.5.3",semistandard:"^9.0.0",shelljs:"^0.7.7",shx:"^0.2.2",sinon:"^1.17.5","sinon-chai":"2.8.0",snazzy:"^5.0.0","too-wordy":"ngokevin/too-wordy",uglifyjs:"^2.4.10","write-good":"^0.9.1"},link:!0,browserify:{transform:["browserify-css","envify"]},semistandard:{ignore:["build/**","dist/**","examples/**/shaders/*.js","**/vendor/**"]},keywords:["3d","aframe","cardboard","components","oculus","three","three.js","rift","vive","vr","web-components","webvr"],"browserify-css":{minify:!0},engines:{node:">= 4.6.0",npm:"^2.15.9"}}},{}],77:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three"),i=t("../utils/"),n=i.bind,l=i.device.checkHasPositionalTracking;r.exports.Component=a("camera",{schema:{active:{default:!0},far:{default:1e4},fov:{default:80,min:0},near:{default:.005,min:0},userHeight:{default:0,min:0},zoom:{default:1,min:0}},init:function(){var r=this.el,a=r.sceneEl,i;this.savedPose=null,i=this.camera=new o.PerspectiveCamera,r.setObject3D("camera",i),this.onEnterVR=n(this.onEnterVR,this),this.onExitVR=n(this.onExitVR,this),a.addEventListener("enter-vr",this.onEnterVR),a.addEventListener("exit-vr",this.onExitVR)},update:function(r){var t=this.el,o=this.data,i=this.camera,n=this.system;this.addHeightOffset(r.userHeight),i.aspect=o.aspect||window.innerWidth/window.innerHeight,i.far=o.far,i.fov=o.fov,i.near=o.near,i.zoom=o.zoom,i.updateProjectionMatrix(),r&&r.active===o.active||(o.active&&n.activeCameraEl!==t?n.setActiveCamera(t):o.active||n.activeCameraEl!==t||n.disableActiveCamera())},remove:function(){var r=this.el.sceneEl;this.el.removeObject3D("camera"),r.removeEventListener("enter-vr",this.onEnterVR),r.removeEventListener("exit-vr",this.onExitVR)},onEnterVR:function(){this.saveCameraPose(),this.removeHeightOffset()},onExitVR:function(){this.restoreCameraPose()},addHeightOffset:function(r){var t=this.el,a=this.data.userHeight,o;r=r||0,o=t.getAttribute("position")||{x:0,y:0,z:0},t.setAttribute("position",{x:o.x,y:o.y-r+a,z:o.z})},removeHeightOffset:function(){var r=this.el,a=this.data.userHeight,o,t;t=void 0===this.hasPositionalTracking?l():this.hasPositionalTracking,a&&t&&(o=r.getAttribute("position")||{x:0,y:0,z:0},r.setAttribute("position",{x:o.x,y:o.y-a,z:o.z}))},saveCameraPose:function(){var r=this.el,t=void 0===this.hasPositionalTracking?l():this.hasPositionalTracking;!this.savedPose&&t&&(this.savedPose={position:r.getAttribute("position"),rotation:r.getAttribute("rotation")})},restoreCameraPose:function(){var r=this.el,t=this.savedPose,a=void 0===this.hasPositionalTracking?l():this.hasPositionalTracking;t&&a&&(r.setAttribute("position",t.position),r.setAttribute("rotation",t.rotation),this.savedPose=null)}})},{"../core/component":125,"../lib/three":173,"../utils/":195}],78:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three");r.exports.Component=a("collada-model",{schema:{type:"asset"},init:function(){this.model=null,this.loader=new o.ColladaLoader,this.loader.options.convertUpAxis=!0},update:function(){var r=this,a=this.el,o=this.data;o&&(this.remove(),this.loader.load(o,function(o){r.model=o.scene,a.setObject3D("mesh",r.model),a.emit("model-loaded",{format:"collada",model:r.model})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":125,"../lib/three":173}],79:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/"),i=o.bind,l={CLICK:"click",FUSING:"fusing",MOUSEENTER:"mouseenter",MOUSEDOWN:"mousedown",MOUSELEAVE:"mouseleave",MOUSEUP:"mouseup"},d={FUSING:"cursor-fusing",HOVERING:"cursor-hovering",HOVERED:"cursor-hovered"},c={DOWN:["mousedown","touchstart"],UP:["mouseup","touchend"]};r.exports.Component=a("cursor",{dependencies:["raycaster"],schema:{downEvents:{default:[]},fuse:{default:o.device.isMobile()},fuseTimeout:{default:1500,min:0},upEvents:{default:[]},rayOrigin:{default:"entity",oneOf:["mouse","entity"]}},init:function(){var t=this;this.fuseTimeout=void 0,this.cursorDownEl=null,this.intersection=null,this.intersectedEl=null,this.canvasBounds=document.body.getBoundingClientRect(),this.updateCanvasBounds=o.debounce(function(){t.canvasBounds=t.el.sceneEl.canvas.getBoundingClientRect()},200),this.onCursorDown=i(this.onCursorDown,this),this.onCursorUp=i(this.onCursorUp,this),this.onIntersection=i(this.onIntersection,this),this.onIntersectionCleared=i(this.onIntersectionCleared,this),this.onMouseMove=i(this.onMouseMove,this)},update:function(t){this.data.rayOrigin!==t.rayOrigin&&this.updateMouseEventListeners()},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){var t=this.el;t.removeState(d.HOVERING),t.removeState(d.FUSING),clearTimeout(this.fuseTimeout),this.intersectedEl&&this.intersectedEl.removeState(d.HOVERED),this.removeEventListeners()},addEventListeners:function(){function r(){n=o.sceneEl.canvas,c.DOWN.forEach(function(t){n.addEventListener(t,i.onCursorDown)}),c.UP.forEach(function(t){n.addEventListener(t,i.onCursorUp)})}var a=this.data,o=this.el,i=this,n;n=o.sceneEl.canvas,n?r():o.sceneEl.addEventListener("render-target-loaded",r),a.downEvents.forEach(function(t){o.addEventListener(t,i.onCursorDown)}),a.upEvents.forEach(function(t){o.addEventListener(t,i.onCursorUp)}),o.addEventListener("raycaster-intersection",this.onIntersection),o.addEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.addEventListener("resize",this.updateCanvasBounds)},removeEventListeners:function(){var r=this.data,t=this.el,a=this,o;o=t.sceneEl.canvas,o&&(c.DOWN.forEach(function(r){o.removeEventListener(r,a.onCursorDown)}),c.UP.forEach(function(r){o.removeEventListener(r,a.onCursorUp)})),r.downEvents.forEach(function(r){t.removeEventListener(r,a.onCursorDown)}),r.upEvents.forEach(function(r){t.removeEventListener(r,a.onCursorUp)}),t.removeEventListener("raycaster-intersection",this.onIntersection),t.removeEventListener("raycaster-intersection-cleared",this.onIntersectionCleared),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("resize",this.updateCanvasBounds)},updateMouseEventListeners:function(){var t=this.el;window.removeEventListener("mousemove",this.onMouseMove),t.setAttribute("raycaster","useWorldCoordinates",!1),"mouse"===this.data.rayOrigin&&(window.addEventListener("mousemove",this.onMouseMove,!1),t.setAttribute("raycaster","useWorldCoordinates",!0),this.updateCanvasBounds())},onMouseMove:function(){var l=new THREE.Vector2,d=new THREE.Vector3,c=new THREE.Vector3,p={origin:d,direction:c};return function(t){var i=this.el.sceneEl.camera;i.parent.updateMatrixWorld(),i.updateMatrixWorld();var o=this.canvasBounds,r=t.clientX-o.left,n=t.clientY-o.top;l.x=2*(r/o.width)-1,l.y=2*(-n/o.height)+1,d.setFromMatrixPosition(i.matrixWorld),c.set(l.x,l.y,.5).unproject(i).sub(d).normalize(),this.el.setAttribute("raycaster",p)}}(),onCursorDown:function(){this.twoWayEmit(l.MOUSEDOWN),this.cursorDownEl=this.intersectedEl},onCursorUp:function(){this.twoWayEmit(l.MOUSEUP),this.cursorDownEl&&this.cursorDownEl!==this.intersectedEl&&this.cursorDownEl.emit(l.MOUSEUP,{cursorEl:this.el,intersection:null}),!this.data.fuse&&this.intersectedEl&&this.cursorDownEl===this.intersectedEl&&this.twoWayEmit(l.CLICK),this.cursorDownEl=null},onIntersection:function(a){var c=this,s=this.el,o=this.data,r,t,n;if(r=a.detail.els[0]===s?1:0,n=a.detail.intersections[r],t=a.detail.els[r]){if(this.intersectedEl===t)return void(this.intersection=n);this.intersectedEl&&this.clearCurrentIntersection(),this.intersection=n,this.intersectedEl=t,s.addState(d.HOVERING),t.addState(d.HOVERED),c.twoWayEmit(l.MOUSEENTER),0!==o.fuseTimeout&&o.fuse&&(s.addState(d.FUSING),this.twoWayEmit(l.FUSING),this.fuseTimeout=setTimeout(function(){s.removeState(d.FUSING),c.twoWayEmit(l.CLICK)},o.fuseTimeout))}},onIntersectionCleared:function(r){var a=this.el,t=r.detail.el;a!==t&&t===this.intersectedEl&&this.clearCurrentIntersection()},clearCurrentIntersection:function(){var t=this.el;this.intersectedEl.removeState(d.HOVERED),t.removeState(d.HOVERING),t.removeState(d.FUSING),this.twoWayEmit(l.MOUSELEAVE),this.intersection=null,this.intersectedEl=null,clearTimeout(this.fuseTimeout)},twoWayEmit:function(r){var a=this.el,o=this.intersectedEl,s=this.intersection;a.emit(r,{intersectedEl:o,intersection:s}),o&&o.emit(r,{cursorEl:a,intersection:s})}})},{"../core/component":125,"../utils/":195}],80:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/bind"),i=t("../utils/tracked-controls").checkControllerPresentAndSetup,n=t("../utils/tracked-controls").emitIfAxesChanged,s="https://cdn.aframe.io/controllers/google/",l="Daydream Controller";r.exports.Component=a("daydream-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","menu","system"]},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this),this.onGamepadConnectionEvent=o(this.onGamepadConnectionEvent,this)},init:function(){var r=this;this.animationActive="pointing",this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){r.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){r.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){r.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){r.onButtonEvent(t.detail.id,"touchend")},this.onAxisMoved=o(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=i,this.emitIfAxesChanged=n},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,l,{hand:this.data.hand})},onGamepadConnectionEvent:function(){this.everGotGamepadEvent=!0,this.checkIfControllerPresent()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener(),window.addEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.addEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener(),window.removeEventListener("gamepadconnected",this.onGamepadConnectionEvent,!1),window.removeEventListener("gamepaddisconnected",this.onGamepadConnectionEvent,!1)},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{armModel:t.armModel,hand:t.hand,idPrefix:l,rotationOffset:t.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:s+"vr_controller_daydream.obj",mtl:s+"vr_controller_daydream.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.everGotGamepadEvent||this.checkIfControllerPresent()},onModelLoaded:function(r){var t=r.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.menu=t.getObjectByName("AppButton_AppButton_Cylinder.004"),a.system=t.getObjectByName("HomeButton_HomeButton_Cylinder.005"),a.trackpad=t.getObjectByName("TouchPad_TouchPad_Cylinder.003"),t.position.set(0,0,-.04))},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&this.el.emit(t+"changed",r.detail.state)},onButtonEvent:function(r,t){var a=this.mapping.buttons[r],o;if(Array.isArray(a))for(o=0;o<a.length;o++)this.el.emit(a[o]+t);else this.el.emit(a+t);this.updateModel(a,t)},updateModel:function(r,t){var a;if(this.data.model)if(Array.isArray(r))for(a=0;a<r.length;a++)this.updateButtonModel(r[a],t);else this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a=this.buttonMeshes;if(a&&a[r]){var i="down"===t?this.data.buttonHighlightColor:"touchstart"===t?this.data.buttonTouchedColor:this.data.buttonColor;a[r].material.color.set(i)}}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],81:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/bind"),i=t("../utils/tracked-controls").checkControllerPresentAndSetup,n=t("../utils/tracked-controls").emitIfAxesChanged,s="https://cdn.aframe.io/controllers/samsung/",l="Gear VR";r.exports.Component=a("gearvr-controls",{schema:{hand:{default:""},buttonColor:{type:"color",default:"#000000"},buttonTouchedColor:{type:"color",default:"#777777"},buttonHighlightColor:{type:"color",default:"#FFFFFF"},model:{default:!0},rotationOffset:{default:0},armModel:{default:!0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger"]},bindMethods:function(){this.onModelLoaded=o(this.onModelLoaded,this),this.onControllersUpdate=o(this.onControllersUpdate,this),this.checkIfControllerPresent=o(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=o(this.removeControllersUpdateListener,this),this.onAxisMoved=o(this.onAxisMoved,this)},init:function(){var r=this;this.animationActive="pointing",this.onButtonChanged=o(this.onButtonChanged,this),this.onButtonDown=function(t){r.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){r.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){r.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){r.onButtonEvent(t.detail.id,"touchend")},this.onAxisMoved=o(this.onAxisMoved,this),this.controllerPresent=!1,this.everGotGamepadEvent=!1,this.lastControllerCheck=0,this.bindMethods(),this.checkControllerPresentAndSetup=i,this.emitIfAxesChanged=n},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0,this.addControllersUpdateListener()},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1,this.removeControllersUpdateListener()},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,l,this.data.hand?{hand:this.data.hand}:{})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{armModel:t.armModel,idPrefix:l,rotationOffset:t.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:s+"gear_vr_controller.obj",mtl:s+"gear_vr_controller.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelLoaded:function(r){var t=r.detail.model,a;this.data.model&&(a=this.buttonMeshes={},a.trigger=t.getObjectByName("Trigger"),a.trackpad=t.getObjectByName("Touchpad"))},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&this.el.emit(t+"changed",r.detail.state)},onButtonEvent:function(r,t){var a=this.mapping.buttons[r],i;if(Array.isArray(a))for(i=0;i<a.length;i++)this.el.emit(a[i]+t);else this.el.emit(a+t);this.updateModel(a,t)},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},updateModel:function(r,t){var a;if(this.data.model)if(Array.isArray(r))for(a=0;a<r.length;a++)this.updateButtonModel(r[a],t);else this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a=this.buttonMeshes;if(a&&a[r]){var o="down"===t?this.data.buttonHighlightColor:"touchstart"===t?this.data.buttonTouchedColor:this.data.buttonColor;a[r].material.color.set(o)}}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],82:[function(t,r){var a=t("../utils/debug"),i=t("../core/geometry").geometries,o=t("../core/geometry").geometryNames,n=t("../core/component").registerComponent,s=t("../lib/three"),l=new s.Geometry,d=a("components:geometry:warn");r.exports.Component=n("geometry",{schema:{buffer:{default:!0},mergeTo:{type:"selector"},primitive:{default:"box",oneOf:o},skipCache:{default:!1}},init:function(){this.geometry=null},update:function(a){var i=this.data,t=this.el.getOrCreateObject3D("mesh",s.Mesh),r=this.system;this.geometry&&(r.unuseGeometry(a),this.geometry=null),this.geometry=t.geometry=r.getOrCreateGeometry(i),i.mergeTo&&this.mergeTo(i.mergeTo)},mergeTo:function(a){var i=this.el,r=i.getObject3D("mesh"),o;return a&&a.isEntity?a===i?void d("Source and target geometries cannot be the same for merge"):(o=a.getObject3D("mesh"))?!1==o.geometry instanceof s.Geometry||!1==r.geometry instanceof s.Geometry?void d("Geometry merge is only available for `THREE.Geometry` types. Check that both of the merging geometry and the target geometry have `buffer` set to false"):!1===this.data.skipCache?void d("Cached geometries are not allowed to merge. Set `skipCache` to true"):(r.parent.updateMatrixWorld(),o.geometry.merge(r.geometry,r.matrixWorld),i.emit("geometry-merged",{mergeTarget:a}),void i.parentNode.removeChild(i)):(o=a.getOrCreateObject3D("mesh",s.Mesh),void a.setAttribute("material",i.getAttribute("material"))):void d("There is not a valid entity to merge the geometry to")},remove:function(){this.system.unuseGeometry(this.data),this.el.getObject3D("mesh").geometry=l,this.geometry=null},updateSchema:function(a){var n=a.primitive,t=this.data&&this.data.primitive,r=i[n]&&i[n].schema;if(!r)throw new Error("Unknown geometry schema `"+n+"`");t&&t===n||this.extendSchema(r)}})},{"../core/component":125,"../core/geometry":126,"../lib/three":173,"../utils/debug":191}],83:[function(t,r){var a=t("../core/component").registerComponent,o=t("../lib/three"),i=t("../utils/"),n=i.debug("components:gltf-model:warn");r.exports.Component=a("gltf-model",{schema:{type:"model"},init:function(){this.model=null,this.loader=new o.GLTFLoader},update:function(){var r=this,a=this.el,o=this.data;o&&(this.remove(),this.loader.load(o,function(o){r.model=o.scene||o.scenes[0],r.model.animations=o.animations,a.setObject3D("mesh",r.model),a.emit("model-loaded",{format:"gltf",model:r.model})},void 0,function(r){var s=r&&r.message?r.message:"Failed to load glTF model";n(s),a.emit("model-error",{format:"gltf",src:o})}))},remove:function(){this.model&&this.el.removeObject3D("mesh")}})},{"../core/component":125,"../lib/three":173,"../utils/":195}],84:[function(t,r){function a(r,t){var a;if(r)return a=s[r],"grip"===a?a+(t?"close":"open"):"point"===a||"thumb"===a?a+(t?"up":"down"):"pointing"===a||"pistol"===a?a+(t?"start":"end"):void 0}function l(r){var t=r&&r.controller&&r.controller.id;return t&&0===t.indexOf("OpenVR ")}var o=t("../core/component").registerComponent,i={left:"https://cdn.aframe.io/controllers/oculus-hands/v2/leftHand.json",right:"https://cdn.aframe.io/controllers/oculus-hands/v2/rightHand.json"},d={open:"Open",point:"Point",pointThumb:"Point + Thumb",fist:"Fist",hold:"Hold",thumbUp:"Thumb Up"},s={};s[d.fist]="grip",s[d.thumbUp]="pistol",s[d.point]="pointing",s[d.thumb]="thumb",r.exports.Component=o("hand-controls",{schema:{default:"left"},init:function(){var r=this,t=this.el;this.gesture=d.open,this.pressedButtons={},this.touchedButtons={},this.loader=new THREE.ObjectLoader,this.loader.setCrossOrigin("anonymous"),this.onGripDown=function(){r.handleButton("grip","down")},this.onGripUp=function(){r.handleButton("grip","up")},this.onTrackpadDown=function(){r.handleButton("trackpad","down")},this.onTrackpadUp=function(){r.handleButton("trackpad","up")},this.onTrackpadTouchStart=function(){r.handleButton("trackpad","touchstart")},this.onTrackpadTouchEnd=function(){r.handleButton("trackpad","touchend")},this.onTriggerDown=function(){r.handleButton("trigger","down")},this.onTriggerUp=function(){r.handleButton("trigger","up")},this.onTriggerTouchStart=function(){r.handleButton("trigger","touchstart")},this.onTriggerTouchEnd=function(){r.handleButton("trigger","touchend")},this.onGripTouchStart=function(){r.handleButton("grip","touchstart")},this.onGripTouchEnd=function(){r.handleButton("grip","touchend")},this.onThumbstickDown=function(){r.handleButton("thumbstick","down")},this.onThumbstickUp=function(){r.handleButton("thumbstick","up")},this.onAorXTouchStart=function(){r.handleButton("AorX","touchstart")},this.onAorXTouchEnd=function(){r.handleButton("AorX","touchend")},this.onBorYTouchStart=function(){r.handleButton("BorY","touchstart")},this.onBorYTouchEnd=function(){r.handleButton("BorY","touchend")},this.onSurfaceTouchStart=function(){r.handleButton("surface","touchstart")},this.onSurfaceTouchEnd=function(){r.handleButton("surface","touchend")},this.onControllerConnected=function(){r.setModelVisibility(!0)},this.onControllerDisconnected=function(){r.setModelVisibility(!1)},t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},tick:function(r,t){var a=this.el.getObject3D("mesh");a&&a.mixer&&a.mixer.update(t/1e3)},addEventListeners:function(){var r=this.el;r.addEventListener("gripdown",this.onGripDown),r.addEventListener("gripup",this.onGripUp),r.addEventListener("trackpaddown",this.onTrackpadDown),r.addEventListener("trackpadup",this.onTrackpadUp),r.addEventListener("trackpadtouchstart",this.onTrackpadTouchStart),r.addEventListener("trackpadtouchend",this.onTrackpadTouchEnd),r.addEventListener("triggerdown",this.onTriggerDown),r.addEventListener("triggerup",this.onTriggerUp),r.addEventListener("triggertouchstart",this.onTriggerTouchStart),r.addEventListener("triggertouchend",this.onTriggerTouchEnd),r.addEventListener("griptouchstart",this.onGripTouchStart),r.addEventListener("griptouchend",this.onGripTouchEnd),r.addEventListener("thumbstickdown",this.onThumbstickDown),r.addEventListener("thumbstickup",this.onThumbstickUp),r.addEventListener("abuttontouchstart",this.onAorXTouchStart),r.addEventListener("abuttontouchend",this.onAorXTouchEnd),r.addEventListener("bbuttontouchstart",this.onBorYTouchStart),r.addEventListener("bbuttontouchend",this.onBorYTouchEnd),r.addEventListener("xbuttontouchstart",this.onAorXTouchStart),r.addEventListener("xbuttontouchend",this.onAorXTouchEnd),r.addEventListener("ybuttontouchstart",this.onBorYTouchStart),r.addEventListener("ybuttontouchend",this.onBorYTouchEnd),r.addEventListener("surfacetouchstart",this.onSurfaceTouchStart),r.addEventListener("surfacetouchend",this.onSurfaceTouchEnd)},removeEventListeners:function(){var r=this.el;r.removeEventListener("gripdown",this.onGripDown),r.removeEventListener("gripup",this.onGripUp),r.removeEventListener("trackpaddown",this.onTrackpadDown),r.removeEventListener("trackpadup",this.onTrackpadUp),r.removeEventListener("trackpadtouchstart",this.onTrackpadTouchStart),r.removeEventListener("trackpadtouchend",this.onTrackpadTouchEnd),r.removeEventListener("triggerdown",this.onTriggerDown),r.removeEventListener("triggerup",this.onTriggerUp),r.removeEventListener("triggertouchstart",this.onTriggerTouchStart),r.removeEventListener("triggertouchend",this.onTriggerTouchEnd),r.removeEventListener("griptouchstart",this.onGripTouchStart),r.removeEventListener("griptouchend",this.onGripTouchEnd),r.removeEventListener("thumbstickdown",this.onThumbstickDown),r.removeEventListener("thumbstickup",this.onThumbstickUp),r.removeEventListener("abuttontouchstart",this.onAorXTouchStart),r.removeEventListener("abuttontouchend",this.onAorXTouchEnd),r.removeEventListener("bbuttontouchstart",this.onBorYTouchStart),r.removeEventListener("bbuttontouchend",this.onBorYTouchEnd),r.removeEventListener("xbuttontouchstart",this.onAorXTouchStart),r.removeEventListener("xbuttontouchend",this.onAorXTouchEnd),r.removeEventListener("ybuttontouchstart",this.onBorYTouchStart),r.removeEventListener("ybuttontouchend",this.onBorYTouchEnd),r.removeEventListener("surfacetouchstart",this.onSurfaceTouchStart),r.removeEventListener("surfacetouchend",this.onSurfaceTouchEnd)},update:function(r){var a=this.el,t=this.data,n;n={hand:t,model:!1,rotationOffset:"left"===t?90:-90},t!==r&&this.loader.load(i[t],function(r){var t=r.getObjectByName("Hand");t.material.skinning=!0,t.mixer=new THREE.AnimationMixer(t),a.setObject3D("mesh",t),t.position.set(0,0,0),t.rotation.set(0,0,0),t.visible=!1,a.setAttribute("vive-controls",n),a.setAttribute("oculus-touch-controls",n),a.setAttribute("windows-motion-controls",n)})},remove:function(){this.el.removeObject3D("mesh")},handleButton:function(r,t){var a="down"===t,o="touchstart"===t,i;if(0===t.indexOf("touch")){if(o===this.touchedButtons[r])return;this.touchedButtons[r]=o}else{if(a===this.pressedButtons[r])return;this.pressedButtons[r]=a}i=this.gesture,this.gesture=this.determineGesture(),this.gesture!==i&&(this.animateGesture(this.gesture,i),this.emitGestureEvents(this.gesture,i))},determineGesture:function(){var a=this.pressedButtons.grip,c=this.pressedButtons.surface||this.touchedButtons.surface,n=this.pressedButtons.trackpad||this.touchedButtons.trackpad,o=this.pressedButtons.trigger||this.touchedButtons.trigger,i=this.touchedButtons.AorX||this.touchedButtons.BorY,r=l(this.el.components["tracked-controls"]),s;return a?s=r?d.fist:c||i||n?o?d.fist:d.point:o?d.thumbUp:d.pointThumb:o?s=r?d.fist:d.hold:r&&n&&(s=d.point),s},animateGesture:function(r,t){return r?void this.playAnimation(r||d.open,t,!1):void this.playAnimation(t,t,!0)},emitGestureEvents:function(r,t){var i=this.el,o;t!==r&&(o=a(t,!1),o&&i.emit(o),(o=a(r,!0))&&i.emit(o))},playAnimation:function(a,t,s){var n=this.el.getObject3D("mesh"),r,o;if(n){if(o=n.mixer.clipAction(a),o.clampWhenFinished=!0,o.loop=THREE.PingPong,o.repetitions=0,o.timeScale=s?-1:1,o.weight=1,!t||a===t)return n.mixer.stopAllAction(),void o.play();r=n.mixer.clipAction(t),n.mixer.stopAllAction(),r.weight=.15,r.play(),o.play(),r.crossFadeTo(o,.15,!0)}},setModelVisibility:function(r){var t=this.el.getObject3D("mesh");t&&(t.visible=r)}})},{"../core/component":125}],85:[function(t){t("./camera"),t("./collada-model"),t("./cursor"),t("./daydream-controls"),t("./gearvr-controls"),t("./geometry"),t("./gltf-model"),t("./hand-controls"),t("./laser-controls"),t("./light"),t("./line"),t("./link"),t("./look-controls"),t("./material"),t("./obj-model"),t("./oculus-touch-controls"),t("./position"),t("./raycaster"),t("./rotation"),t("./scale"),t("./shadow"),t("./sound"),t("./text"),t("./tracked-controls"),t("./visible"),t("./vive-controls"),t("./wasd-controls"),t("./windows-motion-controls"),t("./scene/debug"),t("./scene/embedded"),t("./scene/inspector"),t("./scene/fog"),t("./scene/keyboard-shortcuts"),t("./scene/pool"),t("./scene/screenshot"),t("./scene/stats"),t("./scene/vr-mode-ui")},{"./camera":77,"./collada-model":78,"./cursor":79,"./daydream-controls":80,"./gearvr-controls":81,"./geometry":82,"./gltf-model":83,"./hand-controls":84,"./laser-controls":86,"./light":87,"./line":88,"./link":89,"./look-controls":90,"./material":91,"./obj-model":92,"./oculus-touch-controls":93,"./position":94,"./raycaster":95,"./rotation":96,"./scale":97,"./scene/debug":98,"./scene/embedded":99,"./scene/fog":100,"./scene/inspector":101,"./scene/keyboard-shortcuts":102,"./scene/pool":103,"./scene/screenshot":104,"./scene/stats":105,"./scene/vr-mode-ui":106,"./shadow":107,"./sound":108,"./text":109,"./tracked-controls":110,"./visible":111,"./vive-controls":112,"./wasd-controls":113,"./windows-motion-controls":114}],86:[function(t){var r=t("../core/component").registerComponent,a=t("../utils/");r("laser-controls",{schema:{hand:{default:"right"}},init:function(){function s(i){var s=l[i.detail.name];if(s){var r=a.extend({showLine:!0},s.raycaster||{});i.detail.rayOrigin&&(r.origin=i.detail.rayOrigin.origin,r.direction=i.detail.rayOrigin.direction,r.showLine=!0),i.detail.rayOrigin||!o.modelReady?d.setAttribute("raycaster",r):d.setAttribute("raycaster","showLine",!0),d.setAttribute("cursor",a.extend({fuse:!1},s.cursor))}}var l=this.config,t=this.data,d=this.el,o=this;d.setAttribute("daydream-controls",{hand:t.hand}),d.setAttribute("gearvr-controls",{hand:t.hand}),d.setAttribute("oculus-touch-controls",{hand:t.hand}),d.setAttribute("vive-controls",{hand:t.hand}),d.setAttribute("windows-motion-controls",{hand:t.hand}),d.addEventListener("controllerconnected",s),d.addEventListener("controllerdisconnected",function(){d.setAttribute("raycaster","showLine",!1)}),d.addEventListener("controllermodelready",function(t){s(t),o.modelReady=!0})},config:{"daydream-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]}},"gearvr-controls":{cursor:{downEvents:["trackpaddown"],upEvents:["trackpadup"]},raycaster:{origin:{x:0,y:5e-4,z:0}}},"oculus-touch-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{origin:{x:.001,y:0,z:.065},direction:{x:0,y:-.8,z:-1}}},"vive-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]}},"windows-motion-controls":{cursor:{downEvents:["triggerdown"],upEvents:["triggerup"]},raycaster:{showLine:!1}}}})},{"../core/component":125,"../utils/":195}],87:[function(t,r){var l=t("../utils/bind"),n=t("../utils").diff,a=t("../utils/debug"),o=t("../core/component").registerComponent,c=t("../lib/three"),p=c.Math.degToRad,u=a("components:light:warn");r.exports.Component=o("light",{schema:{angle:{default:60,if:{type:["spot"]}},color:{type:"color"},groundColor:{type:"color",if:{type:["hemisphere"]}},decay:{default:1,if:{type:["point","spot"]}},distance:{default:0,min:0,if:{type:["point","spot"]}},intensity:{default:1,min:0,if:{type:["ambient","directional","hemisphere","point","spot"]}},penumbra:{default:0,min:0,max:1,if:{type:["spot"]}},type:{default:"directional",oneOf:["ambient","directional","hemisphere","point","spot"]},target:{type:"selector",if:{type:["spot","directional"]}},castShadow:{default:!1,if:{type:["point","spot","directional"]}},shadowBias:{default:0,if:{castShadow:!0}},shadowCameraFar:{default:500,if:{castShadow:!0}},shadowCameraFov:{default:90,if:{castShadow:!0}},shadowCameraNear:{default:.5,if:{castShadow:!0}},shadowCameraTop:{default:5,if:{castShadow:!0}},shadowCameraRight:{default:5,if:{castShadow:!0}},shadowCameraBottom:{default:-5,if:{castShadow:!0}},shadowCameraLeft:{default:-5,if:{castShadow:!0}},shadowCameraVisible:{default:!1,if:{castShadow:!0}},shadowMapHeight:{default:512,if:{castShadow:!0}},shadowMapWidth:{default:512,if:{castShadow:!0}}},init:function(){var t=this.el;this.light=null,this.defaultTarget=null,this.system.registerLight(t)},update:function(s){var d=this.data,a=n(d,s),c=this.light,o=this;if(c&&!("type"in a)){var i=!1;return void Object.keys(a).forEach(function(r){var a=d[r];"color"===r?c.color.set(a):"groundColor"===r?c.groundColor.set(a):"angle"===r?c.angle=p(a):"target"===r?null===a?"spot"!==d.type&&"directional"!==d.type||(c.target=o.defaultTarget):a.hasLoaded?o.onSetTarget(a,c):a.addEventListener("loaded",l(o.onSetTarget,o,a,c)):"castShadow"===r||"shadowBias"===r||"shadowCameraFar"===r||"shadowCameraFov"===r||"shadowCameraNear"===r||"shadowCameraTop"===r||"shadowCameraRight"===r||"shadowCameraBottom"===r||"shadowCameraLeft"===r||"shadowCameraVisible"===r||"shadowMapHeight"===r||"shadowMapWidth"===r?i||(o.updateShadow(),i=!0):c[r]=a})}this.setLight(this.data),this.updateShadow()},setLight:function(r){var o=this.el,a=this.getLight(r);a&&(this.light&&o.removeObject3D("light"),this.light=a,this.light.el=o,o.setObject3D("light",this.light),"spot"!==r.type&&"directional"!==r.type&&"hemisphere"!==r.type||o.getObject3D("light").translateY(-1),"spot"===r.type&&(o.setObject3D("light-target",this.defaultTarget),o.getObject3D("light-target").position.set(0,0,-1)))},updateShadow:function(){var r=this.el,i=this.data,a=this.light;a.castShadow=i.castShadow;var t=r.getObject3D("cameraHelper");return(i.shadowCameraVisible&&!t?r.setObject3D("cameraHelper",new c.CameraHelper(a.shadow.camera)):!i.shadowCameraVisible&&t&&r.removeObject3D("cameraHelper"),!i.castShadow)?a:void(a.shadow.bias=i.shadowBias,a.shadow.mapSize.height=i.shadowMapHeight,a.shadow.mapSize.width=i.shadowMapWidth,a.shadow.camera.near=i.shadowCameraNear,a.shadow.camera.far=i.shadowCameraFar,a.shadow.camera instanceof c.OrthographicCamera?(a.shadow.camera.top=i.shadowCameraTop,a.shadow.camera.right=i.shadowCameraRight,a.shadow.camera.bottom=i.shadowCameraBottom,a.shadow.camera.left=i.shadowCameraLeft):a.shadow.camera.fov=i.shadowCameraFov,a.shadow.camera.updateProjectionMatrix(),t&&t.update())},getLight:function(m){var g=m.angle,a=new c.Color(m.color).getHex(),t=m.decay,o=m.distance,i=new c.Color(m.groundColor).getHex(),r=m.intensity,s=m.type,d=m.target,h=null;switch(s.toLowerCase()){case"ambient":return new c.AmbientLight(a,r);case"directional":return h=new c.DirectionalLight(a,r),this.defaultTarget=h.target,d&&(d.hasLoaded?this.onSetTarget(d,h):d.addEventListener("loaded",l(this.onSetTarget,this,d,h))),h;case"hemisphere":return new c.HemisphereLight(a,i,r);case"point":return new c.PointLight(a,r,o,t);case"spot":return h=new c.SpotLight(a,r,o,p(g),m.penumbra,t),this.defaultTarget=h.target,d&&(d.hasLoaded?this.onSetTarget(d,h):d.addEventListener("loaded",l(this.onSetTarget,this,d,h))),h;default:u("%s is not a valid light type. Choose from ambient, directional, hemisphere, point, spot.",s);}},onSetTarget:function(t,r){r.target=t.object3D},remove:function(){var t=this.el;t.removeObject3D("light"),t.getObject3D("cameraHelper")&&t.removeObject3D("cameraHelper")}})},{"../core/component":125,"../lib/three":173,"../utils":195,"../utils/bind":189,"../utils/debug":191}],88:[function(t,r){function n(r,t){return r&&t&&r.x===t.x&&r.y===t.y&&r.z===t.z}var a=t("../core/component").registerComponent;r.exports.Component=a("line",{schema:{start:{type:"vec3",default:{x:0,y:0,z:0}},end:{type:"vec3",default:{x:0,y:0,z:0}},color:{type:"color",default:"#74BEC1"},opacity:{type:"number",default:1},visible:{default:!0}},multiple:!0,init:function(){var r=this.data,a,t;t=this.material=new THREE.LineBasicMaterial({color:r.color,opacity:r.opacity,transparent:1>r.opacity,visible:r.visible}),a=this.geometry=new THREE.BufferGeometry,a.addAttribute("position",new THREE.BufferAttribute(new Float32Array(6),3)),this.line=new THREE.Line(a,t),this.el.setObject3D(this.attrName,this.line)},update:function(s){var t=this.data,l=this.geometry,i=!1,r=this.material,a=l.attributes.position.array;n(t.start,s.start)||(a[0]=t.start.x,a[1]=t.start.y,a[2]=t.start.z,i=!0),n(t.end,s.end)||(a[3]=t.end.x,a[4]=t.end.y,a[5]=t.end.z,i=!0),i&&(l.attributes.position.needsUpdate=!0,l.computeBoundingSphere()),r.color.setStyle(t.color),r.opacity=t.opacity,r.transparent=1>t.opacity,r.visible=t.visible},remove:function(){this.el.removeObject3D("line",this.line)}})},{"../core/component":125}],89:[function(t,r){var a=t("../core/component").registerComponent,o=t("../core/shader").registerShader,n=t("../lib/three");r.exports.Component=a("link",{schema:{color:{default:"white",type:"color"},highlighted:{default:!1},highlightedColor:{default:"#24CAFF",type:"color"},href:{default:""},image:{type:"asset"},on:{default:"click"},peekMode:{default:!1},title:{default:""},visualAspectEnabled:{default:!0}},init:function(){this.navigate=this.navigate.bind(this),this.previousQuaternion=void 0,this.hiddenEls=[],this.initVisualAspect()},update:function(a){var o=this.data,t=this.el,i=o.highlighted?o.highlightedColor:o.color;t.setAttribute("material","strokeColor",i),o.on!==a.on&&this.updateEventListener(),o.visualAspectEnabled&&void 0!==a.peekMode&&o.peekMode!==a.peekMode&&this.updatePeekMode(),o.image&&a.image!==o.image&&t.setAttribute("material","pano","string"==typeof o.image?o.image:o.image.src)},updatePeekMode:function(){var r=this.el,a=this.sphereEl;this.data.peekMode?(this.hideAll(),r.getObject3D("mesh").visible=!1,a.setAttribute("visible",!0)):(this.showAll(),r.getObject3D("mesh").visible=!0,a.setAttribute("visible",!1))},play:function(){this.updateEventListener()},pause:function(){this.removeEventListener()},updateEventListener:function(){var t=this.el;t.isPlaying&&(this.removeEventListener(),t.addEventListener(this.data.on,this.navigate))},removeEventListener:function(){var t=this.data.on;t&&this.el.removeEventListener(t,this.navigate)},initVisualAspect:function(){var a=this.el,r,o,t;this.data.visualAspectEnabled&&(r=this.textEl=this.textEl||document.createElement("a-entity"),o=this.sphereEl=this.sphereEl||document.createElement("a-entity"),t=this.semiSphereEl=this.semiSphereEl||document.createElement("a-entity"),a.setAttribute("geometry",{primitive:"circle",radius:1,segments:64}),a.setAttribute("material",{shader:"portal",pano:this.data.image,side:"double"}),r.setAttribute("text",{color:"white",align:"center",font:"kelsonsans",value:this.data.title||this.data.href,width:4}),r.setAttribute("position","0 1.5 0"),a.appendChild(r),t.setAttribute("geometry",{primitive:"sphere",radius:1,phiStart:0,segmentsWidth:64,segmentsHeight:64,phiLength:180,thetaStart:0,thetaLength:360}),t.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),t.setAttribute("rotation","0 180 0"),t.setAttribute("position","0 0 0"),t.setAttribute("visible",!1),a.appendChild(t),o.setAttribute("geometry",{primitive:"sphere",radius:10,segmentsWidth:64,segmentsHeight:64}),o.setAttribute("material",{shader:"portal",borderEnabled:0,pano:this.data.image,side:"back"}),o.setAttribute("visible",!1),a.appendChild(o))},navigate:function(){window.location=this.data.href},tick:function(){var d=new n.Vector3,c=new n.Vector3,t=new n.Vector3,i=new n.Quaternion;return function(){if(this.data.visualAspectEnabled){var r=this.el,s=r.object3D,n=r.sceneEl.camera,l=this.textEl,p,o;if(s.updateMatrixWorld(),n.parent.updateMatrixWorld(),n.updateMatrixWorld(),s.matrix.decompose(d,i,t),d.setFromMatrixPosition(s.matrixWorld),c.setFromMatrixPosition(n.matrixWorld),o=d.distanceTo(c),this.previousQuaternion=this.previousQuaternion||i.clone(),20<o)s.lookAt(c);else{if(p=this.calculateCameraPortalOrientation(),.5>o){if(!0===this.semiSphereEl.getAttribute("visible"))return;l.setAttribute("text","width",1.5),0>=p?(l.setAttribute("position","0 0 0.75"),l.setAttribute("rotation","0 180 0"),this.semiSphereEl.setAttribute("rotation","0 0 0")):(l.setAttribute("position","0 0 -0.75"),l.setAttribute("rotation","0 0 0"),this.semiSphereEl.setAttribute("rotation","0 180 0")),r.getObject3D("mesh").visible=!1,this.semiSphereEl.setAttribute("visible",!0),this.peekCameraPortalOrientation=p}else 0>=p?l.setAttribute("rotation","0 180 0"):l.setAttribute("rotation","0 0 0"),l.setAttribute("text","width",5),l.setAttribute("position","0 1.5 0"),r.getObject3D("mesh").visible=!0,this.semiSphereEl.setAttribute("visible",!1),this.peekCameraPortalOrientation=void 0;this.previousQuaternion&&(s.quaternion.copy(this.previousQuaternion),this.previousQuaternion=void 0)}}}}(),hideAll:function(){var a=this.el,o=this.hiddenEls,t=this;0<o.length||a.sceneEl.object3D.traverse(function(i){i&&i.el&&i.el.hasAttribute("link-controls")||i.el&&i!==a.sceneEl.object3D&&i.el!==a&&i.el!==t.sphereEl&&i.el!==a.sceneEl.cameraEl&&!1!==i.el.getAttribute("visible")&&i.el!==t.textEl&&i.el!==t.semiSphereEl&&(i.el.setAttribute("visible",!1),o.push(i.el))})},showAll:function(){this.hiddenEls.forEach(function(t){t.setAttribute("visible",!0)}),this.hiddenEls=[]},calculateCameraPortalOrientation:function(){var s=new n.Matrix4,l=new n.Vector3,t=new n.Vector3(0,0,1),i=new n.Vector3(0,0,0);return function(){var r=this.el,o=r.sceneEl.camera;return l.set(0,0,0),t.set(0,0,1),i.set(0,0,0),r.object3D.matrixWorld.extractRotation(s),t.applyMatrix4(s),r.object3D.updateMatrixWorld(),r.object3D.localToWorld(i),o.parent.parent.updateMatrixWorld(),o.parent.updateMatrixWorld(),o.updateMatrixWorld(),o.localToWorld(l),l.sub(i).normalize(),t.normalize(),jr(t.dot(l))}}(),remove:function(){this.removeEventListener()}}),o("portal",{schema:{pano:{type:"map",is:"uniform"},borderEnabled:{default:1,type:"int",is:"uniform"},strokeColor:{default:"white",type:"color",is:"uniform"}},vertexShader:"vec3 portalPosition;\nvarying vec3 vWorldPosition;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvoid main() {\nvDistanceToCenter = clamp(length(position - vec3(0.0, 0.0, 0.0)), 0.0, 1.0);\nportalPosition = (modelMatrix * vec4(0.0, 0.0, 0.0, 1.0)).xyz;\nvDistance = length(portalPosition - cameraPosition);\nvWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}",fragmentShader:"#define RECIPROCAL_PI2 0.15915494\nuniform sampler2D pano;\nuniform vec3 strokeColor;\nuniform float borderEnabled;\nvarying float vDistanceToCenter;\nvarying float vDistance;\nvarying vec3 vWorldPosition;\nvoid main() {\nvec3 direction = normalize(vWorldPosition - cameraPosition);\nvec2 sampleUV;\nfloat borderThickness = clamp(exp(-vDistance / 50.0), 0.6, 0.95);\nsampleUV.y = saturate(direction.y * 0.5  + 0.5);\nsampleUV.x = atan(direction.z, direction.x) * -RECIPROCAL_PI2 + 0.5;\nif (vDistanceToCenter > borderThickness && borderEnabled == 1.0) {\ngl_FragColor = vec4(strokeColor, 1.0);\n} else {\ngl_FragColor = mix(texture2D(pano, sampleUV), vec4(0.93, 0.17, 0.36, 1.0), clamp(pow((vDistance / 15.0), 2.0), 0.0, 1.0));\n}\n}"})},{"../core/component":125,"../core/shader":134,"../lib/three":173}],90:[function(t,r){function l(r){return 0===r.x&&0===r.y&&0===r.z}var a=t("../core/component").registerComponent,o=t("../lib/three"),i=t("../constants").DEFAULT_CAMERA_HEIGHT,n=t("../utils/bind"),s="a-grabbing",d=Or/2,c=o.Math.radToDeg;r.exports.Component=a("look-controls",{dependencies:["position","rotation"],schema:{enabled:{default:!0},touchEnabled:{default:!0},hmdEnabled:{default:!0},reverseMouseDrag:{default:!1},standing:{default:!0}},init:function(){var r=this.el.sceneEl;this.previousHMDPosition=new o.Vector3,this.hmdQuaternion=new o.Quaternion,this.hmdEuler=new o.Euler,this.position=new o.Vector3,this.rotation={},this.setupMouseControls(),this.setupHMDControls(),this.bindMethods(),r.addEventListener("exit-vr",this.onExitVR)},update:function(r){var a=this.data;a.enabled!==r.enabled&&this.updateGrabCursor(a.enabled),!r||a.hmdEnabled||r.hmdEnabled||(this.pitchObject.rotation.set(0,0,0),this.yawObject.rotation.set(0,0,0))},tick:function(){var t=this.data;t.enabled&&(this.controls.standing=t.standing,this.controls.userHeight=this.getUserHeight(),this.controls.update(),this.updateOrientation(),this.updatePosition())},getUserHeight:function(){var r=this.el;return r.hasAttribute("camera")&&r.getAttribute("camera").userHeight||i},play:function(){this.addEventListeners()},pause:function(){this.removeEventListeners()},remove:function(){this.removeEventListeners()},bindMethods:function(){this.onMouseDown=n(this.onMouseDown,this),this.onMouseMove=n(this.onMouseMove,this),this.onMouseUp=n(this.onMouseUp,this),this.onTouchStart=n(this.onTouchStart,this),this.onTouchMove=n(this.onTouchMove,this),this.onTouchEnd=n(this.onTouchEnd,this),this.onExitVR=n(this.onExitVR,this)},setupMouseControls:function(){this.mouseDown=!1,this.pitchObject=new o.Object3D,this.yawObject=new o.Object3D,this.yawObject.position.y=10,this.yawObject.add(this.pitchObject)},setupHMDControls:function(){this.dolly=new o.Object3D,this.euler=new o.Euler,this.controls=new o.VRControls(this.dolly),this.controls.userHeight=0},addEventListeners:function(){var r=this.el.sceneEl,t=r.canvas;return t?void(t.addEventListener("mousedown",this.onMouseDown,!1),window.addEventListener("mousemove",this.onMouseMove,!1),window.addEventListener("mouseup",this.onMouseUp,!1),t.addEventListener("touchstart",this.onTouchStart),window.addEventListener("touchmove",this.onTouchMove),window.addEventListener("touchend",this.onTouchEnd)):void r.addEventListener("render-target-loaded",n(this.addEventListeners,this))},removeEventListeners:function(){var r=this.el.sceneEl,t=r&&r.canvas;t&&(t.removeEventListener("mousedown",this.onMouseDown),t.removeEventListener("mousemove",this.onMouseMove),t.removeEventListener("mouseup",this.onMouseUp),t.removeEventListener("mouseout",this.onMouseUp),t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd))},updateOrientation:function(){var d=this.hmdEuler,o=this.hmdQuaternion,i=this.pitchObject,n=this.yawObject,s=this.el.sceneEl,r=this.rotation,a,t;o=o.copy(this.dolly.quaternion),d.setFromQuaternion(o,"YXZ"),s.isMobile?(r.x=c(d.x)+c(i.rotation.x),r.y=c(d.y)+c(n.rotation.y),r.z=c(d.z)):s.is("vr-mode")&&!l(d)&&this.data.hmdEnabled?(r.x=c(d.x),r.y=c(d.y),r.z=c(d.z)):(a=this.el.getAttribute("rotation"),t=this.calculateDeltaRotation(),this.data.reverseMouseDrag?(r.x=a.x-t.x,r.y=a.y-t.y,r.z=a.z):(r.x=a.x+t.x,r.y=a.y+t.y,r.z=a.z)),this.el.setAttribute("rotation",r)},calculateDeltaRotation:function(){var r=c(this.pitchObject.rotation.x),a=c(this.yawObject.rotation.y),o;return o={x:r-(this.previousRotationX||0),y:a-(this.previousRotationY||0)},this.previousRotationX=r,this.previousRotationY=a,o},updatePosition:function(){var r=this.el,a=this.position,o=this.previousHMDPosition,i,t;this.el.sceneEl.is("vr-mode")&&(i=this.calculateHMDPosition(),t=r.getAttribute("position"),a.copy(t).sub(o).add(i),r.setAttribute("position",a),o.copy(i))},calculateHMDPosition:function(){var r=new o.Vector3;return function(){return this.dolly.updateMatrix(),r.setFromMatrixPosition(this.dolly.matrix),r}}(),onMouseMove:function(r){var t=this.pitchObject,a=this.yawObject,i=this.previousMouseEvent,n,s;this.mouseDown&&this.data.enabled&&(n=r.movementX||r.mozMovementX,s=r.movementY||r.mozMovementY,void 0!==n&&void 0!==s||(n=r.screenX-i.screenX,s=r.screenY-i.screenY),this.previousMouseEvent=r,a.rotation.y-=.002*n,t.rotation.x-=.002*s,t.rotation.x=L(-d,N(d,t.rotation.x)))},onMouseDown:function(r){this.data.enabled&&0===r.button&&(this.mouseDown=!0,this.previousMouseEvent=r,document.body.classList.add(s))},onMouseUp:function(){this.mouseDown=!1,document.body.classList.remove(s)},onTouchStart:function(r){1===r.touches.length&&this.data.touchEnabled&&(this.touchStart={x:r.touches[0].pageX,y:r.touches[0].pageY},this.touchStarted=!0)},onTouchMove:function(r){var t=this.el.sceneEl.canvas,a=this.yawObject,o;this.touchStarted&&this.data.touchEnabled&&(o=2*Or*(r.touches[0].pageX-this.touchStart.x)/t.clientWidth,a.rotation.y-=.5*o,this.touchStart={x:r.touches[0].pageX,y:r.touches[0].pageY})},onTouchEnd:function(){this.touchStarted=!1},onExitVR:function(){this.previousHMDPosition.set(0,0,0)},updateGrabCursor:function(r){function t(){o.canvas.classList.add("a-grab-cursor")}function a(){o.canvas.classList.remove("a-grab-cursor")}var o=this.el.sceneEl;return o.canvas?r?void t():void a():void(r?o.addEventListener("render-target-loaded",t):o.addEventListener("render-target-loaded",a))}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/bind":189}],91:[function(t,r){function o(t){return"back"===t?l.BackSide:"double"===t?l.DoubleSide:l.FrontSide}function i(t){return"face"===t?l.FaceColors:"vertex"===t?l.VertexColors:l.NoColors}function n(r,a){r.dispose(),a.unregisterMaterial(r)}var a=t("../utils/"),s=t("../core/component"),l=t("../lib/three"),d=t("../core/shader"),c=a.debug("components:material:error"),p=s.registerComponent,u=d.shaders,m=d.shaderNames;r.exports.Component=p("material",{schema:{alphaTest:{default:0,min:0,max:1},depthTest:{default:!0},depthWrite:{default:!0},flatShading:{default:!1},npot:{default:!1},offset:{type:"vec2",default:{x:0,y:0}},opacity:{default:1,min:0,max:1},repeat:{type:"vec2",default:{x:1,y:1}},shader:{default:"standard",oneOf:m},side:{default:"front",oneOf:["front","back","double"]},transparent:{default:!1},vertexColors:{type:"string",default:"none",oneOf:["face","vertex"]},visible:{default:!0}},init:function(){this.material=null},update:function(r){var a=this.data;this.shader&&a.shader===r.shader||this.updateShader(a.shader),this.shader.update(this.data),this.updateMaterial(r)},updateSchema:function(o){var i=o.shader,t=this.data&&this.data.shader,a=i||t,r=u[a]&&u[a].schema;r||c("Unknown shader schema "+a),t&&i===t||(this.extendSchema(r),this.updateBehavior())},updateBehavior:function(){var o=this.schema,i=this,t=this.el.sceneEl,n={},r=function(r){Object.keys(n).forEach(function(a){n[a]=r}),i.shader.update(n)};this.tick=void 0,Object.keys(o).forEach(function(t){"time"===o[t].type&&(i.tick=r,n[t]=!0)}),t&&(this.tick?t.addBehavior(this):t.removeBehavior(this))},updateShader:function(o){var i=this.data,a=u[o]&&u[o].Shader,n;if(!a)throw new Error("Unknown shader "+o);n=this.shader=new a,n.el=this.el,n.init(i),this.setMaterial(n.material),this.updateSchema(i)},updateMaterial:function(r){var n=this.data,t=this.material;t.alphaTest=n.alphaTest,t.depthTest=!1!==n.depthTest,t.depthWrite=!1!==n.depthWrite,t.opacity=n.opacity,t.flatShading=n.flatShading,t.side=o(n.side),t.transparent=!1!==n.transparent||1>n.opacity,t.vertexColors=i(n.vertexColors),t.visible=n.visible,Object.keys(r).length&&(r.alphaTest!==n.alphaTest||r.side!==n.side||r.vertexColors!==n.vertexColors)&&(t.needsUpdate=!0)},remove:function(){var r=new l.MeshBasicMaterial,o=this.material,t=this.el.getObject3D("mesh");t&&(t.material=r),n(o,this.system)},setMaterial:function(r){var o=this.el.getOrCreateObject3D("mesh",l.Mesh),t=this.system;this.material&&n(this.material,t),this.material=o.material=r,t.registerMaterial(r)}})},{"../core/component":125,"../core/shader":134,"../lib/three":173,"../utils/":195}],92:[function(t,r){var a=t("../utils/debug"),o=t("../core/component").registerComponent,i=t("../lib/three"),n=a("components:obj-model:warn");r.exports.Component=o("obj-model",{schema:{mtl:{type:"model"},obj:{type:"model"}},init:function(){this.model=null,this.objLoader=new i.OBJLoader,this.mtlLoader=new i.MTLLoader(this.objLoader.manager),this.mtlLoader.crossOrigin=""},update:function(){var t=this.data;t.obj&&(this.remove(),this.loadObj(t.obj,t.mtl))},remove:function(){this.model&&this.el.removeObject3D("mesh")},loadObj:function(s,l){var d=this,t=this.el,r=this.mtlLoader,a=this.objLoader;return l?(t.hasAttribute("material")&&n("Material component properties are ignored when a .MTL is provided"),r.setTexturePath(l.substr(0,l.lastIndexOf("/")+1)),void r.load(l,function(r){r.preload(),a.setMaterials(r),a.load(s,function(r){d.model=r,t.setObject3D("mesh",r),t.emit("model-loaded",{format:"obj",model:r})})})):void a.load(s,function(r){var a=t.components.material;a&&r.traverse(function(t){t instanceof i.Mesh&&(t.material=a.material)}),d.model=r,t.setObject3D("mesh",r),t.emit("model-loaded",{format:"obj",model:r})})}})},{"../core/component":125,"../lib/three":173,"../utils/debug":191}],93:[function(t,r){var a=t("../utils/bind"),o=t("../core/component").registerComponent,i=t("../utils/tracked-controls"),n="https://cdn.aframe.io/controllers/oculus/oculus-touch-controller-",s={x:0,y:-.015,z:.04};r.exports.Component=o("oculus-touch-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#999"},buttonTouchColor:{type:"color",default:"#8AB"},buttonHighlightColor:{type:"color",default:"#2DF"},model:{default:!0},rotationOffset:{default:0}},mapping:{left:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","xbutton","ybutton","surface"]},right:{axes:{thumbstick:[0,1]},buttons:["thumbstick","trigger","grip","abutton","bbutton","surface"]}},bindMethods:function(){this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var r=this;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(t){r.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){r.onButtonEvent(t.detail.id,"up")},this.onButtonTouchStart=function(t){r.onButtonEvent(t.detail.id,"touchstart")},this.onButtonTouchEnd=function(t){r.onButtonEvent(t.detail.id,"touchend")},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.emitIfAxesChanged=i.emitIfAxesChanged,this.checkControllerPresentAndSetup=i.checkControllerPresentAndSetup},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("axismove",this.onAxisMoved),r.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("axismove",this.onAxisMoved),r.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,"Oculus Touch",{hand:this.data.hand})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){var r,a;this.data.model&&("right"===this.data.hand?(r="url("+(n+"right.obj")+")",a="url("+(n+"right.mtl")+")"):(r="url("+(n+"left.obj")+")",a="url("+(n+"left.mtl")+")"),this.el.setAttribute("obj-model",{obj:r,mtl:a}))},injectTrackedControls:function(){var r=this.data,t="right"===r.hand?-90:90;this.el.setAttribute("tracked-controls",{id:"right"===r.hand?"Oculus Touch (Right)":"Oculus Touch (Left)",controller:0,rotationOffset:-999===r.rotationOffset?t:r.rotationOffset}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(r){var t=this.mapping[this.data.hand].buttons[r.detail.id],a=this.buttonMeshes,o;t&&("trigger"!==t&&"grip"!==t||(o=r.detail.state.value),a&&("trigger"===t&&a.trigger&&(a.trigger.rotation.x=-o*(Or/24)),"grip"===t&&a.grip&&(a.grip.rotation.y=("left"===this.data.hand?-1:1)*o*(Or/60))),this.el.emit(t+"changed",r.detail.state))},onModelLoaded:function(r){var t=r.detail.model,a;if(this.data.model){var o="left"===this.data.hand;a=this.buttonMeshes={},a.grip=t.getObjectByName(o?"buttonHand_oculus-touch-controller-left.004":"buttonHand_oculus-touch-controller-right.005"),a.thumbstick=t.getObjectByName(o?"stick_oculus-touch-controller-left.007":"stick_oculus-touch-controller-right.004"),a.trigger=t.getObjectByName(o?"buttonTrigger_oculus-touch-controller-left.005":"buttonTrigger_oculus-touch-controller-right.006"),a.xbutton=t.getObjectByName("buttonX_oculus-touch-controller-left.002"),a.abutton=t.getObjectByName("buttonA_oculus-touch-controller-right.002"),a.ybutton=t.getObjectByName("buttonY_oculus-touch-controller-left.001"),a.bbutton=t.getObjectByName("buttonB_oculus-touch-controller-right.003"),t.position=s}},onButtonEvent:function(r,t){var a=this.mapping[this.data.hand].buttons[r],i;if(Array.isArray(a))for(i=0;i<a.length;i++)this.el.emit(a[i]+t);else this.el.emit(a+t);this.updateModel(a,t)},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping[this.data.hand].axes,r)},updateModel:function(r,t){var a;if(Array.isArray(r))for(a=0;a<r.length;a++)this.updateButtonModel(r[a],t);else this.updateButtonModel(r,t)},updateButtonModel:function(r,t){var a="up"===t||"touchend"===t?this.data.buttonColor:"touchstart"===t?this.data.buttonTouchColor:this.data.buttonHighlightColor,o=this.buttonMeshes;this.data.model&&o&&o[r]&&o[r].material.color.set(a)}})},{"../core/component":125,"../utils/bind":189,"../utils/tracked-controls":199}],94:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("position",{schema:{type:"vec3"},update:function(){var t=this.el.object3D,r=this.data;t.position.set(r.x,r.y,r.z)}})},{"../core/component":125}],95:[function(t,r){function a(r,a){var t;for(r.length=a.length,t=0;t<a.length;t++)r[t]=a[t]}var o=t("../core/component").registerComponent,n=t("../lib/three"),i=t("../utils/"),s=i.bind,l=new n.Vector3;r.exports.Component=o("raycaster",{schema:{direction:{type:"vec3",default:{x:0,y:0,z:-1}},far:{default:1e3},interval:{default:100},near:{default:0},objects:{default:""},origin:{type:"vec3"},recursive:{default:!0},showLine:{default:!1},useWorldCoordinates:{default:!1}},init:function(){this.lineData={},this.lineEndVec3=new n.Vector3,this.unitLineEndVec3=new n.Vector3,this.intersectedEls=[],this.objects=null,this.prevCheckTime=void 0,this.prevIntersectedEls=[],this.raycaster=new n.Raycaster,this.updateOriginDirection(),this.refreshObjects=s(this.refreshObjects,this),this.refreshOnceChildLoaded=s(this.refreshOnceChildLoaded,this)},update:function(a){var o=this.data,t=this.el,i=this.raycaster;i.far=o.far,i.near=o.near,o.showLine&&(o.far!==a.far||o.origin!==a.origin||o.direction!==a.direction||o.showLine!==a.showLine)&&(this.unitLineEndVec3.copy(o.origin).add(o.direction).normalize(),this.drawLine()),!o.showLine&&a.showLine&&t.removeAttribute("line"),this.refreshObjects()},play:function(){this.el.sceneEl.addEventListener("loaded",this.refreshObjects),this.el.sceneEl.addEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.addEventListener("child-detached",this.refreshObjects)},pause:function(){this.el.sceneEl.removeEventListener("loaded",this.refreshObjects),this.el.sceneEl.removeEventListener("child-attached",this.refreshOnceChildLoaded),this.el.sceneEl.removeEventListener("child-detached",this.refreshObjects)},remove:function(){this.data.showLine&&this.el.removeAttribute("line")},refreshOnceChildLoaded:function(r){var a=this,t=r.detail.el;t&&(t.hasLoaded?this.refreshObjects():t.addEventListener("loaded",function r(){t.removeEventListener("loaded",r),a.refreshObjects()}))},refreshObjects:function(){var a=this.data,r=a.objects?this.el.sceneEl.querySelectorAll(a.objects):null,o,n,t;if(r)for(t=[],n=0;n<r.length;n++)t.push(r[n].object3D);else t=this.el.sceneEl.object3D.children;for(this.objects=[],n=0;n<t.length;n++)(o=t[n].children)&&this.objects.push.apply(this.objects,o)},tick:function(){var l=[];return function(p){var t=this.el,u=this.data,o=this.intersectedEls,m=this.prevCheckTime,g=this.prevIntersectedEls,d,i,r,n;if(!(m&&p-m<u.interval)){for(this.prevCheckTime=p,a(this.prevIntersectedEls,this.intersectedEls),this.updateOriginDirection(),n=this.raycaster.intersectObjects(this.objects,u.recursive),l.length=0,d=0;d<n.length;d++)i=n[d],u.showLine&&i.object===t.getObject3D("line")||i.object.el&&l.push(i);for(o.length=l.length,d=0;d<l.length;d++)o[d]=l[d].object.el;for(d=0;d<l.length;d++)l[d].object.el.emit("raycaster-intersected",{el:t,intersection:l[d]});for(l.length&&t.emit("raycaster-intersection",{els:o,intersections:l}),d=0;d<g.length;d++){if(-1!==o.indexOf(g[d]))return;t.emit("raycaster-intersection-cleared",{el:g[d]}),g[d].emit("raycaster-intersected-cleared",{el:t})}u.showLine&&(l.length&&(r=l[0].object.el===t&&l[1]?l[1].distance:l[0].distance),this.drawLine(r))}}}(),updateOriginDirection:function(){var a=new n.Vector3,o=new n.Quaternion,t=new n.Vector3;return function(){var i=this.el,r=this.data;return r.useWorldCoordinates?void this.raycaster.set(r.origin,r.direction):void(i.object3D.updateMatrixWorld(),i.object3D.matrixWorld.decompose(t,o,l),0===r.origin.x&&0===r.origin.y&&0===r.origin.z||(t=i.object3D.localToWorld(t.copy(r.origin))),a.copy(r.direction).add(r.origin).applyQuaternion(o).normalize(),this.raycaster.set(t,a))}}(),drawLine:function(){var a=new n.Vector3,t={};return function(o){var i=this.data,r=this.el;void 0===o&&(o=i.far===1/0?1e3:i.far),t.start=i.origin,t.end=a.copy(this.unitLineEndVec3).multiplyScalar(o),r.setAttribute("line",t)}}()})},{"../core/component":125,"../lib/three":173,"../utils/":195}],96:[function(t,r){var a=t("../lib/three").Math.degToRad,o=t("../core/component").registerComponent;r.exports.Component=o("rotation",{schema:{type:"vec3"},update:function(){var t=this.data,r=this.el.object3D;r.rotation.set(a(t.x),a(t.y),a(t.z)),r.rotation.order="YXZ"}})},{"../core/component":125,"../lib/three":173}],97:[function(t,r){var a=t("../core/component").registerComponent,i=1e-5;r.exports.Component=a("scale",{schema:{type:"vec3",default:{x:1,y:1,z:1}},update:function(){var n=this.data,s=this.el.object3D,o=0===n.x?i:n.x,t=0===n.y?i:n.y,r=0===n.z?i:n.z;s.scale.set(o,t,r)}})},{"../core/component":125}],98:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("debug",{schema:{default:!0}})},{"../../core/component":125}],99:[function(t,r){var a=t("../../core/component").registerComponent;r.exports.Component=a("embedded",{dependencies:["vr-mode-ui"],schema:{default:!0},update:function(){var t=this.el,a=t.querySelector(".a-enter-vr");!0===this.data?(a&&a.classList.add("embedded"),t.removeFullScreenStyles()):(a&&a.classList.remove("embedded"),t.addFullScreenStyles())}})},{"../../core/component":125}],100:[function(t,r){function a(t){var r;return r="exponential"===t.type?new i.FogExp2(t.color,t.density):new i.Fog(t.color,t.near,t.far),r.name=t.type,r}var o=t("../../core/component").registerComponent,i=t("../../lib/three"),n=t("../../utils/debug"),s=n("components:fog:warn");r.exports.Component=o("fog",{schema:{color:{type:"color",default:"#000"},density:{default:25e-5},far:{default:1e3,min:0},near:{default:1,min:0},type:{default:"linear",oneOf:["linear","exponential"]}},update:function(){var r=this.data,n=this.el,l=this.el.object3D.fog;return n.isScene?l&&r.type===l.name?void Object.keys(this.schema).forEach(function(t){var a=r[t];"color"===t&&(a=new i.Color(a)),l[t]=a}):(n.object3D.fog=a(r),void n.systems.material.updateMaterials()):void s("Fog component can only be applied to <a-scene>")},remove:function(){var t=this.el.object3D.fog;t&&(t.far=0,t.near=.1)}})},{"../../core/component":125,"../../lib/three":173,"../../utils/debug":191}],101:[function(t,r){(function(a){var o=t("../../constants").AFRAME_INJECTED,i=t("../../utils/bind"),n=t("../../../package"),s=t("../../core/component").registerComponent,l="https://unpkg.com/aframe-inspector@"+function(t){var r=t.split(".");return r[2]="x",r.join(".")}(n.version)+"/dist/aframe-inspector.min.js",d="dev"===a.env.INSPECTOR_VERSION?"https://aframe.io/aframe-inspector/dist/aframe-inspector.js":l;r.exports.Component=s("inspector",{schema:{url:{default:d}},init:function(){this.onKeydown=i(this.onKeydown,this),this.onMessage=i(this.onMessage,this),this.initOverlay(),window.addEventListener("keydown",this.onKeydown),window.addEventListener("message",this.onMessage)},initOverlay:function(){this.loadingMessageEl=document.createElement("div"),this.loadingMessageEl.classList.add("a-inspector-loader"),this.loadingMessageEl.innerHTML="Loading Inspector"+"<span class=\"dots\"><span>.</span><span>.</span><span>.</span></span>"},remove:function(){this.removeEventListeners()},onKeydown:function(t){var r=73===t.keyCode&&t.ctrlKey&&t.altKey;this.data&&r&&this.injectInspector()},showLoader:function(){document.body.appendChild(this.loadingMessageEl)},hideLoader:function(){document.body.removeChild(this.loadingMessageEl)},onMessage:function(t){"INJECT_AFRAME_INSPECTOR"===t.data&&this.injectInspector()},injectInspector:function(){var t=this,r;AFRAME.INSPECTOR||AFRAME.inspectorInjected||(this.showLoader(),r=document.createElement("script"),r.src=this.data.url,r.setAttribute("data-name","aframe-inspector"),r.setAttribute(o,""),r.onload=function(){AFRAME.INSPECTOR.open(),t.hideLoader(),t.removeEventListeners()},r.onerror=function(){t.loadingMessageEl.innerHTML="Error loading Inspector"},document.head.appendChild(r),AFRAME.inspectorInjected=!0)},removeEventListeners:function(){window.removeEventListener("keydown",this.onKeydown),window.removeEventListener("message",this.onMessage)}})}).call(this,t("_process"))},{"../../../package":76,"../../constants":116,"../../core/component":125,"../../utils/bind":189,_process:6}],102:[function(t,r){var a=t("../../core/component").registerComponent,o=t("../../utils/").shouldCaptureKeyEvent;r.exports.Component=a("keyboard-shortcuts",{schema:{enterVR:{default:!0},exitVR:{default:!0}},init:function(){var r=this,a=this.el;this.listener=window.addEventListener("keyup",function(t){o(t)&&(r.enterVREnabled&&70===t.keyCode&&a.enterVR(),r.enterVREnabled&&27===t.keyCode&&a.exitVR())},!1)},update:function(){var r=this.data;this.enterVREnabled=r.enterVR},remove:function(){window.removeEventListener("keyup",this.listener)}})},{"../../core/component":125,"../../utils/":195}],103:[function(t,r){var a=t("../../utils/debug"),o=t("../../core/component").registerComponent,n=a("components:pool:warn");r.exports.Component=o("pool",{schema:{mixin:{default:""},size:{default:0},dynamic:{default:!1}},multiple:!0,initPool:function(){var r;if(this.data.mixin)for(this.availableEls=[],this.usedEls=[],r=0;r<this.data.size;++r)this.createEntity()},update:function(r){var t=this.data;r.mixin===t.mixin&&r.size===t.size||this.initPool()},createEntity:function(){var r=document.createElement("a-entity");r.play=this.wrapPlay(r.play),r.setAttribute("mixin",this.data.mixin),r.setAttribute("visible",!1),this.el.appendChild(r),this.availableEls.push(r)},wrapPlay:function(r){var t=this.usedEls;return function(){-1!==t.indexOf(this)&&r.call(this)}},requestEntity:function(){var r;if(0===this.availableEls.length){if(!1===this.data.dynamic)return void n("Requested entity from empty pool "+this.name);n("Requested entity from empty pool. This pool is dynamicand will resize automatically. You might want to increase its initial size"+this.name),this.createEntity()}return r=this.availableEls.shift(),this.usedEls.push(r),r.setAttribute("visible",!0),r},returnEntity:function(r){var t=this.usedEls.indexOf(r);return-1===t?void n("The returned entity was not previously pooled from "+this.name):void(this.usedEls.splice(t,1),this.availableEls.push(r),r.setAttribute("visible",!1),r.pause())}})},{"../../core/component":125,"../../utils/debug":191}],104:[function(t,r){var a=t("../../core/component").registerComponent,o=t("../../lib/three");r.exports.Component=a("screenshot",{schema:{width:{default:4096},height:{default:2048}},init:function(){function r(){var r=i.renderer.getContext();t.cubeMapSize=r.getParameter(r.MAX_CUBE_MAP_TEXTURE_SIZE),t.material=new o.RawShaderMaterial({uniforms:{map:{type:"t",value:null}},vertexShader:"attribute vec3 position;\nattribute vec2 uv;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUv;\nvoid main()  {\n  vUv = vec2( 1.- uv.x, uv.y );\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"precision mediump float;\nuniform samplerCube map;\nvarying vec2 vUv;\n#define M_PI 3.141592653589793238462643383279\nvoid main() {\n  vec2 uv = vUv;\n  float longitude = uv.x * 2. * M_PI - M_PI + M_PI / 2.;\n  float latitude = uv.y * M_PI;\n  vec3 dir = vec3(\n    - sin( longitude ) * sin( latitude ),\n    cos( latitude ),\n    - cos( longitude ) * sin( latitude )\n  );\n  normalize( dir );\n  gl_FragColor = vec4( textureCube( map, dir ).rgb, 1.0 );\n}",side:o.DoubleSide}),t.quad=new o.Mesh(new o.PlaneBufferGeometry(1,1),t.material),t.quad.visible=!1,t.camera=new o.OrthographicCamera(-.5,.5,.5,-.5,-1e4,1e4),t.canvas=document.createElement("canvas"),t.ctx=t.canvas.getContext("2d"),i.camera&&i.camera.add(t.quad),t.onKeyDown=t.onKeyDown.bind(t),t.onCameraActive=t.onCameraActive.bind(t),i.addEventListener("camera-set-active",t.onCameraActive)}var i=this.el,t=this;i.renderer?r():i.addEventListener("render-target-loaded",r)},getRenderTarget:function(r,a){return new o.WebGLRenderTarget(r,a,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,wrapS:o.ClampToEdgeWrapping,wrapT:o.ClampToEdgeWrapping,format:o.RGBAFormat,type:o.UnsignedByteType})},resize:function(r,a){this.quad.scale.set(r,a,1),this.camera.left=-1*r/2,this.camera.right=r/2,this.camera.top=a/2,this.camera.bottom=-1*a/2,this.camera.updateProjectionMatrix(),this.canvas.width=r,this.canvas.height=a},play:function(){window.addEventListener("keydown",this.onKeyDown)},onCameraActive:function(r){var a=this.quad.parent;a&&a.remove(this.quad),r.detail.cameraEl.getObject3D("camera").add(this.quad)},onKeyDown:function(r){var o=83===r.keyCode&&r.ctrlKey&&r.altKey;if(this.data&&o){var t=r.shiftKey?"equirectangular":"perspective";this.capture(t)}},setCapture:function(n){var s=this.el,r,l,d;return"perspective"===n?(this.quad.visible=!1,l=s.camera,r={width:this.data.width,height:this.data.height}):(l=this.camera,l.position.copy(s.camera.getWorldPosition()),l.rotation.copy(s.camera.getWorldRotation()),d=new o.CubeCamera(s.camera.near,s.camera.far,N(this.cubeMapSize,2048)),d.position.copy(s.camera.getWorldPosition()),d.rotation.copy(s.camera.getWorldRotation()),d.updateCubeMap(s.renderer,s.object3D),this.quad.material.uniforms.map.value=d.renderTarget.texture,r={width:this.data.width,height:this.data.height},this.quad.visible=!0),{camera:l,size:r,projection:n}},capture:function(r){var a=this.setCapture(r);this.renderCapture(a.camera,a.size,a.projection),this.saveCapture()},getCanvas:function(r){var a=this.setCapture(r);return this.renderCapture(a.camera,a.size,a.projection),this.canvas},renderCapture:function(l,c,t){var a=this.el.renderer.autoClear,o=this.el,d=this.el.renderer,s,i,r;i=this.getRenderTarget(c.width,c.height),r=new Uint8Array(4*c.width*c.height),this.resize(c.width,c.height),d.autoClear=!0,d.render(o.object3D,l,i,!0),d.autoClear=a,d.readRenderTargetPixels(i,0,0,c.width,c.height,r),"perspective"===t&&(r=this.flipPixelsVertically(r,c.width,c.height)),s=new ImageData(new Uint8ClampedArray(r),c.width,c.height),this.quad.visible=!1,this.ctx.putImageData(s,0,0)},flipPixelsVertically:function(o,s,t){for(var a=o.slice(0),i=0;i<s;++i)for(var r=0;r<t;++r)a[4*i+4*(r*s)]=o[4*i+4*((t-r)*s)],a[4*i+1+4*(r*s)]=o[4*i+1+4*((t-r)*s)],a[4*i+2+4*(r*s)]=o[4*i+2+4*((t-r)*s)],a[4*i+3+4*(r*s)]=o[4*i+3+4*((t-r)*s)];return a},saveCapture:function(){this.canvas.toBlob(function(r){var o="screenshot-"+document.title.toLowerCase()+"-"+Date.now()+".png",t=document.createElement("a"),a=URL.createObjectURL(r);t.href=a,t.setAttribute("download",o),t.innerHTML="downloading...",t.style.display="none",document.body.appendChild(t),setTimeout(function(){t.click(),document.body.removeChild(t)},1)},"image/png")}})},{"../../core/component":125,"../../lib/three":173}],105:[function(t,r){function a(r){var t=new c(r.renderer),a=new l(r),o=r.isMobile?[]:[t,a];return new n({css:[],values:{fps:{caption:"fps",below:30}},groups:[{caption:"Framerate",values:["fps","raf"]}],plugins:o})}var o=t("../../core/component").registerComponent,n=t("../../../vendor/rStats"),i=t("../../utils");t("../../../vendor/rStats.extras"),t("../../lib/rStatsAframe");var l=window.aframeStats,s=i.bind,d="a-hidden",c=window.threeStats;r.exports.Component=o("stats",{schema:{default:!0},init:function(){var r=this.el;"false"!==i.getUrlParameter("stats")&&(this.stats=a(r),this.statsEl=document.querySelector(".rs-base"),this.hideBound=s(this.hide,this),this.showBound=s(this.show,this),r.addEventListener("enter-vr",this.hideBound),r.addEventListener("exit-vr",this.showBound))},update:function(){if(this.stats)return this.data?this.show():this.hide()},remove:function(){this.el.removeEventListener("enter-vr",this.hideBound),this.el.removeEventListener("exit-vr",this.showBound),this.statsEl&&this.statsEl.parentNode.removeChild(this.statsEl)},tick:function(){var r=this.stats;r&&(r("rAF").tick(),r("FPS").frame(),r().update())},hide:function(){this.statsEl.classList.add(d)},show:function(){this.statsEl.classList.remove(d)}})},{"../../../vendor/rStats":203,"../../../vendor/rStats.extras":202,"../../core/component":125,"../../lib/rStatsAframe":172,"../../utils":195}],106:[function(t,r){function a(r){var a,t;return t=document.createElement("div"),t.classList.add(d),t.setAttribute(s.AFRAME_INJECTED,""),a=document.createElement("button"),a.className=c,a.setAttribute("title","Enter VR mode with a headset or fullscreen mode on a desktop. Visit https://webvr.rocks or https://webvr.info for more information."),a.setAttribute(s.AFRAME_INJECTED,""),t.appendChild(a),a.addEventListener("click",function(){r()}),t}function o(r){var a=document.createElement("div");a.className=u,a.classList.add(p),a.setAttribute(s.AFRAME_INJECTED,"");var t=document.createElement("button");return t.setAttribute(s.AFRAME_INJECTED,""),t.innerHTML="Exit VR",t.addEventListener("click",r),a.appendChild(t),a}var i=t("../../core/component").registerComponent,s=t("../../constants/"),n=t("../../utils/"),l=n.bind,d="a-enter-vr",c="a-enter-vr-button",p="a-hidden",u="a-orientation-modal";r.exports.Component=i("vr-mode-ui",{dependencies:["canvas"],schema:{enabled:{default:!0}},init:function(){var r=this,a=this.el;"false"!==n.getUrlParameter("ui")&&(this.enterVR=l(a.enterVR,a),this.exitVR=l(a.exitVR,a),this.insideLoader=!1,this.enterVREl=null,this.orientationModalEl=null,a.addEventListener("enter-vr",l(this.updateEnterVRInterface,this)),a.addEventListener("exit-vr",l(this.updateEnterVRInterface,this)),window.addEventListener("message",function(a){"loaderReady"===a.data.type&&(r.insideLoader=!0,r.remove())}),window.addEventListener("orientationchange",l(this.toggleOrientationModalIfNeeded,this)))},update:function(){var t=this.el;return!this.data.enabled||this.insideLoader||"false"===n.getUrlParameter("ui")?this.remove():void(this.enterVREl||this.orientationModalEl||(this.enterVREl=a(this.enterVR),t.appendChild(this.enterVREl),this.orientationModalEl=o(this.exitVR),t.appendChild(this.orientationModalEl),this.updateEnterVRInterface()))},remove:function(){[this.enterVREl,this.orientationModalEl].forEach(function(t){t&&t.parentNode.removeChild(t)})},updateEnterVRInterface:function(){this.toggleEnterVRButtonIfNeeded(),this.toggleOrientationModalIfNeeded()},toggleEnterVRButtonIfNeeded:function(){var t=this.el;this.enterVREl&&(t.is("vr-mode")?this.enterVREl.classList.add(p):this.enterVREl.classList.remove(p))},toggleOrientationModalIfNeeded:function(){var r=this.el,a=this.orientationModalEl;a&&r.isMobile&&(!n.device.isLandscape()&&r.is("vr-mode")?a.classList.remove(p):a.classList.add(p))}})},{"../../constants/":116,"../../core/component":125,"../../utils/":195}],107:[function(t,r){var a=t("../core/component"),o=t("../lib/three"),i=t("../utils/bind"),n=a.registerComponent;r.exports.Component=n("shadow",{schema:{cast:{default:!0},receive:{default:!0}},init:function(){this.onMeshChanged=i(this.update,this),this.el.addEventListener("object3dset",this.onMeshChanged),this.system.setShadowMapEnabled(!0)},update:function(){var t=this.data;this.updateDescendants(t.cast,t.receive)},remove:function(){this.el.removeEventListener("object3dset",this.onMeshChanged),this.updateDescendants(!1,!1)},updateDescendants:function(r,l){var t=this.el.sceneEl;this.el.object3D.traverse(function(n){if(n instanceof o.Mesh&&(n.castShadow=r,n.receiveShadow=l,t.hasLoaded&&n.material))for(var s=n.material.materials||[n.material],a=0;a<s.length;a++)s[a].needsUpdate=!0})}})},{"../core/component":125,"../lib/three":173,"../utils/bind":189}],108:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/debug"),i=t("../utils/bind"),s=t("../lib/three"),n=o("components:sound:warn");r.exports.Component=a("sound",{schema:{autoplay:{default:!1},distanceModel:{default:"inverse",oneOf:["linear","inverse","exponential"]},loop:{default:!1},maxDistance:{default:1e4},on:{default:""},poolSize:{default:1},positional:{default:!0},refDistance:{default:1},rolloffFactor:{default:1},src:{type:"audio"},volume:{default:1}},multiple:!0,init:function(){this.listener=null,this.audioLoader=new s.AudioLoader,this.pool=new s.Group,this.loaded=!1,this.mustPlay=!1,this.playSound=i(this.playSound,this)},update:function(r){var a=this.data,t=a.src!==r.src;if(t){if(!a.src)return void n("Audio source was not specified with `src`");this.setupSound()}if(this.pool.children.forEach(function(t){a.positional&&(t.setDistanceModel(a.distanceModel),t.setMaxDistance(a.maxDistance),t.setRefDistance(a.refDistance),t.setRolloffFactor(a.rolloffFactor)),t.setLoop(a.loop),t.setVolume(a.volume),t.isPaused=!1}),a.on!==r.on&&this.updateEventListener(r.on),t){var o=this;this.loaded=!1,this.audioLoader.load(a.src,function(r){o.pool.children.forEach(function(a){a.setBuffer(r)}),o.loaded=!0,s.Cache.remove(a.src),(o.data.autoplay||o.mustPlay)&&o.playSound(),o.el.emit("sound-loaded")})}},pause:function(){this.stopSound(),this.removeEventListener()},play:function(){this.data.autoplay&&this.playSound(),this.updateEventListener()},remove:function(){this.removeEventListener(),this.el.removeObject3D(this.attrName);try{this.pool.children.forEach(function(t){t.disconnect()})}catch(t){n("Audio source not properly disconnected")}},updateEventListener:function(r){var a=this.el;r&&a.removeEventListener(r,this.playSound),a.addEventListener(this.data.on,this.playSound)},removeEventListener:function(){this.el.removeEventListener(this.data.on,this.playSound)},setupSound:function(){var r=this.el,a=r.sceneEl;0<this.pool.children.length&&(this.stopSound(),r.removeObject3D("sound"));var t=this.listener=a.audioListener||new s.AudioListener;a.audioListener=t,a.camera&&a.camera.add(t),a.addEventListener("camera-set-active",function(r){r.detail.cameraEl.getObject3D("camera").add(t)}),this.pool=new s.Group;for(var o=0,l;o<this.data.poolSize;o++)l=this.data.positional?new s.PositionalAudio(t):new s.Audio(t),this.pool.add(l);r.setObject3D(this.attrName,this.pool),this.pool.children.forEach(function(a){a.onEnded=function(){a.isPlaying=!1,r.emit("sound-ended",{index:o})}})},pauseSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.isPlaying&&!t.isPaused&&(t.isPaused=!0,t.pause())})},playSound:function(){if(!this.loaded)return n("Sound not loaded yet. It will be played once it finished loading"),void(this.mustPlay=!0);var r=!1;return(this.isPlaying=!0,this.pool.children.forEach(function(a){if(!a.isPlaying&&a.buffer&&!r)return a.play(),a.isPaused=!1,void(r=!0)}),!r)?void n("All the sounds are playing. If you need to play more sounds simultaneously consider increasing the size of pool with the `poolSize` attribute.",this.el):void(this.mustPlay=!1)},stopSound:function(){this.isPlaying=!1,this.pool.children.forEach(function(t){t.source&&t.source.buffer&&t.stop()})}})},{"../core/component":125,"../lib/three":173,"../utils/bind":189,"../utils/debug":191}],109:[function(t,r){function a(t){return"back"===t?y.BackSide:"double"===t?y.DoubleSide:y.FrontSide}function l(t){return t=f.clone(t),void 0!==t.lineHeight&&(t.lineHeight=parseFloat(t.lineHeight),isFinite(t.lineHeight)||(t.lineHeight=void 0)),void 0!==t.width&&(t.width=parseFloat(t.width),isFinite(t.width)||(t.width=void 0)),t}function o(a,s){return new Promise(function(t,r){u(a,function(n,o){return n?(M("Error loading font",a),void r(n)):void(0<=a.indexOf("/Roboto-msdf.json")&&(s=30),s&&o.chars.map(function(t){t.yoffset+=s}),t(o))})})}function i(a){return new Promise(function(o,t){new y.ImageLoader().load(a,function(t){o(t)},void 0,function(){M("Error loading font image",a),t(null)})})}function s(a,i,t){var r,s;return s=new x[i].Shader,s.el=a,s.init(t),s.update(t),r=s.material,r.transparent=t.transparent,{material:r,shader:s}}function d(r,a){r.side=a.side}function p(a,o,t){return a||(.5+o)*t}function c(a){var o=0,t=0,r=0;return a.chars.map(function(a){o+=a.xadvance,48<=a.id&&57>=a.id&&(r++,t+=a.xadvance)}),r?t/r:o/a.chars.length}var n=t("three-bmfont-text"),u=t("load-bmfont"),m=t("path"),g=t("../core/component").registerComponent,h=t("../core/shader"),y=t("../lib/three"),f=t("../utils/"),M=f.debug("components:text:error"),x=h.shaders,E=f.debug("components:text:warn"),v="https://cdn.aframe.io/fonts/",A={aileronsemibold:v+"Aileron-Semibold.fnt",dejavu:v+"DejaVu-sdf.fnt",exo2bold:v+"Exo2Bold.fnt",exo2semibold:v+"Exo2SemiBold.fnt",kelsonsans:v+"KelsonSans.fnt",monoid:v+"Monoid.fnt",mozillavr:v+"mozillavr.fnt",roboto:v+"Roboto-msdf.json",sourcecodepro:v+"SourceCodePro.fnt"},T=["roboto"],b="roboto";r.exports.FONTS=A;var L=new function(){var a=this.cache={};this.get=function(o,t){return o in a?a[o]:(a[o]=t(),a[o])}},D={};r.exports.Component=g("text",{multiple:!0,schema:{align:{type:"string",default:"left",oneOf:["left","right","center"]},alphaTest:{default:.5},anchor:{default:"center",oneOf:["left","right","center","align"]},baseline:{default:"center",oneOf:["top","center","bottom"]},color:{type:"color",default:"#FFF"},font:{type:"string",default:b},fontImage:{type:"string"},height:{type:"number"},letterSpacing:{type:"number",default:0},lineHeight:{type:"number"},opacity:{type:"number",default:1},shader:{default:"sdf",oneOf:x},side:{default:"front",oneOf:["front","back","double"]},tabSize:{default:4},transparent:{default:!0},value:{type:"string"},whiteSpace:{default:"normal",oneOf:["normal","pre","nowrap"]},width:{type:"number"},wrapCount:{type:"number",default:40},wrapPixels:{type:"number"},yOffset:{type:"number",default:0},zOffset:{type:"number",default:.001}},init:function(){this.texture=new y.Texture,this.texture.anisotropy=16,this.geometry=n(),this.createOrUpdateMaterial(),this.mesh=new y.Mesh(this.geometry,this.material),this.el.setObject3D(this.attrName,this.mesh)},update:function(a){var o=l(this.data),t=this.currentFont;return(this.createOrUpdateMaterial(),a.font!==o.font)?void this.updateFont():void(t&&(this.updateGeometry(this.geometry,o,t),this.updateLayout(o)))},remove:function(){this.geometry.dispose(),this.geometry=null,this.el.removeObject3D(this.attrName),this.material.dispose(),this.material=null,this.texture.dispose(),this.texture=null,this.shaderObject&&delete this.shaderObject},createOrUpdateMaterial:function(){var l=this.data,o=this.material,i,c,t,r;return(r=l.shader,-1!==T.indexOf(l.font)||0<=l.font.indexOf("-msdf.")?r="msdf":l.font in A&&-1===T.indexOf(l.font)&&(r="sdf"),i=(this.shaderObject&&this.shaderObject.name)!==r,t={alphaTest:l.alphaTest,color:l.color,map:this.texture,opacity:l.opacity,side:a(l.side),transparent:l.transparent},!i)?(this.shaderObject.update(t),o.transparent=t.transparent,void d(o,t)):void(c=s(this.el,r,t),this.material=c.material,this.shaderObject=c.shader,d(this.material,t),this.mesh&&(this.mesh.material=this.material))},updateFont:function(){var d=this.data,t=this.el,r=this.geometry,n=this,p;d.font||E("No font specified. Using the default font."),this.mesh.visible=!1,p=this.lookupFont(d.font||b)||d.font,L.get(p,function(){return o(p,d.yOffset)}).then(function(o){var u,a;if(1!==o.pages.length)throw new Error("Currently only single-page bitmap fonts are supported.");D[p]||(o.widthFactor=D[o]=c(o)),u=l(d),n.updateGeometry(r,n.data,o),n.currentFont=o,n.updateLayout(u),a=d.fontImage||p.replace(/(\.fnt)|(\.json)/,".png")||m.dirname(d.font)+"/"+o.pages[0],L.get(a,function(){return i(a)}).then(function(r){n.mesh.visible=!0,n.texture.image=r,n.texture.needsUpdate=!0,t.emit("textfontset",{font:d.font,fontObj:o})}).catch(function(t){throw M(t),t})}).catch(function(t){throw M(t),t})},updateLayout:function(m){var g=this.el,d=this.geometry,u=g.getAttribute("geometry"),l=d.layout,c=this.mesh,y,t,r,n,o,i,a,s;if(u=g.getAttribute("geometry"),i=m.width||u&&u.width||1,n=p(m.wrapPixels,m.wrapCount,this.currentFont.widthFactor),o=i/n,r=o*(l.height+l.descender),u&&(u.width||g.setAttribute("geometry","width",i),u.height||g.setAttribute("geometry","height",r)),"left"===(y="align"===m.anchor?m.align:m.anchor))a=0;else if("right"===y)a=-1*l.width;else{if("center"!==y)throw new TypeError("Invalid text.anchor property value",y);a=-1*l.width/2}if("bottom"===(t=m.baseline))s=0;else if("top"===t)s=-1*l.height+l.ascender;else{if("center"!==t)throw new TypeError("Invalid text.baseline property value",t);s=-1*l.height/2}c.position.x=a*o,c.position.y=s*o,c.position.z=m.zOffset,c.scale.set(o,-1*o,o),this.geometry.computeBoundingSphere()},lookupFont:function(t){return A[t]},updateGeometry:function(a,o,t){a.update(f.extend({},o,{font:t,width:p(o.wrapPixels,o.wrapCount,t.widthFactor),text:o.value.toString().replace(/\\n/g,"\n").replace(/\\t/g,"\t"),lineHeight:o.lineHeight||t.common.lineHeight}))}})},{"../core/component":125,"../core/shader":134,"../lib/three":173,"../utils/":195,"load-bmfont":24,path:32,"three-bmfont-text":37}],110:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/tracked-controls"),p=t("../lib/three"),i=t("../constants").DEFAULT_CAMERA_HEIGHT,d=t("../constants").DEFAULT_HANDEDNESS,c={x:.175,y:-.3,z:-.03},m={x:0,y:0,z:-.175};r.exports.Component=a("tracked-controls",{schema:{controller:{default:0},id:{type:"string",default:""},hand:{type:"string",default:""},idPrefix:{type:"string",default:""},rotationOffset:{default:0},armModel:{default:!0},headElement:{type:"selector"}},init:function(){this.axis=[0,0,0],this.buttonStates={},this.targetControllerNumber=this.data.controller,this.dolly=new p.Object3D,this.controllerEuler=new p.Euler,this.controllerEuler.order="YXZ",this.controllerPosition=new p.Vector3,this.controllerQuaternion=new p.Quaternion,this.deltaControllerPosition=new p.Vector3,this.position=new p.Vector3,this.rotation={},this.standingMatrix=new p.Matrix4,this.previousControllerPosition=new p.Vector3,this.updateGamepad()},tick:function(r,t){var a=this.el.getObject3D("mesh");a&&a.update&&a.update(t/1e3),this.updateGamepad(),this.updatePose(),this.updateButtons()},defaultUserHeight:function(){return i},getHeadElement:function(){return this.data.headElement||this.el.sceneEl.camera.el},updateGamepad:function(){var r=this.data,t=o.findMatchingController(this.system.controllers,r.id,r.idPrefix,r.hand,r.controller);this.controller=t},applyArmModel:function(p){var t=this.controller,a=this.controllerEuler,l=this.controllerQuaternion,g=this.deltaControllerPosition,u,h,o,i,r,n;o=this.getHeadElement(),i=o.object3D,h=o.components.camera,n=(h?h.data.userHeight:0)||this.defaultUserHeight(),r=t.pose,u=(t?t.hand:void 0)||d,p.copy(i.position),g.set(c.x*("left"===u?-1:"right"===u?1:0),c.y,c.z),g.multiplyScalar(n),g.applyAxisAngle(i.up,i.rotation.y),p.add(g),g.set(m.x,m.y,m.z),g.multiplyScalar(n),r.orientation?l.fromArray(r.orientation):l.copy(i.quaternion),a.setFromQuaternion(l),a.set(a.x,a.y,0),g.applyEuler(a),p.add(g)},updatePose:function(){var m=this.controller,o=this.controllerEuler,i=this.controllerPosition,r=this.previousControllerPosition,n=this.dolly,s=this.el,a=this.standingMatrix,l=this.system.vrDisplay,g=this.getHeadElement(),u=g.components.camera,d=(u?u.data.userHeight:0)||this.defaultUserHeight(),c,t;m&&(t=m.pose,null!==t.orientation&&n.quaternion.fromArray(t.orientation),null===t.position?this.data.armModel&&this.applyArmModel(n.position):n.position.fromArray(t.position),null!=t.position&&l?l.stageParameters?(a.fromArray(l.stageParameters.sittingToStandingTransform),n.matrix.compose(n.position,n.quaternion,n.scale),n.matrix.multiplyMatrices(a,n.matrix)):(n.position.y+=d,n.matrix.compose(n.position,n.quaternion,n.scale)):n.matrix.compose(n.position,n.quaternion,n.scale),o.setFromRotationMatrix(n.matrix),i.setFromMatrixPosition(n.matrix),this.rotation.x=p.Math.radToDeg(o.x),this.rotation.y=p.Math.radToDeg(o.y),this.rotation.z=p.Math.radToDeg(o.z)+this.data.rotationOffset,s.setAttribute("rotation",this.rotation),c=s.getAttribute("position"),this.position.copy(c).sub(r).add(i),s.setAttribute("position",this.position),r.copy(i))},updateButtons:function(){var r=this.controller,a,t;if(r){for(t=0;t<r.buttons.length;++t)this.buttonStates[t]||(this.buttonStates[t]={pressed:!1,touched:!1,value:0}),a=r.buttons[t],this.handleButton(t,a);this.handleAxes()}},handleButton:function(r,a){return!!(this.handlePress(r,a)||this.handleTouch(r,a)||this.handleValue(r,a))&&(this.el.emit("buttonchanged",{id:r,state:a}),!0)},handleAxes:function(){var a=!1,n=this.controller.axes,o=this.axis,i=[],s;for(s=0;s<n.length;++s)i.push(o[s]!==n[s]),i[s]&&(a=!0);return!!a&&(this.axis=n.slice(),this.el.emit("axismove",{axis:this.axis,changed:i}),!0)},handlePress:function(r,a){var n=this.buttonStates[r],i;return a.pressed!==n.pressed&&(i=a.pressed?"down":"up",this.el.emit("button"+i,{id:r,state:a}),n.pressed=a.pressed,!0)},handleTouch:function(r,a){var n=this.buttonStates[r],i;return a.touched!==n.touched&&(i=a.touched?"start":"end",this.el.emit("touch"+i,{id:r,state:a},!0,{touches:[]}),n.touched=a.touched,!0)},handleValue:function(r,t){var a=this.buttonStates[r];return t.value!==a.value&&(a.value=t.value,!0)}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/tracked-controls":199}],111:[function(t,r){var a=t("../core/component").registerComponent;r.exports.Component=a("visible",{schema:{default:!0},update:function(){this.el.object3D.visible=this.data}})},{"../core/component":125}],112:[function(t,r){var a=t("../core/component").registerComponent,o=t("../utils/"),i=o.bind,n=o.trackedControls.checkControllerPresentAndSetup,s=o.trackedControls.emitIfAxesChanged,l="OpenVR ";r.exports.Component=a("vive-controls",{schema:{hand:{default:"left"},buttonColor:{type:"color",default:"#FAFAFA"},buttonHighlightColor:{type:"color",default:"#22D1EE"},model:{default:!0},rotationOffset:{default:0}},mapping:{axes:{trackpad:[0,1]},buttons:["trackpad","trigger","grip","menu","system"]},init:function(){var r=this;this.animationActive="pointing",this.checkControllerPresentAndSetup=n,this.controllerPresent=!1,this.emitIfAxesChanged=s,this.lastControllerCheck=0,this.onButtonChanged=i(this.onButtonChanged,this),this.onButtonDown=function(t){r.onButtonEvent(t.detail.id,"down")},this.onButtonUp=function(t){r.onButtonEvent(t.detail.id,"up")},this.onButtonTouchEnd=function(t){r.onButtonEvent(t.detail.id,"touchend")},this.onButtonTouchStart=function(t){r.onButtonEvent(t.detail.id,"touchstart")},this.onAxisMoved=i(this.onAxisMoved,this),this.previousButtonValues={},this.bindMethods()},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},bindMethods:function(){this.onModelLoaded=i(this.onModelLoaded,this),this.onControllersUpdate=i(this.onControllersUpdate,this),this.checkIfControllerPresent=i(this.checkIfControllerPresent,this),this.removeControllersUpdateListener=i(this.removeControllersUpdateListener,this),this.onAxisMoved=i(this.onAxisMoved,this)},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("model-loaded",this.onModelLoaded),r.addEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("model-loaded",this.onModelLoaded),r.removeEventListener("axismove",this.onAxisMoved),this.controllerEventsActive=!1},checkIfControllerPresent:function(){var r=this.data,t="right"===r.hand?0:"left"===r.hand?1:2;this.checkControllerPresentAndSetup(this,l,{index:t})},injectTrackedControls:function(){var r=this.el,t=this.data;r.setAttribute("tracked-controls",{idPrefix:l,controller:"right"===t.hand?0:"left"===t.hand?1:2,rotationOffset:t.rotationOffset}),this.data.model&&this.el.setAttribute("obj-model",{obj:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.obj",mtl:"https://cdn.aframe.io/controllers/vive/vr_controller_vive.mtl"})},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id],a=this.buttonMeshes,o;t&&("trigger"===t&&(o=r.detail.state.value,a&&a.trigger&&(a.trigger.rotation.x=-o*(Or/12))),this.el.emit(t+"changed",r.detail.state))},onModelLoaded:function(r){var t=r.detail.model,a=this,o;this.data.model&&(o=this.buttonMeshes={},o.grip={left:t.getObjectByName("leftgrip"),right:t.getObjectByName("rightgrip")},o.menu=t.getObjectByName("menubutton"),o.system=t.getObjectByName("systembutton"),o.trackpad=t.getObjectByName("touchpad"),o.trigger=t.getObjectByName("trigger"),Object.keys(o).forEach(function(r){a.setButtonColor(r,a.data.buttonColor)}),t.position.set(0,-.015,.04))},onAxisMoved:function(r){this.emitIfAxesChanged(this,this.mapping.axes,r)},onButtonEvent:function(r,t){var a=this.mapping.buttons[r],i=-1!==t.indexOf("touch"),l,n;if(Array.isArray(a))for(n=0;n<a.length;n++)this.el.emit(a[n]+t);else this.el.emit(a+t);if(this.data.model&&!i)if(l="up"===t?this.data.buttonColor:this.data.buttonHighlightColor,Array.isArray(a))for(n=0;n<a.length;n++)this.setButtonColor(a[n],l);else this.setButtonColor(a,l)},setButtonColor:function(r,t){var a=this.buttonMeshes;if(a)return"grip"===r?(a.grip.left.material.color.set(t),void a.grip.right.material.color.set(t)):void a[r].material.color.set(t)}})},{"../core/component":125,"../utils/":195}],113:[function(t,r){function l(r){for(var a in r)return!1;return!0}var a=t("../constants").keyboardevent.KEYCODE_TO_CODE,o=t("../core/component").registerComponent,d=t("../lib/three"),i=t("../utils/"),n=i.bind,s=i.shouldCaptureKeyEvent,c=1e-5,p=["KeyW","KeyA","KeyS","KeyD","ArrowUp","ArrowLeft","ArrowRight","ArrowDown"];r.exports.Component=o("wasd-controls",{schema:{acceleration:{default:65},adAxis:{default:"x",oneOf:["x","y","z"]},adEnabled:{default:!0},adInverted:{default:!1},easing:{default:20},enabled:{default:!0},fly:{default:!1},wsAxis:{default:"z",oneOf:["x","y","z"]},wsEnabled:{default:!0},wsInverted:{default:!1}},init:function(){this.keys={},this.position={},this.velocity=new d.Vector3,this.onBlur=n(this.onBlur,this),this.onFocus=n(this.onFocus,this),this.onKeyDown=n(this.onKeyDown,this),this.onKeyUp=n(this.onKeyUp,this),this.onVisibilityChange=n(this.onVisibilityChange,this),this.attachVisibilityEventListeners()},tick:function(d,c){var t=this.data,s=this.el,o=this.position,r=this.velocity,a,i;(r[t.adAxis]||r[t.wsAxis]||!l(this.keys))&&(c/=1e3,this.updateVelocity(c),(r[t.adAxis]||r[t.wsAxis])&&(a=s.getAttribute("position"),i=this.getMovementVector(c),o.x=a.x+i.x,o.y=a.y+i.y,o.z=a.z+i.z,s.setAttribute("position",o)))},remove:function(){this.removeKeyEventListeners(),this.removeVisibilityEventListeners()},play:function(){this.attachKeyEventListeners()},pause:function(){this.keys={},this.removeKeyEventListeners()},updateVelocity:function(l){var p=this.data,r=this.keys,a=this.velocity,d,t,i,n,s;return(t=p.adAxis,n=p.wsAxis,l>.2)?(a[t]=0,void(a[n]=0)):void(0!==a[t]&&(a[t]-=a[t]*p.easing*l),0!==a[n]&&(a[n]-=a[n]*p.easing*l),D(a[t])<c&&(a[t]=0),D(a[n])<c&&(a[n]=0),p.enabled&&(d=p.acceleration,p.adEnabled&&(i=p.adInverted?-1:1,(r.KeyA||r.ArrowLeft)&&(a[t]-=i*d*l),(r.KeyD||r.ArrowRight)&&(a[t]+=i*d*l)),p.wsEnabled&&(s=p.wsInverted?-1:1,(r.KeyW||r.ArrowUp)&&(a[n]-=s*d*l),(r.KeyS||r.ArrowDown)&&(a[n]+=s*d*l))))},getMovementVector:function(){var r=new d.Vector3(0,0,0),a=new d.Euler(0,0,0,"YXZ");return function(t){var i=this.el.getAttribute("rotation"),s=this.velocity,o;return r.copy(s),r.multiplyScalar(t),i?(o=this.data.fly?i.x:0,a.set(d.Math.degToRad(o),d.Math.degToRad(i.y),0),r.applyEuler(a),r):r}}(),attachVisibilityEventListeners:function(){window.addEventListener("blur",this.onBlur),window.addEventListener("focus",this.onFocus),document.addEventListener("visibilitychange",this.onVisibilityChange)},removeVisibilityEventListeners:function(){window.removeEventListener("blur",this.onBlur),window.removeEventListener("focus",this.onFocus),document.removeEventListener("visibilitychange",this.onVisibilityChange)},attachKeyEventListeners:function(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp)},removeKeyEventListeners:function(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)},onBlur:function(){this.pause()},onFocus:function(){this.play()},onVisibilityChange:function(){document.hidden?this.onBlur():this.onFocus()},onKeyDown:function(r){var o;s(r)&&(o=r.code||a[r.keyCode],-1!==p.indexOf(o)&&(this.keys[o]=!0))},onKeyUp:function(r){var o;o=r.code||a[r.keyCode],delete this.keys[o]}})},{"../constants":116,"../core/component":125,"../lib/three":173,"../utils/":195}],114:[function(t,r){var a=t("../utils/bind"),o=t("../core/component").registerComponent,i=t("../utils/tracked-controls"),n=t("../utils/"),l=n.debug("components:windows-motion-controls:debug"),d=n.debug("components:windows-motion-controls:warn"),s=t("../constants").DEFAULT_HANDEDNESS,c={left:"left.glb",right:"right.glb",default:"universal.glb"},p="Spatial Controller (Spatial Interaction Source) ",u=/([0-9a-zA-Z]+-[0-9a-zA-Z]+)$/;r.exports.Component=o("windows-motion-controls",{schema:{hand:{default:s},pair:{default:0},model:{default:!0},hideDisconnected:{default:!0}},mapping:{axes:{thumbstick:[0,1],trackpad:[2,3]},buttons:["thumbstick","trigger","grip","menu","trackpad"],axisMeshNames:["THUMBSTICK_X","THUMBSTICK_Y","TOUCHPAD_TOUCH_X","TOUCHPAD_TOUCH_Y"],buttonMeshNames:{trigger:"SELECT",menu:"MENU",grip:"GRASP",thumbstick:"THUMBSTICK_PRESS",trackpad:"TOUCHPAD_PRESS"},pointingPoseMeshName:"POINTING_POSE"},bindMethods:function(){this.onModelError=a(this.onModelError,this),this.onModelLoaded=a(this.onModelLoaded,this),this.onControllersUpdate=a(this.onControllersUpdate,this),this.checkIfControllerPresent=a(this.checkIfControllerPresent,this),this.onAxisMoved=a(this.onAxisMoved,this)},init:function(){var r=this,t=this.el;this.onButtonChanged=a(this.onButtonChanged,this),this.onButtonDown=function(t){r.onButtonEvent(t,"down")},this.onButtonUp=function(t){r.onButtonEvent(t,"up")},this.onButtonTouchStart=function(t){r.onButtonEvent(t,"touchstart")},this.onButtonTouchEnd=function(t){r.onButtonEvent(t,"touchend")},this.onControllerConnected=function(){r.setModelVisibility(!0)},this.onControllerDisconnected=function(){r.setModelVisibility(!1)},this.controllerPresent=!1,this.lastControllerCheck=0,this.previousButtonValues={},this.bindMethods(),this.loadedMeshInfo={buttonMeshes:null,axisMeshes:null},this.rayOrigin={origin:new THREE.Vector3,direction:new THREE.Vector3(0,0,-1),createdFromMesh:!1},this.emitIfAxesChanged=i.emitIfAxesChanged,this.checkControllerPresentAndSetup=i.checkControllerPresentAndSetup,t.addEventListener("controllerconnected",this.onControllerConnected),t.addEventListener("controllerdisconnected",this.onControllerDisconnected)},addEventListeners:function(){var r=this.el;r.addEventListener("buttonchanged",this.onButtonChanged),r.addEventListener("buttondown",this.onButtonDown),r.addEventListener("buttonup",this.onButtonUp),r.addEventListener("touchstart",this.onButtonTouchStart),r.addEventListener("touchend",this.onButtonTouchEnd),r.addEventListener("axismove",this.onAxisMoved),r.addEventListener("model-error",this.onModelError),r.addEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!0},removeEventListeners:function(){var r=this.el;r.removeEventListener("buttonchanged",this.onButtonChanged),r.removeEventListener("buttondown",this.onButtonDown),r.removeEventListener("buttonup",this.onButtonUp),r.removeEventListener("touchstart",this.onButtonTouchStart),r.removeEventListener("touchend",this.onButtonTouchEnd),r.removeEventListener("axismove",this.onAxisMoved),r.removeEventListener("model-error",this.onModelError),r.removeEventListener("model-loaded",this.onModelLoaded),this.controllerEventsActive=!1},checkIfControllerPresent:function(){this.checkControllerPresentAndSetup(this,p,{hand:this.data.hand,index:this.data.pair})},play:function(){this.checkIfControllerPresent(),this.addControllersUpdateListener()},pause:function(){this.removeEventListeners(),this.removeControllersUpdateListener()},updateControllerModel:function(){if(!this.data.model||this.rayOrigin.createdFromMesh)return void this.modelReady();var r=this.createControllerModelUrl();this.loadModel(r)},createControllerModelUrl:function(a){var l=this.el.components["tracked-controls"],n=l?l.controller:null,o="default",i=this.data.hand,s;if(n&&(i=n.hand,!a)){var d=n.id.match(u);o=d&&d[0]||o}return s=c[i]||c.default,"https://cdn.aframe.io/controllers/microsoft/"+o+"/"+s},injectTrackedControls:function(){var r=this.data;this.el.setAttribute("tracked-controls",{idPrefix:p,controller:r.pair,hand:r.hand,armModel:!1}),this.updateControllerModel()},addControllersUpdateListener:function(){this.el.sceneEl.addEventListener("controllersupdated",this.onControllersUpdate,!1)},removeControllersUpdateListener:function(){this.el.sceneEl.removeEventListener("controllersupdated",this.onControllersUpdate,!1)},onControllersUpdate:function(){this.checkIfControllerPresent()},onModelError:function(r){var t=this.createControllerModelUrl(!0);r.detail.src===t?d("Failed to load default controller model."):(d("Failed to load controller model for device, attempting to load default."),this.loadModel(t))},loadModel:function(r){this.el.setAttribute("gltf-model","url("+r+")")},onModelLoaded:function(c){function t(r,t){for(var a=0,n=r.children.length,o;a<n;a++)if(o=r.children[a],o&&o.name===t)return o}var p=this.controllerModel=c.detail.model,r=this.loadedMeshInfo,a,u,o,i;if(l("Processing model"),r.buttonMeshes={},r.axisMeshes={},p){for(a=0;a<this.mapping.buttons.length;a++)u=this.mapping.buttonMeshNames[this.mapping.buttons[a]],u?(o=p.getObjectByName(u),o?(i={index:a,value:t(o,"VALUE"),pressed:t(o,"PRESSED"),unpressed:t(o,"UNPRESSED")},i.value&&i.pressed&&i.unpressed?r.buttonMeshes[this.mapping.buttons[a]]=i:d("Missing button submesh under mesh with name: "+u+"(VALUE: "+!!i.value+", PRESSED: "+!!i.pressed+", UNPRESSED:"+!!i.unpressed+")")):d("Missing button mesh with name: "+u)):l("Skipping unknown button at index: "+a+" with mapped name: "+this.mapping.buttons[a]);for(a=0;a<this.mapping.axisMeshNames.length;a++)u=this.mapping.axisMeshNames[a],u?(o=p.getObjectByName(u),o?(i={index:a,value:t(o,"VALUE"),min:t(o,"MIN"),max:t(o,"MAX")},i.value&&i.min&&i.max?r.axisMeshes[a]=i:d("Missing axis submesh under mesh with name: "+u+"(VALUE: "+!!i.value+", MIN: "+!!i.min+", MAX:"+!!i.max+")")):d("Missing axis mesh with name: "+u)):l("Skipping unknown axis at index: "+a);this.calculateRayOriginFromMesh(p),this.setModelVisibility()}l("Model load complete.")},calculateRayOriginFromMesh:function(){var r=new THREE.Quaternion;return function(t){var a;if(this.rayOrigin.origin.set(0,0,0),this.rayOrigin.direction.set(0,0,-1),this.rayOrigin.createdFromMesh=!0,a=t.getObjectByName(this.mapping.pointingPoseMeshName)){var i=t.parent;i&&(t.parent=null,t.updateMatrixWorld(!0),t.parent=i),a.getWorldPosition(this.rayOrigin.origin),a.getWorldQuaternion(r),this.rayOrigin.direction.applyQuaternion(r),i&&t.updateMatrixWorld(!0)}else l("Mesh does not contain pointing origin data, defaulting to none.");this.modelReady()}}(),lerpAxisTransform:function(){var l=new THREE.Quaternion;return function(t,d){var n=this.loadedMeshInfo.axisMeshes[t];if(n){var o=n.min,i=n.max,s=n.value,r=.5*d+.5;s.setRotationFromQuaternion(l.copy(o.quaternion).slerp(i.quaternion,r)),s.position.lerpVectors(o.position,i.position,r)}}}(),lerpButtonTransform:function(){var a=new THREE.Quaternion;return function(t,l){var n=this.loadedMeshInfo.buttonMeshes[t];if(n){var o=n.unpressed,i=n.pressed,s=n.value;s.setRotationFromQuaternion(a.copy(o.quaternion).slerp(i.quaternion,l)),s.position.lerpVectors(o.position,i.position,l)}}}(),modelReady:function(){this.el.emit("controllermodelready",{name:"windows-motion-controls",model:this.data.model,rayOrigin:this.rayOrigin})},onButtonChanged:function(r){var t=this.mapping.buttons[r.detail.id];t&&(this.loadedMeshInfo&&this.loadedMeshInfo.buttonMeshes&&this.lerpButtonTransform(t,r.detail.state.value),this.el.emit(t+"changed",r.detail.state))},onButtonEvent:function(r,t){var a=this.mapping.buttons[r.detail.id];l("onButtonEvent("+r.detail.id+", "+t+")"),a&&this.el.emit(a+t)},onAxisMoved:function(r){var t=this.mapping.axisMeshNames.length;if(this.loadedMeshInfo&&this.loadedMeshInfo.axisMeshes)for(var a=0;a<t;a++)this.lerpAxisTransform(a,r.detail.axis[a]||0);this.emitIfAxesChanged(this,this.mapping.axes,r)},setModelVisibility:function(r){var t=this.el.getObject3D("mesh");r=void 0===r?this.modelVisible:r,this.modelVisible=r,t&&(t.visible=r)}})},{"../constants":116,"../core/component":125,"../utils/":195,"../utils/bind":189,"../utils/tracked-controls":199}],115:[function(t,r){var a=t("@tweenjs/tween.js"),o={alternate:"alternate",alternateReverse:"alternate-reverse",normal:"normal",reverse:"reverse"},i={linear:a.Easing.Linear.None,ease:a.Easing.Cubic.InOut,"ease-in":a.Easing.Cubic.In,"ease-out":a.Easing.Cubic.Out,"ease-in-out":a.Easing.Cubic.InOut,"ease-cubic":a.Easing.Cubic.In,"ease-in-cubic":a.Easing.Cubic.In,"ease-out-cubic":a.Easing.Cubic.Out,"ease-in-out-cubic":a.Easing.Cubic.InOut,"ease-quad":a.Easing.Quadratic.InOut,"ease-in-quad":a.Easing.Quadratic.In,"ease-out-quad":a.Easing.Quadratic.Out,"ease-in-out-quad":a.Easing.Quadratic.InOut,"ease-quart":a.Easing.Quartic.InOut,"ease-in-quart":a.Easing.Quartic.In,"ease-out-quart":a.Easing.Quartic.Out,"ease-in-out-quart":a.Easing.Quartic.InOut,"ease-quint":a.Easing.Quintic.InOut,"ease-in-quint":a.Easing.Quintic.In,"ease-out-quint":a.Easing.Quintic.Out,"ease-in-out-quint":a.Easing.Quintic.InOut,"ease-sine":a.Easing.Sinusoidal.InOut,"ease-in-sine":a.Easing.Sinusoidal.In,"ease-out-sine":a.Easing.Sinusoidal.Out,"ease-in-out-sine":a.Easing.Sinusoidal.InOut,"ease-expo":a.Easing.Exponential.InOut,"ease-in-expo":a.Easing.Exponential.In,"ease-out-expo":a.Easing.Exponential.Out,"ease-in-out-expo":a.Easing.Exponential.InOut,"ease-circ":a.Easing.Circular.InOut,"ease-in-circ":a.Easing.Circular.In,"ease-out-circ":a.Easing.Circular.Out,"ease-in-out-circ":a.Easing.Circular.InOut,"ease-elastic":a.Easing.Elastic.InOut,"ease-in-elastic":a.Easing.Elastic.In,"ease-out-elastic":a.Easing.Elastic.Out,"ease-in-out-elastic":a.Easing.Elastic.InOut,"ease-back":a.Easing.Back.InOut,"ease-in-back":a.Easing.Back.In,"ease-out-back":a.Easing.Back.Out,"ease-in-out-back":a.Easing.Back.InOut,"ease-bounce":a.Easing.Bounce.InOut,"ease-in-bounce":a.Easing.Bounce.In,"ease-out-bounce":a.Easing.Bounce.Out,"ease-in-out-bounce":a.Easing.Bounce.InOut},n={backwards:"backwards",both:"both",forwards:"forwards",none:"none"},s={attribute:"rotation",begin:"",end:"",delay:0,dur:1e3,easing:"ease",direction:o.normal,fill:n.forwards,from:void 0,repeat:0,to:void 0};r.exports.defaults=s,r.exports.directions=o,r.exports.easingFunctions=i,r.exports.fills=n,r.exports.repeats={indefinite:"indefinite"}},{"@tweenjs/tween.js":1}],116:[function(t,r){r.exports={AFRAME_INJECTED:"aframe-injected",DEFAULT_CAMERA_HEIGHT:1.6,DEFAULT_HANDEDNESS:"right",animation:t("./animation"),keyboardevent:t("./keyboardevent")}},{"./animation":115,"./keyboardevent":117}],117:[function(t,r){r.exports={KEYCODE_TO_CODE:{37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",65:"KeyA",68:"KeyD",83:"KeyS",87:"KeyW"}}},{}],118:[function(t,r){function m(r){return p.extend({},r)}function g(m,t,g,i,n){function f(){h=new M.Color(g||m.getAttribute(t)),A=new M.Color(i),l=function(r){1<x.length&&m.setAttribute(x[0],x[1],s(r)),m.setAttribute(t,s(r))}}var x=t.split("."),h={},A={},T,b,r,L,l;return 2===x.length?function(){var t=x[0],r=x[1],o=m.components[t],i=o&&o.schema;return i&&i[r]&&"color"===i[r].type}()?f():function(){L=x[0],r=x[1],b=m.components[L],b||(m.setAttribute(L,""),b=m.components[L]),T=b.schema,h[t]=void 0===g?E(m,t):g,h[t]=y(h[t],T[r]),A[t]=y(i,T[r]),l=function(a){t in a&&m.setAttribute(L,r,a[t])}}():i&&v(i)?function(){h=g?u.parse(g):n,A=u.parse(i),l=function(r){m.setAttribute(t,r)}}():-1===["true","false"].indexOf(i)?isNaN(i)?f():function(){h[t]=void 0===g?parseFloat(m.getAttribute(t)):parseFloat(g),A[t]=parseFloat(i),l=function(r){m.setAttribute(t,r[t])}}():function(){h[t]=void 0!==g&&a(g),h[t]=o(h[t]),A[t]=o(a(i)),l=function(r){m.setAttribute(t,!!r[t])}}(),{from:h,partialSetAttribute:l,to:A}}function a(r){return"true"===r}function o(r){return r?1:0}function i(r){var t=r.toString(16);return 1===t.length?"0"+t:t}function n(r){return C(255*N(D(r),1))}function s(r){return"#"+["r","g","b"].map(function(t){return i(n(r[t]))}).join("")}var l=t("./a-node"),d=t("../constants/animation"),u=t("../utils/").coordinates,y=t("./schema").parseProperty,c=t("./a-register-element").registerElement,f=t("@tweenjs/tween.js"),M=t("../lib/three"),p=t("../utils/"),x=p.bind,E=p.entity.getComponentProperty,h=d.defaults,A=d.directions,T=d.easingFunctions,b=d.fills,L=d.repeats,v=u.isCoordinates;r.exports.AAnimation=c("a-animation",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.bindMethods(),this.isRunning=!1,this.partialSetAttribute=function(){},this.tween=null}},attachedCallback:{value:function(){this.el=this.parentNode,this.handleMixinUpdate(),this.update(),this.load()}},attributeChangedCallback:{value:function(){this.hasLoaded&&this.isRunning&&(this.stop(),this.handleMixinUpdate(),this.update())}},detachedCallback:{value:function(){this.isRunning&&this.stop()}},getTween:{value:function(){var y=this,a=y.data,o=y.el,s=a.attribute,r=parseInt(a.delay,10),u=E(o,s),l=y.getDirection(a.direction),d=T[a.easing],h=a.fill,c=a.repeat===L.indefinite?1/0:0,p=!1,M,t,v,i;return M=g(o,s,a.from||y.initialValue,a.to,u),t=M.from,v=M.to,y.partialSetAttribute=M.partialSetAttribute,void 0===y.count&&(y.count=c===1/0?0:parseInt(a.repeat,10)),isNaN(r)&&(r=0),y.initialValue=y.initialValue||m(u),c===1/0&&h===b.forwards&&-1!==[A.alternate,A.alternateReverse].indexOf(a.direction)&&(p=!0),l===A.reverse&&(i=v,v=m(t),t=m(i)),-1!==[b.backwards,b.both].indexOf(h)&&y.partialSetAttribute(t),new f.Tween(m(t)).to(v,a.dur).delay(r).easing(d).repeat(c).yoyo(p).onUpdate(function(){y.partialSetAttribute(this)}).onComplete(x(y.onCompleted,y))}},update:{value:function(){var r=this.data;"infinite"===r.repeat&&console.warn("Using 'infinite' as 'repeat' value is invalid.  Use 'indefinite' instead."),""===r.begin||isNaN(r.begin)||(console.warn("Using 'begin' to specify a delay is deprecated. Use 'delay' instead."),r.delay=r.begin,r.begin="");var t=r.begin,a=r.end;this.evt&&this.removeEventListeners(this.evt),this.evt={begin:t,end:a},this.addEventListeners(this.evt),""===t&&(this.stop(),this.start())},writable:window.debug},onCompleted:{value:function(){var r=this.data;return(this.isRunning=!1,-1!==[b.backwards,b.none].indexOf(r.fill)&&this.partialSetAttribute(this.initialValue),0===this.count)?(this.count=void 0,void this.emit("animationend")):void(this.isRunning=!1,this.count--,this.start())}},start:{value:function(){var r=this;return this.el.hasLoaded?void(!this.isRunning&&this.el.isPlaying&&(this.tween=this.getTween(),this.isRunning=!0,this.tween.start(),this.emit("animationstart"))):void this.el.addEventListener("loaded",function(){r.start()})},writable:!0},stop:{value:function(){var r=this.tween;r&&(r.stop(),this.isRunning=!1,-1!==[b.backwards,b.none].indexOf(this.data.fill)&&this.partialSetAttribute(this.initialValue),this.emit("animationstop"))},writable:!0},getDirection:{value:function(r){return r===A.alternate?(this.prevDirection=this.prevDirection===A.normal?A.reverse:A.normal,this.prevDirection):r===A.alternateReverse?(this.prevDirection=this.prevDirection===A.reverse?A.normal:A.reverse,this.prevDirection):r}},bindMethods:{value:function(){this.start=x(this.start,this),this.stop=x(this.stop,this),this.onStateAdded=x(this.onStateAdded,this),this.onStateRemoved=x(this.onStateRemoved,this)}},addEventListeners:{value:function(r){var a=this.el,o=this;p.splitString(r.begin).forEach(function(r){a.addEventListener(r,o.start)}),p.splitString(r.end).forEach(function(r){a.addEventListener(r,o.stop)}),""===r.begin&&a.addEventListener("play",this.start),a.addEventListener("pause",this.stop),a.addEventListener("stateadded",this.onStateAdded),a.addEventListener("stateremoved",this.onStateRemoved)}},removeEventListeners:{value:function(r){var a=this.el,o=this.start,i=this.stop;p.splitString(r.begin).forEach(function(r){a.removeEventListener(r,o)}),p.splitString(r.end).forEach(function(r){a.removeEventListener(r,i)}),a.removeEventListener("stateadded",this.onStateAdded),a.removeEventListener("stateremoved",this.onStateRemoved)}},onStateAdded:{value:function(r){r.detail.state===this.data.begin&&this.start()},writable:!0},onStateRemoved:{value:function(r){r.detail.state===this.data.begin&&this.stop()},writable:!0},handleMixinUpdate:{value:function(){var r={},a,t,o;o=document.querySelector("#"+this.getAttribute("mixin")),t=o?p.getElData(o,h):{},a=p.getElData(this,h),p.extend(r,h,t,a),this.data=r}}})}),r.exports.getAnimationValues=g},{"../constants/animation":115,"../lib/three":173,"../utils/":195,"./a-node":123,"./a-register-element":124,"./schema":133,"@tweenjs/tween.js":1}],119:[function(t,r){function o(a){if(a.hasAttribute("autoplay")||"auto"===a.getAttribute("preload"))return new Promise(function(o,t){function r(){for(var t=0,r=0;r<a.buffered.length;r++)t+=a.buffered.end(r)-a.buffered.start(r);t>=a.duration&&(u.Cache.files[a.getAttribute("src")]=a,o())}return 4===a.readyState?o():a.error?t():(a.addEventListener("loadeddata",r,!1),a.addEventListener("progress",r,!1),void a.addEventListener("error",t,!1))})}function n(r){var o=a(r);return o.tagName&&"video"===o.tagName.toLowerCase()&&(o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline","")),o!==r&&(r.parentNode.appendChild(o),r.parentNode.removeChild(r)),o}function a(r){var a;if(r.hasAttribute("crossorigin"))return r;if(null!==(a=r.getAttribute("src"))){if(-1===a.indexOf("://"))return r;if(i(a)===window.location.host)return r}return g("Cross-origin element (e.g., <img>) was requested without `crossorigin` set. A-Frame will re-request the asset with `crossorigin` attribute set. Please set `crossorigin` on the element (e.g., <img crossorigin=\"anonymous\">)",a),r.crossOrigin="anonymous",r.cloneNode(!0)}function i(t){return(-1<t.indexOf("://")?t.split("/")[2]:t.split("/")[0]).split(":")[0]}function s(a){var o=a.lastIndexOf(".");if(0<=o){var t=a.slice(o,a.length);if(".gltf"===t||".glb"===t)return"arraybuffer"}return"text"}var l=t("./a-node"),d=t("../utils/bind"),c=t("../utils/debug"),p=t("./a-register-element").registerElement,u=t("../lib/three"),m=new u.FileLoader,g=c("core:a-assets:warn");r.exports=p("a-assets",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.isAssets=!0,this.fileLoader=m,this.timeout=null}},attachedCallback:{value:function(){var l=this,s=[],a,c,t,p,i,r;if(!this.parentNode.isScene)throw new Error("<a-assets> must be a child of a <a-scene>.");for(i=this.querySelectorAll("img"),a=0;a<i.length;a++)p=n(i[a]),s.push(new Promise(function(o,t){u.Cache.files[i[a].getAttribute("src")]=p,p.onload=o,p.onerror=t}));for(t=this.querySelectorAll("audio, video"),a=0;a<t.length;a++)c=n(t[a]),s.push(o(c));Promise.all(s).then(d(this.load,this)),r=parseInt(this.getAttribute("timeout"),10)||3e3,this.timeout=setTimeout(function(){l.hasLoaded||(g("Asset loading timed out in ",r,"ms"),l.emit("timeout"),l.load())},r)}},detachedCallback:{value:function(){this.timeout&&clearTimeout(this.timeout)}},load:{value:function(){l.prototype.load.call(this,null,function(t){return t.isAssetItem&&t.hasAttribute("src")})}}})}),p("a-asset-item",{prototype:Object.create(l.prototype,{createdCallback:{value:function(){this.data=null,this.isAssetItem=!0}},attachedCallback:{value:function(){var r=this,a=this.getAttribute("src");m.setResponseType(this.getAttribute("response-type")||s(a)),m.load(a,function(a){r.data=a,setTimeout(function(){l.prototype.load.call(r)})},function(a){r.emit("progress",{loadedBytes:a.loaded,totalBytes:a.total,xhr:a})},function(a){r.emit("error",{xhr:a})})}}})}),r.exports.inferResponseType=s},{"../lib/three":173,"../utils/bind":189,"../utils/debug":191,"./a-node":123,"./a-register-element":124}],120:[function(t,r){var a=t("../utils/debug"),o=t("./a-register-element").registerElement,i=a("core:cubemap:warn");r.exports=o("a-cubemap",{prototype:Object.create(window.HTMLElement.prototype,{attachedCallback:{value:function(){this.srcs=this.validate()},writable:window.debug},validate:{value:function(){var a=this.querySelectorAll("[src]"),t=[],r;if(6===a.length){for(r=0;r<a.length;r++)t.push(a[r].getAttribute("src"));return t}i("<a-cubemap> did not contain exactly six elements each with a `src` attribute.")},writable:window.debug}})})},{"../utils/debug":191,"./a-register-element":124}],121:[function(t,r){function l(r,t){return void 0!==r.defaultComponents[t]||r.components[t]&&r.components[t].attrValue||a(t,r.mixinEls)}function a(r,t){var a=!1,o;for(o=0;o<t.length&&!(a=t[o].hasAttribute(r));++o);return a}function n(r,t){return t?t.constructor===Object?u.extend(t,u.styleParser.parse(r||{})):r||t:r}function s(r){return-1!==r.indexOf(h)&&(r=r.split(h)[0]),!!c[r]}var d=t("./a-node"),c=t("./component").components,o=t("./a-register-element").registerElement,p=t("../lib/three"),u=t("../utils/"),i=u.bind,m=u.debug("core:a-entity:debug"),g=u.debug("core:a-entity:warn"),h="__",y=Object.create(d.prototype,{defaultComponents:{value:{position:"",rotation:"",scale:"",visible:""}},createdCallback:{value:function(){this.components={},this.initializingComponents={},this.isEntity=!0,this.isPlaying=!1,this.object3D=new p.Group,this.object3D.el=this,this.object3DMap={},this.parentEl=null,this.states=[]}},attributeChangedCallback:{value:function(r,t,a){var o=this.components[r];return o&&o.justInitialized&&""===a?void delete o.justInitialized:void((o||null!==a)&&this.setEntityAttribute(r,t,a))}},attachedCallback:{value:function(){var r=this.sceneEl,a=this,o;if(this.addToParent(),!this.isScene){if(!r)return void this.load();if((o=r.querySelector("a-assets"))&&!o.hasLoaded)return void o.addEventListener("loaded",function(){a.load()});this.load()}}},detachedCallback:{value:function(){if(this.parentEl){for(var r in this.components)this.removeComponent(r);this.isScene||(this.removeFromParent(),d.prototype.detachedCallback.call(this),this.object3D.el=null)}}},handleMixinUpdate:{value:function(r){return r?void this.updateComponent(r,this.getDOMAttribute(r)):void this.updateComponents()}},mapStateMixins:{value:function(r,t){var a,i,n;if(a=this.getAttribute("mixin")){for(i=a.split(" "),n=0;n<i.length;n++)t(i[n]+"-"+r);this.updateComponents()}}},updateStateMixins:{value:function(l,t){var d,i,n,o,s,a;for(i=l.split(" "),n=t?t.split(" "):[],d=n.filter(function(r){return 0>i.indexOf(r)}),o=0;o<d.length;o++)for(a=document.querySelectorAll("[id^="+d[o]+"-]"),s=0;s<a.length;s++)this.unregisterMixin(a[s].id);for(o=0;o<this.states.length;o++)for(s=0;s<i.length;s++)this.registerMixin(i[s]+"-"+this.states[o])}},getObject3D:{value:function(r){return this.object3DMap[r]}},setObject3D:{value:function(r,a){var o=this,n;if(!(a instanceof p.Object3D))throw new Error("`Entity.setObject3D` was called with an object that was not an instance of THREE.Object3D.");n=this.getObject3D(r),n&&this.object3D.remove(n),a.el=this,a.children.length&&a.traverse(function(r){r.el=o}),this.object3D.add(a),this.object3DMap[r]=a,this.emit("object3dset",{object:a,type:r})}},removeObject3D:{value:function(r){var a=this.getObject3D(r);return a?void(this.object3D.remove(a),delete this.object3DMap[r],this.emit("object3dremove",{type:r})):void g("Tried to remove `Object3D` of type:",r,"which was not defined.")}},getOrCreateObject3D:{value:function(r,t){var a=this.getObject3D(r);return!a&&t&&(a=new t,this.setObject3D(r,a)),a}},add:{value:function(r){if(!r.object3D)throw new Error("Trying to add an element that doesn't have an `object3D`");this.object3D.add(r.object3D),this.emit("child-attached",{el:r})}},addToParent:{value:function(){var r=this.parentEl=this.parentNode;r&&r.add&&!this.attachedToParent&&(r.add(this),this.attachedToParent=!0)}},removeFromParent:{value:function(){var r=this.parentEl;this.parentEl.remove(this),this.attachedToParent=!1,this.parentEl=this.parentNode=null,r.emit("child-detached",{el:this})}},load:{value:function(){var r=this;!this.hasLoaded&&this.parentEl&&d.prototype.load.call(this,function(){r.parentEl&&(r.updateComponents(),(r.isScene||r.parentEl.isPlaying)&&r.play())})},writable:window.debug},remove:{value:function(r){this.object3D.remove(r.object3D)}},getChildEntities:{value:function(){for(var r=this.children,t=[],a=0,o;a<r.length;a++)o=r[a],o instanceof f&&t.push(o);return t}},initComponent:{value:function(d,t,p){var i=d.split(h),o=i[1],s=i[0],a=l(this,d)||void 0!==t,r;if(c[s]&&(a||p)&&!(d in this.components)){if(this.initComponentDependencies(s),o&&!c[s].multiple)throw new Error("Trying to initialize multiple components of type `"+s+"`. There can only be one component of this type per entity.");r=new c[s].Component(this,t,o),this.isPlaying&&r.play(),this.hasAttribute(d)||(r.justInitialized=!0,window.HTMLElement.prototype.setAttribute.call(this,d,"")),m("Component initialized: %s",d)}},writable:window.debug},initComponentDependencies:{value:function(r){var t=this,a=c[r],o,n;if(a&&(o=c[r].dependencies))for(n=0;n<o.length;n++)t.initComponent(o[n],window.HTMLElement.prototype.getAttribute.call(t,o[n])||void 0,!0)}},removeComponent:{value:function(r){var t,o,s;if(o=r in this.defaultComponents,s=a(r,this.mixinEls),!o&&!s&&(t=this.components[r])){if(!t.initialized)return void this.addEventListener("componentinitialized",function t(a){a.detail.name===r&&(this.removeComponent(r),this.removeEventListener("componentinitialized",t))});t.pause(),t.remove(),delete this.components[r],this.emit("componentremoved",t.evtDetail)}},writable:window.debug},updateComponents:{value:function(){var r={};return function(){var t,a,i,l;if(this.hasLoaded){for(i=0;i<this.mixinEls.length;i++)for(l in this.mixinEls[i].componentCache)s(l)&&(r[l]=!0);if(this.getExtraComponents)for(l in a=this.getExtraComponents(),a)s(l)&&(r[l]=!0);for(i=0;i<this.attributes.length;++i)l=this.attributes[i].name,s(l)&&(r[l]=!0);for(l in this.defaultComponents)t=n(this.getDOMAttribute(l),a&&a[l]),this.updateComponent(l,t),delete r[l];for(l in r)t=n(this.getDOMAttribute(l),a&&a[l]),this.updateComponent(l,t),delete r[l]}}}(),writable:window.debug},updateComponent:{value:function(r,t,a){var i=this.components[r],n=r in this.defaultComponents;return i?null!==t||n?void i.updateProperties(t,a):void this.removeComponent(r):void this.initComponent(r,t,!1)}},removeAttribute:{value:function(r,t){var a=this.components[r];if(!a||void 0!==t||(this.setEntityAttribute(r,void 0,null),!this.components[r])){if(a&&void 0!==t)return void a.resetProperty(t);"mixin"===r&&this.mixinUpdate(""),window.HTMLElement.prototype.removeAttribute.call(this,r)}}},play:{value:function(){var r,t,a;if(!this.isPlaying&&this.hasLoaded){for(a in this.isPlaying=!0,this.components)this.components[a].play();for(r=this.getChildEntities(),t=0;t<r.length;t++)r[t].play();this.emit("play")}},writable:!0},pause:{value:function(){var r,t,a;if(this.isPlaying){for(a in this.isPlaying=!1,this.components)this.components[a].pause();for(r=this.getChildEntities(),t=0;t<r.length;t++)r[t].pause();this.emit("pause")}},writable:!0},setEntityAttribute:{value:function(r,t,a){return c[r]||this.components[r]?void this.updateComponent(r,a):"mixin"===r?void this.mixinUpdate(a,t):void 0}},mixinUpdate:{value:function(r,t){t=t||this.getAttribute("mixin"),this.updateMixins(r,t),this.updateStateMixins(r,t),this.updateComponents()}},setAttribute:{value:function(l,t,p){var i,n,o,s,a;return(s=l.indexOf(h),o=0<s?l.substring(0,s):l,!c[o])?(d.prototype.setAttribute.call(this,l,t),void("mixin"===l&&this.mixinUpdate(t))):void(!this.components[l]&&this.hasAttribute(l)&&this.updateComponent(l,window.HTMLElement.prototype.getAttribute.call(this,l)),void 0!==p&&"string"==typeof t&&0<t.length&&"string"==typeof u.styleParser.parse(t)?(i={},i[t]=p,n=!1):(i=t,n=!0===p),this.updateComponent(l,i,n),(a=this.sceneEl&&this.sceneEl.getAttribute("debug"))&&this.components[l].flushToDOM())},writable:window.debug},flushToDOM:{value:function(r){var t=this.components,o=this.defaultComponents,s=this.children,a,l,i;for(i in t)t[i].flushToDOM(i in o);if(r)for(l=0;l<s.length;++l)a=s[l],a.flushToDOM&&a.flushToDOM(r)}},getAttribute:{value:function(r){var t=this.components[r];return t?t.data:window.HTMLElement.prototype.getAttribute.call(this,r)},writable:window.debug},getComputedAttribute:{value:function(r){return g("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(r)}},getDOMAttribute:{value:function(r){var t=this.components[r];return t?t.attrValue:window.HTMLElement.prototype.getAttribute.call(this,r)},writable:window.debug},addState:{value:function(r){this.is(r)||(this.states.push(r),this.mapStateMixins(r,i(this.registerMixin,this)),this.emit("stateadded",{state:r}))}},removeState:{value:function(r){var a=this.states.indexOf(r);-1!==a&&(this.states.splice(a,1),this.mapStateMixins(r,i(this.unregisterMixin,this)),this.emit("stateremoved",{state:r}))}},is:{value:function(r){return-1!==this.states.indexOf(r)}}}),f;f=o("a-entity",{prototype:y}),r.exports=f},{"../lib/three":173,"../utils/":195,"./a-node":123,"./a-register-element":124,"./component":125}],122:[function(t,r){var a=t("./a-node"),o=t("./a-register-element").registerElement,s=t("./component").components;r.exports=o("a-mixin",{prototype:Object.create(a.prototype,{createdCallback:{value:function(){this.componentCache={},this.id=this.getAttribute("id")}},attributeChangedCallback:{value:function(r,t,a){this.cacheAttribute(r,a)}},attachedCallback:{value:function(){this.sceneEl=this.closestScene(),this.cacheAttributes(),this.updateEntities(),this.load()}},setAttribute:{value:function(r,t){this.cacheAttribute(r,t),window.HTMLElement.prototype.setAttribute.call(this,r,t)}},cacheAttribute:{value:function(r,t){var a=r.split("__")[0],o=s[a];o&&(void 0===t&&(t=window.HTMLElement.prototype.getAttribute.call(this,r)),this.componentCache[r]=o.parseAttrValueForCache(t))}},getAttribute:{value:function(r){return this.componentCache[r]||window.HTMLElement.prototype.getAttribute.call(this,r)}},cacheAttributes:{value:function(){var r=this.attributes,a,t;for(t=0;t<r.length;t++)a=r[t].name,this.cacheAttribute(a)}},updateEntities:{value:function(){if(this.sceneEl)for(var r=this.sceneEl.querySelectorAll("[mixin~="+this.id+"]"),t=0,a;t<r.length;t++)a=r[t],a.hasLoaded&&(a.registerMixin(this.id),Object.keys(this.componentCache).forEach(function(r){a.updateComponent(r)}))}}})})},{"./a-node":123,"./a-register-element":124,"./component":125}],123:[function(t,r){var a=t("./a-register-element").registerElement,o=t("./a-register-element").isNode,l=t("../utils/"),n=l.bind,i=l.debug("core:a-node:warn");r.exports=a("a-node",{prototype:Object.create(window.HTMLElement.prototype,{createdCallback:{value:function(){this.hasLoaded=!1,this.isNode=!0,this.mixinEls=[],this.mixinObservers={}},writable:window.debug},attachedCallback:{value:function(){var t;this.sceneEl=this.closestScene(),this.sceneEl||i("You are attempting to attach <"+this.tagName+"> outside of an A-Frame scene. Append this element to `<a-scene>` instead."),this.hasLoaded=!1,this.emit("nodeready",{},!1),(t=this.getAttribute("mixin"))&&this.updateMixins(t)},writable:window.debug},attributeChangedCallback:{value:function(r,a,t){"mixin"===r&&this.updateMixins(t,a)}},closestScene:{value:function(){for(var t=this;t&&!t.isScene;)t=t.parentElement;return t}},closest:{value:function(r){for(var a=this.matches||this.mozMatchesSelector||this.msMatchesSelector||this.oMatchesSelector||this.webkitMatchesSelector,t=this;t&&!a.call(t,r);)t=t.parentElement;return t}},detachedCallback:{value:function(){this.hasLoaded=!1}},load:{value:function(r,a){var t=this,s,i;this.hasLoaded||(a=a||o,s=this.getChildren(),i=s.filter(a).map(function(r){return new Promise(function(a){return r.hasLoaded?a():void r.addEventListener("loaded",a)})}),Promise.all(i).then(function(){t.hasLoaded=!0,r&&r(),t.emit("loaded",void 0,!1)}))},writable:!0},getChildren:{value:function(){return Array.prototype.slice.call(this.children,0)}},updateMixins:{value:function(r,a){var t=r?r.trim().split(/\s+/):[];(a?a.trim().split(/\s+/):[]).filter(function(r){return 0>t.indexOf(r)}).forEach(n(this.unregisterMixin,this)),this.mixinEls=[],t.forEach(n(this.registerMixin,this))}},registerMixin:{value:function(r){if(this.sceneEl){var a=this.sceneEl.querySelector("a-mixin#"+r);a&&(this.attachMixinListener(a),this.mixinEls.push(a))}}},setAttribute:{value:function(r,a){"mixin"===r&&this.updateMixins(a),window.HTMLElement.prototype.setAttribute.call(this,r,a)}},unregisterMixin:{value:function(r){var a=this.mixinEls,o,t;for(t=0;t<a.length;++t)if(o=a[t],r===o.id){a.splice(t,1);break}this.removeMixinListener(r)}},removeMixinListener:{value:function(r){var a=this.mixinObservers[r];a&&(a.disconnect(),this.mixinObservers[r]=null)}},attachMixinListener:{value:function(r){var a=this,t=r.id,o=this.mixinObservers[t];if(r&&!o){var i=new MutationObserver(function(t){var r=t[0].attributeName;a.handleMixinUpdate(r)});i.observe(r,{attributes:!0}),this.mixinObservers[t]=i}}},handleMixinUpdate:{value:function(){}},emit:{value:function(a,o,d,c){var n=this,r;return void 0===d&&(d=!0),r={bubbles:!!d,detail:o},c&&l.extend(r,c),l.fireEvent(n,a,r)},writable:window.debug},emitter:{value:function(r,a,t){var o=this;return function(){o.emit(r,a,t)}}}})})},{"../utils/":195,"./a-register-element":124}],124:[function(t,r){function i(t){d[t.toLowerCase()]=!0}function s(r){var i={};return a(i,["attachedCallback","attributeChangedCallback","createdCallback"],r,c.prototype),o(r,i),i}function l(r){var i={};return a(i,["attachedCallback","attributeChangedCallback","createdCallback"],r,c.prototype),a(i,["attachedCallback","attributeChangedCallback","createdCallback","detachedCallback"],r,p.prototype),o(r,i),i}function a(r,i,s,o){i.forEach(function(a){n(r,a,s,o)})}function n(i,s,t,o){var a=t[s],r=o[s];a&&r&&a!==r&&(i[s]={value:function(){return r.apply(this,arguments),a.apply(this,arguments)},writable:window.debug})}function o(r,i){Object.getOwnPropertyNames(r).forEach(function(t){var o;i[t]||(o=Object.getOwnPropertyDescriptor(r,t),i[t]={value:r[t],writable:o.writable})})}t("document-register-element");var d=r.exports.knownTags={},c,p;r.exports.isNode=function(t){return t.tagName.toLowerCase()in d||t.isNode},r.exports.registerElement=function(d,u){var t=Object.getPrototypeOf(u.prototype),o=u,a=c&&t===c.prototype,r=p&&t===p.prototype;return(a||r)&&i(d),a&&(o=s(u.prototype),o={prototype:Object.create(t,o)}),r&&(o=l(u.prototype),o={prototype:Object.create(t,o)}),document.registerElement(d,o)},r.exports.wrapMethods=a,c=t("./a-node"),p=t("./a-entity")},{"./a-entity":121,"./a-node":123,"document-register-element":13}],125:[function(t,r){function i(a){var o={},r,t;for(t in a)r=a[t],o[t]=r&&r.constructor===Object?g.clone(r):r;return o}function a(r,a,o){return o&&(null===a||"object"!=("undefined"===typeof a?"undefined":babelHelpers.typeof(a)))?a:g.extend(r,a)}function o(t){return t.tick||t.tock}function n(r){return function(){var a=this.el.sceneEl;this.isPlaying&&(r.call(this),this.isPlaying=!1,o(this)&&a.removeBehavior(this))}}function s(r){return function(){var a=this.el.sceneEl,t=this.el.isPlaying&&!this.isPlaying;this.initialized&&t&&(r.call(this),this.isPlaying=!0,o(this)&&a.addBehavior(this))}}var l=t("./schema"),d=t("./scene/scenes"),c=t("./system"),g=t("../utils/"),p=r.exports.components={},y=l.parseProperties,m=l.parseProperty,u=l.process,f=l.isSingleProperty,h=l.stringifyProperties,M=l.stringifyProperty,x=g.styleParser,E=g.debug("core:component:warn"),v=document.currentScript,A=/[A-Z]+/,T=r.exports.Component=function(a,o,t){var i=this;this.el=a,this.id=t,this.attrName=this.name+(t?"__"+t:""),this.evtDetail={id:this.id,name:this.name},this.initialized=!1,this.el.components[this.attrName]=this,this.oldData=void 0,this.previousAttrValue=void 0,this.throttledEmitComponentChanged=g.throttle(function(){a.emit("componentchanged",i.evtDetail,!1)},200),this.updateProperties(o)};if(T.prototype={schema:{},init:function(){},update:function(){},updateSchema:void 0,tick:void 0,tock:void 0,play:function(){},pause:function(){},remove:function(){},parse:function(r,a){var t=this.schema;return f(t)?m(r,t):y(x.parse(r),t,!0,this.name,a)},stringify:function(r){var a=this.schema;return"string"==typeof r?r:f(a)?M(r,a):(r=h(r,a),x.stringify(r))},updateCachedAttrValue:function(o,n){var l=this.parseAttrValueForCache(o),r=f(this.schema),d;if(void 0!==o){if(!r&&!n&&this.attrValue)for(d in this.attrValue)d in l||(l[d]=this.attrValue[d]);this.attrValue=a({},l,r)}},parseAttrValueForCache:function(r){var a;return"string"==typeof r?(f(this.schema)?"string"==typeof(a=this.schema.parse(r))&&(a=r):a=x.parse(r),a):r},flushToDOM:function(r){var a=r?this.data:this.attrValue;a&&window.HTMLElement.prototype.setAttribute.call(this.el,this.attrName,this.stringify(a))},updateProperties:function(n,l){var t=this.el,s=this.oldData,o,i;if(!t.hasLoaded)return void this.updateCachedAttrValue(n);if(o=f(this.schema),i=null!==n&&"object"==babelHelpers.typeof(this.previousAttrValue)&&n===this.previousAttrValue,this.previousAttrValue=n,n=this.parseAttrValueForCache(n),this.updateSchema&&this.updateSchema(this.buildData(n,!1,!0)),this.data=this.buildData(n,l,!1,i),this.updateCachedAttrValue(n,l),this.initialized){if(g.deepEqual(this.oldData,this.data))return;this.oldData=a({},this.data,o),this.update(s),this.throttledEmitComponentChanged()}else{if(t.initializingComponents[this.name])return;t.initializingComponents[this.name]=!0,this.init(),this.initialized=!0,delete t.initializingComponents[this.name],s=o&&"object"!=babelHelpers.typeof(m(void 0,this.schema))?void 0:{},this.oldData=a({},this.data,o),this.update(s),t.isPlaying&&this.play(),t.emit("componentinitialized",this.evtDetail,!1)}},resetProperty:function(t){if(f(this.schema))this.attrValue=void 0;else{if(!(t in this.attrValue))return;delete this.attrValue[t]}this.updateProperties(this.attrValue)},extendSchema:function(r){var a=g.extend({},p[this.name].schema);g.extend(a,r),this.schema=u(a),this.el.emit("schemachanged",{component:this.name})},buildData:function(l,M,x,E){var r=this.schema,u=f(r),d=this.el.mixinEls,v,s,o,A,n,p,h;if(u)v=r.default&&r.default.constructor===Object?g.clone(r.default):r.default;else for(h=!M&&this.attrValue,v="object"==("undefined"===typeof h?"undefined":babelHelpers.typeof(h))?i(h):{},p=0,o=Object.keys(r),A=o.length;p<A;p++)s=r[o[p]].default,void 0===v[o[p]]&&(v[o[p]]=s&&s.constructor===Object?g.clone(s):s);for(p=0;p<d.length;p++)(n=d[p].getAttribute(this.attrName))&&(v=a(v,n,u));if(void 0!==l&&null!==l){if(u)return!0===E?l:m(l,r);v=a(v,l,u)}else{if(!0===E)return v;if(u)return m(v,r)}return!0===E?v:y(v,r,void 0,this.name,x)}},window.debug)var b=r.exports.registrationOrderWarnings={};r.exports.registerComponent=function(a,o){var t={},r;if(document.currentScript&&document.currentScript!==v&&d.forEach(function(r){r.hasLoaded||document.currentScript.compareDocumentPosition(r)!==Node.DOCUMENT_POSITION_FOLLOWING&&(E("The component `"+a+"` was registered in a <script> tag after the scene. Component <script> tags in an HTML file should be declared *before* the scene such that the component is available to entities during scene initialization."),window.debug&&(b[a]=!0))}),!0===A.test(a)&&E("The component name `"+a+"` contains uppercase characters, but HTML will ignore the capitalization of attribute names. Change the name to be lowercase: `"+a.toLowerCase()+"`"),-1!==a.indexOf("__"))throw new Error("The component name `"+a+"` is not allowed. The sequence __ (double underscore) is reserved to specify an id for multiple components of the same type");if(Object.keys(o).forEach(function(r){t[r]={value:o[r],writable:!0}}),p[a])throw new Error("The component `"+a+"` has been already registered. Check that you are not loading two versions of the same component or two different components of the same name.");return r=function(r,a,t){T.call(this,r,a,t)},r.prototype=Object.create(T.prototype,t),r.prototype.name=a,r.prototype.constructor=r,r.prototype.system=c&&c.systems[a],r.prototype.play=s(r.prototype.play),r.prototype.pause=n(r.prototype.pause),p[a]={Component:r,dependencies:r.prototype.dependencies,isSingleProp:f(r.prototype.schema),multiple:r.prototype.multiple,parse:r.prototype.parse,parseAttrValueForCache:r.prototype.parseAttrValueForCache,schema:g.extend(u(r.prototype.schema,r.prototype.name)),stringify:r.prototype.stringify,type:r.prototype.type},r}},{"../utils/":195,"./scene/scenes":131,"./schema":133,"./system":135}],126:[function(t,r){var a=t("./schema"),i=a.process,n=r.exports.geometries={},s=r.exports.geometryNames=[],o=t("../lib/three"),l=r.exports.Geometry=function(){};l.prototype={schema:{},init:function(){return this.geometry=new o.Geometry,this.geometry},update:function(){}},r.exports.registerGeometry=function(a,d){var t={},o;if(Object.keys(d).forEach(function(r){t[r]={value:d[r],writable:!0}}),n[a])throw new Error("The geometry `"+a+"` has been already registered");return o=function(){l.call(this)},o.prototype=Object.create(l.prototype,t),o.prototype.name=a,o.prototype.constructor=o,n[a]={Geometry:o,schema:i(o.prototype.schema)},s.push(a),o}},{"../lib/three":173,"./schema":133}],127:[function(t,r){function a(a,o,l,t){return"type"in g?void u("Property type "+a+" is already registered."):void(g[a]={default:o,parse:l||i,stringify:t||s})}function o(a){var o,r;return"string"==typeof a?(r=a.match(/\url\((.+)\)/),r?r[1]:"#"===a.charAt(0)?(o=document.getElementById(a.substring(1)))?"CANVAS"===o.tagName||"VIDEO"===o.tagName||"IMG"===o.tagName?o:o.getAttribute("src"):void m("\""+a+"\" asset not found."):a):a}function i(t){return t}function s(t){return null===t?"null":t.toString()}function n(t){return parseInt(t,10)}function l(t){return c.parse(t,this.default)}function d(a,s){if(null===a)return!0;if("object"!=("undefined"===typeof a?"undefined":babelHelpers.typeof(a)))return!1;if(Object.keys(a).length!==s)return!1;var r=a.x,l=a.y,d=a.z,c=a.w;return"number"==typeof r&&"number"==typeof l&&!(2<s&&"number"!=typeof d)&&!(3<s&&"number"!=typeof c)}var c=t("../utils/coordinates"),p=t("debug"),u=p("core:propertyTypes:warn"),m=p("core:propertyTypes:warn"),g=r.exports.propertyTypes={},h=/[,> .[\]:]/;a("audio","",o),a("array",[],function(t){return Array.isArray(t)?t:t&&"string"==typeof t?t.split(",").map(function(t){return t.trim()}):[]},function(t){return t.join(", ")}),a("asset","",o),a("boolean",!1,function(t){return"false"!==t&&!1!==t}),a("color","#FFF",i,s),a("int",0,n),a("number",0,function(t){return parseFloat(t,10)}),a("map","",o),a("model","",o),a("selector",null,function(t){return t?"string"==typeof t?"#"!==t[0]||h.test(t)?document.querySelector(t):document.getElementById(t.substring(1)):t:null},function(t){return t.getAttribute?"#"+t.getAttribute("id"):s(t)}),a("selectorAll",null,function(t){return t?"string"==typeof t?Array.prototype.slice.call(document.querySelectorAll(t),0):t:null},function(t){return t instanceof Array?t.map(function(t){return"#"+t.getAttribute("id")}).join(", "):s(t)}),a("src","",function(t){return m("`src` property type is deprecated. Use `asset` instead."),o(t)}),a("string","",i,s),a("time",0,n),a("vec2",{x:0,y:0},l,c.stringify),a("vec3",{x:0,y:0,z:0},l,c.stringify),a("vec4",{x:0,y:0,z:0,w:0},l,c.stringify),r.exports.registerPropertyType=a,r.exports.isValidDefaultValue=function(t,a){return("audio"!==t||"string"==typeof a)&&("array"!==t||Array.isArray(a))&&("asset"!==t||"string"==typeof a)&&("boolean"!==t||"boolean"==typeof a)&&("color"!==t||"string"==typeof a)&&("int"!==t||"number"==typeof a)&&("number"!==t||"number"==typeof a)&&("map"!==t||"string"==typeof a)&&("model"!==t||"string"==typeof a)&&("selector"!==t||"string"==typeof a||null===a)&&("selectorAll"!==t||"string"==typeof a||null===a)&&("src"!==t||"string"==typeof a)&&("string"!==t||"string"==typeof a)&&("time"!==t||"number"==typeof a)&&("vec2"===t?d(a,2):"vec3"===t?d(a,3):"vec4"!==t||d(a,4))},r.exports.isValidDefaultCoordinate=d},{"../utils/coordinates":190,debug:10}],128:[function(t,r){function a(r,a){return a?{height:r.parentElement.offsetHeight,width:r.parentElement.offsetWidth}:{height:window.innerHeight,width:window.innerWidth}}function o(t){(t.requestFullscreen||t.webkitRequestFullscreen||t.mozRequestFullScreen||t.msRequestFullscreen).apply(t)}function i(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function n(t){return null===t.getAttribute("antialias")?!t.isMobile:"true"===t.getAttribute("antialias")}function s(r){function a(){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||r.exitVR(),document.activeElement.blur(),document.body.focus()}var t;t=document.createElement("canvas"),t.classList.add("a-canvas"),t.dataset.aframeCanvas=!0,r.appendChild(t),document.addEventListener("fullscreenchange",a),document.addEventListener("mozfullscreenchange",a),document.addEventListener("webkitfullscreenchange",a),t.addEventListener("touchmove",function(t){t.preventDefault()}),r.canvas=t,r.emit("render-target-loaded",{target:t}),setTimeout(x(r.resize,r),0)}var l=t("./metaTags").inject,d=t("./wakelock"),c=t("../a-register-element"),p=t("./scenes"),u=t("../system").systems,m=t("../../lib/three"),g=t("@tweenjs/tween.js"),h=t("../../utils/"),y=t("../a-entity"),f=t("../a-node"),M=t("./postMessage"),x=h.bind,E=h.device.isIOS(),v=h.device.isMobile(),A=c.registerElement,T=h.debug("core:a-scene:warn");r.exports.AScene=A("a-scene",{prototype:Object.create(y.prototype,{defaultComponents:{value:{inspector:"","keyboard-shortcuts":"",screenshot:"","vr-mode-ui":""}},createdCallback:{value:function(){this.isIOS=E,this.isMobile=v,this.isScene=!0,this.object3D=new m.Scene,this.render=x(this.render,this),this.systems={},this.systemNames=[],this.time=0,this.init()}},init:{value:function(){this.behaviors={tick:[],tock:[]},this.hasLoaded=!1,this.isPlaying=!1,this.originalHTML=this.innerHTML,this.renderTarget=null,s(this),this.setupRenderer(),this.resize(),this.addFullScreenStyles(),M(this)},writable:!0},addFullScreenStyles:{value:function(){document.documentElement.classList.add("a-html"),document.body.classList.add("a-body"),this.classList.add("fullscreen")}},removeFullScreenStyles:{value:function(){document.documentElement.classList.remove("a-html"),document.body.classList.remove("a-body"),this.classList.remove("fullscreen")}},attachedCallback:{value:function(){var r=this,t;l(this),d(this),this.initSystems(),t=x(this.resize,this),window.addEventListener("load",t),window.addEventListener("resize",t),this.play(),p.push(this),this.onVRPresentChangeBound=x(this.onVRPresentChange,this),window.addEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),this.enterVRBound=function(){r.enterVR()},this.exitVRBound=function(){r.exitVR()},this.exitVRTrueBound=function(){r.exitVR(!0)},this.pointerRestrictedBound=function(){r.pointerRestricted()},this.pointerUnrestrictedBound=function(){r.pointerUnrestricted()},window.addEventListener("vrdisplayactivate",this.enterVRBound),window.addEventListener("vrdisplaydeactivate",this.exitVRBound),window.addEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.addEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.addEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)},writable:window.debug},initSystems:{value:function(){Object.keys(u).forEach(x(this.initSystem,this))}},initSystem:{value:function(t){this.systems[t]||(this.systems[t]=new u[t](this),this.systemNames.push(t))}},detachedCallback:{value:function(){var t;this.effect&&this.effect.cancelAnimationFrame?this.effect.cancelAnimationFrame(this.animationFrameID):window.cancelAnimationFrame(this.animationFrameID),this.animationFrameID=null,t=p.indexOf(this),p.splice(t,1),window.removeEventListener("vrdisplaypresentchange",this.onVRPresentChangeBound),window.removeEventListener("vrdisplayactivate",this.enterVRBound),window.removeEventListener("vrdisplaydeactivate",this.exitVRBound),window.removeEventListener("vrdisplayconnect",this.enterVRBound),window.removeEventListener("vrdisplaydisconnect",this.exitVRTrueBound),window.removeEventListener("vrdisplaypointerrestricted",this.pointerRestrictedBound),window.removeEventListener("vrdisplaypointerunrestricted",this.pointerUnrestrictedBound)}},addBehavior:{value:function(r){var a=this,t=this.behaviors;Object.keys(t).forEach(function(t){if(r[t]){var o=a.behaviors[t];-1===o.indexOf(r)&&o.push(r)}})}},getPointerLockElement:{value:function(){return document.pointerLockElement},writable:window.debug},checkHeadsetConnected:{value:h.device.checkHeadsetConnected,writable:window.debug},enterVR:{value:function(r){function a(){t.addState("vr-mode"),t.emit("enter-vr",{target:t}),t.isMobile&&screen.orientation&&screen.orientation.lock&&screen.orientation.lock("landscape"),t.addFullScreenStyles(),t.isMobile||t.checkHeadsetConnected()||o(t.canvas),t.resize()}var t=this,i=this.effect;return this.is("vr-mode")?Promise.resolve("Already in VR."):!r&&(this.checkHeadsetConnected()||this.isMobile)?i&&i.requestPresent().then(a,function(t){throw t&&t.message?new Error("Failed to enter VR mode (`requestPresent`): "+t.message):new Error("Failed to enter VR mode (`requestPresent`).")})||Promise.reject(new Error("VREffect not initialized")):(a(),Promise.resolve())},writable:window.debug},exitVR:{value:function(r){function a(){t.removeState("vr-mode"),t.isMobile&&screen.orientation&&screen.orientation.unlock&&screen.orientation.unlock(),t.hasAttribute("embedded")&&t.removeFullScreenStyles(),t.resize(),t.isIOS&&h.forceCanvasResizeSafariMobile(this.canvas),t.emit("exit-vr",{target:t})}var t=this;return this.is("vr-mode")?(i(),!r&&(this.checkHeadsetConnected()||this.isMobile)?this.effect.exitPresent().then(a,function(t){throw t&&t.message?new Error("Failed to exit VR mode (`exitPresent`): "+t.message):new Error("Failed to exit VR mode (`exitPresent`).")}):(a(),Promise.resolve())):Promise.resolve("Not in VR.")},writable:window.debug},pointerRestricted:{value:function(){if(this.canvas){var t=this.getPointerLockElement();t&&t!==this.canvas&&document.exitPointerLock&&document.exitPointerLock(),this.canvas.requestPointerLock&&this.canvas.requestPointerLock()}}},pointerUnrestricted:{value:function(){var t=this.getPointerLockElement();t&&t===this.canvas&&document.exitPointerLock&&document.exitPointerLock()}},onVRPresentChange:{value:function(t){return(t.display||t.detail.display).isPresenting?void this.enterVR(!0):void this.exitVR(!0)}},getAttribute:{value:function(r){var a=this.systems[r];return a?a.data:y.prototype.getAttribute.call(this,r)}},getComputedAttribute:{value:function(t){T("`getComputedAttribute` is deprecated. Use `getAttribute` instead."),this.getAttribute(t)}},getDOMAttribute:{value:function(r){var a=this.systems[r];return a?a.data:y.prototype.getDOMAttribute.call(this,r)}},setAttribute:{value:function(r,a,t){var o=this.systems[r];return o?(f.prototype.setAttribute.call(this,r,a),void o.updateProperties(a)):void y.prototype.setAttribute.call(this,r,a,t)}},removeBehavior:{value:function(r){var a=this,t=this.behaviors;Object.keys(t).forEach(function(t){if(r[t]){var o=a.behaviors[t],i=o.indexOf(r);-1!==i&&o.splice(i,1)}})}},resize:{value:function(){var r=this.camera,o=this.canvas,l=this.getAttribute("embedded")&&!this.is("vr-mode"),n=this.effect&&this.effect.isPresenting,s;!r||!o||this.is("vr-mode")&&(this.isMobile||n)||(s=a(o,l),r.aspect=s.width/s.height,r.updateProjectionMatrix(),this.renderer.setSize(s.width,s.height))},writable:window.debug},setupRenderer:{value:function(){var t;t=this.renderer=new m.WebGLRenderer({canvas:this.canvas,antialias:n(this),alpha:!0}),t.setPixelRatio(window.devicePixelRatio),t.sortObjects=!1,this.effect=new m.VREffect(t),this.effect.autoSubmitFrame=!1},writable:window.debug},play:{value:function(){var t=this;return this.renderStarted?void y.prototype.play.call(this):void(this.addEventListener("loaded",function(){function t(t){t.renderStarted||(t.resize(),t.renderer&&(window.performance&&window.performance.mark("render-started"),t.clock=new m.Clock,t.render(),t.renderStarted=!0,t.emit("renderstart")))}return(y.prototype.play.call(this),this.camera)?void t(this):void this.addEventListener("camera-set-active",function(){t(this)})}),setTimeout(function(){y.prototype.load.call(t)}))}},reload:{value:function(t){var r=this;t&&this.pause(),this.innerHTML=this.originalHTML,this.init(),f.prototype.load.call(this,function(){r.isPlaying&&y.prototype.play.call(r)})}},updateComponent:{value:function(t){t in u||y.prototype.updateComponent.apply(this,arguments)}},tick:{value:function(r,a){var t=this.systems,o;for(g.update(),o=0;o<this.behaviors.tick.length;o++)this.behaviors.tick[o].el.isPlaying&&this.behaviors.tick[o].tick(r,a);for(o=0;o<this.systemNames.length;o++)t[this.systemNames[o]].tick&&t[this.systemNames[o]].tick(r,a)}},tock:{value:function(r,a){var t=this.systems,o;for(o=0;o<this.behaviors.tock.length;o++)this.behaviors.tock[o].el.isPlaying&&this.behaviors.tock[o].tock(r,a);for(o=0;o<this.systemNames.length;o++)t[this.systemNames[o]].tock&&t[this.systemNames[o]].tock(r,a)}},render:{value:function(){var r=this.effect,a=1e3*this.clock.getDelta();this.time=1e3*this.clock.elapsedTime,this.isPlaying&&this.tick(this.time,a),this.animationFrameID=r.requestAnimationFrame(this.render),r.render(this.object3D,this.camera,this.renderTarget),this.isPlaying&&this.tock(this.time,a),this.effect.submitFrame()},writable:!0}})}),r.exports.shouldAntiAlias=n,r.exports.setupCanvas=s},{"../../lib/three":173,"../../utils/":195,"../a-entity":121,"../a-node":123,"../a-register-element":124,"../system":135,"./metaTags":129,"./postMessage":130,"./scenes":131,"./wakelock":132,"@tweenjs/tween.js":1}],129:[function(t,r){function a(t){return{tagName:"meta",attributes:t,exists:function(){return document.querySelector("meta[name=\""+t.name+"\"]")}}}function o(r){if(r&&r.tagName){var a=document.createElement(r.tagName);return a.setAttribute(i.AFRAME_INJECTED,""),n(a,r.attributes)}}var i=t("../../constants/"),n=t("../../utils").extend,s=r.exports.MOBILE_HEAD_TAGS=[a({name:"viewport",content:"width=device-width,initial-scale=1,maximum-scale=1,shrink-to-fit=no,user-scalable=no,minimal-ui"}),a({name:"mobile-web-app-capable",content:"yes"}),a({name:"theme-color",content:"black"})],l=[a({name:"apple-mobile-web-app-capable",content:"yes"}),a({name:"apple-mobile-web-app-status-bar-style",content:"black"}),function(t){return{tagName:"link",attributes:t,exists:function(){return document.querySelector("link[rel=\""+t.rel+"\"]")}}}({rel:"apple-touch-icon",href:"https://aframe.io/images/aframe-logo-152.png"})];r.exports.inject=function(d){function c(a){a&&!a.exists()&&(i=o(a))&&(n?n.parentNode.insertBefore(i,n):t.appendChild(i),r.push(i))}var t=document.head,n=t.querySelector("script"),r=[],i;return s.forEach(c),d.isIOS&&l.forEach(c),r}},{"../../constants/":116,"../../utils":195}],130:[function(t,r){function a(t){var r=this;if(t.data)switch(t.data.type){case"vr":switch(t.data.data){case"enter":r.enterVR();break;case"exit":r.exitVR();}}}var o=t("../../utils/bind"),i=t("../../utils/").isIframed;r.exports=function(t){i()&&window.addEventListener("message",o(a,t))}},{"../../utils/":195,"../../utils/bind":189}],131:[function(t,r){r.exports=[]},{}],132:[function(t,r){var a=t("../../../vendor/wakelock/wakelock");r.exports=function(t){if(t.isMobile){var r=t.wakelock=new a;t.addEventListener("enter-vr",function(){r.request()}),t.addEventListener("exit-vr",function(){r.release()})}}},{"../../../vendor/wakelock/wakelock":205}],133:[function(t,r){function a(t){return"type"in t?"string"==typeof t.type:"default"in t}function o(a,i){var r=a.default,s=a.type,l,t;return a.type?"bool"===a.type?s="boolean":"float"===a.type&&(s="number"):s=void 0!==r&&-1!==["boolean","number"].indexOf("undefined"===typeof r?"undefined":babelHelpers.typeof(r))?"undefined"===typeof r?"undefined":babelHelpers.typeof(r):Array.isArray(r)?"array":"string",t=u[s],t||m("Unknown property type for component `"+i+"`: "+s),l=!!a.parse,a.parse=a.parse||t.parse,a.stringify=a.stringify||t.stringify,a.type=s,"default"in a?l||c(s,r)||m("Default value `"+r+"` does not match type `"+s+"` in component `"+i+"`"):a.default=t.default,a}function i(t,a){return void 0!==t&&null!==t&&""!==t||(t=a.default,Array.isArray(t)&&(t=t.slice())),a.parse(t,a.default)}function s(t,a){return"object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?a&&null!==t?a.stringify(t):JSON.stringify(t):t}var n=t("../utils/"),l=t("./propertyTypes"),d=n.debug,c=l.isValidDefaultValue,u=l.propertyTypes,m=d("core:schema:warn");r.exports.isSingleProperty=a,r.exports.process=function(i,n){return a(i)?o(i,n):(Object.keys(i).forEach(function(r){i[r]=o(i[r],n)}),i)},r.exports.processPropertyDefinition=o,r.exports.parseProperties=function(a,s,r,t,o){var n=Object.keys(r?a:s);return null===a||"object"!=("undefined"===typeof a?"undefined":babelHelpers.typeof(a))?a:(Object.keys(a).forEach(function(r){s[r]||o||m("Unknown property `"+r+"` for component/system `"+t+"`.")}),n.forEach(function(r){var t=s[r],o=a[r];s[r]&&(a[r]=i(o,t))}),a)},r.exports.parseProperty=i,r.exports.stringifyProperties=function(a,l){var r={};return Object.keys(a).forEach(function(t){var o=l[t],n=a[t],d=n;"object"==("undefined"===typeof d?"undefined":babelHelpers.typeof(d))&&(d=s(n,o),o||m("Unknown component property: "+t)),r[t]=d}),r},r.exports.stringifyProperty=s},{"../utils/":195,"./propertyTypes":127}],134:[function(t,r){var a=t("./schema"),o=a.process,i=r.exports.shaders={},n=r.exports.shaderNames=[],s=t("../lib/three"),l=t("../utils"),d={array:"v3",color:"v3",int:"i",number:"f",map:"t",time:"f",vec2:"v2",vec3:"v3",vec4:"v4"},c=r.exports.Shader=function(){};c.prototype={schema:{},vertexShader:"void main() {gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);}",fragmentShader:"void main() {gl_FragColor = vec4(1.0, 0.0, 1.0, 1.0);}",init:function(t){return this.attributes=this.initVariables(t,"attribute"),this.uniforms=this.initVariables(t,"uniform"),this.material=new(this.raw?s.RawShaderMaterial:s.ShaderMaterial)({uniforms:this.uniforms,vertexShader:this.vertexShader,fragmentShader:this.fragmentShader}),this.material},initVariables:function(o,n){var r={},t=this.schema;return Object.keys(t).forEach(function(a){if(t[a].is===n){var o=d[t[a].type];r[a]={type:o,value:void 0}}}),r},update:function(t){this.updateVariables(t,"attribute"),this.updateVariables(t,"uniform")},updateVariables:function(n,d){var r=this,t="uniform"===d?this.uniforms:this.attributes,a=this.schema;Object.keys(n).forEach(function(i){var s;if(a[i]&&a[i].is===d){if("map"===a[i].type)return t[i]&&t[i].value!==n[i]?(s="_texture_"+i,r.el.addEventListener("materialtextureloaded",function(){t[i].value=r.material[s],t[i].needsUpdate=!0}),void l.material.updateMapMaterialFromData(s,i,r,n)):void 0;t[i].value=r.parseValue(a[i].type,n[i]),t[i].needsUpdate=!0}})},parseValue:function(a,o){var r;return"vec2"===a?new s.Vector2(o.x,o.y):"vec3"===a?new s.Vector3(o.x,o.y,o.z):"vec4"===a?new s.Vector4(o.x,o.y,o.z,o.w):"color"===a?(r=new s.Color(o),new s.Vector3(r.r,r.g,r.b)):"map"===a?s.ImageUtils.loadTexture(o):o}},r.exports.registerShader=function(s,l){var r={},a;if(Object.keys(l).forEach(function(t){r[t]={value:l[t],writable:!0}}),i[s])throw new Error("The shader "+s+" has been already registered");return a=function(){c.call(this)},a.prototype=Object.create(c.prototype,r),a.prototype.name=s,a.prototype.constructor=a,i[s]={Shader:a,schema:o(a.prototype.schema)},n.push(s),a}},{"../lib/three":173,"../utils":195,"./schema":133}],135:[function(t,r){var a=t("./component"),o=t("./schema"),n=t("../utils/"),i=o.parseProperties,s=o.parseProperty,l=o.process,d=o.isSingleProperty,c=n.styleParser,p=r.exports.systems={},u=r.exports.System=function(r){var o=a&&a.components[this.name];this.el=r,this.sceneEl=r,o&&(o.Component.prototype.system=this),this.buildData(),this.init(),this.update({})};u.prototype={schema:{},init:function(){},update:function(){},updateProperties:function(r){var a=this.data;Object.keys(o).length&&(this.buildData(r),this.update(a))},buildData:function(r){var a=this.schema;Object.keys(a).length&&(r=r||window.HTMLElement.prototype.getAttribute.call(this.sceneEl,this.name),this.data=d(a)?s(r,a):i(c.parse(r)||{},a))},tick:void 0,tock:void 0,play:function(){},pause:function(){}},r.exports.registerSystem=function(a,d){var t={},r=n.findAllScenes(document),i,s;if(Object.keys(d).forEach(function(r){t[r]={value:d[r],writable:!0}}),p[a])throw new Error("The system `"+a+"` has been already registered. Check that you are not loading two versions of the same system or two different systems of the same name.");for(s=function(t){u.call(this,t)},s.prototype=Object.create(u.prototype,t),s.prototype.name=a,s.prototype.constructor=s,s.prototype.schema=n.extend(l(s.prototype.schema)),p[a]=s,i=0;i<r.length;i++)r[i].initSystem(a)}},{"../utils/":195,"./component":125,"./schema":133}],136:[function(t){t("./pivot")},{"./pivot":137}],137:[function(t){var r=t("../../core/component").registerComponent,a=t("../../lib/three"),s=new a.Vector3,l=new a.Vector3;r("pivot",{dependencies:["position"],schema:{type:"vec3"},init:function(){var r=this.data,o=this.el,i=o.object3D.parent,t=o.object3D,d=new a.Group;s.copy(t.position),l.copy(t.rotation),i.remove(t),d.add(t),i.add(d),o.object3D=d,t.position.set(-1*r.x,-1*r.y,-1*r.z),d.position.set(r.x+s.x,r.y+s.y,r.z+s.z),d.rotation.copy(t.rotation),t.rotation.set(0,0,0)}})},{"../../core/component":125,"../../lib/three":173}],138:[function(t,r){function a(t){var r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();"fog"===t&&(r="material-fog"),"visible"===t&&(r="material-visible"),s[r]="material."+t}var o=t("../../core/component").components,i=t("../../core/shader").shaders,n=t("../../utils/"),s={};Object.keys(o.material.schema).forEach(a),Object.keys(i.standard.schema).forEach(a),r.exports=function(){return{defaultComponents:{material:{}},mappings:n.extend({},s)}}},{"../../core/component":125,"../../core/shader":134,"../../utils/":195}],139:[function(t){t("./primitives/a-camera"),t("./primitives/a-collada-model"),t("./primitives/a-cursor"),t("./primitives/a-curvedimage"),t("./primitives/a-gltf-model"),t("./primitives/a-image"),t("./primitives/a-light"),t("./primitives/a-link"),t("./primitives/a-obj-model"),t("./primitives/a-sky"),t("./primitives/a-sound"),t("./primitives/a-text"),t("./primitives/a-video"),t("./primitives/a-videosphere"),t("./primitives/meshPrimitives")},{"./primitives/a-camera":141,"./primitives/a-collada-model":142,"./primitives/a-cursor":143,"./primitives/a-curvedimage":144,"./primitives/a-gltf-model":145,"./primitives/a-image":146,"./primitives/a-light":147,"./primitives/a-link":148,"./primitives/a-obj-model":149,"./primitives/a-sky":150,"./primitives/a-sound":151,"./primitives/a-text":152,"./primitives/a-video":153,"./primitives/a-videosphere":154,"./primitives/meshPrimitives":155}],140:[function(t,r){function a(r,a){var t=s[r].schema;Object.keys(t).map(function(t){var o=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();void 0!==a[o]&&(o=r+"-"+t),a[o]=r+"."+t})}var o=t("../../core/a-entity"),s=t("../../core/component").components,n=t("../../core/a-register-element").registerElement,d=t("../../utils/"),i=d.debug,l=d.entity.setComponentProperty,c=i("extras:primitives:debug"),p=i("extras:primitives:warn"),u=r.exports.primitives={};r.exports.registerPrimitive=function(r,a){r=r.toLowerCase(),c("Registering <%s>",r),a.defaultAttributes&&p("The 'defaultAttributes' object is deprecated. Use 'defaultComponents' instead.");var t=n(r,{prototype:Object.create(o.prototype,{defaultComponentsFromPrimitive:{value:a.defaultComponents||a.defaultAttributes||{}},deprecated:{value:a.deprecated||null},deprecatedMappings:{value:a.deprecatedMappings||{}},mappings:{value:a.mappings||{}},createdCallback:{value:function(){a.deprecated&&console.warn(a.deprecated),this.resolveMappingCollisions()}},resolveMappingCollisions:{value:function(){var r=this.mappings,a=this;Object.keys(r).forEach(function(t){var o;t!==t.toLowerCase()&&p("Mapping keys should be specified in lower case. The mapping key "+t+" may not be recognized"),s[t]&&(o=r[t].replace(".","-"),r[o]=r[t],delete r[t],console.warn("The primitive "+a.tagName.toLowerCase()+" has a mapping collision. The attribute "+t+" has the same name as a registered component and has been renamed to "+o))})}},getExtraComponents:{value:function(){function c(a,o){return m(a)?t(o):m(o)?t(a):i(a)&&i(o)?d.extendDeep(a,o):t(o)}function m(t){return void 0===t}function t(t){return i(t)?d.extendDeep({},t):t}function i(t){return null!==t&&t.constructor===Object}var n=this,l,r,o,a,s,p;for(r=d.clone(this.defaultComponentsFromPrimitive),s=this.getAttribute("mixin"),s&&(s=s.trim().split(" "),s.forEach(function(a){var o=n.sceneEl.querySelector("#"+a).componentCache;Object.keys(o).forEach(function(a){r[a]=c(r[a],o[a])})})),o=0;o<this.attributes.length;o++)l=this.attributes[o],(a=this.mappings[l.name])&&(p=d.entity.getComponentPropertyPath(a),p.constructor===Array?(r[p[0]]=r[p[0]]||{},r[p[0]][p[1]]=l.value):r[p]=l.value);return r}},attributeChangedCallback:{value:function(r,a,t){var o=this.mappings[r];r in this.deprecatedMappings&&console.warn(this.deprecatedMappings[r]),r&&o&&l(this,o,t)}}})});return u[r]=t,t},r.exports.definePrimitive=function(o,n,s){s=s||{},Object.keys(n).map(function(t){a(t,s)}),r.exports.registerPrimitive(o,d.extendDeep({},null,{defaultComponents:n,mappings:s}))}},{"../../core/a-entity":121,"../../core/a-register-element":124,"../../core/component":125,"../../utils/":195}],141:[function(t){var r=t("../../../constants/").DEFAULT_CAMERA_HEIGHT,a=t("../primitives").registerPrimitive;a("a-camera",{defaultComponents:{camera:{userHeight:r},"look-controls":{},"wasd-controls":{}},mappings:{active:"camera.active",far:"camera.far",fov:"camera.fov","look-controls-enabled":"look-controls.enabled",near:"camera.near","wasd-controls-enabled":"wasd-controls.enabled","reverse-mouse-drag":"look-controls.reverseMouseDrag","user-height":"camera.userHeight",zoom:"camera.zoom"},deprecatedMappings:{"cursor-color":"a-camera[cursor-color] has been removed. Use a-cursor[color] instead.","cursor-maxdistance":"a-camera[cursor-maxdistance] has been removed. Use a-cursor[max-distance] instead.","cursor-offset":"a-camera[cursor-offset] has been removed. Use a-cursor[position] instead.","cursor-opacity":"a-camera[cursor-offset] has been removed. Use a-cursor[opacity] instead.","cursor-scale":"a-camera[cursor-scale] has been removed. Use a-cursor[scale] instead.","cursor-visible":"a-camera[cursor-visible] has been removed. Use a-cursor[visible] instead."}})},{"../../../constants/":116,"../primitives":140}],142:[function(t){var r=t("../primitives").registerPrimitive;r("a-collada-model",{mappings:{src:"collada-model"}})},{"../primitives":140}],143:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-cursor",o.extendDeep({},r(),{defaultComponents:{cursor:{},geometry:{primitive:"ring",radiusOuter:.016,radiusInner:.01,segmentsTheta:32},material:{color:"#000",shader:"flat",opacity:.8},position:{x:0,y:0,z:-1}},mappings:{far:"raycaster.far",fuse:"cursor.fuse","fuse-timeout":"cursor.fuseTimeout",interval:"raycaster.interval",objects:"raycaster.objects"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],144:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-curvedimage",o.extendDeep({},r(),{defaultComponents:{geometry:{height:1,primitive:"cylinder",radius:2,segmentsRadial:48,thetaLength:270,openEnded:!0,thetaStart:0},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0,repeat:"-1 1"}},mappings:{height:"geometry.height","open-ended":"geometry.openEnded",radius:"geometry.radius",segments:"geometry.segmentsRadial",start:"geometry.thetaStart","theta-length":"geometry.thetaLength","theta-start":"geometry.thetaStart",width:"geometry.thetaLength"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],145:[function(t){var r=t("../primitives").registerPrimitive;r("a-gltf-model",{mappings:{src:"gltf-model"}})},{"../primitives":140}],146:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-image",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],147:[function(t){var r=t("../primitives").registerPrimitive;r("a-light",{defaultComponents:{light:{}},mappings:{angle:"light.angle",color:"light.color","ground-color":"light.groundColor",decay:"light.decay",distance:"light.distance",intensity:"light.intensity",penumbra:"light.penumbra",type:"light.type",target:"light.target"}})},{"../primitives":140}],148:[function(t){var r=t("../primitives").registerPrimitive;r("a-link",{defaultComponents:{},mappings:{href:"link.href",image:"link.image",title:"link.title"}})},{"../primitives":140}],149:[function(t){var r=t("../getMeshMixin")(),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-obj-model",o.extendDeep({},r,{defaultComponents:{"obj-model":{}},mappings:{src:"obj-model.obj",mtl:"obj-model.mtl"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],150:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/"),i=t("./meshPrimitives");a("a-sky",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:o.extendDeep({},i["a-sphere"].prototype.mappings)}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140,"./meshPrimitives":155}],151:[function(t){var r=t("../primitives").registerPrimitive;r("a-sound",{defaultComponents:{sound:{}},mappings:{src:"sound.src",on:"sound.on",autoplay:"sound.autoplay",loop:"sound.loop",volume:"sound.volume"}})},{"../primitives":140}],152:[function(t){var r=t("../primitives").definePrimitive;r("a-text",{text:{anchor:"align",width:5}})},{"../primitives":140}],153:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-video",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"plane"},material:{color:"#FFF",shader:"flat",side:"double",transparent:!0}},mappings:{height:"geometry.height",width:"geometry.width"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],154:[function(t){var r=t("../getMeshMixin"),a=t("../primitives").registerPrimitive,o=t("../../../utils/");a("a-videosphere",o.extendDeep({},r(),{defaultComponents:{geometry:{primitive:"sphere",radius:5e3,segmentsWidth:64,segmentsHeight:32},material:{color:"#FFF",shader:"flat",npot:!0},scale:"-1 1 1"},mappings:{radius:"geometry.radius","segments-height":"geometry.segmentsHeight","segments-width":"geometry.segmentsWidth"}}))},{"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],155:[function(t,r){function a(t){return t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}var o=t("../getMeshMixin"),n=t("../../../core/geometry").geometries,i=t("../../../core/geometry").geometryNames,l=t("../primitives").registerPrimitive,d=t("../../../utils/"),c=r.exports={};i.forEach(function(p){var u=n[p],i=a(p),r={};Object.keys(u.schema).forEach(function(t){r[a(t)]="geometry."+t});var g="a-"+i,m=l(g,d.extendDeep({},o(),{defaultComponents:{geometry:{primitive:p}},mappings:r}));c[g]=m})},{"../../../core/geometry":126,"../../../utils/":195,"../getMeshMixin":138,"../primitives":140}],156:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("box",{schema:{depth:{default:1,min:0},height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"},segmentsDepth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.BoxGeometry(t.width,t.height,t.depth,t.segmentsWidth,t.segmentsHeight,t.segmentsDepth)}})},{"../core/geometry":126,"../lib/three":173}],157:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("circle",{schema:{radius:{default:1,min:0},segments:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CircleGeometry(t.radius,t.segments,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],158:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("cone",{schema:{height:{default:1,min:0},openEnded:{default:!1},radiusBottom:{default:1,min:0},radiusTop:{default:.01,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radiusTop,t.radiusBottom,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],159:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("cylinder",{schema:{height:{default:1,min:0},openEnded:{default:!1},radius:{default:1,min:0},segmentsHeight:{default:18,min:1,type:"int"},segmentsRadial:{default:36,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.CylinderGeometry(t.radius,t.radius,t.height,t.segmentsRadial,t.segmentsHeight,t.openEnded,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],160:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("dodecahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.DodecahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],161:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("icosahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.IcosahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],162:[function(t){t("./box.js"),t("./circle.js"),t("./cone.js"),t("./cylinder.js"),t("./dodecahedron.js"),t("./icosahedron.js"),t("./octahedron.js"),t("./plane.js"),t("./ring.js"),t("./sphere.js"),t("./tetrahedron.js"),t("./torus.js"),t("./torusKnot.js"),t("./triangle.js")},{"./box.js":156,"./circle.js":157,"./cone.js":158,"./cylinder.js":159,"./dodecahedron.js":160,"./icosahedron.js":161,"./octahedron.js":163,"./plane.js":164,"./ring.js":165,"./sphere.js":166,"./tetrahedron.js":167,"./torus.js":168,"./torusKnot.js":169,"./triangle.js":170}],163:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("octahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.OctahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],164:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("plane",{schema:{height:{default:1,min:0},width:{default:1,min:0},segmentsHeight:{default:1,min:1,max:20,type:"int"},segmentsWidth:{default:1,min:1,max:20,type:"int"}},init:function(t){this.geometry=new a.PlaneGeometry(t.width,t.height,t.segmentsWidth,t.segmentsHeight)}})},{"../core/geometry":126,"../lib/three":173}],165:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("ring",{schema:{radiusInner:{default:.8,min:0},radiusOuter:{default:1.2,min:0},segmentsPhi:{default:10,min:1,type:"int"},segmentsTheta:{default:32,min:3,type:"int"},thetaLength:{default:360,min:0},thetaStart:{default:0}},init:function(t){this.geometry=new a.RingGeometry(t.radiusInner,t.radiusOuter,t.segmentsTheta,t.segmentsPhi,o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],166:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("sphere",{schema:{radius:{default:1,min:0},phiLength:{default:360},phiStart:{default:0,min:0},thetaLength:{default:180,min:0},thetaStart:{default:0},segmentsHeight:{default:18,min:2,type:"int"},segmentsWidth:{default:36,min:3,type:"int"}},init:function(t){this.geometry=new a.SphereGeometry(t.radius,t.segmentsWidth,t.segmentsHeight,o(t.phiStart),o(t.phiLength),o(t.thetaStart),o(t.thetaLength))}})},{"../core/geometry":126,"../lib/three":173}],167:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("tetrahedron",{schema:{detail:{default:0,min:0,max:5,type:"int"},radius:{default:1,min:0}},init:function(t){this.geometry=new a.TetrahedronGeometry(t.radius,t.detail)}})},{"../core/geometry":126,"../lib/three":173}],168:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three"),o=a.Math.degToRad;r("torus",{schema:{arc:{default:360},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:36,min:2,type:"int"},segmentsTubular:{default:32,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusGeometry(t.radius,2*t.radiusTubular,t.segmentsRadial,t.segmentsTubular,o(t.arc))}})},{"../core/geometry":126,"../lib/three":173}],169:[function(t){var r=t("../core/geometry").registerGeometry,a=t("../lib/three");r("torusKnot",{schema:{p:{default:2,min:1},q:{default:3,min:1},radius:{default:1,min:0},radiusTubular:{default:.2,min:0},segmentsRadial:{default:8,min:3,type:"int"},segmentsTubular:{default:100,min:3,type:"int"}},init:function(t){this.geometry=new a.TorusKnotGeometry(t.radius,2*t.radiusTubular,t.segmentsTubular,t.segmentsRadial,t.p,t.q)}})},{"../core/geometry":126,"../lib/three":173}],170:[function(t){var r=t("../core/geometry").registerGeometry,i=t("../lib/three"),s=new i.Quaternion,l=new i.Vector3(0,0,1),d=new i.Vector2,p=new i.Vector2,u=new i.Vector2;r("triangle",{schema:{vertexA:{type:"vec3",default:{x:0,y:.5,z:0}},vertexB:{type:"vec3",default:{x:-.5,y:-.5,z:0}},vertexC:{type:"vec3",default:{x:.5,y:-.5,z:0}}},init:function(m){var g,t,r,o,c,n;r=new i.Triangle,r.a.set(m.vertexA.x,m.vertexA.y,m.vertexA.z),r.b.set(m.vertexB.x,m.vertexB.y,m.vertexB.z),r.c.set(m.vertexC.x,m.vertexC.y,m.vertexC.z),t=r.normal(),s.setFromUnitVectors(t,l),o=r.a.clone().applyQuaternion(s),c=r.b.clone().applyQuaternion(s),n=r.c.clone().applyQuaternion(s),d.set(N(o.x,c.x,n.x),N(o.y,c.y,n.y)),p.set(L(o.x,c.x,n.x),L(o.y,c.y,n.y)),u.set(0,0).subVectors(p,d),o=new i.Vector2().subVectors(o,d).divide(u),c=new i.Vector2().subVectors(c,d).divide(u),n=new i.Vector2().subVectors(n,d).divide(u),g=this.geometry=new i.Geometry,g.vertices.push(r.a),g.vertices.push(r.b),g.vertices.push(r.c),g.faces.push(new i.Face3(0,1,2,t)),g.faceVertexUvs[0]=[[o,c,n]]}})},{"../core/geometry":126,"../lib/three":173}],171:[function(t,r){var a=t("./utils/"),o=a.debug,i=o("A-Frame:error"),n=o("A-Frame:warn");window.document.currentScript&&window.document.currentScript.parentNode!==window.document.head&&!window.debug&&n("Put the A-Frame <script> tag in the <head> of the HTML *before* the scene to ensure everything for A-Frame is properly registered before they are used from HTML."),"file:"===window.location.protocol&&i("This HTML file is currently being served via the file:// protocol. Assets, textures, and models WILL NOT WORK due to cross-origin policy! Please use a local or hosted server: https://aframe.io/docs/0.5.0/introduction/getting-started.html#using-a-local-server."),window.Promise=window.Promise||t("promise-polyfill"),window.hasNativeWebVRImplementation=!!window.navigator.getVRDisplays||!!window.navigator.getVRDevices,window.WebVRConfig=window.WebVRConfig||{BUFFER_SCALE:1,CARDBOARD_UI_DISABLED:!0,ROTATE_INSTRUCTIONS_DISABLED:!0,TOUCH_PANNER_DISABLED:!0,MOUSE_KEYBOARD_CONTROLS_DISABLED:!0},a.device.isIOSOlderThan10(window.navigator.userAgent)&&(window.WebVRConfig.BUFFER_SCALE=1/window.devicePixelRatio),t("webvr-polyfill"),t("present"),a.device.isBrowserEnvironment&&(t("./style/aframe.css"),t("./style/rStats.css"));var s=t("./core/scene/a-scene").AScene,l=t("./core/component").components,d=t("./core/component").registerComponent,c=t("./core/geometry").registerGeometry,p=t("./extras/primitives/primitives").registerPrimitive,u=t("./core/shader").registerShader,m=t("./core/system").registerSystem,g=t("./core/shader").shaders,h=t("./core/system").systems,y=window.THREE=t("./lib/three"),f=window.TWEEN=t("@tweenjs/tween.js"),M=t("../package");t("./components/index"),t("./geometries/index"),t("./shaders/index"),t("./systems/index");var x=t("./core/a-node"),E=t("./core/a-entity");t("./core/a-animation"),t("./core/a-assets"),t("./core/a-cubemap"),t("./core/a-mixin"),t("./extras/components/"),t("./extras/primitives/"),console.log("A-Frame Version: 0.7.0 (Date 22-09-2017, Commit #570c623e)"),console.log("three Version:",M.dependencies.three),console.log("WebVR Polyfill Version:",M.dependencies["webvr-polyfill"]),r.exports=window.AFRAME={AComponent:t("./core/component").Component,AEntity:E,ANode:x,AScene:s,components:l,geometries:t("./core/geometry").geometries,registerComponent:d,registerElement:t("./core/a-register-element").registerElement,registerGeometry:c,registerPrimitive:p,registerShader:u,registerSystem:m,primitives:{getMeshMixin:t("./extras/primitives/getMeshMixin"),primitives:t("./extras/primitives/primitives").primitives},scenes:t("./core/scene/scenes"),schema:t("./core/schema"),shaders:g,systems:h,THREE:y,TWEEN:f,utils:a,version:M.version}},{"../package":76,"./components/index":85,"./core/a-animation":118,"./core/a-assets":119,"./core/a-cubemap":120,"./core/a-entity":121,"./core/a-mixin":122,"./core/a-node":123,"./core/a-register-element":124,"./core/component":125,"./core/geometry":126,"./core/scene/a-scene":128,"./core/scene/scenes":131,"./core/schema":133,"./core/shader":134,"./core/system":135,"./extras/components/":136,"./extras/primitives/":139,"./extras/primitives/getMeshMixin":138,"./extras/primitives/primitives":140,"./geometries/index":162,"./lib/three":173,"./shaders/index":175,"./style/aframe.css":180,"./style/rStats.css":181,"./systems/index":184,"./utils/":195,"@tweenjs/tween.js":1,present:33,"promise-polyfill":34,"webvr-polyfill":61}],172:[function(t,r){window.aframeStats=function(r){function t(){var r=o.querySelectorAll("*");return Array.prototype.slice.call(r).filter(function(r){return r.isEntity}),r.length}var a=null,o=r;return{update:function(){a("te").set(t()),window.performance.getEntriesByName&&a("lt").set(window.performance.getEntriesByName("render-started")[0].startTime.toFixed(0))},start:function(){},end:function(){},attach:function(r){a=r},values:{te:{caption:"Entities"},lt:{caption:"Load Time"}},groups:[{caption:"A-Frame",values:["te","lt"]}],fractions:[]}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={aframeStats:window.aframeStats})},{}],173:[function(t,r){(function(a){var o=a.THREE=t("three");o.TextureLoader&&(o.TextureLoader.prototype.crossOrigin="anonymous"),o.ImageLoader&&(o.ImageLoader.prototype.crossOrigin="anonymous"),o.Cache&&(o.Cache.enabled=!0),t("three/examples/js/loaders/GLTFLoader"),t("three/examples/js/loaders/OBJLoader"),t("three/examples/js/loaders/MTLLoader"),t("three/examples/js/loaders/ColladaLoader"),t("../../vendor/VRControls"),t("../../vendor/VREffect"),o.ColladaLoader.prototype.crossOrigin="anonymous",o.GLTFLoader.prototype.crossOrigin="anonymous",o.MTLLoader.prototype.crossOrigin="anonymous",o.OBJLoader.prototype.crossOrigin="anonymous",r.exports=o}).call(this,"undefined"===typeof global?"undefined"===typeof self?"undefined"===typeof window?{}:window:self:global)},{"../../vendor/VRControls":200,"../../vendor/VREffect":201,three:41,"three/examples/js/loaders/ColladaLoader":42,"three/examples/js/loaders/GLTFLoader":43,"three/examples/js/loaders/MTLLoader":44,"three/examples/js/loaders/OBJLoader":45}],174:[function(t,r){function a(t){return{fog:t.fog,color:new i.Color(t.color),wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth}}var o=t("../core/shader").registerShader,i=t("../lib/three"),n=t("../utils/");r.exports.Shader=o("flat",{schema:{color:{type:"color"},fog:{default:!0},height:{default:256},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.textureSrc=null,this.material=new i.MeshBasicMaterial(a(t)),n.material.updateMap(this,t)},update:function(t){this.updateMaterial(t),n.material.updateMap(this,t)},updateMaterial:function(r){var o=this.material;r=a(r),Object.keys(r).forEach(function(t){o[t]=r[t]})}})},{"../core/shader":134,"../lib/three":173,"../utils/":195}],175:[function(t){t("./flat"),t("./standard"),t("./sdf"),t("./msdf"),t("./ios10hls")},{"./flat":174,"./ios10hls":176,"./msdf":177,"./sdf":178,"./standard":179}],176:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("ios10hls",{schema:{src:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},vertexShader:"varying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"uniform sampler2D src;\nuniform float opacity;\nvarying vec2 vUV;\nvoid main() {\n  vec2 offset = vec2(0, 0);\n  vec2 repeat = vec2(1, 1);\n  vec4 color = texture2D(src, vec2(vUV.x / repeat.x + offset.x, (1.0 - vUV.y) / repeat.y + offset.y)).bgra;\n  gl_FragColor = vec4(color.rgb, opacity);\n}"})},{"../core/shader":134}],177:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("msdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nvarying vec2 vUV;\nfloat median(float r, float g, float b) {\n  return max(min(r, g), min(max(r, g), b));\n}\nvoid main() {\n  vec3 sample = 1.0 - texture2D(map, vUV).rgb;\n  float sigDist = median(sample.r, sample.g, sample.b) - 0.5;\n  float alpha = clamp(sigDist/fwidth(sigDist) + 0.5, 0.0, 1.0);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(vUV) + dFdy(vUV));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * (sigDist + 0.5);\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n  gl_FragColor = vec4(color.xyz, alpha * opacity);\n}"})},{"../core/shader":134}],178:[function(t,r){var a=t("../core/shader").registerShader;r.exports.Shader=a("sdf",{schema:{alphaTest:{type:"number",is:"uniform",default:.5},color:{type:"color",is:"uniform",default:"white"},map:{type:"map",is:"uniform"},opacity:{type:"number",is:"uniform",default:1}},raw:!0,vertexShader:"attribute vec2 uv;\nattribute vec3 position;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nvarying vec2 vUV;\nvoid main(void) {\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  vUV = uv;\n}",fragmentShader:"#ifdef GL_OES_standard_derivatives\n#extension GL_OES_standard_derivatives: enable\n#endif\nprecision highp float;\n#define BIG_ENOUGH 0.001\n#define MODIFIED_ALPHATEST (0.02 * isBigEnough / BIG_ENOUGH)\n#define ALL_SMOOTH 0.4\n#define ALL_ROUGH 0.02\n#define DISCARD_ALPHA (alphaTest / (2.2 - 1.2 * ratio))\nuniform sampler2D map;\nuniform vec3 color;\nuniform float opacity;\nuniform float alphaTest;\nvarying vec2 vUV;\n#ifdef GL_OES_standard_derivatives\nfloat contour(float width, float value) {\n  return smoothstep(0.5 - value, 0.5 + value, width);\n}\n#else\nfloat aastep(float value, float afwidth) {\n  return smoothstep(0.5 - afwidth, 0.5 + afwidth, value);\n}\n#endif\nvoid main() {\n#ifdef GL_OES_standard_derivatives\n  vec2 uv = vUV;\n  vec4 texColor = texture2D(map, uv);\n  float dist = texColor.a;\n  float width = fwidth(dist);\n  float alpha = contour(dist, width);\n  float dscale = 0.353505;\n  vec2 duv = dscale * (dFdx(uv) + dFdy(uv));\n  float isBigEnough = max(abs(duv.x), abs(duv.y));\n  if (isBigEnough > BIG_ENOUGH) {\n    float ratio = BIG_ENOUGH / isBigEnough;\n    alpha = ratio * alpha + (1.0 - ratio) * dist;\n  }\n  else if (isBigEnough <= BIG_ENOUGH) {\n    vec4 box = vec4 (uv - duv, uv + duv);\n    alpha = (alpha + 0.5 * (\n      contour(texture2D(map, box.xy).a, width)\n      + contour(texture2D(map, box.zw).a, width)\n      + contour(texture2D(map, box.xw).a, width)\n      + contour(texture2D(map, box.zy).a, width)\n    )) / 3.0;\n  }\n  if (isBigEnough <= BIG_ENOUGH && alpha < alphaTest) { discard; return; }\n  if (alpha < alphaTest * MODIFIED_ALPHATEST) { discard; return; }\n#else\n  vec4 texColor = texture2D(map, vUV);\n  float value = texColor.a;\n  float afwidth = (1.0 / 32.0) * (1.4142135623730951 / (2.0 * gl_FragCoord.w));\n  float alpha = aastep(value, afwidth);\n  float ratio = (gl_FragCoord.w >= ALL_SMOOTH) ? 1.0 : (gl_FragCoord.w < ALL_ROUGH) ? 0.0 : (gl_FragCoord.w - ALL_ROUGH) / (ALL_SMOOTH - ALL_ROUGH);\n  if (alpha < alphaTest) { if (ratio >= 1.0) { discard; return; } alpha = 0.0; }\n  alpha = alpha * ratio + (1.0 - ratio) * value;\n  if (ratio < 1.0)\n    if (alpha <= DISCARD_ALPHA) { discard; return; }\n#endif\n  gl_FragColor = vec4(color, opacity * alpha);\n}"})},{"../core/shader":134}],179:[function(t,r){function o(t){var r={color:new i.Color(t.color),emissive:new i.Color(t.emissive),emissiveIntensity:t.emissiveIntensity,fog:t.fog,metalness:t.metalness,roughness:t.roughness,wireframe:t.wireframe,wireframeLinewidth:t.wireframeLinewidth};return t.normalMap&&(r.normalScale=t.normalScale),t.ambientOcclusionMap&&(r.aoMapIntensity=t.ambientOcclusionMapIntensity),t.displacementMap&&(r.displacementScale=t.displacementScale,r.displacementBias=t.displacementBias),r}var a=t("../core/shader").registerShader,i=t("../lib/three"),n=t("../utils/"),s=new i.CubeTextureLoader,l={};r.exports.Shader=a("standard",{schema:{ambientOcclusionMap:{type:"map"},ambientOcclusionMapIntensity:{default:1},ambientOcclusionTextureOffset:{type:"vec2"},ambientOcclusionTextureRepeat:{type:"vec2",default:{x:1,y:1}},color:{type:"color"},displacementMap:{type:"map"},displacementScale:{default:1},displacementBias:{default:.5},displacementTextureOffset:{type:"vec2"},displacementTextureRepeat:{type:"vec2",default:{x:1,y:1}},emissive:{type:"color",default:"#000"},emissiveIntensity:{default:1},envMap:{default:""},fog:{default:!0},height:{default:256},metalness:{default:0,min:0,max:1},normalMap:{type:"map"},normalScale:{type:"vec2",default:{x:1,y:1}},normalTextureOffset:{type:"vec2"},normalTextureRepeat:{type:"vec2",default:{x:1,y:1}},offset:{type:"vec2",default:{x:0,y:0}},repeat:{type:"vec2",default:{x:1,y:1}},roughness:{default:.5,min:0,max:1},sphericalEnvMap:{type:"map"},src:{type:"map"},width:{default:512},wireframe:{default:!1},wireframeLinewidth:{default:2}},init:function(t){this.material=new i.MeshStandardMaterial(o(t)),n.material.updateMap(this,t),t.normalMap&&n.material.updateDistortionMap("normal",this,t),t.displacementMap&&n.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&n.material.updateDistortionMap("ambientOcclusion",this,t),this.updateEnvMap(t)},update:function(t){this.updateMaterial(t),n.material.updateMap(this,t),t.normalMap&&n.material.updateDistortionMap("normal",this,t),t.displacementMap&&n.material.updateDistortionMap("displacement",this,t),t.ambientOcclusionMap&&n.material.updateDistortionMap("ambientOcclusion",this,t),this.updateEnvMap(t)},updateMaterial:function(r){var i=this.material;r=o(r),Object.keys(r).forEach(function(a){i[a]=r[a]})},updateEnvMap:function(r){var o=this,a=this.material,t=r.envMap,d=r.sphericalEnvMap;return(t||d)&&!this.isLoadingEnvMap?(this.isLoadingEnvMap=!0,d?void this.el.sceneEl.systems.material.loadTexture(d,{src:d},function(t){o.isLoadingEnvMap=!1,t.mapping=i.SphericalReflectionMapping,a.envMap=t,n.material.handleTextureEvents(o.el,t),a.needsUpdate=!0}):l[t]?void l[t].then(function(t){o.isLoadingEnvMap=!1,a.envMap=t,n.material.handleTextureEvents(o.el,t),a.needsUpdate=!0}):void(l[t]=new Promise(function(r){n.srcLoader.validateCubemapSrc(t,function(t){s.load(t,function(t){o.isLoadingEnvMap=!1,a.envMap=t,n.material.handleTextureEvents(o.el,t),r(t)})})}))):(a.envMap=null,void(a.needsUpdate=!0))}})},{"../core/shader":134,"../lib/three":173,"../utils/":195}],180:[function(t,r){var a=".a-html{bottom:0;left:0;position:fixed;right:0;top:0}.a-body{height:100%;margin:0;overflow:hidden;padding:0;width:100%}:-webkit-full-screen{background-color:transparent}.a-hidden{display:none!important}.a-canvas{height:100%;left:0;position:absolute;top:0;width:100%}.a-canvas.a-grab-cursor:hover{cursor:grab;cursor:-moz-grab;cursor:-webkit-grab}.a-canvas.a-grab-cursor:active,.a-grabbing{cursor:grabbing;cursor:-moz-grabbing;cursor:-webkit-grabbing}// Class is removed when doing <a-scene embedded>. a-scene.fullscreen .a-canvas{width:100%!important;height:100%!important;top:0!important;left:0!important;right:0!important;bottom:0!important;z-index:999999!important;position:fixed!important}.a-inspector-loader{background-color:#ed3160;position:fixed;left:3px;top:3px;padding:6px 10px;color:#fff;text-decoration:none;font-size:12px;font-family:Roboto,sans-serif;text-align:center;z-index:99999;width:204px}@keyframes dots-1{from{opacity:0}25%{opacity:1}}@keyframes dots-2{from{opacity:0}50%{opacity:1}}@keyframes dots-3{from{opacity:0}75%{opacity:1}}@-webkit-keyframes dots-1{from{opacity:0}25%{opacity:1}}@-webkit-keyframes dots-2{from{opacity:0}50%{opacity:1}}@-webkit-keyframes dots-3{from{opacity:0}75%{opacity:1}}.a-inspector-loader .dots span{animation:dots-1 2s infinite steps(1);-webkit-animation:dots-1 2s infinite steps(1)}.a-inspector-loader .dots span:first-child+span{animation-name:dots-2;-webkit-animation-name:dots-2}.a-inspector-loader .dots span:first-child+span+span{animation-name:dots-3;-webkit-animation-name:dots-3}a-scene{display:block;position:relative;height:100%;width:100%}a-assets,a-scene audio,a-scene img,a-scene video{display:none}.a-enter-vr-modal,.a-orientation-modal{font-family:Consolas,Andale Mono,Courier New,monospace}.a-enter-vr-modal a{border-bottom:1px solid #fff;padding:2px 0;text-decoration:none;transition:.1s color ease-in}.a-enter-vr-modal a:hover{background-color:#fff;color:#111;padding:2px 4px;position:relative;left:-4px}.a-enter-vr{font-family:sans-serif,monospace;font-size:13px;width:100%;font-weight:200;line-height:16px;position:absolute;right:20px;bottom:20px}.a-enter-vr.embedded{right:5px;bottom:5px}.a-enter-vr-button,.a-enter-vr-modal,.a-enter-vr-modal a{color:#fff}.a-enter-vr-button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%20245.82%20141.73%22%3E%3Cdefs%3E%3Cstyle%3E.a%7Bfill%3A%23fff%3Bfill-rule%3Aevenodd%3B%7D%3C%2Fstyle%3E%3C%2Fdefs%3E%3Ctitle%3Emask%3C%2Ftitle%3E%3Cpath%20class%3D%22a%22%20d%3D%22M175.56%2C111.37c-22.52%2C0-40.77-18.84-40.77-42.07S153%2C27.24%2C175.56%2C27.24s40.77%2C18.84%2C40.77%2C42.07S198.08%2C111.37%2C175.56%2C111.37ZM26.84%2C69.31c0-23.23%2C18.25-42.07%2C40.77-42.07s40.77%2C18.84%2C40.77%2C42.07-18.26%2C42.07-40.77%2C42.07S26.84%2C92.54%2C26.84%2C69.31ZM27.27%2C0C11.54%2C0%2C0%2C12.34%2C0%2C28.58V110.9c0%2C16.24%2C11.54%2C30.83%2C27.27%2C30.83H99.57c2.17%2C0%2C4.19-1.83%2C5.4-3.7L116.47%2C118a8%2C8%2C0%2C0%2C1%2C12.52-.18l11.51%2C20.34c1.2%2C1.86%2C3.22%2C3.61%2C5.39%2C3.61h72.29c15.74%2C0%2C27.63-14.6%2C27.63-30.83V28.58C245.82%2C12.34%2C233.93%2C0%2C218.19%2C0H27.27Z%22%2F%3E%3C%2Fsvg%3E) 50% 50%/70% 70% no-repeat rgba(0,0,0,.35);border:0;bottom:0;cursor:pointer;min-width:50px;min-height:30px;padding-right:5%;padding-top:4%;position:absolute;right:0;transition:background-color .05s ease;-webkit-transition:background-color .05s ease;z-index:9999}.a-enter-vr-button:active,.a-enter-vr-button:hover{background-color:#666}[data-a-enter-vr-no-webvr] .a-enter-vr-button{border-color:#666;opacity:.65}[data-a-enter-vr-no-webvr] .a-enter-vr-button:active,[data-a-enter-vr-no-webvr] .a-enter-vr-button:hover{background-color:rgba(0,0,0,.35);cursor:not-allowed}.a-enter-vr-modal{background-color:#666;border-radius:0;display:none;min-height:32px;margin-right:70px;padding:9px;width:280px;right:2%;position:absolute}.a-enter-vr-modal:after{border-bottom:10px solid transparent;border-left:10px solid #666;border-top:10px solid transparent;display:inline-block;content:'';position:absolute;right:-5px;top:5px;width:0;height:0}.a-enter-vr-modal a,.a-enter-vr-modal p{display:inline}.a-enter-vr-modal p{margin:0}.a-enter-vr-modal p:after{content:' '}[data-a-enter-vr-no-headset].a-enter-vr:hover .a-enter-vr-modal,[data-a-enter-vr-no-webvr].a-enter-vr:hover .a-enter-vr-modal{display:block}.a-orientation-modal{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%2090%2090%22%20enable-background%3D%22new%200%200%2090%2090%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpolygon%20points%3D%220%2C0%200%2C0%200%2C0%20%22%3E%3C/polygon%3E%3Cg%3E%3Cpath%20d%3D%22M71.545%2C48.145h-31.98V20.743c0-2.627-2.138-4.765-4.765-4.765H18.456c-2.628%2C0-4.767%2C2.138-4.767%2C4.765v42.789%20%20%20c0%2C2.628%2C2.138%2C4.766%2C4.767%2C4.766h5.535v0.959c0%2C2.628%2C2.138%2C4.765%2C4.766%2C4.765h42.788c2.628%2C0%2C4.766-2.137%2C4.766-4.765V52.914%20%20%20C76.311%2C50.284%2C74.173%2C48.145%2C71.545%2C48.145z%20M18.455%2C16.935h16.344c2.1%2C0%2C3.808%2C1.708%2C3.808%2C3.808v27.401H37.25V22.636%20%20%20c0-0.264-0.215-0.478-0.479-0.478H16.482c-0.264%2C0-0.479%2C0.214-0.479%2C0.478v36.585c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h7.507v7.644%20%20%20h-5.534c-2.101%2C0-3.81-1.709-3.81-3.81V20.743C14.645%2C18.643%2C16.354%2C16.935%2C18.455%2C16.935z%20M16.96%2C23.116h19.331v25.031h-7.535%20%20%20c-2.628%2C0-4.766%2C2.139-4.766%2C4.768v5.828h-7.03V23.116z%20M71.545%2C73.064H28.757c-2.101%2C0-3.81-1.708-3.81-3.808V52.914%20%20%20c0-2.102%2C1.709-3.812%2C3.81-3.812h42.788c2.1%2C0%2C3.809%2C1.71%2C3.809%2C3.812v16.343C75.354%2C71.356%2C73.645%2C73.064%2C71.545%2C73.064z%22%3E%3C/path%3E%3Cpath%20d%3D%22M28.919%2C58.424c-1.466%2C0-2.659%2C1.193-2.659%2C2.66c0%2C1.466%2C1.193%2C2.658%2C2.659%2C2.658c1.468%2C0%2C2.662-1.192%2C2.662-2.658%20%20%20C31.581%2C59.617%2C30.387%2C58.424%2C28.919%2C58.424z%20M28.919%2C62.786c-0.939%2C0-1.703-0.764-1.703-1.702c0-0.939%2C0.764-1.704%2C1.703-1.704%20%20%20c0.94%2C0%2C1.705%2C0.765%2C1.705%2C1.704C30.623%2C62.022%2C29.858%2C62.786%2C28.919%2C62.786z%22%3E%3C/path%3E%3Cpath%20d%3D%22M69.654%2C50.461H33.069c-0.264%2C0-0.479%2C0.215-0.479%2C0.479v20.288c0%2C0.264%2C0.215%2C0.478%2C0.479%2C0.478h36.585%20%20%20c0.263%2C0%2C0.477-0.214%2C0.477-0.478V50.939C70.131%2C50.676%2C69.917%2C50.461%2C69.654%2C50.461z%20M69.174%2C51.417V70.75H33.548V51.417H69.174z%22%3E%3C/path%3E%3Cpath%20d%3D%22M45.201%2C30.296c6.651%2C0%2C12.233%2C5.351%2C12.551%2C11.977l-3.033-2.638c-0.193-0.165-0.507-0.142-0.675%2C0.048%20%20%20c-0.174%2C0.198-0.153%2C0.501%2C0.045%2C0.676l3.883%2C3.375c0.09%2C0.075%2C0.198%2C0.115%2C0.312%2C0.115c0.141%2C0%2C0.273-0.061%2C0.362-0.166%20%20%20l3.371-3.877c0.173-0.2%2C0.151-0.502-0.047-0.675c-0.194-0.166-0.508-0.144-0.676%2C0.048l-2.592%2C2.979%20%20%20c-0.18-3.417-1.629-6.605-4.099-9.001c-2.538-2.461-5.877-3.817-9.404-3.817c-0.264%2C0-0.479%2C0.215-0.479%2C0.479%20%20%20C44.72%2C30.083%2C44.936%2C30.296%2C45.201%2C30.296z%22%3E%3C/path%3E%3C/g%3E%3C/svg%3E) center/50% 50% no-repeat rgba(244,244,244,1);bottom:0;font-size:14px;font-weight:600;left:0;line-height:20px;right:0;position:fixed;top:0;z-index:9999999}.a-orientation-modal:after{color:#666;content:\"Insert phone into Cardboard holder.\";display:block;position:absolute;text-align:center;top:70%;transform:translateY(-70%);width:100%}.a-orientation-modal button{background:url(data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20xmlns%3Axlink%3D%22http%3A//www.w3.org/1999/xlink%22%20version%3D%221.1%22%20x%3D%220px%22%20y%3D%220px%22%20viewBox%3D%220%200%20100%20100%22%20enable-background%3D%22new%200%200%20100%20100%22%20xml%3Aspace%3D%22preserve%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M55.209%2C50l17.803-17.803c1.416-1.416%2C1.416-3.713%2C0-5.129c-1.416-1.417-3.713-1.417-5.129%2C0L50.08%2C44.872%20%20L32.278%2C27.069c-1.416-1.417-3.714-1.417-5.129%2C0c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129L44.951%2C50L27.149%2C67.803%20%20c-1.417%2C1.416-1.417%2C3.713%2C0%2C5.129c0.708%2C0.708%2C1.636%2C1.062%2C2.564%2C1.062c0.928%2C0%2C1.856-0.354%2C2.564-1.062L50.08%2C55.13l17.803%2C17.802%20%20c0.708%2C0.708%2C1.637%2C1.062%2C2.564%2C1.062s1.856-0.354%2C2.564-1.062c1.416-1.416%2C1.416-3.713%2C0-5.129L55.209%2C50z%22%3E%3C/path%3E%3C/svg%3E) no-repeat;border:none;height:50px;text-indent:-9999px;width:50px}";t("browserify-css").createStyle(a,{href:"src/style/aframe.css"}),r.exports=a},{"browserify-css":5}],181:[function(t,r){var a=".rs-base{background-color:#333;color:#fafafa;border-radius:0;font:10px monospace;left:5px;line-height:1em;opacity:.85;overflow:hidden;padding:10px;position:fixed;top:5px;width:300px;z-index:10000}.rs-base div.hidden{display:none}.rs-base h1{color:#fff;cursor:pointer;font-size:1.4em;font-weight:300;margin:0 0 5px;padding:0}.rs-group{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-direction:column-reverse;flex-direction:column-reverse;margin-bottom:5px}.rs-group:last-child{margin-bottom:0}.rs-counter-base{align-items:center;display:-webkit-box;display:-webkit-flex;display:flex;height:10px;-webkit-justify-content:space-between;justify-content:space-between;margin:2px 0}.rs-counter-base.alarm{color:#b70000;text-shadow:0 0 0 #b70000,0 0 1px #fff,0 0 1px #fff,0 0 2px #fff,0 0 2px #fff,0 0 3px #fff,0 0 3px #fff,0 0 4px #fff,0 0 4px #fff}.rs-counter-id{font-weight:300;-webkit-box-ordinal-group:0;-webkit-order:0;order:0;width:54px}.rs-counter-value{font-weight:300;-webkit-box-ordinal-group:1;-webkit-order:1;order:1;text-align:right;width:35px}.rs-canvas{-webkit-box-ordinal-group:2;-webkit-order:2;order:2}@media (min-width:480px){.rs-base{left:20px;top:20px}}";t("browserify-css").createStyle(a,{href:"src/style/rStats.css"}),r.exports=a},{"browserify-css":5}],182:[function(t,r){function o(r){var a;r.camera&&(a=r.querySelector("["+d+"]"))&&r.removeChild(a)}var a=t("../utils/bind"),i=t("../constants/"),n=t("../core/system").registerSystem,d="data-aframe-default-camera";r.exports.System=n("camera",{init:function(){this.activeCameraEl=null,this.sceneEl.addEventListener("loaded",a(this.setupDefaultCamera,this))},setupDefaultCamera:function(){var r=this.sceneEl,t;return r.camera?void r.emit("camera-ready",{cameraEl:r.camera.el}):void(t=document.createElement("a-entity"),t.setAttribute("position","0 0 0"),t.setAttribute(d,""),t.setAttribute("camera",{active:!0,userHeight:i.DEFAULT_CAMERA_HEIGHT}),t.setAttribute("wasd-controls",""),t.setAttribute("look-controls",""),t.setAttribute(i.AFRAME_INJECTED,""),r.appendChild(t),r.addEventListener("enter-vr",this.removeDefaultOffset),r.addEventListener("exit-vr",this.addDefaultOffset),r.emit("camera-ready",{cameraEl:t}))},disableActiveCamera:function(){var t=this.sceneEl.querySelectorAll("[camera]");t[t.length-1].setAttribute("camera","active",!0)},setActiveCamera:function(n){var p=this.activeCameraEl,s=this.sceneEl,c,t,a,r;if((r=n.getObject3D("camera"))&&n!==this.activeCameraEl){var i=s.querySelector("["+d+"]"),u=i&&i.querySelector("[camera]");for(n!==u&&o(s),this.activeCameraEl=n,this.activeCameraEl.play(),s.camera=r,p&&p.setAttribute("camera","active",!1),t=s.querySelectorAll("[camera]"),a=0;a<t.length;a++)c=t[a],n!==c&&(c.setAttribute("camera","active",!1),c.pause());s.emit("camera-set-active",{cameraEl:n})}}})},{"../constants/":116,"../core/system":135,"../utils/bind":189}],183:[function(t,r){function a(a){var i=a.primitive,t=l[i]&&l[i].Geometry,n=new t;if(!t)throw new Error("Unknown geometry `"+i+"`");return n.init(a),s(n.geometry,a.buffer)}function n(r,a){r[a]--}function i(r,a){r[a]=void 0===r[a]?1:r[a]+1}function s(a,o){var t;return o?(t=new d.BufferGeometry().fromGeometry(a),t.metadata={type:a.type,parameters:a.parameters||{}},a.dispose(),t):a}var l=t("../core/geometry").geometries,o=t("../core/system").registerSystem,d=t("../lib/three");r.exports.System=o("geometry",{init:function(){this.cache={},this.cacheCount={}},clearCache:function(){this.cache={},this.cacheCount={}},getOrCreateGeometry:function(n){var s=this.cache,o,t;return n.skipCache||n.mergeTo?a(n):(t=this.hash(n),o=s[t],i(this.cacheCount,t),o||(o=a(n),s[t]=o,o))},unuseGeometry:function(a){var s=this.cache,o=this.cacheCount,i,t;a.skipCache||a.mergeTo||(t=this.hash(a),s[t]&&(n(o,t),0<o[t]||(i=s[t],i.dispose(),delete s[t],delete o[t])))},hash:function(t){return JSON.stringify(t)}})},{"../core/geometry":126,"../core/system":135,"../lib/three":173}],184:[function(t){t("./camera"),t("./geometry"),t("./light"),t("./material"),t("./shadow"),t("./tracked-controls")},{"./camera":182,"./geometry":183,"./light":185,"./material":186,"./shadow":187,"./tracked-controls":188}],185:[function(t,r){var a=t("../core/system").registerSystem,o=t("../utils/bind"),n=t("../constants/"),s="data-aframe-default-light";r.exports.System=a("light",{schema:{defaultLightsEnabled:{default:!0}},init:function(){this.defaultLights=!1,this.userDefinedLights=!1,this.sceneEl.addEventListener("loaded",o(this.setupDefaultLights,this))},registerLight:function(r){r.hasAttribute(s)||(this.removeDefaultLights(),this.userDefinedLights=!0)},removeDefaultLights:function(){var r=this.sceneEl,a;if(this.defaultLights){a=document.querySelectorAll("["+s+"]");for(var t=0;t<a.length;t++)r.removeChild(a[t]);this.defaultLights=!1}},setupDefaultLights:function(){var r=this.sceneEl,a,t;this.userDefinedLights||this.defaultLights||!this.data.defaultLightsEnabled||(a=document.createElement("a-entity"),a.setAttribute("light",{color:"#BBB",type:"ambient"}),a.setAttribute(s,""),a.setAttribute(n.AFRAME_INJECTED,""),r.appendChild(a),t=document.createElement("a-entity"),t.setAttribute("light",{color:"#FFF",intensity:.6,castShadow:!0}),t.setAttribute("position",{x:-.5,y:1,z:1}),t.setAttribute(s,""),t.setAttribute(n.AFRAME_INJECTED,""),r.appendChild(t),this.defaultLights=!0)}})},{"../constants/":116,"../core/system":135,"../utils/bind":189}],186:[function(t,r){function a(o,s){var t=s.getAttribute("id"),n,r,i;if(t)return t;for(r="",i=o||{},n=0;n<s.attributes.length;n++)i[s.attributes[n].name]=s.attributes[n].value;return Object.keys(i).sort().forEach(function(t){r+=t+":"+i[t]+";"}),r}function o(o,a){function t(t){function i(r){l(r,a),r.needsUpdate=!0,t(r)}return"string"==typeof o?void h.load(o,i,function(){},function(t){g("`$s` could not be fetched (Error code: %s; Response: %s)",t.status,t.statusText)}):void i(new c.Texture(o))}return new Promise(t)}function l(a,o){var t=o.offset||{x:0,y:0},r=o.repeat||{x:1,y:1};(o.npot||!1)&&(a.wrapS=c.ClampToEdgeWrapping,a.wrapT=c.ClampToEdgeWrapping,a.magFilter=c.LinearFilter,a.minFilter=c.LinearFilter),1===r.x&&1===r.y||(a.wrapS=c.RepeatWrapping,a.wrapT=c.RepeatWrapping,a.repeat.set(r.x,r.y)),0===t.x&&0===t.y||a.offset.set(t.x,t.y)}function d(a,o,t){var r=document.createElement("video");return r.width=o,r.height=t,r.setAttribute("playsinline",""),r.setAttribute("webkit-playsinline",""),r.autoplay=!0,r.loop=!0,r.crossOrigin="anonymous",r.addEventListener("error",function(){y("`$s` is not a valid video",a)},!0),r.src=a,r}function n(t){return t.autoplay=t.hasAttribute("autoplay")&&"false"!==t.getAttribute("autoplay"),t.controls=t.hasAttribute("controls")&&"false"!==t.getAttribute("controls"),"false"===t.getAttribute("loop")&&t.removeAttribute("loop"),"false"===t.getAttribute("preload")&&(t.preload="none"),t.crossOrigin=t.crossOrigin||"anonymous",t.setAttribute("playsinline",""),t.setAttribute("webkit-playsinline",""),t}var i=t("../core/system").registerSystem,c=t("../lib/three"),s=t("../utils/"),p=t("../utils/material").isHLS,u=s.bind,m=s.debug,g=m("components:texture:error"),h=new c.TextureLoader,y=m("components:texture:warn");h.setCrossOrigin("anonymous"),r.exports.System=i("material",{init:function(){this.materials={},this.textureCounts={},this.textureCache={},this.sceneEl.addEventListener("materialtextureloaded",u(this.onMaterialTextureLoaded,this))},clearTextureCache:function(){this.textureCache={}},loadTexture:function(a,o,t){var r=this;return"CANVAS"===a.tagName?void this.loadCanvas(a,o,t):"VIDEO"===a.tagName?(a.hasAttribute("src")||a.hasAttribute("srcObject")||y("Video element was defined without `src` nor `srcObject` attributes."),void this.loadVideo(a,o,t)):void s.srcLoader.validateSrc(a,function(a){r.loadImage(a,o,t)},function(a){r.loadVideo(a,o,t)})},loadImage:function(n,s,t){var r=this.hash(s),i=this.textureCache;return i[r]?void i[r].then(t):void(i[r]=o(n,s),i[r].then(t))},loadCanvas:function(a,o,t){a.readyState=2,a.HAVE_CURRENT_DATA=2,this.loadVideo(a,o,t)},loadVideo:function(m,g,t){function r(r){r.texture.needsUpdate=!0,t(r.texture,r.videoEl)}var i=this.textureCache,u,a,h,y;if("string"!=typeof m){if(h=m,u=this.hashVideo(g,h),i[u])return void i[u].then(r);n(h)}return(h=h||d(m,g.width,g.height),u=this.hashVideo(g,h),i[u])?void i[u].then(r):void(a=new c.VideoTexture(h),a.minFilter=c.LinearFilter,l(a,g),this.sceneEl.isIOS&&p(h.src||h.getAttribute("src"),h.type||h.getAttribute("type"))&&(a.format=c.RGBAFormat,a.needsCorrectionBGRA=!0,a.flipY=!1,a.needsCorrectionFlipY=!0),y={texture:a,videoEl:h},i[u]=Promise.resolve(y),r(y))},hash:function(t){return t.src.tagName&&(t=s.extendDeep({},t),t.src=t.src.getAttribute("src")),JSON.stringify(t)},hashVideo:function(r,o){return a(r,o)},registerMaterial:function(t){this.materials[t.uuid]=t},unregisterMaterial:function(a){delete this.materials[a.uuid];var o=this.textureCounts;Object.keys(a).filter(function(r){return a[r]&&a[r].isTexture}).forEach(function(t){0>=--o[a[t].uuid]&&a[t].dispose()})},updateMaterials:function(){var r=this.materials;Object.keys(r).forEach(function(t){r[t].needsUpdate=!0})},onMaterialTextureLoaded:function(t){this.textureCounts[t.detail.texture.uuid]||(this.textureCounts[t.detail.texture.uuid]=0),this.textureCounts[t.detail.texture.uuid]++}})},{"../core/system":135,"../lib/three":173,"../utils/":195,"../utils/material":196}],187:[function(t,r){var a=t("../core/system").registerSystem,o=t("../utils/bind"),i=t("../lib/three"),n={basic:i.BasicShadowMap,pcf:i.PCFShadowMap,pcfsoft:i.PCFSoftShadowMap};r.exports.System=a("shadow",{schema:{type:{default:"pcf",oneOf:["basic","pcf","pcfsoft"]},renderReverseSided:{default:!0},renderSingleSided:{default:!0}},init:function(){var t=this.sceneEl,r=this.data;this.shadowMapEnabled=!1,t.addEventListener("render-target-loaded",o(function(){t.renderer&&(t.renderer.shadowMap.type=n[r.type],t.renderer.shadowMap.renderReverseSided=r.renderReverseSided,t.renderer.shadowMap.renderSingleSided=r.renderSingleSided,this.setShadowMapEnabled(this.shadowMapEnabled))},this))},setShadowMapEnabled:function(t){var r=this.sceneEl.renderer;this.shadowMapEnabled=t,r&&(r.shadowMap.enabled=t)}})},{"../core/system":135,"../lib/three":173,"../utils/bind":189}],188:[function(t,r){var a=t("../core/system").registerSystem;r.exports.System=a("tracked-controls",{init:function(){var r=this;this.controllers=[],this.updateControllerList(),navigator.getVRDisplays&&this.sceneEl.addEventListener("enter-vr",function(){navigator.getVRDisplays().then(function(t){t.length&&(r.vrDisplay=t[0])})})},tick:function(){this.updateControllerList()},updateControllerList:function(){var a=this.controllers,o,t,i,r;if(t=navigator.getGamepads&&navigator.getGamepads()){for(r=a.length,a.length=0,i=0;i<t.length;++i)(o=t[i])&&o.pose&&a.push(o);a.length!==r&&this.el.emit("controllersupdated",void 0,!1)}}})},{"../core/system":135}],189:[function(t,r){r.exports=function(a,r){return function(t){return function(){var i=t.concat(Array.prototype.slice.call(arguments,0));return a.apply(r,i)}}(Array.prototype.slice.call(arguments,2))}},{}],190:[function(t,r){function a(t){return l.test(t)}function i(t){for(var a in t)void 0===t[a]?delete t[a]:t[a].constructor===String&&(t[a]=parseFloat(t[a],10));return t}var o=t("./debug"),n=t("object-assign"),s=o("utils:coordinates:warn"),l=/^\s*((-?\d*\.{0,1}\d+(e-?\d+)?)\s+){2,3}(-?\d*\.{0,1}\d+(e-?\d+)?)\s*$/;r.exports.regex=l,r.exports.parse=function(a,s){var l,o;return a&&a instanceof Object?(s&&(a.x=void 0===a.x?s.x:a.x,a.y=void 0===a.y?s.y:a.y,a.z=void 0===a.z?s.z:a.z,a.w=void 0===a.w?s.w:a.w),i(a)):null===a||void 0===a?"object"==("undefined"===typeof s?"undefined":babelHelpers.typeof(s))?n({},s):s:(l=a.trim().replace(/\s+/g," ").split(" "),o={},o.x=l[0]||s&&s.x,o.y=l[1]||s&&s.y,o.z=l[2]||s&&s.z,o.w=l[3]||s&&s.w,i(o))},r.exports.stringify=function(t){return"object"==("undefined"===typeof t?"undefined":babelHelpers.typeof(t))?[t.x,t.y,t.z,t.w].join(" ").trim():t},r.exports.isCoordinates=a,r.exports.isCoordinate=function(t){return s("`AFRAME.utils.isCoordinate` has been renamed to `AFRAME.utils.isCoordinates`"),a(t)},r.exports.toVector3=function(t){return new THREE.Vector3(t.x,t.y,t.z)}},{"./debug":191,"object-assign":26}],191:[function(t,r){(function(a){function o(t){var a=t.split(":");return a[a.length-1]}function i(t){var a=o(t);return l.colors&&l.colors[a]||null}var n=t("debug"),s=t("object-assign"),l={colors:{debug:"gray",error:"red",info:"gray",warn:"orange"}},d=function(t){var a=n(t);return a.color=i(t),a};s(d,n);var c=function(){try{return window.localStorage}catch(t){}}();c&&(parseInt(c.logs,10)||"true"===c.logs)?d.enable("*"):d.enable("*:error,*:info,*:warn"),a.browser&&(window.logs=d),r.exports=d}).call(this,t("_process"))},{_process:6,debug:10,"object-assign":26}],192:[function(t,r){(function(a){function i(t){return /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(t||window.navigator.userAgent)}function n(){return /iPad|iPhone|iPod/.test(window.navigator.platform)}function o(){return /SamsungBrowser.+Mobile VR/i.test(window.navigator.userAgent)}var s=t("../lib/three"),l=new s.Object3D,d=new s.VRControls(l);r.exports.checkHeadsetConnected=function(){var t=d.getVRDisplay(),r;return t&&"isConnected"in t?t.isConnected:(d.update(),r=l.quaternion,0!==r._x||0!==r._y||0!==r._z)},r.exports.checkHasPositionalTracking=function(){var t=d.getVRDisplay();return!c()&&!o()&&t&&t.capabilities.hasPosition};var c=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0),(n()||i())&&(t=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),function(){return t}}();r.exports.isMobile=c,r.exports.isTablet=i,r.exports.isIOS=n,r.exports.isGearVR=o,r.exports.isLandscape=function(){return 90===window.orientation||-90===window.orientation},r.exports.isIOSOlderThan10=function(t){return /(iphone|ipod|ipad).*os.(7|8|9)/i.test(t)},r.exports.isBrowserEnvironment=!a||a.browser,r.exports.isNodeEnvironment=!r.exports.isBrowserEnvironment}).call(this,t("_process"))},{"../lib/three":173,_process:6}],193:[function(t,r){r.exports.getComponentPropertyPath=function(r,t){return t=t||".",-1===r.indexOf(t)?r:r.split(t)},r.exports.getComponentProperty=function(a,t,i){var r;return i=i||".",-1===t.indexOf(i)?a.getAttribute(t):(r=t.split(i),a.getAttribute(r[0])[r[1]])},r.exports.setComponentProperty=function(a,t,s,r){var o={},i;return(r=r||".",-1!==t.indexOf(r))?(i=t.split(r),o[i[1]]=s,void a.setAttribute(i[0],o)):void a.setAttribute(t,s)}},{}],194:[function(t,r){r.exports=function(r){var t=r.style.width,a=r.style.height;r.style.width=parseInt(t,10)+1+"px",r.style.height=parseInt(a,10)+1+"px",setTimeout(function(){r.style.width=t,r.style.height=a},200)}},{}],195:[function(t,a){function s(a,l){var t,r,o,n,d;if(void 0===a||void 0===l||null===a||null===l||!(a&&l&&a.constructor===Object&&l.constructor===Object||a.constructor===Array&&l.constructor===Array))return a===l;if(r=Object.keys(a),o=Object.keys(l),r.length!==o.length)return!1;for(t=0;t<r.length;++t)if(n=a[r[t]],d=l[r[t]],"object"==("undefined"===typeof n?"undefined":babelHelpers.typeof(n))||"object"==("undefined"===typeof d?"undefined":babelHelpers.typeof(d))||Array.isArray(n)&&Array.isArray(d)){if(n===d)continue;if(!s(n,d))return!1}else if(n!==d)return!1;return!0}var r=t("./debug"),o=t("deep-assign"),i=t("./device"),n=t("object-assign"),l=r("utils:warn");a.exports.bind=t("./bind"),a.exports.coordinates=t("./coordinates"),a.exports.debug=r,a.exports.device=i,a.exports.entity=t("./entity"),a.exports.forceCanvasResizeSafariMobile=t("./forceCanvasResizeSafariMobile"),a.exports.material=t("./material"),a.exports.styleParser=t("./styleParser"),a.exports.trackedControls=t("./tracked-controls"),a.exports.checkHeadsetConnected=function(){return l("`utils.checkHeadsetConnected` has moved to `utils.device.checkHeadsetConnected`"),i.checkHeadsetConnected(arguments)},a.exports.isGearVR=function(){return l("`utils.isGearVR` has moved to `utils.device.isGearVR`"),i.isGearVR(arguments)},a.exports.isIOS=function(){return l("`utils.isIOS` has moved to `utils.device.isIOS`"),i.isIOS(arguments)},a.exports.isMobile=function(){return l("`utils.isMobile has moved to `utils.device.isMobile`"),i.isMobile(arguments)},a.exports.throttle=function(i,s,t){var l;return t&&(i=a.exports.bind(i,t)),function(){var t=Date.now(),r=void 0===l?s:t-l;(void 0===l||r>=s)&&(l=t,i.apply(null,arguments))}},a.exports.throttleTick=function(s,l,t){var d;return t&&(s=a.exports.bind(s,t)),function(t,r){var a=void 0===d?r:t-d;(void 0===d||a>=l)&&(d=t,s(t,a))}},a.exports.debounce=function(a,l,t){var r;return function(){var d=this,n=arguments,i=t&&!r;clearTimeout(r),r=setTimeout(function(){r=null,t||a.apply(d,n)},l),i&&a.apply(d,n)}},a.exports.fireEvent=function(a,i,t){t=t||{},t.detail=t.detail||{},t.detail.target=t.detail.target||a;var r=new CustomEvent(i,t);a.dispatchEvent(r)},a.exports.extend=n,a.exports.extendDeep=o,a.exports.clone=function(t){return JSON.parse(JSON.stringify(t))},a.exports.deepEqual=s,a.exports.diff=function(a,l){var t={},r=Object.keys(a);return l?(Object.keys(l).forEach(function(t){-1===r.indexOf(t)&&r.push(t)}),r.forEach(function(r){var o=a[r],n=l[r],i=o&&n&&o.constructor===Object&&n.constructor===Object;(!i||s(o,n))&&(i||o===n)||(t[r]=n)}),t):t},a.exports.shouldCaptureKeyEvent=function(t){return!t.metaKey&&document.activeElement===document.body},a.exports.splitString=function(a,o){void 0===o&&(o=" ");var t=new RegExp(o,"g");return a=(a||"").replace(t,o),a.split(o)},a.exports.getElData=function(r,a){a=a||{};var i={};return Object.keys(a).forEach(function(a){r.hasAttribute(a)&&(i[a]=r.getAttribute(a))}),i},a.exports.getUrlParameter=function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+a+"=([^&#]*)"),t=o.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},a.exports.isIframed=function(){return window.top!==window.self},a.exports.findAllScenes=function(a){for(var i=[],t=a.getElementsByTagName("*"),r=0,o=t.length;r<o;r++)t[r].isScene&&i.push(t[r]);return i},a.exports.srcLoader=t("./src-loader")},{"./bind":189,"./coordinates":190,"./debug":191,"./device":192,"./entity":193,"./forceCanvasResizeSafariMobile":194,"./material":196,"./src-loader":197,"./styleParser":198,"./tracked-controls":199,"deep-assign":12,"object-assign":26}],196:[function(t,r){function a(r,a){a&&(r.emit("materialtextureloaded",{src:a.image,texture:a}),a.image&&"VIDEO"===a.image.tagName&&(a.image.addEventListener("loadeddata",function(){r.components&&r.components.material&&(a.needsCorrectionBGRA&&a.needsCorrectionFlipY&&-1!==["standard","flat"].indexOf(r.components.material.data.shader)&&r.setAttribute("material","shader","ios10hls"),r.emit("materialvideoloadeddata",{src:a.image,texture:a}))}),a.image.addEventListener("ended",function(){r.emit("materialvideoended",{src:a.image,texture:a})})))}var n=t("../lib/three"),o=["application/x-mpegurl","application/vnd.apple.mpegurl"];r.exports.updateMapMaterialFromData=function(d,c,p,t){function r(r){o[d]=r,o.needsUpdate=!0,a(i,r)}var i=p.el,o=p.material,s=t[c];return(p.materialSrcs||(p.materialSrcs={}),!s)?(delete p.materialSrcs[d],void r(null)):void(s!==p.materialSrcs[d]&&(p.materialSrcs[d]=s,s instanceof n.Texture?r(s):i.sceneEl.systems.material.loadTexture(s,{src:s,repeat:t.repeat,offset:t.offset,npot:t.npot},function(a){p.materialSrcs[d]===s&&r(a)})))},r.exports.updateMap=function(a,o){return r.exports.updateMapMaterialFromData("map","src",a,o)},r.exports.updateDistortionMap=function(d,c,t){function p(t){i[r+"Map"]=t,i.needsUpdate=!0,a(n,t)}var r=d;"ambientOcclusion"===d&&(r="ao");var n=c.el,i=c.material,o=t[d+"Map"],s={};return(s.src=o,s.offset=t[d+"TextureOffset"],s.repeat=t[d+"TextureRepeat"],s.wrap=t[d+"TextureWrap"],o)?o===c[d+"TextureSrc"]?void 0:(c[d+"TextureSrc"]=o,void n.sceneEl.systems.material.loadTexture(o,s,p)):void(i.map&&p(null))},r.exports.handleTextureEvents=a,r.exports.isHLS=function(r,a){return a&&o.includes(a.toLowerCase())||!!(r&&0<r.toLowerCase().indexOf(".m3u8"))}},{"../lib/three":173}],197:[function(t,r){function o(o,i,r){n(o,function(a){return a?void i(o):void r(o)})}function i(t){var a=t.match(/\url\((.+)\)/);if(a)return a[1]}function n(t,a){if(t.tagName)return void a("IMG"===t.tagName);var r=new Image;r.addEventListener("load",function(){a(!0)}),r.addEventListener("error",function(){a(!1)}),r.src=t}function s(t){try{var a=document.querySelector(t);return a||l("No element was found matching the selector: \"%s\"",t),a}catch(a){return void l("\"%s\" is not a valid selector",t)}}var a=t("./debug"),l=a("utils:src-loader:warn");r.exports={parseUrl:i,validateSrc:o,validateCubemapSrc:function(d,p){function r(t){u.push(t),6===u.length&&p(u)}var a="",u=[],m,t,n;for(t=0;5>t;t++)a+="(url\\((?:[^\\)]+)\\),\\s*)";if(a+="(url\\((?:[^\\)]+)\\)\\s*)",n=d.match(new RegExp(a)))for(t=1;7>t;t++)o(i(n[t]),r);else if(m=s(d))return"A-CUBEMAP"===m.tagName&&m.srcs?p(m.srcs):void l("Selector \"%s\" does not point to <a-cubemap>",d)}}},{"./debug":191}],198:[function(t,r){function a(t){return t.replace(/-([a-z])/g,function(t){return t[1].toUpperCase()})}function o(o){var i=Object.keys(o),n={};return i.forEach(function(t){var r=a(t);n[r]=o[t]}),n}var i=t("style-attr");r.exports.parse=function(t){var a;return"string"==typeof t?(a=i.parse(t),a[""]?t:o(a)):t},r.exports.stringify=function(t){return"string"==typeof t?t:i.stringify(t)},r.exports.toCamelCase=a,r.exports.transformKeysToCamelCase=o},{"style-attr":36}],199:[function(t,r){function a(a,d,c){var t=a.el.sceneEl,l=c.index||0,i,r;return!!d&&!!(r=t&&t.systems["tracked-controls"])&&(i=r.controllers,!!i.length&&!!s(i,null,d,c.hand,l))}function s(a,d,p,u,m){var o=0,s=m||0,c,l;for(l=0;l<a.length;l++)if(c=a[l],(!p||-1!==c.id.indexOf(p))&&(p||c.id===d)&&(!u||!c.hand||u===c.hand)){if(u&&!c.hand&&(s=n*m+(u===i?0:1)),o===s)return c;++o}}var i=t("../constants").DEFAULT_HANDEDNESS,o=["x","y","z","w"],n=2;r.exports.checkControllerPresentAndSetup=function(i,s,n){var t=i.el,r=a(i,s,n);return(i.controllerPresent&&!i.controllerEventsActive&&i.addEventListeners(),r===i.controllerPresent)?r:void(i.controllerPresent=r,r?(i.injectTrackedControls(),i.addEventListeners(),t.emit("controllerconnected",{name:i.name,component:i})):(i.removeEventListeners(),t.emit("controllerdisconnected",{name:i.name,component:i})))},r.exports.isControllerPresent=a,r.exports.findMatchingController=s,r.exports.emitIfAxesChanged=function(a,d,n){var t,r,p,l,i,s;for(r=Object.keys(d),i=0;i<r.length;i++){for(t=d[r[i]],p=!1,s=0;s<t.length;s++)n.detail.changed[t[s]]&&(p=!0);if(p){for(l={},s=0;s<t.length;s++)l[o[s]]=n.detail.axis[t[s]];a.el.emit(r[i]+"moved",l)}}}},{"../constants":116}],200:[function(){THREE.VRControls=function(l,d){var t=this,o=new THREE.Matrix4,a=null,r,i;"VRFrameData"in window&&(a=new window.VRFrameData),window.addEventListener("vrdisplayconnect",function(a){r=a.display}),window.addEventListener("vrdisplaydisconnect",function(){r=void 0}),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(a){i=a,0<a.length?r=a[0]:d&&d("VR input not available.")}).catch(function(){console.warn("THREE.VRControls: Unable to get VR Displays")}),this.scale=1,this.standing=!1,this.userHeight=1.6,this.getVRDisplay=function(){return r},this.setVRDisplay=function(a){r=a},this.getVRDisplays=function(){return console.warn("THREE.VRControls: getVRDisplays() is being deprecated."),i},this.getStandingMatrix=function(){return o},this.update=function(){if(r){var i;r.getFrameData?(r.getFrameData(a),i=a.pose):r.getPose&&(i=r.getPose()),null!==i.orientation&&l.quaternion.fromArray(i.orientation),null===i.position?l.position.set(0,0,0):l.position.fromArray(i.position),this.standing&&(r.stageParameters?(l.updateMatrix(),o.fromArray(r.stageParameters.sittingToStandingTransform),l.applyMatrix(o)):l.position.setY(l.position.y+this.userHeight)),l.position.multiplyScalar(t.scale)}},this.resetPose=function(){r&&r.resetPose()},this.resetSensor=function(){console.warn("THREE.VRControls: .resetSensor() is now .resetPose()."),this.resetPose()},this.zeroSensor=function(){console.warn("THREE.VRControls: .zeroSensor() is now .resetPose()."),this.resetPose()},this.dispose=function(){r=null}}},{}],201:[function(){THREE.VREffect=function(M,i){function t(){var o=l.isPresenting;if(l.isPresenting=void 0!==g&&g.isPresenting,l.isPresenting){var t=g.getEyeParameters("left"),i=t.renderWidth,s=t.renderHeight;o||(p=M.getPixelRatio(),a=M.getSize(),M.setPixelRatio(1),M.setSize(2*i,s,!1))}else o&&(M.setPixelRatio(p),M.setSize(a.width,a.height,h))}function T(r){var a=2/(r.leftTan+r.rightTan),t=.5*((r.leftTan-r.rightTan)*a),o=2/(r.upTan+r.downTan);return{scale:[a,o],offset:[t,.5*((r.upTan-r.downTan)*o)]}}function b(r,l,t,i){l=void 0===l||l,t=void 0===t?.01:t,i=void 0===i?1e4:i;var n=l?-1:1,d=new THREE.Matrix4,s=d.elements,o=T(r);return s[0]=o.scale[0],s[1]=0,s[2]=o.offset[0]*n,s[3]=0,s[4]=0,s[5]=o.scale[1],s[6]=-o.offset[1]*n,s[7]=0,s[8]=0,s[9]=0,s[10]=i/(t-i)*-n,s[11]=i*t/(t-i),s[12]=0,s[13]=0,s[14]=n,s[15]=0,d.transpose(),d}function L(a,o,t,i){var n=Or/180;return b({upTan:x(a.upDegrees*n),downTan:x(a.downDegrees*n),leftTan:x(a.leftDegrees*n),rightTan:x(a.rightDegrees*n)},o,t,i)}var s=new THREE.Vector3,u=new THREE.Vector3,c=null,g,r,o,d;"VRFrameData"in window&&(c=new window.VRFrameData),window.addEventListener("vrdisplayconnect",function(t){g=t.display}),window.addEventListener("vrdisplaydisconnect",function(){var r;l.exitPresent(),r=l.cancelAnimationFrame(),g=void 0,l.requestAnimationFrame(r)}),navigator.getVRDisplays&&navigator.getVRDisplays().then(function(t){r=t,0<t.length?g=t[0]:i&&i("HMD not available")}).catch(function(){console.warn("THREE.VREffect: Unable to get VR Displays")}),this.isPresenting=!1;var l=this,a=M.getSize(),h=!1,p=M.getPixelRatio();this.getVRDisplay=function(){return g},this.setVRDisplay=function(t){g=t},this.getVRDisplays=function(){return console.warn("THREE.VREffect: getVRDisplays() is being deprecated."),r},this.setSize=function(o,s,d){if(a={width:o,height:s},h=d,l.isPresenting){var n=g.getEyeParameters("left");M.setPixelRatio(1),M.setSize(2*n.renderWidth,n.renderHeight,!1)}else M.setPixelRatio(p),M.setSize(o,s,d)};var n=M.domElement,f=[0,0,0.5,1],y=[0.5,0,0.5,1];window.addEventListener("vrdisplaypresentchange",t,!1),this.setFullScreen=function(r){return new Promise(function(a,t){return void 0===g?void t(new Error("No VR hardware found.")):l.isPresenting===r?void a():void a(r?g.requestPresent([{source:n}]):g.exitPresent())})},this.requestPresent=function(){return this.setFullScreen(!0)},this.exitPresent=function(){return this.setFullScreen(!1)},this.requestAnimationFrame=function(t){var t=l.f=t||l.f;if(t)return void 0===g?window.requestAnimationFrame(t):g.requestAnimationFrame(t)},this.cancelAnimationFrame=function(r){var a=l.f;return l.f=void 0,void 0===g?window.cancelAnimationFrame(r):g.cancelAnimationFrame(r),a},this.submitFrame=function(){void 0!==g&&l.isPresenting&&g.submitFrame()},this.autoSubmitFrame=!0;var D=new THREE.PerspectiveCamera;D.layers.enable(1);var E=new THREE.PerspectiveCamera;E.layers.enable(2),this.render=function(x,t,i,n){if(g&&l.isPresenting){var r=x.autoUpdate;r&&(x.updateMatrixWorld(),x.autoUpdate=!1);var a=g.getEyeParameters("left"),h=g.getEyeParameters("right");s.fromArray(a.offset),u.fromArray(h.offset),Array.isArray(x)&&(console.warn("THREE.VREffect.render() no longer supports arrays. Use object.layers instead."),x=x[0]);var b=M.getSize(),m=g.getLayers(),N,p;if(m.length){var v=m[0];N=null!==v.leftBounds&&4===v.leftBounds.length?v.leftBounds:f,p=null!==v.rightBounds&&4===v.rightBounds.length?v.rightBounds:y}else N=f,p=y;return o={x:A(b.width*N[0]),y:A(b.height*N[1]),width:A(b.width*N[2]),height:A(b.height*N[3])},d={x:A(b.width*p[0]),y:A(b.height*p[1]),width:A(b.width*p[2]),height:A(b.height*p[3])},i?(M.setRenderTarget(i),i.scissorTest=!0):(M.setRenderTarget(null),M.setScissorTest(!0)),(M.autoClear||n)&&M.clear(),null===t.parent&&t.updateMatrixWorld(),t.matrixWorld.decompose(D.position,D.quaternion,D.scale),E.position.copy(D.position),E.quaternion.copy(D.quaternion),E.scale.copy(D.scale),D.translateOnAxis(s,D.scale.x),E.translateOnAxis(u,E.scale.x),g.getFrameData?(g.depthNear=t.near,g.depthFar=t.far,g.getFrameData(c),D.projectionMatrix.elements=c.leftProjectionMatrix,E.projectionMatrix.elements=c.rightProjectionMatrix):(D.projectionMatrix=L(a.fieldOfView,!0,t.near,t.far),E.projectionMatrix=L(h.fieldOfView,!0,t.near,t.far)),i?(i.viewport.set(o.x,o.y,o.width,o.height),i.scissor.set(o.x,o.y,o.width,o.height)):(M.setViewport(o.x,o.y,o.width,o.height),M.setScissor(o.x,o.y,o.width,o.height)),M.render(x,D,i,n),i?(i.viewport.set(d.x,d.y,d.width,d.height),i.scissor.set(d.x,d.y,d.width,d.height)):(M.setViewport(d.x,d.y,d.width,d.height),M.setScissor(d.x,d.y,d.width,d.height)),M.render(x,E,i,n),i?(i.viewport.set(0,0,b.width,b.height),i.scissor.set(0,0,b.width,b.height),i.scissorTest=!1,M.setRenderTarget(null)):(M.setViewport(0,0,b.width,b.height),M.setScissorTest(!1)),r&&(x.autoUpdate=!0),void(l.autoSubmitFrame&&l.submitFrame())}M.render(x,t,i,n)},this.dispose=function(){window.removeEventListener("vrdisplaypresentchange",t,!1)}}},{}],202:[function(t,r){window.glStats=function(){function t(t,a){return function(){a.apply(this,arguments),t.apply(this,arguments)}}var r=null,a=0,o=0,i=0,n=0,s=0,l=0,d=0;return WebGLRenderingContext.prototype.drawArrays=t(WebGLRenderingContext.prototype.drawArrays,function(){a++,arguments[0]==this.POINTS?l+=arguments[2]:s+=arguments[2]}),WebGLRenderingContext.prototype.drawElements=t(WebGLRenderingContext.prototype.drawElements,function(){o++,n+=arguments[1]/3,s+=arguments[1]}),WebGLRenderingContext.prototype.useProgram=t(WebGLRenderingContext.prototype.useProgram,function(){i++}),WebGLRenderingContext.prototype.bindTexture=t(WebGLRenderingContext.prototype.bindTexture,function(){d++}),{update:function(){r("allcalls").set(a+o),r("drawElements").set(o),r("drawArrays").set(a),r("bindTexture").set(d),r("useProgram").set(i),r("glfaces").set(n),r("glvertices").set(s),r("glpoints").set(l)},start:function(){a=0,o=0,i=0,n=0,s=0,l=0,d=0},end:function(){},attach:function(t){r=t},values:{allcalls:{over:3e3,caption:"Calls (hook)"},drawelements:{caption:"drawElements (hook)"},drawarrays:{caption:"drawArrays (hook)"}},groups:[{caption:"WebGL",values:["allcalls","drawelements","drawarrays","useprogram","bindtexture","glfaces","glvertices","glpoints"]}],fractions:[{base:"allcalls",steps:["drawelements","drawarrays"]}]}},window.threeStats=function(t){var r=null;return{update:function(){r("renderer.info.memory.geometries").set(t.info.memory.geometries),r("renderer.info.programs").set(t.info.programs.length),r("renderer.info.memory.textures").set(t.info.memory.textures),r("renderer.info.render.calls").set(t.info.render.calls),r("renderer.info.render.faces").set(t.info.render.faces),r("renderer.info.render.points").set(t.info.render.points),r("renderer.info.render.vertices").set(t.info.render.vertices)},start:function(){},end:function(){},attach:function(t){r=t},values:{"renderer.info.memory.geometries":{caption:"Geometries"},"renderer.info.memory.textures":{caption:"Textures"},"renderer.info.programs":{caption:"Programs"},"renderer.info.render.calls":{caption:"Calls"},"renderer.info.render.faces":{caption:"Faces",over:1e3},"renderer.info.render.points":{caption:"Points"},"renderer.info.render.vertices":{caption:"Vertices"}},groups:[{caption:"Three.js - Memory",values:["renderer.info.memory.geometries","renderer.info.programs","renderer.info.memory.textures"]},{caption:"Three.js - Render",values:["renderer.info.render.calls","renderer.info.render.faces","renderer.info.render.points","renderer.info.render.vertices"]}],fractions:[]}},window.BrowserStats=function(){function t(t){var a=C(m(t)/i);return A(100*t/g(1024,a))/100}var r=null,a=0,o=0;window.performance&&!performance.memory&&(performance.memory={usedJSHeapSize:0,totalJSHeapSize:0}),0===performance.memory.totalJSHeapSize&&console.warn("totalJSHeapSize === 0... performance.memory is only available in Chrome .");var i=6.931471805599453;return{update:function(){a=t(performance.memory.usedJSHeapSize),o=t(performance.memory.totalJSHeapSize),r("memory").set(a),r("total").set(o)},start:function(){a=0},end:function(){},attach:function(t){r=t},values:{memory:{caption:"Used Memory",average:!0,avgMs:1e3,over:22},total:{caption:"Total Memory"}},groups:[{caption:"Browser",values:["memory","total"]}],fractions:[{base:"total",steps:["memory"]}]}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports={glStats:window.glStats,threeStats:window.threeStats,BrowserStats:window.BrowserStats})},{}],203:[function(t,r){"use strict";!function(){0=="performance"in window&&(window.performance={});var r=window.performance;if(0=="now"in r){var a=Date.now();r.timing&&r.timing.navigationStart&&(a=r.timing.navigationStart),r.now=function(){return Date.now()-a}}r.mark||(r.mark=function(){}),r.measure||(r.measure=function(){})}(),window.rStats=function(g){function y(o,i){for(var s=Object.keys(o),n=0,a=s.length;n<a;n++)i(s[n])}function t(r){var a=document.createElement("link");a.href=r,a.rel="stylesheet",a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)}function M(a,p,t){var n=t||{},r=document.createElement("canvas"),i=r.getContext("2d"),o=0,c=0,l=n.color?n.color:"#666666",g=document.createElement("canvas"),u=g.getContext("2d");g.width=1,g.height=2*v,u.fillStyle="#444444",u.fillRect(0,0,1,2*v),u.fillStyle=l,u.fillRect(0,v,1,v),u.fillStyle="#ffffff",u.globalAlpha=.5,u.fillRect(0,v,1,1),u.globalAlpha=1;var d=document.createElement("canvas"),h=d.getContext("2d");return d.width=1,d.height=2*v,h.fillStyle="#444444",h.fillRect(0,0,1,2*v),h.fillStyle="#b70000",h.fillRect(0,v,1,v),h.globalAlpha=.5,h.fillStyle="#ffffff",h.fillRect(0,v,1,1),h.globalAlpha=1,function(){r.width=s,r.height=v,r.style.width=r.width+"px",r.style.height=r.height+"px",r.className="rs-canvas",a.appendChild(r),i.fillStyle="#444444",i.fillRect(0,0,r.width,r.height)}(),{draw:function(a,n){c+=.1*(a-c),o*=.99,c>o&&(o=c),i.drawImage(r,1,0,r.width-1,r.height,0,0,r.width-1,r.height),n?i.drawImage(d,r.width-1,r.height-c*r.height/o-v):i.drawImage(g,r.width-1,r.height-c*r.height/o-v)}}}function x(t,a){var o=document.createElement("canvas"),d=o.getContext("2d");return function(){o.width=s,o.height=v*a,o.style.width=o.width+"px",o.style.height=o.height+"px",o.className="rs-canvas",t.appendChild(o),d.fillStyle="#444444",d.fillRect(0,0,o.width,o.height)}(),{draw:function(r){d.drawImage(o,1,0,o.width-1,o.height,0,0,o.width-1,o.height);var i=0;y(r,function(n){var t=r[n]*o.height;d.fillStyle=l[n],d.fillRect(o.width-1,i,1,t),i+=t})}}}function E(a,o){function s(r){if(b&&b.average){g+=r,f++;var a=performance.now();a-h>=(b.avgMs||1e3)&&(m=g/f,g=0,h=a,f=0)}}function t(){N=performance.now(),T.userTimingAPI&&performance.mark(l+"-start"),D=!0}function n(){c=performance.now()-N,T.userTimingAPI&&(performance.mark(l+"-end"),D&&performance.measure(l,l+"-start",l+"-end")),s(c)}var l=a,c=0,p=0,m=0,g=0,h=performance.now(),f=0,v=document.createElement("div"),y=document.createElement("span"),E=document.createElement("div"),L=document.createTextNode(""),b=T?T.values[l.toLowerCase()]:null,x=new M(v,l,b),D=!1,N;return y.className="rs-counter-id",y.textContent=b&&b.caption?b.caption:l,E.className="rs-counter-value",E.appendChild(L),v.appendChild(y),v.appendChild(E),o?o.div.appendChild(v):u.appendChild(v),N=performance.now(),{set:function(t){c=t,s(c)},start:t,tick:function(){n(),t()},end:n,frame:function(){var r=performance.now(),a=r-N;p++,1e3<a&&(c=b&&!1===b.interpolate?p:1e3*p/a,p=0,N=r,s(c))},value:function(){return c},draw:function(){var r=b&&b.average?m:c;L.nodeValue=A(100*r)/100;var a=b&&(b.below&&c<b.below||b.over&&c>b.over);x.draw(c,a),v.className=a?"rs-counter-base alarm":"rs-counter-base"}}}function r(t){var o=t.toLowerCase();if(void 0===o&&(o="default"),p[o])return p[o];var i=null;T&&T.groups&&y(T.groups,function(r){var a=T.groups[parseInt(r,10)];i||-1===a.values.indexOf(o.toLowerCase())||(i=a)});var a=new E(o,i);return p[o]=a,a}function a(){y(T.plugins,function(t){T.plugins[t].update()}),y(p,function(t){p[t].draw()}),T&&T.fractions&&y(T.fractions,function(o){var t=T.fractions[parseInt(o,10)],s=[],a=p[t.base.toLowerCase()];a&&(a=a.value(),y(T.fractions[o].steps,function(r){var t=T.fractions[o].steps[parseInt(r,10)].toLowerCase(),n=p[t];n&&s.push(n.value()/a)})),t.graph.draw(s)})}var T=g||{},l=T.colours||["#850700","#c74900","#fcb300","#284280","#4c7c0c"],o=(T.CSSPath?T.CSSPath:"")+"rStats.css";(T.css||["https://fonts.googleapis.com/css?family=Roboto+Condensed:400,700,300",o]).forEach(function(r){t(r)}),T.values||(T.values={});var v=10,s=200,p={},i,u;return function(){if(T.plugins){T.values||(T.values={}),T.groups||(T.groups=[]),T.fractions||(T.fractions=[]);for(var a=0;a<T.plugins.length;a++)T.plugins[a].attach(r),y(T.plugins[a].values,function(r){T.values[r]=T.plugins[a].values[r]}),T.groups=T.groups.concat(T.plugins[a].groups),T.fractions=T.fractions.concat(T.plugins[a].fractions)}else T.plugins={};i=document.createElement("div"),i.className="rs-base",u=document.createElement("div"),u.className="rs-container",u.style.height="auto",i.appendChild(u),document.body.appendChild(i),T&&(T.groups&&y(T.groups,function(r){var o=T.groups[parseInt(r,10)],t=document.createElement("div");t.className="rs-group",o.div=t;var i=document.createElement("h1");i.textContent=o.caption,i.addEventListener("click",function(t){this.classList.toggle("hidden"),t.preventDefault()}.bind(t)),u.appendChild(i),u.appendChild(t)}),T.fractions&&y(T.fractions,function(r){var t=T.fractions[parseInt(r,10)],n=document.createElement("div");n.className="rs-fraction";var a=document.createElement("div");a.className="rs-legend";var i=0;y(T.fractions[r].steps,function(o){var t=document.createElement("p");t.textContent=T.fractions[r].steps[o],t.style.color=l[i],a.appendChild(t),i++}),n.appendChild(a),n.style.height=i*v+"px",t.div=n;var o=new x(n,i);t.graph=o,u.appendChild(n)}))}(),function(t){return t?r(t):{element:i,update:a}}},"object"==("undefined"===typeof r?"undefined":babelHelpers.typeof(r))&&(r.exports=window.rStats)},{}],204:[function(t,r){var a={};a.base64=function(t,r){return"data:"+t+";base64,"+r},a.isMobile=function(){var t=!1;return function(r){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(r)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(r.substr(0,4)))&&(t=!0)}(navigator.userAgent||navigator.vendor||window.opera),t},a.isIOS=function(){return /(iPad|iPhone|iPod)/g.test(navigator.userAgent)},a.isIFrame=function(){try{return window.self!==window.top}catch(t){return!0}},a.appendQueryParameter=function(r,a,o){return r+=(0>r.indexOf("?")?"?":"&")+a+"="+o},a.getQueryParameter=function(r){r=r.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a=new RegExp("[\\?&]"+r+"=([^&#]*)"),o=a.exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))},a.isLandscapeMode=function(){return 90==window.orientation||-90==window.orientation},r.exports=a},{}],205:[function(t,r){function a(){var t=document.createElement("video");t.addEventListener("ended",function(){t.play()}),this.request=function(){t.paused&&(t.src=i.base64("video/webm","GkXfowEAAAAAAAAfQoaBAUL3gQFC8oEEQvOBCEKChHdlYm1Ch4ECQoWBAhhTgGcBAAAAAAAH4xFNm3RALE27i1OrhBVJqWZTrIHfTbuMU6uEFlSua1OsggEwTbuMU6uEHFO7a1OsggfG7AEAAAAAAACkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmAQAAAAAAAEUq17GDD0JATYCNTGF2ZjU2LjQwLjEwMVdBjUxhdmY1Ni40MC4xMDFzpJAGSJTMbsLpDt/ySkipgX1fRImIQO1MAAAAAAAWVK5rAQAAAAAAADuuAQAAAAAAADLXgQFzxYEBnIEAIrWcg3VuZIaFVl9WUDmDgQEj44OEO5rKAOABAAAAAAAABrCBsLqBkB9DtnUBAAAAAAAAo+eBAKOmgQAAgKJJg0IAAV4BHsAHBIODCoAACmH2MAAAZxgz4dPSTFi5JACjloED6ACmAECSnABMQAADYAAAWi0quoCjloEH0ACmAECSnABNwAADYAAAWi0quoCjloELuACmAECSnABNgAADYAAAWi0quoCjloEPoACmAECSnABNYAADYAAAWi0quoCjloETiACmAECSnABNIAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTnghdwo5aBAAAApgBAkpwATOAAA2AAAFotKrqAo5aBA+gApgBAkpwATMAAA2AAAFotKrqAo5aBB9AApgBAkpwATIAAA2AAAFotKrqAo5aBC7gApgBAkpwATEAAA2AAAFotKrqAo5aBD6AApgDAkpwAQ2AAA2AAAFotKrqAo5aBE4gApgBAkpwATCAAA2AAAFotKrqAH0O2dQEAAAAAAACU54Iu4KOWgQAAAKYAQJKcAEvAAANgAABaLSq6gKOWgQPoAKYAQJKcAEtgAANgAABaLSq6gKOWgQfQAKYAQJKcAEsAAANgAABaLSq6gKOWgQu4AKYAQJKcAEqAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEogAANgAABaLSq6gKOWgROIAKYAQJKcAEnAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCRlCjloEAAACmAECSnABJgAADYAAAWi0quoCjloED6ACmAECSnABJIAADYAAAWi0quoCjloEH0ACmAMCSnABDYAADYAAAWi0quoCjloELuACmAECSnABI4AADYAAAWi0quoCjloEPoACmAECSnABIoAADYAAAWi0quoCjloETiACmAECSnABIYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngl3Ao5aBAAAApgBAkpwASCAAA2AAAFotKrqAo5aBA+gApgBAkpwASAAAA2AAAFotKrqAo5aBB9AApgBAkpwAR8AAA2AAAFotKrqAo5aBC7gApgBAkpwAR4AAA2AAAFotKrqAo5aBD6AApgBAkpwAR2AAA2AAAFotKrqAo5aBE4gApgBAkpwARyAAA2AAAFotKrqAH0O2dQEAAAAAAACU54J1MKOWgQAAAKYAwJKcAENgAANgAABaLSq6gKOWgQPoAKYAQJKcAEbgAANgAABaLSq6gKOWgQfQAKYAQJKcAEagAANgAABaLSq6gKOWgQu4AKYAQJKcAEaAAANgAABaLSq6gKOWgQ+gAKYAQJKcAEZAAANgAABaLSq6gKOWgROIAKYAQJKcAEYAAANgAABaLSq6gB9DtnUBAAAAAAAAlOeCjKCjloEAAACmAECSnABF4AADYAAAWi0quoCjloED6ACmAECSnABFwAADYAAAWi0quoCjloEH0ACmAECSnABFoAADYAAAWi0quoCjloELuACmAECSnABFgAADYAAAWi0quoCjloEPoACmAMCSnABDYAADYAAAWi0quoCjloETiACmAECSnABFYAADYAAAWi0quoAfQ7Z1AQAAAAAAAJTngqQQo5aBAAAApgBAkpwARUAAA2AAAFotKrqAo5aBA+gApgBAkpwARSAAA2AAAFotKrqAo5aBB9AApgBAkpwARQAAA2AAAFotKrqAo5aBC7gApgBAkpwARQAAA2AAAFotKrqAo5aBD6AApgBAkpwAROAAA2AAAFotKrqAo5aBE4gApgBAkpwARMAAA2AAAFotKrqAH0O2dQEAAAAAAACU54K7gKOWgQAAAKYAQJKcAESgAANgAABaLSq6gKOWgQPoAKYAQJKcAESAAANgAABaLSq6gKOWgQfQAKYAwJKcAENgAANgAABaLSq6gKOWgQu4AKYAQJKcAERgAANgAABaLSq6gKOWgQ+gAKYAQJKcAERAAANgAABaLSq6gKOWgROIAKYAQJKcAEQgAANgAABaLSq6gB9DtnUBAAAAAAAAlOeC0vCjloEAAACmAECSnABEIAADYAAAWi0quoCjloED6ACmAECSnABEAAADYAAAWi0quoCjloEH0ACmAECSnABD4AADYAAAWi0quoCjloELuACmAECSnABDwAADYAAAWi0quoCjloEPoACmAECSnABDoAADYAAAWi0quoCjloETiACmAECSnABDgAADYAAAWi0quoAcU7trAQAAAAAAABG7j7OBALeK94EB8YIBd/CBAw=="),t.play())},this.release=function(){t.pause(),t.src=""}}function o(){var t=null;this.request=function(){t||(t=setInterval(function(){window.location.href="/",setTimeout(window.stop,0)},15e3))},this.release=function(){t&&(clearInterval(t),t=null)}}var i=t("./util.js");r.exports=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return t.match(/iPhone/i)||t.match(/iPod/i)?o:a}()},{"./util.js":204}]},{},[171])(171)});