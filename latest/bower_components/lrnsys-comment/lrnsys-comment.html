<html><head><link rel="import" href="../moment-element/moment-element.html"><link rel="import" href="../materializecss-styles/colors.html"><link rel="import" href="../iron-icons/editor-icons.html"><link rel="import" href="../marked-element/marked-element.html"><link rel="import" href="../mtz-marked-editor/mtz-marked-editor.html"><link rel="import" href="../mtz-marked-editor/mtz-marked-control-generic-line.html"><link rel="import" href="../mtz-marked-editor/mtz-marked-control-generic-wrap.html"><link rel="import" href="../mtz-marked-editor/controls/mtz-marked-control-link.html"><link rel="import" href="../paper-tooltip/paper-tooltip.html"><link rel="import" href="../paper-card/paper-card.html"><link rel="import" href="../paper-badge/paper-badge.html"><link rel="import" href="../word-count/word-count.html"><link rel="import" href="../lrnsys-button/lrnsys-button.html"><link rel="import" href="../lrndesign-avatar/lrndesign-avatar.html"><link rel="prefetch" href="../polymer/polymer.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../moment-element/moment-import.html"><link rel="prefetch" href="../moment/min/moment.min.js"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../marked-element/marked-import.html"><link rel="prefetch" href="../marked/lib/marked.js"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../mtz-marked-editor/mtz-marked-control-line-behavior.html"><link rel="prefetch" href="../mtz-marked-editor/mtz-marked-control-behavior.html"><link rel="prefetch" href="../mtz-marked-editor/mtz-marked-control-wrapper-behavior.html"><link rel="prefetch" href="../iron-image/iron-image.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-button/paper-button.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="../paper-avatar/paper-avatar.html"><link rel="prefetch" href="../paper-avatar/lib/jdenticon-1.4.0.min.js"><link rel="prefetch" href="../paper-avatar/lib/md5.min.js"><link rel="prefetch" href="../materializecss-styles/materializecss-styles.html"><link rel="prefetch" href="../materializecss-styles/shapes.html"></head><body><dom-module id="lrnsys-comment"><template><style include="materializecss-styles-colors">:host{display:block;padding:10px 10px 10px 0px;}:host[disabled]{opacity:.5;background-color:#cccccc;pointer-events:none;}:host:focus,
      :host:hover{z-index:2;}:host:focus .comment-outer,
      :host:hover .comment-outer{border:1px #0277bd solid;}.comment-outer{display:table;width:100%;border:1px #ddd solid;color:#444;}.comment-outer.new-comment{border:1px #d81b60 dashed;color:#000;}.comment-inner{display:table-row;}.comment-avatar{padding:0 7px;width:40px;}.comment-depth,
      .comment-avatar, 
      .comment-content{padding-top:0.5em;padding-bottom:0.5em;display:table-cell;vertical-align:top;}.comment-content{padding-right:7px;}h1,
      h2,
      h3,
      h4{text-align:left;font-size:1rem;line-height:1.25rem;}h1.comment-heading,
      h2.comment-heading,
      h3.comment-heading,
      h4.comment-heading{margin-top:7px;}p{font-size:14px;line-height:18px;text-align:left;}#edit-comment{background-color:white;padding:.25em;}marked-element{line-height:1rem;font-size:0.9rem;}.nowrap-me marked-element:hover{box-shadow:-1px 0 0 0 black inset;cursor:pointer;}.nowrap-me marked-element ::slotted(#content p.marked-element){height:2em;overflow:hidden;text-overflow:ellipsis;margin-bottom:35px;}.nowrap-me marked-element ::slotted(#content p.marked-element::after){content:"see more";position:absolute;bottom:65px;right:17px;color:#1976d2;}.comment-depth-1{width:0em;}.comment-depth-2{width:54px;border-right:3px solid #ccc;}.comment-depth-3,
      .comment-depth-4,
      .comment-depth-5,
      .comment-depth-6,
      .comment-depth-7,
      .comment-depth-8,
      .comment-depth-9{width:108px;border-right:3px solid #ccc;}.center{padding:0;}.circle{border-radius:50% !important;}.comment-actions{margin:0;padding:0;display:block;border-top:1px solid #ddd;}.comment-actions lrnsys-button{display:inline-flex;}.comment-actions .comment-actions-group{margin:0;padding:0;display:block;}.comment-actions .comment-actions-group.left-actions{float:left;}.comment-actions .comment-actions-group.right-actions{float:right;}moment-element{float:right;font-size:90%;font-style:italic;font-weight:normal;}paper-badge{right:0px;top:0px;}.like-icon-color{color:#2196F3;}.element-invisible{position:absolute;left:-9999px;top:0;width:0;height:0;overflow:hidden;}</style><div class$="comment-outer [[commentNew]]"><div class="comment-inner"><div class$="comment-depth comment-depth-[[comment.attributes.threadDepth]] grey lighten-3"></div><div class="comment-avatar"><lrndesign-avatar id="avatar" label="[[comment.relationships.author.data.name]]" src="[[comment.relationships.author.data.avatar]]" class="float-left ferpa-protect"></lrndesign-avatar><paper-tooltip for="avatar" animation-delay="0" class="ferpa-protect">[[displayName]]</paper-tooltip></div><div class="comment-content"><div class="comment-body"><div id="bodyarea" class="nowrap-me"><h4 class="ferpa-protect comment-heading"><span class="element-invisible">At</span><moment-element datetime$="[[comment.attributes.created]]" output-format="MMM DD[,] YYYY"></moment-element>[[comment.relationships.author.data.display_name]] <span class="element-invisible">[[comment.relationships.author.data.visual.label]]</span> said:</h4><marked-element smartypants="" id="rendered-comment" markdown="[[comment.attributes.body]]"><word-count class="markdown-html-slot" slot="markdown-html"></word-count></marked-element></div><mtz-marked-editor id="comment-editor" hidden=""><div slot="controls"><mtz-marked-control-generic-wrap icon="editor:format-bold" title="Bold" syntax-prefix="**" syntax-suffix="**" keys="ctrl+b"></mtz-marked-control-generic-wrap><mtz-marked-control-generic-wrap icon="editor:format-italic" title="Italic" syntax-prefix="_" syntax-suffix="_" keys="ctrl+i"></mtz-marked-control-generic-wrap><mtz-marked-control-generic-line icon="editor:format-size" title="Heading 3" syntax-prefix="### "></mtz-marked-control-generic-line><mtz-marked-control-generic-line icon="editor:format-list-numbered" title="Ordered List" syntax-prefix="1. "></mtz-marked-control-generic-line><mtz-marked-control-generic-line icon="editor:format-list-bulleted" title="Unordered List" syntax-prefix="- "></mtz-marked-control-generic-line><mtz-marked-control-link icon="editor:insert-link" title="Link"></mtz-marked-control-link></div><paper-textarea char-counter="" autofocus="" id="edit-comment" label="Comment" value="{{comment.attributes.body}}" slot="textarea"></paper-textarea></mtz-marked-editor></div><div class="comment-actions"><div class="comment-actions-group left-actions"><lrnsys-button on-click="actionHandler" id="reply" data-commentid="[[comment.id]]" alt="Reply" icon="reply" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.reply]]"></lrnsys-button><lrnsys-button on-click="actionHandler" id="like" data-commentid="[[comment.id]]" alt="Like" icon="thumb-up" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.like]]"></lrnsys-button></div><div class="comment-actions-group right-actions"><lrnsys-button on-click="actionHandler" id="edit" data-commentid="[[comment.id]]" icon="create" alt="Edit" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.edit]]"></lrnsys-button><lrnsys-button on-click="actionHandler" id="delete" data-commentid="[[comment.id]]" icon="delete-forever" alt="Delete" hover-class="[[hoverClass]]" icon-class="grey-text no-margin" hidden$="[[!comment.actions.delete]]"></lrnsys-button></div></div></div></div></div><template is="dom-if" if="[[comment.relationships.author.data.visual.icon]]"><paper-badge icon="[[comment.relationships.author.data.visual.icon]]" for="papercard" label="[[comment.relationships.author.data.visual.label]]"></paper-badge></template></template><script>Polymer({is:'lrnsys-comment',listeners:{"bodyarea.tap":'bodyToggle',"bodyarea.dblclick":'bodyToggleOn'},properties:{comment:{type:Object,notify:!0,observer:'_commentLoaded'},displayName:{type:String,notify:!0,computed:'_generateName(comment.relationships.author.data.display_name, comment.relationships.author.data.visual)'},commentNew:{type:String,notify:!0,computed:'_isCommentNew(comment.relationships.author.data.visual)'},hoverClass:{type:String,reflectToAttribute:!0},editform:{type:Boolean,notify:!0,observer:'_editTrigger',reflectToAttribute:!0},disabled:{type:Boolean,notify:!0,reflectToAttribute:!0}},_generateName:function(a,b){return('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'&&!1!==b.label?a+' ('+b.label+')':a},_isCommentNew:function(a){return('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&!1!==a.label?'new-comment':''},_commentLoaded:function(){var a=this;a.editform=a.comment.metadata.editing,a.disabled=a.comment.metadata.disabled,a.blockFirstState=!0},actionHandler:function(a){var b=this,c=Polymer.dom(a),d=c.localTarget,e=null;null==d.dataCommentid||d.disabled||(e=d.dataCommentid,'reply'==d.id?b.fire('comment-reply',{comment:b.comment}):'like'==d.id?(b.$$('#like').classList.toggle('like-icon-color'),b.fire('comment-like',{comment:b.comment})):'edit'==d.id?b.editform=!b.editform:'delete'==d.id&&b.fire('comment-delete-dialog',{comment:b.comment}))},_editTrigger:function(){var a=this;babelHelpers.typeof(a.comment)!=='undefined'&&a.comment.actions.edit&&a.async(function(){a.$$('#rendered-comment').hidden=a.editform,a.$$('#comment-editor').hidden=!a.editform,a.editform?(a.$$('#edit').icon='save',a.$$('#edit').alt='Save',a.$$('#reply').disabled=!0,a.$$('#edit-comment').focus(),a.fire('comment-editing',{comment:a.comment}),a.blockFirstState=!1):(a.blockFirstState?a.blockFirstState=!1:a.fire('comment-save',{comment:a.comment}),a.$$('#edit').icon='create',a.$$('#edit').alt='Edit',a.$$('#reply').disabled=!1),document.querySelector('iron-list').fire('iron-resize')})},bodyToggle:function(){var a=this;a.$.bodyarea.classList.remove('nowrap-me'),document.querySelector('iron-list').fire('iron-resize')},bodyToggleOn:function(){var a=this;a.$.bodyarea.classList.toggle('nowrap-me'),document.querySelector('iron-list').fire('iron-resize')}});</script></dom-module></body></html>