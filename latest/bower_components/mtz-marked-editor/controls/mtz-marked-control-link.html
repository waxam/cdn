<html><head><link rel="import" href="../../polymer/polymer.html"><link rel="import" href="../../iron-a11y-keys/iron-a11y-keys.html"><link rel="import" href="../../paper-icon-button/paper-icon-button.html"><link rel="import" href="../mtz-marked-control-line-behavior.html"><link rel="prefetch" href="../../polymer/polymer-mini.html"><link rel="prefetch" href="../../polymer/polymer-micro.html"><link rel="prefetch" href="../../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../../iron-icon/iron-icon.html"><link rel="prefetch" href="../../iron-meta/iron-meta.html"><link rel="prefetch" href="../../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../../paper-styles/default-theme.html"><link rel="prefetch" href="../../paper-styles/color.html"><link rel="prefetch" href="../mtz-marked-control-behavior.html"></head><body><dom-module id="mtz-marked-control-link"><template><style>:host{display:inline-block;}</style><paper-icon-button icon="[[icon]]" noink="[[noink]]" on-click="_handleCommand" alt="[[title]]"></paper-icon-button><iron-a11y-keys keys="[[keys]]" on-keys-pressed="_handleCommand" target="[[__editor]]"></iron-a11y-keys></template><script>Polymer({is:'mtz-marked-control-link',behaviors:[mtz.MarkedControlBehavior],properties:{title:String,icon:String,keys:String,noink:Boolean},_handleCommand:function(a){a.preventDefault(),a.stopPropagation();var b,c,d=this.__editor,e=d.getSelection(),f=/\[(.*)\]\((.*)\)/,g=e.text.match(f);if(g){b=g[1],c=g[2];var h=c||b;d.replaceSelection(h),d.setSelection(e.start,e.end-(e.length-h.length))}else{if(this._isLink(e)){if(b=prompt('What text would you like to display?'),!b)return;c=e.text}else{if(c=prompt('What link would you like to use?'),!c)return;b=e.text}if(c.startsWith('http://'))return void alert('Links must be https://');var i=f[Symbol.replace]('[]()','['+b+']('+c+')');d.replaceSelection(i),d.setSelection(e.start,e.end+(i.length-e.length))}},_isLink:function(a){return a.text.startsWith('https://')}});</script></dom-module></body></html>