<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../app-layout/app-drawer/app-drawer.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../paper-button/paper-button.html"><link rel="import" href="../mtz-file-download-behavior/mtz-file-download-behavior.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"></head><body><dom-module id="hax-export-dialog"><template><style>:host{display:block;}#dialog{--app-drawer-width:500px;z-index:1000;margin-top:64px;}.pref-title{text-align:left;padding:8px 16px;margin:0;font-size:24px;font-weight:bold;}.pref-container{text-align:left;padding:16px;}.buttons paper-button{color:black;font-size:12px;font-weight:bold;text-transform:none;}#textarea{margin-bottom:16px;}</style><app-drawer id="dialog" align="right"><h3 class="pref-title">[[exportTitle]]</h3><div style="height: 100%; overflow: auto;" class="pref-container"><textarea id="textarea" rows="20" style="width:100%;"></textarea><div class="buttons"><paper-button id="download" raised="">Download HTML</paper-button><paper-button id="downloadfull" raised="">Download file</paper-button><paper-button id="copy" raised="">Copy</paper-button><paper-button id="import" raised="" hidden$="[[!globalPreferences.haxDeveloperMode]]">Import</paper-button><paper-button id="elementexport" raised="" hidden$="[[!globalPreferences.haxDeveloperMode]]">HAX Element export</paper-button><paper-button id="close" raised="">Close</paper-button></div></div></app-drawer></template><script>Polymer({is:'hax-export-dialog',listeners:{"download.tap":'download',"downloadfull.tap":'downloadfull',"import.tap":'importContent',"copy.tap":'selectBody',"close.tap":'close',"elementexport.tap":'htmlToHaxElements'},behaviors:[mtz.FileDownloadBehavior],properties:{exportTitle:{type:String,value:'Export'},globalPreferences:{type:Object,value:{}}},ready:function(){document.body.appendChild(this)},attached:function(){this.fire('hax-register-export',this),document.body.addEventListener('hax-store-property-updated',this._haxStorePropertyUpdated.bind(this))},_haxStorePropertyUpdated:function(a){a.detail&&babelHelpers.typeof(a.detail.value)!=='undefined'&&a.detail.property&&('object'===babelHelpers.typeof(a.detail.value)&&this.set(a.detail.property,null),this.set(a.detail.property,a.detail.value))},download:function(){var a=this.contentToFile(!1);this.downloadFromData(a,'html','my-new-code')},downloadfull:function(){var a=this.contentToFile(!0);this.downloadFromData(a,'html','my-new-webpage')},importContent:function(){var a=this.$.textarea.value;return Polymer.HaxStore.instance.activeHaxBody.importContent(a)},selectBody:function(){this.$.textarea.focus(),this.$.textarea.select(),document.execCommand('copy')},htmlToHaxElements:function(){var a=Polymer.HaxStore.htmlToHaxElements(this.$.textarea.value),b=JSON.stringify(a,null,2),c=this.$.textarea.value;this.$.textarea.value=b,this.$.textarea.focus(),this.$.textarea.select(),document.execCommand('copy'),this.$.textarea.value=c},contentToFile:function(a){var b='';if(a){var c=Polymer.HaxStore.instance.elementList,d='https://lrnwebcomponents.github.io/hax-body/components';b='\n          <!doctype html>\n          <html lang="en">\n            <head>\n              <meta charset="utf-8">\n              <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">\n              <title>hax-body demo</title>\n            <script src="'+d+'/webcomponentsjs/webcomponents-lite.js">',b+='</',b+='script>',b+='\n            <style>\n            body {\n              padding: 32px;\n            }\n            </style>\n            <script>\n            /* this script must run before Polymer is imported */\n            window.Polymer = {\n              dom: \'shady\',\n              lazyRegister: true\n            };\n          ',b+='</',b+='script>';var e=['iframe','a','img','hr','p'];for(var f in c)-1===e.indexOf(f)&&(b+='<link rel="import" href="'+d+'/'+f+'/'+f+'.html" />\n');b+='</head><body>',b+=Polymer.HaxStore.instance.activeHaxBody.haxToContent(),b+='</body></html>'}else b=Polymer.HaxStore.instance.activeHaxBody.haxToContent();return b},toggleDialog:function(){this.$.dialog.opened?this.close():(this.$.textarea.value=this.contentToFile(!1),Polymer.HaxStore.instance.closeAllDrawers(this))},open:function(){this.$.dialog.open()},close:function(){this.$.dialog.close()}});</script></dom-module></body></html>