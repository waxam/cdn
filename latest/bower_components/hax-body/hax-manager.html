<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../app-layout/app-drawer/app-drawer.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../paper-button/paper-button.html"><link rel="import" href="../iron-pages/iron-pages.html"><link rel="import" href="../iron-icons/iron-icons.html"><link rel="import" href="../vaadin-upload/vaadin-upload.html"><link rel="import" href="../materializecss-styles/materializecss-styles.html"><link rel="import" href="hax-preview.html"><link rel="import" href="hax-app-browser.html"><link rel="import" href="hax-gizmo-browser.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../vaadin-upload/vaadin-upload-icons.html"><link rel="prefetch" href="../vaadin-upload/vaadin-upload-file.html"><link rel="prefetch" href="../paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../paper-progress/paper-progress.html"><link rel="prefetch" href="../iron-range-behavior/iron-range-behavior.html"><link rel="prefetch" href="../materializecss-styles/colors.html"><link rel="prefetch" href="../materializecss-styles/shapes.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-wizard.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout-classes.html"><link rel="prefetch" href="../iron-icons/image-icons.html"><link rel="prefetch" href="../iron-icons/editor-icons.html"><link rel="prefetch" href="../paper-toolbar/paper-toolbar.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../neon-animation/animations/opaque-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../app-localize-behavior/app-localize-behavior.html"><link rel="prefetch" href="../iron-ajax/iron-ajax.html"><link rel="prefetch" href="../iron-ajax/iron-request.html"><link rel="prefetch" href="../intl-messageformat/dist/intl-messageformat.min.js"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-object.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-array.html"><link rel="prefetch" href="../paper-tooltip/paper-tooltip.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-item.html"><link rel="prefetch" href="../iron-collapse/iron-collapse.html"><link rel="prefetch" href="../paper-item/paper-item-body.html"><link rel="prefetch" href="../paper-styles/paper-styles.html"><link rel="prefetch" href="../paper-collapse-item/simple-paper-item.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-group.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-boolean.html"><link rel="prefetch" href="../paper-checkbox/paper-checkbox.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-enum.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="../paper-menu/paper-menu.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../paper-menu/paper-menu-shared-styles.html"><link rel="prefetch" href="../paper-item/paper-item.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-input.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-file.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-geolocation.html"><link rel="prefetch" href="../iron-icons/communication-icons.html"><link rel="prefetch" href="../geo-location/geo-location.html"><link rel="prefetch" href="../google-map/google-map.html"><link rel="prefetch" href="../google-apis/google-maps-api.html"><link rel="prefetch" href="../iron-jsonp-library/iron-jsonp-library.html"><link rel="prefetch" href="../iron-selector/iron-selector.html"><link rel="prefetch" href="../google-map/google-map-marker.html"><link rel="prefetch" href="../paper-toggle-button/paper-toggle-button.html"><link rel="prefetch" href="../paper-card/paper-card.html"><link rel="prefetch" href="../iron-image/iron-image.html"><link rel="prefetch" href="../paper-input/paper-textarea.html"><link rel="prefetch" href="../iron-autogrow-textarea/iron-autogrow-textarea.html"><link rel="prefetch" href="../code-editor/code-editor.html"><link rel="prefetch" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="prefetch" href="../schema-behaviors/schema-behaviors.html"><link rel="prefetch" href="../juicy-ace-editor/juicy-ace-editor.html"><link rel="prefetch" href="../ace-builds/src-min-noconflict/ace.js"><link rel="prefetch" href="../ace-builds/src-min-noconflict/ext-searchbox.js"><link rel="prefetch" href="../code-editor/code-pen-button.html"><link rel="prefetch" href="../app-datepicker/app-datepicker.html"><link rel="prefetch" href="../app-datepicker/app-datepicker-icons.html"><link rel="prefetch" href="../app-datepicker/app-datepicker-animations.html"><link rel="prefetch" href="../neon-animation/web-animations.html"><link rel="prefetch" href="../web-animations-js/web-animations-next-lite.min.js"><link rel="prefetch" href="../iron-list/iron-list.html"><link rel="prefetch" href="../iron-scroll-target-behavior/iron-scroll-target-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animated-pages.html"><link rel="prefetch" href="../neon-animation/animations/slide-from-left-animation.html"><link rel="prefetch" href="../neon-animation/animations/slide-from-right-animation.html"><link rel="prefetch" href="../paper-icon-picker/paper-icon-picker.html"><link rel="prefetch" href="../paper-listbox/paper-listbox.html"><link rel="prefetch" href="../iron-a11y-keys/iron-a11y-keys.html"><link rel="prefetch" href="../paper-icon-picker/paper-icon-picker-icon.html"><link rel="prefetch" href="../paper-input-flagged/paper-input-flagged.html"><link rel="prefetch" href="../vaadin-split-layout/vaadin-split-layout.html"><link rel="prefetch" href="../grafitto-filter/grafitto-filter.html"><link rel="prefetch" href="../dropdown-select/dropdown-select.html"><link rel="prefetch" href="../web-animations-js/web-animations-next-lite.min.html"><link rel="prefetch" href="hax-app-browser-item.html"><link rel="prefetch" href="../iron-icons/device-icons.html"><link rel="prefetch" href="../iron-icons/hardware-icons.html"><link rel="prefetch" href="../iron-icons/social-icons.html"><link rel="prefetch" href="../iron-icons/av-icons.html"><link rel="prefetch" href="../iron-icons/places-icons.html"><link rel="prefetch" href="../iron-icons/maps-icons.html"><link rel="prefetch" href="hax-app-search.html"><link rel="prefetch" href="../elmsln-loading/elmsln-loading.html"><link rel="prefetch" href="../lrn-icons/lrn-icons.html"><link rel="prefetch" href="hax-app-search-inputs.html"><link rel="prefetch" href="hax-app-search-result.html"><link rel="prefetch" href="hax-gizmo-browser-item.html"></head><body><dom-module id="hax-manager"><template><style include="materializecss-styles">:host{display:block;--hax-manager-steps-color:#e5e5e5;--hax-manager-ink-color:#2e2e2e;--hax-accent:#34e79a;}#dialog{z-index:10000;margin-top:64px;}:host[active-page="0"]{--app-drawer-width:300px;}:host[active-page="1"]{--app-drawer-width:300px;}:host[active-page="2"]{--app-drawer-width:800px;}:host[active-step]{--app-drawer-width:1000px;}:host[searching]{--app-drawer-width:1000px;}.manager-title{position:fixed;background-color:#ffffff;width:calc(100% - 32px);text-align:left;padding:8px 16px;margin:0;font-size:24px;font-weight:bold;z-index:2;margin-top:-32px;}#activepage{margin-top:32px;}#preview{height:100%;}vaadin-upload{--primary-color:var(--hax-accent);--primary-font-color:#424242;--dark-primary-color:#424242;--light-primary-color:var(--hax-accent);--error-color:darkred;color:#424242;display:block;padding:32px !important;--vaadin-upload-button-add-wrapper:{border:2px solid #424242;background-color:var(--hax-accent);color:#424242;display:block;};--vaadin-upload-buttons-primary:{display:block;width:100%;flex:unset;-webkit-flex:unset;};--vaadin-upload-button-add:{color:#424242;display:block;flex:unset;-webkit-flex:unset;};--vaadin-upload-drop-label:{color:#424242;display:block;padding:16px;};--vaadin-upload-drop-label-dragover:{color:#424242;};--vaadin-upload-file-list:{padding:16px;margin:0;};}vaadin-upload[dragover]{border-color:#396;}vaadin-upload-file{--disabled-text-color:#222222;}.page-area{padding:0 16px;}.page-area.add-area{padding:0 16px;}.add-url-are,
      .add-upload-area{margin:16px 0;}.url-description{font-size:12px;color:grey;}#steppages{height:100%;}#newassetconfigure{width:100%;margin:0;padding:16px;background-color:#e2e2e2;}@media screen and (max-width: 550px){.hide-on-mobile{opacity:0;visibility:hidden;position:absolute;left:-9999px;}.page-area.hax-manager{padding:6px;}}</style><app-drawer id="dialog" opened="{{opened}}" disable-swipe=""><div class="dialog-contents" id="dialogcontent" style="height: 100%; overflow: auto;"><iron-pages id="steppages" selected="{{activeStep}}" fallback-selection="select" role="main"><div data-value="select"><h3 class="manager-title">[[activeTitle]]</h3><iron-pages id="activepage" selected="{{activePage}}" fallback-selection="link"><div class="page-area add-area"><div class="add-url-area"><paper-input id="url" label="URL" type="url" auto-validate=""></paper-input><div class="url-description">A full URL with http:// referencing a link that already exists on the web.</div></div><div class="add-upload-area"><vaadin-upload form-data-name="file-upload" id="fileupload" hidden$="[[!canSupportUploads]]"></vaadin-upload></div><paper-button id="newassetconfigure" raised="">Configure item</paper-button></div><div class="page-area"><hax-app-browser id="appbrowser"><slot></slot></hax-app-browser></div><div class="page-area"><hax-gizmo-browser id="gizmobrowser"></hax-gizmo-browser></div></iron-pages></div><div style="height:100%;"><hax-preview id="preview" element="{{activeHaxElement}}"></hax-preview></div></iron-pages></div></app-drawer></template><script>Polymer({is:'hax-manager',listeners:{"dialog.iron-overlay-canceled":'close',"dialog.iron-overlay-closed":'close',"newassetconfigure.tap":'newAssetConfigure',"fileupload.upload-before":'_fileAboutToUpload',"fileupload.upload-response":'_fileUploadResponse'},properties:{opened:{type:Boolean,value:!1,reflectToAttribute:!0,observer:'_openedChanged'},editExistingNode:{type:Boolean,value:!1},editTitle:{type:String,computed:'_computeEditTitle(editExistingNode)'},activeTitle:{type:String,value:'Add content'},activeStep:{type:Boolean,reflectToAttribute:!0,value:!1,observer:'_activeStepChanged'},searching:{type:Boolean,reflectToAttribute:!0,value:!1},activePage:{type:String,reflectToAttribute:!0,value:0,observer:'_activePageChanged'},canSupportUploads:{type:Boolean,value:!1},activeHaxElement:{type:Object,observer:'_activeHaxElementChanged'},appList:{type:Array,value:[]},__allowUpload:{type:Boolean,value:!1}},ready:function(){document.body.appendChild(this)},attached:function(){this.fire('hax-register-manager',this),document.body.addEventListener('hax-store-property-updated',this._haxStorePropertyUpdated.bind(this)),document.body.addEventListener('hax-app-picker-selection',this._haxAppPickerSelection.bind(this)),document.body.addEventListener('place-holder-file-drop',this._placeHolderFileDrop.bind(this))},togglePanelSize:function(){this.$.dialog.classList.toggle('grow'),this.updateStyles(),window.dispatchEvent(new Event('resize'))},_computeEditTitle:function(a){return babelHelpers.typeof(this.activeHaxElement)!=='undefined'&&a?'Update':'Insert'},_placeHolderFileDrop:function(a){this.resetManager(),this.open(),Polymer.HaxStore.instance.activePlaceHolder=a.detail.placeHolderElement,this.$.fileupload._onDrop(a.detail)},_fileAboutToUpload:function(a){if(!this.__allowUpload){a.preventDefault(),a.stopPropagation();var b={source:a.detail.file.name,type:a.detail.file.type},c=Polymer.HaxStore.guessGizmoType(b),d=Polymer.HaxStore.getHaxAppStoreTargets(c);0==d.length?Polymer.HaxStore.toast('Sorry, you don\'t have a storage location that can handle '+c+' uploads!',5e3):Polymer.HaxStore.instance.haxAppPicker.presentOptions(d,c,'Where would you like to upload this '+c+'?','app')}else this.__allowUpload=!1},_haxAppPickerSelection:function(a){var b=a.detail.connection;this.__appUsed=a.detail,this.$.fileupload.method=b.operations.add.method;var c=b.protocol+'://'+b.url;'/'!=c.substr(c.length-1)&&(c+='/'),babelHelpers.typeof(b.operations.add.endPoint)!=='undefined'&&(c+=b.operations.add.endPoint),this.$.fileupload.headers=b.headers,this.$.fileupload.target=c,this.__allowUpload=!0,this.$.fileupload.uploadFiles()},_fileUploadResponse:function(a){var b=JSON.parse(a.detail.xhr.response),c=this.__appUsed.connection.operations.add.resultMap,d={},e={};for(var f in babelHelpers.typeof(this._resolveObjectPath(c.item,b))!=='undefined'&&(d=this._resolveObjectPath(c.item,b)),e.type=c.defaultGizmoType,c.gizmo)e[f]=this._resolveObjectPath(c.gizmo[f],d);babelHelpers.typeof(e.url)==='undefined'&&babelHelpers.typeof(e.source)!=='undefined'&&(e.url=e.source),babelHelpers.typeof(c.gizmo.type)!=='undefined'&&(e.type=this._resolveObjectPath(c.gizmo.type,d)),this.$.url.value=e.url,this.newAssetConfigure()},_activePageChanged:function(a){('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&(this.searching=!1,this.updateStyles(),1===a?(this.activeTitle='Find content',this.$.appbrowser.resetBrowser()):2===a?(this.activeTitle='Make content',this.$.gizmobrowser.resetBrowser()):this.activeTitle='Add content')},_haxStorePropertyUpdated:function(a){a.detail&&babelHelpers.typeof(a.detail.value)!=='undefined'&&a.detail.property&&this.set(a.detail.property,a.detail.value)},_activeHaxElementChanged:function(a,b){('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'&&(this.$.preview.advancedForm=!1,babelHelpers.typeof(a.tag)==='undefined'?this.resetManager():(this.$.dialog.scrollTop=0,this.selectStep('configure')))},insertHaxElement:function(){var a=this.$.preview.previewNode,b=Polymer.HaxStore.nodeToHaxElement(a);b.replace=this.editExistingNode,babelHelpers.typeof(this.activeHaxElement.__type)!=='undefined'&&(b.__type=this.activeHaxElement.__type),b.replacement=a,this.fire('hax-insert-content',b);var c='New element added!';this.editExistingNode&&(c='Element updated!'),Polymer.HaxStore.toast(c,2e3),this.close()},resetManager:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0;this.selectStep('select'),this.activePage=a,document.body.style.overflow=null,this.appList=Polymer.HaxStore.instance.appList,this.searching=!1,Polymer.HaxStore.write('activeApp',null,this),window.dispatchEvent(new Event('resize')),this.editExistingNode=!1,this.$.url.value='',this.$.fileupload.headers='',this.$.fileupload.method='',this.$.fileupload.target='',this.__allowUpload=!1},cancel:function(){this.close()},_openedChanged:function(a,b){b&&!a?document.body.style.overflow=null:a&&!b&&(document.body.style.overflow='hidden')},close:function(a){var b=Polymer.dom(a),c=b.localTarget;(('undefined'===typeof a?'undefined':babelHelpers.typeof(a))==='undefined'||c===this.$.dialog)&&(Polymer.HaxStore.write('activeHaxElement',{},this),this.opened=!1,this.resetManager())},open:function(){this.opened=!0},newAssetConfigure:function(){var a={source:this.$.url.value},b=Polymer.HaxStore.guessGizmoType(a),c=Polymer.HaxStore.guessGizmo(b,a);0<c.length?1===c.length?babelHelpers.typeof(c[0].tag)!=='undefined'&&Polymer.HaxStore.write('activeHaxElement',c[0],this):Polymer.HaxStore.instance.haxAppPicker.presentOptions(c,b,'Pick how to present the '+b,'gizmo'):Polymer.HaxStore.toast('Sorry, HAX doesn\'t know how to handle that type of link yet.')},toggleDialog:function(){var a=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;this.opened&&a?this.close():Polymer.HaxStore.instance.closeAllDrawers(this)},selectStep:function(a){this.activeStep=!('configure'!=a)},_activeStepChanged:function(a){(a||!a)&&(this.updateStyles(),window.dispatchEvent(new Event('resize')))},_resolveObjectPath:function(a,b){return a.split('.').reduce(function(a,b){return a?a[b]:null},b||self)}});</script></dom-module></body></html>