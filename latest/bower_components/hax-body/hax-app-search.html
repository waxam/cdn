<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../paper-input/paper-input.html"><link rel="import" href="../paper-card/paper-card.html"><link rel="import" href="../paper-styles/paper-styles.html"><link rel="import" href="../iron-list/iron-list.html"><link rel="import" href="../iron-ajax/iron-ajax.html"><link rel="import" href="../elmsln-loading/elmsln-loading.html"><link rel="import" href="hax-app-search-inputs.html"><link rel="import" href="hax-app-search-result.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../iron-form-element-behavior/iron-form-element-behavior.html"><link rel="prefetch" href="../iron-input/iron-input.html"><link rel="prefetch" href="../iron-a11y-announcer/iron-a11y-announcer.html"><link rel="prefetch" href="../iron-validatable-behavior/iron-validatable-behavior.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-input/paper-input-behavior.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-input/paper-input-char-counter.html"><link rel="prefetch" href="../paper-styles/typography.html"><link rel="prefetch" href="../font-roboto/roboto.html"><link rel="prefetch" href="../paper-input/paper-input-addon-behavior.html"><link rel="prefetch" href="../paper-input/paper-input-container.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-input/paper-input-error.html"><link rel="prefetch" href="../iron-image/iron-image.html"><link rel="prefetch" href="../paper-styles/element-styles/paper-material-styles.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../iron-resizable-behavior/iron-resizable-behavior.html"><link rel="prefetch" href="../iron-scroll-target-behavior/iron-scroll-target-behavior.html"><link rel="prefetch" href="../iron-ajax/iron-request.html"><link rel="prefetch" href="../lrn-icons/lrn-icons.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../materializecss-styles/colors.html"><link rel="prefetch" href="../paper-item/paper-item.html"><link rel="prefetch" href="../paper-item/paper-item-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../paper-item/paper-item-shared-styles.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-wizard.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout-classes.html"><link rel="prefetch" href="../iron-icons/image-icons.html"><link rel="prefetch" href="../iron-icons/iron-icons.html"><link rel="prefetch" href="../iron-icons/editor-icons.html"><link rel="prefetch" href="../iron-pages/iron-pages.html"><link rel="prefetch" href="../iron-selector/iron-selectable.html"><link rel="prefetch" href="../iron-selector/iron-selection.html"><link rel="prefetch" href="../paper-icon-button/paper-icon-button.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-toolbar/paper-toolbar.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-behavior.html"><link rel="prefetch" href="../iron-fit-behavior/iron-fit-behavior.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-overlay-backdrop.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-scroll-manager.html"><link rel="prefetch" href="../iron-overlay-behavior/iron-focusables-helper.html"><link rel="prefetch" href="../neon-animation/neon-animation-runner-behavior.html"><link rel="prefetch" href="../neon-animation/neon-animatable-behavior.html"><link rel="prefetch" href="../neon-animation/animations/opaque-animation.html"><link rel="prefetch" href="../neon-animation/neon-animation-behavior.html"><link rel="prefetch" href="../iron-dropdown/iron-dropdown-scroll-manager.html"><link rel="prefetch" href="../neon-animation/animations/fade-in-animation.html"><link rel="prefetch" href="../neon-animation/animations/fade-out-animation.html"><link rel="prefetch" href="../paper-menu-button/paper-menu-button-animations.html"><link rel="prefetch" href="../app-localize-behavior/app-localize-behavior.html"><link rel="prefetch" href="../intl-messageformat/dist/intl-messageformat.min.js"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-object.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-array.html"><link rel="prefetch" href="../paper-tooltip/paper-tooltip.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-item.html"><link rel="prefetch" href="../iron-collapse/iron-collapse.html"><link rel="prefetch" href="../paper-item/paper-item-body.html"><link rel="prefetch" href="../paper-collapse-item/simple-paper-item.html"><link rel="prefetch" href="../paper-collapse-item/paper-collapse-group.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-boolean.html"><link rel="prefetch" href="../paper-checkbox/paper-checkbox.html"><link rel="prefetch" href="../paper-behaviors/paper-checked-element-behavior.html"><link rel="prefetch" href="../iron-checked-element-behavior/iron-checked-element-behavior.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-enum.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-icons.html"><link rel="prefetch" href="../paper-dropdown-menu/paper-dropdown-menu-shared-styles.html"><link rel="prefetch" href="../paper-menu/paper-menu.html"><link rel="prefetch" href="../iron-menu-behavior/iron-menu-behavior.html"><link rel="prefetch" href="../iron-selector/iron-multi-selectable.html"><link rel="prefetch" href="../paper-menu/paper-menu-shared-styles.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-input.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-file.html"><link rel="prefetch" href="../paper-button/paper-button.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../eco-json-schema-form/eco-json-schema-geolocation.html"><link rel="prefetch" href="../iron-icons/communication-icons.html"><link rel="prefetch" href="../geo-location/geo-location.html"><link rel="prefetch" href="../google-map/google-map.html"><link rel="prefetch" href="../google-apis/google-maps-api.html"><link rel="prefetch" href="../iron-jsonp-library/iron-jsonp-library.html"><link rel="prefetch" href="../iron-selector/iron-selector.html"><link rel="prefetch" href="../google-map/google-map-marker.html"></head><body><dom-module id="hax-app-search"><template><style>:host{display:block;}paper-button.item-wrapper{margin:0;padding:0;}paper-card{padding:0;margin:8px;width:240px;font-size:12px;--paper-card-header:{max-height:160px;};}@media screen and (min-width: 800px){paper-card{font-size:14px;}}#loading[hidden]{visibility:hidden !important;opacity:0 !important;display:block !important;}.loading{width:calc(100% - 32px);z-index:1000;opacity:.9;text-align:center;align-content:space-around;justify-content:center;position:absolute;background-color:white;padding:0;margin:0;display:flex;margin:0 auto;visibility:visible;transition:visibility .5s, opacity .5s ease;}.loading elmsln-loading{margin:0 5em;display:inline-flex;}#loading{height:100%;display:flex;justify-content:center;}#loading .loading,
      #loading elmsln-loading{display:block;height:5em;}.card-content{padding:.1em;}.card-content p{padding:0;margin:0;}#itemlist{min-height:150px;border:1px solid #222222;}hax-app-search-inputs{min-height:150px;padding:16px 16px 0 16px;color:#222222;}hax-app-pagination{min-height:32px;font-size:.8em;display:none;justify-content:flex-end;justify-content:center;color:#222222;}</style><iron-ajax auto="[[auto]]" id="request" method="[[method]]" url="[[requestEndPoint]]" handle-as="json" headers="[[headers]]" params="[[requestParams]]" last-response="{{requestData}}" hidden="" loading="{{loading}}" debounce-duration="250"></iron-ajax><hax-app-search-inputs label="[[label]]" schema="{{searchSchema}}" values="{{searchValues}}"></hax-app-search-inputs><hax-app-pagination id="pagerbottom" request-data="[[requestData]]" pagination="[[pagination]]"></hax-app-pagination><div id="loading" class="loading" hidden$="[[!loading]]"><elmsln-loading color="blue-text text-darken-4" size="large"></elmsln-loading><h3 class="loading-text">Loading content..</h3></div><iron-list grid="" id="itemlist" items="[[media]]" as="resultData"><template><hax-app-search-result result-data="[[resultData]]"></hax-app-search-result></template></iron-list></template><script>Polymer({is:'hax-app-search',properties:{activeApp:{type:Object,observer:'_resetAppSearch'},auto:{type:Boolean,value:!1},searchSchema:{type:Object,value:{}},searchValues:{type:Object,value:{}},headers:{type:Object,value:{}},method:{type:String,value:'GET'},loading:{type:Boolean,value:!1},requestData:{type:Object,value:{},observer:'_requestDataChanged'},media:{type:Array,value:[],observer:'_mediaChanged'}},_searchValuesEvent:function(a){if(babelHelpers.typeof(a.detail)!=='undefined'){var b=this.requestParams;for(var c in a.detail)b[c]=a.detail[c];this.set('requestParams',{}),this.set('requestParams',b)}},_resetAppSearch:function(a){if(('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&null!==a){var b=a,c={};this.label=b.details.title,this.auto=!1,this.set('media',[]),babelHelpers.typeof(b.connection.data)!=='undefined'&&(c=b.connection.data),babelHelpers.typeof(b.connection.operations.browse.data)!=='undefined'&&(c=Object.assign(c,b.connection.operations.browse.data)),this.set('method',b.connection.operations.browse.method),this.set('headers',{}),babelHelpers.typeof(b.connection.headers)!=='undefined'&&this.set('headers',b.connection.headers),this.set('requestParams',{}),this.set('requestParams',c);var d=b.connection.protocol+'://'+b.connection.url;'/'!=d.substr(d.length-1)&&(d+='/'),babelHelpers.typeof(b.connection.operations.browse.endPoint)!=='undefined'&&(d+=b.connection.operations.browse.endPoint),this.set('requestEndPoint',d),this.set('searchSchema',{});var e={properties:{}};babelHelpers.typeof(b.connection.operations.browse.search)!=='undefined'&&(e.properties=b.connection.operations.browse.search,this.set('searchSchema',e)),this.resultMap=b.connection.operations.browse.resultMap,this.set('pagination',{}),babelHelpers.typeof(b.connection.operations.browse.pagination)!=='undefined'&&this.set('pagination',b.connection.operations.browse.pagination),this.auto=!(babelHelpers.typeof(b.connection.auto)!=='undefined')||b.connection.auto}},attached:function(){document.body.addEventListener('hax-store-property-updated',this._haxStorePropertyUpdated.bind(this)),document.body.addEventListener('hax-app-search-values-changed',this._searchValuesEvent.bind(this))},_haxStorePropertyUpdated:function(a){a.detail&&babelHelpers.typeof(a.detail.value)!=='undefined'&&a.detail.property&&this.set(a.detail.property,a.detail.value)},_requestDataChanged:function(a,b){if({}!=('undefined'===typeof a?'undefined':babelHelpers.typeof(a))&&('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'){var c=[],d=this.resultMap,e=[];if(babelHelpers.typeof(this._resolveObjectPath(d.items,a))==='undefined'?null!=a&&(e=a):e=this._resolveObjectPath(d.items,a),null!=e){for(i=0;i<e.length;i++){if(c[i]={title:this._resolveObjectPath(d.preview.title,e[i]),details:this._resolveObjectPath(d.preview.details,e[i]),type:d.defaultGizmoType,map:{}},babelHelpers.typeof(c[i].details)!=='undefined'&&(c[i].details=c[i].details.replace(/(<([^>]+)>)/ig,'')),d.preview.id.constructor===Object){var f=this._resolveObjectPath(d.preview.id.property,e[i]);'split'===d.preview.id.op&&(f=f.split(d.preview.id.delimiter),c[i].id=f[d.preview.id.position])}else c[i].id=this._resolveObjectPath(d.preview.id,e[i]);for(var g in c[i].image=babelHelpers.typeof(d.preview.image)==='undefined'?babelHelpers.typeof(d.image)==='undefined'?'':d.image:this._resolveObjectPath(d.preview.image,e[i]),d.gizmo)if('_url_source'===g){var h='';h=babelHelpers.typeof(c[i].map.__id)==='undefined'?this._resolveObjectPath(d.gizmo.id,e[i]):c[i].map.__id,c[i].map.source=d.gizmo._url_source.replace('<%= id %>',h)}else if(d.gizmo[g].constructor===Object){var j=this._resolveObjectPath(d.gizmo[g].property,e[i]);'split'===d.gizmo[g].op&&(j=j.split(d.gizmo[g].delimiter),c[i].map[g]=j[d.gizmo[g].position],'id'===g&&(c[i].map.__id=c[i].map[g]))}else c[i].map[g]=this._resolveObjectPath(d.gizmo[g],e[i]);babelHelpers.typeof(c[i].map.url)==='undefined'&&babelHelpers.typeof(c[i].map.source)!=='undefined'&&(c[i].map.url=c[i].map.source),babelHelpers.typeof(d.gizmo.type)!=='undefined'&&(c[i].type=this._resolveObjectPath(d.gizmo.type,e[i]))}this.set('media',[]),this.set('media',c)}}},_mediaChanged:function(a,b){var c=this;('undefined'===typeof b?'undefined':babelHelpers.typeof(b))!=='undefined'&&setTimeout(function(){c.$.itemlist.fire('iron-resize')},200)},_resolveObjectPath:function(a,b){return a.split('.').reduce(function(a,b){return a?a[b]:null},b||self)}});</script></dom-module></body></html>