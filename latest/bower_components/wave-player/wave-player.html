<html><head><link rel="import" href="../paper-material/paper-material.html"><link rel="import" href="../paper-fab/paper-fab.html"><link rel="import" href="../paper-icon-button/paper-icon-button.html"><link rel="import" href="../iron-icons/iron-icons.html"><link rel="import" href="../iron-icons/av-icons.html"><link rel="import" href="../hax-body-behaviors/hax-body-behaviors.html"><link rel="import" href="../schema-behaviors/schema-behaviors.html"><link rel="import" href="wavesurferimport.html"><link rel="prefetch" href="../polymer/polymer.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="../paper-styles/shadow.html"><link rel="prefetch" href="../paper-material/paper-material-shared-styles.html"><link rel="prefetch" href="../iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../iron-icon/iron-icon.html"><link rel="prefetch" href="../iron-meta/iron-meta.html"><link rel="prefetch" href="../paper-behaviors/paper-button-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-button-state.html"><link rel="prefetch" href="../iron-a11y-keys-behavior/iron-a11y-keys-behavior.html"><link rel="prefetch" href="../iron-behaviors/iron-control-state.html"><link rel="prefetch" href="../paper-behaviors/paper-ripple-behavior.html"><link rel="prefetch" href="../paper-ripple/paper-ripple.html"><link rel="prefetch" href="../paper-styles/color.html"><link rel="prefetch" href="../paper-styles/default-theme.html"><link rel="prefetch" href="../paper-behaviors/paper-inky-focus-behavior.html"><link rel="prefetch" href="../iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../wavesurfer.js/dist/wavesurfer.min.js"></head><body><dom-module id="wave-player"><style>:host{min-width:480px;height:150px;background-color:var(--dark-primary-color);}paper-icon-button{position:absolute;}.title, .subtitle{transition:all .5s ease;padding:10px 10px 10px 0;left:160px;position:absolute;}.subtitle{bottom:0;}.controls{height:50px;width:100%;top:0;background:var(--accent-color);z-index:20;}paper-fab{transition:all .5s ease;top:-25px;z-index:25;border-radius:0;}.albuminfo{position:relative;transition:all .5s ease;top:-156px;margin-bottom:-150px;z-index:20;height:150px;width:400px;background-color:rgba(0,0,0,.4);color:#fff;font-family:Roboto,sans-serif;}.albuminfoActive{top:-25;height:25px;width:100%;margin-bottom:-19px;}.waveContainer{top:-31px;transition:all .5s ease;background-color:var(--dark-primary-color);transform:scaleY(1.5);}.circleAnimation{border-radius:50%;overflow:auto;-moz-box-shadow:0 2px 5px 0 rgba(0,0,0,.4);box-shadow:0 2px 5px 0 rgba(0,0,0,.4);}.circleAnimation:active{-moz-box-shadow:0 8px 17px 0 rgba(0,0,0,.2);box-shadow:0 8px 17px 0 rgba(0,0,0,.2);}.playActive{top:0;width:100%;height:50px;}.waveActive{top:0px;transform:scaleY(1);}.centred, .titleActive{transform:scaleY(0);}.titleActive{opacity:0;}#playbutton{transition:all .5s ease;}.coverart{transition:all .5s ease;width:150px;height:150px;}.title{font-size:24px;}.coverartActive{width:25px;height:25px;}.nameActive{font-size:19px;padding:3px 3px 3px 0;left:30px;}.centred{top:calc(50% - 20px);left:calc(50% - 20px);transition:all .3s ease;}.left,.middle,.right{transform:scale(1);}.left{left:calc(25% - 20px);}.right{left:calc(75% - 20px);}.hidden{display:none;}@media only screen and (max-width: 500px){.albuminfo{width:100%;}}</style><template><paper-fab id="playbutton" class="circleAnimation" disabled="" icon="av:play-arrow" on-click="togglePlay"></paper-fab><paper-material id="controls" class="controls hidden" elevation="2"><paper-icon-button class="centred middle" style="color: white;" icon="av:pause" on-click="togglePlay"></paper-icon-button><paper-icon-button id="replay" class="centred" style="color: white;" icon="av:replay-30" on-click="throwBack"></paper-icon-button><paper-icon-button id="mute" class="centred" style="color: white;" icon="av:volume-up" on-click="toggleMute"></paper-icon-button></paper-material><paper-material id="container" class="waveContainer" elevation="0"></paper-material><div id="albuminfo" class="albuminfo"><img class="coverart" src="[[coverart]]"> <span class="title">[[title]]</span> <span class="subtitle">[[subtitle]]</span></div></template></dom-module><script>(function(){'use strict';Polymer({is:'wave-player',behaviors:[HAXBehaviors.PropertiesBehaviors,SchemaBehaviors.Schema],properties:{src:{type:String,value:'',notify:!0,observer:'_srcChanged'},title:{type:String,value:'',notify:!0},subtitle:{type:String,value:'',notify:!0},coverart:{type:String,value:'',notify:!0},wavesurfer:{type:Object},lean:{type:String,value:'left',notify:!0},wavecolor:{type:String,value:'#ffffff',notify:!0},progresscolor:{type:String,value:'#CFD8DC',notify:!0}},_srcChanged:function(a){('undefined'===typeof a?'undefined':babelHelpers.typeof(a))!=='undefined'&&''!==a&&window.wavesurferobject.load(this.src)},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:'Audio player',description:'Audio that is just like spotify.',icon:'av:play-circle-filled',color:'purple',groups:['Video','Media'],handles:[{type:'audio',source:'src',title:'title',caption:'subtitle'}],meta:{author:'LRNWebComponents'}},settings:{quick:[{property:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'}],configure:[{property:'src',title:'Source',description:'The URL for this video.',inputMethod:'textfield',icon:'link',required:!0,validationType:'url'},{property:'title',title:'Title',description:'A simple title',inputMethod:'textfield',icon:'av:video-label',required:!1,validationType:'text'}],advanced:[]}})},ready:function(){this.updateWavesurfer(),'right'===this.lean?(this.$.playbutton.style.right='25',this.$.controls.style.right='0'):(this.$.playbutton.style.left='25',this.$.controls.style.left='0'),''===this.name&&this.$.albuminfo.classList.add('hidden'),''===this.coverart&&(this.coverart=this.resolveUrl('art.jpg'))},activateAnimation:function(){var a=this,b=this.$.container,c=this.$.playbutton,d=this.$.controls,e=this.$.mute,f=this.$.replay,g=this.$.albuminfo,h=g.querySelector('.coverart'),i=g.querySelector('.title'),j=g.querySelector('.subtitle');c.setAttribute('icon','av:pause'),c.classList.remove('circleAnimation'),c.classList.add('playActive'),g.classList.add('albuminfoActive'),h.classList.add('coverartActive'),i.classList.add('nameActive'),j.classList.add('titleActive'),'right'===a.lean?this.$.playbutton.style.right='0':this.$.playbutton.style.left='0',b.classList.add('waveActive'),setTimeout(function(){d.classList.remove('hidden'),c.classList.add('hidden')},500),setTimeout(function(){e.classList.add('right'),f.classList.add('left')},600)},deactivateAnimation:function(){var a=this,b=this.$.container,c=this.$.playbutton,d=this.$.controls,e=this.$.mute,f=this.$.replay,g=this.$.albuminfo,h=g.querySelector('.coverart'),i=g.querySelector('.title'),j=g.querySelector('.subtitle');e.classList.remove('right'),f.classList.remove('left'),setTimeout(function(){d.classList.add('hidden'),c.classList.remove('hidden')},100),setTimeout(function(){c.setAttribute('icon','av:play-arrow'),c.classList.add('circleAnimation'),c.classList.remove('playActive'),g.classList.remove('albuminfoActive'),h.classList.remove('coverartActive'),i.classList.remove('nameActive'),j.classList.remove('titleActive'),'right'===a.lean?c.style.right='25':c.style.left='25',b.classList.remove('waveActive')},200)},initWaveSurfer:function(){var a=this;window.wavesurferobject.init({container:this.$.container,waveColor:this.wavecolor,progressColor:this.progresscolor,fillParent:!0,height:100}),window.wavesurferobject.on('ready',function(){a.$.playbutton.removeAttribute('disabled')}),window.wavesurferobject.on('finish',function(){a.deactivateAnimation()})},updateWavesurfer:function(){window.wavesurferobject=Object.create(WaveSurfer),this.initWaveSurfer()},togglePlay:function(){window.wavesurferobject.playPause();var a=this.$.playbutton.getAttribute('icon');'av:play-arrow'===a?this.activateAnimation():this.deactivateAnimation()},toggleMute:function(){var a=this.$.mute,b=a.getAttribute('icon');window.wavesurferobject.toggleMute(),'av:volume-up'===b?a.setAttribute('icon','av:volume-off'):a.setAttribute('icon','av:volume-up')},throwBack:function(){window.wavesurferobject.skipBackward(30)}})})();</script></body></html>