<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="vaadin-grid-column.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"><link rel="prefetch" href="vaadin-grid-templatizer.html"></head><body><dom-module id="vaadin-grid-column-group"><script>Polymer({is:'vaadin-grid-column-group',behaviors:[vaadin.elements.grid.ColumnBaseBehavior],properties:{_childColumns:{value:function(){return this._getChildColumns(this)}},flexGrow:{type:Number,readOnly:!0},width:{type:String,readOnly:!0},_visibleChildColumns:Array,colSpan:{type:Number,notify:!0,readOnly:!0},_rootColumns:Array},observers:['_updateVisibleChildColumns(_childColumns)','_childColumnsChanged(_childColumns)','_flexGrowChanged(flexGrow)','_widthChanged(width)','_frozenChanged(_childColumns, frozen)','_hiddenChanged(hidden)','_visibleChildColumnsChanged(_visibleChildColumns)','_colSpanChanged(colSpan)','_orderChanged(_order, _rootColumns)','_reorderStatusChanged(_reorderStatus, _rootColumns)','_resizableChanged(resizable, _rootColumns)'],listeners:{"property-changed":'_columnPropChanged'},attached:function(){this._updateFlexAndWidth(this._visibleChildColumns),this._addNodeObserver()},detached:function(){this._observer&&Polymer.dom(this).unobserveNodes(this._observer)},_columnPropChanged:function(a){'hidden'===a.detail.path&&(this._preventHiddenCascade=!0,this._updateVisibleChildColumns(this._childColumns),this._preventHiddenCascade=!1),/flexGrow|width|hidden|_childColumns/.test(a.detail.path)&&this._updateFlexAndWidth(this._visibleChildColumns),'frozen'===a.detail.path&&(this.frozen=this.frozen||a.detail.value),'lastFrozen'===a.detail.path&&(this._lastFrozen=this._lastFrozen||a.detail.value)},_orderChanged:function(a,b){var c=Math.log;if(a&&b){var d=/(0+)$/.exec(a).pop().length,e=~~(c(b.length)/c(Math.LN10))+1,f=Math.pow(10,d-e),g=b.slice(0);g[0]&&g[0]._order&&g.sort(function(c,a){return c._order-a._order}),g.forEach(function(b,c){b._order=a+(c+1)*f}),this.fire('property-changed',{path:'order',value:a})}},_reorderStatusChanged:function(a,b){void 0===a||void 0===b||(b.forEach(function(b){b._reorderStatus=a}),this.fire('property-changed',{path:'reorderStatus',value:a}))},_resizableChanged:function(a,b){void 0===a||void 0===b||(b.forEach(function(b){b.resizable=a}),this.fire('property-changed',{path:'resizable',value:a}))},_updateVisibleChildColumns:function(a){this._visibleChildColumns=Array.prototype.filter.call(a,function(a){return!a.hidden})},_childColumnsChanged:function(a){!this._autoHidden&&this.hidden&&(Array.prototype.forEach.call(a,function(a){a.hidden=!0}),this._updateVisibleChildColumns(a)),this.fire('property-changed',{path:'_childColumns',value:a})},_updateFlexAndWidth:function(a){a.length?this._setWidth('calc('+Array.prototype.reduce.call(a,function(a,b){return a+=' + '+(b.width||'0px').replace('calc','')},'').substring(3)+')'):this._setWidth('0px'),this._setFlexGrow(Array.prototype.reduce.call(a,function(a,b){return a+b.flexGrow},0))},_frozenChanged:function(a,b){void 0===a||void 0===b||((this._oldFrozen!==void 0||!1!==b)&&(Array.prototype.forEach.call(a,function(a){a.frozen='vaadin-grid-column-group'===a.localName?a.frozen||b:b}),this.fire('property-changed',{path:'frozen',value:b})),this._oldFrozen=b)},_hiddenChanged:function(a){this._rootColumns&&!this._preventHiddenCascade&&(this._ignoreVisibleChildColumns=!0,this._rootColumns.forEach(function(b){b.hidden=a}),this._ignoreVisibleChildColumns=!1),this.fire('property-changed',{path:'hidden',value:a})},_visibleChildColumnsChanged:function(a){this._setColSpan(a.length),this._ignoreVisibleChildColumns||(0===a.length?this._autoHidden=this.hidden=!0:this.hidden&&this._autoHidden&&(this._autoHidden=this.hidden=!1))},_colSpanChanged:function(a){this.fire('property-changed',{path:'colSpan',value:a})},_getChildColumns:function(a){return Polymer.dom(a).queryDistributedElements('vaadin-grid-column, vaadin-grid-column-group, vaadin-grid-selection-column')},_addNodeObserver:function(){this._observer=Polymer.dom(this).observeNodes(function(a){var b=function(a){return a.nodeType===Node.ELEMENT_NODE&&/^vaadin-grid-(column|selection)/i.test(a.localName)};(0<a.addedNodes.filter(b).length||0<a.removedNodes.filter(b).length)&&(this._rootColumns=this._getChildColumns(this),this._childColumns=this._rootColumns)}.bind(this))}});</script></dom-module></body></html>