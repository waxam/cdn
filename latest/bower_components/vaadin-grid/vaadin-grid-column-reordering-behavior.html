<html><head></head><body><dom-module id="vaadin-grid-column-reordering-themability-styles"><template><style>vaadin-grid-table[reordering] .vaadin-grid-cell{background:#000;}:host([reordering]) .vaadin-grid-cell[reorder-status="dragging"]{background:var(--primary-color, #000);}vaadin-grid-table[reordering] .vaadin-grid-cell:not([detailscell]) ::slotted(vaadin-grid-cell-content){transition:opacity 300ms;transform:translateZ(0);opacity:0.8;}#scroller .vaadin-grid-cell[reorder-status="allowed"] ::slotted(vaadin-grid-cell-content){opacity:1;}#scroller .vaadin-grid-cell[reorder-status="dragging"]{background:var(--primary-color, #000);}#scroller .vaadin-grid-cell[reorder-status="dragging"] ::slotted(vaadin-grid-cell-content){opacity:0.95;}</style></template></dom-module><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.ColumnReorderingBehavior={properties:{columnReorderingAllowed:{type:Boolean,value:!1}}},vaadin.elements.grid.TableColumnReorderingBehavior={properties:{_orderBaseScope:{type:Number,value:1e7}},listeners:{dragstart:'_onDragStart',dragover:'_onDragOver',dragend:'_onDragEnd'},observers:['_updateOrders(columnTree, columnTree.*)'],_updateOrders:function(a,b){void 0===a||void 0===b||a[0].forEach(function(a,b){a._order=(b+1)*this._orderBaseScope},this)},_onDragStart:function(a){if('vaadin-grid-cell-content'===a.target.localName){var b=this._getCellByCellContent(a.target);b&&(this.toggleAttribute('reordering',!0),this._draggedColumn=b.column,this._setSiblingsReorderStatus(this._draggedColumn,'allowed'),this._draggedColumn._reorderStatus='dragging',a.dataTransfer&&(a.dataTransfer.setData('text',''),a.dataTransfer.effectAllowed='move'),this._autoScroller())}},_setSiblingsReorderStatus:function(a,b){Array.prototype.filter.call(Polymer.dom(Polymer.dom(a).parentNode).children,function(b){return /column/.test(b.localName)&&this._isSwapAllowed(b,a)},this).forEach(function(a){a._reorderStatus=b})},_onDragOver:function(a){if(this._draggedColumn){var b=Polymer.Element?a.composedPath():Polymer.dom(a).path,c=b.filter(function(a){return'vaadin-grid-cell-content'===a.localName})[0];if(c){a.preventDefault();var d=this._getCellByCellContent(c),e=this._getTargetColumn(d,this._draggedColumn);e&&this._isSwapAllowed(this._draggedColumn,e)&&this._isSwappableByPosition(e,a.clientX)&&this._swapColumnOrders(this._draggedColumn,e),this._lastDragClientX=a.clientX}}},_autoScroller:function(){if(this._lastDragClientX){var a=this._lastDragClientX-this.getBoundingClientRect().right+50,b=this.getBoundingClientRect().left-this._lastDragClientX+50;0<a?this.$.table.scrollLeft+=a/10:0<b&&(this.$.table.scrollLeft-=b/10),this._scrollHandler()}this._draggedColumn&&this.async(this._autoScroller,10)},_onDragEnd:function(){this._draggedColumn&&(this.toggleAttribute('reordering',!1),this._draggedColumn._reorderStatus='',this._setSiblingsReorderStatus(this._draggedColumn,''),this._draggedColumn=null,this._lastDragClientX=null)},_isSwapAllowed:function(a,b){if(a&&b){var c=a.parentElement===b.parentElement,d=a.frozen===b.frozen;return a!==b&&c&&d}},_isSwappableByPosition:function(a,b){var c=Array.prototype.filter.call(Polymer.dom(this.$.header).querySelectorAll('.vaadin-grid-cell'),function(b){return b.column===a})[0],d=this.$.header.querySelector('[reorder-status=dragging]').getBoundingClientRect();return c.getBoundingClientRect().left>d.left?b>c.getBoundingClientRect().right-d.width:b<c.getBoundingClientRect().left+d.width},_getCellByCellContent:function(a){if(Polymer.Element)return a.assignedSlot.parentNode;var b=Polymer.dom(a).getDestinationInsertionPoints()[0];return Polymer.dom(b).parentNode},_swapColumnOrders:function(a,b){var c=a._order;a._order=b._order,b._order=c,this._updateLastFrozen(),this._updateLastColumn()},_getTargetColumn:function(a,b){if(a&&b){for(var c=a.column;c.parentElement!==b.parentElement&&c!==this.target;)c=c.parentElement;return c.parentElement===b.parentElement?c:a.column}}};</script></body></html>