<html><head><link rel="import" href="../polymer/polymer.html"><link rel="import" href="../iron-scroll-target-behavior/iron-scroll-target-behavior.html"><script>window.vaadin=window.vaadin||{},vaadin.elements=vaadin.elements||{},vaadin.elements.grid=vaadin.elements.grid||{},vaadin.elements.grid.IronListBehaviorImpl=function(){var a=Math.abs,b=Math.round,c=Math.ceil,d=Math.floor,e=Math.min,f=Math.max,g=navigator.userAgent.match(/iP(?:hone|ad;(?: U;)? CPU) OS (\d+)/),h=g&&8<=g[1];return{is:'iron-list',properties:{maxPhysicalCount:{type:Number,value:500},as:{type:String,value:'item'},indexAs:{type:String,value:'index'}},_ratio:0.5,_scrollerPaddingTop:0,_scrollPosition:0,_physicalSize:0,_physicalAverage:0,_physicalAverageCount:0,_physicalTop:0,_virtualCount:0,_physicalIndexForKey:null,_estScrollHeight:0,_scrollHeight:0,_viewportHeight:0,_viewportWidth:0,_physicalItems:null,_physicalSizes:null,_firstVisibleIndexVal:null,_lastVisibleIndexVal:null,_collection:null,_itemsRendered:!1,_lastPage:null,_maxPages:3,_itemsPerRow:1,_itemWidth:0,_rowHeight:0,get _physicalBottom(){return this._physicalTop+this._physicalSize},get _scrollBottom(){return this._scrollPosition+this._viewportHeight},get _virtualEnd(){return this._virtualStart+this._physicalCount-1},get _hiddenContentSize(){return this._physicalSize-this._viewportHeight},get _maxScrollTop(){return this._estScrollHeight-this._viewportHeight+this._scrollerPaddingTop},_minVirtualStart:0,get _maxVirtualStart(){return f(0,this._virtualCount-this._physicalCount)},_virtualStartVal:0,set _virtualStart(a){this._virtualStartVal=e(this._maxVirtualStart,f(this._minVirtualStart,a))},get _virtualStart(){return this._virtualStartVal||0},_physicalStartVal:0,set _physicalStart(a){this._physicalStartVal=a%this._physicalCount,0>this._physicalStartVal&&(this._physicalStartVal=this._physicalCount+this._physicalStartVal),this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalStart(){return this._physicalStartVal||0},_physicalCountVal:0,set _physicalCount(a){this._physicalCountVal=a,this._physicalEnd=(this._physicalStart+this._physicalCount-1)%this._physicalCount},get _physicalCount(){return this._physicalCountVal},_physicalEnd:0,get _optPhysicalSize(){return this._viewportHeight*this._maxPages},get _optPhysicalCount(){return this._estRowsInView*this._itemsPerRow*this._maxPages},get _isVisible(){return this.scrollTarget&&!!(this.scrollTarget.offsetWidth||this.scrollTarget.offsetHeight)},get firstVisibleIndex(){if(null===this._firstVisibleIndexVal){var a=d(this._physicalTop+this._scrollerPaddingTop);this._firstVisibleIndexVal=this._iterateItems(function(b,c){if(a+=this._getPhysicalSizeIncrement(b),a>this._scrollPosition)return c})||0}return this._firstVisibleIndexVal},get lastVisibleIndex(){if(null===this._lastVisibleIndexVal){var a=this._physicalTop;this._iterateItems(function(b,c){if(a<this._scrollBottom)this._lastVisibleIndexVal=c;else return!0;a+=this._getPhysicalSizeIncrement(b)})}return this._lastVisibleIndexVal},get _defaultScrollTarget(){return this},get _virtualRowCount(){return c(this._virtualCount/this._itemsPerRow)},get _estRowsInView(){return c(this._viewportHeight/this._rowHeight)},get _physicalRows(){return c(this._physicalCount/this._itemsPerRow)},attached:function(){this.updateViewportBoundaries(),this._render(),this.listen(this,'iron-resize','_resizeHandler')},detached:function(){this._itemsRendered=!1,this.unlisten(this,'iron-resize','_resizeHandler')},updateViewportBoundaries:function(){this._scrollerPaddingTop=this.scrollTarget===this?0:parseInt(window.getComputedStyle(this)['padding-top']||0,10),this._viewportHeight=this._scrollTargetHeight},_update:function(a,b){if(this._assignModels(a),this._updateMetrics(a),b)for(;b.length;){var c=b.pop();this._physicalTop-=this._getPhysicalSizeIncrement(c)}this._positionItems(),this._updateScrollerSize(),this._increasePoolIfNeeded()},_increasePoolIfNeeded:function(){if(0===this._viewportHeight)return!1;var a=this._physicalSizes.reduce(function(a,b){return a+(b||100)},0),e=a>this._viewportHeight;if(a>=this._optPhysicalSize&&e)return!1;var f=d(this._physicalSize/this._viewportHeight);if(0===f)this._debounceTemplate(this._increasePool.bind(this,b(0.5*this._physicalCount)));else if(this._lastPage!==f&&e)Polymer.dom.addDebouncer(this.debounce('_debounceTemplate',this._increasePool.bind(this,this._itemsPerRow),16));else{var g=this._physicalSize/this._physicalCount,h=this._viewportHeight/g,i=this._maxPages*h,j=c(i-this._physicalCount);this._debounceTemplate(this._increasePool.bind(this,j||1))}return this._lastPage=f,!0},_debounceTemplate:function(a){Polymer.dom.addDebouncer(this.debounce('_debounceTemplate',a))},_increasePool:function(a){var b=e(this._physicalCount+a,this._virtualCount-this._virtualStart,f(this.maxPhysicalCount,25)),c=this._physicalCount,d=b-c;0>=d||([].push.apply(this._physicalItems,this._createPool(d)),[].push.apply(this._physicalSizes,Array(d)),this._physicalCount=c+d,this._update())},_render:function(){var a=0<this._virtualCount||0<this._physicalCount;this.isAttached&&!this._itemsRendered&&this._isVisible&&a&&(this._lastPage=0,this._update(),this._itemsRendered=!0)},_iterateItems:function(a,b){var c,d,e,f;if(2===arguments.length&&b){for(f=0;f<b.length;f++)if(c=b[f],d=this._computeVidx(c),null!=(e=a.call(this,c,d)))return e;}else{for(c=this._physicalStart,d=this._virtualStart;c<this._physicalCount;c++,d++)if(null!=(e=a.call(this,c,d)))return e;for(c=0;c<this._physicalStart;c++,d++)if(null!=(e=a.call(this,c,d)))return e}},_computeVidx:function(a){return a>=this._physicalStart?this._virtualStart+(a-this._physicalStart):this._virtualStart+(this._physicalCount-this._physicalStart)+a},_updateMetrics:function(a){this.scrolling&&Polymer.dom.flush();var c=0,d=0,e=this._physicalAverageCount,f=this._physicalAverage;this._iterateItems(function(a){d+=this._physicalSizes[a]||0,this._physicalSizes[a]=this._physicalItems[a].offsetHeight,c+=this._physicalSizes[a],this._physicalAverageCount+=this._physicalSizes[a]?1:0},a),this._viewportHeight=this._scrollTargetHeight,this._physicalSize=this._physicalSize+c-d,this._physicalAverageCount!==e&&(this._physicalAverage=b((f*e+c)/this._physicalAverageCount))},_positionItems:function(){this._adjustScrollPosition();var a=this._physicalTop;this._iterateItems(function(b){this._physicalItems[b].style.transform=this._getTranslate(0,a),a+=this._physicalSizes[b]})},_getPhysicalSizeIncrement:function(a){return this._physicalSizes[a]},_shouldRenderNextRow:function(a){return a%this._itemsPerRow===this._itemsPerRow-1},_adjustScrollPosition:function(){var a=0===this._virtualStart?this._physicalTop:e(this._scrollPosition+this._physicalTop,0);a&&(this._physicalTop-=a,!h&&0!==this._physicalTop&&this._resetScrollPosition(this._scrollTop-a))},_resetScrollPosition:function(a){this.scrollTarget&&(this._scrollTop=a,this._scrollPosition=this._scrollTop)},_updateScrollerSize:function(b){this._estScrollHeight=this._physicalBottom+f(this._virtualCount-this._physicalCount-this._virtualStart,0)*this._physicalAverage,b=b||0===this._scrollHeight,b=b||this._scrollPosition>=this._estScrollHeight-this._physicalSize,(b||a(this._estScrollHeight-this._scrollHeight)>=this._optPhysicalSize)&&(this.$.items.style.height=this._estScrollHeight+'px',this._scrollHeight=this._estScrollHeight)},scrollToIndex:function(a){Polymer.dom.flush(),a=e(f(a,0),this._virtualCount-1),(!this._isIndexRendered(a)||a>=this._maxVirtualStart)&&(this._virtualStart=a-1),this._assignModels(),this._updateMetrics();var b=d(this._virtualStart/this._itemsPerRow)*this._physicalAverage;this._physicalTop=b;for(var c=this._physicalStart,g=this._virtualStart,h=0,i=this._hiddenContentSize;g<a&&h<=i;)h+=this._getPhysicalSizeIncrement(c),c=(c+1)%this._physicalCount,g++;this._updateScrollerSize(!0),this._positionItems(),this._resetScrollPosition(this._physicalTop+this._scrollerPaddingTop+h),this._increasePoolIfNeeded(),this._firstVisibleIndexVal=null,this._lastVisibleIndexVal=null},_resetAverage:function(){this._physicalAverage=0,this._physicalAverageCount=0},_resizeHandler:function(){g&&100>a(this._viewportHeight-this._scrollTargetHeight),Polymer.dom.addDebouncer(this.debounce('_debounceTemplate',function(){this.updateViewportBoundaries(),this._render(),this._itemsRendered&&this._physicalItems&&this._isVisible&&(this._resetAverage(),this.scrollToIndex(this.firstVisibleIndex))}.bind(this),1))},updateSizeForItem:function(a){var b=this._physicalIndexForKey[a];null!=b&&(this._updateMetrics([b]),this._positionItems())},_isIndexRendered:function(a){return a>=this._virtualStart&&a<=this._virtualEnd},_isIndexVisible:function(a){return a>=this.firstVisibleIndex&&a<=this.lastVisibleIndex}}}(),vaadin.elements.grid.IronListBehavior=[Polymer.Templatizer,Polymer.IronScrollTargetBehavior,vaadin.elements.grid.IronListBehaviorImpl];</script><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"></head><body></body></html>