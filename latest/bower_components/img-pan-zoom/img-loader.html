<html><head><link rel="import" href="../polymer/polymer.html"><link rel="prefetch" href="../polymer/polymer-mini.html"><link rel="prefetch" href="../polymer/polymer-micro.html"></head><body><dom-module id="img-loader"><template><img id="img" hidden="" src="[[src]]"></template><script>Polymer({is:'img-loader',properties:{src:{observer:'_srcChanged',type:String},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1}},ready:function(){var a=this.$.img;a.onload=function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))}.bind(this),a.onerror=function(){this.$.img.src!==this._resolveSrc(this.src)||(this._reset(),this._setLoading(!1),this._setLoaded(!1),this._setError(!0))}.bind(this),this._resolvedSrc=''},_srcChanged:function(a){var b=this._resolveSrc(a);b===this._resolvedSrc||(this._resolvedSrc=b,this._reset(),this._load(a))},_load:function(a){a?this.$.img.src=a:this.$.img.removeAttribute('src'),this._setLoading(!!a),this._setLoaded(!1),this._setError(!1)},_reset:function(){this.$.img.removeAttribute('src'),this._setLoading(!1),this._setLoaded(!1),this._setError(!1)},_resolveSrc:function(a){var b=this.ownerDocument.baseURI;return new URL(Polymer.ResolveUrl.resolveUrl(a,b),b).href}});</script></dom-module></body></html>