define(["exports","./node_modules/@polymer/polymer/polymer-legacy.js","./node_modules/@polymer/iron-a11y-keys-behavior/iron-a11y-keys-behavior.js","./node_modules/@polymer/paper-progress/paper-progress.js","./node_modules/@polymer/iron-icon/iron-icon.js","./node_modules/@polymer/paper-icon-button/paper-icon-button.js","./node_modules/@polymer/paper-ripple/paper-ripple.js","./node_modules/@lrnwebcomponents/materializecss-styles/materializecss-styles.js","./node_modules/@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","./node_modules/@lrnwebcomponents/schema-behaviors/schema-behaviors.js","./node_modules/@polymer/iron-iconset-svg/iron-iconset-svg.js","./lib/paper-audio-icons.js"],function(a,b,c){"use strict";function n(){var p=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        box-sizing: border-box;\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n      }\n\n      #wrapper {\n        position: relative;\n        cursor: pointer;\n        height: 50px;\n        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n      }\n\n      #left,\n      #right {\n        height: 50px;\n        width: 50px;\n        position: relative;\n      }\n\n      #left {\n        background-color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #right {\n        background-color: rgba(255, 255, 255, 0.75);\n      }\n\n      paper-icon-button,\n      iron-icon {\n        color: #fff;\n      }\n\n      #duration,\n      #title,\n      #progress2 {\n        text-align: center;\n        line-height: 50px;\n      }\n\n      #duration {\n        font-size: 11px;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      paper-icon-button,\n      iron-icon {\n        margin: auto;\n      }\n\n      #replay {\n        opacity: 0;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #title,\n      #progress2 {\n        pointer-events: none;\n        font-size: 15px;\n      }\n\n      #title {\n        z-index: 2;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #progress2 {\n        width: 0px;\n        z-index: 5;\n        color: #fff;\n        overflow: hidden;\n      }\n\n      #center {\n        position: relative;\n        overflow: hidden;\n        background-color: rgba(255, 255, 255, 0.75);\n      }\n\n      #progress {\n        width: 100%;\n        transform-origin: left;\n        transform: scaleX(0);\n        background-color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      paper-ripple {\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      /* On hover */\n\n      :host(:not(.cantplay)) #right:hover #replay {\n        opacity: 1;\n      }\n\n      #right:hover #duration {\n        opacity: 0;\n      }\n\n      #left:hover #play,\n      #left:hover #pause {\n        transform: scale3d(1.1, 1.1, 1.1);\n        -ms-transform: scale3d(1.1, 1.1, 1.1);\n        -webkit-transform: scale3d(1.1, 1.1, 1.1);\n      }\n\n      /* On Error */\n\n      :host(.cantplay) #title {\n        font-size: 12px;\n      }\n\n      :host(.cantplay) #wrapper {\n        cursor: default;\n      }\n\n      :host(.cantplay) #play {\n        opacity: 0;\n      }\n\n      /* Flexbox Helpers */\n\n      .layout-horizontal {\n        display: flex;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        -ms-flex-direction: row;\n        -webkit-flex-direction: row;\n        flex-direction: row;\n      }\n\n      .flex {\n        -ms-flex: 1;\n        -webkit-flex: 1;\n        flex: 1;\n      }\n\n      .fit {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      .self-start {\n        -ms-align-self: flex-start;\n        -webkit-align-self: flex-start;\n        align-self: flex-start;\n      }\n\n      .self-end {\n        -ms-align-self: flex-end;\n        -webkit-align-self: flex-end;\n        align-self: flex-end;\n      }\n    </style>\n    <div id=\"wrapper\" class=\"layout-horizontal\">\n      <div id=\"left\" class=\"self-start\" on-tap=\"playPause\">\n        <!-- Icon -->\n        <paper-icon-button\n          id=\"play\"\n          icon=\"paper-audio-icons:play-arrow\"\n          class=\"fit\"\n          hidden$=\"[[ _hidePlayIcon(isPlaying, canBePlayed) ]]\"\n          role=\"button\"\n          aria-label=\"Play Audio\"\n          tabindex=\"-1\"\n        ></paper-icon-button>\n        <paper-icon-button\n          id=\"pause\"\n          icon=\"paper-audio-icons:pause\"\n          class=\"fit\"\n          hidden$=\"[[ !isPlaying ]]\"\n          role=\"button\"\n          aria-label=\"Pause Audio\"\n          tabindex=\"-1\"\n        ></paper-icon-button>\n        <iron-icon\n          id=\"error\"\n          icon=\"paper-audio-icons:error-outline\"\n          class=\"fit\"\n          hidden$=\"[[ !error ]]\"\n        ></iron-icon>\n      </div>\n      <div id=\"center\" class=\"flex\" on-down=\"_onDown\">\n        <!-- Title -->\n        <div id=\"title\" class=\"fit\" role=\"alert\">[[title]]</div>\n        <!-- Audio HTML5 element -->\n        <audio\n          id=\"audio\"\n          src$=\"[[src]]\"\n          preload$=\"[[ _setPreload(autoPlay, preload) ]]\"\n        ></audio>\n        <!-- Progress bar -->\n        <div id=\"progress\" class=\"fit\"></div>\n        <paper-ripple></paper-ripple>\n        <!-- Secondary white title -->\n        <div id=\"progress2\" class=\"fit\">\n          <div id=\"title2\" aria-hidden=\"true\">[[title]]</div>\n        </div>\n      </div>\n      <div id=\"right\" class=\"self-end\" on-click=\"restart\">\n        <!-- Duration -->\n        <div id=\"duration\" class=\"fit\" hidden$=\"[[ended]]\">\n          <span class=\"fit\" role=\"timer\" aria-label=\"Audio Track Length\"\n            >[[ _convertSecToMin(timeLeft) ]]</span\n          >\n        </div>\n        <!-- Icon -->\n        <paper-icon-button\n          id=\"replay\"\n          class=\"fit\"\n          icon=\"paper-audio-icons:replay\"\n          tabindex=\"-1\"\n          role=\"button\"\n          aria-label=\"Replay Audio\"\n        ></paper-icon-button>\n      </div>\n    </div>\n  "],["\n    <style>\n      :host {\n        display: block;\n        box-sizing: border-box;\n        font-family: \"Roboto\", \"Noto\", sans-serif;\n      }\n\n      #wrapper {\n        position: relative;\n        cursor: pointer;\n        height: 50px;\n        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);\n      }\n\n      #left,\n      #right {\n        height: 50px;\n        width: 50px;\n        position: relative;\n      }\n\n      #left {\n        background-color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #right {\n        background-color: rgba(255, 255, 255, 0.75);\n      }\n\n      paper-icon-button,\n      iron-icon {\n        color: #fff;\n      }\n\n      #duration,\n      #title,\n      #progress2 {\n        text-align: center;\n        line-height: 50px;\n      }\n\n      #duration {\n        font-size: 11px;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      paper-icon-button,\n      iron-icon {\n        margin: auto;\n      }\n\n      #replay {\n        opacity: 0;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #title,\n      #progress2 {\n        pointer-events: none;\n        font-size: 15px;\n      }\n\n      #title {\n        z-index: 2;\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      #progress2 {\n        width: 0px;\n        z-index: 5;\n        color: #fff;\n        overflow: hidden;\n      }\n\n      #center {\n        position: relative;\n        overflow: hidden;\n        background-color: rgba(255, 255, 255, 0.75);\n      }\n\n      #progress {\n        width: 100%;\n        transform-origin: left;\n        transform: scaleX(0);\n        background-color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      paper-ripple {\n        color: var(--paper-audio-player-color, blueviolet);\n      }\n\n      /* On hover */\n\n      :host(:not(.cantplay)) #right:hover #replay {\n        opacity: 1;\n      }\n\n      #right:hover #duration {\n        opacity: 0;\n      }\n\n      #left:hover #play,\n      #left:hover #pause {\n        transform: scale3d(1.1, 1.1, 1.1);\n        -ms-transform: scale3d(1.1, 1.1, 1.1);\n        -webkit-transform: scale3d(1.1, 1.1, 1.1);\n      }\n\n      /* On Error */\n\n      :host(.cantplay) #title {\n        font-size: 12px;\n      }\n\n      :host(.cantplay) #wrapper {\n        cursor: default;\n      }\n\n      :host(.cantplay) #play {\n        opacity: 0;\n      }\n\n      /* Flexbox Helpers */\n\n      .layout-horizontal {\n        display: flex;\n        display: -webkit-flex;\n        display: -ms-flexbox;\n        -ms-flex-direction: row;\n        -webkit-flex-direction: row;\n        flex-direction: row;\n      }\n\n      .flex {\n        -ms-flex: 1;\n        -webkit-flex: 1;\n        flex: 1;\n      }\n\n      .fit {\n        position: absolute;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n      }\n\n      .self-start {\n        -ms-align-self: flex-start;\n        -webkit-align-self: flex-start;\n        align-self: flex-start;\n      }\n\n      .self-end {\n        -ms-align-self: flex-end;\n        -webkit-align-self: flex-end;\n        align-self: flex-end;\n      }\n    </style>\n    <div id=\"wrapper\" class=\"layout-horizontal\">\n      <div id=\"left\" class=\"self-start\" on-tap=\"playPause\">\n        <!-- Icon -->\n        <paper-icon-button\n          id=\"play\"\n          icon=\"paper-audio-icons:play-arrow\"\n          class=\"fit\"\n          hidden$=\"[[ _hidePlayIcon(isPlaying, canBePlayed) ]]\"\n          role=\"button\"\n          aria-label=\"Play Audio\"\n          tabindex=\"-1\"\n        ></paper-icon-button>\n        <paper-icon-button\n          id=\"pause\"\n          icon=\"paper-audio-icons:pause\"\n          class=\"fit\"\n          hidden$=\"[[ !isPlaying ]]\"\n          role=\"button\"\n          aria-label=\"Pause Audio\"\n          tabindex=\"-1\"\n        ></paper-icon-button>\n        <iron-icon\n          id=\"error\"\n          icon=\"paper-audio-icons:error-outline\"\n          class=\"fit\"\n          hidden$=\"[[ !error ]]\"\n        ></iron-icon>\n      </div>\n      <div id=\"center\" class=\"flex\" on-down=\"_onDown\">\n        <!-- Title -->\n        <div id=\"title\" class=\"fit\" role=\"alert\">[[title]]</div>\n        <!-- Audio HTML5 element -->\n        <audio\n          id=\"audio\"\n          src$=\"[[src]]\"\n          preload$=\"[[ _setPreload(autoPlay, preload) ]]\"\n        ></audio>\n        <!-- Progress bar -->\n        <div id=\"progress\" class=\"fit\"></div>\n        <paper-ripple></paper-ripple>\n        <!-- Secondary white title -->\n        <div id=\"progress2\" class=\"fit\">\n          <div id=\"title2\" aria-hidden=\"true\">[[title]]</div>\n        </div>\n      </div>\n      <div id=\"right\" class=\"self-end\" on-click=\"restart\">\n        <!-- Duration -->\n        <div id=\"duration\" class=\"fit\" hidden\\$=\"[[ended]]\">\n          <span class=\"fit\" role=\"timer\" aria-label=\"Audio Track Length\"\n            >[[ _convertSecToMin(timeLeft) ]]</span\n          >\n        </div>\n        <!-- Icon -->\n        <paper-icon-button\n          id=\"replay\"\n          class=\"fit\"\n          icon=\"paper-audio-icons:replay\"\n          tabindex=\"-1\"\n          role=\"button\"\n          aria-label=\"Replay Audio\"\n        ></paper-icon-button>\n      </div>\n    </div>\n  "]);return n=function(){return p},p}Object.defineProperty(a,"__esModule",{value:!0}),a.PaperAudioPlayer=void 0;var o=(0,b.Polymer)({_template:(0,b.html)(n()),is:"paper-audio-player",behaviors:[c.IronA11yKeysBehavior,HAXBehaviors.PropertiesBehaviors,MaterializeCSSBehaviors.ColorBehaviors,SchemaBehaviors.Schema],hostAttributes:{tabindex:0,role:"application","aria-label":"Audio Player","aria-describedby":"title"},properties:{src:{type:String,observer:"_srcChanged"},title:{type:String,value:"Click to play this audio file"},color:{type:String,observer:"_changeColor"},autoPlay:{type:Boolean,value:!1},preload:{type:String,value:"auto"},currentTime:{type:Number,value:0,notify:!0},timeLeft:{type:Number,value:0},smallSkip:{type:Number,value:15},largeSkip:{type:Number,value:60},error:{type:Boolean},timeOffset:{type:Number,value:0}},keyBindings:{space:"playPause",enter:"playPause",left:"_skipReverseByInterval",right:"_skipReverseByInterval",down:"_skipReverseByInterval",up:"_skipReverseByInterval"},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Mini Audio player",description:"A very small audio player good for MP3s.",icon:"image:music-note",color:"green",groups:["Audio","Media"],handles:[{type:"audio",source:"src",title:"title",color:"color"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"src",title:"Source",description:"The URL for this audio file.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"title",title:"Title",description:"Title of this sound track.",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"},{property:"color",title:"Color",description:"Select the primary color used in the video",inputMethod:"colorpicker",icon:"editor:format-color-fill"}],configure:[{property:"src",title:"Source",description:"The URL for this audio file.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"title",title:"Title",description:"Title of this sound track.",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"},{property:"color",title:"Color",description:"Select the primary color used in the video",inputMethod:"colorpicker",icon:"editor:format-color-fill"}],advanced:[]}}),this.$.audio.addEventListener("loadedmetadata",this._onCanPlay.bind(this)),this.$.audio.addEventListener("playing",this._onPlaying.bind(this)),this.$.audio.addEventListener("pause",this._onPause.bind(this)),this.$.audio.addEventListener("ended",this._onEnd.bind(this)),this.$.audio.addEventListener("error",this._onError.bind(this))},detached:function(){this.$.audio.removeEventListener("loadedmetadata",this._onCanPlay.bind(this)),this.$.audio.removeEventListener("playing",this._onPlaying.bind(this)),this.$.audio.removeEventListener("pause",this._onPause.bind(this)),this.$.audio.removeEventListener("ended",this._onEnd.bind(this)),this.$.audio.removeEventListener("error",this._onError.bind(this))},ready:function(){var q=this;q.canBePlayed=!1,q.isPlaying=!1,q.ended=!1,q.error=!1,q.$.audio.currentTime=q.timeOffset},playPause:function(q){!q||q.preventDefault();var s=this;s.canBePlayed?s.isPlaying?s._pause():s._play():"none"===s.preload&&(s.$.audio.load(),s._play())},_play:function(){var q=this;q.$.audio.play()},_pause:function(){var q=this;q.$.audio.pause()},restart:function(q){!q||q.preventDefault();var s=this;s.$.audio.currentTime=0,s.isPlaying||s._play()},_onCanPlay:function(){var q=this;if(q.canBePlayed=!0,q.timeLeft=q.$.audio.duration,0<q.timeOffset){var s=q.timeOffset/q.$.audio.duration;q._updateVisualProgress(s)}q.autoPlay&&q._play()},_onPlaying:function(){var q=this;q.ended=!1,q.isPlaying=!0,q.$.replay.style="",q._startProgressTimer()},_skipReverseByInterval:function(q){!q||q.preventDefault();var s=this,t=0;switch(q.detail.key){case"up":s.largeSkip<s.timeLeft&&(t=s.currentTime+s.largeSkip);break;case"down":0<s.currentTime-s.largeSkip&&(t=s.currentTime-s.largeSkip);break;case"right":s.smallSkip<s.timeLeft&&(t=s.currentTime+s.smallSkip);break;default:0<s.currentTime-s.smallSkip&&(t=s.currentTime-s.smallSkip);}s._updatePlayPosition(t),s.isPlaying||s._play()},_startProgressTimer:function(){var q=this;q.timer={},q.timer.sliderUpdateInterval&&clearInterval(q.timer.sliderUpdateInterval),q.timer.sliderUpdateInterval=setInterval(function(){if(q.isPlaying){q.currentTime=q.$.audio.currentTime,q.timeLeft=q.$.audio.duration-q.currentTime;var s=q.currentTime/q.$.audio.duration;q._updateVisualProgress(s)}else clearInterval(q.timer.sliderUpdateInterval)},60)},_onPause:function(){var q=this;q.isPlaying=!1},_onEnd:function(){var q=this;q.ended=!0,q.isPlaying=!1,q.$.replay.style.opacity=1},_onError:function(){var q=this;q.classList.add("cantplay"),q.title="Sorry, can't play track: "+q.title,q.error=!0,q.setAttribute("aria-invalid","true")},_convertSecToMin:function(q){var s=Math.floor;if(0===q)return"";var t=s(q/60),u=s(q%60)+"";return t+":"+(2>u.length?"0"+u:u)},_onDown:function(q){q.preventDefault();var s=this;s.canBePlayed?(s._updateProgressBar(q),!s.isPlaying&&s._play()):"none"===s.preload&&(s.$.audio.load(),s.$.audio.addEventListener("loadedmetadata",function(){s._updateProgressBar(q),s.isPlaying||s._play()},!1))},_updateProgressBar:function(q){var s=this,t=q.detail.x-s.$.center.getBoundingClientRect().left,u=t/s.$.center.getBoundingClientRect().width*s.$.audio.duration;this._updatePlayPosition(u)},_updatePlayPosition:function(q){var s=this;s.currentTime=s.$.audio.currentTime=q;var t=s.currentTime/s.$.audio.duration;s._updateVisualProgress(t)},_updateVisualProgress:function(q){var s=this;s.$.progress.style.transform="scaleX("+q+")",s.$.progress2.style.width=100*q+"%",s.$.title2.style.width=100*(1/q)+"%"},_srcChanged:function(){var t=this;t.isPlaying&&(t._pause(),t._play())},_changeColor:function(q){var s=this;s.$.left.style.backgroundColor=q,s.$.title.style.color=q,s.$.duration.style.color=q,s.$.progress.style.backgroundColor=q,s.$.replay.style.color=q},_hidePlayIcon:function(q,s){return!!q||!(s||"none"===this.preload)},_setPreload:function(q,s){return q?"auto":s}});a.PaperAudioPlayer=o});