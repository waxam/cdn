var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      :host {\n        display: inline-block;\n      }\n\n      .enabled {\n        border: 1px dashed #555;\n        @apply --file-upload-upload-border-enabled;\n      }\n\n      .hover {\n        opacity: 0.7;\n        border: 1px dashed #111;\n        @apply --file-upload-upload-border-hover;\n      }\n\n      #UploadBorder {\n        vertical-align: middle;\n        color: #555;\n        padding: 20px;\n        max-height: 300px;\n        overflow-y: auto;\n        display: inline-block;\n        @apply --file-upload-upload-border;\n      }\n\n      #dropArea {\n        text-align: center;\n        @apply --file-upload-drop-area;\n      }\n\n      paper-button#button {\n        margin-bottom: 20px;\n        @apply --file-upload-button;\n      }\n\n      .file {\n        padding: 10px 0px;\n        @apply --file-upload-file;\n      }\n\n      .commands {\n        float: right;\n        @apply --file-upload-commands;\n      }\n\n      .commands iron-icon:not([icon=\"check-circle\"]) {\n        cursor: pointer;\n        opacity: 0.9;\n        @apply --file-upload-commands-faded;\n      }\n\n      .commands iron-icon:hover {\n        opacity: 1;\n        @apply --file-upload-commands-hovered;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      .error {\n        color: #f40303;\n        font-size: 11px;\n        margin-top: 2px;\n        @apply --file-upload-error;\n      }\n\n      .progress-bar {\n        margin-top: 2px;\n      }\n\n      paper-progress {\n        --paper-progress-active-color: #03a9f4;\n      }\n\n      paper-progress[error] {\n        --paper-progress-active-color: #f40303;\n      }\n    </style>\n\n    <div class=\"layout horizontal nowrap\">\n      <div>\n        <paper-button\n          id=\"button\"\n          on-click=\"_fileClick\"\n          alt=\"{{paperButtonAlt}}\"\n          raised=\"\"\n        >\n          <iron-icon icon=\"editor:attach-file\"></iron-icon\n          >{{paperButtonTitle}}</paper-button\n        >\n        <div id=\"UploadBorder\">\n          <div id=\"dropArea\" hidden$=\"{{!_shownDropText}}\">{{dropText}}</div>\n          <template is=\"dom-repeat\" items=\"{{files}}\">\n            <div class=\"file\">\n              <div class=\"name\">\n                <span>{{item.name}}</span>\n                <div class=\"commands\">\n                  <iron-icon\n                    icon=\"autorenew\"\n                    title=\"{{retryText}}\"\n                    on-click=\"_retryUpload\"\n                    hidden$=\"{{!item.error}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"cancel\"\n                    title=\"{{removeText}}\"\n                    on-click=\"_cancelUpload\"\n                    hidden$=\"{{item.complete}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"check-circle\"\n                    title=\"{{successText}}\"\n                    hidden$=\"{{!item.complete}}\"\n                  ></iron-icon>\n                </div>\n              </div>\n              <div class=\"error\" hidden$=\"{{!item.error}}\">{{errorText}}</div>\n            </div>\n          </template>\n        </div>\n      </div>\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        on-change=\"_fileChange\"\n        hidden=\"\"\n        multiple=\"{{multi}}\"\n        accept=\"{{accept}}\"\n      />\n    </div>\n  "],["\n    <style is=\"custom-style\" include=\"iron-flex iron-flex-alignment\">\n      paper-input {\n        padding: 2px;\n        --paper-input-container-label: {\n          white-space: normal;\n          position: static;\n          font-size: 22px;\n          color: #212121;\n        }\n      }\n\n      :host {\n        display: inline-block;\n      }\n\n      .enabled {\n        border: 1px dashed #555;\n        @apply --file-upload-upload-border-enabled;\n      }\n\n      .hover {\n        opacity: 0.7;\n        border: 1px dashed #111;\n        @apply --file-upload-upload-border-hover;\n      }\n\n      #UploadBorder {\n        vertical-align: middle;\n        color: #555;\n        padding: 20px;\n        max-height: 300px;\n        overflow-y: auto;\n        display: inline-block;\n        @apply --file-upload-upload-border;\n      }\n\n      #dropArea {\n        text-align: center;\n        @apply --file-upload-drop-area;\n      }\n\n      paper-button#button {\n        margin-bottom: 20px;\n        @apply --file-upload-button;\n      }\n\n      .file {\n        padding: 10px 0px;\n        @apply --file-upload-file;\n      }\n\n      .commands {\n        float: right;\n        @apply --file-upload-commands;\n      }\n\n      .commands iron-icon:not([icon=\"check-circle\"]) {\n        cursor: pointer;\n        opacity: 0.9;\n        @apply --file-upload-commands-faded;\n      }\n\n      .commands iron-icon:hover {\n        opacity: 1;\n        @apply --file-upload-commands-hovered;\n      }\n\n      [hidden] {\n        display: none;\n      }\n\n      .error {\n        color: #f40303;\n        font-size: 11px;\n        margin-top: 2px;\n        @apply --file-upload-error;\n      }\n\n      .progress-bar {\n        margin-top: 2px;\n      }\n\n      paper-progress {\n        --paper-progress-active-color: #03a9f4;\n      }\n\n      paper-progress[error] {\n        --paper-progress-active-color: #f40303;\n      }\n    </style>\n\n    <div class=\"layout horizontal nowrap\">\n      <div>\n        <paper-button\n          id=\"button\"\n          on-click=\"_fileClick\"\n          alt=\"{{paperButtonAlt}}\"\n          raised=\"\"\n        >\n          <iron-icon icon=\"editor:attach-file\"></iron-icon\n          >{{paperButtonTitle}}</paper-button\n        >\n        <div id=\"UploadBorder\">\n          <div id=\"dropArea\" hidden\\$=\"{{!_shownDropText}}\">{{dropText}}</div>\n          <template is=\"dom-repeat\" items=\"{{files}}\">\n            <div class=\"file\">\n              <div class=\"name\">\n                <span>{{item.name}}</span>\n                <div class=\"commands\">\n                  <iron-icon\n                    icon=\"autorenew\"\n                    title=\"{{retryText}}\"\n                    on-click=\"_retryUpload\"\n                    hidden\\$=\"{{!item.error}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"cancel\"\n                    title=\"{{removeText}}\"\n                    on-click=\"_cancelUpload\"\n                    hidden\\$=\"{{item.complete}}\"\n                  ></iron-icon>\n                  <iron-icon\n                    icon=\"check-circle\"\n                    title=\"{{successText}}\"\n                    hidden\\$=\"{{!item.complete}}\"\n                  ></iron-icon>\n                </div>\n              </div>\n              <div class=\"error\" hidden\\$=\"{{!item.error}}\">{{errorText}}</div>\n            </div>\n          </template>\n        </div>\n      </div>\n      <input\n        type=\"file\"\n        id=\"fileInput\"\n        on-change=\"_fileChange\"\n        hidden=\"\"\n        multiple=\"{{multi}}\"\n        accept=\"{{accept}}\"\n      />\n    </div>\n  "]);import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import*as async from"@polymer/polymer/lib/utils/async.js";import"@polymer/iron-flex-layout/iron-flex-layout-classes.js";import{AppLocalizeBehavior}from"@polymer/app-localize-behavior/app-localize-behavior.js";import"@polymer/paper-button/paper-button.js";import"@polymer/paper-input/paper-input.js";import"@polymer/iron-icon/iron-icon.js";import"@polymer/iron-icons/iron-icons.js";Polymer({is:"eco-json-schema-file",_template:html(_templateObject),behaviors:[AppLocalizeBehavior],properties:{language:{value:"en",notify:!0},resources:{value:function(){return{}},notify:!0},schema:{type:Object,observer:"_schemaChanged"},value:{type:Object,notify:!0,value:function(){return{}},observer:"_valueChanged"},target:{type:String,value:""},accept:{type:String,value:""},droppable:{type:Boolean,value:!1},dropText:{type:String,value:"Drop Files Here"},multi:{type:Boolean,value:!0},files:{type:Array,notify:!0,value:function(){return[]}},raised:{type:Boolean,value:!0},noink:{type:Boolean,value:!1},headers:{type:Object,value:{}},retryText:{type:String,value:"Retry Upload"},removeText:{type:String,value:"Remove"},successText:{type:String,value:"Success"},errorText:{type:String,value:"Error uploading file..."},_shownDropText:{type:Boolean,value:!1},additional:{type:Object,value:{}},fileDataName:{type:String,value:"file"},paperButtonAlt:{type:String,value:""},paperButtonTitle:{type:String,value:""}},clear:function(){this.set("files",[]),this.$.fileInput.value="",this._showDropText()},ready:function(){this.raised&&this.toggleAttribute("raised",!0,this.$.button),this.noink&&this.toggleAttribute("noink",!0,this.$.button),this.droppable&&(this._showDropText(),this.setupDrop())},setupDrop:function(){var b=this.$.UploadBorder;this.toggleClass("enabled",!0,b),this.ondragover=function(c){c.stopPropagation(),this.toggleClass("hover",!0,b);var d=c.dataTransfer&&c.dataTransfer.dropEffect,f=c.dataTransfer&&c.dataTransfer.effectAllowed;return"none"===d&&"none"!==f&&(c.dataTransfer.dropEffect="move"===f?"move":"copy"),!1},this.ondragleave=function(){return this.toggleClass("hover",!1,b),!1},this.ondrop=function(c){if(this.toggleClass("hover",!1,b),c.preventDefault(),this.multi||0===this.files.length)for(var d=c.dataTransfer.files.length,f=0;f<d;f++){var g=c.dataTransfer.files[f],h=""===g.type?null:g.type.match(/^[^\/]*\//)[0],j=g.name.match(/\.[^\.]*$/)[0];(""===this.accept||-1<this.accept.indexOf(h)||-1<this.accept.indexOf(j))&&(g.progress=0,g.error=!1,g.complete=!1,this.push("files",g),this.uploadFile(g))}}},_fileClick:function(){var b=this.$.fileInput;if(b&&document.createEvent){var c=document.createEvent("MouseEvents");c.initEvent("click",!0,!1),b.dispatchEvent(c)}},_fileChange:function(b){for(var f,c=b.target.files.length,d=0;d<c;d++)f=b.target.files[d],f.progress=0,f.error=!1,f.complete=!1,this.push("files",f),this.multi||0===this.files.length||(this.set("files",[]),this.set("value",{})),this.uploadFile(f)},cancel:function(b){b&&(b.xhr&&b.xhr.abort(),this.splice("files",this.files.indexOf(b),1),this._showDropText())},_cancelUpload:function(b){this.cancel(b.model.__data__.item)},_retryUpload:function(b){b.model.set("item.error",!1),b.model.set("item.progress",0);var c=this;async.microTask.run(function(){c.uploadFile(b.model.__data__.item)})},_showDropText:function(){this.set("_shownDropText",!this.files.length&&this.droppable)},uploadFile:function(b){if(b){this.fire("before-upload"),this._showDropText();var c="files."+this.files.indexOf(b),d=this,f=new FileReader;f.addEventListener("load",function(){var g=f.result;d.set("value."+d.attributes.name.value+"."+d.files.indexOf(b),g)},!1),d.value.hasOwnProperty(d.attributes.name.value)||this.set("value."+d.attributes.name.value,{}),f.readAsDataURL(b)}},_valueChanged:function(){console.log("this.value: "+JSON.stringify(this.value))},_schemaChanged:function(){this.schema},_isSchemaValue:function(b){return this._isSchemaFile(b)},_isSchemaFile:function(b){return Array.isArray(b)?-1!==b.indexOf("file"):"file"===b},_isSchemaBoolean:function(b){return Array.isArray(b)?-1!==b.indexOf("boolean"):"boolean"===b},_isSchemaNumber:function(b){return Array.isArray(b)?-1!==b.indexOf("number")||-1!==b.indexOf("integer"):"number"===b||"integer"===b},_isSchemaString:function(b){return Array.isArray(b)?-1!==b.indexOf("string"):"string"===b},_isSchemaObject:function(b){return"object"===b},_isSchemaArray:function(b){return"array"===b},stringify:function(b){return JSON.stringify(b)}});