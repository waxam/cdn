define(["exports","require","./simple-login-avatar.js","./simple-login-camera.js","../../../@polymer/paper-icon-button/paper-icon-button.js"],function(_exports,_require,_simpleLoginAvatar,_simpleLoginCamera,_paperIconButton){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SimpleCameraSnap=void 0;_require=babelHelpers.interopRequireWildcard(_require);var SimpleCameraSnap=/*#__PURE__*/function(_HTMLElement){babelHelpers.inherits(SimpleCameraSnap,_HTMLElement);function SimpleCameraSnap(){var _this,delayRender=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;babelHelpers.classCallCheck(this,SimpleCameraSnap);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SimpleCameraSnap).call(this));new Promise(function(res,rej){return _require.default(["../../../@polymer/iron-icons/iron-icons.js"],res,rej)});new Promise(function(res,rej){return _require.default(["../../../@polymer/iron-icons/image-icons.js"],res,rej)});_this.tag=SimpleCameraSnap.tag;_this.template=document.createElement("template");_this.attachShadow({mode:"open"});if(!delayRender){_this.render()}return _this}babelHelpers.createClass(SimpleCameraSnap,[{key:"render",value:function render(){this.shadowRoot.innerHTML=null;this.template.innerHTML=this.html;if(window.ShadyCSS){window.ShadyCSS.prepareTemplate(this.template,this.tag)}this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}},{key:"connectedCallback",value:function connectedCallback(){// ensure support for the camera snap functionality...
// this would be an environment like http that doesn't support camera functionality
if(!navigator.mediaDevices){this.shadowRoot.querySelector("#snap").style.display="none";this.shadowRoot.querySelector("#newsnap").style.display="none"}this.shadowRoot.querySelector("#snap").addEventListener("click",this.snapPhoto.bind(this));this.shadowRoot.querySelector("#newsnap").addEventListener("click",this.clearPhoto.bind(this))}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.shadowRoot.querySelector("#snap").removeEventListener("click",this.snapPhoto.bind(this));this.shadowRoot.querySelector("#newsnap").removeEventListener("click",this.clearPhoto.bind(this))}},{key:"snapPhoto",value:function(){var _snapPhoto=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(e){var camera,raw,img,selfie;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:camera=this.shadowRoot.querySelector("#camera");_context.next=3;return camera.takeASnap();case 3:raw=_context.sent;_context.next=6;return camera.takeASnap().then(camera.renderImage);case 6:img=_context.sent;camera.removeAttribute("autoplay");selfie=this.shadowRoot.querySelector("#selfie");selfie.innerHTML="";selfie.appendChild(img);// throw up event for other things to find the image
this.dispatchEvent(new CustomEvent("simple-camera-snap-image",{bubbles:!0,composed:!0,cancelable:!0,detail:{img:img,raw:raw}}));selfie.classList.add("has-snap");case 13:case"end":return _context.stop();}}},_callee,this)}));function snapPhoto(_x){return _snapPhoto.apply(this,arguments)}return snapPhoto}()},{key:"clearPhoto",value:function clearPhoto(e){var camera=this.shadowRoot.querySelector("#camera");camera.setAttribute("autoplay","autoplay");var selfie=this.shadowRoot.querySelector("#selfie");selfie.innerHTML="";selfie.classList.remove("has-snap")}},{key:"html",get:function get(){return"\n    <style>\n      simple-login-avatar {\n        margin: 0;\n        width: 205px;\n        display: block;\n      }\n      #selfie {\n        position: absolute;\n        margin: 0;\n      }\n      .has-snap {\n        z-index: 3;\n      }\n      #selfie img {\n        z-index: 2;\n        position: absolute;\n        margin: 0 0 0 -122.5px;\n        width: 355px;\n        height: 200px;\n      }\n      .buttons {\n        display: flex;\n        width: 200px;\n        justify-content: space-evenly;\n      }\n    </style>\n    <simple-login-avatar>\n      <div id=\"selfie\"></div>\n      <simple-login-camera id=\"camera\" autoplay></simple-login-camera>\n    </simple-login-avatar>\n    <div class=\"buttons\">\n      <paper-icon-button id=\"snap\" icon=\"image:image\"></paper-icon-button>\n      <paper-icon-button id=\"newsnap\" icon=\"icons:clear\"></paper-icon-button>\n    </div>\n    "}}],[{key:"tag",get:function get(){return"simple-camera-snap"}}]);return SimpleCameraSnap}(babelHelpers.wrapNativeSuper(HTMLElement));_exports.SimpleCameraSnap=SimpleCameraSnap;window.customElements.define(SimpleCameraSnap.tag,SimpleCameraSnap)});