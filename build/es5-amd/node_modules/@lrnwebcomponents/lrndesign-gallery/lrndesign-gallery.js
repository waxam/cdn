define(["exports", "../../lit-element/lit-element.js", "./lib/lrndesign-gallery-behaviors.js", "../responsive-utility/responsive-utility.js", "./lib/lrndesign-gallery-carousel.js", "./lib/lrndesign-gallery-grid.js"], function (_exports, _litElement, _lrndesignGalleryBehaviors, _responsiveUtility, _lrndesignGalleryCarousel, _lrndesignGalleryGrid) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LrndesignGallery = void 0;

  function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

  function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { babelHelpers.defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

  function _templateObject4_0040679080dd11eabb03896a87cefcc6() {
    var data = babelHelpers.taggedTemplateLiteral([""]);

    _templateObject4_0040679080dd11eabb03896a87cefcc6 = function _templateObject4_0040679080dd11eabb03896a87cefcc6() {
      return data;
    };

    return data;
  }

  function _templateObject3_0040679080dd11eabb03896a87cefcc6() {
    var data = babelHelpers.taggedTemplateLiteral(["\n              <lrndesign-gallery-carousel\n                accent-color=\"", "\"\n                .aspect-ratio=\"", "\"\n                .extra-wide=\"", "\"\n                ?dark=\"", "\"\n                .gallery-id=\"", "\"\n                @item-changed=\"", "\"\n                responsive-size=\"", "\"\n                .selected=\"", "\"\n                sizing=\"", "\"\n                .sources=\"", "\"\n                gallery-title=\"", "\"\n              >\n                <slot></slot>\n              </lrndesign-gallery-carousel>\n            "]);

    _templateObject3_0040679080dd11eabb03896a87cefcc6 = function _templateObject3_0040679080dd11eabb03896a87cefcc6() {
      return data;
    };

    return data;
  }

  function _templateObject2_0040679080dd11eabb03896a87cefcc6() {
    var data = babelHelpers.taggedTemplateLiteral(["\n              <lrndesign-gallery-grid\n                accent-color=\"", "\"\n                .aspect-ratio=\"", "\"\n                .extra-wide=\"", "\"\n                ?dark=\"", "\"\n                .gallery-id=\"", "\"\n                @item-changed=\"", "\"\n                responsive-size=\"", "\"\n                .selected=\"", "\"\n                sizing=\"", "\"\n                .sources=\"", "\"\n                gallery-title=\"", "\"\n              >\n                <slot></slot>\n              </lrndesign-gallery-grid>\n            "]);

    _templateObject2_0040679080dd11eabb03896a87cefcc6 = function _templateObject2_0040679080dd11eabb03896a87cefcc6() {
      return data;
    };

    return data;
  }

  function _templateObject_0040679080dd11eabb03896a87cefcc6() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <div id=\"gallery\">\n        ", "\n      </div>\n    "]);

    _templateObject_0040679080dd11eabb03896a87cefcc6 = function _templateObject_0040679080dd11eabb03896a87cefcc6() {
      return data;
    };

    return data;
  }

  /**
   * `lrndesign-gallery`
   * displays images as a carousel or grid with the ability to zoom
   *
   * @element lrndesign-gallery
   * @lit-html
   * @lit-element
   * @demo demo/index.html
   */
  var LrndesignGallery =
  /*#__PURE__*/
  function (_LrndesignGalleryBeha) {
    babelHelpers.inherits(LrndesignGallery, _LrndesignGalleryBeha);
    babelHelpers.createClass(LrndesignGallery, [{
      key: "render",
      // render function
      value: function render() {
        var _this = this;

        return (0, _litElement.html)(_templateObject_0040679080dd11eabb03896a87cefcc6(), this.grid ? (0, _litElement.html)(_templateObject2_0040679080dd11eabb03896a87cefcc6(), this.accentColor, this.aspect, this.extra, this.dark, this.id, function (e) {
          return _this.goToItem(e.detail);
        }, this.responsiveSize, this.selected, this.sizing, this.items, this.galleryTitle) : (0, _litElement.html)(_templateObject3_0040679080dd11eabb03896a87cefcc6(), this.accentColor, this.aspect, this.extra, this.dark, this.id, function (e) {
          return _this.goToItem(e.detail);
        }, this.responsiveSize, this.selected, this.sizing, this.items, this.galleryTitle));
      } // properties available to the custom element for data binding

    }, {
      key: "tag",

      /**
       * Store the tag name to make it easier to obtain directly.
       * @notice function name must be here for tooling to operate correctly
       */
      value: function tag() {
        return "lrndesign-gallery";
      } // life cycle

    }], [{
      key: "styles",
      //styles function
      get: function get() {
        return [(0, _litElement.css)(_templateObject4_0040679080dd11eabb03896a87cefcc6())];
      }
    }, {
      key: "properties",
      get: function get() {
        return _objectSpread({}, babelHelpers.get(babelHelpers.getPrototypeOf(LrndesignGallery), "properties", this), {
          id: {
            type: String,
            reflect: true,
            attribute: "id"
          }
        });
      }
    }]);

    function LrndesignGallery() {
      babelHelpers.classCallCheck(this, LrndesignGallery);
      return babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(LrndesignGallery).call(this));
    }
    /**
     * life cycle, element is afixed to the DOM
     */


    babelHelpers.createClass(LrndesignGallery, [{
      key: "connectedCallback",
      value: function connectedCallback() {
        babelHelpers.get(babelHelpers.getPrototypeOf(LrndesignGallery.prototype), "connectedCallback", this).call(this);
        window.ResponsiveUtility.requestAvailability();
        window.dispatchEvent(new CustomEvent("responsive-element", {
          detail: {
            element: this,
            attribute: "responsive-size",
            relativeToParent: true
          }
        }));
      }
    }, {
      key: "firstUpdated",
      value: function firstUpdated() {
        babelHelpers.get(babelHelpers.getPrototypeOf(LrndesignGallery.prototype), "firstUpdated", this).call(this);
        this.anchorData = this._getAnchorData();

        if (this.anchorData.gallery === this.id) {
          this.goToItem(this.anchorData.id);
        } else {
          this.goToItem();
        }
      }
      /**
       * handle updates
       */

    }, {
      key: "updated",
      value: function updated(changedProperties) {
        var _this2 = this;

        babelHelpers.get(babelHelpers.getPrototypeOf(LrndesignGallery.prototype), "updated", this).call(this, changedProperties);
        changedProperties.forEach(function (oldValue, propName) {
          if (propName === "id" && !_this2.id) _this2.id = "gallery-".concat(_this2._generateUUID());
        });
      }
      /**
       * gets aspect ratio of images
       *
       * @readonly
       * @memberof LrndesignGallery
       */

    }, {
      key: "goToItem",

      /**
       * go to item by id, or index
       *
       * @param {string} query
       */
      value: function goToItem(query) {
        var start = this.items[0] || {};

        if (typeof query === "number" && query >= 0 && query < this.items.length) {
          this.selected = this.items[query] || start;
        } else {
          var matches = this.items.filter(function (item) {
            return item.id === query;
          });
          this.selected = matches.length > 0 ? matches[0] : start;
        }
      }
      /**
       * gets aspect ratio of an image and
       * determine if aspect ratio is extra wide
       *
       * @param {array}
       */

    }, {
      key: "_getAnchorData",
      value: function _getAnchorData() {
        var hash = window.location.hash !== null && window.location.hash !== "" ? window.location.hash.replace("#", "") : false,
            data = hash ? hash.split("---") : [];
        return {
          id: data.length > 1 ? data[1] : -1,
          gallery: data.length > 0 ? data[0] : -1,
          zoom: scroll && data.length > 2 && data[2] === "zoom"
        };
      }
    }, {
      key: "aspect",
      get: function get() {
        var items = (this.items || []).filter(function (item) {
          return item.src && item.src != "";
        }),
            src = items && items[0] ? items[0].src : false;

        if (src) {
          var img = new Image();
          img.src = src;
          return img.naturalWidth > 0 && img.naturalHeight > 0 ? img.naturalWidth / img.naturalHeight : 1.33333333;
        } else {
          return 1.33333333;
        }
      }
      /**
       * gets aspect ratio of an image and
       * determine if aspect ratio is extra wide
       *
       * @readonly
       * @memberof LrndesignGallery
       */

    }, {
      key: "extra",
      get: function get() {
        var ew = this.aspect > 2;
        return ew;
      }
      /**
       * gets items array
       *
       * @readonly
       * @memberof LrndesignGalleryBehaviors
       */

    }, {
      key: "items",
      get: function get() {
        var _this3 = this;

        var sources = this.sources || [],
            items = typeof sources === "string" ? JSON.parse(sources) : sources,
            total = items.length,
            itemData = (items || []).map(function (item, i) {
          return {
            details: item.details,
            index: i,
            id: item.id || "gallery-".concat(_this3.id, "-item-").concat(i),
            src: item.src,
            large: item.large && item.large !== "" ? item.large : item.src,
            thumbnail: item.thumbnail && item.thumbnail != "" ? item.thumbnail : item.src,
            xofy: "".concat(i + 1, " of ").concat(total),
            next: i + 1 < total ? i + 1 : -1,
            prev: i - 1 > -1 ? i - 1 : -1,
            sizing: item.sizing && item.sizing != "" ? item.sizing : _this3.sizing,
            title: item.title,
            tooltip: "".concat(item.title || "Image ".concat(i), " (Zoom In)"),
            heading: "".concat(item.title || "Image ".concat(i), " (Full-Sized)")
          };
        });
        return itemData;
      }
    }]);
    return LrndesignGallery;
  }(_lrndesignGalleryBehaviors.LrndesignGalleryBehaviors);

  _exports.LrndesignGallery = LrndesignGallery;
  customElements.define("lrndesign-gallery", LrndesignGallery);
});