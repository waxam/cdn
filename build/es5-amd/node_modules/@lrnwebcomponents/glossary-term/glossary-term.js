define(["exports","require","../../lit-element/lit-element.js"],function(_exports,_require,_litElement){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.GlossaryTerm=void 0;_require=babelHelpers.interopRequireWildcard(_require);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};if(i%2){ownKeys(Object(source),!0).forEach(function(key){babelHelpers.defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _templateObject3_0e6092207a0011eab074ed896f61b288(){var data=babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: inline-block;\n        }\n\n        :host([hidden]) {\n          display: none;\n        }\n\n        lrn-vocab {\n          display: inline;\n        }\n      "]);_templateObject3_0e6092207a0011eab074ed896f61b288=function _templateObject3_0e6092207a0011eab074ed896f61b288(){return data};return data}function _templateObject2_0e6092207a0011eab074ed896f61b288(){var data=babelHelpers.taggedTemplateLiteral(["\n            <slot></slot>\n          "]);_templateObject2_0e6092207a0011eab074ed896f61b288=function _templateObject2_0e6092207a0011eab074ed896f61b288(){return data};return data}function _templateObject_0e6092207a0011eab074ed896f61b288(){var data=babelHelpers.taggedTemplateLiteral(["\n      ","\n    "]);_templateObject_0e6092207a0011eab074ed896f61b288=function _templateObject_0e6092207a0011eab074ed896f61b288(){return data};return data}/**
 * `glossary-term`
 * `Glossary term that shows a popup for the answer`
 * @demo demo/index.html
 * @element glossary-term
 */var GlossaryTerm=/*#__PURE__*/function(_LitElement){babelHelpers.inherits(GlossaryTerm,_LitElement);babelHelpers.createClass(GlossaryTerm,[{key:"render",// render function
value:function render(){return(0,_litElement.html)(_templateObject_0e6092207a0011eab074ed896f61b288(),this._fallback?(0,_litElement.html)(_templateObject2_0e6092207a0011eab074ed896f61b288()):"\n<lrn-vocab term=\"".concat(this.display,"\">\n  <div>").concat(this.definition,"</div>\n</lrn-vocab>\n"))}// haxProperty definition
}],[{key:"styles",//styles function
get:function get(){return[(0,_litElement.css)(_templateObject3_0e6092207a0011eab074ed896f61b288())]}},{key:"haxProperties",get:function get(){return{canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Glossary term",description:"",icon:"icons:android",color:"green",groups:["Term"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"heyMP",owner:"PSU"}},settings:{quick:[],configure:[{property:"name",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"},{property:"definition",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"},{property:"display",description:"",inputMethod:"textfield",required:!1,icon:"icons:android"}],advanced:[]}}}// properties available to the custom element for data binding
},{key:"properties",get:function get(){return _objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(GlossaryTerm),"properties",this),{name:{name:"name",type:String,value:"",reflectToAttribute:!1},definition:{name:"display",type:String,value:"",reflectToAttribute:!1},display:{name:"display",type:String,value:"",reflectToAttribute:!1},serviceType:{name:"serviceType",type:String,value:"file"},endpoint:{name:"endpoint",type:String,value:""},_fallback:{name:"_fallback",type:Boolean,value:!0,reflectToAttribute:!1,observer:!1}})}}]);function GlossaryTerm(){var _this;babelHelpers.classCallCheck(this,GlossaryTerm);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(GlossaryTerm).call(this));_this.name="";_this.definition="";_this.display="";_this.serviceType="file";_this.endpoint="";_this._fallback=!0;new Promise(function(res,rej){return _require.default(["../lrn-vocab/lrn-vocab.js"],res,rej)});return _this}babelHelpers.createClass(GlossaryTerm,[{key:"updated",value:function updated(changedProperties){var _this2=this;changedProperties.forEach(function(oldValue,propName){if(["endpoint","serviceType"].includes(propName)){_this2.__endpointMethodChanged(_this2.endpoint,_this2.serviceType)}})}/**
   * convention
   */},{key:"__endpointMethodChanged",/**
   * Ensure end point is correct based on method requested
   */value:function __endpointMethodChanged(endpoint,serviceType){var _this3=this;// fetch definition
if(endpoint){if("file"===serviceType){fetch(endpoint,{method:"GET",headers:{"Content-Type":"application/json"}}).then(function(r){return r.json()}).then(function(r){var foundterm=r.terms.find(function(i){return i.name===_this3.name});if(foundterm){_this3.definition=foundterm.definition;_this3._fallback=!1}else{_this3._fallback=!0}})}else if("graphql"===serviceType){fetch(this.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:"{ term(name: \"".concat(this.name,"\") { name definition } }")})}).then(function(r){return r.json()}).then(function(r){try{_this3.definition=r.data.term.definition;_this3._fallback=!1}catch(error){}})}}}}],[{key:"tag",get:function get(){return"glossary-term"}}]);return GlossaryTerm}(_litElement.LitElement);_exports.GlossaryTerm=GlossaryTerm;window.customElements.define(GlossaryTerm.tag,GlossaryTerm)});