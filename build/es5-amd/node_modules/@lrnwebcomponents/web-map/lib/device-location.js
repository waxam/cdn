define(["../../../@polymer/polymer/polymer-legacy.js"],function(_polymerLegacy){"use strict";(0,_polymerLegacy.Polymer)({is:"device-location",properties:{lat:{type:Number,value:0,reflectToAttribute:!1},lon:{type:Number,value:0,reflectToAttribute:!1},centered:{type:Boolean,reflectToAttribute:!0}},observers:["_toggleCentered(centered)"],_toggleCentered:function _toggleCentered(centered){if(centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function moveTo(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}else{this._deleteWatch()}},detached:function detached(){this._deleteWatch()},attached:function attached(){this._deleteWatch();this._createWatch();if(this.parentNode.controls){this._map=this.parentNode._map}},ready:function ready(){if(this.centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function moveTo(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},_deleteWatch:function _deleteWatch(){if(this._watchID){navigator.geolocation.clearWatch(this._watchID);delete this._watchID}},_createWatch:function _createWatch(){if(this.centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function moveTo(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}}})});