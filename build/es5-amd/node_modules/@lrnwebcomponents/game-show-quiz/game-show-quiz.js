define(["exports","../../@polymer/polymer/polymer-legacy.js","../../@polymer/polymer/lib/legacy/polymer.dom.js","../../@polymer/app-layout/app-drawer/app-drawer.js","../../@polymer/app-layout/app-header/app-header.js","../../@polymer/app-layout/app-toolbar/app-toolbar.js","../../@polymer/iron-flex-layout/iron-flex-layout.js","../../@polymer/iron-icons/iron-icons.js","../../@polymer/iron-icon/iron-icon.js","../../@polymer/paper-button/paper-button.js","../simple-toast/simple-toast.js","../../@polymer/iron-ajax/iron-ajax.js","../../@polymer/iron-image/iron-image.js","../hax-body-behaviors/lib/HAXWiring.js","../multiple-choice/multiple-choice.js","../responsive-grid/lib/responsive-grid-row.js","../responsive-grid/lib/responsive-grid-col.js","./lib/game-show-quiz-modal.js"],function(_exports,_polymerLegacy,_polymerDom){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.GameShowQuiz=void 0;function _templateObject_1f21b3b0490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        --game-show-bg-color: #4285f4;\n        --game-show-text-color: #ffffff;\n      }\n      app-toolbar {\n        background-color: var(--game-show-bg-color, blue);\n        color: var(--game-show-text-color, white);\n        font-size: 24px;\n        display: flex;\n      }\n      iron-icon {\n        display: inline-block;\n      }\n\n      paper-button {\n        --paper-button-ink-color: var(--game-show-bg-color, blue);\n        text-transform: none;\n        display: block;\n      }\n      #helpbutton {\n        text-align: center;\n        padding: 8px;\n        font-size: 12px;\n        vertical-align: middle;\n        display: inline-flex;\n      }\n      paper-button + [main-title] {\n        margin-left: 24px;\n        display: inline-flex;\n      }\n      app-header {\n        color: var(--game-show-text-color, white);\n        --app-header-background-rear-layer: {\n          background-color: #ef6c00;\n        }\n      }\n      responsive-grid-row {\n        --responsive-grid-row-inner: {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n      responsive-grid-col {\n        --responsive-grid-col-inner: {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n      #contentcontainer {\n        margin: 0 auto;\n        font-size: 16px;\n      }\n      .grid-button {\n        width: 100%;\n        height: 80px;\n        text-align: center;\n        min-width: unset;\n        padding: 0;\n        margin: 0;\n      }\n      .status-icon {\n        width: 64px;\n        height: 64px;\n        opacity: 0.25;\n        position: absolute;\n      }\n      .correct {\n        color: green;\n      }\n      .incorrect {\n        color: red;\n      }\n      .row-0 paper-button[disabled] {\n        font-weight: bold;\n        font-size: 16px;\n      }\n      @media screen and (max-width: 600px) {\n        app-toolbar {\n          font-size: 14px;\n        }\n        paper-button {\n          padding: 0;\n          margin: 0;\n          width: 16px;\n          height: 16px;\n          min-width: unset;\n        }\n        .grid-button {\n          font-size: 9px;\n        }\n        .status-icon {\n          width: 24px;\n          height: 24px;\n          opacity: 1;\n          display: inline-block;\n        }\n        .row-0 paper-button[disabled] {\n          font-weight: bold;\n          font-size: 10px;\n        }\n      }\n    </style>\n    <app-header>\n      <app-toolbar>\n        <paper-button id=\"helpbutton\" on-tap=\"directionsToggle\"\n          ><iron-icon icon=\"help\"></iron-icon> Directions</paper-button\n        >\n        <div main-title=\"\">[[title]]</div>\n      </app-toolbar>\n    </app-header>\n    <div id=\"contentcontainer\">\n      <template is=\"dom-repeat\" items=\"[[gameBoard]]\" as=\"row\">\n        <responsive-grid-row gutter=\"0\" class$=\"row row-[[index]]\">\n          <template is=\"dom-repeat\" items=\"[[row.cols]]\" as=\"col\">\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\">\n              <paper-button\n                class=\"grid-button\"\n                raised=\"[[!col.notRaised]]\"\n                data-question-data$=\"[[col.question]]\"\n                data-value$=\"[[col.points]]\"\n                data-type$=\"[[col.type]]\"\n                disabled$=\"[[col.disabled]]\"\n                >[[col.title]]<br />[[col.points]]</paper-button\n              >\n            </responsive-grid-col>\n          </template>\n        </responsive-grid-row>\n      </template>\n      <div>\n        <h3>Scoreboard</h3>\n        <table>\n          <tbody>\n            <tr>\n              <th></th>\n              <th>Slide ID</th>\n              <th>Terms</th>\n              <th>Reading</th>\n              <th>Lecture</th>\n              <th>Bonus</th>\n              <th>Total</th>\n            </tr>\n            <tr>\n              <th>Points Attempted</th>\n              <td>[[points.slide.attempted]]</td>\n              <td>[[points.terms.attempted]]</td>\n              <td>[[points.reading.attempted]]</td>\n              <td>[[points.lecture.attempted]]</td>\n              <td>[[points.bonus.attempted]]</td>\n              <td>[[points.total.attempted]]</td>\n            </tr>\n            <tr>\n              <th>Points Earned</th>\n              <td>[[points.slide.earned]]</td>\n              <td>[[points.terms.earned]]</td>\n              <td>[[points.reading.earned]]</td>\n              <td>[[points.lecture.earned]]</td>\n              <td>[[points.bonus.earned]]</td>\n              <td>[[points.total.earned]]</td>\n            </tr>\n            <tr>\n              <th>Category Percentage</th>\n              <td>[[points.slide.percent]]</td>\n              <td>[[points.terms.percent]]</td>\n              <td>[[points.reading.percent]]</td>\n              <td>[[points.lecture.percent]]</td>\n              <td>[[points.bonus.percent]]</td>\n              <td>[[points.total.percent]]</td>\n            </tr>\n          </tbody>\n        </table>\n        <div>Points Remaining to Attempt: [[remainingAttempts]]</div>\n      </div>\n    </div>\n    <game-show-quiz-modal id=\"directions\" title=\"[[directionsTitle]]\">\n      <div slot=\"content\"><slot name=\"directions\"></slot></div>\n      <paper-button slot=\"buttons\" id=\"dismiss\" dialog-confirm=\"\" raised=\"\"\n        >Good luck!</paper-button\n      >\n    </game-show-quiz-modal>\n    <game-show-quiz-modal id=\"dialog\" title=\"[[activeQuestion.title]]\">\n      <iron-image\n        slot=\"content\"\n        style=\"min-width:100px; width:100%; min-height:25vh; height:40vh; background-color: lightgray;\"\n        sizing=\"contain\"\n        preload=\"\"\n        src$=\"[[activeQuestion.image]]\"\n      ></iron-image>\n      <multiple-choice\n        disabled$=\"[[activeQuestion.submitted]]\"\n        slot=\"content\"\n        id=\"question\"\n        hide-buttons=\"\"\n        title=\"[[activeQuestion.title]]\"\n        answers=\"[[activeQuestion.data]]\"\n      ></multiple-choice>\n      <paper-button\n        slot=\"buttons\"\n        hidden$=\"[[activeQuestion.submitted]]\"\n        id=\"submit\"\n        raised=\"\"\n        disabled$=\"[[__submitDisabled]]\"\n        >Submit answer\n        <iron-icon\n          hidden$=\"[[__submitDisabled]]\"\n          icon=\"icons:touch-app\"\n        ></iron-icon\n      ></paper-button>\n      <paper-button\n        slot=\"buttons\"\n        id=\"continue\"\n        hidden$=\"[[!activeQuestion.submitted]]\"\n        dialog-confirm=\"\"\n        raised=\"\"\n        >Continue <iron-icon icon=\"icons:arrow-forward\"></iron-icon\n      ></paper-button>\n    </game-show-quiz-modal>\n    <iron-ajax\n      auto=\"\"\n      id=\"gamedata\"\n      url=\"[[gameData]]\"\n      handle-as=\"json\"\n      last-response=\"{{gameBoard}}\"\n    ></iron-ajax>\n    <iron-ajax\n      id=\"questiondata\"\n      url=\"[[__questionEndpoint]]\"\n      handle-as=\"json\"\n      last-response=\"{{activeQuestion}}\"\n    ></iron-ajax>\n  "],["\n    <style>\n      :host {\n        display: block;\n        --game-show-bg-color: #4285f4;\n        --game-show-text-color: #ffffff;\n      }\n      app-toolbar {\n        background-color: var(--game-show-bg-color, blue);\n        color: var(--game-show-text-color, white);\n        font-size: 24px;\n        display: flex;\n      }\n      iron-icon {\n        display: inline-block;\n      }\n\n      paper-button {\n        --paper-button-ink-color: var(--game-show-bg-color, blue);\n        text-transform: none;\n        display: block;\n      }\n      #helpbutton {\n        text-align: center;\n        padding: 8px;\n        font-size: 12px;\n        vertical-align: middle;\n        display: inline-flex;\n      }\n      paper-button + [main-title] {\n        margin-left: 24px;\n        display: inline-flex;\n      }\n      app-header {\n        color: var(--game-show-text-color, white);\n        --app-header-background-rear-layer: {\n          background-color: #ef6c00;\n        }\n      }\n      responsive-grid-row {\n        --responsive-grid-row-inner: {\n          margin-left: 0;\n          margin-right: 0;\n        }\n      }\n      responsive-grid-col {\n        --responsive-grid-col-inner: {\n          padding-left: 0;\n          padding-right: 0;\n        }\n      }\n      #contentcontainer {\n        margin: 0 auto;\n        font-size: 16px;\n      }\n      .grid-button {\n        width: 100%;\n        height: 80px;\n        text-align: center;\n        min-width: unset;\n        padding: 0;\n        margin: 0;\n      }\n      .status-icon {\n        width: 64px;\n        height: 64px;\n        opacity: 0.25;\n        position: absolute;\n      }\n      .correct {\n        color: green;\n      }\n      .incorrect {\n        color: red;\n      }\n      .row-0 paper-button[disabled] {\n        font-weight: bold;\n        font-size: 16px;\n      }\n      @media screen and (max-width: 600px) {\n        app-toolbar {\n          font-size: 14px;\n        }\n        paper-button {\n          padding: 0;\n          margin: 0;\n          width: 16px;\n          height: 16px;\n          min-width: unset;\n        }\n        .grid-button {\n          font-size: 9px;\n        }\n        .status-icon {\n          width: 24px;\n          height: 24px;\n          opacity: 1;\n          display: inline-block;\n        }\n        .row-0 paper-button[disabled] {\n          font-weight: bold;\n          font-size: 10px;\n        }\n      }\n    </style>\n    <app-header>\n      <app-toolbar>\n        <paper-button id=\"helpbutton\" on-tap=\"directionsToggle\"\n          ><iron-icon icon=\"help\"></iron-icon> Directions</paper-button\n        >\n        <div main-title=\"\">[[title]]</div>\n      </app-toolbar>\n    </app-header>\n    <div id=\"contentcontainer\">\n      <template is=\"dom-repeat\" items=\"[[gameBoard]]\" as=\"row\">\n        <responsive-grid-row gutter=\"0\" class\\$=\"row row-[[index]]\">\n          <template is=\"dom-repeat\" items=\"[[row.cols]]\" as=\"col\">\n            <responsive-grid-col xl=\"3\" lg=\"3\" md=\"3\" sm=\"3\" xs=\"3\">\n              <paper-button\n                class=\"grid-button\"\n                raised=\"[[!col.notRaised]]\"\n                data-question-data\\$=\"[[col.question]]\"\n                data-value\\$=\"[[col.points]]\"\n                data-type\\$=\"[[col.type]]\"\n                disabled\\$=\"[[col.disabled]]\"\n                >[[col.title]]<br />[[col.points]]</paper-button\n              >\n            </responsive-grid-col>\n          </template>\n        </responsive-grid-row>\n      </template>\n      <div>\n        <h3>Scoreboard</h3>\n        <table>\n          <tbody>\n            <tr>\n              <th></th>\n              <th>Slide ID</th>\n              <th>Terms</th>\n              <th>Reading</th>\n              <th>Lecture</th>\n              <th>Bonus</th>\n              <th>Total</th>\n            </tr>\n            <tr>\n              <th>Points Attempted</th>\n              <td>[[points.slide.attempted]]</td>\n              <td>[[points.terms.attempted]]</td>\n              <td>[[points.reading.attempted]]</td>\n              <td>[[points.lecture.attempted]]</td>\n              <td>[[points.bonus.attempted]]</td>\n              <td>[[points.total.attempted]]</td>\n            </tr>\n            <tr>\n              <th>Points Earned</th>\n              <td>[[points.slide.earned]]</td>\n              <td>[[points.terms.earned]]</td>\n              <td>[[points.reading.earned]]</td>\n              <td>[[points.lecture.earned]]</td>\n              <td>[[points.bonus.earned]]</td>\n              <td>[[points.total.earned]]</td>\n            </tr>\n            <tr>\n              <th>Category Percentage</th>\n              <td>[[points.slide.percent]]</td>\n              <td>[[points.terms.percent]]</td>\n              <td>[[points.reading.percent]]</td>\n              <td>[[points.lecture.percent]]</td>\n              <td>[[points.bonus.percent]]</td>\n              <td>[[points.total.percent]]</td>\n            </tr>\n          </tbody>\n        </table>\n        <div>Points Remaining to Attempt: [[remainingAttempts]]</div>\n      </div>\n    </div>\n    <game-show-quiz-modal id=\"directions\" title=\"[[directionsTitle]]\">\n      <div slot=\"content\"><slot name=\"directions\"></slot></div>\n      <paper-button slot=\"buttons\" id=\"dismiss\" dialog-confirm=\"\" raised=\"\"\n        >Good luck!</paper-button\n      >\n    </game-show-quiz-modal>\n    <game-show-quiz-modal id=\"dialog\" title=\"[[activeQuestion.title]]\">\n      <iron-image\n        slot=\"content\"\n        style=\"min-width:100px; width:100%; min-height:25vh; height:40vh; background-color: lightgray;\"\n        sizing=\"contain\"\n        preload=\"\"\n        src\\$=\"[[activeQuestion.image]]\"\n      ></iron-image>\n      <multiple-choice\n        disabled\\$=\"[[activeQuestion.submitted]]\"\n        slot=\"content\"\n        id=\"question\"\n        hide-buttons=\"\"\n        title=\"[[activeQuestion.title]]\"\n        answers=\"[[activeQuestion.data]]\"\n      ></multiple-choice>\n      <paper-button\n        slot=\"buttons\"\n        hidden\\$=\"[[activeQuestion.submitted]]\"\n        id=\"submit\"\n        raised=\"\"\n        disabled\\$=\"[[__submitDisabled]]\"\n        >Submit answer\n        <iron-icon\n          hidden$=\"[[__submitDisabled]]\"\n          icon=\"icons:touch-app\"\n        ></iron-icon\n      ></paper-button>\n      <paper-button\n        slot=\"buttons\"\n        id=\"continue\"\n        hidden\\$=\"[[!activeQuestion.submitted]]\"\n        dialog-confirm=\"\"\n        raised=\"\"\n        >Continue <iron-icon icon=\"icons:arrow-forward\"></iron-icon\n      ></paper-button>\n    </game-show-quiz-modal>\n    <iron-ajax\n      auto=\"\"\n      id=\"gamedata\"\n      url=\"[[gameData]]\"\n      handle-as=\"json\"\n      last-response=\"{{gameBoard}}\"\n    ></iron-ajax>\n    <iron-ajax\n      id=\"questiondata\"\n      url=\"[[__questionEndpoint]]\"\n      handle-as=\"json\"\n      last-response=\"{{activeQuestion}}\"\n    ></iron-ajax>\n  "]);_templateObject_1f21b3b0490411e990ee3fd35bb8725b=function(){return data};return data}var GameShowQuiz=(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_1f21b3b0490411e990ee3fd35bb8725b()),is:"game-show-quiz",behaviors:[HAXBehaviors.PropertiesBehaviors],properties:{title:{type:String},points:{type:Object,value:{slide:{attempted:0,earned:0,percent:0},terms:{attempted:0,earned:0,percent:0},reading:{attempted:0,earned:0,percent:0},lecture:{attempted:0,earned:0,percent:0},bonus:{attempted:0,earned:0,percent:0},total:{attempted:0,earned:0,percent:0}}},remainingAttempts:{type:Number,value:30},directionsTitle:{type:String,value:"Directions"},gameBoard:{type:Array,observer:"_gameBoardChanged"},gameData:{type:String},activeQuestion:{type:Object}},directionsToggle:function directionsToggle(){this.$.directions.toggle()},continueGameTap:function continueGameTap(){if(babelHelpers.typeof(this.__activeTap)!=="undefined"&&null!=(0,_polymerDom.dom)(this.__activeTap).parentNode.nextElementSibling.firstElementChild){(0,_polymerDom.dom)(this.__activeTap).parentNode.nextElementSibling.firstElementChild.firstElementChild.focus();delete this.__activeTap}else if(babelHelpers.typeof(this.__activeTap)!=="undefined"&&null==(0,_polymerDom.dom)(this.__activeTap).parentNode.nextElementSibling.firstElementChild){this.__activeTap.focus();delete this.__activeTap}},registerTap:function registerTap(){this.__submitDisabled=!1},submitAnswer:function submitAnswer(){this.set("activeQuestion.submitted",!0);this.notifyPath("activeQuestion.submitted");this.$.continue.focus();this.__activeTap.disabled=!0;var icon=document.createElement("iron-icon");icon.classList.add("status-icon");var num=parseInt(this.points[this.__activeType].attempted)+parseInt(this.__activeValue);this.set("points."+this.__activeType+".attempted",num);this.notifyPath("points."+this.__activeType+".attempted");var total=parseInt(this.points.total.attempted)+parseInt(this.__activeValue);this.set("points.total.attempted",total);this.notifyPath("points.total.attempted");this.remainingAttempts=this.remainingAttempts-parseInt(this.__activeValue);if(this.$.question.checkAnswers()){var evt=new CustomEvent("simple-toast-show",{bubbles:!0,cancelable:!0,detail:{text:"Correct!",duration:4e3}});this.dispatchEvent(evt);var _num=parseInt(this.points[this.__activeType].earned)+parseInt(this.__activeValue);this.set("points."+this.__activeType+".earned",_num);this.notifyPath("points."+this.__activeType+".earned");icon.icon="icons:check-circle";icon.classList.add("correct");var _total=parseInt(this.points.total.earned)+parseInt(this.__activeValue);this.set("points.total.earned",_total);this.notifyPath("points.total.earned")}else{var _evt=new CustomEvent("simple-toast-show",{bubbles:!0,cancelable:!0,detail:{text:":( You got it wrong",duration:4e3}});this.dispatchEvent(_evt);icon.icon="icons:cancel";icon.classList.add("incorrect")}var percent=(100*(parseInt(this.points[this.__activeType].earned)/parseInt(this.points[this.__activeType].attempted))).toFixed(1);this.set("points."+this.__activeType+".percent",percent);this.notifyPath("points."+this.__activeType+".percent");total=(100*(parseInt(this.points.total.earned)/parseInt(this.points.total.attempted))).toFixed(1);this.set("points.total.percent",total);this.notifyPath("points.total.percent");(0,_polymerDom.dom)(this.__activeTap).appendChild(icon)},_gameBoardTap:function _gameBoardTap(e){var _this=this,normalizedEvent=(0,_polymerDom.dom)(e),local=normalizedEvent.localTarget;if(null!=local.getAttribute("data-question-data")){this.__submitDisabled=!0;this.__questionEndpoint=local.getAttribute("data-question-data");this.__activeTap=local;this.__activeType=local.getAttribute("data-type");this.__activeValue=local.getAttribute("data-value");this.$.questiondata.answers=[];setTimeout(function(){_this.$.questiondata.generateRequest();_this.$.dialog.toggle()},100)}},_gameBoardChanged:function _gameBoardChanged(){},resetFocus:function resetFocus(){this.$.helpbutton.focus()},attached:function attached(){window.SimpleToast.requestAvailability();this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Game show",description:"Tweak the game show options",icon:"av:play-circle-filled",color:"grey",groups:["Video","Media"],handles:[{type:"video",url:"source"}],meta:{author:"Your organization on github"}},settings:{quick:[{property:"title",title:"Title",description:"The title of the element",inputMethod:"textfield",icon:"editor:title"}],configure:[{property:"title",title:"Title",description:"The title of the element",inputMethod:"textfield",icon:"editor:title"}],advanced:[]}});this.$.dismiss.addEventListener("tap",this.resetFocus.bind(this));this.$.contentcontainer.addEventListener("tap",this._gameBoardTap.bind(this));this.$.submit.addEventListener("tap",this.submitAnswer.bind(this));this.$.continue.addEventListener("tap",this.continueGameTap.bind(this));this.$.question.addEventListener("tap",this.registerTap.bind(this))},detached:function detached(){this.$.dismiss.removeEventListener("tap",this.resetFocus.bind(this));this.$.contentcontainer.removeEventListener("tap",this._gameBoardTap.bind(this));this.$.submit.removeEventListener("tap",this.submitAnswer.bind(this));this.$.continue.removeEventListener("tap",this.continueGameTap.bind(this));this.$.question.removeEventListener("tap",this.registerTap.bind(this))}});_exports.GameShowQuiz=GameShowQuiz});