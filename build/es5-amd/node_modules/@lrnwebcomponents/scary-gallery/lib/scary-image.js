define(["../../../@polymer/polymer/polymer-legacy.js"],function(_polymerLegacy){"use strict";function _templateObject_3591a5f0685411e9b25d1735312af746(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: inline-block;\n        overflow: hidden;\n        position: relative;\n      }\n\n      #baseURIAnchor {\n        display: none;\n      }\n\n      #sizedImgDiv {\n        position: absolute;\n        top: 0px;\n        right: 0px;\n        bottom: 0px;\n        left: 0px;\n        display: block;\n        background-size: cover;\n        background-position: center;\n        background-repeat: no-repeat;\n      }\n\n      #img {\n        display: none;\n      }\n    </style>\n\n    <a id=\"baseURIAnchor\" href=\"#\"></a>\n    <div\n      id=\"sizedImgDiv\"\n      role=\"img\"\n      aria-hidden$=\"[[_computeImgDivARIAHidden(alt)]]\"\n      aria-label$=\"[[_computeImgDivARIALabel(alt, src)]]\"\n    ></div>\n    <img id=\"img\" on-load=\"_imgOnLoad\" on-error=\"_imgOnError\" />\n  "]);_templateObject_3591a5f0685411e9b25d1735312af746=function _templateObject_3591a5f0685411e9b25d1735312af746(){return data};return data}/**
Adapted from PolymerElements/iron-image to simplify the functionality for scary-gallery
and expose naturalWidth and naturalHeight

Original @license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/ /**
`scary-image` is an element to be used in `scary-gallery`
adapted from `iron-image`

Usage:

Basically identical to the `<img src="...">` tag:

    <scary-image src="http://lorempixel.com/400/400"></scary-image>

@element scary-image
*/(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_3591a5f0685411e9b25d1735312af746()),is:"scary-image",properties:{/**
     * The URL of an image.
     */src:{type:String,value:""},/**
     * A short text alternative for the image.
     */alt:{type:String,value:null},/**
     * Read-only value that is true when the image is loaded.
     */loaded:{notify:!0/* transition */ /* transition */,readOnly:!0,type:Boolean,value:!1},/**
     * Read-only value that tracks the loading state of the image when the `preload`
     * option is used.
     */loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
     * Read-only value that indicates that the last set `src` failed to load.
     */error:{notify:!0,readOnly:!0,type:Boolean,value:!1},/**
     * Can be used to set the width of image (e.g. via binding); size may also be
     * set via CSS.
     */width:{observer:"_widthChanged",type:Number,value:null},/**
     * Can be used to set the height of image (e.g. via binding); size may also be
     * set via CSS.
     *
     * @attribute height
     * @type number
     * @default null
     */height:{observer:"_heightChanged",type:Number,value:null},/**
     * Natural width of the loaded image
     */naturalWidth:{type:Number,notify:!0,computed:"_computeNaturalWidth(loaded)"},/**
     * Natural height of the loaded image
     */naturalHeight:{type:Number,notify:!0,computed:"_computeNaturalHeight(loaded)"}},observers:["_loadStateObserver(src)"],created:function created(){this._resolvedSrc=""},_imgOnLoad:function _imgOnLoad(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this._setLoading(!1);this._setLoaded(!0);this._setError(!1)},_computeNaturalWidth:function _computeNaturalWidth(loaded){if(!loaded){return null}return this.$.img.naturalWidth},_computeNaturalHeight:function _computeNaturalHeight(loaded){if(!loaded){return null}return this.$.img.naturalHeight},_imgOnError:function _imgOnError(){if(this.$.img.src!==this._resolveSrc(this.src)){return}this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";this._setLoading(!1);this._setLoaded(!1);this._setError(!0)},_computeImgDivARIAHidden:function _computeImgDivARIAHidden(){return""===this.alt?"true":void 0},_computeImgDivARIALabel:function _computeImgDivARIALabel(){if(null!==this.alt){return this.alt}// that URL x, but '' is the default for src.
if(""===this.src){return""}// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
var resolved=this._resolveSrc(this.src);// Remove query parts, get file name.
return resolved.replace(/[?|#].*/g,"").split("/").pop()},_widthChanged:function _widthChanged(){this.style.width=isNaN(this.width)?this.width:this.width+"px"},_heightChanged:function _heightChanged(){this.style.height=isNaN(this.height)?this.height:this.height+"px"},_loadStateObserver:function _loadStateObserver(src){var newResolvedSrc=this._resolveSrc(src);if(newResolvedSrc===this._resolvedSrc){return}this._resolvedSrc=newResolvedSrc;this.$.img.removeAttribute("src");this.$.sizedImgDiv.style.backgroundImage="";if(""===src){this._setLoading(!1);this._setLoaded(!1);this._setError(!1)}else{this.$.img.src=this._resolvedSrc;this.$.sizedImgDiv.style.backgroundImage="url(\""+this._resolvedSrc+"\")";this._setLoading(!0);this._setLoaded(!1);this._setError(!1)}},_resolveSrc:function _resolveSrc(testSrc){var resolved=this.resolveUrl(testSrc,this.$.baseURIAnchor.href);// NOTE: Use of `URL` was removed here because IE11 doesn't support
// constructing it. If this ends up being problematic, we should
// consider reverting and adding the URL polyfill as a dev dependency.
if("/"===resolved[0]){// In IE location.origin might not work
// https://connect.microsoft.com/IE/feedback/details/1763802/location-origin-is-undefined-in-ie-11-on-windows-10-but-works-on-windows-7
resolved=(location.origin||location.protocol+"//"+location.host)+resolved}return resolved}})});