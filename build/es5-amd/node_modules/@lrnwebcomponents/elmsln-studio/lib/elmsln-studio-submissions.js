define(["exports", "../../../lit-element/lit-element.js", "../../../@polymer/iron-ajax/iron-ajax.js", "../../../@polymer/iron-icon/iron-icon.js", "../../../@polymer/iron-icons/iron-icons.js", "../../../@polymer/iron-icons/communication-icons.js", "../../accent-card/accent-card.js", "../../lrndesign-gallery/lrndesign-gallery.js", "../../lrndesign-avatar/lrndesign-avatar.js"], function (_exports, _litElement, _ironAjax, _ironIcon, _ironIcons, _communicationIcons, _accentCard, _lrndesignGallery, _lrndesignAvatar) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.ElmslnStudioSubmissions = void 0;

  function _templateObject4_88f951f0accf11ea9f8e253ae0e7846d() {
    var data = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          font-family: var(--elmsln-studio-FontFamily, \"Roboto\", sans-serif);\n          font-size: 13px;\n        }\n        .sr-only {\n          position: absolute;\n          left: -9999999px;\n          width: 0;\n          overflow: hidden;\n        }\n        lrndesign-gallery {\n          --lrndesign-gallery-border-radius: 2px;\n          --lrndesign-gallery-box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14),\n            0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);\n        }\n        #cards {\n          margin: var(--elmsln-studio-margin, 20px)\n            calc(-0.5 * var(--elmsln-studio-margin, 20px));\n          display: flex;\n          align-items: stretch;\n          justify-content: space-between;\n          flex-wrap: wrap;\n        }\n        .card {\n          --accent-card-padding: 0;\n          --accent-card-heading-padding-top: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-heading-padding-left: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-heading-padding-right: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-subheading-padding-left: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-subheading-padding-right: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-content-padding-left: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-content-padding-right: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-content-padding-bottom: calc(\n            0.5 * var(--elmsln-studio-margin, 20px)\n          );\n          --accent-card-image-height: 200px;\n          margin: calc(0.5 * var(--elmsln-studio-margin, 20px))\n            calc(0.5 * var(--elmsln-studio-margin, 20px));\n          flex: 0 0 calc(100% - var(--elmsln-studio-margin, 20px));\n        }\n        .card [slot=\"heading\"] {\n          font-weight: var(--elmsln-studio-FontWeightLight, 300);\n          font-size: 22px;\n        }\n        .card [slot=\"corner\"] {\n          font-weight: var(--elmsln-studio-FontWeightNormal, 400);\n          font-size: 12px;\n          color: #afafaf;\n        }\n        .card [slot=\"subheading\"] {\n          font-weight: var(--elmsln-studio-FontWeightBold, 500);\n          font-size: 18px;\n          font-style: normal;\n          color: #5d5e5f;\n        }\n        .card [slot=\"content\"] {\n          font-weight: var(--elmsln-studio-FontWeightNormal, 400);\n          font-size: 14px;\n          color: #7e7e7e;\n        }\n        .card [slot=\"footer\"] {\n          font-weight: var(--elmsln-studio-FontWeightNormal, 400);\n          font-size: 12px;\n          text-transform: uppercase;\n          display: flex;\n          align-items: stretch;\n          justify-content: space-between;\n          color: #95989a;\n        }\n        .card button {\n          padding: calc(0.5 * var(--elmsln-studio-margin, 20px));\n          background-color: transparent;\n        }\n        #secondary {\n          margin-top: 0;\n          --nav-card-linklist-margin-top: 0;\n          --nav-card-linklist-left-size: 36px;\n          --paper-avatar-width: var(--nav-card-linklist-left-size, 36px);\n        }\n        nav-card {\n          margin: 0;\n        }\n        accent-card button {\n          border: none;\n          padding: 0;\n          text-align: left;\n          font-size: inherit;\n          font-weight: inherit;\n          flex: 1 1 auto;\n        }\n        @media screen and (min-width: 600px) {\n          :host {\n            display: flex;\n            align-items: flex-start;\n            justify-content: space-between;\n          }\n          #primary {\n            flex: 0 0 calc(50% - var(--elmsln-studio-margin, 20px));\n          }\n          #secondary {\n            flex: 0 0 calc(50% - var(--elmsln-studio-margin, 20px));\n          }\n          .card {\n            flex: 0 0 calc(100% - var(--elmsln-studio-margin, 20px));\n          }\n        }\n        @media screen and (min-width: 900px) {\n          #primary {\n            flex: 0 0 calc(66.66666667% - var(--elmsln-studio-margin, 20px));\n          }\n          #secondary {\n            flex: 0 0 calc(33.33333333% - var(--elmsln-studio-margin, 20px));\n          }\n          .card {\n            flex: 0 0 calc(50% - var(--elmsln-studio-margin, 20px));\n          }\n        }\n        @media screen and (min-width: 1200px) {\n          .card {\n            flex: 0 0 calc(33.3333333333% - var(--elmsln-studio-margin, 20px));\n          }\n        }\n        @media screen and (min-width: 1600px) {\n          #cards {\n            justify-content: space-around;\n          }\n          .card {\n            flex: 0 0 calc(400px - var(--elmsln-studio-margin, 20px));\n          }\n        }\n      "]);

    _templateObject4_88f951f0accf11ea9f8e253ae0e7846d = function _templateObject4_88f951f0accf11ea9f8e253ae0e7846d() {
      return data;
    };

    return data;
  }

  function _templateObject3_88f951f0accf11ea9f8e253ae0e7846d() {
    var data = babelHelpers.taggedTemplateLiteral(["\n              <nav-card-item\n                icon=\"chevron-right\"\n                avatar=\"", "\"\n                initials=\"", "\"\n              >\n                <button\n                  id=\"comment-", "\"\n                  aria-describedby=\"comment-desc-", "\"\n                  slot=\"label\"\n                >\n                  ", "\n                  ", "\n                  ", "\n                </button>\n                <span id=\"comment-desc-", "\" slot=\"description\">\n                  ", "\n                </span>\n              </nav-card-item>\n            "]);

    _templateObject3_88f951f0accf11ea9f8e253ae0e7846d = function _templateObject3_88f951f0accf11ea9f8e253ae0e7846d() {
      return data;
    };

    return data;
  }

  function _templateObject2_88f951f0accf11ea9f8e253ae0e7846d() {
    var data = babelHelpers.taggedTemplateLiteral(["\n              <accent-card no-border class=\"card\" image-src=\"", "\">\n                <span slot=\"heading\" id=\"student-", "\" class=\"card-student\">\n                  ", "\n                </span>\n                <span slot=\"corner\" id=\"date-", "\">\n                  ", "\n                </span>\n                <span slot=\"subheading\" id=\"assignment-", "\">\n                  ", "\n                </span>\n                <span slot=\"content\" id=\"project-", "\">\n                  ", "\n                </span>\n                <div slot=\"footer\">\n                  <button\n                    id=\"discussion\"\n                    aria-describedby=\"student-", " date-", " assignment-", " project", "\"\n                  >\n                    <iron-icon icon=\"communication:comment\"></iron-icon>\n                    Discussion\n                  </button>\n                  <button\n                    id=\"view\"\n                    aria-describedby=\"student-", " date-", " assignment-", " project", "\"\n                  >\n                    <iron-icon icon=\"visibility\"></iron-icon>\n                    View\n                  </button>\n                </div>\n              </accent-card>\n            "]);

    _templateObject2_88f951f0accf11ea9f8e253ae0e7846d = function _templateObject2_88f951f0accf11ea9f8e253ae0e7846d() {
      return data;
    };

    return data;
  }

  function _templateObject_88f951f0accf11ea9f8e253ae0e7846d() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      <iron-ajax\n        auto\n        url=\"", "\"\n        @response=\"", "\"\n      ></iron-ajax>\n      <iron-ajax\n        auto\n        url=\"", "\"\n        @response=\"", "\"\n      ></iron-ajax>\n      <div id=\"primary\">\n        <lrndesign-gallery .sources=\"", "\"></lrndesign-gallery>\n        <div id=\"cards\">\n          ", "\n        </div>\n      </div>\n      <nav-card\n        id=\"secondary\"\n        flat\n        no-border\n        class=\"card\"\n        link-icon=\"chevron-right\"\n      >\n        <span slot=\"heading\">Recent Comments</span>\n        <div slot=\"linklist\">\n          ", "\n        </div>\n      </nav-card>\n    "]);

    _templateObject_88f951f0accf11ea9f8e253ae0e7846d = function _templateObject_88f951f0accf11ea9f8e253ae0e7846d() {
      return data;
    };

    return data;
  }

  /**
   * `elmsln-studio-submissions`
   * Studio App for ELMS:LN
   *
   * @customElement elmsln-studio-submissions
   * @lit-html
   * @lit-element
   * @demo demo/index.html
   */
  var ElmslnStudioSubmissions =
  /*#__PURE__*/
  function (_LitElement) {
    babelHelpers.inherits(ElmslnStudioSubmissions, _LitElement);
    babelHelpers.createClass(ElmslnStudioSubmissions, [{
      key: "render",
      // render function
      value: function render() {
        var _this2 = this;

        return (0, _litElement.html)(_templateObject_88f951f0accf11ea9f8e253ae0e7846d(), this.commentsSrc, function (e) {
          return _this2._handleArrayData(e, "__comments");
        }, this.submissionsSrc, function (e) {
          return _this2._handleObjectData(e, "__submissions");
        }, this.featured, this.submissions.map(function (s) {
          return (0, _litElement.html)(_templateObject2_88f951f0accf11ea9f8e253ae0e7846d(), s.src, s.id, s.student, s.id, s.date, s.id, s.assignment, s.id, s.project, s.id, s.id, s.id, s.id, s.id, s.id, s.id, s.id);
        }), this.__comments.map(function (comment, i) {
          return (0, _litElement.html)(_templateObject3_88f951f0accf11ea9f8e253ae0e7846d(), comment.relationships.author.data.avatar || "", comment.relationships.author.data.display_name || "", i, i, comment.relationships.author.data.sis.sortable_name.replace(/.*,/, ""), comment.type === "comment" ? "commented" : "submitted", comment.type === "comment" ? comment.attributes.subject : comment.attributes.title, i, _this2.date(comment.type === "comment" ? comment.attributes.changed : comment.meta.changed));
        }));
      } // properties available to the custom element for data binding

    }], [{
      key: "styles",
      get: function get() {
        return [(0, _litElement.css)(_templateObject4_88f951f0accf11ea9f8e253ae0e7846d())];
      }
    }, {
      key: "properties",
      get: function get() {
        return {
          /*
           * source JSON for most recent comments in response to
           * student's comment or submission
           */
          commentsSrc: {
            type: String,
            attribute: "comments-src"
          },

          /*
           * source JSON for student's most recent submissions
           */
          submissionsSrc: {
            type: String,
            attribute: "submissions-src"
          },

          /*
           * most recent comments in response to
           * student's comment or submission
           */
          __comments: {
            type: Array
          },

          /*
           * student's submissions
           */
          __submissions: {
            type: Object
          }
        };
      }
      /**
       * Store the tag name to make it easier to obtain directly.
       * @notice function name must be here for tooling to operate correctly
       */

    }, {
      key: "tag",
      get: function get() {
        return "elmsln-studio-submissions";
      } // life cycle

    }]);

    function ElmslnStudioSubmissions() {
      var _this;

      babelHelpers.classCallCheck(this, ElmslnStudioSubmissions);
      _this = babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(ElmslnStudioSubmissions).call(this));
      _this.__comments = [];
      _this.__submissions = [];
      _this.tag = ElmslnStudioSubmissions.tag;
      return _this;
    }

    babelHelpers.createClass(ElmslnStudioSubmissions, [{
      key: "_getDueDates",
      value: function _getDueDates(item) {
        return item.meta.rationale && item.meta.rationale.data ? item.meta.rationale.data : undefined;
      }
    }, {
      key: "_getDueDate",
      value: function _getDueDate(item) {
        //console.log('_getDueDate',item,this._getDueDates(item));
        return this._getDueDates(item) ? this._getDueDates(item)[1] || this._getDueDates(item)[0] : undefined;
      }
    }, {
      key: "_handleArrayData",
      value: function _handleArrayData(e, propName) {
        this[propName] = e && e.detail && e.detail.response && e.detail.response.data ? e.detail.response.data : []; //console.log("_handleArrayData", e, propName, this[propName]);
      }
    }, {
      key: "_handleObjectData",
      value: function _handleObjectData(e, propName) {
        this[propName] = e && e.detail && e.detail.response && e.detail.response.data ? e.detail.response.data : {}; //console.log('_handleObjectData',e,propName,this[propName]);
      }
    }, {
      key: "date",
      value: function date(time) {
        var date,
            options = {
          //weekday: 'long',
          year: "numeric",
          month: "long",
          day: "numeric"
        };

        if (time && isNaN(time)) {
          var parts = time.split(/\D+/);
          date = babelHelpers.construct(Date, babelHelpers.toConsumableArray(parts));
          /*console.log('date',parts,
          '\ndate',date,
          '\ntoString',date.toString(),
          '\ntoLocaleString',date.toLocaleString(),
          '\ntoLocaleDateString',date.toLocaleDateString(undefined,options),
          '\ntoUTCString',date.toUTCString(),
          '\ntoTimeString',date.toTimeString(),
          '\ntoLocaleTimeString',date.toLocaleTimeString()
          );*/
        } else if (time) {
          date = new Date(parseInt(time));
        }

        return date.toLocaleDateString(undefined, options);
      }
      /**
       * life cycle, element is afixed to the DOM
       */

    }, {
      key: "connectedCallback",
      value: function connectedCallback() {
        babelHelpers.get(babelHelpers.getPrototypeOf(ElmslnStudioSubmissions.prototype), "connectedCallback", this).call(this);
      } // static get observedAttributes() {
      //   return [];
      // }
      // disconnectedCallback() {}
      // attributeChangedCallback(attr, oldValue, newValue) {}

    }, {
      key: "submissions",
      get: function get() {
        return [{
          id: "e865ade8-a8e9-4e35-8fda-54aa86e57ab3",
          student: "Havana Brown",
          date: "March 30, 2020",
          assignment: "Discover: Interview",
          project: "Ritual Project",
          alt: "preview of Tortie Manx's submission for Discover: Interview",
          src: "//placekitten.com/400/400",
          large: "//placekitten.com/800/800",
          thumb: "//placekitten.com/200/200",
          viewLink: "#",
          discussLink: "#",
          features: "Ptracy give me some of your food give me some of your food give me some of your food meh, i don't want it. Cough skid on floor, crash into wall . Knock over christmas tree intrigued by the shower spread kitty litter all over house."
        }, {
          id: "e865ade8-a8e9-4e35-9fda-54aa86e57ab3",
          student: "Tabby Nebelung",
          date: "April 22, 2020",
          assignment: "Discover: Interview",
          project: "Ritual Project",
          alt: "preview of Tortie Manx's submission for Discover: Interview",
          src: "//placekitten.com/400/300",
          large: "//placekitten.com/800/600",
          thumb: "//placekitten.com/200/150",
          viewLink: "#",
          discussLink: "#"
        }, {
          id: "e865ade8-a8e9-8e35-9fda-54aa86e57ab3",
          student: "Kitty Korat",
          date: "May 1, 2020",
          assignment: "Discover: Interview",
          project: "Ritual Project",
          alt: "preview of Tortie Manx's submission for Discover: Interview",
          src: "//placekitten.com/400/200",
          large: "//placekitten.com/800/400",
          thumb: "//placekitten.com/200/100",
          viewLink: "#",
          discussLink: "#"
        }, {
          id: "d865ade8-a8e9-8e35-9fda-54aa86e57ab3",
          student: "Tortie Manx",
          date: "March 5, 2020",
          assignment: "Discover: Interview",
          project: "Ritual Project",
          alt: "preview of Tortie Manx's submission for Discover: Interview",
          src: "//placekitten.com/600/400",
          large: "//placekitten.com/900/600",
          thumb: "//placekitten.com/300/200",
          viewLink: "#",
          discussLink: "#",
          feature: "Paw at beetle and eat it before it gets away cat sit like bread stuff and things cry louder at reflection. Push your water glass on the floor bleghbleghvomit my furball really tie the room together but pose purrfectly to show my beauty."
        }];
      }
    }, {
      key: "featured",
      get: function get() {
        console.log("submissions", this.submissions, this.submissions.filter(function (s) {
          return s.feature;
        }), this.submissions.filter(function (s) {
          return s.feature;
        }).map(function (s) {
          s.title = "Featured Work";
          s.detail = s.feature;
          return s;
        }));
        return this.submissions.filter(function (s) {
          return s.feature;
        }).map(function (s) {
          s.title = "Featured Work: ".concat(s.student);
          s.details = s.feature;
          return s;
        });
      }
    }]);
    return ElmslnStudioSubmissions;
  }(_litElement.LitElement);

  _exports.ElmslnStudioSubmissions = ElmslnStudioSubmissions;
  customElements.define("elmsln-studio-submissions", ElmslnStudioSubmissions);
});