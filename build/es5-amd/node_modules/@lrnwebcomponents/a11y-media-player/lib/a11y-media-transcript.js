define(["exports","../../../@polymer/polymer/polymer-element.js","./a11y-media-player-properties.js","./a11y-media-transcript-cue.js"],function(_exports,_polymerElement,_a11yMediaPlayerProperties){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.A11yMediaTranscript=void 0;function _templateObject3_85edae301da011e99f27bd1c30442504(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style is=\"custom-style\" include=\"simple-colors\">\n        :host {\n          display: block;\n          padding: 15px;\n          color: var(--a11y-media-transcript-color);\n          background-color: var(--a11y-media-transcript-bg-color);\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        :host #inner {\n          width: 100%;\n          display: none;\n        }\n        :host #inner[active] {\n          display: table;\n          width: 100%;\n        }\n        :host #inner[active][hideTimestamps] {\n          display: block;\n        }\n        :host .sr-only:not(:focus) {\n          position: absolute;\n          left: -99999;\n          top: 0;\n          height: 0;\n          width: 0;\n          overflow: hidden;\n        }\n        @media print {\n          :host {\n            padding: 0 15px 5px;\n            color: #000;\n            background-color: #ffffff;\n            border-top: 1px solid #aaa;\n          }\n        }\n      </style>\n      <a id=\"transcript-desc\" href=\"#bottom\" class=\"sr-only\"\n        >[[skipTranscriptLink]]</a\n      >\n      <template id=\"tracks\" is=\"dom-repeat\" items=\"{{tracks}}\" as=\"track\">\n        <div\n          id=\"inner\"\n          class=\"transcript-from-track\"\n          lang=\"{{track.language}}\"\n          active$=\"[[track.active]]\"\n        >\n          <template is=\"dom-repeat\" items=\"{{track.cues}}\" as=\"cue\">\n            <a11y-media-transcript-cue\n              accent-color$=\"[[accentColor]]\"\n              active-cues$=\"[[activeCues]]\"\n              controls$=\"[[mediaId]]\"\n              cue$=\"{{cue}}\"\n              disabled$=\"[[disableInteractive]]\"\n              disable-search$=\"[[disableSearch]]\"\n              hide-timestamps$=\"[[hideTimestamps]]\"\n              on-tap=\"_handleCueSeek\"\n              order$=\"{{cue.order}}\"\n              role=\"button\"\n              search=\"[[search]]\"\n              tabindex=\"0\"\n            >\n            </a11y-media-transcript-cue>\n          </template>\n        </div>\n      </template>\n      <div id=\"bottom\" class=\"sr-only\"></div>\n    "]);_templateObject3_85edae301da011e99f27bd1c30442504=function(){return data};return data}function _templateObject2_85edae301da011e99f27bd1c30442504(){var data=babelHelpers.taggedTemplateLiteral(["\n        <h1>Transcript</h1>\n      "]);_templateObject2_85edae301da011e99f27bd1c30442504=function(){return data};return data}function _templateObject_85edae301da011e99f27bd1c30442504(){var data=babelHelpers.taggedTemplateLiteral(["\n        <style>\n          a11y-media-transcript-cue {\n            display: table-row;\n            background-color: #fff;\n            color: #000;\n          }\n          a11y-media-transcript-cue[hide-timestamps],\n          a11y-media-transcript-cue[hide-timestamps] #text {\n            display: inline;\n          }\n          a11y-media-transcript-cue #text {\n            display: table-cell;\n            line-height: 200%;\n          }\n          a11y-media-transcript-cue #time {\n            display: table-cell;\n            font-size: 80%;\n            padding: 0 16px;\n            white-space: nowrap;\n            font-family: monospace;\n          }\n          a11y-media-transcript-cue[hide-timestamps] #time {\n            display: none;\n          }\n          a11y-media-transcript-cue [matched] {\n            background-color: #fff;\n            color: #eee;\n            padding: 3px 4px;\n            border-radius: 3px;\n          }\n        </style>\n      "]);_templateObject_85edae301da011e99f27bd1c30442504=function(){return data};return data}var A11yMediaTranscript=function(_A11yMediaPlayerPrope){babelHelpers.inherits(A11yMediaTranscript,_A11yMediaPlayerPrope);function A11yMediaTranscript(){babelHelpers.classCallCheck(this,A11yMediaTranscript);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(A11yMediaTranscript).apply(this,arguments))}babelHelpers.createClass(A11yMediaTranscript,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(A11yMediaTranscript.prototype),"connectedCallback",this).call(this);this.dispatchEvent(new CustomEvent("transcript-ready",{detail:this}))}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(A11yMediaTranscript.prototype),"ready",this).call(this)}},{key:"setMedia",value:function setMedia(player){this.media=player;this.dispatchEvent(new CustomEvent("transcript-ready",{detail:this}))}},{key:"toggleHidden",value:function toggleHidden(mode){var root=this,inner=document.getElementById("inner"),active=null!==inner&&inner!==void 0?inner.querySelector("a11y-media-transcript-cue[active]"):null,first=null!==inner&&inner!==void 0?inner.querySelector("a11y-media-transcript-cue"):null;mode=mode!==void 0?mode:this.hidden;this.hidden=mode}},{key:"print",value:function print(mediaTitle){var root=this,track=root.shadowRoot.querySelector("#inner[active]").cloneNode(!0),css=(0,_polymerElement.html)(_templateObject_85edae301da011e99f27bd1c30442504()),h1=(0,_polymerElement.html)(_templateObject2_85edae301da011e99f27bd1c30442504());if(mediaTitle!==void 0)h1.innerHTML=mediaTitle;if(null!==track&track!==void 0){var print=window.open("","","left=0,top=0,width=552,height=477,toolbar=0,scrollbars=0,status =0");print.document.body.appendChild(css);print.document.body.appendChild(h1);print.document.body.appendChild(track);print.document.close();print.focus();print.print();print.close()}}},{key:"setTracks",value:function setTracks(tracks){this.set("tracks",tracks.slice(0));this.notifyPath("tracks");if(this.tracks!==void 0&&0<this.tracks.length)this.$.tracks.render()}},{key:"setActiveCues",value:function setActiveCues(cues){var root=this,offset=null!==root.shadowRoot.querySelector("#inner")&&root.shadowRoot.querySelector("#inner")!==void 0?root.shadowRoot.querySelector("#inner").offsetTop:0,cue=root.shadowRoot.querySelector("#inner a11y-media-transcript-cue[active]");root.set("activeCues",cues.slice(0));if(!root.disableScroll&&null!==cue&cue!==void 0){var scrollingTo=function(element,to,duration){if(0>=duration)return;var difference=to-element.scrollTop;setTimeout(function(){element.scrollTop=element.scrollTop+10*(difference/duration);if(element.scrollTop===to)return;scrollingTo(element,to,duration-10)},10)};scrollingTo(root,cue.offsetTop-offset,250)}}},{key:"_getTabIndex",value:function _getTabIndex(disableInteractive){return disableInteractive?-1:0}},{key:"_getRole",value:function _getRole(disableInteractive){return disableInteractive?null:"button"}},{key:"_handleCueSeek",value:function _handleCueSeek(e){if(!this.disableInteractive){this.dispatchEvent(new CustomEvent("cue-seek",{detail:e.detail}))}}},{key:"setActiveTranscript",value:function setActiveTranscript(index){if(this.tracks!==void 0&&null!==this.tracks){for(var i=0;i<this.tracks.length;i++){if(parseInt(index)===i){this.selectedTranscript=parseInt(index);this.set("tracks."+i+".active",!0)}else if(null!==this.tracks[i]){this.set("tracks."+i+".active",!1)}this.notifyPath("tracks."+i+".active")}}this.$.tracks.render()}}],[{key:"properties",get:function get(){return{activeCues:{type:Array,value:null,reflectToAttribute:!0,notify:!0},lang:{type:String,value:"en",reflectToAttribute:!0},mediaId:{type:String,value:null},tabIndex:{type:Number,computed:"_getTabIndex(disableInteractive)"},role:{type:Number,computed:"_getRole(disableInteractive)"},selectedTranscript:{type:String,value:"0"},tracks:{type:Array,value:null}}}},{key:"tag",get:function get(){return"a11y-media-transcript"}},{key:"behaviors",get:function get(){return[_a11yMediaPlayerProperties.A11yMediaPlayerProperties]}},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject3_85edae301da011e99f27bd1c30442504())}}]);return A11yMediaTranscript}(_a11yMediaPlayerProperties.A11yMediaPlayerProperties);_exports.A11yMediaTranscript=A11yMediaTranscript;window.customElements.define(A11yMediaTranscript.tag,A11yMediaTranscript)});