define(["exports","../../../@polymer/polymer/polymer-element.js","./a11y-media-player-behaviors.js"],function(_exports,_polymerElement,_a11yMediaPlayerBehaviors){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.A11yMediaHtml5=void 0;function _templateObject_31986ac0490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n        :host {\n          height: 100%;\n          display: flex;\n          align-items: stretch;\n          position: relative;\n        }\n        :host([hidden]) {\n          display: none;\n        }\n        #video {\n          width: 100%;\n          max-width: 100%;\n        }\n      </style>\n      <video\n        id=\"video\"\n        aria-hidden$=\"[[isYoutube]]\"\n        autoplay$=\"[[autoplay]]\"\n        crossorigin$=\"[[crossorigin]]\"\n        hidden$=\"[[audioOnly]]\"\n        lang$=\"[[mediaLang]]\"\n        on-loadedmetadata=\"_handleMetadata\"\n        poster$=\"[[thumbnailSrc]]\"\n        src$=\"[[manifest]]\"\n        preload=\"metadata\"\n      >\n        HTML5 video not supported\n      </video>\n      <audio\n        id=\"audio\"\n        autoplay$=\"[[autoplay]]\"\n        crossorigin$=\"[[crossorigin]]\"\n        hidden$=\"[[!audioOnly]]\"\n        lang$=\"[[mediaLang]]\"\n        on-loadedmetadata=\"_handleMetadata\"\n        poster$=\"[[thumbnailSrc]]\"\n        preload=\"metadata\"\n      >\n        HTML5 audio not supported\n      </audio>\n    "]);_templateObject_31986ac0490411e990ee3fd35bb8725b=function(){return data};return data}var A11yMediaHtml5=function(_A11yMediaPlayerBehav){babelHelpers.inherits(A11yMediaHtml5,_A11yMediaPlayerBehav);function A11yMediaHtml5(){babelHelpers.classCallCheck(this,A11yMediaHtml5);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(A11yMediaHtml5).apply(this,arguments))}babelHelpers.createClass(A11yMediaHtml5,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(A11yMediaHtml5.prototype),"connectedCallback",this).call(this)}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(A11yMediaHtml5.prototype),"ready",this).call(this);var root=this;root.media=root.$.video!==void 0&&!root.audioOnly?root.$.video:root.$.audio}},{key:"_handleMetadata",value:function _handleMetadata(){var root=this;root.duration=0<root.media.duration?root.media.duration:0;root.tracks=[];root.volume=root.muted?0:Math.max(this.volume,10);root.seekable=root.media.seekable;root.setVolume(root.volume);root.setMute(root.muted);root.setCC(root.cc);root.setLoop(root.loop);root.setPlaybackRate(root.playbackRate);root.aspectRatio=root.media.videoWidth/root.media.videoHeight;root.dispatchEvent(new CustomEvent("media-loaded",{detail:root}))}},{key:"getBufferedTime",value:function getBufferedTime(){return 0<this.media.buffered.length?this.media.buffered.end(0):this.getCurrentTime()}},{key:"getCurrentTime",value:function getCurrentTime(){return this.media.currentTime}},{key:"play",value:function play(){this.paused=!1;this.media.play()}},{key:"pause",value:function pause(){this.paused=!0;this.media.pause()}},{key:"selectTrack",value:function selectTrack(index){this.selectedTrack=this.media.textTracks[index];for(var i=0;i<this.media.textTracks.length;i++){if(parseInt(index)===i){this.media.textTracks[i].mode="showing"}else if(null!==this.media.textTracks[i]){this.media.textTracks[i].mode="hidden"}}}},{key:"stop",value:function stop(){this.pause();this.seek(0)}},{key:"restart",value:function restart(){this.seek(0);this.play()}},{key:"seek",value:function seek(time){this.media.currentTime=time}},{key:"setCC",value:function setCC(mode){this.media.cc=!0===mode;if(this.selectedTrack!==void 0&&!0==mode){this.selectedTrack.mode="showing";this.$.video.textTracks.value=this.selectedTrackId}else if(this.selectedTrack!==void 0&&null!==this.selectedTrack){this.selectedTrack.mode="hidden";this.$.video.textTracks.value=""}}},{key:"setVolume",value:function setVolume(value){this.media.volume=value/100}},{key:"setPlaybackRate",value:function setPlaybackRate(value){this.media.playbackRate=null!==value?value:1}},{key:"setLoop",value:function setLoop(mode){this.media.loop=!0===mode}},{key:"setMute",value:function setMute(mode){this.media.muted=mode}}],[{key:"properties",get:function get(){return{controls:{type:String,value:"video"},disabled:{type:Boolean,value:null},icon:{type:String,value:null},label:{type:String,value:null},paused:{type:Boolean,value:!0},seekable:{type:Object,value:{length:0,start:null,stop:null}}}}},{key:"tag",get:function get(){return"a11y-media-html5"}},{key:"behaviors",get:function get(){return[A11yMediaBehaviors]}},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_31986ac0490411e990ee3fd35bb8725b())}}]);return A11yMediaHtml5}(_a11yMediaPlayerBehaviors.A11yMediaPlayerBehaviors);_exports.A11yMediaHtml5=A11yMediaHtml5;window.customElements.define(A11yMediaHtml5.tag,A11yMediaHtml5)});