!function(b,c){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?c(exports,require("@polymer/polymer/polymer-legacy.js"),require("@lrnwebcomponents/cms-hax/cms-hax.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@lrnwebcomponents/cms-hax/cms-hax.js"],c):c(b.WysiwygHax={},b.polymerLegacy_js)}(this,function(b,c){"use strict";function d(h){return(d="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(i){return"undefined"===typeof i?"undefined":babelHelpers.typeof(i)}:function(i){return i&&"function"==typeof Symbol&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":"undefined"===typeof i?"undefined":babelHelpers.typeof(i)})(h)}function f(){var h,i,j=(h=["\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <textarea id$=\"[[fieldId]]\" name=\"[[fieldName]]\" hidden=\"\">\n[[bodyValue]]</textarea\n    >\n    <cms-hax\n      open-default=\"[[openDefault]]\"\n      hide-message=\"\"\n      body-offset-left=\"[[bodyOffsetLeft]]\"\n      update-page-data=\"[[updatePageData]]\"\n      end-point=\"[[endPoint]]\"\n      app-store-connection=\"[[appStoreConnection]]\"\n      hide-export-button=\"[[hideExportButton]]\"\n      align=\"[[align]]\"\n    ></cms-hax>\n  "],(i=["\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n    <textarea id\\$=\"[[fieldId]]\" name=\"[[fieldName]]\" hidden=\"\">\n[[bodyValue]]</textarea\n    >\n    <cms-hax\n      open-default=\"[[openDefault]]\"\n      hide-message=\"\"\n      body-offset-left=\"[[bodyOffsetLeft]]\"\n      update-page-data=\"[[updatePageData]]\"\n      end-point=\"[[endPoint]]\"\n      app-store-connection=\"[[appStoreConnection]]\"\n      hide-export-button=\"[[hideExportButton]]\"\n      align=\"[[align]]\"\n    ></cms-hax>\n  "])||(i=h.slice(0)),Object.freeze(Object.defineProperties(h,{raw:{value:Object.freeze(i)}})));return f=function(){return j},j}var g=c.Polymer({_template:c.html(f()),is:"wysiwyg-hax",properties:{openDefault:{type:Boolean,value:!1},hideExportButton:{type:Boolean,value:!0},align:{type:String,value:"right"},bodyValue:{type:String},appStoreConnection:{type:Object},fieldId:{type:String,value:"textarea-input-field"},fieldName:{type:String,value:"data[content]"},bodyOffsetLeft:{type:Number,value:-22},editMode:{type:Boolean,reflectToAttribute:!0},endPoint:{type:String},updatePageData:{type:String},activeHaxBody:{type:Object,observer:"_activeHaxBodyUpdated"},__imported:{type:Boolean,value:!1}},_activeHaxBodyUpdated:function(i){var k=this;if(null!=i&&!this.__imported){this.__imported=!0;var l=this.queryEffectiveChildren("template");"undefined"!==d(l)&&(i.importContent(l.innerHTML),this.editMode=!1,window.HaxStore.write("editMode",this.editMode,this),setTimeout(function(){k.editMode=!0,window.HaxStore.write("editMode",k.editMode,k)},200))}},created:function(){document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))},attached:function(){document.body.addEventListener("hax-save",this._bodyContentUpdated.bind(this)),document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))},_haxStorePropertyUpdated:function(i){i.detail&&"undefined"!==d(i.detail.value)&&i.detail.property&&("object"===d(i.detail.value)&&this.set(i.detail.property,null),this.set(i.detail.property,i.detail.value))},_bodyContentUpdated:function(){this.bodyValue=window.HaxStore.instance.activeHaxBody.haxToContent()}});b.WysiwygHax=g,Object.defineProperty(b,"__esModule",{value:!0})});