define(["exports","../../../@polymer/polymer/polymer-element.js","./rich-text-editor-button.js","../../es-global-bridge/es-global-bridge.js","../../../@polymer/polymer/lib/utils/resolve-url.js","../../simple-picker/simple-picker.js"],function(_exports,_polymerElement,_richTextEditorButton){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.RichTextEditorPicker=void 0;function _templateObject_3c451d10490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"rich-text-editor-styles\"></style>\n      <simple-picker id=\"button\"\n        disabled$=\"[[disabled]]\" \n        controls=\"[[controls]]\"\n        on-change=\"_pickerChange\"\n        tabindex=\"0\"\n        title-as-html$=\"[[titleAsHtml]]\"\n        options=\"[[options]]\"\n        value=\"{{value}}\">\n        <span id=\"label\" class$=\"[[labelStyle]]\"></span>\n      </paper-button>\n      <paper-tooltip id=\"tooltip\" for=\"button\"></paper-button>\n    "]);_templateObject_3c451d10490411e990ee3fd35bb8725b=function(){return data};return data}var RichTextEditorPicker=function(_RichTextEditorButton){babelHelpers.inherits(RichTextEditorPicker,_RichTextEditorButton);function RichTextEditorPicker(){babelHelpers.classCallCheck(this,RichTextEditorPicker);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(RichTextEditorPicker).apply(this,arguments))}babelHelpers.createClass(RichTextEditorPicker,[{key:"_isToggled",value:function _isToggled(selection){if(null!==selection){if("formatBlock"===this.command){var ancestor=selection.commonAncestorContainer,parent=ancestor.parentNode,temp=[];this.options.forEach(function(row){row.forEach(function(option){temp.push(option.value)})});this.$.button.value=null!==parent.closest(temp.join(","))?parent.closest(temp.join(",")).tagName.toLowerCase():null}}return!1}},{key:"_setOptions",value:function _setOptions(){this.set("options",this._getPickerOptions(data,this.allowNull,this.icon))}},{key:"_pickerChange",value:function _pickerChange(e){var val=this.$.button.value;e.preventDefault();if(null!==val&&this.selection!==void 0&&null!==this.selection){this.commandVal=this.$.button.value;if(this.command="formatBlock"){this.doTextOperation()}else if(this.command="insertNode"){var node=!this.block?document.createTextNode(val):document.createElement(val);this.selection.extractContents();this.selection.insertNode(node)}if(!0!==this.block){this.$.button.value=null;this.dispatchEvent(new CustomEvent("deselect",{detail:this}))}}}},{key:"_getOptionData",value:function _getOptionData(option){return{alt:option.alt,icon:option.icon,style:option.style,value:option.value}}},{key:"_getPickerOptions",value:function _getPickerOptions(){for(var _Mathsqrt=Math.sqrt,options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],allowNull=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,icon=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,items=!1===allowNull&&null===icon?[{alt:"null",icon:icon,value:null}]:[],cols=11>_Mathsqrt(options.length)?Math.ceil(_Mathsqrt(options.length)):10,i=0;i<options.length;i++){var row=Math.floor(i/cols),col=i-row*cols,_data=this._getOptionData(options[i]);if(items[row]===void 0||null===items[row])items[row]=[];if(0===row&&!1===allowNull&&null!==icon){items[0][0]={alt:"null",icon:icon,value:null};col++}items[row][col]=_data}console.log("items",items);return items}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_3c451d10490411e990ee3fd35bb8725b())}},{key:"properties",get:function get(){return{allowNull:{name:"allowNull",type:"Boolean",value:!1},command:{name:"command",type:"String",value:"insertHTML",readOnly:!0},icon:{name:"icon",type:"String",value:null},options:{name:"options",type:"Array",value:[],notify:!0},titleAsHtml:{name:"titleAsHtml",type:"Boolean",value:!1},value:{name:"value",type:"Object",value:null}}}},{key:"tag",get:function get(){return"rich-text-editor-picker"}}]);return RichTextEditorPicker}(_richTextEditorButton.RichTextEditorButton);_exports.RichTextEditorPicker=RichTextEditorPicker;window.customElements.define(RichTextEditorPicker.tag,RichTextEditorPicker)});