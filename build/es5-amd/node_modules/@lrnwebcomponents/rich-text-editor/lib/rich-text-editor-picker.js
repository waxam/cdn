define(["exports","../../../@polymer/polymer/polymer-element.js","./rich-text-editor-button.js","../../es-global-bridge/es-global-bridge.js","../../../@polymer/polymer/lib/utils/resolve-url.js","../../simple-picker/simple-picker.js"],function(_exports,_polymerElement,_richTextEditorButton){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.RichTextEditorPicker=void 0;function _templateObject_15648480360b11e986ba19c79f14baa4(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style include=\"rich-text-editor-styles\"></style>\n      <simple-picker id=\"button\"\n        disabled$=\"[[disabled]]\" \n        controls=\"[[controls]]\"\n        on-change=\"_pickerChange\"\n        tabindex=\"0\"\n        title-as-html$=\"[[titleAsHtml]]\"\n        options=\"[[options]]\"\n        value=\"[[commandVal]]\">\n        <span id=\"label\" class$=\"[[labelStyle]]\"></span>\n      </paper-button>\n      <paper-tooltip id=\"tooltip\" for=\"button\"></paper-button>\n    "]);_templateObject_15648480360b11e986ba19c79f14baa4=function(){return data};return data}var RichTextEditorPicker=function(_RichTextEditorButton){babelHelpers.inherits(RichTextEditorPicker,_RichTextEditorButton);function RichTextEditorPicker(){babelHelpers.classCallCheck(this,RichTextEditorPicker);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(RichTextEditorPicker).apply(this,arguments))}babelHelpers.createClass(RichTextEditorPicker,[{key:"_isToggled",value:function _isToggled(selection){var wrap=this.wrap;if(null!==selection){if("formatBlock"===this.command){var ancestor=selection.commonAncestorContainer,parent=ancestor.parentNode,temp=[];this.options.forEach(function(row){row.forEach(function(option){temp.push(option.value)})});this.$.button.value=null!==parent.closest(temp.join(","))?parent.closest(temp.join(",")).tagName.toLowerCase():null}}return!1}},{key:"_setOptions",value:function _setOptions(){this.set("options",this._getPickerOptions(data,this.allowNull))}},{key:"_pickerChange",value:function _pickerChange(e){var val=this.$.button.value;e.preventDefault();if(null!==val&&this.selection!==void 0&&null!==this.selection){this.commandVal=this.$.button.value;if(this.command="formatBlock"){this.doTextOperation()}else if(this.command="insertNode"){var node=!this.wrap?document.createTextNode(val):document.createElement(val);this.selection.extractContents();this.selection.insertNode(node)}if(!this.wrap)this.dispatchEvent(new CustomEvent("deselect",{detail:this}))}}},{key:"_getOptionData",value:function _getOptionData(option){return{alt:option.alt,icon:option.icon,style:option.style,value:option.value}}},{key:"_getPickerOptions",value:function _getPickerOptions(){for(var _Mathsqrt=Math.sqrt,options=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[],allowNull=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!1,items=!1===allowNull?[]:[[{alt:"null",value:null}]],h=!1===allowNull?0:1,cols=16>_Mathsqrt(options.length+h)?Math.ceil(_Mathsqrt(options.length+h)):15,i=0;i<options.length;i++){var j=h+i,row=Math.floor(j/cols),_data=this._getOptionData(options[i]);if(items[row]===void 0||null===items[row])items[row]=[];items[row][j-row*cols]=_data}return items}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_15648480360b11e986ba19c79f14baa4())}},{key:"properties",get:function get(){return{allowNull:{name:"allowNull",type:"Boolean",value:!1},command:{name:"command",type:"String",value:"insertHTML",readOnly:!0},options:{name:"options",type:"Array",value:[],notify:!0},titleAsHtml:{name:"titleAsHtml",type:"Boolean",value:!1}}}},{key:"tag",get:function get(){return"rich-text-editor-picker"}}]);return RichTextEditorPicker}(_richTextEditorButton.RichTextEditorButton);_exports.RichTextEditorPicker=RichTextEditorPicker;window.customElements.define(RichTextEditorPicker.tag,RichTextEditorPicker)});