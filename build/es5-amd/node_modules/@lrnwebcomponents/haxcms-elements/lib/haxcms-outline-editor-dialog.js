define(["../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/polymer/lib/utils/async.js","../../../@polymer/paper-button/paper-button.js","../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../json-editor/json-editor.js"],function(_polymerLegacy,async){"use strict";async=babelHelpers.interopRequireWildcard(async);function _templateObject_89a956a01da011e99f27bd1c30442504(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        height: 50vh;\n      }\n      .buttons {\n        position: absolute;\n        bottom: 0;\n        z-index: 1000000;\n        background-color: var(--simple-modal-titlebar-background, #ddd);\n        left: 0;\n        right: 0;\n      }\n    </style>\n    <paper-dialog-scrollable>\n      <json-editor\n        id=\"editor\"\n        label=\"Outline data\"\n        value=\"[[manifestItems]]\"\n      ></json-editor>\n    </paper-dialog-scrollable>\n    <div class=\"buttons\">\n      <paper-button dialog-confirm on-tap=\"_saveTap\">Save</paper-button>\n      <paper-button dialog-dismiss>Cancel</paper-button>\n    </div>\n  "]);_templateObject_89a956a01da011e99f27bd1c30442504=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_89a956a01da011e99f27bd1c30442504()),is:"haxcms-outline-editor-dialog",properties:{opened:{type:Boolean,notify:!0},manifest:{type:Object,notify:!0},manifestItems:{type:String}},ready:function ready(){var _this=this;document.body.addEventListener("json-outline-schema-changed",this._manifestChanged.bind(this));this.$.editor.addEventListener("current-data-changed",function(e){if(e.detail.value){var outline=window.JSONOutlineSchema.requestAvailability();_this.set("manifest.items",e.detail.value);_this.notifyPath("manifest.items.*");outline.items=e.detail.value;_this.manifestItems=JSON.stringify(e.detail.value,null,2)}})},attached:function attached(){var _this2=this;async.microTask.run(function(){if(babelHelpers.typeof(window.cmsSiteEditor.jsonOutlineSchema)!=="undefined"){_this2.set("manifest",window.cmsSiteEditor.jsonOutlineSchema);_this2.notifyPath("manifest.*");_this2.manifestItems=JSON.stringify(_this2.manifest.items,null,2)}})},detached:function detached(){document.body.removeEventListener("json-outline-schema-changed",this._manifestChanged.bind(this))},_manifestChanged:function _manifestChanged(e){if(babelHelpers.typeof(e.detail.items)!=="undefined"){this.set("manifest",[]);this.set("manifest",e.detail);this.notifyPath("manifest.*");this.manifestItems=JSON.stringify(this.manifest.items,null,2)}},_saveTap:function _saveTap(){this.fire("haxcms-save-outline",this.manifest.items)}})});