define(["exports","./haxcms-site-store.js","../../../mobx/lib/mobx.module.js"],function(_exports,_haxcmsSiteStore,_mobxModule){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.HAXCMSThemeWiring=void 0;var HAXCMSThemeWiring=function(){function HAXCMSThemeWiring(element){var _this=this,load=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;babelHelpers.classCallCheck(this,HAXCMSThemeWiring);if(load){document.body.addEventListener("haxcms-edit-mode-changed",this._globalEditChanged.bind(element));document.body.addEventListener("json-outline-schema-changed",this._manifestUpdate.bind(element));document.body.addEventListener("haxcms-active-item-changed",this._activeItemUpdate.bind(element));document.body.addEventListener("haxcms-trigger-update",this._triggerUpdate.bind(element));(0,_mobxModule.autorun)(function(){_this._manifestUpdate({detail:(0,_mobxModule.toJS)(_haxcmsSiteStore.store.routerManifest)})})}}babelHelpers.createClass(HAXCMSThemeWiring,[{key:"connect",value:function connect(element,injector){if(babelHelpers.typeof(window.cmsSiteEditor)!=="undefined"){window.cmsSiteEditor.requestAvailability(element,injector)}}},{key:"disconnect",value:function disconnect(element){document.body.removeEventListener("haxcms-active-item-changed",this._activeItemUpdate.bind(element));document.body.removeEventListener("json-outline-schema-changed",this._manifestUpdate.bind(element));document.body.removeEventListener("haxcms-edit-mode-changed",this._globalEditChanged.bind(element));document.body.removeEventListener("haxcms-trigger-update",this._triggerUpdate.bind(element))}},{key:"_globalEditChanged",value:function _globalEditChanged(e){this.editMode=e.detail}},{key:"_activeItemUpdate",value:function _activeItemUpdate(e){var newValue=e.detail;if(newValue&&babelHelpers.typeof(newValue.id)!=="undefined"){var evt=new CustomEvent("json-outline-schema-active-item-changed",{bubbles:!0,cancelable:!0,detail:newValue});this.dispatchEvent(evt);if(babelHelpers.typeof(newValue.title)!=="undefined"){document.title=newValue.title+" - "+newValue.title}else{document.title=newValue.title+" - "+newValue.description}}else{document.title=newValue.title+" - "+newValue.description}}},{key:"_triggerUpdate",value:function _triggerUpdate(){var evt=new CustomEvent("json-outline-schema-active-item-changed",{bubbles:!0,cancelable:!0,detail:{}});this.dispatchEvent(evt)}},{key:"_manifestUpdate",value:function _manifestUpdate(e){var newValue=e.detail;if(babelHelpers.typeof(newValue.title)!=="undefined"){document.title=newValue.title+" - "+newValue.description}if(babelHelpers.typeof(newValue.metadata)!=="undefined"&&babelHelpers.typeof(newValue.metadata.cssVariable)!=="undefined"){var ary=newValue.metadata.cssVariable.replace("--simple-colors-default-theme-","").split("-");ary.pop();this.accentColor=ary.join("-");document.body.style.setProperty("--haxcms-color",newValue.metadata.hexCode)}}}]);return HAXCMSThemeWiring}();_exports.HAXCMSThemeWiring=HAXCMSThemeWiring});