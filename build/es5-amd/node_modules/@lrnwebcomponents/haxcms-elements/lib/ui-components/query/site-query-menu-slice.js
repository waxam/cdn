define(["exports","../../../../../@polymer/polymer/polymer-element.js","../../core/haxcms-site-store.js","../../../../../mobx/lib/mobx.module.js"],function(_exports,_polymerElement,_haxcmsSiteStore,_mobxModule){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SiteQueryMenuSlice=void 0;var SiteQueryMenuSlice=function(_PolymerElement){babelHelpers.inherits(SiteQueryMenuSlice,_PolymerElement);function SiteQueryMenuSlice(){babelHelpers.classCallCheck(this,SiteQueryMenuSlice);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SiteQueryMenuSlice).apply(this,arguments))}babelHelpers.createClass(SiteQueryMenuSlice,[{key:"_computeItems",value:function _computeItems(start,end,parent,dynamicMethodology,_routerManifest){var _this=this;if(_routerManifest){var _ret=function(){var items=[],data=[],tmpItem;_routerManifest.items.forEach(function(element){if(!element.parent){items.push(element)}});switch(dynamicMethodology){case"parent":tmpItem=_routerManifest.items.find(function(d){return parent===d.id});if(tmpItem){parent=tmpItem.parent}break;case"ancestor":tmpItem=_routerManifest.items.find(function(d){return parent===d.id});while(tmpItem&&null!=tmpItem.parent){tmpItem=_routerManifest.items.find(function(i){return i.id==tmpItem.parent})}if(tmpItem){parent=tmpItem.id}break;}items.forEach(function(item){_this._setChildren(item,_routerManifest.items)});items.forEach(function(item){_this._spiderChildren(item,data,start,end,parent,!1)});return{v:data}}();if("object"===babelHelpers.typeof(_ret))return _ret.v}}},{key:"_spiderChildren",value:function _spiderChildren(item,data,start,end,parent,parentFound){var _this2=this;if(item.id===parent||parentFound){if(!parentFound){parentFound=!0;if(!this.noDynamicLevel&&item.indent>=start){start+=item.indent;end+=item.indent}}if(item.indent>=start&&item.indent<=end){data.push(item)}if(0<item.children.length){item.children.forEach(function(child){_this2._spiderChildren(child,data,start,end,parent,parentFound)})}}else{if(0<item.children.length){item.children.forEach(function(child){_this2._spiderChildren(child,data,start,end,parent,parentFound)})}}}},{key:"_setChildren",value:function _setChildren(item,data){var _this3=this,children=data.filter(function(d){return item.id===d.parent});item.children=children;if(0<item.children.length){item.children.forEach(function(child){_this3._setChildren(child,data)})}}},{key:"connectedCallback",value:function connectedCallback(){var _this4=this;babelHelpers.get(babelHelpers.getPrototypeOf(SiteQueryMenuSlice.prototype),"connectedCallback",this).call(this);this.__disposer=(0,_mobxModule.autorun)(function(){_this4._routerManifest=Object.assign({},(0,_mobxModule.toJS)(_haxcmsSiteStore.store.routerManifest))});if(!this.fixedId){this.__disposer2=(0,_mobxModule.autorun)(function(){_this4.parent=(0,_mobxModule.toJS)(_haxcmsSiteStore.store.activeId)})}}},{key:"disconnectedCallback",value:function disconnectedCallback(){this.__disposer();if(!this.fixedId){this.__disposer2()}babelHelpers.get(babelHelpers.getPrototypeOf(SiteQueryMenuSlice.prototype),"disconnectedCallback",this).call(this)}}],[{key:"tag",get:function get(){return"site-query-menu-slice"}},{key:"properties",get:function get(){return{start:{type:Number,value:1},end:{type:Number,value:1e3},parent:{type:String},dynamicMethodology:{type:String,value:"active"},fixedId:{type:Boolean,value:!1},noDynamicLevel:{type:Boolean,value:!1},result:{type:Array,notify:!0,computed:"_computeItems(start, end, parent, dynamicMethodology, _routerManifest)"},_routerManifest:{type:Object}}}}]);return SiteQueryMenuSlice}(_polymerElement.PolymerElement);_exports.SiteQueryMenuSlice=SiteQueryMenuSlice;window.customElements.define(SiteQueryMenuSlice.tag,SiteQueryMenuSlice)});