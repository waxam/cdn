define(["exports","../../../../../@polymer/polymer/polymer-element.js","../../core/haxcms-site-store.js","../../../../../mobx/lib/mobx.module.js","../../../../../@polymer/polymer/lib/elements/dom-repeat.js","../query/site-query.js","../../../../../@polymer/iron-image/iron-image.js"],function(_exports,_polymerElement,_haxcmsSiteStore,_mobxModule){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SiteRecentContentBlock=void 0;function _templateObject_fa96194054b711e9ae77fd2904542570(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: block;\n          background-color: #fff;\n          box-shadow: 0 1px 2px #dcdcdc;\n          padding: 10px;\n          margin-top: 10px;\n          --site-recent-content-block-header-color: #363533;\n          --site-recent-content-block-item-link-color: #363533;\n          --site-recent-content-block-active-color: var(\n            --haxcms-color,\n            #e2801e\n          );\n        }\n        .header h3 {\n          font-size: 26px;\n          margin: 0 0 10px;\n          color: var(--site-recent-content-block-header-color);\n        }\n        .item-wrap {\n          display: flex;\n          align-items: center;\n          border-bottom: solid 1px #dcdcdc;\n          padding-bottom: 8px;\n          padding-top: 8px;\n          @apply --site-recent-content-block-item-wrap;\n        }\n        .item-heading a {\n          text-decoration: none;\n          color: var(--site-recent-content-block-item-link-color);\n          font-size: 16px;\n          @apply --site-recent-content-block-item-link;\n        }\n        .item-heading a:hover,\n        .item-heading a:focus,\n        .item-heading a:active {\n          @apply --site-recent-content-block-item-link-hover;\n        }\n        .active {\n          color: ;\n          border-left: solid 4px var(--site-recent-content-block-active-color);\n          background-color: whitesmoke;\n          padding-left: 5px;\n          @apply --site-recent-content-block-item-active;\n        }\n        .image-wrapper {\n          display: flex;\n          margin-right: 10px;\n          @apply --site-recent-content-block-image-wrapper;\n        }\n        .image-wrapper iron-image {\n          height: 50px;\n          width: 50px;\n          @apply --site-recent-content-block-image;\n        }\n      </style>\n      <aside>\n        <div class=\"header\">\n          <h3>[[title]]</h3>\n        </div>\n        <site-query\n          result=\"{{__items}}\"\n          sort=\"[[sort]]\"\n          conditions=\"[[conditions]]\"\n          limit=\"[[limit]]\"\n          start-index=\"[[startIndex]]\"\n        >\n        </site-query>\n        <dom-repeat items=\"[[__items]]\" mutable-data>\n          <template>\n            <div class=\"item-wrap\" data-id$=\"[[item.id]]\">\n              <div class=\"image-wrapper\">\n                <iron-image\n                  sizing=\"cover\"\n                  src=\"[[item.metadata.fields.image]]\"\n                ></iron-image>\n              </div>\n              <div class=\"item-heading\">\n                <a href$=\"[[item.location]]\">[[item.title]]</a>\n              </div>\n            </div>\n          </template>\n        </dom-repeat>\n      </aside>\n    "],["\n      <style>\n        :host {\n          display: block;\n          background-color: #fff;\n          box-shadow: 0 1px 2px #dcdcdc;\n          padding: 10px;\n          margin-top: 10px;\n          --site-recent-content-block-header-color: #363533;\n          --site-recent-content-block-item-link-color: #363533;\n          --site-recent-content-block-active-color: var(\n            --haxcms-color,\n            #e2801e\n          );\n        }\n        .header h3 {\n          font-size: 26px;\n          margin: 0 0 10px;\n          color: var(--site-recent-content-block-header-color);\n        }\n        .item-wrap {\n          display: flex;\n          align-items: center;\n          border-bottom: solid 1px #dcdcdc;\n          padding-bottom: 8px;\n          padding-top: 8px;\n          @apply --site-recent-content-block-item-wrap;\n        }\n        .item-heading a {\n          text-decoration: none;\n          color: var(--site-recent-content-block-item-link-color);\n          font-size: 16px;\n          @apply --site-recent-content-block-item-link;\n        }\n        .item-heading a:hover,\n        .item-heading a:focus,\n        .item-heading a:active {\n          @apply --site-recent-content-block-item-link-hover;\n        }\n        .active {\n          color: ;\n          border-left: solid 4px var(--site-recent-content-block-active-color);\n          background-color: whitesmoke;\n          padding-left: 5px;\n          @apply --site-recent-content-block-item-active;\n        }\n        .image-wrapper {\n          display: flex;\n          margin-right: 10px;\n          @apply --site-recent-content-block-image-wrapper;\n        }\n        .image-wrapper iron-image {\n          height: 50px;\n          width: 50px;\n          @apply --site-recent-content-block-image;\n        }\n      </style>\n      <aside>\n        <div class=\"header\">\n          <h3>[[title]]</h3>\n        </div>\n        <site-query\n          result=\"{{__items}}\"\n          sort=\"[[sort]]\"\n          conditions=\"[[conditions]]\"\n          limit=\"[[limit]]\"\n          start-index=\"[[startIndex]]\"\n        >\n        </site-query>\n        <dom-repeat items=\"[[__items]]\" mutable-data>\n          <template>\n            <div class=\"item-wrap\" data-id$=\"[[item.id]]\">\n              <div class=\"image-wrapper\">\n                <iron-image\n                  sizing=\"cover\"\n                  src=\"[[item.metadata.fields.image]]\"\n                ></iron-image>\n              </div>\n              <div class=\"item-heading\">\n                <a href\\$=\"[[item.location]]\">[[item.title]]</a>\n              </div>\n            </div>\n          </template>\n        </dom-repeat>\n      </aside>\n    "]);_templateObject_fa96194054b711e9ae77fd2904542570=function(){return data};return data}var SiteRecentContentBlock=function(_PolymerElement){babelHelpers.inherits(SiteRecentContentBlock,_PolymerElement);function SiteRecentContentBlock(){babelHelpers.classCallCheck(this,SiteRecentContentBlock);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SiteRecentContentBlock).apply(this,arguments))}babelHelpers.createClass(SiteRecentContentBlock,[{key:"_activeIdChanged",value:function _activeIdChanged(newValue){var _this=this;if(newValue){var el=null;if(this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")){el=this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")}else{(function(){var tmpItem=_haxcmsSiteStore.store.manifest.items.find(function(i){return i.id==newValue});while(null===el&&tmpItem&&null!=tmpItem.parent){tmpItem=_haxcmsSiteStore.store.manifest.items.find(function(i){return i.id==tmpItem.parent});if(tmpItem&&_this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")){el=_this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")}}})()}if(this._prevEl){this._prevEl.classList.remove("active")}if(el){el.classList.add("active");this._prevEl=el}}}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;babelHelpers.get(babelHelpers.getPrototypeOf(SiteRecentContentBlock.prototype),"connectedCallback",this).call(this);setTimeout(function(){_this2.__disposer=(0,_mobxModule.autorun)(function(){_this2.activeId=(0,_mobxModule.toJS)(_haxcmsSiteStore.store.activeId)})},50)}},{key:"disconnectedCallback",value:function disconnectedCallback(){if(this.__disposer){this.__disposer()}babelHelpers.get(babelHelpers.getPrototypeOf(SiteRecentContentBlock.prototype),"disconnectedCallback",this).call(this)}}],[{key:"tag",get:function get(){return"site-recent-content-block"}},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_fa96194054b711e9ae77fd2904542570())}},{key:"properties",get:function get(){return{limit:{type:Number,value:10},startIndex:{type:Number,value:0},sort:{type:Object,value:{"metadata.created":"ASC"}},conditions:{type:Object,value:{}},title:{type:String,value:"Recent content"},activeId:{type:String,observer:"_activeIdChanged"}}}}]);return SiteRecentContentBlock}(_polymerElement.PolymerElement);_exports.SiteRecentContentBlock=SiteRecentContentBlock;window.customElements.define(SiteRecentContentBlock.tag,SiteRecentContentBlock)});