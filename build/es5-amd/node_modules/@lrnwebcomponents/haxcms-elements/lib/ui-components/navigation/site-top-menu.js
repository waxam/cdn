define(["exports","../../../../../@polymer/polymer/polymer-element.js","../../core/haxcms-site-store.js","../../../../../mobx/lib/mobx.module.js","../query/site-query.js","../../../../../@polymer/polymer/lib/elements/dom-repeat.js"],function(_exports,_polymerElement,_haxcmsSiteStore,_mobxModule){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SiteTopMenu=void 0;function _templateObject_0f392190490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style>\n        :host {\n          display: block;\n          --site-top-menu-bg: var(--haxcms-color, #ffffff);\n          --site-top-menu-indicator-arrow: 6px;\n        }\n        :host([sticky]) {\n          position: fixed;\n          top: 0;\n          left: 0;\n          right: 0;\n          z-index: 1000;\n          @apply --site-top-menu-sticky;\n        }\n        .wrapper {\n          display: flex;\n          justify-content: center;\n          justify-items: space-evenly;\n          background-color: var(--site-top-menu-bg);\n          @apply --site-top-menu-wrapper;\n        }\n        :host .wrapper ::slotted(div.spacing) {\n          display: inline-flex;\n          @apply --site-top-menu-spacing;\n        }\n        .spacing {\n          display: inline-flex;\n          @apply --site-top-menu-spacing;\n        }\n        .link {\n          color: var(--site-top-menu-link-color, #444444);\n          @apply --site-top-menu-link;\n        }\n        paper-button {\n          text-transform: unset;\n          min-width: unset;\n          @apply --site-top-menu-button;\n        }\n        .active {\n          color: var(--site-top-menu-link-active-color, #000000);\n          @apply --site-top-menu-link-active;\n        }\n        #indicator {\n          transition: 0.4s ease-in-out all;\n          transition-delay: 0.2s;\n          position: relative;\n          width: 0;\n          height: 0;\n          visibility: hidden;\n        }\n        :host([indicator=\"line\"]) #indicator {\n          border-bottom: 2px solid var(--site-top-menu-indicator-color, #000000);\n          @apply --site-top-menu-indicator;\n        }\n        :host([indicator=\"arrow\"]) #indicator {\n          border-left: var(--site-top-menu-indicator-arrow) solid transparent;\n          border-right: var(--site-top-menu-indicator-arrow) solid transparent;\n          border-bottom: var(--site-top-menu-indicator-arrow) solid\n            var(--site-top-menu-indicator-color, #000000);\n          @apply --site-top-menu-indicator;\n        }\n        #indicator.activated {\n          visibility: visible;\n          position: absolute;\n          @apply --site-top-menu-indicator-activated;\n        }\n      </style>\n      <div class=\"wrapper\">\n        <slot name=\"prefix\"></slot>\n        <site-query\n          result=\"{{__items}}\"\n          sort='{\"order\": \"ASC\"}'\n          conditions='{\"parent\": null}'\n        ></site-query>\n        <dom-repeat items=\"[[__items]]\" mutable-data>\n          <template>\n            <div class=\"spacing\">\n              <a\n                data-id$=\"[[item.id]]\"\n                class=\"link\"\n                tabindex=\"-1\"\n                href$=\"[[item.location]]\"\n                ><paper-button noink=\"[[noink]]\"\n                  >[[item.title]]</paper-button\n                ></a\n              >\n            </div>\n          </template>\n        </dom-repeat>\n        <slot name=\"suffix\"></slot>\n      </div>\n      <div id=\"indicator\"></div>\n    "]);_templateObject_0f392190490411e990ee3fd35bb8725b=function(){return data};return data}var SiteTopMenu=function(_PolymerElement){babelHelpers.inherits(SiteTopMenu,_PolymerElement);function SiteTopMenu(){babelHelpers.classCallCheck(this,SiteTopMenu);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SiteTopMenu).apply(this,arguments))}babelHelpers.createClass(SiteTopMenu,[{key:"_activeIdChanged",value:function _activeIdChanged(newValue){var _this=this;if("none"!=this.indicator){if(newValue){this.$.indicator.classList.add("activated");var el=null;if(this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")){el=this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")}else{(function(){var tmpItem=_this.manifest.items.find(function(i){return i.id==newValue});while(null===el&&tmpItem&&null!=tmpItem.parent){tmpItem=_this.manifest.items.find(function(i){return i.id==tmpItem.parent});if(tmpItem&&_this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")){el=_this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")}}})()}if(this._prevEl){this._prevEl.classList.remove("active")}if(el){el.classList.add("active");this._prevEl=el;if("arrow"==this.indicator){this.$.indicator.style.left=el.offsetLeft+el.offsetWidth/2-this.arrowSize+"px";this.$.indicator.style.top=el.offsetTop+el.offsetHeight-this.arrowSize+"px"}else{this.$.indicator.style.left=el.offsetLeft+"px";this.$.indicator.style.top=el.offsetTop+el.offsetHeight+"px";this.$.indicator.style.width=el.offsetWidth+"px"}}}else{this.$.indicator.classList.remove("activated")}}}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;babelHelpers.get(babelHelpers.getPrototypeOf(SiteTopMenu.prototype),"connectedCallback",this).call(this);this.__disposer=(0,_mobxModule.autorun)(function(){_this2.manifest=(0,_mobxModule.toJS)(_haxcmsSiteStore.store.manifest)});setTimeout(function(){_this2.__disposer2=(0,_mobxModule.autorun)(function(){_this2.activeId=(0,_mobxModule.toJS)(_haxcmsSiteStore.store.activeId)})},50);window.addEventListener("resize",function(){_this2._activeIdChanged(_this2.activeId)},!0)}},{key:"disconnectedCallback",value:function disconnectedCallback(){var _this3=this;babelHelpers.get(babelHelpers.getPrototypeOf(SiteTopMenu.prototype),"disconnectedCallback",this).call(this);this.__disposer();if(this.__disposer2){this.__disposer2()}window.removeEventListener("resize",function(){_this3._activeIdChanged(_this3.activeId)},!0)}}],[{key:"tag",get:function get(){return"site-top-menu"}},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_0f392190490411e990ee3fd35bb8725b())}},{key:"properties",get:function get(){return{manifest:{type:Object},activeId:{type:String,observer:"_activeIdChanged"},sticky:{type:Boolean,reflectToAttribute:!0,value:!1},indicator:{type:String,reflectToAttribute:!0,value:"line"},noink:{type:Boolean,reflectToAttribute:!0,value:!1},arrowSize:{type:Number,value:6}}}}]);return SiteTopMenu}(_polymerElement.PolymerElement);_exports.SiteTopMenu=SiteTopMenu;window.customElements.define(SiteTopMenu.tag,SiteTopMenu)});