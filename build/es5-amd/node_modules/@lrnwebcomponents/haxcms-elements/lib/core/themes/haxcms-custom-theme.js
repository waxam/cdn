define(["exports","../../../../../@polymer/polymer/polymer-element.js","../../../../../@polymer/polymer/lib/utils/async.js","../../../../../@polymer/polymer/lib/mixins/element-mixin.js","../../../../../@polymer/polymer/lib/utils/style-gather.js","../HAXCMSThemeWiring.js","../../ui-components/templates/basic-template.js","../../../../simple-colors/simple-colors.js"],function(_exports,_polymerElement,_async,_elementMixin,_styleGather,_HAXCMSThemeWiring){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.HAXCMSCustomTheme=void 0;function _templateObject_5534c9704d8611e9a2768d85e834e91f(){var data=babelHelpers.taggedTemplateLiteral(["\n      <slot></slot>\n    "]);_templateObject_5534c9704d8611e9a2768d85e834e91f=function(){return data};return data}var HAXCMSCustomTheme=function(_HAXCMSTheme){babelHelpers.inherits(HAXCMSCustomTheme,_HAXCMSTheme);babelHelpers.createClass(HAXCMSCustomTheme,[{key:"ready",value:function ready(){this.__counter=0;babelHelpers.get(babelHelpers.getPrototypeOf(HAXCMSCustomTheme.prototype),"ready",this).call(this);this.getCSS();this.getHTML()}},{key:"getCSS",value:function(){var _getCSS=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function _callee(){var _this2=this;return regeneratorRuntime.wrap(function(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch("theme/theme.css").then(function(response){return response.text()}).then(function(response){var evt=new CustomEvent("haxcms-custom-theme-template-ready",{bubbles:!0,cancelable:!1,detail:{css:response}});_this2.dispatchEvent(evt);return response});case 2:return _context.abrupt("return",_context.sent);case 3:case"end":return _context.stop();}}},_callee,this)}));return function getCSS(){return _getCSS.apply(this,arguments)}}()},{key:"getHTML",value:function(){var _getHTML=babelHelpers.asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var _this3=this;return regeneratorRuntime.wrap(function(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch("theme/theme.html").then(function(response){return response.text()}).then(function(response){var evt=new CustomEvent("haxcms-custom-theme-template-ready",{bubbles:!0,cancelable:!1,detail:{html:response}});_this3.dispatchEvent(evt);return response});case 2:return _context2.abrupt("return",_context2.sent);case 3:case"end":return _context2.stop();}}},_callee2,this)}));return function getHTML(){return _getHTML.apply(this,arguments)}}()}]);function HAXCMSCustomTheme(){var _this;babelHelpers.classCallCheck(this,HAXCMSCustomTheme);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(HAXCMSCustomTheme).call(this));window.addEventListener("haxcms-custom-theme-template-ready",_this.templateReady.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(_this))));return _this}babelHelpers.createClass(HAXCMSCustomTheme,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(HAXCMSCustomTheme.prototype),"connectedCallback",this).call(this)}},{key:"templateReady",value:function templateReady(e){var _this4=this;this.__counter++;if(e.detail.css){this._css=e.detail.css}if(e.detail.html){this._html=e.detail.html}if(2===this.__counter){var t=document.createElement("template");t.innerHTML="\n      <style include=\"simple-colors\">\n        /**\n         * Hide the slotted content during edit mode. This must be here to work.\n         */\n        :host([edit-mode]) #slot {\n          display: none;\n        }\n        ".concat(this._css,"\n      </style>\n      ").concat(this._html);var styles=(0,_styleGather.stylesFromTemplate)(t);while(this.shadowRoot.firstChild){this.shadowRoot.removeChild(this.shadowRoot.firstChild)}for(var i in styles){t.innerHTML=styles[i].outerHTML+t.innerHTML}this.__instance=this._stampTemplate(t);this.shadowRoot.appendChild(this.__instance);_async.microTask.run(function(){setTimeout(function(){_this4.updateStyles();(0,_elementMixin.updateStyles)()},50)})}}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_5534c9704d8611e9a2768d85e834e91f())}}]);return HAXCMSCustomTheme}((0,_HAXCMSThemeWiring.HAXCMSTheme)(_polymerElement.PolymerElement));_exports.HAXCMSCustomTheme=HAXCMSCustomTheme;window.customElements.define("haxcms-custom-theme",HAXCMSCustomTheme)});