define(["exports","meta","require","../../../../../@polymer/polymer/polymer-element.js","../../../../jwt-login/jwt-login.js","../../../../../@polymer/polymer/lib/utils/resolve-url.js"],function(_exports,meta,_require,_polymerElement,_jwtLogin,_resolveUrl){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.HAXCMSBackendPHP=void 0;meta=babelHelpers.interopRequireWildcard(meta);_require=babelHelpers.interopRequireWildcard(_require);function _templateObject_da3cb23054b711e9ae77fd2904542570(){var data=babelHelpers.taggedTemplateLiteral(["\n      <jwt-login\n        id=\"jwt\"\n        url=\"[[jwtLoginLocation]]\"\n        url-logout=\"[[jwtLogoutLocation]]\"\n        jwt=\"{{jwt}}\"\n      ></jwt-login>\n    "]);_templateObject_da3cb23054b711e9ae77fd2904542570=function(){return data};return data}var HAXCMSBackendPHP=function(_PolymerElement){babelHelpers.inherits(HAXCMSBackendPHP,_PolymerElement);babelHelpers.createClass(HAXCMSBackendPHP,null,[{key:"tag",get:function get(){return"haxcms-backend-php"}},{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_da3cb23054b711e9ae77fd2904542570())}},{key:"properties",get:function get(){return{jwtLoginLocation:{type:String,value:function value(){if(window.appSettings){return window.appSettings.login}}},jwtLogoutLocation:{type:String,value:function value(){if(window.appSettings){return window.appSettings.logout}}},jwt:{type:String}}}}]);function HAXCMSBackendPHP(){var _this;babelHelpers.classCallCheck(this,HAXCMSBackendPHP);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(HAXCMSBackendPHP).call(this));document.body.addEventListener("jwt-token",_this._jwtTokenFired.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(_this))));return _this}babelHelpers.createClass(HAXCMSBackendPHP,[{key:"disconnectedCallback",value:function disconnectedCallback(){document.body.removeEventListener("jwt-token",this._jwtTokenFired.bind(this));babelHelpers.get(babelHelpers.getPrototypeOf(HAXCMSBackendPHP.prototype),"disconnectedCallback",this).call(this)}},{key:"_jwtTokenFired",value:function _jwtTokenFired(e){this.jwt=e.detail}},{key:"connectedCallback",value:function connectedCallback(){var _this2=this;babelHelpers.get(babelHelpers.getPrototypeOf(HAXCMSBackendPHP.prototype),"connectedCallback",this).call(this);if(null!=this.jwt&&"string"==typeof this.jwt){try{new Promise(function(res,rej){return _require.default([(0,_resolveUrl.pathFromUrl)(decodeURIComponent(meta.url))+"../haxcms-site-editor.js"],res,rej)}).then(function(){var haxCmsSiteEditorElement=document.createElement("haxcms-site-editor");haxCmsSiteEditorElement.jwt=_this2.jwt;haxCmsSiteEditorElement.saveNodePath=window.appSettings.saveNodePath;haxCmsSiteEditorElement.saveManifestPath=window.appSettings.saveManifestPath;haxCmsSiteEditorElement.saveOutlinePath=window.appSettings.saveOutlinePath;haxCmsSiteEditorElement.getNodeFieldsPath=window.appSettings.getNodeFieldsPath;haxCmsSiteEditorElement.getFieldsToken=window.appSettings.getFieldsToken;haxCmsSiteEditorElement.publishSitePath=window.appSettings.publishSitePath;haxCmsSiteEditorElement.createNodePath=window.appSettings.createNodePath;haxCmsSiteEditorElement.deleteNodePath=window.appSettings.deleteNodePath;haxCmsSiteEditorElement.appStore=window.appSettings.appStore;window.cmsSiteEditor.instance.haxCmsSiteEditorElement=haxCmsSiteEditorElement;window.cmsSiteEditor.instance.appendTarget.appendChild(haxCmsSiteEditorElement)},function(){})}catch(err){}}}}]);return HAXCMSBackendPHP}(_polymerElement.PolymerElement);_exports.HAXCMSBackendPHP=HAXCMSBackendPHP;window.customElements.define(HAXCMSBackendPHP.tag,HAXCMSBackendPHP)});