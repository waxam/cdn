define(["exports","../../../lit-element/lit-element.js","./simple-fields-lite.js"],function(_exports,_litElement,_simpleFieldsLite){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.SimpleFieldsFormLite=void 0;function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1,source;i<arguments.length;i++){source=null!=arguments[i]?arguments[i]:{};if(i%2){ownKeys(Object(source),!0).forEach(function(key){babelHelpers.defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _templateObject2_e84f9d407a9c11ea8ed6ed8c9eef0ab1(){var data=babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n      "]);_templateObject2_e84f9d407a9c11ea8ed6ed8c9eef0ab1=function _templateObject2_e84f9d407a9c11ea8ed6ed8c9eef0ab1(){return data};return data}function _templateObject_e84f9d407a9c11ea8ed6ed8c9eef0ab1(){var data=babelHelpers.taggedTemplateLiteral(["\n      <form>\n        <slot name=\"before\"></slot>\n        <simple-fields-lite id=\"sf\" autofocus></simple-fields-lite>\n        <slot></slot>\n      </form>\n    "]);_templateObject_e84f9d407a9c11ea8ed6ed8c9eef0ab1=function _templateObject_e84f9d407a9c11ea8ed6ed8c9eef0ab1(){return data};return data}/**
 * `simple-fields-form-lite`
 * binding and submission capabilities on top of simple-fields-lite
 *
 * @group simple-fields
 * @element simple-fields-form-lite
 * @extends simple-fields-lite
 * @demo ./demo/form-lite.html
 */var SimpleFieldsFormLite=/*#__PURE__*/function(_SimpleFieldsLite){babelHelpers.inherits(SimpleFieldsFormLite,_SimpleFieldsLite);babelHelpers.createClass(SimpleFieldsFormLite,[{key:"render",// render function
value:function render(){return(0,_litElement.html)(_templateObject_e84f9d407a9c11ea8ed6ed8c9eef0ab1())}/**
   * first update hook; also implies default settings
   */},{key:"firstUpdated",value:function firstUpdated(changedProperties){var _this2=this;changedProperties.forEach(function(oldValue,propName){// request form when it changes
if("loadEndpoint"===propName&&_this2.autoload){_this2.loadData()}})}},{key:"updated",value:function updated(changedProperties){var _this3=this;changedProperties.forEach(function(oldValue,propName){if(_this3.autoload&&!_this3.loadResponse&&!_this3.loading){if("loadEndpoint"===propName||"autoload"===propName){_this3.loadData()}}// we have response data from an end point this should create the form
if("loadResponse"===propName&&_this3.loadResponse.data){_this3._applyLoadedData();/**
         * fires event for things to react to about the response
         * @event response
         */_this3.dispatchEvent(new CustomEvent("response",{bubbles:!0,composed:!0,cancelable:!1,detail:_this3.loadResponse}))}})}/**
   * applies loaded datda to simple-fields-lite
   *
   * @memberof SimpleFieldsFormLite
   */},{key:"_applyLoadedData",value:function _applyLoadedData(){var sf=this.shadowRoot.querySelector("#sf");if(this.loadResponse.data.schema){sf.schema=this.loadResponse.data.schema}if(this.loadResponse.data.value)sf.value=this.loadResponse.data.value}/**
   * load data from the end point
   */},{key:"loadData",value:function loadData(){var _this4=this;this.loading=!0;this.fetchData(this.loadEndpoint,this.method,this.headers,this.body).then(function(data){_this4.loading=!1;_this4.loadResponse=data;/**
       * fires event when forma data is loaded
       * @event simple-fields-form-data-loaded
       */_this4.dispatchEvent(new CustomEvent("simple-fields-form-data-loaded",{detail:{value:data}}))})}},{key:"fetchData",value:function(){var _fetchData=babelHelpers.asyncToGenerator(/*#__PURE__*/regeneratorRuntime.mark(function _callee(path,method,headers,body){var response,data;return regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:response={};if(!("GET"==method)){_context.next=7;break}_context.next=4;return fetch(path,{method:method,headers:headers});case 4:response=_context.sent;_context.next=10;break;case 7:_context.next=9;return fetch(path,{method:method,headers:headers,//make sure to serialize your JSON body
body:JSON.stringify(body)});case 9:response=_context.sent;case 10:_context.next=12;return response.json();case 12:data=_context.sent;return _context.abrupt("return",data);case 14:case"end":return _context.stop();}}},_callee)}));function fetchData(_x,_x2,_x3,_x4){return _fetchData.apply(this,arguments)}return fetchData}()}],[{key:"styles",get:function get(){return[(0,_litElement.css)(_templateObject2_e84f9d407a9c11ea8ed6ed8c9eef0ab1())]}},{key:"tag",get:function get(){return"simple-fields-form-lite"}}]);function SimpleFieldsFormLite(){var _this;babelHelpers.classCallCheck(this,SimpleFieldsFormLite);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(SimpleFieldsFormLite).call(this));_this.method="POST";_this.loading=!1;_this.autoload=!1;_this.headers={Accept:"application/json","Content-Type":"application/json"};_this.body={};return _this}/**
   * Submit form values if we have an end point, otherwise return value
   * of the fields as they currently exist.
   */babelHelpers.createClass(SimpleFieldsFormLite,[{key:"submit",value:function submit(){var sf=this.shadowRoot.querySelector("#sf");if(this.saveEndpoint){fetch(this.saveEndpoint,{method:this.method,headers:this.headers,//make sure to serialize your JSON body
body:JSON.stringify(sf.value)})}return sf.value}/**
   * Props down
   */}],[{key:"properties",get:function get(){return _objectSpread({},babelHelpers.get(babelHelpers.getPrototypeOf(SimpleFieldsFormLite),"properties",this),{autoload:{type:Boolean,reflect:!0},loading:{type:Boolean,reflect:!0},loadEndpoint:{type:String,attribute:"load-endpoint"},saveEndpoint:{type:String,attribute:"save-endpoint"},method:{type:String},headers:{type:Object},body:{type:Object},loadResponse:{type:Object}})}}]);return SimpleFieldsFormLite}(_simpleFieldsLite.SimpleFieldsLite);_exports.SimpleFieldsFormLite=SimpleFieldsFormLite;window.customElements.define(SimpleFieldsFormLite.tag,SimpleFieldsFormLite)});