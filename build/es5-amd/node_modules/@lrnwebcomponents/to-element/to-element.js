define(["exports"],function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.ToElement=void 0;var ToElement=function(_HTMLElement){babelHelpers.inherits(ToElement,_HTMLElement);babelHelpers.createClass(ToElement,[{key:"html",get:function get(){return"\n<style></style>\n<slot></slot>"}}],[{key:"properties",get:function get(){return{element:{name:"element",type:"Object",value:{}},name:{name:"name",type:"String",value:"new-element"},sourceUrl:{name:"sourceUrl",type:"String",value:""},fileTypes:{type:"Object",value:function value(){return{CSV:"text/csv",JSON:"text/json",PDF:"application/pdf",TXT:"text/plain"}}}}}},{key:"tag",get:function get(){return"to-element"}}]);function ToElement(){var _this,delayRender=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!1;babelHelpers.classCallCheck(this,ToElement);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ToElement).call(this));_this.tag=ToElement.tag;var obj=ToElement.properties;for(var p in obj){if(obj.hasOwnProperty(p)){if(_this.hasAttribute(p)){_this[p]=_this.getAttribute(p)}else{_this.setAttribute(p,obj[p].value);_this[p]=obj[p].value}}}_this._queue=[];_this.template=document.createElement("template");_this.attachShadow({mode:"open"});if(!delayRender){_this.render()}return _this}babelHelpers.createClass(ToElement,[{key:"connectedCallback",value:function connectedCallback(){if(window.ShadyCSS){window.ShadyCSS.styleElement(this)}if(this._queue.length){this._processQueue()}}},{key:"_copyAttribute",value:function _copyAttribute(name,to){var recipients=this.shadowRoot.querySelectorAll(to),value=this.getAttribute(name),fname=null==value?"removeAttribute":"setAttribute",_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=recipients[Symbol.iterator](),_step,node;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){node=_step.value;node[fname](name,value)}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}},{key:"_queueAction",value:function _queueAction(action){this._queue.push(action)}},{key:"_processQueue",value:function _processQueue(){var _this2=this;this._queue.forEach(function(action){_this2["_".concat(action.type)](action.data)});this._queue=[]}},{key:"_setProperty",value:function _setProperty(_ref){var name=_ref.name,value=_ref.value;this[name]=value}},{key:"render",value:function render(){this.shadowRoot.innerHTML=null;this.template.innerHTML=this.html;if(window.ShadyCSS){window.ShadyCSS.prepareTemplate(this.template,this.tag)}this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}},{key:"createNewElement",value:function createNewElement(){this._tmp=this.element;var css=this.extractCSS(this._tmp).stylesheet,html=this._tmp.outerHTML;return{html:html,css:css}}},{key:"generateUUID",value:function generateUUID(){return"item-sss-ss-ss".replace(/s/g,this._uuidPart)}},{key:"_uuidPart",value:function _uuidPart(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}},{key:"getDefaultStyling",value:function getDefaultStyling(element){var part=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,tagName=element.tagName,iframe=document.createElement("iframe");this.shadowRoot.appendChild(iframe);var iframeDocument=iframe.contentDocument,targetElement=iframeDocument.createElement(tagName);iframeDocument.body.appendChild(targetElement);for(var styling=iframe.contentWindow.getComputedStyle(targetElement),clonedStyling={},i=0,len=styling.length,property;i<len;i++){property=styling[i];clonedStyling[i]=property;clonedStyling[property]=styling[property]}this.shadowRoot.removeChild(iframe);return clonedStyling}},{key:"getStylesWithoutDefaults",value:function getStylesWithoutDefaults(element){for(var part=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null,allStyling=window.getComputedStyle(element,part),defaultStyling=this.getDefaultStyling(element.tagName),userStyling={},i=0,len=allStyling.length;i<len;i++){var property=allStyling[i],value=allStyling[property],defaultValue=defaultStyling[property];if(value!=defaultValue&&"transform-origin"!==property&&"perspective-origin"!==property){userStyling[property]=value}}return userStyling}},{key:"flatten",value:function flatten(arr){var _this3=this;return arr.reduce(function(flat,toFlatten){return flat.concat(Array.isArray(toFlatten)?_this3.flatten(toFlatten):toFlatten)},[])}},{key:"recursiveExtract",value:function recursiveExtract(element){var id=this.generateUUID(),styles=this.getStylesWithoutDefaults(element);element.setAttribute("id",id);var css="";for(var i in styles){css+="      ".concat(i,": ").concat(styles[i],";\n")}var children=Array.prototype.slice.call(element.children);return[{id:id,style:css}].concat(children.map(this.recursiveExtract.bind(this)))}},{key:"extractCSS",value:function extractCSS(element){if(!element){return{elements:[],stylesheet:""}}var raw=this.recursiveExtract(element),flat=this.flatten(raw);return{elements:flat,stylesheet:flat.reduce(function(acc,cur){var style="    #"+cur.id+" {\n"+cur.style+"    }\n";return acc+style},"")}}},{key:"dashToCamel",value:function dashToCamel(str){return str.replace(/-([a-z])/g,function(g){return g[1].toUpperCase()})}},{key:"contentToFile",value:function contentToFile(html){return"\n/**\n * Copyright 2019 {Your compay}\n * @license Apache-2.0, see License.md for full text.\n */\nimport { html, PolymerElement } from \"@polymer/polymer/polymer-element.js\";\n/**\n * `".concat(this.name,"`\n * `An auto generated element via to-element`\n *\n * @microcopy - language worth noting:\n *  - This element was made by someone else and then forked from their site\n *  - The point is not perfection but to rapidly generate boilerplate\n *\n * @originalSite - This code is based on work originally found on\n *   - ").concat(this.sourceUrl,"\n * @customElement\n * @polymer\n */\nclass ").concat(this.dashToCamel(this.name)," extends PolymerElement {\n  \n  // render function\n  static get template() {\n    return html`\n    ").concat(html,"\n    `;\n  }\n\n  // properties available to the custom element for data binding\n  static get properties() {\n    return {\n      \"title\": {\n        \"name\": \"title\",\n        \"type\": \"String\",\n        \"value\": \"\",\n      }\n    };\n  }\n\n  /**\n   * Store the tag name to make it easier to obtain directly.\n   */\n  static get tag() {\n    return \"").concat(this.name,"\";\n  }\n  /**\n   * life cycle, element is afixed to the DOM\n   */\n  //connectedCallback() { super.connectedCallback(); }\n  /**\n   * life cycle, element is removed from the DOM\n   */\n  //disconnectedCallback() {super.disconnectedCallback();}\n}\nwindow.customElements.define(").concat(this.dashToCamel(this.name),".tag, ").concat(this.dashToCamel(this.name),");\nexport { ").concat(this.dashToCamel(this.name)," };\n    ")}},{key:"downloadNewComponent",value:function downloadNewComponent(element,name){if(element){this.element=element}if(name){this.name=name}var tmp=this.createNewElement(),html="<style>\n".concat(tmp.css,"</style>\n    ").concat(tmp.html),data=this.contentToFile(html);this.downloadFromData(data,"js",this.name)}},{key:"downloadFromData",value:function downloadFromData(data,type){var name=2<arguments.length&&arguments[2]!==void 0?arguments[2]:"download",newTab=3<arguments.length&&arguments[3]!==void 0?arguments[3]:!0,mimeType=this.fileTypes[type.toUpperCase()],blob=new Blob([decodeURIComponent(encodeURI(data))],{type:mimeType}),filename=name+"."+type.toLowerCase();if(window.navigator&&window.navigator.msSaveOrOpenBlob){window.navigator.msSaveOrOpenBlob(blob,filename)}else{var link=document.createElement("a");link.href=(window.URL||window.webkitURL).createObjectURL(blob);link.download=filename;link.target=newTab?"_blank":"_self";this.shadowRoot.appendChild(link);link.click();this.shadowRoot.removeChild(link)}}},{key:"downloadFromURI",value:function downloadFromURI(uri){var newTab=1<arguments.length&&arguments[1]!==void 0?arguments[1]:!0;window.open(uri,newTab?"_blank":"_self");return!0}}]);return ToElement}(babelHelpers.wrapNativeSuper(HTMLElement));_exports.ToElement=ToElement;window.customElements.define(ToElement.tag,ToElement)});