define(["exports","../../@polymer/polymer/polymer-element.js","../es-global-bridge/es-global-bridge.js","../../chartist/dist/chartist.min.js","./lib/chartist-render-shared-styles.js"],function(_exports,_polymerElement,_esGlobalBridge,Chartist){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.ChartistRender=void 0;Chartist=babelHelpers.interopRequireWildcard(Chartist);function _templateObject_081212d0598711e9be72c76822165544(){var data=babelHelpers.taggedTemplateLiteral(["\n      <style is=\"custom-style\" include=\"chartist-render-shared-styles\">\n        :host {\n          display: block;\n        }\n      </style>\n      <div id=\"chart\" chart$=\"[[__chartId]]\" class$=\"ct-chart [[scale]]\"></div>\n    "]);_templateObject_081212d0598711e9be72c76822165544=function(){return data};return data}var ChartistRender=function(_PolymerElement){babelHelpers.inherits(ChartistRender,_PolymerElement);function ChartistRender(){babelHelpers.classCallCheck(this,ChartistRender);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(ChartistRender).apply(this,arguments))}babelHelpers.createClass(ChartistRender,[{key:"connectedCallback",value:function connectedCallback(){babelHelpers.get(babelHelpers.getPrototypeOf(ChartistRender.prototype),"connectedCallback",this).call(this);this._chartistLoaded()}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(ChartistRender.prototype),"ready",this).call(this);this.__chartId=this._getUniqueId("chartist-render-");if(this.__chartistLoaded)this._chartReady()}},{key:"_chartistLoaded",value:function _chartistLoaded(){this.__chartistLoaded=!0;if(this.__chartId)this._chartReady()}},{key:"_checkReady",value:function _checkReady(){var root=this;setInterval(root._chartReady,500)}},{key:"_chartReady",value:function _chartReady(){var root=this,container=root.$.chart;if(null!==container){window.dispatchEvent(new CustomEvent("chartist-render-ready",{detail:root}));if(null!==root.data)root.makeChart();clearInterval(root._checkReady)}}},{key:"makeChart",value:function makeChart(){var root=this,chart;if(this.__chartistLoaded&&this.__chartId&&null!==root.data&&null!==this.$.chart){if("bar"==root.type){if(root.responsiveOptions!==void 0&&0<root.responsiveOptions.length){root.responsiveOptions.forEach(function(option){if(option[1]!==void 0){if(option[1].axisX&&"noop"==option[1].axisX.labelInterpolationFnc)option[1].axisX.labelInterpolationFnc=Chartist.noop;if(option[1].axisY&&"noop"==option[1].axisY.labelInterpolationFnc)option[1].axisY.labelInterpolationFnc=Chartist.noop}})}chart=Chartist.Bar(this.$.chart,root.data,root.options,root.responsiveOptions)}else if("line"==root.type){chart=Chartist.Line(this.$.chart,root.data,root.options,root.responsiveOptions)}else if("pie"==root.type){chart=Chartist.Pie(this.$.chart,root.data,root.options,root.responsiveOptions)}window.dispatchEvent(new CustomEvent("chartist-render-draw",{detail:chart}));chart.on("created",function(){root.addA11yFeatures(chart.container.childNodes[0])});return chart}else{return null}}},{key:"addA11yFeatures",value:function addA11yFeatures(svg){var desc=this.data.labels!==void 0&&null!==this.data.labels?this.chartDesc+this.makeA11yTable(svg):this.chartDesc;this._addA11yFeature(svg,"desc",desc);this._addA11yFeature(svg,"title",this.chartTitle);svg.setAttribute("aria-labelledby",this.__chartId+"-chart-title "+this.__chartId+"-chart-desc")}},{key:"makeA11yTable",value:function makeA11yTable(){for(var title=null!==this.chartTitle?this.chartTitle:"A "+this.type+" chart.",table=["<table summary=\"Each column is a series of data, and the first column is the data label.\">","<caption>"+title+"</caption>","<tbody>"],i=0;i<this.data.labels.length;i++){table.push("<tr><th scope=\"row\">"+this.data.labels[i]+"</th>");if("pie"==this.type){table.push("<td>"+this.data.series[i]+"</td>")}else{for(var j=0;j<this.data.series.length;j++){table.push("<td>"+this.data.series[j][i]+"</td>")}}table.push("</tr>")}table.push("</tbody></table>");return table.join("")}},{key:"_addA11yFeature",value:function _addA11yFeature(svg,tag,html){var el=document.createElement(tag),first=svg.childNodes[0];el.innerHTML=html;el.setAttribute("id",this.__chartId+"-chart-"+tag);svg.insertBefore(el,first)}},{key:"_getUniqueId",value:function _getUniqueId(prefix){var id=prefix+Date.now();return id}}],[{key:"template",get:function get(){return(0,_polymerElement.html)(_templateObject_081212d0598711e9be72c76822165544())}},{key:"properties",get:function get(){return{id:{type:String,value:"chart"},type:{type:String,value:"bar"},scale:{type:String,observer:"makeChart"},chartTitle:{type:String,value:null,observer:"makeChart"},chartDesc:{type:String,value:"",observer:"makeChart"},data:{type:Object,value:null,observer:"makeChart"},options:{type:Object,value:null,observer:"makeChart"},responsiveOptions:{type:Array,value:[],observer:"makeChart"},showTable:{type:Boolean,value:!1,observer:"makeChart"}}}},{key:"tag",get:function get(){return"chartist-render"}}]);return ChartistRender}(_polymerElement.PolymerElement);_exports.ChartistRender=ChartistRender;window.customElements.define(ChartistRender.tag,ChartistRender)});