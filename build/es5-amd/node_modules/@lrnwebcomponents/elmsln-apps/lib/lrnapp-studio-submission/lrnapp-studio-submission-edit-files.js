define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/paper-dialog/paper-dialog.js","../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../../../@polymer/iron-icon/iron-icon.js","../../../../@polymer/paper-button/paper-button.js","../../../../@vaadin/vaadin-upload/vaadin-upload.js","../../../secure-request/secure-request.js","./lrnapp-studio-submission-edit-add-asset.js","./lrnapp-studio-submission-edit-file.js"],function(_polymerLegacy){"use strict";function _templateObject_427d1020490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        min-height: 200px;\n      }\n\n      #pages {\n        display: block;\n      }\n\n      .files__files {\n        display: flex;\n        flex-wrap: wrap;\n      }\n\n      .files__files > * {\n        margin-right: 16px;\n        min-width: 200px;\n      }\n\n      neon-animated-pages .iron-selected {\n        position: static;\n      }\n\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 16px;\n      }\n    </style>\n\n    <div class=\"files__files\">\n      <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n        <lrnapp-studio-submission-edit-file\n          file=\"{{file}}\"\n          on-deleted=\"_deleteImage\"\n          data-index$=\"[[index]]\"\n        ></lrnapp-studio-submission-edit-file>\n      </template>\n      <lrnapp-studio-submission-edit-add-asset\n        on-click=\"_addImage\"\n        icon=\"editor:attach-file\"\n      ></lrnapp-studio-submission-edit-add-asset>\n    </div>\n\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Files(s)</h2>\n      <paper-dialog-scrollable>\n        <div class=\"files__upload\">\n          <template is=\"dom-if\" if=\"[[uploadUrl]]\">\n            <vaadin-upload\n              accept=\"[[fileTypes]]\"\n              target=\"[[uploadUrl]]\"\n              method=\"POST\"\n              form-data-name=\"file-upload\"\n              on-upload-success=\"_handleImageUploadSuccess\"\n            >\n              <div class=\"files__drop-label\">\n                <iron-icon icon=\"description\"></iron-icon>\n                Upload files here:\n              </div>\n            </vaadin-upload>\n          </template>\n        </div>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n      </div>\n    </paper-dialog>\n  "],["\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        min-height: 200px;\n      }\n\n      #pages {\n        display: block;\n      }\n\n      .files__files {\n        display: flex;\n        flex-wrap: wrap;\n      }\n\n      .files__files > * {\n        margin-right: 16px;\n        min-width: 200px;\n      }\n\n      neon-animated-pages .iron-selected {\n        position: static;\n      }\n\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 16px;\n      }\n    </style>\n\n    <div class=\"files__files\">\n      <template is=\"dom-repeat\" items=\"{{files}}\" as=\"file\">\n        <lrnapp-studio-submission-edit-file\n          file=\"{{file}}\"\n          on-deleted=\"_deleteImage\"\n          data-index\\$=\"[[index]]\"\n        ></lrnapp-studio-submission-edit-file>\n      </template>\n      <lrnapp-studio-submission-edit-add-asset\n        on-click=\"_addImage\"\n        icon=\"editor:attach-file\"\n      ></lrnapp-studio-submission-edit-add-asset>\n    </div>\n\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Files(s)</h2>\n      <paper-dialog-scrollable>\n        <div class=\"files__upload\">\n          <template is=\"dom-if\" if=\"[[uploadUrl]]\">\n            <vaadin-upload\n              accept=\"[[fileTypes]]\"\n              target=\"[[uploadUrl]]\"\n              method=\"POST\"\n              form-data-name=\"file-upload\"\n              on-upload-success=\"_handleImageUploadSuccess\"\n            >\n              <div class=\"files__drop-label\">\n                <iron-icon icon=\"description\"></iron-icon>\n                Upload files here:\n              </div>\n            </vaadin-upload>\n          </template>\n        </div>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n      </div>\n    </paper-dialog>\n  "]);_templateObject_427d1020490411e990ee3fd35bb8725b=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_427d1020490411e990ee3fd35bb8725b()),is:"lrnapp-studio-submission-edit-files",behaviors:[SecureRequest.xhr],properties:{files:{type:Array,notify:!0,value:null},selectedPage:{type:String,value:0},uploadUrl:{type:String,value:null,observer:"log"},fileTypes:{type:String,value:""}},observers:["_filesChanged(files)"],_filesChanged:function _filesChanged(){},_addImage:function _addImage(){this.$.dialog.open()},_selectPage:function _selectPage(e){var normalizedEvent=dom(e),page=normalizedEvent.localTarget.getAttribute("data-page");this.set("selectedPage",page)},_handleImageUploadSuccess:function _handleImageUploadSuccess(e){this.set("selectedPage",0);var response=e.detail.xhr.response,response=JSON.parse(response);if(response.data.file){var file=response.data.file;if(null===this.files){this.set("files",[])}this.push("files",file);this.$.dialog.close()}},_deleteImage:function _deleteImage(e){var normalizedEvent=dom(e),deleteIndex=normalizedEvent.localTarget.getAttribute("data-index");this.splice("files",+deleteIndex,1)},_canUpload:function _canUpload(){var uploadUrl=this.uploadUrl;if(null!==uploadUrl){return!0}else{return!1}},log:function log(){},attached:function attached(){var uploadUrl=this.generateUrl("/api/files");if(null!==uploadUrl){this.set("uploadUrl",uploadUrl)}}})});