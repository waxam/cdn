define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/iron-ajax/iron-ajax.js","../../../../@polymer/paper-toast/paper-toast.js","../../../lrnsys-button/lrnsys-button.js"],function(_polymerLegacy,_ironAjax,_paperToast,_lrnsysButton){"use strict";function _templateObject_fe9359b0620c11e99c573b9129e18660(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n      }\n    </style>\n\n    <template is=\"dom-if\" if=\"[[!submissionId]]\">\n      <lrnsys-button\n        raised=\"\"\n        on-tap=\"_createSubmission\"\n        label=\"Create submission\"\n      ></lrnsys-button>\n      <iron-ajax\n        id=\"ajaxCreateStub\"\n        url=\"[[createStubUrl]]\"\n        method=\"POST\"\n        body=\"[[assignmentId]]\"\n        handle-as=\"json\"\n        on-response=\"_ajaxCreateStubHandler\"\n      ></iron-ajax>\n    </template>\n    <template is=\"dom-if\" if=\"[[submissionId]]\">\n      <lrnsys-button\n        raised=\"\"\n        label=\"View submission\"\n        show-href=\"[[_submissionUrl(submissionId)]]\"\n        href=\"[[_submissionUrl(submissionId)]]\"\n      ></lrnsys-button>\n    </template>\n\n    <template is=\"dom-if\" if=\"[[displayErrors]]\">\n      <paper-toast id=\"toast\"></paper-toast>\n    </template>\n  "]);_templateObject_fe9359b0620c11e99c573b9129e18660=function _templateObject_fe9359b0620c11e99c573b9129e18660(){return data};return data}/*
`lrnapp-studio-submission-button`
Allows users to either start a submission or link to a submission.

Usage:
```
<lrnapp-studio-submission-button assignment-id="[[id]]" submission-id="{{submissionId}}" end-point="[[endPoint]]" csrf-token=[[csrfToken]]></lrnapp-studio-submission-button>
*/(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_fe9359b0620c11e99c573b9129e18660()),is:"lrnapp-studio-submission-button",properties:{auto:{type:Boolean,reflectToAttribute:!0/* transition */ /* transition */,value:!1,notify:!0},assignmentId:{type:String,reflectToAttribute:!0},submissionId:{type:String,value:!1,reflectToAttribute:!0},endPoint:String,csrfToken:String,displayErrors:{type:Boolean,value:!0}},observers:["_requestUrlChanged(endPoint, csrfToken)"],_requestUrlChanged:function _requestUrlChanged(endPoint,csrfToken){this.createStubUrl=endPoint+"/api/submissions/create-stub?token="+csrfToken},_createSubmission:function _createSubmission(){this.shadowRoot.querySelector("#ajaxCreateStub").generateRequest()},_ajaxCreateStubHandler:function _ajaxCreateStubHandler(e){var status=e.detail.response.status,response=e.detail.response;if(201===status){var submissionId=e.detail.response.data.id;if(submissionId){this.submissionId=submissionId;// auto implies we should just go there to the edit form after creation
if(this.auto){window.location.href=this._submissionUrl(submissionId)+"/edit"}}}// if we have errors to display
if("undefined"!==typeof response.errors){var ul=document.createElement("ul"),text="";response.errors.forEach(function(error){text=text+" "+error});this.shadowRoot.querySelector("#toast").show(text)}},_submissionUrl:function _submissionUrl(id){return this.endPoint+"/submissions/"+id}})});