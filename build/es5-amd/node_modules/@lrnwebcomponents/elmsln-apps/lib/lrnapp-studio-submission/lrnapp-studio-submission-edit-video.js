define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/paper-dialog/paper-dialog.js","../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../../../@polymer/paper-input/paper-input.js","../../../../@polymer/paper-button/paper-button.js","../../../../@polymer/iron-ajax/iron-ajax.js","../../../secure-request/secure-request.js","./lrnapp-studio-submission-edit-add-asset.js","./lrnapp-studio-submission-media-editoverlay.js"],function(_polymerLegacy){"use strict";function _templateObject_42a4bc60490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: flex;\n        position: relative;\n        align-items: stretch;\n      }\n\n      :host * {\n        background: lightgray;\n        display: flex;\n        align-items: center;\n        margin-right: 1em;\n      }\n\n      iframe {\n        display: block;\n      }\n\n      .videosfield__create {\n        display: block;\n        height: 250px;\n        width: 300px;\n      }\n\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 1em;\n      }\n    </style>\n\n    <template is=\"dom-repeat\" items=\"{{videos}}\" as=\"video\">\n      <lrnapp-studio-submission-media-editoverlay\n        on-delete=\"_videoDelete\"\n        data-index$=\"[[index]]\"\n      >\n        <iframe class=\"videosfield__iframe\" src=\"{{video.video_src}}\"></iframe>\n      </lrnapp-studio-submission-media-editoverlay>\n    </template>\n\n    <lrnapp-studio-submission-edit-add-asset\n      icon=\"av:video-library\"\n      on-click=\"_openDialog\"\n    ></lrnapp-studio-submission-edit-add-asset>\n\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Video</h2>\n      <paper-dialog-scrollable>\n        <paper-input label=\"Video URL\" value=\"{{newvideo}}\"></paper-input>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n        <paper-button dialog-confirm=\"\" on-click=\"_addImage\"\n          >Add Video</paper-button\n        >\n      </div>\n    </paper-dialog>\n\n    <template is=\"dom-if\" if=\"[[videoGenerateSourceUrl]]\">\n      <!-- Generate Video Source Url for preview -->\n      <iron-ajax\n        id=\"videoGenerateSourceUrl\"\n        url=\"[[videoGenerateSourceUrl]]\"\n        method=\"POST\"\n        body=\"[[newvideo]]\"\n        content-type=\"application/json\"\n        handle-as=\"json\"\n        on-response=\"_addImage\"\n      ></iron-ajax>\n    </template>\n  "],["\n    <style>\n      :host {\n        display: flex;\n        position: relative;\n        align-items: stretch;\n      }\n\n      :host * {\n        background: lightgray;\n        display: flex;\n        align-items: center;\n        margin-right: 1em;\n      }\n\n      iframe {\n        display: block;\n      }\n\n      .videosfield__create {\n        display: block;\n        height: 250px;\n        width: 300px;\n      }\n\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 1em;\n      }\n    </style>\n\n    <template is=\"dom-repeat\" items=\"{{videos}}\" as=\"video\">\n      <lrnapp-studio-submission-media-editoverlay\n        on-delete=\"_videoDelete\"\n        data-index\\$=\"[[index]]\"\n      >\n        <iframe class=\"videosfield__iframe\" src=\"{{video.video_src}}\"></iframe>\n      </lrnapp-studio-submission-media-editoverlay>\n    </template>\n\n    <lrnapp-studio-submission-edit-add-asset\n      icon=\"av:video-library\"\n      on-click=\"_openDialog\"\n    ></lrnapp-studio-submission-edit-add-asset>\n\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Video</h2>\n      <paper-dialog-scrollable>\n        <paper-input label=\"Video URL\" value=\"{{newvideo}}\"></paper-input>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n        <paper-button dialog-confirm=\"\" on-click=\"_addImage\"\n          >Add Video</paper-button\n        >\n      </div>\n    </paper-dialog>\n\n    <template is=\"dom-if\" if=\"[[videoGenerateSourceUrl]]\">\n      <!-- Generate Video Source Url for preview -->\n      <iron-ajax\n        id=\"videoGenerateSourceUrl\"\n        url=\"[[videoGenerateSourceUrl]]\"\n        method=\"POST\"\n        body=\"[[newvideo]]\"\n        content-type=\"application/json\"\n        handle-as=\"json\"\n        on-response=\"_addImage\"\n      ></iron-ajax>\n    </template>\n  "]);_templateObject_42a4bc60490411e990ee3fd35bb8725b=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_42a4bc60490411e990ee3fd35bb8725b()),is:"lrnapp-studio-submission-edit-video",behaviors:[SecureRequest.xhr],properties:{videos:{type:Array,value:[],notify:!0},selectedPage:{type:String,value:"0"},newvideo:{type:String,value:""},videoGenerateSourceUrl:{type:String,value:null}},_openDialog:function _openDialog(){this.$.dialog.open()},_addImage:function _addImage(e){var video_url=this.newvideo,normalizedEvent=dom(e),tagname=normalizedEvent.localTarget.tagName;if("IRON-AJAX"===tagname){var video_src=e.detail.response.data;if("[object Array]"!=Object.prototype.toString.call(this.videos)){this.videos=[]}this.push("videos",{video_url:this.newvideo,video_src:video_src});this.newvideo=""}else{this.shadowRoot.querySelector("#videoGenerateSourceUrl").generateRequest()}},_videoDelete:function _videoDelete(e){var normalizedEvent=dom(e),deleteIndex=normalizedEvent.localTarget.getAttribute("data-index");this.splice("videos",deleteIndex,1)},ready:function ready(){var url=this.generateUrl("/api/video/generate-source-url");this.set("videoGenerateSourceUrl",url)}})});