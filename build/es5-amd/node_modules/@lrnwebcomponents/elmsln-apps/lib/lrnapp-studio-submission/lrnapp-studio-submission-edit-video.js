define(["exports", "../../../../lit-element/lit-element.js", "../../../secure-request/secure-request.js", "../../../../@polymer/paper-dialog/paper-dialog.js", "../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js", "../../../../@polymer/paper-input/paper-input.js", "../../../../@polymer/paper-button/paper-button.js", "../../../../@polymer/iron-ajax/iron-ajax.js", "./lrnapp-studio-submission-edit-add-asset.js", "./lrnapp-studio-submission-media-editoverlay.js"], function (_exports, _litElement, _secureRequest, _paperDialog, _paperDialogScrollable, _paperInput, _paperButton, _ironAjax, _lrnappStudioSubmissionEditAddAsset, _lrnappStudioSubmissionMediaEditoverlay) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.LrnappStudioSubmissionEditVideo = void 0;

  function _templateObject4_6d8cb6602d8511ea80ccf124101da415() {
    var data = babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: flex;\n          position: relative;\n          align-items: stretch;\n        }\n\n        lrnapp-studio-submission-media-editoverlay,\n        lrnapp-studio-submission-edit-add-asset {\n          background: lightgray;\n          display: flex;\n          align-items: center;\n          margin-right: 1em;\n        }\n\n        iframe {\n          display: block;\n        }\n\n        .videosfield__create {\n          display: block;\n          height: 250px;\n          width: 300px;\n        }\n\n        paper-dialog {\n          width: 50%;\n          width: 50vmax;\n          padding: 1em;\n        }\n      "]);

    _templateObject4_6d8cb6602d8511ea80ccf124101da415 = function _templateObject4_6d8cb6602d8511ea80ccf124101da415() {
      return data;
    };

    return data;
  }

  function _templateObject3_6d8cb6602d8511ea80ccf124101da415() {
    var data = babelHelpers.taggedTemplateLiteral(["\n            <!-- Generate Video Source Url for preview -->\n            <iron-ajax\n              id=\"videourl\"\n              url=\"", "\"\n              method=\"POST\"\n              .body=\"", "\"\n              content-type=\"application/json\"\n              handle-as=\"json\"\n              @response=\"", "\"\n            ></iron-ajax>\n          "]);

    _templateObject3_6d8cb6602d8511ea80ccf124101da415 = function _templateObject3_6d8cb6602d8511ea80ccf124101da415() {
      return data;
    };

    return data;
  }

  function _templateObject2_6d8cb6602d8511ea80ccf124101da415() {
    var data = babelHelpers.taggedTemplateLiteral(["\n          <lrnapp-studio-submission-media-editoverlay\n            @deleted=\"", "\"\n            data-index=\"", "\"\n          >\n            <iframe\n              class=\"videosfield__iframe\"\n              src=\"", "\"\n            ></iframe>\n          </lrnapp-studio-submission-media-editoverlay>\n        "]);

    _templateObject2_6d8cb6602d8511ea80ccf124101da415 = function _templateObject2_6d8cb6602d8511ea80ccf124101da415() {
      return data;
    };

    return data;
  }

  function _templateObject_6d8cb6602d8511ea80ccf124101da415() {
    var data = babelHelpers.taggedTemplateLiteral(["\n      ", "\n\n      <lrnapp-studio-submission-edit-add-asset\n        icon=\"av:video-library\"\n        @click=\"", "\"\n      ></lrnapp-studio-submission-edit-add-asset>\n\n      <paper-dialog id=\"dialog\">\n        <h2>Add Video</h2>\n        <paper-dialog-scrollable>\n          <paper-input\n            label=\"Video URL\"\n            value=\"", "\"\n            @value-changed=\"", "\"\n          ></paper-input>\n        </paper-dialog-scrollable>\n        <div class=\"buttons\">\n          <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n          <paper-button dialog-confirm=\"\" @click=\"", "\"\n            >Add Video</paper-button\n          >\n        </div>\n      </paper-dialog>\n      ", "\n    "]);

    _templateObject_6d8cb6602d8511ea80ccf124101da415 = function _templateObject_6d8cb6602d8511ea80ccf124101da415() {
      return data;
    };

    return data;
  }

  var LrnappStudioSubmissionEditVideo =
  /*#__PURE__*/
  function (_SecureRequestXhr) {
    babelHelpers.inherits(LrnappStudioSubmissionEditVideo, _SecureRequestXhr);
    babelHelpers.createClass(LrnappStudioSubmissionEditVideo, [{
      key: "render",
      value: function render() {
        var _this2 = this;

        return (0, _litElement.html)(_templateObject_6d8cb6602d8511ea80ccf124101da415(), this.videos.map(function (video, index) {
          return (0, _litElement.html)(_templateObject2_6d8cb6602d8511ea80ccf124101da415(), _this2._videoDelete, index, video.video_src);
        }), this._openDialog, this.newvideo, this.newvideoEvent, this._addVideo, this.videoGenerateSourceUrl ? (0, _litElement.html)(_templateObject3_6d8cb6602d8511ea80ccf124101da415(), this.videoGenerateSourceUrl, this.newvideo, this._addVideoAjax) : "");
      }
    }, {
      key: "newvideoEvent",
      value: function newvideoEvent(e) {
        this.newvideo = e.detail.value;
      }
    }], [{
      key: "styles",

      /**
       * LitElement constructable styles enhancement
       */
      get: function get() {
        return [(0, _litElement.css)(_templateObject4_6d8cb6602d8511ea80ccf124101da415())];
      }
    }, {
      key: "tag",
      get: function get() {
        return "lrnapp-studio-submission-edit-video";
      }
    }]);

    function LrnappStudioSubmissionEditVideo() {
      var _this;

      babelHelpers.classCallCheck(this, LrnappStudioSubmissionEditVideo);
      _this = babelHelpers.possibleConstructorReturn(this, babelHelpers.getPrototypeOf(LrnappStudioSubmissionEditVideo).call(this));
      _this.videos = [];
      _this.selectedPage = "0";
      _this.newvideo = "";
      _this.videoGenerateSourceUrl = _this.generateUrl("/api/video/generate-source-url");
      return _this;
    }

    babelHelpers.createClass(LrnappStudioSubmissionEditVideo, [{
      key: "updated",
      value: function updated(changedProperties) {
        var _this3 = this;

        changedProperties.forEach(function (oldValue, propName) {
          if (propName == "videos") {
            // notify
            _this3.dispatchEvent(new CustomEvent("videos-changed", {
              detail: {
                value: _this3[propName]
              }
            }));
          }
        });
      }
    }, {
      key: "_openDialog",
      value: function _openDialog(e) {
        this.shadowRoot.querySelector("#dialog").open();
      }
    }, {
      key: "_addVideoAjax",
      value: function _addVideoAjax(e) {
        var video_src = e.detail.response.data;
        this.videos.push({
          video_url: this.newvideo,
          video_src: video_src
        });
        this.newvideo = "";
      }
    }, {
      key: "_addVideo",
      value: function _addVideo(e) {
        this.shadowRoot.querySelector("#videourl").generateRequest();
      }
    }, {
      key: "_videoDelete",
      value: function _videoDelete(e) {
        var deleteIndex = e.target.getAttribute("data-index");
        this.videos.splice(deleteIndex, 1);
      }
    }], [{
      key: "properties",
      get: function get() {
        return {
          videos: {
            type: Array
          },
          selectedPage: {
            type: String,
            attribute: "selected-page"
          },
          newvideo: {
            type: String
          },
          videoGenerateSourceUrl: {
            type: String,
            attribute: "video-generate-source-url"
          }
        };
      }
    }]);
    return LrnappStudioSubmissionEditVideo;
  }((0, _secureRequest.SecureRequestXhr)(_litElement.LitElement));

  _exports.LrnappStudioSubmissionEditVideo = LrnappStudioSubmissionEditVideo;
  window.customElements.define(LrnappStudioSubmissionEditVideo.tag, LrnappStudioSubmissionEditVideo);
});