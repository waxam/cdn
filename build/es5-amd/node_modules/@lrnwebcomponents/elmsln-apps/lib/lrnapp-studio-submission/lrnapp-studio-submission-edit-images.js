define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/paper-dialog/paper-dialog.js","../../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js","../../../../@polymer/iron-icon/iron-icon.js","../../../../@polymer/paper-button/paper-button.js","../../../../@vaadin/vaadin-upload/vaadin-upload.js","../../../secure-request/secure-request.js","./lrnapp-studio-submission-edit-add-asset.js","./lrnapp-studio-submission-edit-image.js"],function(_polymerLegacy){"use strict";function _templateObject_428eea70490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        min-height: 200px;\n      }\n      #pages {\n        display: block;\n      }\n      .images__images {\n        display: flex;\n        flex-wrap: wrap;\n      }\n      .images__images > * {\n        margin-right: 16px;\n        min-width: 200px;\n      }\n      neon-animated-pages .iron-selected {\n        position: static;\n      }\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 16px;\n      }\n    </style>\n    <div class=\"images__images\">\n      <template is=\"dom-repeat\" items=\"{{images}}\" as=\"image\">\n        <lrnapp-studio-submission-edit-image\n          image=\"{{image}}\"\n          on-deleted=\"_deleteImage\"\n          data-index$=\"[[index]]\"\n        ></lrnapp-studio-submission-edit-image>\n      </template>\n      <lrnapp-studio-submission-edit-add-asset\n        on-click=\"_addImage\"\n        icon=\"image:photo-library\"\n      ></lrnapp-studio-submission-edit-add-asset>\n    </div>\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Image(s)</h2>\n      <paper-dialog-scrollable>\n        <div class=\"images__upload\">\n          <template is=\"dom-if\" if=\"[[uploadUrl]]\">\n            <vaadin-upload\n              accept=\"[[fileTypes]]\"\n              target=\"[[uploadUrl]]\"\n              method=\"POST\"\n              form-data-name=\"file-upload\"\n              on-upload-success=\"_handleImageUploadSuccess\"\n            >\n              <div class=\"images__drop-label\">\n                <iron-icon icon=\"description\"></iron-icon>\n                Upload files here:\n              </div>\n            </vaadin-upload>\n          </template>\n        </div>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n      </div>\n    </paper-dialog>\n  "],["\n    <style>\n      :host {\n        display: block;\n        position: relative;\n        min-height: 200px;\n      }\n      #pages {\n        display: block;\n      }\n      .images__images {\n        display: flex;\n        flex-wrap: wrap;\n      }\n      .images__images > * {\n        margin-right: 16px;\n        min-width: 200px;\n      }\n      neon-animated-pages .iron-selected {\n        position: static;\n      }\n      paper-dialog {\n        width: 50%;\n        width: 50vmax;\n        padding: 16px;\n      }\n    </style>\n    <div class=\"images__images\">\n      <template is=\"dom-repeat\" items=\"{{images}}\" as=\"image\">\n        <lrnapp-studio-submission-edit-image\n          image=\"{{image}}\"\n          on-deleted=\"_deleteImage\"\n          data-index\\$=\"[[index]]\"\n        ></lrnapp-studio-submission-edit-image>\n      </template>\n      <lrnapp-studio-submission-edit-add-asset\n        on-click=\"_addImage\"\n        icon=\"image:photo-library\"\n      ></lrnapp-studio-submission-edit-add-asset>\n    </div>\n    <paper-dialog\n      id=\"dialog\"\n      entry-animation=\"scale-up-animation\"\n      exit-animation=\"fade-out-animation\"\n      with-backdrop=\"\"\n    >\n      <h2>Add Image(s)</h2>\n      <paper-dialog-scrollable>\n        <div class=\"images__upload\">\n          <template is=\"dom-if\" if=\"[[uploadUrl]]\">\n            <vaadin-upload\n              accept=\"[[fileTypes]]\"\n              target=\"[[uploadUrl]]\"\n              method=\"POST\"\n              form-data-name=\"file-upload\"\n              on-upload-success=\"_handleImageUploadSuccess\"\n            >\n              <div class=\"images__drop-label\">\n                <iron-icon icon=\"description\"></iron-icon>\n                Upload files here:\n              </div>\n            </vaadin-upload>\n          </template>\n        </div>\n      </paper-dialog-scrollable>\n      <div class=\"buttons\">\n        <paper-button dialog-dismiss=\"\">Cancel</paper-button>\n      </div>\n    </paper-dialog>\n  "]);_templateObject_428eea70490411e990ee3fd35bb8725b=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_428eea70490411e990ee3fd35bb8725b()),is:"lrnapp-studio-submission-edit-images",behaviors:[SecureRequest.xhr],properties:{images:{type:Array,notify:!0,value:[]},selectedPage:{type:String,value:0},uploadUrl:{type:String,value:null}},_addImage:function _addImage(){this.$.dialog.open()},_selectPage:function _selectPage(e){var normalizedEvent=dom(e),page=normalizedEvent.localTarget.getAttribute("data-page");this.set("selectedPage",page)},_handleImageUploadSuccess:function _handleImageUploadSuccess(e){this.set("selectedPage",0);var images=[],response=e.detail.xhr.response,response=JSON.parse(response);if(response.data.file){var file=response.data.file,replacement=!1;if(this.images){images=this.images.map(function(image){if(image.fid===file.fid){replacement=!0;return file}else{return image}})}if(!replacement){images.push(file)}this.set("images",[]);this.set("images",images);this.$.dialog.close()}},_deleteImage:function _deleteImage(e){var normalizedEvent=dom(e),deleteIndex=normalizedEvent.localTarget.getAttribute("data-index");this.splice("images",deleteIndex,1)},attached:function attached(){var uploadUrl=this.generateUrl("/api/files");if(null!==uploadUrl){this.set("uploadUrl",uploadUrl)}}})});