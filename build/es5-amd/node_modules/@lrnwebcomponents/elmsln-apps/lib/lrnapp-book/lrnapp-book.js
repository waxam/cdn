define(["../../../../@polymer/polymer/polymer-legacy.js","../../../../@polymer/polymer/lib/legacy/polymer.dom.js","../../../../@polymer/iron-icons/iron-icons.js","../../../../@polymer/iron-icons/hardware-icons.js","../../../../@polymer/paper-icon-button/paper-icon-button.js","../../../../@polymer/paper-styles/color.js","../../../paper-search/lib/paper-search-bar.js","../../../../@polymer/paper-tooltip/paper-tooltip.js","../../../../@polymer/paper-slider/paper-slider.js","../../../simple-toast/simple-toast.js","../../../../@polymer/app-layout/app-layout.js","../../../../@polymer/app-layout/app-drawer/app-drawer.js","../../../../@polymer/app-layout/app-header/app-header.js","../../../../@polymer/app-layout/app-toolbar/app-toolbar.js","../../../../@polymer/app-layout/app-scroll-effects/app-scroll-effects.js","../../../materializecss-styles/materializecss-styles.js","../../../lrndesign-stepper/lrndesign-stepper.js","../../../lrnsys-progress/lrnsys-progress.js","../../../elmsln-loading/elmsln-loading.js","../../../page-scroll-position/page-scroll-position.js","../../../material-progress/material-progress.js","../../../map-menu/map-menu.js","./lrnapp-book-progress-dashboard.js"],function(_polymerLegacy){"use strict";function _templateObject_40688800490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <custom-style>\n      <style is=\"custom-style\" include=\"materializecss-styles\">\n        :host {\n          display: block;\n          font-size: 16px;\n          box-sizing: content-box;\n        }\n        #toolbar {\n          color: gray;\n          background-color: white;\n          padding: 0 8px;\n          margin: 0;\n          height: auto;\n          box-sizing: content-box;\n          transition: all 0.4s ease;\n        }\n        paper-button {\n          padding: 0;\n          margin: 0;\n          min-width: 16px;\n        }\n        app-drawer {\n          padding: 0;\n          top: 0;\n          bottom: 0;\n          z-index: 1;\n          position: absolute;\n          box-sizing: content-box;\n          --app-drawer-content-container: {\n            background-color: #fafafa;\n            padding: 0;\n            border-right: 1px solid #c8c8c8;\n            overflow-y: scroll;\n            width: 300px !important;\n            box-shadow: 0 76px 8px 0 rgba(0, 0, 0, 0.4);\n            height: 100vh;\n            top: 0;\n            position: sticky;\n          }\n        }\n        lrndesign-stepper-button {\n          --lrndesign-stepper-btn-active: #f6f7f7;\n        }\n        lrndesign-stepper-button ::slotted(paper-button) {\n          margin: 0;\n          height: 48px;\n        }\n        lrndesign-stepper-button ::slotted(.title-container) {\n          padding: 0;\n          width: 100%;\n          right: unset;\n        }\n        lrndesign-stepper-button ::slotted(.node-title) {\n          font-size: 15px;\n          line-height: 24px;\n        }\n\n        .loading {\n          width: 100%;\n          z-index: 1000;\n          opacity: 0.9;\n          text-align: center;\n          align-content: space-around;\n          justify-content: center;\n          position: absolute;\n          background-color: white;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          margin: 0 auto;\n          visibility: visible;\n          transition: visibility 1s, opacity 1s ease;\n        }\n        .loading elmsln-loading {\n          margin: 0 5em;\n          display: inline-flex;\n        }\n        #bodyloading {\n          height: 100%;\n          display: flex;\n          justify-content: center;\n        }\n        #bodyloading .loading,\n        #bodyloading elmsln-loading {\n          display: block;\n          height: 5em;\n        }\n        .outline-title {\n          margin-left: 0.5em;\n          max-width: 50%;\n        }\n        .content-nav-buttons {\n          top: 60%;\n          position: fixed;\n          opacity: 0.8;\n          padding: 0 0.25em;\n          height: 40%;\n          padding-top: 15%;\n          margin-top: -15%;\n        }\n        .content-nav-buttons:hover {\n          opacity: 1;\n        }\n        .prev {\n          left: 0;\n          order: 1;\n        }\n        .next {\n          right: 0;\n          transition: right 0.2s ease;\n          order: 2;\n        }\n        app-header {\n          width: 100%;\n          left: 0 !important;\n          z-index: 2 !important;\n          position: sticky !important;\n        }\n        app-header-layout {\n          margin: 0;\n          padding: 0;\n          width: 100%;\n        }\n        .content-body {\n          position: relative;\n          padding: 0;\n          margin: -3em 4em 5em 4em;\n          font-size: 1.1em;\n          transition: margin 0.4s ease, width 0.4s ease;\n        }\n\n        .content-nav-buttons paper-icon-button {\n          width: 4em;\n          height: 4em;\n          opacity: 0.4;\n          display: block;\n          visibility: visible;\n          transition: opacity 0.4s linear, visibility 1s linear,\n            height 0.4s ease, width 0.4s ease;\n        }\n        .content-nav-buttons paper-icon-button:hover {\n          opacity: 1;\n        }\n        paper-tooltip {\n          --paper-tooltip-opacity: 0.96;\n        }\n        :host([drawer-opened]) .content-nav-buttons paper-icon-button {\n          width: 2.5em;\n          height: 2.5em;\n        }\n        :host([edit-mode]) .content-nav-buttons {\n          opacity: 0;\n          pointer-events: none;\n          visibility: hidden;\n        }\n        .content-title {\n          font-size: 1.4em;\n          margin: 0;\n          padding: 0.25em 0;\n          background-color: white;\n          top: 70px;\n          position: sticky;\n        }\n        .content-current {\n          min-height: 100vh;\n        }\n        .content-next {\n          background-color: grey;\n          opacity: 0.8;\n        }\n        #header {\n          position: sticky;\n          top: 0;\n          left: 0;\n          width: 100%;\n          color: black;\n          background-color: white;\n          z-index: 2;\n          padding: 0;\n          margin: 0;\n          opacity: 1;\n          box-sizing: content-box;\n          transition: all 0.4s ease;\n        }\n        app-drawer-layout {\n          font-family: sans-serif;\n        }\n        :host {\n          --app-drawer-width: 300px;\n        }\n        :host([full-width]) {\n          --app-drawer-width: 0px;\n        }\n        :host([drawer-opened]) .prev,\n        :host([edit-mode]) .prev {\n          left: 19em;\n        }\n        .progress-container {\n          width: 90%;\n          padding: 0;\n          margin: 0 0 0 1em;\n          overflow: visible;\n        }\n\n        [main-title] {\n          font-weight: lighter;\n          padding: 0.6em 0 0 0;\n          margin: 0;\n          height: 3em;\n          overflow-y: scroll;\n        }\n        [hidden] {\n          visibility: hidden !important;\n          opacity: 0 !important;\n          display: block !important;\n        }\n        paper-search-bar[hidden] {\n          display: none !important;\n        }\n        lrnsys-progress {\n          margin-top: 0.5em;\n          padding: 0.2em 0 0 0;\n          box-sizing: content-box;\n        }\n        lrnsys-progress lrnsys-progress-circle {\n          list-style-type: none;\n          box-sizing: content-box;\n        }\n\n        #bookdrawercontent {\n          overflow: scroll;\n          visibility: visible;\n          display: block;\n          opacity: 1;\n          transition: visibility 1s linear, opacity 1s linear;\n        }\n        @media (max-width: 1200px) {\n          :host .content-body {\n            font-size: 0.94em;\n          }\n        }\n        @media (max-width: 960px) {\n          :host .content-body {\n            font-size: 0.92em;\n          }\n        }\n        @media (max-width: 820px) {\n          :host .content-body {\n            font-size: 0.9em;\n          }\n        }\n        @media (max-width: 700px) {\n          :host .content-body {\n            font-size: 0.9em;\n          }\n        }\n        @media (max-width: 639px) {\n          app-drawer-layout {\n            top: 0;\n          }\n          [main-title] {\n            font-size: 0.8em;\n          }\n          .content-title {\n            font-size: 1.1em;\n          }\n          .outline-title {\n            position: absolute !important;\n            clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n            clip: rect(1px, 1px, 1px, 1px);\n            overflow: hidden;\n            height: 1px;\n          }\n          :host .content-body {\n            margin: 0 0.5em;\n            font-size: 0.9em;\n            width: 85%;\n          }\n          .content-nav-buttons {\n            position: relative;\n            display: flex;\n            top: unset;\n            padding: 0;\n            opacity: 0.8;\n            height: unset;\n            margin: 0;\n          }\n          .content-nav {\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            vertical-align: middle;\n          }\n          .next {\n            right: unset;\n          }\n        }\n        @media (max-width: 500px) {\n          [main-title] {\n            font-size: 0.7em;\n          }\n        }\n\n        :host([edit-mode]) #header {\n          background-color: var(--paper-grey-500);\n        }\n        :host([edit-mode]) #toolbar {\n          opacity: 0.5;\n        }\n        .your-progress-button {\n          padding-right: 1em;\n        }\n        #mapmenu {\n          padding: 1em 0;\n          overflow-x: hidden;\n        }\n        .course-title-drawer {\n          font-size: 1.2em;\n        }\n        /**\n         * Hide the slotted content during edit mode. This must be here to work.\n         */\n        :host([edit-mode]) #slot {\n          display: none;\n        }\n      </style>\n    </custom-style>\n    <page-scroll-position value=\"{{scrollPosition}}\"></page-scroll-position>\n    <div id=\"anchor\"></div>\n    <!-- body where most of the heavy lifting happens -->\n    <app-drawer-layout>\n      <!-- LRNApp book we expect to navigate -->\n      <app-drawer\n        slot=\"drawer\"\n        id=\"bookdrawer\"\n        opened=\"{{drawerOpened}}\"\n        swipe-open=\"\"\n        transition-duration=\"300\"\n      >\n        <div\n          id=\"bookdrawercontent\"\n          style=\"height: 100%; overflow: auto;\"\n          hidden$=\"[[!bookItems]]\"\n        >\n          <paper-search-bar\n            hide-filter-button=\"\"\n            hidden$=\"[[!showSearch]]\"\n          ></paper-search-bar>\n          <map-menu id=\"mapmenu\" manifest=\"[[_routerManifest]]\">\n            <!-- Server response will populate this -->\n          </map-menu>\n        </div>\n      </app-drawer>\n      <app-header-layout>\n        <app-header slot=\"header\" id=\"header\" shadow=\"\" fixed=\"\">\n          <div id=\"outlineloading\" class=\"loading\">\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n          </div>\n          <app-toolbar id=\"toolbar\" sticky=\"\" class=\"tall\">\n            <div style=\"pointer-events: auto;\" class=\"menu-btn-wrap\">\n              <paper-icon-button\n                style=\"pointer-events: auto;\"\n                title=\"Content outline\"\n                id=\"menubutton\"\n                icon=\"menu\"\n                on-tap=\"toggleBook\"\n              ></paper-icon-button>\n            </div>\n            <div spacer=\"\" class=\"outline-title\">[[outlineTitle]]</div>\n            <div spacer=\"\" main-title=\"\" style=\"pointer-events: auto;\">\n              <div class=\"progress-container\">\n                <lrnsys-progress\n                  sound-finish=\"[[soundFinish]]\"\n                  sound=\"[[sound]]\"\n                  complete-sound=\"[[completeSound]]\"\n                  finished-sound=\"[[finishedSound]]\"\n                  title=\"The steps to complete this lesson\"\n                  id=\"progress\"\n                  active=\"{{activePage}}\"\n                  manifest=\"{{manifest}}\"\n                  progressive-unlock=\"\"\n                  size=\"small\"\n                ></lrnsys-progress>\n              </div>\n            </div>\n            <!--\n              <div class=\"your-progress-button\">\n                <lrnsys-dialog body-append modal on-tap=\"progressdashboardopen\" header=\"Your progress\" alt=\"Your progress\">\n                  <span slot=\"button\"><iron-icon icon=\"av:equalizer\"></iron-icon></span>\n                  <div>\n                    <lrnapp-book-progress-dashboard id=\"progressdashboard\" source-path=\"[[progressDashboardPath]]\" route-data=\"[[data]]\"></lrnapp-book-progress-dashboard>\n                  </div>\n                </lrnsys-dialog>\n              </div>\n            -->\n          </app-toolbar>\n        </app-header>\n        <div class=\"content-body\">\n          <div id=\"current\" class=\"content-current\">\n            <h2 id=\"currenttitle\" class=\"content-title\">[[currentTitle]]</h2>\n            <div id=\"bodyloading\" class=\"loading\">\n              <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n              <h3 class=\"loading-text\">Loading content..</h3>\n            </div>\n            <div id=\"contentcontainer\">\n              <div id=\"slot\"><slot></slot></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"content-nav\">\n          <div class=\"content-nav-buttons next\">\n            <paper-icon-button\n              id=\"next\"\n              title=\"[[nextLabel]]\"\n              on-tap=\"_nextBtn\"\n              icon=\"hardware:keyboard-arrow-right\"\n              data-voicecommand=\"next page\"\n              hidden$=\"[[!hasNextPage]]\"\n            ></paper-icon-button>\n            <paper-tooltip\n              for=\"next\"\n              position=\"left\"\n              offset=\"0\"\n              animation-delay=\"100\"\n            >\n              [[nextLabel]]\n            </paper-tooltip>\n          </div>\n          <div class=\"content-nav-buttons prev\">\n            <paper-icon-button\n              id=\"prev\"\n              title=\"[[prevLabel]]\"\n              on-tap=\"_prevBtn\"\n              icon=\"hardware:keyboard-arrow-left\"\n              data-voicecommand=\"previous page\"\n              hidden$=\"[[!hasPrevPage]]\"\n            ></paper-icon-button>\n            <paper-tooltip\n              for=\"prev\"\n              position=\"right\"\n              offset=\"0\"\n              animation-delay=\"100\"\n            >\n              [[prevLabel]]\n            </paper-tooltip>\n          </div>\n        </div>\n      </app-header-layout>\n    </app-drawer-layout>\n  "],["\n    <custom-style>\n      <style is=\"custom-style\" include=\"materializecss-styles\">\n        :host {\n          display: block;\n          font-size: 16px;\n          box-sizing: content-box;\n        }\n        #toolbar {\n          color: gray;\n          background-color: white;\n          padding: 0 8px;\n          margin: 0;\n          height: auto;\n          box-sizing: content-box;\n          transition: all 0.4s ease;\n        }\n        paper-button {\n          padding: 0;\n          margin: 0;\n          min-width: 16px;\n        }\n        app-drawer {\n          padding: 0;\n          top: 0;\n          bottom: 0;\n          z-index: 1;\n          position: absolute;\n          box-sizing: content-box;\n          --app-drawer-content-container: {\n            background-color: #fafafa;\n            padding: 0;\n            border-right: 1px solid #c8c8c8;\n            overflow-y: scroll;\n            width: 300px !important;\n            box-shadow: 0 76px 8px 0 rgba(0, 0, 0, 0.4);\n            height: 100vh;\n            top: 0;\n            position: sticky;\n          }\n        }\n        lrndesign-stepper-button {\n          --lrndesign-stepper-btn-active: #f6f7f7;\n        }\n        lrndesign-stepper-button ::slotted(paper-button) {\n          margin: 0;\n          height: 48px;\n        }\n        lrndesign-stepper-button ::slotted(.title-container) {\n          padding: 0;\n          width: 100%;\n          right: unset;\n        }\n        lrndesign-stepper-button ::slotted(.node-title) {\n          font-size: 15px;\n          line-height: 24px;\n        }\n\n        .loading {\n          width: 100%;\n          z-index: 1000;\n          opacity: 0.9;\n          text-align: center;\n          align-content: space-around;\n          justify-content: center;\n          position: absolute;\n          background-color: white;\n          padding: 0;\n          margin: 0;\n          display: flex;\n          margin: 0 auto;\n          visibility: visible;\n          transition: visibility 1s, opacity 1s ease;\n        }\n        .loading elmsln-loading {\n          margin: 0 5em;\n          display: inline-flex;\n        }\n        #bodyloading {\n          height: 100%;\n          display: flex;\n          justify-content: center;\n        }\n        #bodyloading .loading,\n        #bodyloading elmsln-loading {\n          display: block;\n          height: 5em;\n        }\n        .outline-title {\n          margin-left: 0.5em;\n          max-width: 50%;\n        }\n        .content-nav-buttons {\n          top: 60%;\n          position: fixed;\n          opacity: 0.8;\n          padding: 0 0.25em;\n          height: 40%;\n          padding-top: 15%;\n          margin-top: -15%;\n        }\n        .content-nav-buttons:hover {\n          opacity: 1;\n        }\n        .prev {\n          left: 0;\n          order: 1;\n        }\n        .next {\n          right: 0;\n          transition: right 0.2s ease;\n          order: 2;\n        }\n        app-header {\n          width: 100%;\n          left: 0 !important;\n          z-index: 2 !important;\n          position: sticky !important;\n        }\n        app-header-layout {\n          margin: 0;\n          padding: 0;\n          width: 100%;\n        }\n        .content-body {\n          position: relative;\n          padding: 0;\n          margin: -3em 4em 5em 4em;\n          font-size: 1.1em;\n          transition: margin 0.4s ease, width 0.4s ease;\n        }\n\n        .content-nav-buttons paper-icon-button {\n          width: 4em;\n          height: 4em;\n          opacity: 0.4;\n          display: block;\n          visibility: visible;\n          transition: opacity 0.4s linear, visibility 1s linear,\n            height 0.4s ease, width 0.4s ease;\n        }\n        .content-nav-buttons paper-icon-button:hover {\n          opacity: 1;\n        }\n        paper-tooltip {\n          --paper-tooltip-opacity: 0.96;\n        }\n        :host([drawer-opened]) .content-nav-buttons paper-icon-button {\n          width: 2.5em;\n          height: 2.5em;\n        }\n        :host([edit-mode]) .content-nav-buttons {\n          opacity: 0;\n          pointer-events: none;\n          visibility: hidden;\n        }\n        .content-title {\n          font-size: 1.4em;\n          margin: 0;\n          padding: 0.25em 0;\n          background-color: white;\n          top: 70px;\n          position: sticky;\n        }\n        .content-current {\n          min-height: 100vh;\n        }\n        .content-next {\n          background-color: grey;\n          opacity: 0.8;\n        }\n        #header {\n          position: sticky;\n          top: 0;\n          left: 0;\n          width: 100%;\n          color: black;\n          background-color: white;\n          z-index: 2;\n          padding: 0;\n          margin: 0;\n          opacity: 1;\n          box-sizing: content-box;\n          transition: all 0.4s ease;\n        }\n        app-drawer-layout {\n          font-family: sans-serif;\n        }\n        :host {\n          --app-drawer-width: 300px;\n        }\n        :host([full-width]) {\n          --app-drawer-width: 0px;\n        }\n        :host([drawer-opened]) .prev,\n        :host([edit-mode]) .prev {\n          left: 19em;\n        }\n        .progress-container {\n          width: 90%;\n          padding: 0;\n          margin: 0 0 0 1em;\n          overflow: visible;\n        }\n\n        [main-title] {\n          font-weight: lighter;\n          padding: 0.6em 0 0 0;\n          margin: 0;\n          height: 3em;\n          overflow-y: scroll;\n        }\n        [hidden] {\n          visibility: hidden !important;\n          opacity: 0 !important;\n          display: block !important;\n        }\n        paper-search-bar[hidden] {\n          display: none !important;\n        }\n        lrnsys-progress {\n          margin-top: 0.5em;\n          padding: 0.2em 0 0 0;\n          box-sizing: content-box;\n        }\n        lrnsys-progress lrnsys-progress-circle {\n          list-style-type: none;\n          box-sizing: content-box;\n        }\n\n        #bookdrawercontent {\n          overflow: scroll;\n          visibility: visible;\n          display: block;\n          opacity: 1;\n          transition: visibility 1s linear, opacity 1s linear;\n        }\n        @media (max-width: 1200px) {\n          :host .content-body {\n            font-size: 0.94em;\n          }\n        }\n        @media (max-width: 960px) {\n          :host .content-body {\n            font-size: 0.92em;\n          }\n        }\n        @media (max-width: 820px) {\n          :host .content-body {\n            font-size: 0.9em;\n          }\n        }\n        @media (max-width: 700px) {\n          :host .content-body {\n            font-size: 0.9em;\n          }\n        }\n        @media (max-width: 639px) {\n          app-drawer-layout {\n            top: 0;\n          }\n          [main-title] {\n            font-size: 0.8em;\n          }\n          .content-title {\n            font-size: 1.1em;\n          }\n          .outline-title {\n            position: absolute !important;\n            clip: rect(1px 1px 1px 1px); /* IE6, IE7 */\n            clip: rect(1px, 1px, 1px, 1px);\n            overflow: hidden;\n            height: 1px;\n          }\n          :host .content-body {\n            margin: 0 0.5em;\n            font-size: 0.9em;\n            width: 85%;\n          }\n          .content-nav-buttons {\n            position: relative;\n            display: flex;\n            top: unset;\n            padding: 0;\n            opacity: 0.8;\n            height: unset;\n            margin: 0;\n          }\n          .content-nav {\n            width: 100%;\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            vertical-align: middle;\n          }\n          .next {\n            right: unset;\n          }\n        }\n        @media (max-width: 500px) {\n          [main-title] {\n            font-size: 0.7em;\n          }\n        }\n\n        :host([edit-mode]) #header {\n          background-color: var(--paper-grey-500);\n        }\n        :host([edit-mode]) #toolbar {\n          opacity: 0.5;\n        }\n        .your-progress-button {\n          padding-right: 1em;\n        }\n        #mapmenu {\n          padding: 1em 0;\n          overflow-x: hidden;\n        }\n        .course-title-drawer {\n          font-size: 1.2em;\n        }\n        /**\n         * Hide the slotted content during edit mode. This must be here to work.\n         */\n        :host([edit-mode]) #slot {\n          display: none;\n        }\n      </style>\n    </custom-style>\n    <page-scroll-position value=\"{{scrollPosition}}\"></page-scroll-position>\n    <div id=\"anchor\"></div>\n    <!-- body where most of the heavy lifting happens -->\n    <app-drawer-layout>\n      <!-- LRNApp book we expect to navigate -->\n      <app-drawer\n        slot=\"drawer\"\n        id=\"bookdrawer\"\n        opened=\"{{drawerOpened}}\"\n        swipe-open=\"\"\n        transition-duration=\"300\"\n      >\n        <div\n          id=\"bookdrawercontent\"\n          style=\"height: 100%; overflow: auto;\"\n          hidden\\$=\"[[!bookItems]]\"\n        >\n          <paper-search-bar\n            hide-filter-button=\"\"\n            hidden\\$=\"[[!showSearch]]\"\n          ></paper-search-bar>\n          <map-menu id=\"mapmenu\" manifest=\"[[_routerManifest]]\">\n            <!-- Server response will populate this -->\n          </map-menu>\n        </div>\n      </app-drawer>\n      <app-header-layout>\n        <app-header slot=\"header\" id=\"header\" shadow=\"\" fixed=\"\">\n          <div id=\"outlineloading\" class=\"loading\">\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n            <elmsln-loading color=\"grey-text\" size=\"medium\"></elmsln-loading>\n          </div>\n          <app-toolbar id=\"toolbar\" sticky=\"\" class=\"tall\">\n            <div style=\"pointer-events: auto;\" class=\"menu-btn-wrap\">\n              <paper-icon-button\n                style=\"pointer-events: auto;\"\n                title=\"Content outline\"\n                id=\"menubutton\"\n                icon=\"menu\"\n                on-tap=\"toggleBook\"\n              ></paper-icon-button>\n            </div>\n            <div spacer=\"\" class=\"outline-title\">[[outlineTitle]]</div>\n            <div spacer=\"\" main-title=\"\" style=\"pointer-events: auto;\">\n              <div class=\"progress-container\">\n                <lrnsys-progress\n                  sound-finish=\"[[soundFinish]]\"\n                  sound=\"[[sound]]\"\n                  complete-sound=\"[[completeSound]]\"\n                  finished-sound=\"[[finishedSound]]\"\n                  title=\"The steps to complete this lesson\"\n                  id=\"progress\"\n                  active=\"{{activePage}}\"\n                  manifest=\"{{manifest}}\"\n                  progressive-unlock=\"\"\n                  size=\"small\"\n                ></lrnsys-progress>\n              </div>\n            </div>\n            <!--\n              <div class=\"your-progress-button\">\n                <lrnsys-dialog body-append modal on-tap=\"progressdashboardopen\" header=\"Your progress\" alt=\"Your progress\">\n                  <span slot=\"button\"><iron-icon icon=\"av:equalizer\"></iron-icon></span>\n                  <div>\n                    <lrnapp-book-progress-dashboard id=\"progressdashboard\" source-path=\"[[progressDashboardPath]]\" route-data=\"[[data]]\"></lrnapp-book-progress-dashboard>\n                  </div>\n                </lrnsys-dialog>\n              </div>\n            -->\n          </app-toolbar>\n        </app-header>\n        <div class=\"content-body\">\n          <div id=\"current\" class=\"content-current\">\n            <h2 id=\"currenttitle\" class=\"content-title\">[[currentTitle]]</h2>\n            <div id=\"bodyloading\" class=\"loading\">\n              <elmsln-loading color=\"grey-text\" size=\"large\"></elmsln-loading>\n              <h3 class=\"loading-text\">Loading content..</h3>\n            </div>\n            <div id=\"contentcontainer\">\n              <div id=\"slot\"><slot></slot></div>\n            </div>\n          </div>\n        </div>\n        <div class=\"content-nav\">\n          <div class=\"content-nav-buttons next\">\n            <paper-icon-button\n              id=\"next\"\n              title=\"[[nextLabel]]\"\n              on-tap=\"_nextBtn\"\n              icon=\"hardware:keyboard-arrow-right\"\n              data-voicecommand=\"next page\"\n              hidden\\$=\"[[!hasNextPage]]\"\n            ></paper-icon-button>\n            <paper-tooltip\n              for=\"next\"\n              position=\"left\"\n              offset=\"0\"\n              animation-delay=\"100\"\n            >\n              [[nextLabel]]\n            </paper-tooltip>\n          </div>\n          <div class=\"content-nav-buttons prev\">\n            <paper-icon-button\n              id=\"prev\"\n              title=\"[[prevLabel]]\"\n              on-tap=\"_prevBtn\"\n              icon=\"hardware:keyboard-arrow-left\"\n              data-voicecommand=\"previous page\"\n              hidden\\$=\"[[!hasPrevPage]]\"\n            ></paper-icon-button>\n            <paper-tooltip\n              for=\"prev\"\n              position=\"right\"\n              offset=\"0\"\n              animation-delay=\"100\"\n            >\n              [[prevLabel]]\n            </paper-tooltip>\n          </div>\n        </div>\n      </app-header-layout>\n    </app-drawer-layout>\n  "]);_templateObject_40688800490411e990ee3fd35bb8725b=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_40688800490411e990ee3fd35bb8725b()),is:"lrnapp-book",behaviors:[HAXCMSBehaviors.Theme],properties:{progressDashboardPath:{type:String},showSearch:{type:Boolean,reflectToAttribute:!0,value:!1},sourcePath:{type:String},editMode:{type:Boolean,reflectToAttribute:!0,value:!1,notify:!0,observer:"_editModeChanged"},drawerOpened:{type:Boolean,value:!0,reflectToAttribute:!0},currentTitle:{type:String},outlineTitle:{type:String},bookTitle:{type:String,value:"Course outline"},soundFinish:{type:Boolean,value:!0},sound:{type:Boolean,value:!0},completeSound:{type:String,value:""},finishedSound:{type:String,value:""},scrollPosition:{type:Number,value:0,observer:"_scrollChanged"},activePage:{type:Number,value:0,observer:"_activePageChanged"},activeOutline:{type:Number,value:0,observer:"_activeOutlineChanged"},outlineItems:{type:Array,value:[],notify:!0,observer:"_outlineItemsChanged"},bookItems:{type:Array,notify:!0},itemResponses:{type:Array,value:[]},requestParams:{type:Object,notify:!0,value:{node:null}},pageParams:{type:Object,notify:!0,value:{load:!1}},outlineData:{type:Object,notify:!0},bookData:{type:Object,notify:!0},pageData:{type:Object,notify:!0},outlinePath:{type:String},bookPath:{type:String},pagePath:{type:String},hasPrevPage:{type:Boolean,notify:!0},prevLabel:{type:String},hasNextPage:{type:Boolean,notify:!0},nextLabel:{type:String},resetScroll:{type:Boolean,value:!1},currentPageData:{type:Object,value:{},observer:"_currentPageDataUpdated"},manifest:{type:Object,value:{},observer:"_manifestChanged"},rebuildOutline:{type:Boolean,value:!1},fullWidth:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_fullWidthChanged"},_routerManifest:{type:Object,value:{}}},ready:function ready(){var _this=this;this.setupHAXTheme(!0,this.$.contentcontainer);window.dispatchEvent(new CustomEvent("haxcms-router-manifest-subscribe",{detail:{callback:"_haxcmsRouterManifestSubscribeHandler",scope:this,setup:!0}}));window.SimpleToast.requestAvailability();this.$.bodyloading.hidden=!0;setTimeout(function(){_this._resetScroll()},500)},attached:function attached(){this.$.progress.addEventListener("node-percent-milestone",this.testMilestone.bind(this));this.$.mapmenu.addEventListener("link-clicked",this._menuItemClicked.bind(this))},detached:function detached(){this.setupHAXTheme(!1);this.$.progress.removeEventListener("node-percent-milestone",this.testMilestone.bind(this));this.$.mapmenu.removeEventListener("link-clicked",this._menuItemClicked.bind(this))},_haxcmsRouterManifestSubscribeHandler:function _haxcmsRouterManifestSubscribeHandler(e){this._routerManifest={};this._routerManifest=e.detail},_menuItemClicked:function _menuItemClicked(e){var i=this.manifest.items.findIndex(function(j){return j.id===e.detail.id});this.activePage=i},_fullWidthChanged:function _fullWidthChanged(){this.updateStyles()},progressdashboardopen:function progressdashboardopen(){this.$.progressdashboard.showProgress=!0},_computePageUpdatePath:function _computePageUpdatePath(data,sourcePath){return sourcePath.replace("%",data.id)},_editModeChanged:function _editModeChanged(newValue,oldValue){if(babelHelpers.typeof(newValue)!=="undefined"){if(!0===newValue){this.$.currenttitle.contentEditable=!0;this.resetScroll=!0;new CustomEvent("simple-toast-show",{bubbles:!0,cancelable:!0,detail:{text:"Editor mode active",duration:5e3}})}else{this.$.currenttitle.contentEditable=!1;this.resetScroll=!1;if(!0===oldValue){if(this.$.currenttitle.innerHTML!==this.currentPageData.title){this.currentPageData.title=this.$.currenttitle.innerHTML}var _evt=new CustomEvent("simple-toast-show",{bubbles:!0,cancelable:!0,detail:{text:"Saved",duration:0}});this.dispatchEvent(_evt)}}}},_activeOutlineChanged:function _activeOutlineChanged(newValue,oldValue){if(babelHelpers.typeof(newValue)!=="undefined"&&babelHelpers.typeof(oldValue)!=="undefined"){this.rebuildOutline=!0}},_resetScroll:function _resetScroll(){this.resetScroll=!0;this.scrollPosition=0;this.$.anchor.scrollIntoView({block:"start",behavior:"smooth",inline:"nearest"})},_activePageChanged:function _activePageChanged(newValue,oldValue){var _this2=this;if(babelHelpers.typeof(newValue)!=="undefined"){if(babelHelpers.typeof(this.outlineItems)!=="undefined"&&0<this.outlineItems.length){this.fire("json-outline-schema-active-item-changed",this.outlineItems[newValue])}if(babelHelpers.typeof(oldValue)!=="undefined"){}setTimeout(function(){_this2.resetScroll=!1},1e3);if(0==newValue){this.hasPrevPage=!1}else{this.hasPrevPage=!0;if(babelHelpers.typeof(this.outlineItems)!=="undefined"){this.prevLabel=this.outlineItems[newValue-1].title}}if(babelHelpers.typeof(this.outlineItems)!=="undefined"&&newValue+1==this.outlineItems.length){this.hasNextPage=!1}else{this.hasNextPage=!0;if(babelHelpers.typeof(this.outlineItems)!=="undefined"){this.nextLabel=this.outlineItems[newValue+1].title}}}},_outlineItemsChanged:function _outlineItemsChanged(newValue){if(babelHelpers.typeof(newValue)!=="undefined"&&0!=newValue.length){if(0!=this.activePage){this.prevLabel=newValue[this.activePage-1].title}if(this.activePage+1!=newValue.length){this.nextLabel=newValue[this.activePage+1].title}}},testMilestone:function testMilestone(e){if(75==e.detail.percentage){console.log("@todo preload the next page and present grayed out right of UI.")}},_scrollChanged:function _scrollChanged(newValue){if(babelHelpers.typeof(this.outlineItems)!=="undefined"&&babelHelpers.typeof(this.outlineItems[this.activePage])!=="undefined"&&newValue>this.outlineItems[this.activePage].metadata.value&&!this.resetScroll){if(75<=newValue){this.outlineItems[this.activePage].metadata.value=this.outlineItems[this.activePage].metadata.max;this.set("outlineItems."+this.activePage+".metadata.value",this.outlineItems[this.activePage].metadata.max)}else{this.outlineItems[this.activePage].metadata.value=newValue;this.set("outlineItems."+this.activePage+".metadata.value",newValue)}}},_nextBtn:function _nextBtn(){if(this.activePage<this.outlineItems.length-1){this.set("outlineItems."+this.activePage+".metadata.value",this.outlineItems[this.activePage].metadata.max);this.activePage=this.activePage+1}},_prevBtn:function _prevBtn(){if(0<this.activePage){this.activePage=this.activePage-1}},toggleBook:function toggleBook(){this.$.bookdrawer.toggle();this.fullWidth=!this.$.bookdrawer.opened},_manifestChanged:function _manifestChanged(newValue){if(babelHelpers.typeof(newValue)!=="undefined"){var items=newValue.items,outlineTitle=newValue.title;if(0!==this.activePage){this.activePage=0}this.set("outlineItems",[]);this.set("outlineItems",items);this.notifyPath("outlineItems.*");this.set("bookItems",[]);this.set("bookItems",items);this.notifyPath("bookItems.*");this.set("outlineTitle",outlineTitle);this.$.outlineloading.hidden=!0;this.pageParams.load=!0}},_currentPageDataUpdated:function _currentPageDataUpdated(newValue){if(babelHelpers.typeof(newValue)!=="undefined"&&babelHelpers.typeof(newValue.content)!=="undefined"){this.set("currentTitle",newValue.title);this._resetScroll();this.$.bodyloading.hidden=!0;if(this.editMode&&!newValue.page.meta.canUpdate){this.editMode=!1}}},_toArray:function _toArray(obj){return Object.keys(obj).map(function(key){return obj[key]})}})});