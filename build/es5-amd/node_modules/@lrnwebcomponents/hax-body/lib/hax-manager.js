var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <custom-style>\n      <style is=\"custom-style\" include=\"materializecss-styles simple-colors\">\n        :host {\n          display: block;\n          --hax-manager-steps-color: #ffffff;\n          --hax-manager-ink-color: #ffffff;\n          --hax-accent: var(--simple-colors-default-theme-light-green-1);\n          color: #ffffff;\n        }\n        #dialog {\n          color: #ffffff;\n          z-index: 10000;\n          padding: 56px 0;\n          margin-top: 64px;\n          --app-drawer-width: 400px;\n          --app-drawer-content-container: {\n            background-color: rgba(0, 0, 0, 0.7);\n          }\n        }\n        #closedialog {\n          float: right;\n          top: 135px;\n          right: 0;\n          position: absolute;\n          padding: 4px;\n          margin: 0;\n          color: var(--simple-colors-default-theme-light-green-1, green);\n          background-color: transparent;\n          width: 40px;\n          height: 40px;\n          min-width: unset;\n        }\n        :host([active-page=\"0\"]) #dialog {\n          --app-drawer-width: 400px;\n        }\n        :host([active-page=\"1\"]) #dialog {\n          --app-drawer-width: 800px;\n        }\n        :host([active-page=\"2\"]) #dialog {\n          --app-drawer-width: 800px;\n        }\n        :host([active-step]) #dialog {\n          --app-drawer-width: 1000px;\n        }\n        :host([searching]) #dialog {\n          --app-drawer-width: 1000px;\n        }\n        .title {\n          text-align: center;\n          padding: 16px;\n          margin: 0;\n          background-color: rgba(0, 0, 0, 0.5);\n          font-size: 32px;\n          font-weight: bold;\n          font-family: sans-serif;\n          text-transform: uppercase;\n          color: var(--simple-colors-default-theme-light-green-1);\n        }\n        #activepage {\n        }\n        #preview {\n          height: 100%;\n        }\n        vaadin-upload {\n          --primary-color: var(--hax-accent);\n          --primary-font-color: #ffffff;\n          --dark-primary-color: #ffffff;\n          --light-primary-color: var(--hax-accent);\n          --error-color: darkred;\n          color: #ffffff;\n          display: block;\n          padding: 32px !important;\n          --vaadin-upload-button-add-wrapper: {\n            border: 2px solid #ffffff;\n            background-color: var(--hax-accent);\n            color: #ffffff;\n            display: block;\n          }\n          --vaadin-upload-buttons-primary: {\n            display: block;\n            width: 100%;\n            flex: unset;\n            -webkit-flex: unset;\n          }\n          --vaadin-upload-button-add: {\n            color: #000000;\n            display: block;\n            flex: unset;\n            -webkit-flex: unset;\n            text-align: center;\n          }\n          --vaadin-upload-drop-label: {\n            color: #ffffff;\n            display: block;\n            padding: 16px;\n          }\n          --vaadin-upload-drop-label-dragover: {\n            color: #ffffff;\n          }\n          --vaadin-upload-file-list: {\n            padding: 16px;\n            margin: 0;\n            color: #ffffff;\n          }\n          --vaadin-upload-file: {\n            color: #ffffff;\n          }\n        }\n        vaadin-upload[dragover] {\n          border-color: #396;\n        }\n        vaadin-upload-file {\n          --disabled-text-color: #222222;\n        }\n        .add-area-content-wrapper {\n          padding: 0 16px;\n        }\n        .add-url-are,\n        .add-upload-area {\n          margin: 16px 0;\n        }\n        .url-description {\n          font-size: 18px;\n          color: #ffffff;\n          line-height: 22px;\n          font-family: sans-serif;\n          letter-spacing: 1px;\n        }\n        #steppages {\n          height: 100%;\n        }\n        #newassetconfigure {\n          width: 100%;\n          margin: 0;\n          padding: 16px;\n          background-color: var(--simple-colors-default-theme-light-green-1);\n          color: #000000;\n        }\n        paper-input {\n          color: #ffffff;\n          --paper-input-container-invalid-color: var(\n            --simple-colors-red-foreground3\n          );\n          --secondary-text-color: #ffffff;\n          --primary-text-color: #ffffff;\n          --paper-input-container-input-color: #ffffff;\n          --paper-input-container-color: #ffffff;\n          --paper-input-container-focus-color: var(\n            --simple-colors-default-theme-light-green-1\n          );\n        }\n        @media screen and (max-width: 550px) {\n          .hide-on-mobile {\n            opacity: 0;\n            visibility: hidden;\n            position: absolute;\n            left: -9999px;\n          }\n          .page-area.hax-manager {\n            padding: 6px;\n          }\n        }\n      </style>\n    </custom-style>\n    <app-drawer id=\"dialog\" opened=\"{{opened}}\" disable-swipe=\"\">\n      <div\n        class=\"dialog-contents\"\n        id=\"dialogcontent\"\n        style=\"height: 100%; overflow: auto;\"\n      >\n        <iron-pages\n          id=\"steppages\"\n          selected=\"{{activeStep}}\"\n          fallback-selection=\"select\"\n          role=\"main\"\n        >\n          <div data-value=\"select\">\n            <iron-pages\n              id=\"activepage\"\n              selected=\"{{activePage}}\"\n              fallback-selection=\"link\"\n            >\n              <div class=\"page-area add-area\">\n                <h3 class=\"title\">[[addTitle]]</h3>\n                <div class=\"add-area-content-wrapper\">\n                  <div class=\"add-url-area\">\n                    <paper-input\n                      id=\"url\"\n                      label=\"URL\"\n                      type=\"url\"\n                      auto-validate=\"\"\n                    ></paper-input>\n                    <div class=\"url-description\">\n                      A full URL with https:// referencing a link that already\n                      exists on the web.\n                    </div>\n                  </div>\n                  <div class=\"add-upload-area\">\n                    <vaadin-upload\n                      form-data-name=\"file-upload\"\n                      id=\"fileupload\"\n                      hidden$=\"[[!canSupportUploads]]\"\n                    ></vaadin-upload>\n                  </div>\n                  <paper-button id=\"newassetconfigure\" raised=\"\"\n                    >Configure item</paper-button\n                  >\n                </div>\n              </div>\n              <div class=\"page-area\">\n                <hax-app-browser id=\"appbrowser\">\n                  <slot></slot>\n                </hax-app-browser>\n              </div>\n              <div class=\"page-area\">\n                <hax-gizmo-browser id=\"gizmobrowser\"></hax-gizmo-browser>\n              </div>\n            </iron-pages>\n          </div>\n          <div style=\"height:100%;\">\n            <hax-preview\n              id=\"preview\"\n              element=\"{{activeHaxElement}}\"\n            ></hax-preview>\n          </div>\n        </iron-pages>\n        <paper-button id=\"closedialog\" on-tap=\"cancel\">\n          <iron-icon icon=\"icons:cancel\" title=\"Close dialog\"></iron-icon>\n        </paper-button>\n      </div>\n    </app-drawer>\n  "],["\n    <custom-style>\n      <style is=\"custom-style\" include=\"materializecss-styles simple-colors\">\n        :host {\n          display: block;\n          --hax-manager-steps-color: #ffffff;\n          --hax-manager-ink-color: #ffffff;\n          --hax-accent: var(--simple-colors-default-theme-light-green-1);\n          color: #ffffff;\n        }\n        #dialog {\n          color: #ffffff;\n          z-index: 10000;\n          padding: 56px 0;\n          margin-top: 64px;\n          --app-drawer-width: 400px;\n          --app-drawer-content-container: {\n            background-color: rgba(0, 0, 0, 0.7);\n          }\n        }\n        #closedialog {\n          float: right;\n          top: 135px;\n          right: 0;\n          position: absolute;\n          padding: 4px;\n          margin: 0;\n          color: var(--simple-colors-default-theme-light-green-1, green);\n          background-color: transparent;\n          width: 40px;\n          height: 40px;\n          min-width: unset;\n        }\n        :host([active-page=\"0\"]) #dialog {\n          --app-drawer-width: 400px;\n        }\n        :host([active-page=\"1\"]) #dialog {\n          --app-drawer-width: 800px;\n        }\n        :host([active-page=\"2\"]) #dialog {\n          --app-drawer-width: 800px;\n        }\n        :host([active-step]) #dialog {\n          --app-drawer-width: 1000px;\n        }\n        :host([searching]) #dialog {\n          --app-drawer-width: 1000px;\n        }\n        .title {\n          text-align: center;\n          padding: 16px;\n          margin: 0;\n          background-color: rgba(0, 0, 0, 0.5);\n          font-size: 32px;\n          font-weight: bold;\n          font-family: sans-serif;\n          text-transform: uppercase;\n          color: var(--simple-colors-default-theme-light-green-1);\n        }\n        #activepage {\n        }\n        #preview {\n          height: 100%;\n        }\n        vaadin-upload {\n          --primary-color: var(--hax-accent);\n          --primary-font-color: #ffffff;\n          --dark-primary-color: #ffffff;\n          --light-primary-color: var(--hax-accent);\n          --error-color: darkred;\n          color: #ffffff;\n          display: block;\n          padding: 32px !important;\n          --vaadin-upload-button-add-wrapper: {\n            border: 2px solid #ffffff;\n            background-color: var(--hax-accent);\n            color: #ffffff;\n            display: block;\n          }\n          --vaadin-upload-buttons-primary: {\n            display: block;\n            width: 100%;\n            flex: unset;\n            -webkit-flex: unset;\n          }\n          --vaadin-upload-button-add: {\n            color: #000000;\n            display: block;\n            flex: unset;\n            -webkit-flex: unset;\n            text-align: center;\n          }\n          --vaadin-upload-drop-label: {\n            color: #ffffff;\n            display: block;\n            padding: 16px;\n          }\n          --vaadin-upload-drop-label-dragover: {\n            color: #ffffff;\n          }\n          --vaadin-upload-file-list: {\n            padding: 16px;\n            margin: 0;\n            color: #ffffff;\n          }\n          --vaadin-upload-file: {\n            color: #ffffff;\n          }\n        }\n        vaadin-upload[dragover] {\n          border-color: #396;\n        }\n        vaadin-upload-file {\n          --disabled-text-color: #222222;\n        }\n        .add-area-content-wrapper {\n          padding: 0 16px;\n        }\n        .add-url-are,\n        .add-upload-area {\n          margin: 16px 0;\n        }\n        .url-description {\n          font-size: 18px;\n          color: #ffffff;\n          line-height: 22px;\n          font-family: sans-serif;\n          letter-spacing: 1px;\n        }\n        #steppages {\n          height: 100%;\n        }\n        #newassetconfigure {\n          width: 100%;\n          margin: 0;\n          padding: 16px;\n          background-color: var(--simple-colors-default-theme-light-green-1);\n          color: #000000;\n        }\n        paper-input {\n          color: #ffffff;\n          --paper-input-container-invalid-color: var(\n            --simple-colors-red-foreground3\n          );\n          --secondary-text-color: #ffffff;\n          --primary-text-color: #ffffff;\n          --paper-input-container-input-color: #ffffff;\n          --paper-input-container-color: #ffffff;\n          --paper-input-container-focus-color: var(\n            --simple-colors-default-theme-light-green-1\n          );\n        }\n        @media screen and (max-width: 550px) {\n          .hide-on-mobile {\n            opacity: 0;\n            visibility: hidden;\n            position: absolute;\n            left: -9999px;\n          }\n          .page-area.hax-manager {\n            padding: 6px;\n          }\n        }\n      </style>\n    </custom-style>\n    <app-drawer id=\"dialog\" opened=\"{{opened}}\" disable-swipe=\"\">\n      <div\n        class=\"dialog-contents\"\n        id=\"dialogcontent\"\n        style=\"height: 100%; overflow: auto;\"\n      >\n        <iron-pages\n          id=\"steppages\"\n          selected=\"{{activeStep}}\"\n          fallback-selection=\"select\"\n          role=\"main\"\n        >\n          <div data-value=\"select\">\n            <iron-pages\n              id=\"activepage\"\n              selected=\"{{activePage}}\"\n              fallback-selection=\"link\"\n            >\n              <div class=\"page-area add-area\">\n                <h3 class=\"title\">[[addTitle]]</h3>\n                <div class=\"add-area-content-wrapper\">\n                  <div class=\"add-url-area\">\n                    <paper-input\n                      id=\"url\"\n                      label=\"URL\"\n                      type=\"url\"\n                      auto-validate=\"\"\n                    ></paper-input>\n                    <div class=\"url-description\">\n                      A full URL with https:// referencing a link that already\n                      exists on the web.\n                    </div>\n                  </div>\n                  <div class=\"add-upload-area\">\n                    <vaadin-upload\n                      form-data-name=\"file-upload\"\n                      id=\"fileupload\"\n                      hidden\\$=\"[[!canSupportUploads]]\"\n                    ></vaadin-upload>\n                  </div>\n                  <paper-button id=\"newassetconfigure\" raised=\"\"\n                    >Configure item</paper-button\n                  >\n                </div>\n              </div>\n              <div class=\"page-area\">\n                <hax-app-browser id=\"appbrowser\">\n                  <slot></slot>\n                </hax-app-browser>\n              </div>\n              <div class=\"page-area\">\n                <hax-gizmo-browser id=\"gizmobrowser\"></hax-gizmo-browser>\n              </div>\n            </iron-pages>\n          </div>\n          <div style=\"height:100%;\">\n            <hax-preview\n              id=\"preview\"\n              element=\"{{activeHaxElement}}\"\n            ></hax-preview>\n          </div>\n        </iron-pages>\n        <paper-button id=\"closedialog\" on-tap=\"cancel\">\n          <iron-icon icon=\"icons:cancel\" title=\"Close dialog\"></iron-icon>\n        </paper-button>\n      </div>\n    </app-drawer>\n  "]);import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import{dom}from"@polymer/polymer/lib/legacy/polymer.dom.js";import"@polymer/app-layout/app-drawer/app-drawer.js";import"@polymer/paper-input/paper-input.js";import"@polymer/paper-styles/paper-styles.js";import"@polymer/paper-button/paper-button.js";import"@polymer/paper-icon-button/paper-icon-button.js";import"@polymer/iron-pages/iron-pages.js";import"@polymer/iron-icons/iron-icons.js";import"@polymer/iron-icon/iron-icon.js";import"@lrnwebcomponents/simple-colors/simple-colors.js";import"@vaadin/vaadin-upload/vaadin-upload.js";import"@lrnwebcomponents/materializecss-styles/materializecss-styles.js";import"./hax-preview.js";import"./hax-app-browser.js";import"./hax-gizmo-browser.js";Polymer({_template:html(_templateObject),is:"hax-manager",properties:{opened:{type:Boolean,value:!1,reflectToAttribute:!0,observer:"_openedChanged"},editExistingNode:{type:Boolean,value:!1},editTitle:{type:String,computed:"_computeEditTitle(editExistingNode)"},addTitle:{type:String,value:"Add content"},activeStep:{type:Boolean,reflectToAttribute:!0,value:!1,observer:"_activeStepChanged"},searching:{type:Boolean,reflectToAttribute:!0,value:!1},activePage:{type:String,reflectToAttribute:!0,value:0,observer:"_activePageChanged"},canSupportUploads:{type:Boolean,value:!1},activeHaxElement:{type:Object,observer:"_activeHaxElementChanged"},appList:{type:Array,value:[]},__allowUpload:{type:Boolean,value:!1},appendJwt:{type:String,value:null},appendUploadEndPoint:{type:String,value:null}},created:function(){this.__attached=!1},attached:function(){this.__attached?(this.fire("hax-register-manager",this),document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),document.body.addEventListener("hax-app-picker-selection",this._haxAppPickerSelection.bind(this)),document.body.addEventListener("place-holder-file-drop",this._placeHolderFileDrop.bind(this)),this.$.dialog.addEventListener("iron-overlay-canceled",this.close.bind(this)),this.$.dialog.addEventListener("iron-overlay-closed",this.close.bind(this)),this.$.closedialog.addEventListener("tap",this.close.bind(this)),this.$.newassetconfigure.addEventListener("tap",this.newAssetConfigure.bind(this)),this.$.fileupload.addEventListener("upload-before",this._fileAboutToUpload.bind(this)),this.$.fileupload.addEventListener("upload-response",this._fileUploadResponse.bind(this))):(this.__attached=!0,document.body.appendChild(this))},detached:function(){document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),document.body.removeEventListener("hax-app-picker-selection",this._haxAppPickerSelection.bind(this)),document.body.removeEventListener("place-holder-file-drop",this._placeHolderFileDrop.bind(this)),this.$.dialog.removeEventListener("iron-overlay-canceled",this.close.bind(this)),this.$.dialog.removeEventListener("iron-overlay-closed",this.close.bind(this)),this.$.closedialog.removeEventListener("tap",this.close.bind(this)),this.$.newassetconfigure.removeEventListener("tap",this.newAssetConfigure.bind(this)),this.$.fileupload.removeEventListener("upload-before",this._fileAboutToUpload.bind(this)),this.$.fileupload.removeEventListener("upload-response",this._fileUploadResponse.bind(this))},togglePanelSize:function(){this.$.dialog.classList.toggle("grow"),this.updateStyles(),window.dispatchEvent(new Event("resize"))},_computeEditTitle:function(b){return babelHelpers.typeof(this.activeHaxElement)!=="undefined"&&b?"Update":"Insert"},_placeHolderFileDrop:function(b){this.resetManager(),this.open(),window.HaxStore.instance.activePlaceHolder=b.detail.placeHolderElement,this.$.fileupload._onDrop(b.detail)},_fileAboutToUpload:function(b){if(!this.__allowUpload){b.preventDefault(),b.stopPropagation();var c={source:b.detail.file.name,type:b.detail.file.type},d=window.HaxStore.guessGizmoType(c),f=window.HaxStore.getHaxAppStoreTargets(d);0==f.length?window.HaxStore.toast("Sorry, you don't have a storage location that can handle "+d+" uploads!",5e3):window.HaxStore.instance.haxAppPicker.presentOptions(f,d,"Where would you like to upload this "+d+"?","app")}else this.__allowUpload=!1},_haxAppPickerSelection:function(b){var c=b.detail.connection;this.__appUsed=b.detail,this.$.fileupload.method=c.operations.add.method;var d=c.protocol+"://"+c.url;"/"!=d.substr(d.length-1)&&(d+="/"),babelHelpers.typeof(c.operations.add.endPoint)!=="undefined"&&(d+=c.operations.add.endPoint),null!=this.appendUploadEndPoint&&(d+="?"+this.appendUploadEndPoint),null!=this.appendJwt&&(d+="&"+this.appendJwt+"="+localStorage.getItem(this.appendJwt)),this.$.fileupload.headers=c.headers,this.$.fileupload.target=d,this.__allowUpload=!0,this.$.fileupload.uploadFiles()},_fileUploadResponse:function(b){var c=JSON.parse(b.detail.xhr.response),d=this.__appUsed.connection.operations.add.resultMap,f={},g={};for(var h in babelHelpers.typeof(this._resolveObjectPath(d.item,c))!=="undefined"&&(f=this._resolveObjectPath(d.item,c)),g.type=d.defaultGizmoType,d.gizmo)g[h]=this._resolveObjectPath(d.gizmo[h],f);babelHelpers.typeof(g.url)==="undefined"&&babelHelpers.typeof(g.source)!=="undefined"&&(g.url=g.source),babelHelpers.typeof(d.gizmo.type)!=="undefined"&&(g.type=this._resolveObjectPath(d.gizmo.type,f)),this.$.url.value=g.url,this.newAssetConfigure()},_activePageChanged:function(b){("undefined"===typeof b?"undefined":babelHelpers.typeof(b))!=="undefined"&&(this.searching=!1,this.updateStyles(),1===b?this.$.appbrowser.resetBrowser():2===b&&this.$.gizmobrowser.resetBrowser())},_haxStorePropertyUpdated:function(b){b.detail&&babelHelpers.typeof(b.detail.value)!=="undefined"&&b.detail.property&&this.set(b.detail.property,b.detail.value)},_activeHaxElementChanged:function(b,c){("undefined"===typeof c?"undefined":babelHelpers.typeof(c))!=="undefined"&&(this.$.preview.advancedForm=!1,babelHelpers.typeof(b.tag)==="undefined"?this.resetManager():(this.$.fileupload.set("files",[]),this.$.dialog.scrollTop=0,this.selectStep("configure")))},insertHaxElement:function(){var c=this.$.preview.previewNode,d=window.HaxStore.nodeToHaxElement(c);d.replace=this.editExistingNode,babelHelpers.typeof(this.activeHaxElement.__type)!=="undefined"&&(d.__type=this.activeHaxElement.__type),d.replacement=c,this.fire("hax-insert-content",d);var f="New element added!";this.editExistingNode&&(f="Element updated!"),window.HaxStore.toast(f,2e3),this.close()},resetManager:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:0;this.selectStep("select"),this.activePage=b,document.body.style.overflow=null,this.appList=window.HaxStore.instance.appList,this.searching=!1,window.HaxStore.write("activeApp",null,this),window.dispatchEvent(new Event("resize")),this.editExistingNode=!1,this.$.url.value="",this.$.fileupload.headers="",this.$.fileupload.method="",this.$.fileupload.target="",this.__allowUpload=!1},cancel:function(){this.close()},_openedChanged:function(b,c){c&&!b?document.body.style.overflow=null:b&&!c&&(document.body.style.overflow="hidden")},close:function(b){var c=dom(b),d=c.localTarget;(("undefined"===typeof b?"undefined":babelHelpers.typeof(b))==="undefined"||d===this.$.dialog||d===this.$.closedialog)&&(window.HaxStore.write("activeHaxElement",{},this),this.opened=!1,this.resetManager())},open:function(){this.opened=!0},newAssetConfigure:function(){var b={source:this.$.url.value},c=window.HaxStore.guessGizmoType(b),d=window.HaxStore.guessGizmo(c,b);0<d.length?1===d.length?babelHelpers.typeof(d[0].tag)!=="undefined"&&window.HaxStore.write("activeHaxElement",d[0],this):window.HaxStore.instance.haxAppPicker.presentOptions(d,c,"Pick how to present the "+c,"gizmo"):window.HaxStore.toast("Sorry, HAX doesn't know how to handle that type of link yet.")},toggleDialog:function(){var b=0<arguments.length&&arguments[0]!==void 0?arguments[0]:!0;this.opened&&b?this.close():window.HaxStore.instance.closeAllDrawers(this)},selectStep:function(b){this.activeStep=!("configure"!=b)},_activeStepChanged:function(b){(b||!b)&&(this.updateStyles(),window.dispatchEvent(new Event("resize")))},_resolveObjectPath:function(b,c){return b.split(".").reduce(function(d,f){return d?d[f]:null},c||self)}});