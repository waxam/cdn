define(["exports","require","../../../lit-element/lit-element.js","../../grafitto-filter/grafitto-filter.js","../../utils/utils.js","./hax-tray-button.js","../../simple-fields/lib/simple-fields-field.js"],function(_exports,_require,_litElement,_grafittoFilter,_utils,_haxTrayButton,_simpleFieldsField){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.HaxAppBrowser=void 0;_require=babelHelpers.interopRequireWildcard(_require);function _templateObject3_978cba0075c911eab6bfd9e4068a045e(){var data=babelHelpers.taggedTemplateLiteral(["\n            <hax-tray-button\n              index=\"","\"\n              label=\"","\"\n              icon=\"","\"\n              color=\"","\"\n              event-name=\"search-selected\"\n              event-data=\"","\"\n            ></hax-tray-button>\n          "]);_templateObject3_978cba0075c911eab6bfd9e4068a045e=function _templateObject3_978cba0075c911eab6bfd9e4068a045e(){return data};return data}function _templateObject2_978cba0075c911eab6bfd9e4068a045e(){var data=babelHelpers.taggedTemplateLiteral(["\n      <div class=\"toolbar-inner\">\n        <simple-fields-field\n          id=\"inputfilter\"\n          @value-changed=\"","\"\n          aria-controls=\"filter\"\n          label=\"Filter\"\n          type=\"text\"\n          auto-validate=\"\"\n        ></simple-fields-field>\n      </div>\n      <grafitto-filter\n        id=\"filter\"\n        .items=\"","\"\n        like=\"\"\n        @filtered-changed=\"","\"\n        where=\"details.title\"\n        ><template></template\n      ></grafitto-filter>\n      <div class=\"item-wrapper\">\n        ","\n      </div>\n      <hax-app-search\n        id=\"haxappsearch\"\n        .hidden=\"","\"\n      ></hax-app-search>\n      <slot></slot>\n    "]);_templateObject2_978cba0075c911eab6bfd9e4068a045e=function _templateObject2_978cba0075c911eab6bfd9e4068a045e(){return data};return data}function _templateObject_978cba0075c911eab6bfd9e4068a045e(){var data=babelHelpers.taggedTemplateLiteral(["\n        :host {\n          display: block;\n        }\n        :host *[hidden] {\n          display: none;\n        }\n        grafitto-filter {\n          color: black;\n        }\n        .toolbar-inner {\n          display: block;\n          padding: 0;\n          width: 100%;\n        }\n        .item-wrapper {\n          text-align: center;\n        }\n      "]);_templateObject_978cba0075c911eab6bfd9e4068a045e=function _templateObject_978cba0075c911eab6bfd9e4068a045e(){return data};return data}/**
 * `hax-app-browser`
 * @element hax-app-browser
 *
 * `Browse a list of apps. This provides a listing of our gizmos that we've integrated with.`
 * @microcopy - the mental model for this element
 * - hax-app - expression of how to communicate and visualize a data source
 * - gizmo - silly name for the general public when talking about hax-app and what it provides in the end
 */var HaxAppBrowser=/*#__PURE__*/function(_winEventsElement){babelHelpers.inherits(HaxAppBrowser,_winEventsElement);babelHelpers.createClass(HaxAppBrowser,null,[{key:"styles",get:function get(){return[(0,_litElement.css)(_templateObject_978cba0075c911eab6bfd9e4068a045e())]}}]);function HaxAppBrowser(){var _this;babelHelpers.classCallCheck(this,HaxAppBrowser);_this=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(HaxAppBrowser).call(this));_this.__winEvents={"hax-store-property-updated":"_haxStorePropertyUpdated","hax-search-source-updated":"_searchSelected"};_this.searching=!1;_this.activeApp=null;_this.appList=[];_this.filtered=[];_this.hasActive=!1;new Promise(function(res,rej){return _require.default(["./hax-app-search.js"],res,rej)});return _this}babelHelpers.createClass(HaxAppBrowser,[{key:"render",value:function render(){return(0,_litElement.html)(_templateObject2_978cba0075c911eab6bfd9e4068a045e(),this.inputfilterChanged,this.appList,this.filteredChanged,this.filtered.map(function(app){return(0,_litElement.html)(_templateObject3_978cba0075c911eab6bfd9e4068a045e(),app.index,app.details.title,app.details.icon,app.details.color,app.index)}),!this.searching)}},{key:"filteredChanged",value:function filteredChanged(e){this.filtered=babelHelpers.toConsumableArray(e.detail.value)}},{key:"inputfilterChanged",value:function inputfilterChanged(e){this.shadowRoot.querySelector("#filter").like=e.target.value}},{key:"firstUpdated",value:function firstUpdated(changedProperties){this.resetBrowser()}},{key:"updated",value:function updated(changedProperties){var _this2=this;changedProperties.forEach(function(oldValue,propName){if("activeApp"==propName){_this2._activeAppChanged(_this2[propName],oldValue)}})}/**
   * App has been selected.
   */},{key:"_searchSelected",value:function _searchSelected(e){// item bubbled up
if(babelHelpers.typeof(e.detail)!==("undefined"===typeof void 0?"undefined":babelHelpers.typeof(void 0))){this.__activeApp=e.detail;this.searching=!0;window.HaxStore.write("activeApp",this.appList[e.detail],this)}}/**
   * Active app updated, so scroll it into view
   */},{key:"_activeAppChanged",value:function _activeAppChanged(newValue,oldValue){if(babelHelpers.typeof(oldValue)!==("undefined"===typeof void 0?"undefined":babelHelpers.typeof(void 0))&&null!=newValue){this.hasActive=!0}else{this.hasActive=!1}}/**
   * Store updated, sync.
   */},{key:"_haxStorePropertyUpdated",value:function _haxStorePropertyUpdated(e){if(e.detail&&babelHelpers.typeof(e.detail.value)!==("undefined"===typeof void 0?"undefined":babelHelpers.typeof(void 0))&&e.detail.property){this[e.detail.property]=e.detail.value}}/**
   * Reset this browser.
   */},{key:"resetBrowser",value:function resetBrowser(){this.searching=!1;this.appList=babelHelpers.toConsumableArray(window.HaxStore.instance.appList);this.filtered=this.appList;this.shadowRoot.querySelector("#inputfilter").value="";this.shadowRoot.querySelector("#filter").value="";this.shadowRoot.querySelector("#filter").filter();this.shadowRoot.querySelector("#filter").where="details.title";this.shadowRoot.querySelector("#filter").like=""}}],[{key:"tag",get:function get(){return"hax-app-browser"}},{key:"properties",get:function get(){return{/**
       * Search term
       */search:{type:String},/**
       * Searching mode
       */searching:{type:Boolean,reflect:!0},/**
       * Global activeApp object.
       */activeApp:{type:Object},/**
       * If we have an active, scale everything
       */hasActive:{reflect:!0,type:Boolean,attribute:"has-active"},filtered:{type:Array},appList:{type:Array}}}}]);return HaxAppBrowser}((0,_utils.winEventsElement)(_litElement.LitElement));_exports.HaxAppBrowser=HaxAppBrowser;window.customElements.define(HaxAppBrowser.tag,HaxAppBrowser)});