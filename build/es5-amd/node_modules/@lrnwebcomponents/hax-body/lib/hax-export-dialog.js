define(["../../../@polymer/polymer/polymer-legacy.js","../../../@polymer/paper-dialog/paper-dialog.js","../../../@polymer/iron-icon/iron-icon.js","../../../@polymer/iron-icons/iron-icons.js","../../../@polymer/paper-input/paper-input.js","../../../@polymer/paper-button/paper-button.js","../../dl-behavior/dl-behavior.js","../../simple-colors/simple-colors.js","../../code-editor/code-editor.js","../../hexagon-loader/hexagon-loader.js","./hax-shared-styles.js"],function(_polymerLegacy){"use strict";function _templateObject_36016a30490411e990ee3fd35bb8725b(){var data=babelHelpers.taggedTemplateLiteral(["\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n      }\n      #dialog {\n        z-index: 1000;\n      }\n      .title {\n        position: relative;\n        padding: 16px;\n        outline: 0;\n        font-weight: 600;\n        text-align: left;\n        margin: 0;\n        background-color: var(--hax-color-menu-heading-bg);\n        font-size: 18px;\n        line-height: 18px;\n        font-family: \"Noto Serif\", serif;\n        color: var(--hax-color-text);\n      }\n      .pref-container {\n        text-align: left;\n        padding: 16px;\n      }\n      .buttons paper-button:focus,\n      .buttons paper-button:hover {\n        outline: 1px solid var(--hax-color-border-outline);\n      }\n      .buttons paper-button {\n        color: var(--hax-color-text);\n        text-transform: none;\n        margin: 0;\n        background-color: var(--hax-color-bg-accent);\n        display: inline-flex;\n        border-radius: 0px;\n        border-style: solid;\n        border-width: 1px;\n        min-width: unset;\n        font-size: 12px;\n        font-weight: bold;\n      }\n      #closedialog {\n        float: right;\n        top: 5px;\n        right: 0;\n        position: absolute;\n        padding: 4px;\n        margin: 0;\n        color: var(--hax-color-text);\n        background-color: transparent;\n        width: 40px;\n        height: 40px;\n        min-width: unset;\n      }\n      #textarea {\n        margin-bottom: 16px;\n        padding: 10px;\n        font-size: 10px;\n        resize: none;\n        width: 90%;\n        height: 40vh;\n        width: -webkit-fill-available;\n        background-color: transparent;\n        color: #eeeeee;\n        font-family: monospace;\n      }\n      paper-dialog {\n        min-width: 70vw;\n        min-height: 60vh;\n        background-color: #ffffff;\n        color: var(--hax-color-text);\n      }\n      #import {\n        margin-right: 50px;\n        color: var(--hax-color-accent1-text);\n        background-color: var(--hax-color-accent1);\n      }\n      #loading {\n        position: absolute;\n        margin: 0 auto;\n        width: 100%;\n      }\n    </style>\n    <paper-dialog id=\"dialog\" with-backdrop always-on-top>\n      <h3 class=\"title\">[[title]]</h3>\n      <div style=\"height: 100%; overflow: auto;\" class=\"pref-container\">\n        <div id=\"wrapper\">\n          <textarea id=\"hiddentextarea\" hidden></textarea>\n          <hexagon-loader\n            size=\"small\"\n            id=\"loading\"\n            color=\"#0085ba\"\n            aria-roledescription=\"Loading\"\n          ></hexagon-loader>\n          <code-editor id=\"textarea\" title=\"\" theme=\"hc-black\"></code-editor>\n        </div>\n        <div id=\"buttons\" class=\"buttons\">\n          <paper-button id=\"import\" raised>Update body area</paper-button>\n          <paper-button id=\"copy\">Copy to clipboard</paper-button>\n          <paper-button id=\"downloadfull\">Download full file</paper-button>\n          <paper-button id=\"download\">Download body area</paper-button>\n          <paper-button\n            id=\"elementexport\"\n            hidden$=\"[[!globalPreferences.haxDeveloperMode]]\"\n            >Copy as HAX schema to clipboard</paper-button\n          >\n        </div>\n      </div>\n      <paper-button id=\"closedialog\" on-tap=\"close\">\n        <iron-icon icon=\"icons:cancel\" title=\"Close dialog\"></iron-icon>\n      </paper-button>\n    </paper-dialog>\n  "],["\n    <style include=\"simple-colors hax-shared-styles\">\n      :host {\n        display: block;\n      }\n      #dialog {\n        z-index: 1000;\n      }\n      .title {\n        position: relative;\n        padding: 16px;\n        outline: 0;\n        font-weight: 600;\n        text-align: left;\n        margin: 0;\n        background-color: var(--hax-color-menu-heading-bg);\n        font-size: 18px;\n        line-height: 18px;\n        font-family: \"Noto Serif\", serif;\n        color: var(--hax-color-text);\n      }\n      .pref-container {\n        text-align: left;\n        padding: 16px;\n      }\n      .buttons paper-button:focus,\n      .buttons paper-button:hover {\n        outline: 1px solid var(--hax-color-border-outline);\n      }\n      .buttons paper-button {\n        color: var(--hax-color-text);\n        text-transform: none;\n        margin: 0;\n        background-color: var(--hax-color-bg-accent);\n        display: inline-flex;\n        border-radius: 0px;\n        border-style: solid;\n        border-width: 1px;\n        min-width: unset;\n        font-size: 12px;\n        font-weight: bold;\n      }\n      #closedialog {\n        float: right;\n        top: 5px;\n        right: 0;\n        position: absolute;\n        padding: 4px;\n        margin: 0;\n        color: var(--hax-color-text);\n        background-color: transparent;\n        width: 40px;\n        height: 40px;\n        min-width: unset;\n      }\n      #textarea {\n        margin-bottom: 16px;\n        padding: 10px;\n        font-size: 10px;\n        resize: none;\n        width: 90%;\n        height: 40vh;\n        width: -webkit-fill-available;\n        background-color: transparent;\n        color: #eeeeee;\n        font-family: monospace;\n      }\n      paper-dialog {\n        min-width: 70vw;\n        min-height: 60vh;\n        background-color: #ffffff;\n        color: var(--hax-color-text);\n      }\n      #import {\n        margin-right: 50px;\n        color: var(--hax-color-accent1-text);\n        background-color: var(--hax-color-accent1);\n      }\n      #loading {\n        position: absolute;\n        margin: 0 auto;\n        width: 100%;\n      }\n    </style>\n    <paper-dialog id=\"dialog\" with-backdrop always-on-top>\n      <h3 class=\"title\">[[title]]</h3>\n      <div style=\"height: 100%; overflow: auto;\" class=\"pref-container\">\n        <div id=\"wrapper\">\n          <textarea id=\"hiddentextarea\" hidden></textarea>\n          <hexagon-loader\n            size=\"small\"\n            id=\"loading\"\n            color=\"#0085ba\"\n            aria-roledescription=\"Loading\"\n          ></hexagon-loader>\n          <code-editor id=\"textarea\" title=\"\" theme=\"hc-black\"></code-editor>\n        </div>\n        <div id=\"buttons\" class=\"buttons\">\n          <paper-button id=\"import\" raised>Update body area</paper-button>\n          <paper-button id=\"copy\">Copy to clipboard</paper-button>\n          <paper-button id=\"downloadfull\">Download full file</paper-button>\n          <paper-button id=\"download\">Download body area</paper-button>\n          <paper-button\n            id=\"elementexport\"\n            hidden\\$=\"[[!globalPreferences.haxDeveloperMode]]\"\n            >Copy as HAX schema to clipboard</paper-button\n          >\n        </div>\n      </div>\n      <paper-button id=\"closedialog\" on-tap=\"close\">\n        <iron-icon icon=\"icons:cancel\" title=\"Close dialog\"></iron-icon>\n      </paper-button>\n    </paper-dialog>\n  "]);_templateObject_36016a30490411e990ee3fd35bb8725b=function(){return data};return data}(0,_polymerLegacy.Polymer)({_template:(0,_polymerLegacy.html)(_templateObject_36016a30490411e990ee3fd35bb8725b()),is:"hax-export-dialog",behaviors:[mtz.FileDownloadBehaviors],properties:{title:{type:String,value:"Source view"},globalPreferences:{type:Object,value:{}}},attached:function attached(){this.fire("hax-register-export",this);document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this));this.$.download.addEventListener("tap",this.download.bind(this));this.$.downloadfull.addEventListener("tap",this.downloadfull.bind(this));this.$.import.addEventListener("tap",this.importContent.bind(this));this.$.copy.addEventListener("tap",this.selectBody.bind(this));this.$.closedialog.addEventListener("tap",this.close.bind(this));this.$.elementexport.addEventListener("tap",this.htmlToHaxElements.bind(this))},detached:function detached(){document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this));this.$.download.removeEventListener("tap",this.download.bind(this));this.$.downloadfull.removeEventListener("tap",this.downloadfull.bind(this));this.$.import.removeEventListener("tap",this.importContent.bind(this));this.$.copy.removeEventListener("tap",this.selectBody.bind(this));this.$.closedialog.removeEventListener("tap",this.close.bind(this));this.$.elementexport.removeEventListener("tap",this.htmlToHaxElements.bind(this))},_haxStorePropertyUpdated:function _haxStorePropertyUpdated(e){if(e.detail&&babelHelpers.typeof(e.detail.value)!=="undefined"&&e.detail.property){if("object"===babelHelpers.typeof(e.detail.value)){this.set(e.detail.property,null)}this.set(e.detail.property,e.detail.value)}},download:function download(){var data=this.contentToFile(!1);this.downloadFromData(data,"html","my-new-code");window.HaxStore.toast("HTML content downloaded")},downloadfull:function downloadfull(){var data=this.contentToFile(!0);this.downloadFromData(data,"html","my-new-webpage");window.HaxStore.toast("Working offline copy downloaded")},importContent:function importContent(){var htmlBody=this.$.textarea.value;window.HaxStore.toast("Content updated");return window.HaxStore.instance.activeHaxBody.importContent(htmlBody)},selectBody:function selectBody(){this.$.hiddentextarea.value=this.$.textarea.value;this.$.hiddentextarea.removeAttribute("hidden");this.$.hiddentextarea.focus();this.$.hiddentextarea.select();document.execCommand("copy");this.$.hiddentextarea.setAttribute("hidden","hidden");window.HaxStore.toast("Copied HTML content")},htmlToHaxElements:function htmlToHaxElements(){var elements=window.HaxStore.htmlToHaxElements(this.$.textarea.value),str=JSON.stringify(elements,null,2),val=this.$.textarea.value;this.$.hiddentextarea.removeAttribute("hidden");this.$.hiddentextarea.value=str;this.$.hiddentextarea.focus();this.$.hiddentextarea.select();document.execCommand("copy");this.$.hiddentextarea.value=val;this.$.hiddentextarea.setAttribute("hidden","hidden");window.HaxStore.toast("Copied hax elements to clipboard")},contentToFile:function contentToFile(full){var content="";if(full){var elementList=window.HaxStore.instance.elementList,url="https://lrnwebcomponents.github.io/hax-body/components";content="\n      <!doctype html>\n      <html lang=\"en\">\n        <head>\n          <meta charset=\"utf-8\">\n          <meta name=\"viewport\" content=\"width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes\">\n          <title>hax-body demo</title>\n          <script src=\"".concat(url,"/@webcomponents/webcomponentsjs/webcomponents-loader.js\"></script>\n          <style>\n          body {\n            padding: 32px;\n          }\n          </style>\n      ");var ignoreList=["iframe","a","img","hr","p"];for(var index in elementList){if(-1===ignoreList.indexOf(index)){content+="<script type=\"module\" src=\""+url+"/"+index+"/"+index+".js\" />"+"\n"}}content+="</head><body>";content+=window.HaxStore.instance.activeHaxBody.haxToContent();content+="</body></html>"}else{content=window.HaxStore.instance.activeHaxBody.haxToContent()}return content},toggleDialog:function toggleDialog(){if(this.$.dialog.opened){this.close()}else{this.$.textarea.editorValue=this.contentToFile(!1);window.HaxStore.instance.closeAllDrawers(this)}},open:function open(){var _this=this;this.$.dialog.open();this.$.buttons.style.display="none";this.$.loading.setAttribute("loading","loading");this.$.wrapper.appendChild(this.$.textarea);setTimeout(function(){_this.$.loading.removeAttribute("loading");_this.$.buttons.style.display="unset"},800)},close:function close(){this.$.dialog.close()}})});