var _templateObject=babelHelpers.taggedTemplateLiteral(["\n    <style is=\"custom-style\">\n      :host {\n        display: block;\n      }\n      paper-button.item-wrapper {\n        margin: 0;\n        padding: 0;\n      }\n      paper-card {\n        padding: 0;\n        margin: 8px;\n        width: 240px;\n        font-size: 12px;\n        --paper-card-header: {\n          max-height: 160px;\n        }\n      }\n      @media screen and (min-width: 800px) {\n        paper-card {\n          font-size: 14px;\n        }\n      }\n      #loading[hidden] {\n        visibility: hidden !important;\n        opacity: 0 !important;\n        display: block !important;\n      }\n      .loading {\n        width: calc(100% - 32px);\n        z-index: 1000;\n        opacity: 0.9;\n        text-align: center;\n        align-content: space-around;\n        justify-content: center;\n        position: absolute;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        margin: 0 auto;\n        visibility: visible;\n        transition: visibility 0.5s, opacity 0.5s ease;\n      }\n      .loading elmsln-loading {\n        margin: 0 80px;\n        display: inline-flex;\n      }\n      #loading {\n        height: 100%;\n        display: flex;\n        justify-content: center;\n      }\n      #loading .loading,\n      #loading elmsln-loading {\n        display: block;\n        height: 80px;\n      }\n      .card-content {\n        padding: 0.16px;\n      }\n      .card-content p {\n        padding: 0;\n        margin: 0;\n      }\n      #itemlist {\n        min-height: 150px;\n        border: 1px solid #222222;\n      }\n      hax-app-search-inputs {\n        min-height: 150px;\n        padding: 16px 16px 0 16px;\n        color: #222222;\n      }\n      hax-app-pagination {\n        min-height: 32px;\n        font-size: 12.8px;\n        display: none;\n        justify-content: flex-end;\n        justify-content: center;\n        color: #222222;\n      }\n      .loading-text {\n        font-size: 32px;\n        padding: 16px 0;\n        color: var(--simple-colors-light-green-background3);\n      }\n    </style>\n\n    <iron-ajax\n      auto=\"[[auto]]\"\n      id=\"request\"\n      method=\"[[method]]\"\n      url=\"[[requestEndPoint]]\"\n      handle-as=\"json\"\n      headers=\"[[headers]]\"\n      params=\"[[requestParams]]\"\n      last-response=\"{{requestData}}\"\n      hidden=\"\"\n      loading=\"{{loading}}\"\n      debounce-duration=\"250\"\n    ></iron-ajax>\n    <hax-app-search-inputs\n      label=\"[[label]]\"\n      schema=\"{{searchSchema}}\"\n      values=\"{{searchValues}}\"\n    ></hax-app-search-inputs>\n    <hax-app-pagination\n      id=\"pagerbottom\"\n      request-data=\"[[requestData]]\"\n      pagination=\"[[pagination]]\"\n    ></hax-app-pagination>\n    <div id=\"loading\" class=\"loading\" hidden$=\"[[!loading]]\">\n      <elmsln-loading\n        color=\"light-green-text text-accent-3\"\n        size=\"large\"\n      ></elmsln-loading>\n      <div class=\"loading-text\">Loading content..</div>\n    </div>\n    <iron-list grid=\"\" id=\"itemlist\" items=\"[[media]]\" as=\"resultData\">\n      <template>\n        <hax-app-search-result\n          result-data=\"[[resultData]]\"\n        ></hax-app-search-result>\n      </template>\n    </iron-list>\n  "],["\n    <style is=\"custom-style\">\n      :host {\n        display: block;\n      }\n      paper-button.item-wrapper {\n        margin: 0;\n        padding: 0;\n      }\n      paper-card {\n        padding: 0;\n        margin: 8px;\n        width: 240px;\n        font-size: 12px;\n        --paper-card-header: {\n          max-height: 160px;\n        }\n      }\n      @media screen and (min-width: 800px) {\n        paper-card {\n          font-size: 14px;\n        }\n      }\n      #loading[hidden] {\n        visibility: hidden !important;\n        opacity: 0 !important;\n        display: block !important;\n      }\n      .loading {\n        width: calc(100% - 32px);\n        z-index: 1000;\n        opacity: 0.9;\n        text-align: center;\n        align-content: space-around;\n        justify-content: center;\n        position: absolute;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        margin: 0 auto;\n        visibility: visible;\n        transition: visibility 0.5s, opacity 0.5s ease;\n      }\n      .loading elmsln-loading {\n        margin: 0 80px;\n        display: inline-flex;\n      }\n      #loading {\n        height: 100%;\n        display: flex;\n        justify-content: center;\n      }\n      #loading .loading,\n      #loading elmsln-loading {\n        display: block;\n        height: 80px;\n      }\n      .card-content {\n        padding: 0.16px;\n      }\n      .card-content p {\n        padding: 0;\n        margin: 0;\n      }\n      #itemlist {\n        min-height: 150px;\n        border: 1px solid #222222;\n      }\n      hax-app-search-inputs {\n        min-height: 150px;\n        padding: 16px 16px 0 16px;\n        color: #222222;\n      }\n      hax-app-pagination {\n        min-height: 32px;\n        font-size: 12.8px;\n        display: none;\n        justify-content: flex-end;\n        justify-content: center;\n        color: #222222;\n      }\n      .loading-text {\n        font-size: 32px;\n        padding: 16px 0;\n        color: var(--simple-colors-light-green-background3);\n      }\n    </style>\n\n    <iron-ajax\n      auto=\"[[auto]]\"\n      id=\"request\"\n      method=\"[[method]]\"\n      url=\"[[requestEndPoint]]\"\n      handle-as=\"json\"\n      headers=\"[[headers]]\"\n      params=\"[[requestParams]]\"\n      last-response=\"{{requestData}}\"\n      hidden=\"\"\n      loading=\"{{loading}}\"\n      debounce-duration=\"250\"\n    ></iron-ajax>\n    <hax-app-search-inputs\n      label=\"[[label]]\"\n      schema=\"{{searchSchema}}\"\n      values=\"{{searchValues}}\"\n    ></hax-app-search-inputs>\n    <hax-app-pagination\n      id=\"pagerbottom\"\n      request-data=\"[[requestData]]\"\n      pagination=\"[[pagination]]\"\n    ></hax-app-pagination>\n    <div id=\"loading\" class=\"loading\" hidden\\$=\"[[!loading]]\">\n      <elmsln-loading\n        color=\"light-green-text text-accent-3\"\n        size=\"large\"\n      ></elmsln-loading>\n      <div class=\"loading-text\">Loading content..</div>\n    </div>\n    <iron-list grid=\"\" id=\"itemlist\" items=\"[[media]]\" as=\"resultData\">\n      <template>\n        <hax-app-search-result\n          result-data=\"[[resultData]]\"\n        ></hax-app-search-result>\n      </template>\n    </iron-list>\n  "]);import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import"@polymer/paper-input/paper-input.js";import"@polymer/paper-card/paper-card.js";import"@polymer/paper-styles/paper-styles.js";import"@polymer/iron-list/iron-list.js";import"@polymer/iron-ajax/iron-ajax.js";import"@lrnwebcomponents/elmsln-loading/elmsln-loading.js";import"@lrnwebcomponents/simple-colors/simple-colors.js";import"./hax-app-search-inputs.js";import"./hax-app-search-result.js";Polymer({_template:html(_templateObject),is:"hax-app-search",properties:{activeApp:{type:Object,observer:"_resetAppSearch"},auto:{type:Boolean,value:!1},searchSchema:{type:Object,value:{}},searchValues:{type:Object,value:{}},headers:{type:Object,value:{}},method:{type:String,value:"GET"},loading:{type:Boolean,value:!1},requestData:{type:Object,value:{},observer:"_requestDataChanged"},media:{type:Array,value:[],observer:"_mediaChanged"}},_searchValuesEvent:function(b){if(babelHelpers.typeof(b.detail)!=="undefined"){var c=this.requestParams;for(var d in b.detail)c[d]=b.detail[d];this.set("requestParams",{}),this.set("requestParams",c)}},_resetAppSearch:function(b){if(("undefined"===typeof b?"undefined":babelHelpers.typeof(b))!=="undefined"&&null!==b){var d=b,f={};this.label=d.details.title,this.auto=!1,this.set("media",[]),babelHelpers.typeof(d.connection.data)!=="undefined"&&(f=d.connection.data),babelHelpers.typeof(d.connection.operations.browse.data)!=="undefined"&&(f=Object.assign(f,d.connection.operations.browse.data)),this.set("method",d.connection.operations.browse.method),this.set("headers",{}),babelHelpers.typeof(d.connection.headers)!=="undefined"&&this.set("headers",d.connection.headers),this.set("requestParams",{}),this.set("requestParams",f);var g=d.connection.protocol+"://"+d.connection.url;"/"!=g.substr(g.length-1)&&(g+="/"),babelHelpers.typeof(d.connection.operations.browse.endPoint)!=="undefined"&&(g+=d.connection.operations.browse.endPoint),this.set("requestEndPoint",g),this.set("searchSchema",{});var h={properties:{}};babelHelpers.typeof(d.connection.operations.browse.search)!=="undefined"&&(h.properties=d.connection.operations.browse.search,this.set("searchSchema",h)),this.resultMap=d.connection.operations.browse.resultMap,this.set("pagination",{}),babelHelpers.typeof(d.connection.operations.browse.pagination)!=="undefined"&&this.set("pagination",d.connection.operations.browse.pagination),this.auto=!(babelHelpers.typeof(d.connection.auto)!=="undefined")||d.connection.auto}},attached:function(){document.body.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),document.body.addEventListener("hax-app-search-values-changed",this._searchValuesEvent.bind(this))},detached:function(){document.body.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),document.body.removeEventListener("hax-app-search-values-changed",this._searchValuesEvent.bind(this))},_haxStorePropertyUpdated:function(b){b.detail&&babelHelpers.typeof(b.detail.value)!=="undefined"&&b.detail.property&&this.set(b.detail.property,b.detail.value)},_requestDataChanged:function(b,c){if({}!=("undefined"===typeof b?"undefined":babelHelpers.typeof(b))&&("undefined"===typeof c?"undefined":babelHelpers.typeof(c))!=="undefined"){var d=[],f=this.resultMap,g=[];if(babelHelpers.typeof(this._resolveObjectPath(f.items,b))==="undefined"?null!=b&&(g=b):g=this._resolveObjectPath(f.items,b),null!=g){for(var h=0;h<g.length;h++){if(d[h]={title:this._resolveObjectPath(f.preview.title,g[h]),details:this._resolveObjectPath(f.preview.details,g[h]),type:f.defaultGizmoType,map:{}},babelHelpers.typeof(d[h].details)!=="undefined"&&null!=d[h].details&&(d[h].details=d[h].details.replace(/(<([^>]+)>)/gi,"")),f.preview.id.constructor===Object){var j=this._resolveObjectPath(f.preview.id.property,g[h]);"split"===f.preview.id.op&&(j=j.split(f.preview.id.delimiter),d[h].id=j[f.preview.id.position])}else d[h].id=this._resolveObjectPath(f.preview.id,g[h]);for(var k in d[h].image=babelHelpers.typeof(f.preview.image)==="undefined"?babelHelpers.typeof(f.image)==="undefined"?"":f.image:this._resolveObjectPath(f.preview.image,g[h]),f.gizmo)if("_url_source"===k){var l="";l=babelHelpers.typeof(d[h].map.__id)==="undefined"?this._resolveObjectPath(f.gizmo.id,g[h]):d[h].map.__id,d[h].map.source=f.gizmo._url_source.replace("<%= id %>",l)}else if(f.gizmo[k].constructor===Object){var m=this._resolveObjectPath(f.gizmo[k].property,g[h]);"split"===f.gizmo[k].op&&(m=m.split(f.gizmo[k].delimiter),d[h].map[k]=m[f.gizmo[k].position],"id"===k&&(d[h].map.__id=d[h].map[k]))}else d[h].map[k]=this._resolveObjectPath(f.gizmo[k],g[h]);babelHelpers.typeof(d[h].map.url)==="undefined"&&babelHelpers.typeof(d[h].map.source)!=="undefined"&&(d[h].map.url=d[h].map.source),babelHelpers.typeof(f.gizmo.type)!=="undefined"&&(d[h].type=this._resolveObjectPath(f.gizmo.type,g[h]))}this.set("media",[]),this.set("media",d)}}},_mediaChanged:function(b,c){var d=this;("undefined"===typeof c?"undefined":babelHelpers.typeof(c))!=="undefined"&&setTimeout(function(){d.$.itemlist.fire("iron-resize")},200)},_resolveObjectPath:function(b,c){return b.split(".").reduce(function(d,f){return d?d[f]:null},c||self)}});