!function(b,c){"object"==("undefined"===typeof exports?"undefined":babelHelpers.typeof(exports))&&"undefined"!=typeof module?c(exports,require("@polymer/polymer/polymer-legacy.js"),require("@polymer/polymer/lib/legacy/polymer.dom.js"),require("@lrnwebcomponents/materializecss-styles/materializecss-styles.js"),require("@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js"),require("@lrnwebcomponents/schema-behaviors/schema-behaviors.js"),require("@lrnwebcomponents/a11y-behaviors/a11y-behaviors.js"),require("@lrnwebcomponents/media-behaviors/media-behaviors.js"),require("@lrnwebcomponents/simple-colors/simple-colors.js"),require("@lrnwebcomponents/a11y-media-player/a11y-media-player.js")):"function"==typeof define&&define.amd?define(["exports","@polymer/polymer/polymer-legacy.js","@polymer/polymer/lib/legacy/polymer.dom.js","@lrnwebcomponents/materializecss-styles/materializecss-styles.js","@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","@lrnwebcomponents/schema-behaviors/schema-behaviors.js","@lrnwebcomponents/a11y-behaviors/a11y-behaviors.js","@lrnwebcomponents/media-behaviors/media-behaviors.js","@lrnwebcomponents/simple-colors/simple-colors.js","@lrnwebcomponents/a11y-media-player/a11y-media-player.js"],c):c(b.VideoPlayer={},b.polymerLegacy_js,b.polymer_dom_js)}(this,function(b,c,d){"use strict";function f(j){return(f="function"==typeof Symbol&&"symbol"==babelHelpers.typeof(Symbol.iterator)?function(k){return"undefined"===typeof k?"undefined":babelHelpers.typeof(k)}:function(k){return k&&"function"==typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":"undefined"===typeof k?"undefined":babelHelpers.typeof(k)})(j)}function g(){var j,k,l=(j=["\n    <custom-style>\n      <style>\n        :host {\n          display: block;\n          margin: 0 0 15px;\n        }\n        .video-caption {\n          font-style: italic;\n          margin: 0;\n          padding: 8px;\n          @apply --video-player-caption-theme;\n        }\n      </style>\n    </custom-style>\n\n    <template is=\"dom-if\" if=\"[[isA11yMedia]]\" restamp=\"\">\n      <a11y-media-player\n        accent-color$=\"[[accentColor]]\"\n        dark$=\"[[dark]]\"\n        dark-transcript$=\"[[darkTranscript]]\"\n        disable-interactive$=\"[[disableInteractive]]\"\n        hide-timestamps$=\"[[hideTimestamps]]\"\n        lang$=\"[[lang]]\"\n        media-type$=\"[[sourceType]]\"\n        preload$=\"[[preload]]\"\n        media-title$=\"[[mediaTitle]]\"\n        stand-alone$=\"[[__standAlone]]\"\n        sticky-corner$=\"[[stickyCorner]]\"\n        thumbnail-src$=\"[[thumbnailSrc]]\"\n        crossorigin$=\"[[crossorigin]]\"\n        youtube-id$=\"[[youtubeId]]\"\n      >\n        <slot name=\"source\"></slot> <slot name=\"track\"></slot>\n        <template id=\"sources\" is=\"dom-repeat\" items=\"[[sourceData]]\" as=\"sd\">\n          <source src$=\"[[sd.src]]\" type$=\"[[sd.type]]\" />\n        </template>\n        <template id=\"tracks\" is=\"dom-repeat\" items=\"[[tracks]]\" as=\"track\">\n          <track\n            src$=\"[[track.src]]\"\n            kind$=\"[[track.kind]]\"\n            label$=\"[[track.label]]\"\n            srclang$=\"[[track.lang]]\"\n          />\n        </template>\n        <slot name=\"caption\"></slot>\n      </a11y-media-player>\n    </template>\n    <template is=\"dom-if\" if=\"[[!isA11yMedia]]\">\n      <template is=\"dom-if\" if=\"[[sandboxed]]\">\n        <div class=\"responsive-video-container\" lang$=\"[[lang]]\">\n          <webview\n            resource$=\"[[schemaResourceID]]-video\"\n            src$=\"[[sourceData.0.src]]\"\n            width$=\"[[width]]\"\n            height$=\"[[height]]\"\n            frameborder=\"0\"\n          ></webview>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[!sandboxed]]\">\n        <template is=\"dom-if\" if=\"[[iframed]]\">\n          <div class=\"responsive-video-container\" lang$=\"[[lang]]\">\n            <iframe\n              resource$=\"[[schemaResourceID]]-video\"\n              src$=\"[[sourceData.0.src]]\"\n              width$=\"[[width]]\"\n              height$=\"[[height]]\"\n              frameborder=\"0\"\n              webkitallowfullscreen=\"\"\n              mozallowfullscreen=\"\"\n              allowfullscreen=\"\"\n            ></iframe>\n          </div>\n        </template>\n      </template>\n      <div id=\"videocaption\" class$=\"video-caption\">\n        <p>\n          [[mediaTitle]]\n          <span class=\"media-type print-only\">(embedded media)</span>\n        </p>\n        <slot name=\"caption\"></slot>\n      </div>\n    </template>\n  "],(k=["\n    <custom-style>\n      <style>\n        :host {\n          display: block;\n          margin: 0 0 15px;\n        }\n        .video-caption {\n          font-style: italic;\n          margin: 0;\n          padding: 8px;\n          @apply --video-player-caption-theme;\n        }\n      </style>\n    </custom-style>\n\n    <template is=\"dom-if\" if=\"[[isA11yMedia]]\" restamp=\"\">\n      <a11y-media-player\n        accent-color\\$=\"[[accentColor]]\"\n        dark\\$=\"[[dark]]\"\n        dark-transcript\\$=\"[[darkTranscript]]\"\n        disable-interactive\\$=\"[[disableInteractive]]\"\n        hide-timestamps\\$=\"[[hideTimestamps]]\"\n        lang\\$=\"[[lang]]\"\n        media-type\\$=\"[[sourceType]]\"\n        preload\\$=\"[[preload]]\"\n        media-title\\$=\"[[mediaTitle]]\"\n        stand-alone\\$=\"[[__standAlone]]\"\n        sticky-corner\\$=\"[[stickyCorner]]\"\n        thumbnail-src\\$=\"[[thumbnailSrc]]\"\n        crossorigin\\$=\"[[crossorigin]]\"\n        youtube-id\\$=\"[[youtubeId]]\"\n      >\n        <slot name=\"source\"></slot> <slot name=\"track\"></slot>\n        <template id=\"sources\" is=\"dom-repeat\" items=\"[[sourceData]]\" as=\"sd\">\n          <source src\\$=\"[[sd.src]]\" type\\$=\"[[sd.type]]\" />\n        </template>\n        <template id=\"tracks\" is=\"dom-repeat\" items=\"[[tracks]]\" as=\"track\">\n          <track\n            src\\$=\"[[track.src]]\"\n            kind\\$=\"[[track.kind]]\"\n            label\\$=\"[[track.label]]\"\n            srclang\\$=\"[[track.lang]]\"\n          />\n        </template>\n        <slot name=\"caption\"></slot>\n      </a11y-media-player>\n    </template>\n    <template is=\"dom-if\" if=\"[[!isA11yMedia]]\">\n      <template is=\"dom-if\" if=\"[[sandboxed]]\">\n        <div class=\"responsive-video-container\" lang\\$=\"[[lang]]\">\n          <webview\n            resource\\$=\"[[schemaResourceID]]-video\"\n            src\\$=\"[[sourceData.0.src]]\"\n            width\\$=\"[[width]]\"\n            height\\$=\"[[height]]\"\n            frameborder=\"0\"\n          ></webview>\n        </div>\n      </template>\n      <template is=\"dom-if\" if=\"[[!sandboxed]]\">\n        <template is=\"dom-if\" if=\"[[iframed]]\">\n          <div class=\"responsive-video-container\" lang\\$=\"[[lang]]\">\n            <iframe\n              resource\\$=\"[[schemaResourceID]]-video\"\n              src\\$=\"[[sourceData.0.src]]\"\n              width\\$=\"[[width]]\"\n              height\\$=\"[[height]]\"\n              frameborder=\"0\"\n              webkitallowfullscreen=\"\"\n              mozallowfullscreen=\"\"\n              allowfullscreen=\"\"\n            ></iframe>\n          </div>\n        </template>\n      </template>\n      <div id=\"videocaption\" class\\$=\"video-caption\">\n        <p>\n          [[mediaTitle]]\n          <span class=\"media-type print-only\">(embedded media)</span>\n        </p>\n        <slot name=\"caption\"></slot>\n      </div>\n    </template>\n  "])||(k=j.slice(0)),Object.freeze(Object.defineProperties(j,{raw:{value:Object.freeze(k)}})));return g=function(){return l},l}var h=c.Polymer({_template:c.html(g()),is:"video-player",behaviors:[HAXBehaviors.PropertiesBehaviors,MaterializeCSSBehaviors.ColorBehaviors,SchemaBehaviors.Schema,A11yBehaviors.A11y,MediaBehaviors.Video],properties:{accentColor:{type:String,value:null,reflectToAttribute:!0},dark:{type:Boolean,value:!1,reflectToAttribute:!0},darkTranscript:{type:Boolean,value:!1},disableInteractive:{type:Boolean,value:!1},height:{type:String,value:null},hideTimestamps:{type:Boolean,value:!1},iframed:{type:Boolean,computed:"_computeIframed(sourceData, sandboxed)"},isA11yMedia:{type:Boolean,computed:"_computeA11yMedia(sourceType, sandboxed)"},lang:{type:String,value:"en"},mediaTitle:{type:String},preload:{type:String,value:"metadata"},sandboxed:{type:Boolean,computed:"_computeSandboxed(sourceData)"},source:{type:String,value:null},sources:{type:Array,value:[]},sourceData:{type:Array,computed:"_getSourceData(source,sources,tracks)",reflectToAttribute:!0},sourceType:{type:String,computed:"_computeSourceType(sourceData)"},youtubeId:{type:String,computed:"_computeYoutubeId(source,sourceType)"},isYoutube:{type:Boolean,computed:"_computeYoutube(sourceType)"},stickyCorner:{type:String,value:"top-right",reflectToAttribute:!0},tracks:{type:Array,value:[]},thumbnailSrc:{type:String,value:null,reflectToAttribute:!0},width:{type:String,value:null},crossorigin:{type:Boolean,value:!1}},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Video player",description:"This can present video in a highly accessible manner regardless of source.",icon:"av:play-circle-filled",color:"red",groups:["Video","Media"],handles:[{type:"video",source:"source",title:"caption",caption:"caption",description:"caption",color:"primaryColor"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],configure:[{property:"source",title:"Source",description:"The URL for this video.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"track",title:"Closed captions",description:"The URL for the captions file.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"thumbnailSrc",title:"Thumbnail image",description:"Optional. The URL for a thumbnail/poster image.",inputMethod:"textfield",icon:"link",required:!0,validationType:"url"},{property:"mediaTitle",title:"Title",description:"Simple title for under video",inputMethod:"textfield",icon:"av:video-label",required:!1,validationType:"text"},{property:"accentColor",title:"Accent color",description:"Select the accent color for the player.",inputMethod:"colorpicker",icon:"editor:format-color-fill"},{property:"dark",title:"Dark theme",description:"Enable dark theme for the player.",inputMethod:"boolean",icon:"invert-colors"}],advanced:[{property:"darkTranscript",title:"Dark theme for transcript",description:"Enable dark theme for the transcript.",inputMethod:"boolean"},{property:"hideTimestamps",title:"Hide timestamps",description:"Hide the time stamps on the transcript.",inputMethod:"boolean"},{property:"preload",title:"Preload source(s).",description:"How the sources should be preloaded, i.e. auto, metadata (default), or none.",inputMethod:"select",options:{preload:"Preload all media",metadata:"Preload media metadata only",none:"Don't preload anything"}},{property:"stickyCorner",title:"Sticky Corner",description:"Set the corner where a video plays when scrolled out of range, or choose none to disable sticky video.",inputMethod:"select",options:{none:"none","top-left":"top-left","top-right":"top-right","bottom-left":"bottom-left","bottom-right":"bottom-right"}},{property:"sources",title:"Other sources",description:"List of other sources",inputMethod:"array",properties:[{property:"src",title:"Source",description:"The URL for this video.",inputMethod:"textfield"},{property:"type",title:"Type",description:"Media type data",inputMethod:"select",options:{"audio/aac":"acc audio","audio/flac":"flac audio","audio/mp3":"mp3 audio","video/mp4":"mp4 video","video/mov":"mov video","audio/ogg":"ogg audio","video/ogg":"ogg video","audio/wav":"wav audio","audio/webm":"webm audio","video/webm":"webm video"}}]},{property:"tracks",title:"Track list",description:"Tracks of different languages of closed captions",inputMethod:"array",properties:[{property:"kind",title:"Kind",description:"Kind of track",inputMethod:"select",options:{subtitles:"subtitles"}},{property:"label",title:"Label",description:"The human-readable name for this track, eg. \"English Subtitles\"",inputMethod:"textfield"},{property:"src",title:"Source",description:"Source of the track",inputMethod:"textfield"},{property:"srclang",title:"Two letter, language code, eg. \"en\" for English, \"de\" for German, \"es\" for Spanish, etc.",description:"Label",inputMethod:"textfield"}]}]}})},_computeYoutubeId:function(k,l){return void 0!==k&&"youtube"===l&&this._computeSRC(k).replace(/(https?:\/\/)?(www.)?youtube(-nocookie)?.com\/embed\//,"")},_computeYoutube:function(k){return"youtube"===k},_computeA11yMedia:function(k,l){return!(l||"youtube"!=k&&"local"!=k)},_computeIframed:function(k,l){return 0<k.length&&void 0!==k[0]&&this._sourceIsIframe(k[0].src)&&!l},_getSourceData:function(k,l,m){for(var p=d.dom(this).querySelector("track"),q=l.slice(),u=0;u<q.length;u++)q[u].type=void 0!==q[u].type&&null!==q[u].type?q[u].type:this._computeMediaType(q[u].src),q[u].src=this._computeSRC(q[u].src);if(null!==k){var v=this._computeSRC(k);this.sourceType=this._computeSourceType(v),"youtube"!==this.sourceType&&q.unshift({src:v,type:this._computeMediaType(v)})}return this.__standAlone=null==m||0===m.length&&null===p,q},_computeMediaType:function(k){var l="",m=function(q,u){for(var v=0;v<u.length;v++)""===l&&null!==k&&-1<k.toLowerCase().indexOf("."+u[v])&&(l=q+"/"+u[v])};return m("audio",["aac","flac","mp3","oga","wav"]),m("video",["mov","mp4","ogv","webm"]),l},_computeSandboxed:function(k){return 0<k.length&&void 0!==k[0]&&this._sourceIsIframe(k[0].src)&&"function"==typeof document.createElement("webview").reload},_computeSourceType:function(k){var l=d.dom(this).querySelector("source");if(0<k.length&&void 0!==k[0]&&"undefined"!==f(k[0].src))return this.getVideoType(k[0].src);if(null!==l){var m=this._computeSRC(l.getAttribute("src"));return this.getVideoType(m)}return null},_computeSRC:function(k){if(null!==k&&void 0!==f(k)){var l=void 0===this.sourceType?this.getVideoType(k):this.sourceType;k=this.cleanVideoSource(k,l),"vimeo"==l?(k+=this.vimeoTitle?"?title=1":"?title=0",k+=this.vimeoByline?"&byline=1":"&byline=0",k+=this.vimeoPortrait?"&portrait=1":"&portrait=0","undefined"!==f(this.videoColor)&&(k+="&color="+this.videoColor)):"dailymotion"==l&&(k+="&ui-start-screen-info=false",k+="&ui-logo=false",k+="&sharing-enable=false",k+="&endscreen-enable=false","undefined"!==f(this.videoColor)&&(k+="&ui-highlight="+this.videoColor))}return k}});b.VideoPlayer=h,Object.defineProperty(b,"__esModule",{value:!0})});