define(["exports"],function(_exports){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.Resolver=_exports.Router=void 0;function t(t){return t=t||[],Array.isArray(t)?t:[t]}function e(t){return"[Vaadin.Router] ".concat(t)}var n="module",r="nomodule",o=[n,r];function i(t){if(!t.match(/.+\.[m]?js$/))throw new Error(e("Unsupported type for bundle \"".concat(t,"\": .js or .mjs expected.")))}function s(t){if(!t||!_h(t.path))throw new Error(e("Expected route config to be an object with a \"path\" string property, or an array of such objects"));var s=t.bundle,u=["component","redirect","bundle"];if(!(l(t.action)||Array.isArray(t.children)||l(t.children)||f(s)||u.some(function(e){return _h(t[e])})))throw new Error(e("Expected route config \"".concat(t.path,"\" to include either \"").concat(u.join("\", \""),"\" ")+"or \"action\" function but none found."));if(s)if(_h(s))i(s);else{if(!o.some(function(t){return t in s}))throw new Error(e("Expected route bundle to include either \""+r+"\" or \""+n+"\" keys, or both"));o.forEach(function(t){return t in s&&i(s[t])})}t.redirect&&["bundle","component"].forEach(function(n){n in t&&console.warn(e("Route config \"".concat(t.path,"\" has both \"redirect\" and \"").concat(n,"\" properties, ")+"and \"redirect\" will always override the latter. Did you mean to only use \"".concat(n,"\"?")))})}function u(e){t(e).forEach(function(t){return s(t)})}function c(t,e){var o=document.head.querySelector("script[src=\""+t+"\"][async]");return o||((o=document.createElement("script")).setAttribute("src",t),e===n?o.setAttribute("type",n):e===r&&o.setAttribute(r,""),o.async=!0),new Promise(function(t,e){o.onreadystatechange=o.onload=function(e){o.t=!0,t(e)},o.onerror=function(t){o.parentNode&&o.parentNode.removeChild(o),e(t)},null===o.parentNode?document.head.appendChild(o):o.t&&t()})}function a(t,e){return!window.dispatchEvent(new CustomEvent("vaadin-router-".concat(t),{cancelable:"go"===t,detail:e}))}function f(t){return"object"==babelHelpers.typeof(t)&&!!t}function l(t){return"function"==typeof t}function _h(t){return"string"==typeof t}function d(t){var n=new Error(e("Page not found (".concat(t.pathname,")")));return n.context=t,n.code=404,n}var w=new(/*#__PURE__*/function(){function _class(){babelHelpers.classCallCheck(this,_class)}return _class}());function p(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;for(var e=t.target,n=t.composedPath?t.composedPath():t.path||[],_t=0,_r;_t<n.length;_t++){_r=n[_t];if(_r.nodeName&&"a"===_r.nodeName.toLowerCase()){e=_r;break}}for(;e&&"a"!==e.nodeName.toLowerCase();){e=e.parentNode}e&&"a"===e.nodeName.toLowerCase()&&(e.target&&"_self"!==e.target.toLowerCase()||e.hasAttribute("download")||e.pathname===window.location.pathname&&""!==e.hash||(e.origin||function(t){var e=t.port,n=t.protocol;return"".concat(n,"//").concat("http:"===n&&"80"===e||"https:"===n&&"443"===e?t.hostname:t.host)}(e))===window.location.origin&&a("go",{pathname:e.pathname})&&t.preventDefault())}var m={activate:function activate(){window.document.addEventListener("click",p)},inactivate:function inactivate(){window.document.removeEventListener("click",p)}};function v(t){"vaadin-router-ignore"!==t.state&&a("go",{pathname:window.location.pathname})}/Trident/.test(navigator.userAgent)&&!l(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,!!e.bubbles,!!e.cancelable),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);var y={activate:function activate(){window.addEventListener("popstate",v)},inactivate:function inactivate(){window.removeEventListener("popstate",v)}},b=S,g=R,E=function E(t,e){return P(R(t,e))},$=P,_=C,O="/",x="./",j=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function R(t,e){for(var n,r=[],o=0,i=0,s="",u=e&&e.delimiter||O,c=e&&e.delimiters||x,a=!1;null!==(n=j.exec(t));){var f=n[0],l=n[1],h=n.index;if(s+=t.slice(i,h),i=h+f.length,l)s+=l[1],a=!0;else{var d="",w=t[i],p=n[2],m=n[3],v=n[4],y=n[5];if(!a&&s.length){var b=s.length-1;-1<c.indexOf(s[b])&&(d=s[b],s=s.slice(0,b))}s&&(r.push(s),s="",a=!1);var g=""!==d&&void 0!==w&&w!==d,E="+"===y||"*"===y,$="?"===y||"*"===y,_=d||u,R=m||v;r.push({name:p||o++,prefix:d,delimiter:_,optional:$,repeat:E,partial:g,pattern:R?T(R):"[^"+A(_)+"]+?"})}}return(s||i<t.length)&&r.push(s+t.substr(i)),r}function P(t){for(var e=Array(t.length),n=0;n<t.length;n++){"object"==babelHelpers.typeof(t[n])&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"))}return function(n,r){for(var o="",i=r&&r.encode||encodeURIComponent,s=0,u;s<t.length;s++){u=t[s];if("string"!=typeof u){var c,a=n?n[u.name]:void 0;if(Array.isArray(a)){if(!u.repeat)throw new TypeError("Expected \""+u.name+"\" to not repeat, but got array");if(0===a.length){if(u.optional)continue;throw new TypeError("Expected \""+u.name+"\" to not be empty")}for(var f=0;f<a.length;f++){if(c=i(a[f],u),!e[s].test(c))throw new TypeError("Expected all \""+u.name+"\" to match \""+u.pattern+"\"");o+=(0===f?u.prefix:u.delimiter)+c}}else if("string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a){if(!u.optional)throw new TypeError("Expected \""+u.name+"\" to be "+(u.repeat?"an array":"a string"));u.partial&&(o+=u.prefix)}else{if(c=i(a+"",u),!e[s].test(c))throw new TypeError("Expected \""+u.name+"\" to match \""+u.pattern+"\", but got \""+c+"\"");o+=u.prefix+c}}else o+=u}return o}}function A(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function T(t){return t.replace(/([=!:$/()])/g,"\\$1")}function k(t){return t&&t.sensitive?"":"i"}function C(t,e,n){for(var r=(n=n||{}).strict,o=!1!==n.end,i=A(n.delimiter||O),s=n.delimiters||x,u=[].concat(n.endsWith||[]).map(A).concat("$").join("|"),c="",a=0===t.length,f=0,l;f<t.length;f++){l=t[f];if("string"==typeof l)c+=A(l),a=f===t.length-1&&-1<s.indexOf(l[l.length-1]);else{var h=A(l.prefix),d=l.repeat?"(?:"+l.pattern+")(?:"+h+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),l.optional?l.partial?c+=h+"("+d+")?":c+="(?:"+h+"("+d+"))?":c+=h+"("+d+")"}}return o?(r||(c+="(?:"+i+")?"),c+="$"===u?"$":"(?="+u+")"):(r||(c+="(?:"+i+"(?="+u+"))?"),a||(c+="(?="+i+"|"+u+")")),new RegExp("^"+c,k(n))}function S(t,e,n){return babelHelpers.instanceof(t,RegExp)?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++){e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null})}return t}(t,e):Array.isArray(t)?function(t,e,n){for(var r=[],o=0;o<t.length;o++){r.push(S(t[o],e,n).source)}return new RegExp("(?:"+r.join("|")+")",k(n))}(t,e,n):function(t,e,n){return C(R(t,n),e,n)}(t,e,n)}b.parse=g,b.compile=E,b.tokensToFunction=$,b.tokensToRegExp=_;var B=Object.prototype.hasOwnProperty,M=new Map;function U(t){try{return decodeURIComponent(t)}catch(e){return t}}function I(t,e,n,r,o){var i,s,u=0,c=t.path||"";return"/"===c.charAt(0)&&(n&&(c=c.substr(1)),n=!0),{next:function next(a){if(t===a)return{done:!0};var f=t.o=t.o||t.children;if(!i&&(i=function(t,e,n,r,o){var i="".concat(t,"|").concat(n=!!n),s=M.get(i);if(!s){var _e=[];s={keys:_e,pattern:b(t,_e,{end:n,strict:""===t})},M.set(i,s)}var u=s.pattern.exec(e);if(!u)return null;for(var c=Object.assign({},o),_t2=1;_t2<u.length;_t2++){var _e2=s.keys[_t2-1],_n=_e2.name,_r2=u[_t2];void 0===_r2&&B.call(c,_n)||(_e2.repeat?c[_n]=_r2?_r2.split(_e2.delimiter).map(U):[]:c[_n]=_r2?U(_r2):_r2)}return{path:u[0],keys:(r||[]).concat(s.keys),params:c}}(c,e,!f,r,o)))return{done:!1,value:{route:t,keys:i.keys,params:i.params,path:i.path}};if(i&&f)for(;u<f.length;){if(!s){var _r4=f[u];_r4.parent=t;var _o=i.path.length;0<_o&&"/"===e.charAt(_o)&&(_o+=1),s=I(_r4,e.substr(_o),n,i.keys,i.params)}var _r3=s.next(a);if(!_r3.done)return{done:!1,value:_r3.value};s=null,u++}return{done:!0}}}}function L(t){if(l(t.route.action))return t.route.action(t)}M.set("|false",{keys:[],pattern:/(?:)/});var D=/*#__PURE__*/function(){function D(t){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};babelHelpers.classCallCheck(this,D);if(Object(t)!==t)throw new TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||L,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",o:t,parent:null,i:!0}:t,this.root.parent=null}babelHelpers.createClass(D,[{key:"getRoutes",value:function getRoutes(){return babelHelpers.toConsumableArray(this.root.o)}},{key:"setRoutes",value:function setRoutes(e){u(e);var n=babelHelpers.toConsumableArray(t(e));this.root.o=n}},{key:"addRoutes",value:function addRoutes(e){var _this$root$o;return u(e),(_this$root$o=this.root.o).push.apply(_this$root$o,babelHelpers.toConsumableArray(t(e))),this.getRoutes()}},{key:"removeRoutes",value:function removeRoutes(){this.setRoutes([])}},{key:"resolve",value:function resolve(t){var _this=this,e=Object.assign({},this.context,_h(t)?{pathname:t}:t),n=I(this.root,this.s(e.pathname),this.baseUrl),r=this.resolveRoute,o=null,i=null,s=e;function u(t){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:o.value.route,a=2<arguments.length?arguments[2]:void 0,f=null===a&&o.value.route;return o=i||n.next(f),i=null,t||!o.done&&function(t,e){var n=e;for(;n;){if((n=n.parent)===t)return!0}return!1}(c,o.value.route)?o.done?Promise.reject(d(e)):(function(t,e){var n=e.route,r=e.path;if(n&&!n.i){var _e3={path:r,route:n};!function(t,e){return!e.parent||!t||!t.length||t[t.length-1].route!==e.parent}(t.chain,n)?t.chain.push(_e3):t.chain=[_e3]}}(e,o.value),s=Object.assign({},e,o.value),Promise.resolve(r(s)).then(function(e){return null!==e&&void 0!==e&&e!==w?(s.result=e.result||e,s):u(t,c,e)})):(i=o,Promise.resolve(w))}return e.next=u,Promise.resolve().then(function(){return u(!0,_this.root)}).catch(function(t){var e=function(t){var e="Path '".concat(t.pathname,"' is not properly resolved due to an error."),n=(t.route||{}).path;return n&&(e+=" Resolution had failed on route: '".concat(n,"'")),e}(s);if(t?console.warn(e):t=new Error(e),t.context=t.context||s,babelHelpers.instanceof(t,DOMException)||(t.code=t.code||500),_this.errorHandler)return s.result=_this.errorHandler(t),s;throw t})}},{key:"s",value:function s(t){if(!this.baseUrl)return t;var e=this.l,n=this.constructor.u(t,e).href;return n.slice(0,e.length)===e?n.slice(e.length):void 0}},{key:"l",get:function get(){return this.baseUrl?this.constructor.u(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}}],[{key:"u",value:function u(t,e){return new URL(t,e)}}]);return D}();_exports.Resolver=D;D.pathToRegexp=b;var F=D.pathToRegexp,N=new Map;function H(t,e){var n=t.get(e);if(n&&1<n.length)throw new Error("Duplicate route with name \"".concat(e,"\".")+" Try seting unique 'name' route properties.");return n&&n[0]}function W(t){var e=t.path;return void 0!==(e=Array.isArray(e)?e[0]:e)?e:""}function q(t){var e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};if(!babelHelpers.instanceof(t,D))throw new TypeError("An instance of Resolver is expected");var n=new Map;return function(r,o){var i=H(n,r);if(!(i||(n.clear(),function t(e,n,r){var o=n.name||n.component;if(o&&(e.has(o)?e.get(o).push(n):e.set(o,[n])),Array.isArray(r))for(var _o2=0,_i;_o2<r.length;_o2++){_i=r[_o2];_i.parent=n,t(e,_i,_i.o||_i.children)}}(n,t.root,t.root.o),i=H(n,r))))throw new Error("Route \"".concat(r,"\" not found"));var s=N.get(i.fullPath);if(!s){var _t3=W(i),_e4=i.parent;for(;_e4;){var _n3=W(_e4);_n3&&(_t3=_n3.replace(/\/$/,"")+"/"+_t3.replace(/^\//,"")),_e4=_e4.parent}for(var _n2=F.parse(_t3),_r5=F.tokensToFunction(_n2),_o3=Object.create(null),_t4=0;_t4<_n2.length;_t4++){_h(_n2[_t4])||(_o3[_n2[_t4].name]=!0)}s={toPath:_r5,keys:_o3},N.set(_t3,s),i.fullPath=_t3}var u=s.toPath(o,e)||"/";if(e.stringifyQueryParams&&o){for(var _t5={},_n4=Object.keys(o),_e5=0,_r7;_e5<_n4.length;_e5++){_r7=_n4[_e5];s.keys[_r7]||(_t5[_r7]=o[_r7])}var _r6=e.stringifyQueryParams(_t5);_r6&&(u+="?"===_r6.charAt(0)?_r6:"?".concat(_r6))}return u}}var z=[];function J(t){z.forEach(function(t){return t.inactivate()}),t.forEach(function(t){return t.activate()}),z=t}var K=function K(t){var e=getComputedStyle(t).getPropertyValue("animation-name");return e&&"none"!==e},V=function V(t,e){var n=function n(){t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)};function G(t,e){return t.classList.add(e),new Promise(function(n){if(K(t)){var _r8=t.getBoundingClientRect(),_o4="height: ".concat(_r8.bottom-_r8.top,"px; width: ").concat(_r8.right-_r8.left,"px");t.setAttribute("style","position: absolute; ".concat(_o4)),V(t,function(){t.classList.remove(e),t.removeAttribute("style"),n()})}else t.classList.remove(e),n()})}var Q=256;function X(t){return null!==t&&void 0!==t}function Y(_ref,i){var _ref$pathname=_ref.pathname,t=void 0===_ref$pathname?"":_ref$pathname,_ref$chain=_ref.chain,e=void 0===_ref$chain?[]:_ref$chain,_ref$params=_ref.params,n=void 0===_ref$params?{}:_ref$params,r=_ref.redirectFrom,o=_ref.resolver,s=e.map(function(t){return t.route});return{baseUrl:o&&o.baseUrl||"",pathname:t,routes:s,route:i||s.length&&s[s.length-1]||null,params:n,redirectFrom:r,getUrl:function getUrl(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{};return rt(it.pathToRegexp.compile(ot(s))(Object.assign({},n,t)),o)}}}function Z(t,e){var n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function tt(t,e,n){if(l(t))return t.apply(n,e)}function et(t,e,n){return function(r){return r&&(r.cancel||r.redirect)?r:n?tt(n[t],e,n):void 0}}function nt(t){if(t&&t.length){for(var _e6=t[0].parentNode,_n5=0;_n5<t.length;_n5++){_e6.removeChild(t[_n5])}}}function rt(t,e){var n=e.l;return n?e.constructor.u(t.replace(/^\//,""),n).pathname:t}function ot(t){return t.map(function(t){return t.path}).reduce(function(t,e){return e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t},"")}var it=/*#__PURE__*/function(_D){babelHelpers.inherits(it,_D);function it(t,e){var _this2;babelHelpers.classCallCheck(this,it);var n=document.head.querySelector("base");_this2=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(it).call(this,[],Object.assign({baseUrl:n&&n.getAttribute("href")},e))),_this2.resolveRoute=function(t){return _this2.h(t)};var r=it.NavigationTrigger;it.setTriggers.apply(it,Object.keys(r).map(function(t){return r[t]})),_this2.baseUrl,_this2.ready,_this2.ready=Promise.resolve(t),_this2.location,_this2.location=Y({resolver:babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(_this2))}),_this2.p=0,_this2.m=_this2.v.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(_this2))),_this2.setOutlet(t),_this2.subscribe();return _this2}babelHelpers.createClass(it,[{key:"h",value:function h(n){var r=n.route,i=Promise.resolve();l(r.children)&&(i=i.then(function(){return r.children(function(t){var e=Object.assign({},t);return delete e.next,e}(n))}).then(function(n){X(n)||l(r.children)||(n=r.children),function(n,r){if(!Array.isArray(n)&&!f(n))throw new Error(e("Incorrect \"children\" value for the route ".concat(r.path,": expected array or object, but got ").concat(n)));r.o=[];for(var o=t(n),_t6=0;_t6<o.length;_t6++){s(o[_t6]),r.o.push(o[_t6])}}(n,r)}));var u={redirect:function redirect(t){return Z(n,t)},component:function component(t){return function(t,e){var n=document.createElement(e);n.location=Y(t);var r=t.chain.map(function(t){return t.route}).indexOf(t.route);return t.chain[r].element=n,n}(n,t)}};return i.then(function(){return tt(r.action,[n,u],r)}).then(function(t){return X(t)&&(babelHelpers.instanceof(t,HTMLElement)||t.redirect||t===w)?t:_h(r.redirect)?u.redirect(r.redirect):r.bundle?(a=r.bundle,_h(a)?c(a):Promise.race(o.filter(function(t){return t in a}).map(function(t){return c(a[t],t)}))).then(function(){},function(){throw new Error(e("Bundle not found: ".concat(r.bundle,". Check if the file name is correct")))}):void 0}).then(function(t){return X(t)?t:_h(r.component)?u.component(r.component):void 0});var a}},{key:"setOutlet",value:function setOutlet(t){t&&this.g(t),this.$=t}},{key:"getOutlet",value:function getOutlet(){return this.$}},{key:"setRoutes",value:function setRoutes(t){this._=void 0,babelHelpers.get(babelHelpers.getPrototypeOf(it.prototype),"setRoutes",this).call(this,t),this.v()}},{key:"render",value:function render(t,e){var _this3=this,n=++this.p,r=t.pathname||t;return this.ready=this.resolve(t).then(function(t){return _this3.O(t)}).then(function(t){if(n===_this3.p){var _r9=_this3.j;if(t===_r9)return _this3.location;_this3.location=Y(t),a("location-changed",{router:_this3,location:_this3.location}),e&&_this3.R(t.pathname,t.redirectFrom),_this3.P(t,_r9);var _o5=_this3.A(t);return _this3.T(t),_this3.k(t,_r9),_o5.then(function(){if(n===_this3.p)return _this3.C(),_this3.j=t,_this3.location})}}).catch(function(t){if(n===_this3.p)throw e&&_this3.R(r),nt(_this3.$&&_this3.$.children),_this3.location=Y({pathname:r,resolver:_this3}),a("error",{router:_this3,error:t,pathname:r}),t}),this.ready}},{key:"O",value:function O(t){var _this4=this,e=1<arguments.length&&arguments[1]!==void 0?arguments[1]:t;return this.S(e).then(function(n){var r=n!==e?n:t;return n.next().then(function(t){if(null===t||t===w){if(rt(ot(n.chain),n.resolver)!==n.pathname)throw d(r)}return t&&t!==w?_this4.O(r,t):_this4.B(r)})})}},{key:"S",value:function S(t){var _this5=this,n=t.result;return babelHelpers.instanceof(n,HTMLElement)?Promise.resolve(t):n.redirect?this.M(n.redirect,t.U).then(function(t){return _this5.S(t)}):babelHelpers.instanceof(n,Error)?Promise.reject(n):Promise.reject(new Error(e("Invalid route resolution result for path \"".concat(t.pathname,"\". ")+"Expected redirect object or HTML element, but got: \"".concat(function(t){if("object"!=babelHelpers.typeof(t))return t+"";var e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return"Object"===e||"Array"===e?"".concat(e," ").concat(JSON.stringify(t)):e}(n),"\". ")+"Double check the action return value for the route.")))}},{key:"B",value:function B(t){var _this6=this;return this.I(t).then(function(e){return e===_this6.j||e===t?e:_this6.O(e)})}},{key:"I",value:function I(t){var _this7=this,e=(this.j||{}).chain||[],n=t.chain,r=Promise.resolve(),o=function o(){return{cancel:!0}},i=function i(e){return Z(t,e)};if(t.L=0,e.length){for(var _r10=0;_r10<Math.min(e.length,n.length)&&e[_r10].route===n[_r10].route&&e[_r10].path===n[_r10].path&&(e[_r10].element&&e[_r10].element.localName)===(n[_r10].element&&n[_r10].element.localName);_r10=++t.L){;}for(var _n6=e.length-1,_i2;_n6>=t.L;_n6--){_i2=Y(t);r=r.then(et("onBeforeLeave",[_i2,{prevent:o},this],e[_n6].element)).then(function(t){if(!(t||{}).redirect)return t})}}for(var _e7=t.L,_s;_e7<n.length;_e7++){_s=Y(t,n[_e7].route);r=r.then(et("onBeforeEnter",[_s,{prevent:o,redirect:i},this],n[_e7].element))}return r.then(function(e){if(e){if(e.cancel)return _this7.j;if(e.redirect)return _this7.M(e.redirect,t.U)}return t})}},{key:"M",value:function M(t,n){if(n>Q)throw new Error(e("Too many redirects when rendering ".concat(t.from)));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,U:(n||0)+1})}},{key:"g",value:function g(){var t=0<arguments.length&&arguments[0]!==void 0?arguments[0]:this.$;if(!babelHelpers.instanceof(t,Node))throw new TypeError(e("Expected router outlet to be a valid DOM Node (but got ".concat(t,")")))}},{key:"R",value:function R(t,e){if(window.location.pathname!==t){var _n7=e?"replaceState":"pushState";window.history[_n7](null,document.title,t),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}},{key:"P",value:function P(t,e){this.g(),this.D();for(var n=this.$,_r11=0,_o6;_r11<t.L;_r11++){_o6=e&&e.chain[_r11].element;if(_o6){if(_o6.parentNode!==n)break;t.chain[_r11].element=_o6,n=_o6}}this.F=Array.from(n.children),this.N=[];for(var r=n,_e8=t.L,_o7;_e8<t.chain.length;_e8++){_o7=t.chain[_e8].element;_o7&&(r.appendChild(_o7),r===n&&this.N.push(_o7),r=_o7)}}},{key:"C",value:function C(){this.F&&nt(this.F),this.F=null,this.N=null}},{key:"D",value:function D(){this.F&&this.N&&(nt(this.N),this.F=null,this.N=null)}},{key:"k",value:function k(t,e){if(e)for(var _n8=e.chain.length-1,_r12;_n8>=t.L;_n8--){_r12=e.chain[_n8].element;if(_r12)try{var _n9=Y(t);tt(_r12.onAfterLeave,[_n9,{},e.resolver],_r12)}finally{nt(_r12.children)}}}},{key:"T",value:function T(t){for(var _e9=t.L;_e9<t.chain.length;_e9++){var _n10=t.chain[_e9].element||{},_r13=Y(t,t.chain[_e9].route);tt(_n10.onAfterEnter,[_r13,{},t.resolver],_n10)}}},{key:"A",value:function A(t){for(var e=(this.F||[])[0],n=(this.N||[])[0],r=[],o=t.chain,i,_t7=o.length;0<_t7;_t7--){if(o[_t7-1].route.animate){i=o[_t7-1].route.animate;break}}if(e&&n&&i){var _t8=f(i)&&i.leave||"leaving",_o8=f(i)&&i.enter||"entering";r.push(G(e,_t8)),r.push(G(n,_o8))}return Promise.all(r).then(function(){return t})}},{key:"subscribe",value:function subscribe(){window.addEventListener("vaadin-router-go",this.m)}},{key:"unsubscribe",value:function unsubscribe(){window.removeEventListener("vaadin-router-go",this.m)}},{key:"v",value:function v(t){var e=t?t.detail.pathname:window.location.pathname;_h(this.s(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render(e,!0))}},{key:"urlForName",value:function urlForName(t,e){return this._||(this._=q(this)),rt(this._(t,e),this)}},{key:"urlForPath",value:function urlForPath(t,e){return rt(it.pathToRegexp.compile(t)(e),this)}}],[{key:"setTriggers",value:function setTriggers(){for(var _len=arguments.length,t=Array(_len),_key=0;_key<_len;_key++){t[_key]=arguments[_key]}J(t)}},{key:"go",value:function go(t){return a("go",{pathname:t})}}]);return it}(D);_exports.Router=it;var st=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i;function ut(t,e){if("function"!=typeof t)return;var n=st.exec(t.toString());if(n)try{t=new Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};var ct=function ct(t,e){if(window.Vaadin.developmentMode)return ut(t,e)};function at(){}void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return localStorage.getItem("vaadin.developmentmode.force")||0<=["localhost","127.0.0.1"].indexOf(window.location.hostname)&&!ut(function(){return!0})&&!function(){if(window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients){var _t9=Object.keys(window.Vaadin.Flow.clients).map(function(t){return window.Vaadin.Flow.clients[t]}).filter(function(t){return t.productionMode});if(0<_t9.length)return!0}return!1}()}catch(t){return!1}}());window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.2.0"}),ct(at),it.NavigationTrigger={POPSTATE:y,CLICK:m}});