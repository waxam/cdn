define(["exports"], function (_exports) {
  "use strict";

  Object.defineProperty(_exports, "__esModule", {
    value: true
  });
  _exports.Router = _exports.Resolver = void 0;

  function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = babelHelpers.getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = babelHelpers.getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return babelHelpers.possibleConstructorReturn(this, result); }; }

  function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }

  function t(t) {
    return t = t || [], Array.isArray(t) ? t : [t];
  }

  function e(t) {
    return "[Vaadin.Router] ".concat(t);
  }

  var n = "module",
      r = "nomodule",
      o = [n, r];

  function i(t) {
    if (!t.match(/.+\.[m]?js$/)) throw new Error(e("Unsupported type for bundle \"".concat(t, "\": .js or .mjs expected.")));
  }

  function s(t) {
    if (!t || !_l(t.path)) throw new Error(e('Expected route config to be an object with a "path" string property, or an array of such objects'));
    var s = t.bundle,
        c = ["component", "redirect", "bundle"];
    if (!(f(t.action) || Array.isArray(t.children) || f(t.children) || h(s) || c.some(function (e) {
      return _l(t[e]);
    }))) throw new Error(e("Expected route config \"".concat(t.path, "\" to include either \"").concat(c.join('", "'), "\" ") + 'or "action" function but none found.'));
    if (s) if (_l(s)) i(s);else {
      if (!o.some(function (t) {
        return t in s;
      })) throw new Error(e('Expected route bundle to include either "' + r + '" or "' + n + '" keys, or both'));
      o.forEach(function (t) {
        return t in s && i(s[t]);
      });
    }
    t.redirect && ["bundle", "component"].forEach(function (n) {
      n in t && console.warn(e("Route config \"".concat(t.path, "\" has both \"redirect\" and \"").concat(n, "\" properties, ") + "and \"redirect\" will always override the latter. Did you mean to only use \"".concat(n, "\"?")));
    });
  }

  function c(e) {
    t(e).forEach(function (t) {
      return s(t);
    });
  }

  function u(t, e) {
    var o = document.head.querySelector('script[src="' + t + '"][async]');
    return o || ((o = document.createElement("script")).setAttribute("src", t), e === n ? o.setAttribute("type", n) : e === r && o.setAttribute(r, ""), o.async = !0), new Promise(function (t, e) {
      o.onreadystatechange = o.onload = function (e) {
        o.t = !0, t(e);
      }, o.onerror = function (t) {
        o.parentNode && o.parentNode.removeChild(o), e(t);
      }, null === o.parentNode ? document.head.appendChild(o) : o.t && t();
    });
  }

  function a(t, e) {
    return !window.dispatchEvent(new CustomEvent("vaadin-router-".concat(t), {
      cancelable: "go" === t,
      detail: e
    }));
  }

  function h(t) {
    return "object" == babelHelpers.typeof(t) && !!t;
  }

  function f(t) {
    return "function" == typeof t;
  }

  function _l(t) {
    return "string" == typeof t;
  }

  function d(t) {
    var n = new Error(e("Page not found (".concat(t.pathname, ")")));
    return n.context = t, n.code = 404, n;
  }

  var p = new ( /*#__PURE__*/function () {
    function _class() {
      babelHelpers.classCallCheck(this, _class);
    }

    return babelHelpers.createClass(_class);
  }())();

  function w(t) {
    if (t.defaultPrevented) return;
    if (0 !== t.button) return;
    if (t.shiftKey || t.ctrlKey || t.altKey || t.metaKey) return;
    var e = t.target;
    var n = t.composedPath ? t.composedPath() : t.path || [];

    for (var _t = 0; _t < n.length; _t++) {
      var _r = n[_t];

      if (_r.nodeName && "a" === _r.nodeName.toLowerCase()) {
        e = _r;
        break;
      }
    }

    for (; e && "a" !== e.nodeName.toLowerCase();) {
      e = e.parentNode;
    }

    if (!e || "a" !== e.nodeName.toLowerCase()) return;
    if (e.target && "_self" !== e.target.toLowerCase()) return;
    if (e.hasAttribute("download")) return;
    if (e.hasAttribute("router-ignore")) return;
    if (e.pathname === window.location.pathname && "" !== e.hash) return;
    if ((e.origin || function (t) {
      var e = t.port,
          n = t.protocol;
      return "".concat(n, "//").concat("http:" === n && "80" === e || "https:" === n && "443" === e ? t.hostname : t.host);
    }(e)) !== window.location.origin) return;
    var _e = e,
        r = _e.pathname,
        o = _e.search,
        i = _e.hash;
    a("go", {
      pathname: r,
      search: o,
      hash: i
    }) && (t.preventDefault(), t && "click" === t.type && window.scrollTo(0, 0));
  }

  var m = {
    activate: function activate() {
      window.document.addEventListener("click", w);
    },
    inactivate: function inactivate() {
      window.document.removeEventListener("click", w);
    }
  };

  function v(t) {
    if ("vaadin-router-ignore" === t.state) return;
    var _window$location = window.location,
        e = _window$location.pathname,
        n = _window$location.search,
        r = _window$location.hash;
    a("go", {
      pathname: e,
      search: n,
      hash: r
    });
  }

  /Trident/.test(navigator.userAgent) && !f(window.PopStateEvent) && (window.PopStateEvent = function (t, e) {
    e = e || {};
    var n = document.createEvent("Event");
    return n.initEvent(t, Boolean(e.bubbles), Boolean(e.cancelable)), n.state = e.state || null, n;
  }, window.PopStateEvent.prototype = window.Event.prototype);
  var b = {
    activate: function activate() {
      window.addEventListener("popstate", v);
    },
    inactivate: function inactivate() {
      window.removeEventListener("popstate", v);
    }
  };

  var y = B,
      g = R,
      _ = function _(t, e) {
    return P(R(t, e));
  },
      E = P,
      $ = T,
      O = "/",
      j = "./",
      x = new RegExp(["(\\\\.)", "(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"), "g");

  function R(t, e) {
    for (var n, r = [], o = 0, i = 0, s = "", c = e && e.delimiter || O, u = e && e.delimiters || j, a = !1; null !== (n = x.exec(t));) {
      var h = n[0],
          f = n[1],
          l = n.index;
      if (s += t.slice(i, l), i = l + h.length, f) s += f[1], a = !0;else {
        var d = "",
            p = t[i],
            w = n[2],
            m = n[3],
            v = n[4],
            b = n[5];

        if (!a && s.length) {
          var y = s.length - 1;
          u.indexOf(s[y]) > -1 && (d = s[y], s = s.slice(0, y));
        }

        s && (r.push(s), s = "", a = !1);

        var g = "" !== d && void 0 !== p && p !== d,
            _ = "+" === b || "*" === b,
            E = "?" === b || "*" === b,
            $ = d || c,
            R = m || v;

        r.push({
          name: w || o++,
          prefix: d,
          delimiter: $,
          optional: E,
          repeat: _,
          partial: g,
          pattern: R ? A(R) : "[^" + k($) + "]+?"
        });
      }
    }

    return (s || i < t.length) && r.push(s + t.substr(i)), r;
  }

  function P(t) {
    for (var e = new Array(t.length), n = 0; n < t.length; n++) {
      "object" == babelHelpers.typeof(t[n]) && (e[n] = new RegExp("^(?:" + t[n].pattern + ")$"));
    }

    return function (n, r) {
      for (var o = "", i = r && r.encode || encodeURIComponent, s = 0; s < t.length; s++) {
        var c = t[s];

        if ("string" != typeof c) {
          var u,
              a = n ? n[c.name] : void 0;

          if (Array.isArray(a)) {
            if (!c.repeat) throw new TypeError('Expected "' + c.name + '" to not repeat, but got array');

            if (0 === a.length) {
              if (c.optional) continue;
              throw new TypeError('Expected "' + c.name + '" to not be empty');
            }

            for (var h = 0; h < a.length; h++) {
              if (u = i(a[h], c), !e[s].test(u)) throw new TypeError('Expected all "' + c.name + '" to match "' + c.pattern + '"');
              o += (0 === h ? c.prefix : c.delimiter) + u;
            }
          } else if ("string" != typeof a && "number" != typeof a && "boolean" != typeof a) {
            if (!c.optional) throw new TypeError('Expected "' + c.name + '" to be ' + (c.repeat ? "an array" : "a string"));
            c.partial && (o += c.prefix);
          } else {
            if (u = i(String(a), c), !e[s].test(u)) throw new TypeError('Expected "' + c.name + '" to match "' + c.pattern + '", but got "' + u + '"');
            o += c.prefix + u;
          }
        } else o += c;
      }

      return o;
    };
  }

  function k(t) {
    return t.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
  }

  function A(t) {
    return t.replace(/([=!:$/()])/g, "\\$1");
  }

  function C(t) {
    return t && t.sensitive ? "" : "i";
  }

  function T(t, e, n) {
    for (var r = (n = n || {}).strict, o = !1 !== n.start, i = !1 !== n.end, s = k(n.delimiter || O), c = n.delimiters || j, u = [].concat(n.endsWith || []).map(k).concat("$").join("|"), a = o ? "^" : "", h = 0 === t.length, f = 0; f < t.length; f++) {
      var l = t[f];
      if ("string" == typeof l) a += k(l), h = f === t.length - 1 && c.indexOf(l[l.length - 1]) > -1;else {
        var d = l.repeat ? "(?:" + l.pattern + ")(?:" + k(l.delimiter) + "(?:" + l.pattern + "))*" : l.pattern;
        e && e.push(l), l.optional ? l.partial ? a += k(l.prefix) + "(" + d + ")?" : a += "(?:" + k(l.prefix) + "(" + d + "))?" : a += k(l.prefix) + "(" + d + ")";
      }
    }

    return i ? (r || (a += "(?:" + s + ")?"), a += "$" === u ? "$" : "(?=" + u + ")") : (r || (a += "(?:" + s + "(?=" + u + "))?"), h || (a += "(?=" + s + "|" + u + ")")), new RegExp(a, C(n));
  }

  function B(t, e, n) {
    return babelHelpers.instanceof(t, RegExp) ? function (t, e) {
      if (!e) return t;
      var n = t.source.match(/\((?!\?)/g);
      if (n) for (var r = 0; r < n.length; r++) {
        e.push({
          name: r,
          prefix: null,
          delimiter: null,
          optional: !1,
          repeat: !1,
          partial: !1,
          pattern: null
        });
      }
      return t;
    }(t, e) : Array.isArray(t) ? function (t, e, n) {
      for (var r = [], o = 0; o < t.length; o++) {
        r.push(B(t[o], e, n).source);
      }

      return new RegExp("(?:" + r.join("|") + ")", C(n));
    }(t, e, n) : function (t, e, n) {
      return T(R(t, n), e, n);
    }(t, e, n);
  }

  y.parse = g, y.compile = _, y.tokensToFunction = E, y.tokensToRegExp = $;
  var M = Object.prototype.hasOwnProperty,
      S = new Map();

  function U(t) {
    try {
      return decodeURIComponent(t);
    } catch (e) {
      return t;
    }
  }

  function I(t, e, n, r, o) {
    var i,
        s,
        c = 0,
        u = t.path || "";
    return "/" === u.charAt(0) && (n && (u = u.substr(1)), n = !0), {
      next: function next(a) {
        if (t === a) return {
          done: !0
        };
        var h = t.o = t.o || t.children;
        if (!i && (i = function (t, e, n, r, o) {
          var i = "".concat(t, "|").concat(n = !!n);
          var s = S.get(i);

          if (!s) {
            var _e2 = [];
            s = {
              keys: _e2,
              pattern: y(t, _e2, {
                end: n,
                strict: "" === t
              })
            }, S.set(i, s);
          }

          var c = s.pattern.exec(e);
          if (!c) return null;
          var u = Object.assign({}, o);

          for (var _t2 = 1; _t2 < c.length; _t2++) {
            var _e3 = s.keys[_t2 - 1],
                _n = _e3.name,
                _r2 = c[_t2];
            void 0 === _r2 && M.call(u, _n) || (_e3.repeat ? u[_n] = _r2 ? _r2.split(_e3.delimiter).map(U) : [] : u[_n] = _r2 ? U(_r2) : _r2);
          }

          return {
            path: c[0],
            keys: (r || []).concat(s.keys),
            params: u
          };
        }(u, e, !h, r, o))) return {
          done: !1,
          value: {
            route: t,
            keys: i.keys,
            params: i.params,
            path: i.path
          }
        };
        if (i && h) for (; c < h.length;) {
          if (!s) {
            var _r4 = h[c];
            _r4.parent = t;
            var _o = i.path.length;
            _o > 0 && "/" === e.charAt(_o) && (_o += 1), s = I(_r4, e.substr(_o), n, i.keys, i.params);
          }

          var _r3 = s.next(a);

          if (!_r3.done) return {
            done: !1,
            value: _r3.value
          };
          s = null, c++;
        }
        return {
          done: !0
        };
      }
    };
  }

  function L(t) {
    if (f(t.route.action)) return t.route.action(t);
  }

  S.set("|false", {
    keys: [],
    pattern: /(?:)/
  });

  var D = /*#__PURE__*/function () {
    function D(t) {
      var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      babelHelpers.classCallCheck(this, D);
      if (Object(t) !== t) throw new TypeError("Invalid routes");
      this.baseUrl = e.baseUrl || "", this.errorHandler = e.errorHandler, this.resolveRoute = e.resolveRoute || L, this.context = Object.assign({
        resolver: this
      }, e.context), this.root = Array.isArray(t) ? {
        path: "",
        o: t,
        parent: null,
        i: !0
      } : t, this.root.parent = null;
    }

    babelHelpers.createClass(D, [{
      key: "getRoutes",
      value: function getRoutes() {
        return babelHelpers.toConsumableArray(this.root.o);
      }
    }, {
      key: "setRoutes",
      value: function setRoutes(e) {
        c(e);
        var n = babelHelpers.toConsumableArray(t(e));
        this.root.o = n;
      }
    }, {
      key: "addRoutes",
      value: function addRoutes(e) {
        var _this$root$o;

        return c(e), (_this$root$o = this.root.o).push.apply(_this$root$o, babelHelpers.toConsumableArray(t(e))), this.getRoutes();
      }
    }, {
      key: "removeRoutes",
      value: function removeRoutes() {
        this.setRoutes([]);
      }
    }, {
      key: "resolve",
      value: function resolve(t) {
        var _this = this;

        var e = Object.assign({}, this.context, _l(t) ? {
          pathname: t
        } : t),
            n = I(this.root, this.s(e.pathname), this.baseUrl),
            r = this.resolveRoute;
        var o = null,
            i = null,
            s = e;

        function c(t) {
          var u = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : o.value.route;
          var a = arguments.length > 2 ? arguments[2] : undefined;
          var h = null === a && o.value.route;
          return o = i || n.next(h), i = null, t || !o.done && function (t, e) {
            var n = e;

            for (; n;) {
              if ((n = n.parent) === t) return !0;
            }

            return !1;
          }(u, o.value.route) ? o.done ? Promise.reject(d(e)) : (function (t, e) {
            var n = e.route,
                r = e.path;

            if (n && !n.i) {
              var _e4 = {
                path: r,
                route: n
              };

              if (t.chain) {
                if (n.parent) {
                  var _e5 = t.chain.length;

                  for (; _e5-- && t.chain[_e5].route && t.chain[_e5].route !== n.parent;) {
                    t.chain.pop();
                  }
                }
              } else t.chain = [];

              t.chain.push(_e4);
            }
          }(s = Object.assign(s ? {
            chain: s.chain ? s.chain.slice(0) : []
          } : {}, e, o.value), o.value), Promise.resolve(r(s)).then(function (e) {
            return null !== e && void 0 !== e && e !== p ? (s.result = e.result || e, s) : c(t, u, e);
          })) : (i = o, Promise.resolve(p));
        }

        return e.next = c, Promise.resolve().then(function () {
          return c(!0, _this.root);
        }).catch(function (t) {
          var e = function (t) {
            var e = "Path '".concat(t.pathname, "' is not properly resolved due to an error.");
            var n = (t.route || {}).path;
            return n && (e += " Resolution had failed on route: '".concat(n, "'")), e;
          }(s);

          if (t ? console.warn(e) : t = new Error(e), t.context = t.context || s, babelHelpers.instanceof(t, DOMException) || (t.code = t.code || 500), _this.errorHandler) return s.result = _this.errorHandler(t), s;
          throw t;
        });
      }
    }, {
      key: "h",
      get: function get() {
        return this.baseUrl ? this.constructor.u(this.baseUrl, document.baseURI || document.URL).href.replace(/[^\/]*$/, "") : "";
      }
    }, {
      key: "s",
      value: function s(t) {
        if (!this.baseUrl) return t;
        var e = this.h,
            n = this.constructor.u(t, e).href;
        return n.slice(0, e.length) === e ? n.slice(e.length) : void 0;
      }
    }], [{
      key: "u",
      value: function u(t, e) {
        return new URL(t, e);
      }
    }]);
    return D;
  }();

  _exports.Resolver = D;
  D.pathToRegexp = y;
  var F = D.pathToRegexp,
      N = new Map();

  function H(t, e) {
    var n = t.get(e);
    if (n && n.length > 1) throw new Error("Duplicate route with name \"".concat(e, "\".") + " Try seting unique 'name' route properties.");
    return n && n[0];
  }

  function W(t) {
    var e = t.path;
    return void 0 !== (e = Array.isArray(e) ? e[0] : e) ? e : "";
  }

  function q(t) {
    var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    if (!babelHelpers.instanceof(t, D)) throw new TypeError("An instance of Resolver is expected");
    var n = new Map();
    return function (r, o) {
      var i = H(n, r);
      if (!(i || (n.clear(), function t(e, n, r) {
        var o = n.name || n.component;
        if (o && (e.has(o) ? e.get(o).push(n) : e.set(o, [n])), Array.isArray(r)) for (var _o2 = 0; _o2 < r.length; _o2++) {
          var _i = r[_o2];
          _i.parent = n, t(e, _i, _i.o || _i.children);
        }
      }(n, t.root, t.root.o), i = H(n, r)))) throw new Error("Route \"".concat(r, "\" not found"));
      var s = N.get(i.fullPath);

      if (!s) {
        var _t3 = W(i),
            _e6 = i.parent;

        for (; _e6;) {
          var _n3 = W(_e6);

          _n3 && (_t3 = _n3.replace(/\/$/, "") + "/" + _t3.replace(/^\//, "")), _e6 = _e6.parent;
        }

        var _n2 = F.parse(_t3),
            _r5 = F.tokensToFunction(_n2),
            _o3 = Object.create(null);

        for (var _t4 = 0; _t4 < _n2.length; _t4++) {
          _l(_n2[_t4]) || (_o3[_n2[_t4].name] = !0);
        }

        s = {
          toPath: _r5,
          keys: _o3
        }, N.set(_t3, s), i.fullPath = _t3;
      }

      var c = s.toPath(o, e) || "/";

      if (e.stringifyQueryParams && o) {
        var _t5 = {},
            _n4 = Object.keys(o);

        for (var _e7 = 0; _e7 < _n4.length; _e7++) {
          var _r7 = _n4[_e7];
          s.keys[_r7] || (_t5[_r7] = o[_r7]);
        }

        var _r6 = e.stringifyQueryParams(_t5);

        _r6 && (c += "?" === _r6.charAt(0) ? _r6 : "?".concat(_r6));
      }

      return c;
    };
  }

  var z = [];

  function J(t) {
    z.forEach(function (t) {
      return t.inactivate();
    }), t.forEach(function (t) {
      return t.activate();
    }), z = t;
  }

  var K = function K(t) {
    var e = getComputedStyle(t).getPropertyValue("animation-name");
    return e && "none" !== e;
  },
      V = function V(t, e) {
    var n = function n() {
      t.removeEventListener("animationend", n), e();
    };

    t.addEventListener("animationend", n);
  };

  function G(t, e) {
    return t.classList.add(e), new Promise(function (n) {
      if (K(t)) {
        var _r8 = t.getBoundingClientRect(),
            _o4 = "height: ".concat(_r8.bottom - _r8.top, "px; width: ").concat(_r8.right - _r8.left, "px");

        t.setAttribute("style", "position: absolute; ".concat(_o4)), V(t, function () {
          t.classList.remove(e), t.removeAttribute("style"), n();
        });
      } else t.classList.remove(e), n();
    });
  }

  var Q = 256;

  function X(t) {
    return null !== t && void 0 !== t;
  }

  function Y(_ref, c) {
    var _ref$pathname = _ref.pathname,
        t = _ref$pathname === void 0 ? "" : _ref$pathname,
        _ref$search = _ref.search,
        e = _ref$search === void 0 ? "" : _ref$search,
        _ref$hash = _ref.hash,
        n = _ref$hash === void 0 ? "" : _ref$hash,
        _ref$chain = _ref.chain,
        r = _ref$chain === void 0 ? [] : _ref$chain,
        _ref$params = _ref.params,
        o = _ref$params === void 0 ? {} : _ref$params,
        i = _ref.redirectFrom,
        s = _ref.resolver;
    var u = r.map(function (t) {
      return t.route;
    });
    return {
      baseUrl: s && s.baseUrl || "",
      pathname: t,
      search: e,
      hash: n,
      routes: u,
      route: c || u.length && u[u.length - 1] || null,
      params: o,
      redirectFrom: i,
      getUrl: function getUrl() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
        return rt(it.pathToRegexp.compile(ot(u))(Object.assign({}, o, t)), s);
      }
    };
  }

  function Z(t, e) {
    var n = Object.assign({}, t.params);
    return {
      redirect: {
        pathname: e,
        from: t.pathname,
        params: n
      }
    };
  }

  function tt(t, e, n) {
    if (f(t)) return t.apply(n, e);
  }

  function et(t, e, n) {
    return function (r) {
      return r && (r.cancel || r.redirect) ? r : n ? tt(n[t], e, n) : void 0;
    };
  }

  function nt(t) {
    if (t && t.length) {
      var _e8 = t[0].parentNode;

      for (var _n5 = 0; _n5 < t.length; _n5++) {
        _e8.removeChild(t[_n5]);
      }
    }
  }

  function rt(t, e) {
    var n = e.h;
    return n ? e.constructor.u(t.replace(/^\//, ""), n).pathname : t;
  }

  function ot(t) {
    return t.map(function (t) {
      return t.path;
    }).reduce(function (t, e) {
      return e.length ? t.replace(/\/$/, "") + "/" + e.replace(/^\//, "") : t;
    }, "");
  }

  var it = /*#__PURE__*/function (_D) {
    babelHelpers.inherits(it, _D);

    var _super = _createSuper(it);

    function it(t, e) {
      var _this2;

      babelHelpers.classCallCheck(this, it);
      var n = document.head.querySelector("base"),
          r = n && n.getAttribute("href");
      _this2 = _super.call(this, [], Object.assign({
        baseUrl: r && D.u(r, document.URL).pathname.replace(/[^\/]*$/, "")
      }, e)), _this2.resolveRoute = function (t) {
        return _this2.l(t);
      };
      var o = it.NavigationTrigger;
      it.setTriggers.apply(it, Object.keys(o).map(function (t) {
        return o[t];
      })), _this2.baseUrl, _this2.ready, _this2.ready = Promise.resolve(t), _this2.location, _this2.location = Y({
        resolver: babelHelpers.assertThisInitialized(_this2)
      }), _this2.p = 0, _this2.m = _this2.v.bind(babelHelpers.assertThisInitialized(_this2)), _this2.setOutlet(t), _this2.subscribe(), _this2.g = new WeakMap(), _this2._ = new WeakMap();
      return _this2;
    }

    babelHelpers.createClass(it, [{
      key: "l",
      value: function l(n) {
        var _this3 = this;

        var r = n.route;
        var i = Promise.resolve();
        f(r.children) && (i = i.then(function () {
          return r.children(function (t) {
            var e = Object.assign({}, t);
            return delete e.next, e;
          }(n));
        }).then(function (n) {
          X(n) || f(r.children) || (n = r.children), function (n, r) {
            if (!Array.isArray(n) && !h(n)) throw new Error(e("Incorrect \"children\" value for the route ".concat(r.path, ": expected array or object, but got ").concat(n)));
            r.o = [];
            var o = t(n);

            for (var _t6 = 0; _t6 < o.length; _t6++) {
              s(o[_t6]), r.o.push(o[_t6]);
            }
          }(n, r);
        }));
        var c = {
          redirect: function redirect(t) {
            return Z(n, t);
          },
          component: function component(t) {
            var e = document.createElement(t);
            return _this3.g.set(e, !0), e;
          }
        };
        return i.then(function () {
          if (_this3.$(n)) return tt(r.action, [n, c], r);
        }).then(function (t) {
          return X(t) && (babelHelpers.instanceof(t, HTMLElement) || t.redirect || t === p) ? t : _l(r.redirect) ? c.redirect(r.redirect) : r.bundle ? (a = r.bundle, _l(a) ? u(a) : Promise.race(o.filter(function (t) {
            return t in a;
          }).map(function (t) {
            return u(a[t], t);
          }))).then(function () {}, function () {
            throw new Error(e("Bundle not found: ".concat(r.bundle, ". Check if the file name is correct")));
          }) : void 0;
        }).then(function (t) {
          return X(t) ? t : _l(r.component) ? c.component(r.component) : void 0;
        });
        var a;
      }
    }, {
      key: "setOutlet",
      value: function setOutlet(t) {
        t && this.O(t), this.j = t;
      }
    }, {
      key: "getOutlet",
      value: function getOutlet() {
        return this.j;
      }
    }, {
      key: "setRoutes",
      value: function setRoutes(t) {
        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : !1;
        return this.R = void 0, this.P = void 0, babelHelpers.get(babelHelpers.getPrototypeOf(it.prototype), "setRoutes", this).call(this, t), e || this.v(), this.ready;
      }
    }, {
      key: "render",
      value: function render(t, e) {
        var _this4 = this;

        var n = ++this.p,
            r = Object.assign({
          search: "",
          hash: ""
        }, _l(t) ? {
          pathname: t
        } : t, {
          k: n
        });
        return this.ready = this.resolve(r).then(function (t) {
          return _this4.A(t);
        }).then(function (t) {
          if (_this4.$(t)) {
            var _r9 = _this4.R;
            if (t === _r9) return _this4.C(_r9, !0), _this4.location;
            if (_this4.location = Y(t), e && _this4.C(t, 1 === n), a("location-changed", {
              router: _this4,
              location: _this4.location
            }), t.T) return _this4.B(t, _r9), _this4.R = t, _this4.location;

            _this4.M(t, _r9);

            var _o5 = _this4.S(t);

            return _this4.U(t), _this4.I(t, _r9), _o5.then(function () {
              if (_this4.$(t)) return _this4.L(), _this4.R = t, _this4.location;
            });
          }
        }).catch(function (t) {
          if (n === _this4.p) throw e && _this4.C(r), nt(_this4.j && _this4.j.children), _this4.location = Y(Object.assign(r, {
            resolver: _this4
          })), a("error", Object.assign({
            router: _this4,
            error: t
          }, r)), t;
        }), this.ready;
      }
    }, {
      key: "A",
      value: function A(t) {
        var _this5 = this;

        var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t;
        return this.D(e).then(function (n) {
          var r = n !== e ? n : t,
              o = rt(ot(n.chain), n.resolver) === n.pathname,
              i = function i(t) {
            var e = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : t.route;
            var n = arguments.length > 2 ? arguments[2] : undefined;
            return t.next(void 0, e, n).then(function (n) {
              return null === n || n === p ? o ? t : null !== e.parent ? i(t, e.parent, n) : n : n;
            });
          };

          return i(n).then(function (t) {
            if (null === t || t === p) throw d(r);
            return t && t !== p && t !== n ? _this5.A(r, t) : _this5.F(n);
          });
        });
      }
    }, {
      key: "D",
      value: function D(t) {
        var _this6 = this;

        var n = t.result;
        return babelHelpers.instanceof(n, HTMLElement) ? (function (t, e) {
          e.location = Y(t);
          var n = t.chain.map(function (t) {
            return t.route;
          }).indexOf(t.route);
          t.chain[n].element = e;
        }(t, n), Promise.resolve(t)) : n.redirect ? this.N(n.redirect, t.H, t.k).then(function (t) {
          return _this6.D(t);
        }) : babelHelpers.instanceof(n, Error) ? Promise.reject(n) : Promise.reject(new Error(e("Invalid route resolution result for path \"".concat(t.pathname, "\". ") + "Expected redirect object or HTML element, but got: \"".concat(function (t) {
          if ("object" != babelHelpers.typeof(t)) return String(t);
          var e = Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];
          return "Object" === e || "Array" === e ? "".concat(e, " ").concat(JSON.stringify(t)) : e;
        }(n), "\". ") + "Double check the action return value for the route.")));
      }
    }, {
      key: "F",
      value: function F(t) {
        var _this7 = this;

        return this.W(t).then(function (e) {
          return e === _this7.R || e === t ? e : _this7.A(e);
        });
      }
    }, {
      key: "W",
      value: function W(t) {
        var _this8 = this;

        var e = this.R || {},
            n = e.chain || [],
            r = t.chain;
        var o = Promise.resolve();

        var i = function i() {
          return {
            cancel: !0
          };
        },
            s = function s(e) {
          return Z(t, e);
        };

        if (t.q = 0, t.T = !1, n.length) {
          for (var _e9 = 0; _e9 < Math.min(n.length, r.length) && n[_e9].route === r[_e9].route && (n[_e9].path === r[_e9].path || n[_e9].element === r[_e9].element) && this.J(n[_e9].element, r[_e9].element); _e9 = ++t.q) {
            ;
          }

          if (t.T = r.length === n.length && t.q == r.length && this.J(t.result, e.result), t.T) {
            for (var _e10 = r.length - 1; _e10 >= 0; _e10--) {
              o = this.K(o, t, {
                prevent: i
              }, n[_e10]);
            }

            for (var _e11 = 0; _e11 < r.length; _e11++) {
              o = this.V(o, t, {
                prevent: i,
                redirect: s
              }, r[_e11]), n[_e11].element.location = Y(t, n[_e11].route);
            }
          } else for (var _e12 = n.length - 1; _e12 >= t.q; _e12--) {
            o = this.K(o, t, {
              prevent: i
            }, n[_e12]);
          }
        }

        if (!t.T) for (var _e13 = 0; _e13 < r.length; _e13++) {
          _e13 < t.q ? _e13 < n.length && n[_e13].element && (n[_e13].element.location = Y(t, n[_e13].route)) : (o = this.V(o, t, {
            prevent: i,
            redirect: s
          }, r[_e13]), r[_e13].element && (r[_e13].element.location = Y(t, r[_e13].route)));
        }
        return o.then(function (e) {
          if (e) {
            if (e.cancel) return _this8.R.k = t.k, _this8.R;
            if (e.redirect) return _this8.N(e.redirect, t.H, t.k);
          }

          return t;
        });
      }
    }, {
      key: "K",
      value: function K(t, e, n, r) {
        var _this9 = this;

        var o = Y(e);
        return t.then(function (t) {
          if (_this9.$(e)) {
            return et("onBeforeLeave", [o, n, _this9], r.element)(t);
          }
        }).then(function (t) {
          if (!(t || {}).redirect) return t;
        });
      }
    }, {
      key: "V",
      value: function V(t, e, n, r) {
        var _this10 = this;

        var o = Y(e, r.route);
        return t.then(function (t) {
          if (_this10.$(e)) {
            return et("onBeforeEnter", [o, n, _this10], r.element)(t);
          }
        });
      }
    }, {
      key: "J",
      value: function J(t, e) {
        return !(!t || !e) && (this.g.get(t) && this.g.get(e) ? t.localName === e.localName : t === e);
      }
    }, {
      key: "$",
      value: function $(t) {
        return t.k === this.p;
      }
    }, {
      key: "N",
      value: function N(t, n, r) {
        if (n > Q) throw new Error(e("Too many redirects when rendering ".concat(t.from)));
        return this.resolve({
          pathname: this.urlForPath(t.pathname, t.params),
          redirectFrom: t.from,
          H: (n || 0) + 1,
          k: r
        });
      }
    }, {
      key: "O",
      value: function O() {
        var t = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.j;
        if (!babelHelpers.instanceof(t, Node)) throw new TypeError(e("Expected router outlet to be a valid DOM Node (but got ".concat(t, ")")));
      }
    }, {
      key: "C",
      value: function C(_ref2, r) {
        var t = _ref2.pathname,
            _ref2$search = _ref2.search,
            e = _ref2$search === void 0 ? "" : _ref2$search,
            _ref2$hash = _ref2.hash,
            n = _ref2$hash === void 0 ? "" : _ref2$hash;

        if (window.location.pathname !== t || window.location.search !== e || window.location.hash !== n) {
          var _o6 = r ? "replaceState" : "pushState";

          window.history[_o6](null, document.title, t + e + n), window.dispatchEvent(new PopStateEvent("popstate", {
            state: "vaadin-router-ignore"
          }));
        }
      }
    }, {
      key: "B",
      value: function B(t, e) {
        var n = this.j;

        for (var _r10 = 0; _r10 < t.q; _r10++) {
          var _o7 = e && e.chain[_r10].element;

          if (_o7) {
            if (_o7.parentNode !== n) break;
            t.chain[_r10].element = _o7, n = _o7;
          }
        }

        return n;
      }
    }, {
      key: "M",
      value: function M(t, e) {
        var _this11 = this;

        this.O(), this.G();
        var n = this.B(t, e);
        this.X = [], this.Y = Array.from(n.children).filter(function (e) {
          return _this11._.get(e) && e !== t.result;
        });
        var r = n;

        for (var _e14 = t.q; _e14 < t.chain.length; _e14++) {
          var _o8 = t.chain[_e14].element;
          _o8 && (r.appendChild(_o8), this._.set(_o8, !0), r === n && this.X.push(_o8), r = _o8);
        }
      }
    }, {
      key: "L",
      value: function L() {
        this.Y && nt(this.Y), this.Y = null, this.X = null;
      }
    }, {
      key: "G",
      value: function G() {
        this.Y && this.X && (nt(this.X), this.Y = null, this.X = null);
      }
    }, {
      key: "I",
      value: function I(t, e) {
        if (e) for (var _n6 = e.chain.length - 1; _n6 >= t.q && this.$(t); _n6--) {
          var _r11 = e.chain[_n6].element;
          if (_r11) try {
            var _n7 = Y(t);

            tt(_r11.onAfterLeave, [_n7, {}, e.resolver], _r11);
          } finally {
            this.Y.indexOf(_r11) > -1 && nt(_r11.children);
          }
        }
      }
    }, {
      key: "U",
      value: function U(t) {
        for (var _e15 = t.q; _e15 < t.chain.length && this.$(t); _e15++) {
          var _n8 = t.chain[_e15].element || {},
              _r12 = Y(t, t.chain[_e15].route);

          tt(_n8.onAfterEnter, [_r12, {}, t.resolver], _n8);
        }
      }
    }, {
      key: "S",
      value: function S(t) {
        var e = (this.Y || [])[0],
            n = (this.X || [])[0],
            r = [],
            o = t.chain;
        var i;

        for (var _t7 = o.length; _t7 > 0; _t7--) {
          if (o[_t7 - 1].route.animate) {
            i = o[_t7 - 1].route.animate;
            break;
          }
        }

        if (e && n && i) {
          var _t8 = h(i) && i.leave || "leaving",
              _o9 = h(i) && i.enter || "entering";

          r.push(G(e, _t8)), r.push(G(n, _o9));
        }

        return Promise.all(r).then(function () {
          return t;
        });
      }
    }, {
      key: "subscribe",
      value: function subscribe() {
        window.addEventListener("vaadin-router-go", this.m);
      }
    }, {
      key: "unsubscribe",
      value: function unsubscribe() {
        window.removeEventListener("vaadin-router-go", this.m);
      }
    }, {
      key: "v",
      value: function v(t) {
        var _ref3 = t ? t.detail : window.location,
            e = _ref3.pathname,
            n = _ref3.search,
            r = _ref3.hash;

        _l(this.s(e)) && (t && t.preventDefault && t.preventDefault(), this.render({
          pathname: e,
          search: n,
          hash: r
        }, !0));
      }
    }, {
      key: "urlForName",
      value: function urlForName(t, e) {
        return this.P || (this.P = q(this)), rt(this.P(t, e), this);
      }
    }, {
      key: "urlForPath",
      value: function urlForPath(t, e) {
        return rt(it.pathToRegexp.compile(t)(e), this);
      }
    }], [{
      key: "setTriggers",
      value: function setTriggers() {
        for (var _len = arguments.length, t = new Array(_len), _key = 0; _key < _len; _key++) {
          t[_key] = arguments[_key];
        }

        J(t);
      }
    }, {
      key: "go",
      value: function go(t) {
        var _ref4 = _l(t) ? this.u(t, "http://a") : t,
            e = _ref4.pathname,
            n = _ref4.search,
            r = _ref4.hash;

        return a("go", {
          pathname: e,
          search: n,
          hash: r
        });
      }
    }]);
    return it;
  }(D);

  _exports.Router = it;
  var st = /\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,
      ct = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;

  function ut(t, e) {
    if ("function" != typeof t) return;
    var n = st.exec(t.toString());
    if (n) try {
      t = new Function(n[1]);
    } catch (t) {
      console.log("vaadin-development-mode-detector: uncommentAndRun() failed", t);
    }
    return t(e);
  }

  window.Vaadin = window.Vaadin || {};

  var at = function at(t, e) {
    if (window.Vaadin.developmentMode) return ut(t, e);
  };

  function ht() {}

  void 0 === window.Vaadin.developmentMode && (window.Vaadin.developmentMode = function () {
    try {
      return !!localStorage.getItem("vaadin.developmentmode.force") || ["localhost", "127.0.0.1"].indexOf(window.location.hostname) >= 0 && (ct ? !function () {
        if (ct) {
          var _t9 = Object.keys(ct).map(function (t) {
            return ct[t];
          }).filter(function (t) {
            return t.productionMode;
          });

          if (_t9.length > 0) return !0;
        }

        return !1;
      }() : !ut(function () {
        return !0;
      }));
    } catch (t) {
      return !1;
    }
  }());
  window.Vaadin = window.Vaadin || {}, window.Vaadin.registrations = window.Vaadin.registrations || [], window.Vaadin.registrations.push({
    is: "@vaadin/router",
    version: "1.7.4"
  }), at(ht), it.NavigationTrigger = {
    POPSTATE: b,
    CLICK: m
  };
});