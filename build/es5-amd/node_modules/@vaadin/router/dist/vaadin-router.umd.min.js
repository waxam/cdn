!function (e, t) {
  "object" == (typeof exports === "undefined" ? "undefined" : babelHelpers.typeof(exports)) && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t(e.Vaadin = e.Vaadin || {});
}(this, function (e) {
  "use strict";

  var t = "function" == typeof Symbol && "symbol" == babelHelpers.typeof(Symbol.iterator) ? function (e) {
    return babelHelpers.typeof(e);
  } : function (e) {
    return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : babelHelpers.typeof(e);
  },
      n = function n(e, t) {
    if (!babelHelpers.instanceof(e, t)) throw new TypeError("Cannot call a class as a function");
  },
      r = function () {
    function e(e, t) {
      for (var n = 0; n < t.length; n++) {
        var r = t[n];
        r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
      }
    }

    return function (t, n, r) {
      return n && e(t.prototype, n), r && e(t, r), t;
    };
  }(),
      o = function o(e, t) {
    if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return !t || "object" != babelHelpers.typeof(t) && "function" != typeof t ? e : t;
  },
      i = function i(e) {
    if (Array.isArray(e)) {
      for (var t = 0, n = Array(e.length); t < e.length; t++) {
        n[t] = e[t];
      }

      return n;
    }

    return Array.from(e);
  };

  function a(e) {
    return e = e || [], Array.isArray(e) ? e : [e];
  }

  function u(e) {
    return "[Vaadin.Router] " + e;
  }

  var c = "module",
      l = "nomodule",
      s = [c, l];

  function f(e) {
    if (!e.match(/.+\.[m]?js$/)) throw new Error(u('Unsupported type for bundle "' + e + '": .js or .mjs expected.'));
  }

  function d(e) {
    if (!e || !g(e.path)) throw new Error(u('Expected route config to be an object with a "path" string property, or an array of such objects'));
    var t = e.bundle,
        n = ["component", "redirect", "bundle"];
    if (!(m(e.action) || Array.isArray(e.children) || m(e.children) || _(t) || n.some(function (t) {
      return g(e[t]);
    }))) throw new Error(u('Expected route config "' + e.path + '" to include either "' + n.join('", "') + '" or "action" function but none found.'));
    if (t) if (g(t)) f(t);else {
      if (!s.some(function (e) {
        return e in t;
      })) throw new Error(u('Expected route bundle to include either "' + l + '" or "' + c + '" keys, or both'));
      s.forEach(function (e) {
        return e in t && f(t[e]);
      });
    }
    e.redirect && ["bundle", "component"].forEach(function (t) {
      t in e && console.warn(u('Route config "' + e.path + '" has both "redirect" and "' + t + '" properties, and "redirect" will always override the latter. Did you mean to only use "' + t + '"?'));
    });
  }

  function h(e) {
    a(e).forEach(function (e) {
      return d(e);
    });
  }

  function p(e, t) {
    var n = document.head.querySelector('script[src="' + e + '"][async]');
    return n || ((n = document.createElement("script")).setAttribute("src", e), t === c ? n.setAttribute("type", c) : t === l && n.setAttribute(l, ""), n.async = !0), new Promise(function (e, t) {
      n.onreadystatechange = n.onload = function (t) {
        n.__dynamicImportLoaded = !0, e(t);
      }, n.onerror = function (e) {
        n.parentNode && n.parentNode.removeChild(n), t(e);
      }, null === n.parentNode ? document.head.appendChild(n) : n.__dynamicImportLoaded && e();
    });
  }

  function v(e, t) {
    return !window.dispatchEvent(new CustomEvent("vaadin-router-" + e, {
      cancelable: "go" === e,
      detail: t
    }));
  }

  function _(e) {
    return "object" === (void 0 === e ? "undefined" : t(e)) && !!e;
  }

  function m(e) {
    return "function" == typeof e;
  }

  function g(e) {
    return "string" == typeof e;
  }

  function y(e) {
    var t = new Error(u("Page not found (" + e.pathname + ")"));
    return t.context = e, t.code = 404, t;
  }

  var w = new function e() {
    n(this, e);
  }();

  function b(e) {
    if (!e.defaultPrevented && 0 === e.button && !(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      for (var t = e.target, n = e.composedPath ? e.composedPath() : e.path || [], r = 0; r < n.length; r++) {
        var o = n[r];

        if (o.nodeName && "a" === o.nodeName.toLowerCase()) {
          t = o;
          break;
        }
      }

      for (; t && "a" !== t.nodeName.toLowerCase();) {
        t = t.parentNode;
      }

      if (t && "a" === t.nodeName.toLowerCase()) if (!t.target || "_self" === t.target.toLowerCase()) if (!t.hasAttribute("download")) if (t.pathname !== window.location.pathname || "" === t.hash) (t.origin || function (e) {
        var t = e.port,
            n = e.protocol;
        return n + "//" + ("http:" === n && "80" === t || "https:" === n && "443" === t ? e.hostname : e.host);
      }(t)) === window.location.origin && v("go", {
        pathname: t.pathname
      }) && e.preventDefault();
    }
  }

  var E = {
    activate: function activate() {
      window.document.addEventListener("click", b);
    },
    inactivate: function inactivate() {
      window.document.removeEventListener("click", b);
    }
  };

  function x(e) {
    "vaadin-router-ignore" !== e.state && v("go", {
      pathname: window.location.pathname
    });
  }

  /Trident/.test(navigator.userAgent) && !m(window.PopStateEvent) && (window.PopStateEvent = function (e, t) {
    t = t || {};
    var n = document.createEvent("Event");
    return n.initEvent(e, Boolean(t.bubbles), Boolean(t.cancelable)), n.state = t.state || null, n;
  }, window.PopStateEvent.prototype = window.Event.prototype);

  var k = {
    activate: function activate() {
      window.addEventListener("popstate", x);
    },
    inactivate: function inactivate() {
      window.removeEventListener("popstate", x);
    }
  },
      C = B,
      O = U,
      R = function R(e, t) {
    return S(U(e, t));
  },
      A = S,
      P = V,
      j = "/",
      L = "./",
      T = new RegExp(["(\\\\.)", "(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"), "g");

  function U(e, t) {
    for (var n, r = [], o = 0, i = 0, a = "", u = t && t.delimiter || j, c = t && t.delimiters || L, l = !1; null !== (n = T.exec(e));) {
      var s = n[0],
          f = n[1],
          d = n.index;
      if (a += e.slice(i, d), i = d + s.length, f) a += f[1], l = !0;else {
        var h = "",
            p = e[i],
            v = n[2],
            _ = n[3],
            m = n[4],
            g = n[5];

        if (!l && a.length) {
          var y = a.length - 1;
          c.indexOf(a[y]) > -1 && (h = a[y], a = a.slice(0, y));
        }

        a && (r.push(a), a = "", l = !1);
        var w = "" !== h && void 0 !== p && p !== h,
            b = "+" === g || "*" === g,
            E = "?" === g || "*" === g,
            x = h || u,
            k = _ || m;
        r.push({
          name: v || o++,
          prefix: h,
          delimiter: x,
          optional: E,
          repeat: b,
          partial: w,
          pattern: k ? I(k) : "[^" + N(x) + "]+?"
        });
      }
    }

    return (a || i < e.length) && r.push(a + e.substr(i)), r;
  }

  function S(e) {
    for (var n = new Array(e.length), r = 0; r < e.length; r++) {
      "object" === t(e[r]) && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$"));
    }

    return function (t, r) {
      for (var o = "", i = r && r.encode || encodeURIComponent, a = 0; a < e.length; a++) {
        var u = e[a];

        if ("string" != typeof u) {
          var c,
              l = t ? t[u.name] : void 0;

          if (Array.isArray(l)) {
            if (!u.repeat) throw new TypeError('Expected "' + u.name + '" to not repeat, but got array');

            if (0 === l.length) {
              if (u.optional) continue;
              throw new TypeError('Expected "' + u.name + '" to not be empty');
            }

            for (var s = 0; s < l.length; s++) {
              if (c = i(l[s], u), !n[a].test(c)) throw new TypeError('Expected all "' + u.name + '" to match "' + u.pattern + '"');
              o += (0 === s ? u.prefix : u.delimiter) + c;
            }
          } else if ("string" != typeof l && "number" != typeof l && "boolean" != typeof l) {
            if (!u.optional) throw new TypeError('Expected "' + u.name + '" to be ' + (u.repeat ? "an array" : "a string"));
            u.partial && (o += u.prefix);
          } else {
            if (c = i(String(l), u), !n[a].test(c)) throw new TypeError('Expected "' + u.name + '" to match "' + u.pattern + '", but got "' + c + '"');
            o += u.prefix + c;
          }
        } else o += u;
      }

      return o;
    };
  }

  function N(e) {
    return e.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
  }

  function I(e) {
    return e.replace(/([=!:$/()])/g, "\\$1");
  }

  function F(e) {
    return e && e.sensitive ? "" : "i";
  }

  function V(e, t, n) {
    for (var r = (n = n || {}).strict, o = !1 !== n.end, i = N(n.delimiter || j), a = n.delimiters || L, u = [].concat(n.endsWith || []).map(N).concat("$").join("|"), c = "", l = 0 === e.length, s = 0; s < e.length; s++) {
      var f = e[s];
      if ("string" == typeof f) c += N(f), l = s === e.length - 1 && a.indexOf(f[f.length - 1]) > -1;else {
        var d = N(f.prefix),
            h = f.repeat ? "(?:" + f.pattern + ")(?:" + d + "(?:" + f.pattern + "))*" : f.pattern;
        t && t.push(f), f.optional ? f.partial ? c += d + "(" + h + ")?" : c += "(?:" + d + "(" + h + "))?" : c += d + "(" + h + ")";
      }
    }

    return o ? (r || (c += "(?:" + i + ")?"), c += "$" === u ? "$" : "(?=" + u + ")") : (r || (c += "(?:" + i + "(?=" + u + "))?"), l || (c += "(?=" + i + "|" + u + ")")), new RegExp("^" + c, F(n));
  }

  function B(e, t, n) {
    return babelHelpers.instanceof(e, RegExp) ? function (e, t) {
      if (!t) return e;
      var n = e.source.match(/\((?!\?)/g);
      if (n) for (var r = 0; r < n.length; r++) {
        t.push({
          name: r,
          prefix: null,
          delimiter: null,
          optional: !1,
          repeat: !1,
          partial: !1,
          pattern: null
        });
      }
      return e;
    }(e, t) : Array.isArray(e) ? function (e, t, n) {
      for (var r = [], o = 0; o < e.length; o++) {
        r.push(B(e[o], t, n).source);
      }

      return new RegExp("(?:" + r.join("|") + ")", F(n));
    }(e, t, n) : function (e, t, n) {
      return V(U(e, n), t, n);
    }(e, t, n);
  }

  C.parse = O, C.compile = R, C.tokensToFunction = A, C.tokensToRegExp = P;
  var M = Object.prototype.hasOwnProperty,
      H = new Map();

  function $(e) {
    try {
      return decodeURIComponent(e);
    } catch (t) {
      return e;
    }
  }

  function D(e, t, n, r, o) {
    var i = void 0,
        a = void 0,
        u = 0,
        c = e.path || "";
    return "/" === c.charAt(0) && (n && (c = c.substr(1)), n = !0), {
      next: function next(l) {
        if (e === l) return {
          done: !0
        };
        var s = e.__children = e.__children || e.children;
        if (!i && (i = function (e, t, n, r, o) {
          var i = e + "|" + (n = !!n),
              a = H.get(i);

          if (!a) {
            var u = [];
            a = {
              keys: u,
              pattern: C(e, u, {
                end: n,
                strict: "" === e
              })
            }, H.set(i, a);
          }

          var c = a.pattern.exec(t);
          if (!c) return null;

          for (var l = Object.assign({}, o), s = 1; s < c.length; s++) {
            var f = a.keys[s - 1],
                d = f.name,
                h = c[s];
            void 0 === h && M.call(l, d) || (f.repeat ? l[d] = h ? h.split(f.delimiter).map($) : [] : l[d] = h ? $(h) : h);
          }

          return {
            path: c[0],
            keys: (r || []).concat(a.keys),
            params: l
          };
        }(c, t, !s, r, o))) return {
          done: !1,
          value: {
            route: e,
            keys: i.keys,
            params: i.params,
            path: i.path
          }
        };
        if (i && s) for (; u < s.length;) {
          if (!a) {
            var f = s[u];
            f.parent = e;
            var d = i.path.length;
            d > 0 && "/" === t.charAt(d) && (d += 1), a = D(f, t.substr(d), n, i.keys, i.params);
          }

          var h = a.next(l);
          if (!h.done) return {
            done: !1,
            value: h.value
          };
          a = null, u++;
        }
        return {
          done: !0
        };
      }
    };
  }

  function W(e) {
    if (m(e.route.action)) return e.route.action(e);
  }

  H.set("|false", {
    keys: [],
    pattern: /(?:)/
  });

  var K = function () {
    function e(t) {
      var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
      if (n(this, e), Object(t) !== t) throw new TypeError("Invalid routes");
      this.baseUrl = r.baseUrl || "", this.errorHandler = r.errorHandler, this.resolveRoute = r.resolveRoute || W, this.context = Object.assign({
        resolver: this
      }, r.context), this.root = Array.isArray(t) ? {
        path: "",
        __children: t,
        parent: null,
        __synthetic: !0
      } : t, this.root.parent = null;
    }

    return r(e, [{
      key: "getRoutes",
      value: function value() {
        return [].concat(i(this.root.__children));
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        h(e);
        var t = [].concat(i(a(e)));
        this.root.__children = t;
      }
    }, {
      key: "addRoutes",
      value: function value(e) {
        var t;
        return h(e), (t = this.root.__children).push.apply(t, i(a(e))), this.getRoutes();
      }
    }, {
      key: "removeRoutes",
      value: function value() {
        this.setRoutes([]);
      }
    }, {
      key: "resolve",
      value: function value(e) {
        var t = this,
            n = Object.assign({}, this.context, g(e) ? {
          pathname: e
        } : e),
            r = D(this.root, this.__normalizePathname(n.pathname), this.baseUrl),
            o = this.resolveRoute,
            i = null,
            a = null,
            u = n;

        function c(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : i.value.route,
              l = null === arguments[2] && i.value.route;
          return i = a || r.next(l), a = null, e || !i.done && function (e, t) {
            for (var n = t; n;) {
              if ((n = n.parent) === e) return !0;
            }

            return !1;
          }(t, i.value.route) ? i.done ? Promise.reject(y(n)) : (function (e, t) {
            var n = t.route,
                r = t.path;

            if (n && !n.__synthetic) {
              var o = {
                path: r,
                route: n
              };
              !function (e, t) {
                return !t.parent || !e || !e.length || e[e.length - 1].route !== t.parent;
              }(e.chain, n) ? e.chain.push(o) : e.chain = [o];
            }
          }(n, i.value), u = Object.assign({}, n, i.value), Promise.resolve(o(u)).then(function (n) {
            return null !== n && void 0 !== n && n !== w ? (u.result = n.result || n, u) : c(e, t, n);
          })) : (a = i, Promise.resolve(w));
        }

        return n.next = c, Promise.resolve().then(function () {
          return c(!0, t.root);
        }).catch(function (e) {
          var n = function (e) {
            var t = "Path '" + e.pathname + "' is not properly resolved due to an error.",
                n = (e.route || {}).path;
            return n && (t += " Resolution had failed on route: '" + n + "'"), t;
          }(u);

          if (e ? console.warn(n) : e = new Error(n), e.context = e.context || u, babelHelpers.instanceof(e, DOMException) || (e.code = e.code || 500), t.errorHandler) return u.result = t.errorHandler(e), u;
          throw e;
        });
      }
    }, {
      key: "__normalizePathname",
      value: function value(e) {
        if (!this.baseUrl) return e;

        var t = this.__effectiveBaseUrl,
            n = this.constructor.__createUrl(e, t).href;

        return n.slice(0, t.length) === t ? n.slice(t.length) : void 0;
      }
    }, {
      key: "__effectiveBaseUrl",
      get: function get() {
        return this.baseUrl ? this.constructor.__createUrl(this.baseUrl, document.baseURI || document.URL).href.replace(/[^\/]*$/, "") : "";
      }
    }], [{
      key: "__createUrl",
      value: function value(e, t) {
        return new URL(e, t);
      }
    }]), e;
  }();

  K.pathToRegexp = C;
  var q = K.pathToRegexp,
      z = new Map();

  function Q(e, t) {
    var n = e.get(t);
    if (n && n.length > 1) throw new Error('Duplicate route with name "' + t + "\". Try seting unique 'name' route properties.");
    return n && n[0];
  }

  function J(e) {
    var t = e.path;
    return void 0 !== (t = Array.isArray(t) ? t[0] : t) ? t : "";
  }

  function G(e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (!babelHelpers.instanceof(e, K)) throw new TypeError("An instance of Resolver is expected");
    var n = new Map();
    return function (r, o) {
      var i = Q(n, r);
      if (!(i || (n.clear(), function e(t, n, r) {
        var o = n.name || n.component;
        if (o && (t.has(o) ? t.get(o).push(n) : t.set(o, [n])), Array.isArray(r)) for (var i = 0; i < r.length; i++) {
          var a = r[i];
          a.parent = n, e(t, a, a.__children || a.children);
        }
      }(n, e.root, e.root.__children), i = Q(n, r)))) throw new Error('Route "' + r + '" not found');
      var a = z.get(i.fullPath);

      if (!a) {
        for (var u = J(i), c = i.parent; c;) {
          var l = J(c);
          l && (u = l.replace(/\/$/, "") + "/" + u.replace(/^\//, "")), c = c.parent;
        }

        for (var s = q.parse(u), f = q.tokensToFunction(s), d = Object.create(null), h = 0; h < s.length; h++) {
          g(s[h]) || (d[s[h].name] = !0);
        }

        a = {
          toPath: f,
          keys: d
        }, z.set(u, a), i.fullPath = u;
      }

      var p = a.toPath(o, t) || "/";

      if (t.stringifyQueryParams && o) {
        for (var v = {}, _ = Object.keys(o), m = 0; m < _.length; m++) {
          var y = _[m];
          a.keys[y] || (v[y] = o[y]);
        }

        var w = t.stringifyQueryParams(v);
        w && (p += "?" === w.charAt(0) ? w : "?" + w);
      }

      return p;
    };
  }

  var X = [];

  function Y(e) {
    X.forEach(function (e) {
      return e.inactivate();
    }), e.forEach(function (e) {
      return e.activate();
    }), X = e;
  }

  var Z = function Z(e) {
    var t = getComputedStyle(e).getPropertyValue("animation-name");
    return t && "none" !== t;
  },
      ee = function ee(e, t) {
    e.addEventListener("animationend", function n() {
      e.removeEventListener("animationend", n), t();
    });
  };

  function te(e, t) {
    return e.classList.add(t), new Promise(function (n) {
      if (Z(e)) {
        var r = e.getBoundingClientRect(),
            o = "height: " + (r.bottom - r.top) + "px; width: " + (r.right - r.left) + "px";
        e.setAttribute("style", "position: absolute; " + o), ee(e, function () {
          e.classList.remove(t), e.removeAttribute("style"), n();
        });
      } else e.classList.remove(t), n();
    });
  }

  function ne(e) {
    return null !== e && void 0 !== e;
  }

  function re(e, t) {
    var n = e.pathname,
        r = void 0 === n ? "" : n,
        o = e.chain,
        i = void 0 === o ? [] : o,
        a = e.params,
        u = void 0 === a ? {} : a,
        c = e.redirectFrom,
        l = e.resolver,
        s = i.map(function (e) {
      return e.route;
    });
    return {
      baseUrl: l && l.baseUrl || "",
      pathname: r,
      routes: s,
      route: t || s.length && s[s.length - 1] || null,
      params: u,
      redirectFrom: c,
      getUrl: function getUrl() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        return ce(se.pathToRegexp.compile(le(s))(Object.assign({}, u, e)), l);
      }
    };
  }

  function oe(e, t) {
    var n = Object.assign({}, e.params);
    return {
      redirect: {
        pathname: t,
        from: e.pathname,
        params: n
      }
    };
  }

  function ie(e, t, n) {
    if (m(e)) return e.apply(n, t);
  }

  function ae(e, t, n) {
    return function (r) {
      return r && (r.cancel || r.redirect) ? r : n ? ie(n[e], t, n) : void 0;
    };
  }

  function ue(e) {
    if (e && e.length) for (var t = e[0].parentNode, n = 0; n < e.length; n++) {
      t.removeChild(e[n]);
    }
  }

  function ce(e, t) {
    var n = t.__effectiveBaseUrl;
    return n ? t.constructor.__createUrl(e.replace(/^\//, ""), n).pathname : e;
  }

  function le(e) {
    return e.map(function (e) {
      return e.path;
    }).reduce(function (e, t) {
      return t.length ? e.replace(/\/$/, "") + "/" + t.replace(/^\//, "") : e;
    }, "");
  }

  var se = function (e) {
    function i(e, t) {
      n(this, i);
      var r = document.head.querySelector("base"),
          a = o(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, [], Object.assign({
        baseUrl: r && r.getAttribute("href")
      }, t)));

      a.resolveRoute = function (e) {
        return a.__resolveRoute(e);
      };

      var u = i.NavigationTrigger;
      return i.setTriggers.apply(i, Object.keys(u).map(function (e) {
        return u[e];
      })), a.baseUrl, a.ready, a.ready = Promise.resolve(e), a.location, a.location = re({
        resolver: a
      }), a.__lastStartedRenderId = 0, a.__navigationEventHandler = a.__onNavigationEvent.bind(a), a.setOutlet(e), a.subscribe(), a;
    }

    return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + babelHelpers.typeof(t));
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          enumerable: !1,
          writable: !0,
          configurable: !0
        }
      }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t);
    }(i, K), r(i, [{
      key: "__resolveRoute",
      value: function value(e) {
        var t = e.route,
            n = Promise.resolve();
        m(t.children) && (n = n.then(function () {
          return t.children(function (e) {
            var t = Object.assign({}, e);
            return delete t.next, t;
          }(e));
        }).then(function (e) {
          ne(e) || m(t.children) || (e = t.children), function (e, t) {
            if (!Array.isArray(e) && !_(e)) throw new Error(u('Incorrect "children" value for the route ' + t.path + ": expected array or object, but got " + e));
            t.__children = [];

            for (var n = a(e), r = 0; r < n.length; r++) {
              d(n[r]), t.__children.push(n[r]);
            }
          }(e, t);
        }));
        var r = {
          redirect: function redirect(t) {
            return oe(e, t);
          },
          component: function component(t) {
            return function (e, t) {
              var n = document.createElement(t);
              n.location = re(e);
              var r = e.chain.map(function (e) {
                return e.route;
              }).indexOf(e.route);
              return e.chain[r].element = n, n;
            }(e, t);
          }
        };
        return n.then(function () {
          return ie(t.action, [e, r], t);
        }).then(function (e) {
          return ne(e) && (babelHelpers.instanceof(e, HTMLElement) || e.redirect || e === w) ? e : g(t.redirect) ? r.redirect(t.redirect) : t.bundle ? (n = t.bundle, g(n) ? p(n) : Promise.race(s.filter(function (e) {
            return e in n;
          }).map(function (e) {
            return p(n[e], e);
          }))).then(function () {}, function () {
            throw new Error(u("Bundle not found: " + t.bundle + ". Check if the file name is correct"));
          }) : void 0;
          var n;
        }).then(function (e) {
          return ne(e) ? e : g(t.component) ? r.component(t.component) : void 0;
        });
      }
    }, {
      key: "setOutlet",
      value: function value(e) {
        e && this.__ensureOutlet(e), this.__outlet = e;
      }
    }, {
      key: "getOutlet",
      value: function value() {
        return this.__outlet;
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        this.__urlForName = void 0, function e(t, n, r) {
          null === t && (t = Function.prototype);
          var o = Object.getOwnPropertyDescriptor(t, n);

          if (void 0 === o) {
            var i = Object.getPrototypeOf(t);
            return null === i ? void 0 : e(i, n, r);
          }

          if ("value" in o) return o.value;
          var a = o.get;
          return void 0 !== a ? a.call(r) : void 0;
        }(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "setRoutes", this).call(this, e), this.__onNavigationEvent();
      }
    }, {
      key: "render",
      value: function value(e, t) {
        var n = this,
            r = ++this.__lastStartedRenderId,
            o = e.pathname || e;
        return this.ready = this.resolve(e).then(function (e) {
          return n.__fullyResolveChain(e);
        }).then(function (e) {
          if (r === n.__lastStartedRenderId) {
            var o = n.__previousContext;
            if (e === o) return n.location;
            n.location = re(e), v("location-changed", {
              router: n,
              location: n.location
            }), t && n.__updateBrowserHistory(e.pathname, e.redirectFrom), n.__addAppearingContent(e, o);

            var i = n.__animateIfNeeded(e);

            return n.__runOnAfterEnterCallbacks(e), n.__runOnAfterLeaveCallbacks(e, o), i.then(function () {
              if (r === n.__lastStartedRenderId) return n.__removeDisappearingContent(), n.__previousContext = e, n.location;
            });
          }
        }).catch(function (e) {
          if (r === n.__lastStartedRenderId) throw t && n.__updateBrowserHistory(o), ue(n.__outlet && n.__outlet.children), n.location = re({
            pathname: o,
            resolver: n
          }), v("error", {
            router: n,
            error: e,
            pathname: o
          }), e;
        }), this.ready;
      }
    }, {
      key: "__fullyResolveChain",
      value: function value(e) {
        var t = this,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e;
        return this.__amendWithResolutionResult(n).then(function (r) {
          var o = r !== n ? r : e;
          return r.next().then(function (e) {
            if ((null === e || e === w) && ce(le(r.chain), r.resolver) !== r.pathname) throw y(o);
            return e && e !== w ? t.__fullyResolveChain(o, e) : t.__amendWithOnBeforeCallbacks(o);
          });
        });
      }
    }, {
      key: "__amendWithResolutionResult",
      value: function value(e) {
        var n = this,
            r = e.result;
        return babelHelpers.instanceof(r, HTMLElement) ? Promise.resolve(e) : r.redirect ? this.__redirect(r.redirect, e.__redirectCount).then(function (e) {
          return n.__amendWithResolutionResult(e);
        }) : babelHelpers.instanceof(r, Error) ? Promise.reject(r) : Promise.reject(new Error(u('Invalid route resolution result for path "' + e.pathname + '". Expected redirect object or HTML element, but got: "' + function (e) {
          if ("object" !== (void 0 === e ? "undefined" : t(e))) return String(e);
          var n = Object.prototype.toString.call(e).match(/ (.*)\]$/)[1];
          return "Object" === n || "Array" === n ? n + " " + JSON.stringify(e) : n;
        }(r) + '". Double check the action return value for the route.')));
      }
    }, {
      key: "__amendWithOnBeforeCallbacks",
      value: function value(e) {
        var t = this;
        return this.__runOnBeforeCallbacks(e).then(function (n) {
          return n === t.__previousContext || n === e ? n : t.__fullyResolveChain(n);
        });
      }
    }, {
      key: "__runOnBeforeCallbacks",
      value: function value(e) {
        var t = this,
            n = (this.__previousContext || {}).chain || [],
            r = e.chain,
            o = Promise.resolve(),
            i = function i() {
          return {
            cancel: !0
          };
        },
            a = function a(t) {
          return oe(e, t);
        };

        if (e.__divergedChainIndex = 0, n.length) {
          for (var u = 0; u < Math.min(n.length, r.length) && n[u].route === r[u].route && n[u].path === r[u].path && (n[u].element && n[u].element.localName) === (r[u].element && r[u].element.localName); u = ++e.__divergedChainIndex) {
            ;
          }

          for (var c = n.length - 1; c >= e.__divergedChainIndex; c--) {
            var l = re(e);
            o = o.then(ae("onBeforeLeave", [l, {
              prevent: i
            }, this], n[c].element)).then(function (e) {
              if (!(e || {}).redirect) return e;
            });
          }
        }

        for (var s = e.__divergedChainIndex; s < r.length; s++) {
          var f = re(e, r[s].route);
          o = o.then(ae("onBeforeEnter", [f, {
            prevent: i,
            redirect: a
          }, this], r[s].element));
        }

        return o.then(function (n) {
          if (n) {
            if (n.cancel) return t.__previousContext;
            if (n.redirect) return t.__redirect(n.redirect, e.__redirectCount);
          }

          return e;
        });
      }
    }, {
      key: "__redirect",
      value: function value(e, t) {
        if (t > 256) throw new Error(u("Too many redirects when rendering " + e.from));
        return this.resolve({
          pathname: this.urlForPath(e.pathname, e.params),
          redirectFrom: e.from,
          __redirectCount: (t || 0) + 1
        });
      }
    }, {
      key: "__ensureOutlet",
      value: function value() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.__outlet;
        if (!babelHelpers.instanceof(e, Node)) throw new TypeError(u("Expected router outlet to be a valid DOM Node (but got " + e + ")"));
      }
    }, {
      key: "__updateBrowserHistory",
      value: function value(e, t) {
        if (window.location.pathname !== e) {
          var n = t ? "replaceState" : "pushState";
          window.history[n](null, document.title, e), window.dispatchEvent(new PopStateEvent("popstate", {
            state: "vaadin-router-ignore"
          }));
        }
      }
    }, {
      key: "__addAppearingContent",
      value: function value(e, t) {
        this.__ensureOutlet(), this.__removeAppearingContent();

        for (var n = this.__outlet, r = 0; r < e.__divergedChainIndex; r++) {
          var o = t && t.chain[r].element;

          if (o) {
            if (o.parentNode !== n) break;
            e.chain[r].element = o, n = o;
          }
        }

        this.__disappearingContent = Array.from(n.children), this.__appearingContent = [];

        for (var i = n, a = e.__divergedChainIndex; a < e.chain.length; a++) {
          var u = e.chain[a].element;
          u && (i.appendChild(u), i === n && this.__appearingContent.push(u), i = u);
        }
      }
    }, {
      key: "__removeDisappearingContent",
      value: function value() {
        this.__disappearingContent && ue(this.__disappearingContent), this.__disappearingContent = null, this.__appearingContent = null;
      }
    }, {
      key: "__removeAppearingContent",
      value: function value() {
        this.__disappearingContent && this.__appearingContent && (ue(this.__appearingContent), this.__disappearingContent = null, this.__appearingContent = null);
      }
    }, {
      key: "__runOnAfterLeaveCallbacks",
      value: function value(e, t) {
        if (t) for (var n = t.chain.length - 1; n >= e.__divergedChainIndex; n--) {
          var r = t.chain[n].element;
          if (r) try {
            var o = re(e);
            ie(r.onAfterLeave, [o, {}, t.resolver], r);
          } finally {
            ue(r.children);
          }
        }
      }
    }, {
      key: "__runOnAfterEnterCallbacks",
      value: function value(e) {
        for (var t = e.__divergedChainIndex; t < e.chain.length; t++) {
          var n = e.chain[t].element || {},
              r = re(e, e.chain[t].route);
          ie(n.onAfterEnter, [r, {}, e.resolver], n);
        }
      }
    }, {
      key: "__animateIfNeeded",
      value: function value(e) {
        for (var t = (this.__disappearingContent || [])[0], n = (this.__appearingContent || [])[0], r = [], o = e.chain, i = void 0, a = o.length; a > 0; a--) {
          if (o[a - 1].route.animate) {
            i = o[a - 1].route.animate;
            break;
          }
        }

        if (t && n && i) {
          var u = _(i) && i.leave || "leaving",
              c = _(i) && i.enter || "entering";
          r.push(te(t, u)), r.push(te(n, c));
        }

        return Promise.all(r).then(function () {
          return e;
        });
      }
    }, {
      key: "subscribe",
      value: function value() {
        window.addEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "unsubscribe",
      value: function value() {
        window.removeEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "__onNavigationEvent",
      value: function value(e) {
        var t = e ? e.detail.pathname : window.location.pathname;
        g(this.__normalizePathname(t)) && (e && e.preventDefault && e.preventDefault(), this.render(t, !0));
      }
    }, {
      key: "urlForName",
      value: function value(e, t) {
        return this.__urlForName || (this.__urlForName = G(this)), ce(this.__urlForName(e, t), this);
      }
    }, {
      key: "urlForPath",
      value: function value(e, t) {
        return ce(i.pathToRegexp.compile(e)(t), this);
      }
    }], [{
      key: "setTriggers",
      value: function value() {
        for (var e = arguments.length, t = Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        Y(t);
      }
    }, {
      key: "go",
      value: function value(e) {
        return v("go", {
          pathname: e
        });
      }
    }]), i;
  }(),
      fe = /\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i;

  function de(e, t) {
    if ("function" == typeof e) {
      var n = fe.exec(e.toString());
      if (n) try {
        e = new Function(n[1]);
      } catch (e) {
        console.log("vaadin-development-mode-detector: uncommentAndRun() failed", e);
      }
      return e(t);
    }
  }

  window.Vaadin = window.Vaadin || {};

  var he = function he(e, t) {
    if (window.Vaadin.developmentMode) return de(e, t);
  };

  function pe() {}

  void 0 === window.Vaadin.developmentMode && (window.Vaadin.developmentMode = function () {
    try {
      return localStorage.getItem("vaadin.developmentmode.force") || ["localhost", "127.0.0.1"].indexOf(window.location.hostname) >= 0 && !de(function () {
        return !0;
      }) && !function () {
        if (window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients) {
          var e = Object.keys(window.Vaadin.Flow.clients).map(function (e) {
            return window.Vaadin.Flow.clients[e];
          }).filter(function (e) {
            return e.productionMode;
          });
          if (e.length > 0) return !0;
        }

        return !1;
      }();
    } catch (e) {
      return !1;
    }
  }());
  window.Vaadin = window.Vaadin || {}, window.Vaadin.registrations = window.Vaadin.registrations || [], window.Vaadin.registrations.push({
    is: "@vaadin/router",
    version: "1.2.0"
  }), he(pe), se.NavigationTrigger = {
    POPSTATE: k,
    CLICK: E
  };

  var ve = void 0,
      _e = void 0,
      me = void 0,
      ge = void 0;

  K.__ensureUrlAvailableOrPolyfilled = function () {
    if (void 0 === ve) {
      try {
        var e = new URL("b", "http://a");
        e.pathname = "c", ve = "http://a/c" === e.href;
      } catch (e) {
        ve = !1;
      }

      ve || (_e = document.implementation.createHTMLDocument("url"), me = _e.createElement("base"), _e.head.appendChild(me), (ge = _e.createElement("a")).origin || (Object.defineProperty(ge, "origin", {
        get: function get() {
          var e = ge.protocol,
              t = ge.port;
          return e + "//" + ("http:" === e && "80" === t || "https:" === e && "443" === t ? ge.hostname : ge.host);
        }
      }), Object.defineProperty(ge, "pathname", {
        get: function get() {
          return ge.href.slice(ge.origin.length);
        }
      })));
    }
  }, K.__createUrl = function (e, t) {
    return K.__ensureUrlAvailableOrPolyfilled(), ve ? new URL(e, t) : (me.href = t, ge.href = e.replace(/ /g, "%20"), ge.href = ge.href, ge);
  }, e.Router = se, e.Resolver = K, Object.defineProperty(e, "__esModule", {
    value: !0
  });
}); //# sourceMappingURL=vaadin-router.umd.min.js.map