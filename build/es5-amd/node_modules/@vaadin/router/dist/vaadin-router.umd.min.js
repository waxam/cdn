!function (e, t) {
  "object" == (typeof exports === "undefined" ? "undefined" : babelHelpers.typeof(exports)) && "undefined" != typeof module ? t(exports) : "function" == typeof define && define.amd ? define(["exports"], t) : t((e = e || self).Vaadin = e.Vaadin || {});
}(this, function (e) {
  "use strict";

  function t(e) {
    return (t = "function" == typeof Symbol && "symbol" == babelHelpers.typeof(Symbol.iterator) ? function (e) {
      return babelHelpers.typeof(e);
    } : function (e) {
      return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : babelHelpers.typeof(e);
    })(e);
  }

  function n(e, t) {
    if (!babelHelpers.instanceof(e, t)) throw new TypeError("Cannot call a class as a function");
  }

  function r(e, t) {
    for (var n = 0; n < t.length; n++) {
      var r = t[n];
      r.enumerable = r.enumerable || !1, r.configurable = !0, "value" in r && (r.writable = !0), Object.defineProperty(e, r.key, r);
    }
  }

  function o(e, t, n) {
    return t && r(e.prototype, t), n && r(e, n), e;
  }

  function a(e) {
    return (a = Object.setPrototypeOf ? Object.getPrototypeOf : function (e) {
      return e.__proto__ || Object.getPrototypeOf(e);
    })(e);
  }

  function i(e, t) {
    return (i = Object.setPrototypeOf || function (e, t) {
      return e.__proto__ = t, e;
    })(e, t);
  }

  function c(e) {
    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e;
  }

  function u(e, t, n) {
    return (u = "undefined" != typeof Reflect && Reflect.get ? Reflect.get : function (e, t, n) {
      var r = function (e, t) {
        for (; !Object.prototype.hasOwnProperty.call(e, t) && null !== (e = a(e));) {
          ;
        }

        return e;
      }(e, t);

      if (r) {
        var o = Object.getOwnPropertyDescriptor(r, t);
        return o.get ? o.get.call(n) : o.value;
      }
    })(e, t, n || e);
  }

  function l(e) {
    return function (e) {
      if (Array.isArray(e)) {
        for (var t = 0, n = new Array(e.length); t < e.length; t++) {
          n[t] = e[t];
        }

        return n;
      }
    }(e) || function (e) {
      if (Symbol.iterator in Object(e) || "[object Arguments]" === Object.prototype.toString.call(e)) return Array.from(e);
    }(e) || function () {
      throw new TypeError("Invalid attempt to spread non-iterable instance");
    }();
  }

  function s(e) {
    return e = e || [], Array.isArray(e) ? e : [e];
  }

  function h(e) {
    return "[Vaadin.Router] ".concat(e);
  }

  var f = "module",
      d = "nomodule",
      p = [f, d];

  function v(e) {
    if (!e.match(/.+\.[m]?js$/)) throw new Error(h('Unsupported type for bundle "'.concat(e, '": .js or .mjs expected.')));
  }

  function _(e) {
    if (!e || !E(e.path)) throw new Error(h('Expected route config to be an object with a "path" string property, or an array of such objects'));
    var t = e.bundle,
        n = ["component", "redirect", "bundle"];
    if (!(b(e.action) || Array.isArray(e.children) || b(e.children) || w(t) || n.some(function (t) {
      return E(e[t]);
    }))) throw new Error(h('Expected route config "'.concat(e.path, '" to include either "').concat(n.join('", "'), '" ') + 'or "action" function but none found.'));
    if (t) if (E(t)) v(t);else {
      if (!p.some(function (e) {
        return e in t;
      })) throw new Error(h('Expected route bundle to include either "' + d + '" or "' + f + '" keys, or both'));
      p.forEach(function (e) {
        return e in t && v(t[e]);
      });
    }
    e.redirect && ["bundle", "component"].forEach(function (t) {
      t in e && console.warn(h('Route config "'.concat(e.path, '" has both "redirect" and "').concat(t, '" properties, ') + 'and "redirect" will always override the latter. Did you mean to only use "'.concat(t, '"?')));
    });
  }

  function m(e) {
    s(e).forEach(function (e) {
      return _(e);
    });
  }

  function g(e, t) {
    var n = document.head.querySelector('script[src="' + e + '"][async]');
    return n || ((n = document.createElement("script")).setAttribute("src", e), t === f ? n.setAttribute("type", f) : t === d && n.setAttribute(d, ""), n.async = !0), new Promise(function (e, t) {
      n.onreadystatechange = n.onload = function (t) {
        n.__dynamicImportLoaded = !0, e(t);
      }, n.onerror = function (e) {
        n.parentNode && n.parentNode.removeChild(n), t(e);
      }, null === n.parentNode ? document.head.appendChild(n) : n.__dynamicImportLoaded && e();
    });
  }

  function y(e, t) {
    return !window.dispatchEvent(new CustomEvent("vaadin-router-".concat(e), {
      cancelable: "go" === e,
      detail: t
    }));
  }

  function w(e) {
    return "object" === t(e) && !!e;
  }

  function b(e) {
    return "function" == typeof e;
  }

  function E(e) {
    return "string" == typeof e;
  }

  function k(e) {
    var t = new Error(h("Page not found (".concat(e.pathname, ")")));
    return t.context = e, t.code = 404, t;
  }

  var C = new function e() {
    n(this, e);
  }();

  function x(e) {
    if (!e.defaultPrevented && 0 === e.button && !(e.shiftKey || e.ctrlKey || e.altKey || e.metaKey)) {
      for (var t = e.target, n = e.composedPath ? e.composedPath() : e.path || [], r = 0; r < n.length; r++) {
        var o = n[r];

        if (o.nodeName && "a" === o.nodeName.toLowerCase()) {
          t = o;
          break;
        }
      }

      for (; t && "a" !== t.nodeName.toLowerCase();) {
        t = t.parentNode;
      }

      if (t && "a" === t.nodeName.toLowerCase()) if (!t.target || "_self" === t.target.toLowerCase()) if (!t.hasAttribute("download")) if (!t.hasAttribute("router-ignore")) if (t.pathname !== window.location.pathname || "" === t.hash) if ((t.origin || function (e) {
        var t = e.port,
            n = e.protocol,
            r = "http:" === n && "80" === t || "https:" === n && "443" === t ? e.hostname : e.host;
        return "".concat(n, "//").concat(r);
      }(t)) === window.location.origin) {
        var a = t;
        y("go", {
          pathname: a.pathname,
          search: a.search,
          hash: a.hash
        }) && e.preventDefault();
      }
    }
  }

  var O = {
    activate: function activate() {
      window.document.addEventListener("click", x);
    },
    inactivate: function inactivate() {
      window.document.removeEventListener("click", x);
    }
  };

  function R(e) {
    if ("vaadin-router-ignore" !== e.state) {
      var t = window.location;
      y("go", {
        pathname: t.pathname,
        search: t.search,
        hash: t.hash
      });
    }
  }

  /Trident/.test(navigator.userAgent) && !b(window.PopStateEvent) && (window.PopStateEvent = function (e, t) {
    t = t || {};
    var n = document.createEvent("Event");
    return n.initEvent(e, Boolean(t.bubbles), Boolean(t.cancelable)), n.state = t.state || null, n;
  }, window.PopStateEvent.prototype = window.Event.prototype);

  var A = {
    activate: function activate() {
      window.addEventListener("popstate", R);
    },
    inactivate: function inactivate() {
      window.removeEventListener("popstate", R);
    }
  },
      j = D,
      P = N,
      L = function L(e, t) {
    return M(N(e, t));
  },
      U = M,
      I = $,
      T = "/",
      B = "./",
      S = new RegExp(["(\\\\.)", "(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"), "g");

  function N(e, t) {
    for (var n, r = [], o = 0, a = 0, i = "", c = t && t.delimiter || T, u = t && t.delimiters || B, l = !1; null !== (n = S.exec(e));) {
      var s = n[0],
          h = n[1],
          f = n.index;
      if (i += e.slice(a, f), a = f + s.length, h) i += h[1], l = !0;else {
        var d = "",
            p = e[a],
            v = n[2],
            _ = n[3],
            m = n[4],
            g = n[5];

        if (!l && i.length) {
          var y = i.length - 1;
          u.indexOf(i[y]) > -1 && (d = i[y], i = i.slice(0, y));
        }

        i && (r.push(i), i = "", l = !1);
        var w = "" !== d && void 0 !== p && p !== d,
            b = "+" === g || "*" === g,
            E = "?" === g || "*" === g,
            k = d || c,
            C = _ || m;
        r.push({
          name: v || o++,
          prefix: d,
          delimiter: k,
          optional: E,
          repeat: b,
          partial: w,
          pattern: C ? F(C) : "[^" + V(k) + "]+?"
        });
      }
    }

    return (i || a < e.length) && r.push(i + e.substr(a)), r;
  }

  function M(e) {
    for (var n = new Array(e.length), r = 0; r < e.length; r++) {
      "object" === t(e[r]) && (n[r] = new RegExp("^(?:" + e[r].pattern + ")$"));
    }

    return function (t, r) {
      for (var o = "", a = r && r.encode || encodeURIComponent, i = 0; i < e.length; i++) {
        var c = e[i];

        if ("string" != typeof c) {
          var u,
              l = t ? t[c.name] : void 0;

          if (Array.isArray(l)) {
            if (!c.repeat) throw new TypeError('Expected "' + c.name + '" to not repeat, but got array');

            if (0 === l.length) {
              if (c.optional) continue;
              throw new TypeError('Expected "' + c.name + '" to not be empty');
            }

            for (var s = 0; s < l.length; s++) {
              if (u = a(l[s], c), !n[i].test(u)) throw new TypeError('Expected all "' + c.name + '" to match "' + c.pattern + '"');
              o += (0 === s ? c.prefix : c.delimiter) + u;
            }
          } else if ("string" != typeof l && "number" != typeof l && "boolean" != typeof l) {
            if (!c.optional) throw new TypeError('Expected "' + c.name + '" to be ' + (c.repeat ? "an array" : "a string"));
            c.partial && (o += c.prefix);
          } else {
            if (u = a(String(l), c), !n[i].test(u)) throw new TypeError('Expected "' + c.name + '" to match "' + c.pattern + '", but got "' + u + '"');
            o += c.prefix + u;
          }
        } else o += c;
      }

      return o;
    };
  }

  function V(e) {
    return e.replace(/([.+*?=^!:${}()[\]|/\\])/g, "\\$1");
  }

  function F(e) {
    return e.replace(/([=!:$/()])/g, "\\$1");
  }

  function H(e) {
    return e && e.sensitive ? "" : "i";
  }

  function $(e, t, n) {
    for (var r = (n = n || {}).strict, o = !1 !== n.start, a = !1 !== n.end, i = V(n.delimiter || T), c = n.delimiters || B, u = [].concat(n.endsWith || []).map(V).concat("$").join("|"), l = o ? "^" : "", s = 0 === e.length, h = 0; h < e.length; h++) {
      var f = e[h];
      if ("string" == typeof f) l += V(f), s = h === e.length - 1 && c.indexOf(f[f.length - 1]) > -1;else {
        var d = f.repeat ? "(?:" + f.pattern + ")(?:" + V(f.delimiter) + "(?:" + f.pattern + "))*" : f.pattern;
        t && t.push(f), f.optional ? f.partial ? l += V(f.prefix) + "(" + d + ")?" : l += "(?:" + V(f.prefix) + "(" + d + "))?" : l += V(f.prefix) + "(" + d + ")";
      }
    }

    return a ? (r || (l += "(?:" + i + ")?"), l += "$" === u ? "$" : "(?=" + u + ")") : (r || (l += "(?:" + i + "(?=" + u + "))?"), s || (l += "(?=" + i + "|" + u + ")")), new RegExp(l, H(n));
  }

  function D(e, t, n) {
    return babelHelpers.instanceof(e, RegExp) ? function (e, t) {
      if (!t) return e;
      var n = e.source.match(/\((?!\?)/g);
      if (n) for (var r = 0; r < n.length; r++) {
        t.push({
          name: r,
          prefix: null,
          delimiter: null,
          optional: !1,
          repeat: !1,
          partial: !1,
          pattern: null
        });
      }
      return e;
    }(e, t) : Array.isArray(e) ? function (e, t, n) {
      for (var r = [], o = 0; o < e.length; o++) {
        r.push(D(e[o], t, n).source);
      }

      return new RegExp("(?:" + r.join("|") + ")", H(n));
    }(e, t, n) : function (e, t, n) {
      return $(N(e, n), t, n);
    }(e, t, n);
  }

  j.parse = P, j.compile = L, j.tokensToFunction = U, j.tokensToRegExp = I;
  var K = Object.prototype.hasOwnProperty,
      W = new Map();

  function q(e) {
    try {
      return decodeURIComponent(e);
    } catch (t) {
      return e;
    }
  }

  function z(e, t, n, r, o) {
    var a,
        i,
        c = 0,
        u = e.path || "";
    return "/" === u.charAt(0) && (n && (u = u.substr(1)), n = !0), {
      next: function next(l) {
        if (e === l) return {
          done: !0
        };
        var s = e.__children = e.__children || e.children;
        if (!a && (a = function (e, t, n, r, o) {
          n = !!n;
          var a = "".concat(e, "|").concat(n),
              i = W.get(a);

          if (!i) {
            var c = [];
            i = {
              keys: c,
              pattern: j(e, c, {
                end: n,
                strict: "" === e
              })
            }, W.set(a, i);
          }

          var u = i.pattern.exec(t);
          if (!u) return null;

          for (var l = Object.assign({}, o), s = 1; s < u.length; s++) {
            var h = i.keys[s - 1],
                f = h.name,
                d = u[s];
            void 0 === d && K.call(l, f) || (h.repeat ? l[f] = d ? d.split(h.delimiter).map(q) : [] : l[f] = d ? q(d) : d);
          }

          return {
            path: u[0],
            keys: (r || []).concat(i.keys),
            params: l
          };
        }(u, t, !s, r, o))) return {
          done: !1,
          value: {
            route: e,
            keys: a.keys,
            params: a.params,
            path: a.path
          }
        };
        if (a && s) for (; c < s.length;) {
          if (!i) {
            var h = s[c];
            h.parent = e;
            var f = a.path.length;
            f > 0 && "/" === t.charAt(f) && (f += 1), i = z(h, t.substr(f), n, a.keys, a.params);
          }

          var d = i.next(l);
          if (!d.done) return {
            done: !1,
            value: d.value
          };
          i = null, c++;
        }
        return {
          done: !0
        };
      }
    };
  }

  function Q(e) {
    if (b(e.route.action)) return e.route.action(e);
  }

  W.set("|false", {
    keys: [],
    pattern: /(?:)/
  });

  var J = function () {
    function e(t) {
      var r = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
      if (n(this, e), Object(t) !== t) throw new TypeError("Invalid routes");
      this.baseUrl = r.baseUrl || "", this.errorHandler = r.errorHandler, this.resolveRoute = r.resolveRoute || Q, this.context = Object.assign({
        resolver: this
      }, r.context), this.root = Array.isArray(t) ? {
        path: "",
        __children: t,
        parent: null,
        __synthetic: !0
      } : t, this.root.parent = null;
    }

    return o(e, [{
      key: "getRoutes",
      value: function value() {
        return l(this.root.__children);
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        m(e);
        var t = l(s(e));
        this.root.__children = t;
      }
    }, {
      key: "addRoutes",
      value: function value(e) {
        var t;
        return m(e), (t = this.root.__children).push.apply(t, l(s(e))), this.getRoutes();
      }
    }, {
      key: "removeRoutes",
      value: function value() {
        this.setRoutes([]);
      }
    }, {
      key: "resolve",
      value: function value(e) {
        var t = this,
            n = Object.assign({}, this.context, E(e) ? {
          pathname: e
        } : e),
            r = z(this.root, this.__normalizePathname(n.pathname), this.baseUrl),
            o = this.resolveRoute,
            a = null,
            i = null,
            c = n;

        function u(e) {
          var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : a.value.route,
              l = null === (arguments.length > 2 ? arguments[2] : void 0) && a.value.route;
          return a = i || r.next(l), i = null, e || !a.done && function (e, t) {
            for (var n = t; n;) {
              if ((n = n.parent) === e) return !0;
            }

            return !1;
          }(t, a.value.route) ? a.done ? Promise.reject(k(n)) : (function (e, t) {
            var n = t.route,
                r = t.path;

            if (n && !n.__synthetic) {
              var o = {
                path: r,
                route: n
              };

              if (e.chain) {
                if (n.parent) for (var a = e.chain.length; a-- && e.chain[a].route && e.chain[a].route !== n.parent;) {
                  e.chain.pop();
                }
              } else e.chain = [];

              e.chain.push(o);
            }
          }(c = Object.assign(c ? {
            chain: c.chain ? c.chain.slice(0) : []
          } : {}, n, a.value), a.value), Promise.resolve(o(c)).then(function (n) {
            return null !== n && void 0 !== n && n !== C ? (c.result = n.result || n, c) : u(e, t, n);
          })) : (i = a, Promise.resolve(C));
        }

        return n.next = u, Promise.resolve().then(function () {
          return u(!0, t.root);
        }).catch(function (e) {
          var n = function (e) {
            var t = "Path '".concat(e.pathname, "' is not properly resolved due to an error."),
                n = (e.route || {}).path;
            return n && (t += " Resolution had failed on route: '".concat(n, "'")), t;
          }(c);

          if (e ? console.warn(n) : e = new Error(n), e.context = e.context || c, babelHelpers.instanceof(e, DOMException) || (e.code = e.code || 500), t.errorHandler) return c.result = t.errorHandler(e), c;
          throw e;
        });
      }
    }, {
      key: "__normalizePathname",
      value: function value(e) {
        if (!this.baseUrl) return e;

        var t = this.__effectiveBaseUrl,
            n = this.constructor.__createUrl(e, t).href;

        return n.slice(0, t.length) === t ? n.slice(t.length) : void 0;
      }
    }, {
      key: "__effectiveBaseUrl",
      get: function get() {
        return this.baseUrl ? this.constructor.__createUrl(this.baseUrl, document.baseURI || document.URL).href.replace(/[^\/]*$/, "") : "";
      }
    }], [{
      key: "__createUrl",
      value: function value(e, t) {
        return new URL(e, t);
      }
    }]), e;
  }();

  J.pathToRegexp = j;
  var G = J.pathToRegexp,
      X = new Map();

  function Y(e, t) {
    var n = e.get(t);
    if (n && n.length > 1) throw new Error('Duplicate route with name "'.concat(t, '".') + " Try seting unique 'name' route properties.");
    return n && n[0];
  }

  function Z(e) {
    var t = e.path;
    return void 0 !== (t = Array.isArray(t) ? t[0] : t) ? t : "";
  }

  function ee(e) {
    var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : {};
    if (!babelHelpers.instanceof(e, J)) throw new TypeError("An instance of Resolver is expected");
    var n = new Map();
    return function (r, o) {
      var a = Y(n, r);
      if (!(a || (n.clear(), function e(t, n, r) {
        var o = n.name || n.component;
        if (o && (t.has(o) ? t.get(o).push(n) : t.set(o, [n])), Array.isArray(r)) for (var a = 0; a < r.length; a++) {
          var i = r[a];
          i.parent = n, e(t, i, i.__children || i.children);
        }
      }(n, e.root, e.root.__children), a = Y(n, r)))) throw new Error('Route "'.concat(r, '" not found'));
      var i = X.get(a.fullPath);

      if (!i) {
        for (var c = Z(a), u = a.parent; u;) {
          var l = Z(u);
          l && (c = l.replace(/\/$/, "") + "/" + c.replace(/^\//, "")), u = u.parent;
        }

        for (var s = G.parse(c), h = G.tokensToFunction(s), f = Object.create(null), d = 0; d < s.length; d++) {
          E(s[d]) || (f[s[d].name] = !0);
        }

        i = {
          toPath: h,
          keys: f
        }, X.set(c, i), a.fullPath = c;
      }

      var p = i.toPath(o, t) || "/";

      if (t.stringifyQueryParams && o) {
        for (var v = {}, _ = Object.keys(o), m = 0; m < _.length; m++) {
          var g = _[m];
          i.keys[g] || (v[g] = o[g]);
        }

        var y = t.stringifyQueryParams(v);
        y && (p += "?" === y.charAt(0) ? y : "?".concat(y));
      }

      return p;
    };
  }

  var te = [];

  function ne(e) {
    te.forEach(function (e) {
      return e.inactivate();
    }), e.forEach(function (e) {
      return e.activate();
    }), te = e;
  }

  var re = function re(e) {
    var t = getComputedStyle(e).getPropertyValue("animation-name");
    return t && "none" !== t;
  },
      oe = function oe(e, t) {
    e.addEventListener("animationend", function n() {
      e.removeEventListener("animationend", n), t();
    });
  };

  function ae(e, t) {
    return e.classList.add(t), new Promise(function (n) {
      if (re(e)) {
        var r = e.getBoundingClientRect(),
            o = "height: ".concat(r.bottom - r.top, "px; width: ").concat(r.right - r.left, "px");
        e.setAttribute("style", "position: absolute; ".concat(o)), oe(e, function () {
          e.classList.remove(t), e.removeAttribute("style"), n();
        });
      } else e.classList.remove(t), n();
    });
  }

  function ie(e) {
    return null !== e && void 0 !== e;
  }

  function ce(e, t) {
    var n = e.pathname,
        r = void 0 === n ? "" : n,
        o = e.search,
        a = void 0 === o ? "" : o,
        i = e.hash,
        c = void 0 === i ? "" : i,
        u = e.chain,
        l = void 0 === u ? [] : u,
        s = e.params,
        h = void 0 === s ? {} : s,
        f = e.redirectFrom,
        d = e.resolver,
        p = l.map(function (e) {
      return e.route;
    });
    return {
      baseUrl: d && d.baseUrl || "",
      pathname: r,
      search: a,
      hash: c,
      routes: p,
      route: t || p.length && p[p.length - 1] || null,
      params: h,
      redirectFrom: f,
      getUrl: function getUrl() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : {};
        return fe(pe.pathToRegexp.compile(de(p))(Object.assign({}, h, e)), d);
      }
    };
  }

  function ue(e, t) {
    var n = Object.assign({}, e.params);
    return {
      redirect: {
        pathname: t,
        from: e.pathname,
        params: n
      }
    };
  }

  function le(e, t, n) {
    if (b(e)) return e.apply(n, t);
  }

  function se(e, t, n) {
    return function (r) {
      return r && (r.cancel || r.redirect) ? r : n ? le(n[e], t, n) : void 0;
    };
  }

  function he(e) {
    if (e && e.length) for (var t = e[0].parentNode, n = 0; n < e.length; n++) {
      t.removeChild(e[n]);
    }
  }

  function fe(e, t) {
    var n = t.__effectiveBaseUrl;
    return n ? t.constructor.__createUrl(e.replace(/^\//, ""), n).pathname : e;
  }

  function de(e) {
    return e.map(function (e) {
      return e.path;
    }).reduce(function (e, t) {
      return t.length ? e.replace(/\/$/, "") + "/" + t.replace(/^\//, "") : e;
    }, "");
  }

  var pe = function (e) {
    function r(e, t) {
      var o;
      n(this, r);
      var i,
          u,
          l = document.head.querySelector("base"),
          s = l && l.getAttribute("href");
      i = this, u = a(r).call(this, [], Object.assign({
        baseUrl: s && J.__createUrl(s, document.URL).pathname.replace(/[^\/]*$/, "")
      }, t)), (o = !u || "object" != babelHelpers.typeof(u) && "function" != typeof u ? c(i) : u).resolveRoute = function (e) {
        return o.__resolveRoute(e);
      };
      var h = r.NavigationTrigger;
      return r.setTriggers.apply(r, Object.keys(h).map(function (e) {
        return h[e];
      })), o.baseUrl, o.ready, o.ready = Promise.resolve(e), o.location, o.location = ce({
        resolver: c(o)
      }), o.__lastStartedRenderId = 0, o.__navigationEventHandler = o.__onNavigationEvent.bind(c(o)), o.setOutlet(e), o.subscribe(), o.__createdByRouter = new WeakMap(), o.__addedByRouter = new WeakMap(), o;
    }

    return function (e, t) {
      if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function");
      e.prototype = Object.create(t && t.prototype, {
        constructor: {
          value: e,
          writable: !0,
          configurable: !0
        }
      }), t && i(e, t);
    }(r, J), o(r, [{
      key: "__resolveRoute",
      value: function value(e) {
        var t = this,
            n = e.route,
            r = Promise.resolve();
        b(n.children) && (r = r.then(function () {
          return n.children(function (e) {
            var t = Object.assign({}, e);
            return delete t.next, t;
          }(e));
        }).then(function (e) {
          ie(e) || b(n.children) || (e = n.children), function (e, t) {
            if (!Array.isArray(e) && !w(e)) throw new Error(h('Incorrect "children" value for the route '.concat(t.path, ": expected array or object, but got ").concat(e)));
            t.__children = [];

            for (var n = s(e), r = 0; r < n.length; r++) {
              _(n[r]), t.__children.push(n[r]);
            }
          }(e, n);
        }));
        var o = {
          redirect: function redirect(t) {
            return ue(e, t);
          },
          component: function component(e) {
            var n = document.createElement(e);
            return t.__createdByRouter.set(n, !0), n;
          }
        };
        return r.then(function () {
          if (t.__isLatestRender(e)) return le(n.action, [e, o], n);
        }).then(function (e) {
          return ie(e) && (babelHelpers.instanceof(e, HTMLElement) || e.redirect || e === C) ? e : E(n.redirect) ? o.redirect(n.redirect) : n.bundle ? (t = n.bundle, E(t) ? g(t) : Promise.race(p.filter(function (e) {
            return e in t;
          }).map(function (e) {
            return g(t[e], e);
          }))).then(function () {}, function () {
            throw new Error(h("Bundle not found: ".concat(n.bundle, ". Check if the file name is correct")));
          }) : void 0;
          var t;
        }).then(function (e) {
          return ie(e) ? e : E(n.component) ? o.component(n.component) : void 0;
        });
      }
    }, {
      key: "setOutlet",
      value: function value(e) {
        e && this.__ensureOutlet(e), this.__outlet = e;
      }
    }, {
      key: "getOutlet",
      value: function value() {
        return this.__outlet;
      }
    }, {
      key: "setRoutes",
      value: function value(e) {
        var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1];
        return this.__previousContext = void 0, this.__urlForName = void 0, u(a(r.prototype), "setRoutes", this).call(this, e), t || this.__onNavigationEvent(), this.ready;
      }
    }, {
      key: "render",
      value: function value(e, t) {
        var n = this,
            r = ++this.__lastStartedRenderId,
            o = Object.assign({
          search: "",
          hash: ""
        }, E(e) ? {
          pathname: e
        } : e, {
          __renderId: r
        });
        return this.ready = this.resolve(o).then(function (e) {
          return n.__fullyResolveChain(e);
        }).then(function (e) {
          if (n.__isLatestRender(e)) {
            var o = n.__previousContext;
            if (e === o) return n.__updateBrowserHistory(o, !0), n.location;
            if (n.location = ce(e), t && n.__updateBrowserHistory(e, 1 === r), y("location-changed", {
              router: n,
              location: n.location
            }), e.__skipAttach) return n.__copyUnchangedElements(e, o), n.__previousContext = e, n.location;

            n.__addAppearingContent(e, o);

            var a = n.__animateIfNeeded(e);

            return n.__runOnAfterEnterCallbacks(e), n.__runOnAfterLeaveCallbacks(e, o), a.then(function () {
              if (n.__isLatestRender(e)) return n.__removeDisappearingContent(), n.__previousContext = e, n.location;
            });
          }
        }).catch(function (e) {
          if (r === n.__lastStartedRenderId) throw t && n.__updateBrowserHistory(o), he(n.__outlet && n.__outlet.children), n.location = ce(Object.assign(o, {
            resolver: n
          })), y("error", Object.assign({
            router: n,
            error: e
          }, o)), e;
        }), this.ready;
      }
    }, {
      key: "__fullyResolveChain",
      value: function value(e) {
        var t = this,
            n = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : e;
        return this.__findComponentContextAfterAllRedirects(n).then(function (r) {
          var o = r !== n ? r : e,
              a = fe(de(r.chain), r.resolver) === r.pathname;
          return function e(t, n) {
            var r = void 0;
            return void 0 === n ? n = t.route : r = null, t.next(void 0, n, r).then(function (n) {
              return null === n || n === C ? a ? t : e(t, t.route.parent) : n;
            });
          }(r).then(function (e) {
            if (null === e || e === C) throw k(o);
            return e && e !== C && e !== r ? t.__fullyResolveChain(o, e) : t.__amendWithOnBeforeCallbacks(r);
          });
        });
      }
    }, {
      key: "__findComponentContextAfterAllRedirects",
      value: function value(e) {
        var n = this,
            r = e.result;
        return babelHelpers.instanceof(r, HTMLElement) ? (function (e, t) {
          t.location = ce(e);
          var n = e.chain.map(function (e) {
            return e.route;
          }).indexOf(e.route);
          e.chain[n].element = t;
        }(e, r), Promise.resolve(e)) : r.redirect ? this.__redirect(r.redirect, e.__redirectCount, e.__renderId).then(function (e) {
          return n.__findComponentContextAfterAllRedirects(e);
        }) : babelHelpers.instanceof(r, Error) ? Promise.reject(r) : Promise.reject(new Error(h('Invalid route resolution result for path "'.concat(e.pathname, '". ') + 'Expected redirect object or HTML element, but got: "'.concat(function (e) {
          if ("object" !== t(e)) return String(e);
          var n = Object.prototype.toString.call(e).match(/ (.*)\]$/)[1];
          return "Object" === n || "Array" === n ? "".concat(n, " ").concat(JSON.stringify(e)) : n;
        }(r), '". ') + "Double check the action return value for the route.")));
      }
    }, {
      key: "__amendWithOnBeforeCallbacks",
      value: function value(e) {
        var t = this;
        return this.__runOnBeforeCallbacks(e).then(function (n) {
          return n === t.__previousContext || n === e ? n : t.__fullyResolveChain(n);
        });
      }
    }, {
      key: "__runOnBeforeCallbacks",
      value: function value(e) {
        var t = this,
            n = this.__previousContext || {},
            r = n.chain || [],
            o = e.chain,
            a = Promise.resolve(),
            i = function i() {
          return {
            cancel: !0
          };
        },
            c = function c(t) {
          return ue(e, t);
        };

        if (e.__divergedChainIndex = 0, e.__skipAttach = !1, r.length) {
          for (var u = 0; u < Math.min(r.length, o.length) && r[u].route === o[u].route && (r[u].path === o[u].path || r[u].element === o[u].element) && this.__isReusableElement(r[u].element, o[u].element); u = ++e.__divergedChainIndex) {
            ;
          }

          if (e.__skipAttach = o.length === r.length && e.__divergedChainIndex == o.length && this.__isReusableElement(e.result, n.result), e.__skipAttach) {
            for (var l = o.length - 1; l >= 0; l--) {
              r[l].path === o[l].path && e.search === n.search || (a = this.__runOnBeforeLeaveCallbacks(a, e, {
                prevent: i
              }, r[l]));
            }

            for (var s = 0; s < o.length; s++) {
              r[s].path === o[s].path && e.search === n.search || (a = this.__runOnBeforeEnterCallbacks(a, e, {
                prevent: i,
                redirect: c
              }, o[s])), r[s].element.location = ce(e, r[s].route);
            }
          } else for (var h = r.length - 1; h >= e.__divergedChainIndex; h--) {
            a = this.__runOnBeforeLeaveCallbacks(a, e, {
              prevent: i
            }, r[h]);
          }
        }

        for (var f = e.__divergedChainIndex; !e.__skipAttach && f < o.length; f++) {
          a = this.__runOnBeforeEnterCallbacks(a, e, {
            prevent: i,
            redirect: c
          }, o[f]);
        }

        return a.then(function (n) {
          if (n) {
            if (n.cancel) return t.__previousContext.__renderId = e.__renderId, t.__previousContext;
            if (n.redirect) return t.__redirect(n.redirect, e.__redirectCount, e.__renderId);
          }

          return e;
        });
      }
    }, {
      key: "__runOnBeforeLeaveCallbacks",
      value: function value(e, t, n, r) {
        var o = this,
            a = ce(t);
        return e.then(function (e) {
          if (o.__isLatestRender(t)) return se("onBeforeLeave", [a, n, o], r.element)(e);
        }).then(function (e) {
          if (!(e || {}).redirect) return e;
        });
      }
    }, {
      key: "__runOnBeforeEnterCallbacks",
      value: function value(e, t, n, r) {
        var o = this,
            a = ce(t, r.route);
        return e.then(function (e) {
          if (o.__isLatestRender(t)) return se("onBeforeEnter", [a, n, o], r.element)(e);
        });
      }
    }, {
      key: "__isReusableElement",
      value: function value(e, t) {
        return !(!e || !t) && (this.__createdByRouter.get(e) && this.__createdByRouter.get(t) ? e.localName === t.localName : e === t);
      }
    }, {
      key: "__isLatestRender",
      value: function value(e) {
        return e.__renderId === this.__lastStartedRenderId;
      }
    }, {
      key: "__redirect",
      value: function value(e, t, n) {
        if (t > 256) throw new Error(h("Too many redirects when rendering ".concat(e.from)));
        return this.resolve({
          pathname: this.urlForPath(e.pathname, e.params),
          redirectFrom: e.from,
          __redirectCount: (t || 0) + 1,
          __renderId: n
        });
      }
    }, {
      key: "__ensureOutlet",
      value: function value() {
        var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : this.__outlet;
        if (!babelHelpers.instanceof(e, Node)) throw new TypeError(h("Expected router outlet to be a valid DOM Node (but got ".concat(e, ")")));
      }
    }, {
      key: "__updateBrowserHistory",
      value: function value(e, t) {
        var n = e.pathname,
            r = e.search,
            o = void 0 === r ? "" : r,
            a = e.hash,
            i = void 0 === a ? "" : a;

        if (window.location.pathname !== n || window.location.search !== o || window.location.hash !== i) {
          var c = t ? "replaceState" : "pushState";
          window.history[c](null, document.title, n + o + i), window.dispatchEvent(new PopStateEvent("popstate", {
            state: "vaadin-router-ignore"
          }));
        }
      }
    }, {
      key: "__copyUnchangedElements",
      value: function value(e, t) {
        for (var n = this.__outlet, r = 0; r < e.__divergedChainIndex; r++) {
          var o = t && t.chain[r].element;

          if (o) {
            if (o.parentNode !== n) break;
            e.chain[r].element = o, n = o;
          }
        }

        return n;
      }
    }, {
      key: "__addAppearingContent",
      value: function value(e, t) {
        var n = this;
        this.__ensureOutlet(), this.__removeAppearingContent();

        var r = this.__copyUnchangedElements(e, t);

        this.__appearingContent = [], this.__disappearingContent = Array.from(r.children).filter(function (t) {
          return n.__addedByRouter.get(t) && t !== e.result;
        });

        for (var o = r, a = e.__divergedChainIndex; a < e.chain.length; a++) {
          var i = e.chain[a].element;
          i && (o.appendChild(i), this.__addedByRouter.set(i, !0), o === r && this.__appearingContent.push(i), o = i);
        }
      }
    }, {
      key: "__removeDisappearingContent",
      value: function value() {
        this.__disappearingContent && he(this.__disappearingContent), this.__disappearingContent = null, this.__appearingContent = null;
      }
    }, {
      key: "__removeAppearingContent",
      value: function value() {
        this.__disappearingContent && this.__appearingContent && (he(this.__appearingContent), this.__disappearingContent = null, this.__appearingContent = null);
      }
    }, {
      key: "__runOnAfterLeaveCallbacks",
      value: function value(e, t) {
        if (t) for (var n = t.chain.length - 1; n >= e.__divergedChainIndex && this.__isLatestRender(e); n--) {
          var r = t.chain[n].element;
          if (r) try {
            var o = ce(e);
            le(r.onAfterLeave, [o, {}, t.resolver], r);
          } finally {
            this.__disappearingContent.indexOf(r) > -1 && he(r.children);
          }
        }
      }
    }, {
      key: "__runOnAfterEnterCallbacks",
      value: function value(e) {
        for (var t = e.__divergedChainIndex; t < e.chain.length && this.__isLatestRender(e); t++) {
          var n = e.chain[t].element || {},
              r = ce(e, e.chain[t].route);
          le(n.onAfterEnter, [r, {}, e.resolver], n);
        }
      }
    }, {
      key: "__animateIfNeeded",
      value: function value(e) {
        for (var t, n = (this.__disappearingContent || [])[0], r = (this.__appearingContent || [])[0], o = [], a = e.chain, i = a.length; i > 0; i--) {
          if (a[i - 1].route.animate) {
            t = a[i - 1].route.animate;
            break;
          }
        }

        if (n && r && t) {
          var c = w(t) && t.leave || "leaving",
              u = w(t) && t.enter || "entering";
          o.push(ae(n, c)), o.push(ae(r, u));
        }

        return Promise.all(o).then(function () {
          return e;
        });
      }
    }, {
      key: "subscribe",
      value: function value() {
        window.addEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "unsubscribe",
      value: function value() {
        window.removeEventListener("vaadin-router-go", this.__navigationEventHandler);
      }
    }, {
      key: "__onNavigationEvent",
      value: function value(e) {
        var t = e ? e.detail : window.location,
            n = t.pathname,
            r = t.search,
            o = t.hash;
        E(this.__normalizePathname(n)) && (e && e.preventDefault && e.preventDefault(), this.render({
          pathname: n,
          search: r,
          hash: o
        }, !0));
      }
    }, {
      key: "urlForName",
      value: function value(e, t) {
        return this.__urlForName || (this.__urlForName = ee(this)), fe(this.__urlForName(e, t), this);
      }
    }, {
      key: "urlForPath",
      value: function value(e, t) {
        return fe(r.pathToRegexp.compile(e)(t), this);
      }
    }], [{
      key: "setTriggers",
      value: function value() {
        for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) {
          t[n] = arguments[n];
        }

        ne(t);
      }
    }, {
      key: "go",
      value: function value(e) {
        var t = E(e) ? this.__createUrl(e, "http://a") : e;
        return y("go", {
          pathname: t.pathname,
          search: t.search,
          hash: t.hash
        });
      }
    }]), r;
  }(),
      ve = /\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,
      _e = window.Vaadin && window.Vaadin.Flow && window.Vaadin.Flow.clients;

  function me(e, t) {
    if ("function" == typeof e) {
      var n = ve.exec(e.toString());
      if (n) try {
        e = new Function(n[1]);
      } catch (e) {
        console.log("vaadin-development-mode-detector: uncommentAndRun() failed", e);
      }
      return e(t);
    }
  }

  window.Vaadin = window.Vaadin || {};

  var ge = function ge(e, t) {
    if (window.Vaadin.developmentMode) return me(e, t);
  };

  function ye() {}

  void 0 === window.Vaadin.developmentMode && (window.Vaadin.developmentMode = function () {
    try {
      return !!localStorage.getItem("vaadin.developmentmode.force") || ["localhost", "127.0.0.1"].indexOf(window.location.hostname) >= 0 && (_e ? !function () {
        if (_e) {
          var e = Object.keys(_e).map(function (e) {
            return _e[e];
          }).filter(function (e) {
            return e.productionMode;
          });
          if (e.length > 0) return !0;
        }

        return !1;
      }() : !me(function () {
        return !0;
      }));
    } catch (e) {
      return !1;
    }
  }());
  var we, be, Ee, ke;
  window.Vaadin = window.Vaadin || {}, window.Vaadin.registrations = window.Vaadin.registrations || [], window.Vaadin.registrations.push({
    is: "@vaadin/router",
    version: "1.7.0"
  }), ge(ye), pe.NavigationTrigger = {
    POPSTATE: A,
    CLICK: O
  }, J.__ensureUrlAvailableOrPolyfilled = function () {
    if (void 0 === we) {
      try {
        var e = new URL("b", "http://a");
        e.pathname = "c", we = "http://a/c" === e.href;
      } catch (e) {
        we = !1;
      }

      if (!we && (be = document.implementation.createHTMLDocument("url"), Ee = be.createElement("base"), be.head.appendChild(Ee), !(ke = be.createElement("a")).origin)) {
        Object.defineProperty(ke, "origin", {
          get: function get() {
            var e = ke.protocol,
                t = ke.port,
                n = "http:" === e && "80" === t || "https:" === e && "443" === t ? ke.hostname : ke.host;
            return "".concat(e, "//").concat(n);
          }
        });
        var t = Object.getOwnPropertyDescriptor(Object.getPrototypeOf(ke), "pathname").get;
        Object.defineProperty(ke, "pathname", {
          get: function get() {
            var e = t.apply(ke);
            return "/" !== e.charAt(0) ? "/" + e : e;
          }
        });
      }
    }
  }, J.__createUrl = function (e, t) {
    return J.__ensureUrlAvailableOrPolyfilled(), we ? new URL(e, t) : (Ee.href = t, ke.href = e.replace(/ /g, "%20"), ke.href = ke.href, ke);
  }, e.Resolver = J, e.Router = pe, Object.defineProperty(e, "__esModule", {
    value: !0
  });
});