define(["exports","../../vaadin-themable-mixin/vaadin-themable-mixin.js","../../vaadin-control-state-mixin/vaadin-control-state-mixin.js"],function(_exports,_vaadinThemableMixin,_vaadinControlStateMixin){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.TextFieldMixin=void 0;var $_documentContainer=document.createElement("template");$_documentContainer.innerHTML="<dom-module id=\"vaadin-text-field-shared-styles\">\n  <template>\n    <style>\n      :host {\n        display: inline-flex;\n        outline: none;\n      }\n\n      :host::before {\n        content: \"\\2003\";\n        width: 0;\n        display: inline-block;\n        /* Size and position this element on the same vertical position as the input-field element\n           to make vertical align for the host element work as expected */\n      }\n\n      :host([hidden]) {\n        display: none !important;\n      }\n\n      .vaadin-text-field-container,\n      .vaadin-text-area-container {\n        display: flex;\n        flex-direction: column;\n        min-width: 100%;\n        max-width: 100%;\n        width: var(--vaadin-text-field-default-width, 12em);\n      }\n\n      [part=\"label\"]:empty {\n        display: none;\n      }\n\n      [part=\"input-field\"] {\n        display: flex;\n        align-items: center;\n        flex: auto;\n      }\n\n      /* Reset the native input styles */\n      [part=\"value\"] {\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        outline: none;\n        margin: 0;\n        padding: 0;\n        border: 0;\n        border-radius: 0;\n        min-width: 0;\n        font: inherit;\n        font-size: 1em;\n        line-height: normal;\n        color: inherit;\n        background-color: transparent;\n        /* Disable default invalid style in Firefox */\n        box-shadow: none;\n      }\n\n      [part=\"input-field\"] ::slotted(*) {\n        flex: none;\n      }\n\n      /* Slotted by vaadin-dropdown-menu-text-field */\n      [part=\"value\"],\n      [part=\"input-field\"] ::slotted([part=\"value\"]) {\n        flex: auto;\n        white-space: nowrap;\n        overflow: hidden;\n        width: 100%;\n        height: 100%;\n      }\n\n      [part=\"value\"]::-ms-clear {\n        display: none;\n      }\n    </style>\n  </template>\n</dom-module>";document.head.appendChild($_documentContainer.content);var TextFieldMixin=function(subclass){return function(_ControlStateMixin){babelHelpers.inherits(VaadinTextFieldMixin,_ControlStateMixin);function VaadinTextFieldMixin(){babelHelpers.classCallCheck(this,VaadinTextFieldMixin);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(VaadinTextFieldMixin).apply(this,arguments))}babelHelpers.createClass(VaadinTextFieldMixin,[{key:"_onInput",value:function _onInput(){if(this.preventInvalidInput){var input=this.focusElement;if(0<input.value.length&&!this.checkValidity()){input.value=this.value||""}}}},{key:"_onChange",value:function _onChange(e){var changeEvent=new CustomEvent("change",{detail:{sourceEvent:e},bubbles:e.bubbles,cancelable:e.cancelable});this.dispatchEvent(changeEvent)}},{key:"_valueChanged",value:function _valueChanged(newVal,oldVal){if(""===newVal&&oldVal===void 0){return}if(this.invalid){this.validate()}if(""!==newVal&&null!=newVal){this.setAttribute("has-value","")}else{this.removeAttribute("has-value")}}},{key:"_labelChanged",value:function _labelChanged(label){if(""!==label&&null!=label){this.setAttribute("has-label","")}else{this.removeAttribute("has-label")}}},{key:"checkValidity",value:function checkValidity(){if(this.required||this.pattern||this.maxlength||this.minlength){return this.focusElement.checkValidity()}else{return!this.invalid}}},{key:"ready",value:function ready(){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinTextFieldMixin.prototype),"ready",this).call(this);if(!(window.ShadyCSS&&window.ShadyCSS.nativeCss)){this.updateStyles()}var uniqueId=TextFieldMixin._uniqueId=1+TextFieldMixin._uniqueId||0;this._errorId="".concat(this.constructor.is,"-error-").concat(uniqueId);this._labelId="".concat(this.constructor.is,"-label-").concat(uniqueId);if(navigator.userAgent.match(/Trident/)){this._addIEListeners()}}},{key:"validate",value:function validate(){return!(this.invalid=!this.checkValidity())}},{key:"_addIEListeners",value:function _addIEListeners(){var _this=this,prevent=function(e){e.stopImmediatePropagation();_this.focusElement.removeEventListener("input",prevent)},shouldPreventInput=function(){return _this.placeholder&&_this.focusElement.addEventListener("input",prevent)};this.focusElement.addEventListener("focusin",shouldPreventInput);this.focusElement.addEventListener("focusout",shouldPreventInput);this._createPropertyObserver("placeholder",shouldPreventInput)}},{key:"_getActiveErrorId",value:function _getActiveErrorId(invalid,errorMessage,errorId){return errorMessage&&invalid?errorId:void 0}},{key:"_getActiveLabelId",value:function _getActiveLabelId(label,labelId){return label?labelId:void 0}},{key:"_getErrorMessageAriaHidden",value:function _getErrorMessageAriaHidden(invalid,errorMessage,errorId){return(!this._getActiveErrorId(invalid,errorMessage,errorId)).toString()}},{key:"attributeChangedCallback",value:function attributeChangedCallback(prop,oldVal,newVal){babelHelpers.get(babelHelpers.getPrototypeOf(VaadinTextFieldMixin.prototype),"attributeChangedCallback",this).call(this,prop,oldVal,newVal);if(!(window.ShadyCSS&&window.ShadyCSS.nativeCss)&&/^(focused|focus-ring|invalid|disabled|placeholder|has-value)$/.test(prop)){this.updateStyles()}var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);if(isSafari&&this.root){var WEBKIT_PROPERTY="-webkit-backface-visibility";this.root.querySelectorAll("*").forEach(function(el){el.style[WEBKIT_PROPERTY]="visible";el.style[WEBKIT_PROPERTY]=""})}}},{key:"focusElement",get:function get(){return this.root&&this.root.querySelector("[part=value]")}}],[{key:"properties",get:function get(){return{autocomplete:{type:String},autocorrect:{type:String},autocapitalize:{type:String},errorMessage:{type:String,value:""},label:{type:String,value:"",observer:"_labelChanged"},maxlength:{type:Number},minlength:{type:Number},name:{type:String},placeholder:{type:String},readonly:{type:Boolean,reflectToAttribute:!0},required:{type:Boolean,reflectToAttribute:!0},value:{type:String,value:"",observer:"_valueChanged",notify:!0},invalid:{type:Boolean,reflectToAttribute:!0,notify:!0,value:!1},preventInvalidInput:{type:Boolean},_labelId:{type:String},_errorId:{type:String}}}}]);return VaadinTextFieldMixin}((0,_vaadinControlStateMixin.ControlStateMixin)(subclass))};_exports.TextFieldMixin=TextFieldMixin});