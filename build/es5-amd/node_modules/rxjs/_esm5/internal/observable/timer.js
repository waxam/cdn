define(["exports","../Observable.js","../scheduler/async.js","../util/isNumeric.js","../util/isScheduler.js"],function(_exports,_Observable,_async,_isNumeric,_isScheduler){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.timer=function(dueTime,periodOrScheduler,scheduler){if(void 0===dueTime){dueTime=0}var period=-1;if((0,_isNumeric.isNumeric)(periodOrScheduler)){period=1>+periodOrScheduler&&1||+periodOrScheduler}else if((0,_isScheduler.isScheduler)(periodOrScheduler)){scheduler=periodOrScheduler}if(!(0,_isScheduler.isScheduler)(scheduler)){scheduler=_async.async}return new _Observable.Observable(function(subscriber){var due=(0,_isNumeric.isNumeric)(dueTime)?dueTime:+dueTime-scheduler.now();return scheduler.schedule(dispatch,due,{index:0,period:period,subscriber:subscriber})})};function dispatch(state){var index=state.index,period=state.period,subscriber=state.subscriber;subscriber.next(index);if(subscriber.closed){return}else if(-1===period){return subscriber.complete()}state.index=index+1;this.schedule(state,period)}});