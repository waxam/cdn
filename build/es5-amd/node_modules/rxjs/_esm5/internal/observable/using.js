define(["exports","../Observable.js","./from.js","./empty.js"],function(_exports,_Observable,_from,_empty){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.using=function(resourceFactory,observableFactory){return new _Observable.Observable(function(subscriber){var resource;try{resource=resourceFactory()}catch(err){subscriber.error(err);return}var result;try{result=observableFactory(resource)}catch(err){subscriber.error(err);return}var source=result?(0,_from.from)(result):_empty.EMPTY,subscription=source.subscribe(subscriber);return function(){subscription.unsubscribe();if(resource){resource.unsubscribe()}}})}});