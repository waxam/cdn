define(["exports","../Observable.js","../util/isArray.js","../util/isFunction.js","../operators/map.js"],function(_exports,_Observable,_isArray,_isFunction,_map){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.fromEventPattern=fromEventPattern;function fromEventPattern(addHandler,removeHandler,resultSelector){if(resultSelector){return fromEventPattern(addHandler,removeHandler).pipe((0,_map.map)(function(args){return(0,_isArray.isArray)(args)?resultSelector.apply(void 0,args):resultSelector(args)}))}return new _Observable.Observable(function(subscriber){var handler=function(){for(var e=[],_i=0;_i<arguments.length;_i++){e[_i]=arguments[_i]}return subscriber.next(1===e.length?e[0]:e)},retValue;try{retValue=addHandler(handler)}catch(err){subscriber.error(err);return}if(!(0,_isFunction.isFunction)(removeHandler)){return}return function(){return removeHandler(handler,retValue)}})}});