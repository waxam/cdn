define(["exports","../../../../tslib/tslib.es6.js","../util/isScheduler.js","../util/isArray.js","../OuterSubscriber.js","../util/subscribeToResult.js","./fromArray.js"],function(_exports,tslib_1,_isScheduler,_isArray,_OuterSubscriber,_subscribeToResult,_fromArray){"use strict";Object.defineProperty(_exports,"__esModule",{value:!0});_exports.combineLatest=function(){for(var observables=[],_i=0;_i<arguments.length;_i++){observables[_i]=arguments[_i]}var resultSelector=null,scheduler=null;if((0,_isScheduler.isScheduler)(observables[observables.length-1])){scheduler=observables.pop()}if("function"===typeof observables[observables.length-1]){resultSelector=observables.pop()}if(1===observables.length&&(0,_isArray.isArray)(observables[0])){observables=observables[0]}return(0,_fromArray.fromArray)(observables,scheduler).lift(new CombineLatestOperator(resultSelector))};_exports.CombineLatestSubscriber=_exports.CombineLatestOperator=void 0;tslib_1=babelHelpers.interopRequireWildcard(tslib_1);var NONE={};var CombineLatestOperator=function(){function CombineLatestOperator(resultSelector){this.resultSelector=resultSelector}CombineLatestOperator.prototype.call=function(subscriber,source){return source.subscribe(new CombineLatestSubscriber(subscriber,this.resultSelector))};return CombineLatestOperator}();_exports.CombineLatestOperator=CombineLatestOperator;var CombineLatestSubscriber=function(_super){tslib_1.__extends(CombineLatestSubscriber,_super);function CombineLatestSubscriber(destination,resultSelector){var _this=_super.call(this,destination)||this;_this.resultSelector=resultSelector;_this.active=0;_this.values=[];_this.observables=[];return _this}CombineLatestSubscriber.prototype._next=function(observable){this.values.push(NONE);this.observables.push(observable)};CombineLatestSubscriber.prototype._complete=function(){var observables=this.observables,len=observables.length;if(0===len){this.destination.complete()}else{this.active=len;this.toRespond=len;for(var i=0,observable;i<len;i++){observable=observables[i];this.add((0,_subscribeToResult.subscribeToResult)(this,observable,observable,i))}}};CombineLatestSubscriber.prototype.notifyComplete=function(){if(0===(this.active-=1)){this.destination.complete()}};CombineLatestSubscriber.prototype.notifyNext=function(outerValue,innerValue,outerIndex){var values=this.values,oldVal=values[outerIndex],toRespond=!this.toRespond?0:oldVal===NONE?--this.toRespond:this.toRespond;values[outerIndex]=innerValue;if(0===toRespond){if(this.resultSelector){this._tryResultSelector(values)}else{this.destination.next(values.slice())}}};CombineLatestSubscriber.prototype._tryResultSelector=function(values){var result;try{result=this.resultSelector.apply(this,values)}catch(err){this.destination.error(err);return}this.destination.next(result)};return CombineLatestSubscriber}(_OuterSubscriber.OuterSubscriber);_exports.CombineLatestSubscriber=CombineLatestSubscriber});