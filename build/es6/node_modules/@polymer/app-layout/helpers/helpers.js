/**
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
import"../../polymer/polymer-legacy.js";export const _scrollEffects={};export let _scrollTimer=null;export const scrollTimingFunction=function easeOutQuad(t,b,c,d){return-c*(t/=d)*(t-2)+b};export const registerEffect=function registerEffect(effectName,effectDef){if(null!=_scrollEffects[effectName])throw new Error("effect `"+effectName+"` is already registered.");_scrollEffects[effectName]=effectDef};export const queryAllRoot=function(selector,root){for(var queue=[root],matches=[];queue.length>0;){var node=queue.shift();matches.push.apply(matches,node.querySelectorAll(selector));for(var i=0;node.children[i];i++)node.children[i].shadowRoot&&queue.push(node.children[i].shadowRoot)}return matches};export const scroll=function scroll(options){options=options||{};var docEl=document.documentElement,target=options.target||docEl,hasNativeScrollBehavior="scrollBehavior"in target.style&&target.scroll,scrollTop=options.top||0,scrollLeft=options.left||0,scrollTo=target===docEl?window.scrollTo:function scrollTo(scrollLeft,scrollTop){target.scrollLeft=scrollLeft,target.scrollTop=scrollTop};if("smooth"===options.behavior)if(hasNativeScrollBehavior)target.scroll(options);else{var timingFn=scrollTimingFunction,startTime=Date.now(),currentScrollTop=target===docEl?window.pageYOffset:target.scrollTop,currentScrollLeft=target===docEl?window.pageXOffset:target.scrollLeft,deltaScrollTop=scrollTop-currentScrollTop,deltaScrollLeft=scrollLeft-currentScrollLeft;(function updateFrame(){var elapsedTime=Date.now()-startTime;elapsedTime<300?(scrollTo(timingFn(elapsedTime,currentScrollLeft,deltaScrollLeft,300),timingFn(elapsedTime,currentScrollTop,deltaScrollTop,300)),requestAnimationFrame(updateFrame)):scrollTo(scrollLeft,scrollTop)}).bind(this)()}else if("silent"===options.behavior){var headers=queryAllRoot("app-header",document.body);headers.forEach((function(header){header.setAttribute("silent-scroll","")})),_scrollTimer&&window.cancelAnimationFrame(_scrollTimer),_scrollTimer=window.requestAnimationFrame((function(){headers.forEach((function(header){header.removeAttribute("silent-scroll")})),_scrollTimer=null})),scrollTo(scrollLeft,scrollTop)}else scrollTo(scrollLeft,scrollTop)};