import"../../polymer/polymer-legacy.js";import"../../iron-media-query/iron-media-query.js";import{Polymer}from"../../polymer/lib/legacy/polymer-fn.js";import{dom}from"../../polymer/lib/legacy/polymer.dom.js";import{html}from"../../polymer/lib/utils/html-tag.js";import{afterNextRender}from"../../polymer/lib/utils/render-status.js";import{AppLayoutBehavior}from"../app-layout-behavior/app-layout-behavior.js";Polymer({_template:html`
    <style>
      :host {
        display: block;
        /**
         * Force app-drawer-layout to have its own stacking context so that its parent can
         * control the stacking of it relative to other elements.
         */
        position: relative;
        z-index: 0;
      }

      :host ::slotted([slot=drawer]) {
        z-index: 1;
      }

      :host([fullbleed]) {
        @apply --layout-fit;
      }

      #contentContainer {
        /* Create a stacking context here so that all children appear below the header. */
        position: relative;
        z-index: 0;
        height: 100%;
        transition: var(--app-drawer-layout-content-transition, none);
      }

      #contentContainer[drawer-position=left] {
        margin-left: var(--app-drawer-width, 256px);
      }

      #contentContainer[drawer-position=right] {
        margin-right: var(--app-drawer-width, 256px);
      }
    </style>

    <slot id="drawerSlot" name="drawer"></slot>

    <div id="contentContainer" drawer-position\$="[[_drawerPosition]]">
      <slot></slot>
    </div>

    <iron-media-query query="[[_computeMediaQuery(forceNarrow, responsiveWidth)]]" on-query-matches-changed="_onQueryMatchesChanged"></iron-media-query>
`,is:"app-drawer-layout",behaviors:[AppLayoutBehavior],properties:{forceNarrow:{type:Boolean,value:!1},responsiveWidth:{type:String,value:"640px"},narrow:{type:Boolean,reflectToAttribute:!0,readOnly:!0,notify:!0},openedWhenNarrow:{type:Boolean,value:!1},_drawerPosition:{type:String}},listeners:{click:"_clickHandler"},observers:["_narrowChanged(narrow)"],get drawer(){return dom(this.$.drawerSlot).getDistributedNodes()[0]},attached:function(){var drawer=this.drawer;drawer&&drawer.setAttribute("no-transition","")},_clickHandler:function(e){var target=dom(e).localTarget;if(target&&target.hasAttribute("drawer-toggle")){var drawer=this.drawer;drawer&&!drawer.persistent&&drawer.toggle()}},_updateLayoutStates:function(){var drawer=this.drawer;this.isAttached&&drawer&&(this._drawerPosition=this.narrow?null:drawer.position,this._drawerNeedsReset&&(this.narrow?(drawer.opened=this.openedWhenNarrow,drawer.persistent=!1):drawer.opened=drawer.persistent=!0,drawer.hasAttribute("no-transition")&&afterNextRender(this,function(){drawer.removeAttribute("no-transition")}),this._drawerNeedsReset=!1))},_narrowChanged:function(){this._drawerNeedsReset=!0,this.resetLayout()},_onQueryMatchesChanged:function(event){this._setNarrow(event.detail.value)},_computeMediaQuery:function(forceNarrow,responsiveWidth){return forceNarrow?"(min-width: 0px)":"(max-width: "+responsiveWidth+")"}});