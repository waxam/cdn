/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
import"../polymer/polymer-legacy.js";import{Polymer as t}from"../polymer/lib/legacy/polymer-fn.js";import{dom as e}from"../polymer/lib/legacy/polymer.dom.js";import{html as i}from"../polymer/lib/utils/html-tag.js";t({_template:i`
    <style>
      :host {
        display: block;
      }
    </style>
    <slot id="content"></slot>
`,is:"iron-swipeable-container",properties:{swipeStyle:{type:String,value:"horizontal"},disabled:{type:Boolean,value:!1,observer:"__NOOP_IE11"},widthRatio:{type:Number,value:3},opacityRate:{type:Number,value:.2},transition:{type:String,value:"300ms cubic-bezier(0.4, 0.0, 1, 1)"}},__NOOP_IE11:function(){},ready:function(){this._transitionProperty="opacity, transform",this._swipeComplete=!1,this._direction=""},attached:function(){this._nodeObserver=e(this.$.content).observeNodes(function(t){for(var e=0;e<t.addedNodes.length;e++)this._addListeners(t.addedNodes[e]);for(e=0;e<t.removedNodes.length;e++)this._removeListeners(t.removedNodes[e])}.bind(this))},_addListeners:function(t){t.nodeType!==Node.TEXT_NODE&&t.nodeType!==Node.COMMENT_NODE&&(t.style.transitionProperty=this._transitionProperty,t.style.transition=this.transition,this.listen(t,"track","_onTrack"),this.listen(t,"transitionend","_onTransitionEnd"))},_removeListeners:function(t){t.nodeType!==Node.TEXT_NODE&&(this.unlisten(t,"track","_onTrack"),this.unlisten(t,"transitionend","_onTransitionEnd"))},detached:function(){this._nodeObserver&&(e(this.$.content).unobserveNodes(this._nodeObserver),this._nodeObserver=null)},_onTrack:function(t){if(!this.disabled){var e=t.currentTarget;if(!e.classList.contains("disable-swipe")){var i=t.detail;"start"===i.state?this._trackStart(i,e):"track"===i.state?this._trackMove(i,e):"end"===i.state&&this._trackEnd(i,e),t.stopPropagation()}}},_trackStart:function(t,e){this._nodeWidth=e.offsetWidth,e.style.transition="none"},_trackMove:function(t,e){this._animate(t.dx,e)},_trackEnd:function(t,e){this._swipeComplete=Math.abs(t.dx)>this._nodeWidth/2,this._direction=t.dx>0,this._swipeEnd(e)},_animate:function(t,e){var i,n,s=t>0?1:-1,o=this._nodeWidth*this.widthRatio,r=Math.max(0,Math.abs(t)-this._nodeWidth*this.opacityRate),a=Math.max(0,(o-r)/o);(e.style.opacity=a,"horizontal"===this.swipeStyle)?(i="translate3d("+t+"px,0px,0)",n=""):(i="translate3d("+t+"px,"+(o-Math.sqrt(o*o-r*r))+"px,0)",n=" rotate("+(1-a)*s*90+"deg)");this.transform(i+n,e)},_swipeEnd:function(t){if(t.style.transition=this.transition,this._swipeComplete){var e=this._nodeWidth*this.widthRatio;this._animate(this._direction?e:-e,t)}else this._animate(0,t)},_onTransitionEnd:function(t){var i=t.currentTarget;this._swipeComplete&&"opacity"===t.propertyName&&(e(this).removeChild(i),this.fire("iron-swipe",{direction:this._direction>0?"right":"left",target:i}))}});