import"../polymer/polymer-legacy.js";import{Polymer}from"../polymer/lib/legacy/polymer-fn.js";import{dom}from"../polymer/lib/legacy/polymer.dom.js";import{html}from"../polymer/lib/utils/html-tag.js";Polymer({_template:html`
    <style>
      :host {
        display: block;
      }
    </style>
    <slot id="content"></slot>
`,is:"iron-swipeable-container",properties:{swipeStyle:{type:String,value:"horizontal"},disabled:{type:Boolean,value:!1,observer:"__NOOP_IE11"},widthRatio:{type:Number,value:3},opacityRate:{type:Number,value:.2},transition:{type:String,value:"300ms cubic-bezier(0.4, 0.0, 1, 1)"}},__NOOP_IE11:function(){},ready:function(){this._transitionProperty="opacity, transform";this._swipeComplete=!1;this._direction=""},attached:function(){this._nodeObserver=dom(this.$.content).observeNodes(function(mutations){for(var i=0;i<mutations.addedNodes.length;i++){this._addListeners(mutations.addedNodes[i])}for(var i=0;i<mutations.removedNodes.length;i++){this._removeListeners(mutations.removedNodes[i])}}.bind(this))},_addListeners:function(node){if(node.nodeType===Node.TEXT_NODE||node.nodeType===Node.COMMENT_NODE)return;node.style.transitionProperty=this._transitionProperty;node.style.transition=this.transition;this.listen(node,"track","_onTrack");this.listen(node,"transitionend","_onTransitionEnd")},_removeListeners:function(node){if(node.nodeType===Node.TEXT_NODE)return;this.unlisten(node,"track","_onTrack");this.unlisten(node,"transitionend","_onTransitionEnd")},detached:function(){if(this._nodeObserver){dom(this.$.content).unobserveNodes(this._nodeObserver);this._nodeObserver=null}},_onTrack:function(event){if(this.disabled)return;var target=event.currentTarget;if(target.classList.contains("disable-swipe"))return;var track=event.detail;if("start"===track.state){this._trackStart(track,target)}else if("track"===track.state){this._trackMove(track,target)}else if("end"===track.state){this._trackEnd(track,target)}event.stopPropagation()},_trackStart:function(event,target){this._nodeWidth=target.offsetWidth;target.style.transition="none"},_trackMove:function(event,target){this._animate(event.dx,target)},_trackEnd:function(event,target){this._swipeComplete=Math.abs(event.dx)>this._nodeWidth/2;this._direction=0<event.dx;this._swipeEnd(target)},_animate:function(x,target){var _Mathmax=Math.max,direction=0<x?1:-1,totalDistance=this._nodeWidth*this.widthRatio,opaqueDistance=_Mathmax(0,Math.abs(x)-this._nodeWidth*this.opacityRate),opacity=_Mathmax(0,(totalDistance-opaqueDistance)/totalDistance);target.style.opacity=opacity;var translate,rotate;if("horizontal"===this.swipeStyle){translate="translate3d("+x+"px,"+0+"px,0)";rotate=""}else{var y=totalDistance-Math.sqrt(totalDistance*totalDistance-opaqueDistance*opaqueDistance);translate="translate3d("+x+"px,"+y+"px,0)";rotate=" rotate("+90*((1-opacity)*direction)+"deg)"}this.transform(translate+rotate,target)},_swipeEnd:function(target){target.style.transition=this.transition;if(this._swipeComplete){var totalDistance=this._nodeWidth*this.widthRatio;this._animate(this._direction?totalDistance:-totalDistance,target)}else{this._animate(0,target)}},_onTransitionEnd:function(event){var target=event.currentTarget;if(this._swipeComplete&&"opacity"===event.propertyName){dom(this).removeChild(target);this.fire("iron-swipe",{direction:0<this._direction?"right":"left",target:target})}}});