/**
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at
http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
part of the polymer project is also subject to an additional IP rights grant
found at http://polymer.github.io/PATENTS.txt
*/
import"../polymer/polymer-legacy.js";import{IronMeta}from"../iron-meta/iron-meta.js";import{Polymer}from"../polymer/lib/legacy/polymer-fn.js";import{dom}from"../polymer/lib/legacy/polymer.dom.js";Polymer({is:"iron-iconset-svg",properties:{name:{type:String,observer:"_nameChanged"},size:{type:Number,value:24},rtlMirroring:{type:Boolean,value:!1},useGlobalRtlAttribute:{type:Boolean,value:!1}},created:function(){this._meta=new IronMeta({type:"iconset",key:null,value:null})},attached:function(){this.style.display="none"},getIconNames:function(){return this._icons=this._createIconMap(),Object.keys(this._icons).map((function(n){return this.name+":"+n}),this)},applyIcon:function(element,iconName){this.removeIcon(element);var svg=this._cloneIcon(iconName,this.rtlMirroring&&this._targetIsRTL(element));if(svg){var pde=dom(element.root||element);return pde.insertBefore(svg,pde.childNodes[0]),element._svgIcon=svg}return null},removeIcon:function(element){element._svgIcon&&(dom(element.root||element).removeChild(element._svgIcon),element._svgIcon=null)},_targetIsRTL:function(target){if(null==this.__targetIsRTL)if(this.useGlobalRtlAttribute){var globalElement=document.body&&document.body.hasAttribute("dir")?document.body:document.documentElement;this.__targetIsRTL="rtl"===globalElement.getAttribute("dir")}else target&&target.nodeType!==Node.ELEMENT_NODE&&(target=target.host),this.__targetIsRTL=target&&"rtl"===window.getComputedStyle(target).direction;return this.__targetIsRTL},_nameChanged:function(){this._meta.value=null,this._meta.key=this.name,this._meta.value=this,this.async((function(){this.fire("iron-iconset-added",this,{node:window})}))},_createIconMap:function(){var icons=Object.create(null);return dom(this).querySelectorAll("[id]").forEach((function(icon){icons[icon.id]=icon})),icons},_cloneIcon:function(id,mirrorAllowed){return this._icons=this._icons||this._createIconMap(),this._prepareSvgClone(this._icons[id],this.size,mirrorAllowed)},_prepareSvgClone:function(sourceSvg,size,mirrorAllowed){if(sourceSvg){var content=sourceSvg.cloneNode(!0),svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),viewBox=content.getAttribute("viewBox")||"0 0 "+size+" "+size,cssText="pointer-events: none; display: block; width: 100%; height: 100%;";return mirrorAllowed&&content.hasAttribute("mirror-in-rtl")&&(cssText+="-webkit-transform:scale(-1,1);transform:scale(-1,1);transform-origin:center;"),svg.setAttribute("viewBox",viewBox),svg.setAttribute("preserveAspectRatio","xMidYMid meet"),svg.setAttribute("focusable","false"),svg.style.cssText=cssText,svg.appendChild(content).removeAttribute("id"),svg}return null}});