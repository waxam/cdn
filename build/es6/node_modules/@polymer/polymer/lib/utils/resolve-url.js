/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
import"./boot.js";let workingURL,resolveDoc,CSS_URL_RX=/(url\()([^)]*)(\))/g,ABS_URL=/(^\/[^\/])|(^#)|(^[\w-\d]*:)/;export function resolveUrl(url,baseURI){if(url&&ABS_URL.test(url))return url;if("//"===url)return url;if(void 0===workingURL){workingURL=!1;try{const u=new URL("b","http://a");u.pathname="c%20d",workingURL="http://a/c%20d"===u.href}catch(e){}}if(baseURI||(baseURI=document.baseURI||window.location.href),workingURL)try{return new URL(url,baseURI).href}catch(e){return url}return resolveDoc||(resolveDoc=document.implementation.createHTMLDocument("temp"),resolveDoc.base=resolveDoc.createElement("base"),resolveDoc.head.appendChild(resolveDoc.base),resolveDoc.anchor=resolveDoc.createElement("a"),resolveDoc.body.appendChild(resolveDoc.anchor)),resolveDoc.base.href=baseURI,resolveDoc.anchor.href=url,resolveDoc.anchor.href||url}export function resolveCss(cssText,baseURI){return cssText.replace(CSS_URL_RX,(function(m,pre,url,post){return pre+"'"+resolveUrl(url.replace(/["']/g,""),baseURI)+"'"+post}))}export function pathFromUrl(url){return url.substring(0,url.lastIndexOf("/")+1)}