/**
@license
Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
*/
import"../../../../@webcomponents/shadycss/entrypoints/apply-shim.js";import{ElementMixin as e}from"../mixins/element-mixin.js";import{GestureEventListeners as t}from"../mixins/gesture-event-listeners.js";import{DirMixin as r}from"../mixins/dir-mixin.js";import{dedupingMixin as s}from"../utils/mixin.js";import"../utils/render-status.js";import"../utils/unresolved.js";import{dom as i,matchesSelector as n}from"./polymer.dom.js";import{setTouchAction as o}from"../utils/gestures.js";import{Debouncer as l}from"../utils/debounce.js";import{timeOut as u,microTask as a}from"../utils/async.js";import{get as c}from"../utils/path.js";import{wrap as d}from"../utils/wrap.js";import{scopeSubtree as h}from"../utils/scope-subtree.js";let b=window.ShadyCSS;export const LegacyElementMixin=s(s=>{const p=r(t(e(s))),m={x:"pan-x",y:"pan-y",none:"none",all:"auto"};class LegacyElement extends p{constructor(){super(),this.isAttached,this.__boundListeners,this._debouncers}static get importMeta(){return this.prototype.importMeta}created(){}connectedCallback(){super.connectedCallback(),this.isAttached=!0,this.attached()}attached(){}disconnectedCallback(){super.disconnectedCallback(),this.isAttached=!1,this.detached()}detached(){}attributeChangedCallback(e,t,r,s){t!==r&&(super.attributeChangedCallback(e,t,r,s),this.attributeChanged(e,t,r))}attributeChanged(e,t,r){}_initializeProperties(){let e=Object.getPrototypeOf(this);e.hasOwnProperty(JSCompiler_renameProperty("__hasRegisterFinished",e))||(this._registered(),e.__hasRegisterFinished=!0),super._initializeProperties(),this.root=this,this.created(),this._applyListeners()}_registered(){}ready(){this._ensureAttributes(),super.ready()}_ensureAttributes(){}_applyListeners(){}serialize(e){return this._serializeValue(e)}deserialize(e,t){return this._deserializeValue(e,t)}reflectPropertyToAttribute(e,t,r){this._propertyToAttribute(e,t,r)}serializeValueToAttribute(e,t,r){this._valueToNodeAttribute(r||this,e,t)}extend(e,t){if(!e||!t)return e||t;let r=Object.getOwnPropertyNames(t);for(let s,i=0;i<r.length&&(s=r[i]);i++){let r=Object.getOwnPropertyDescriptor(t,s);r&&Object.defineProperty(e,s,r)}return e}mixin(e,t){for(let r in t)e[r]=t[r];return e}chainObject(e,t){return e&&t&&e!==t&&(e.__proto__=t),e}instanceTemplate(e){let t=this.constructor._contentForTemplate(e);return document.importNode(t,!0)}fire(e,t,r){r=r||{},t=null==t?{}:t;let s=new Event(e,{bubbles:void 0===r.bubbles||r.bubbles,cancelable:Boolean(r.cancelable),composed:void 0===r.composed||r.composed});s.detail=t;let i=r.node||this;return d(i).dispatchEvent(s),s}listen(e,t,r){e=e||this;let s=this.__boundListeners||(this.__boundListeners=new WeakMap),i=s.get(e);i||(i={},s.set(e,i));let n=t+r;i[n]||(i[n]=this._addMethodEventListenerToNode(e,t,r,this))}unlisten(e,t,r){e=e||this;let s=this.__boundListeners&&this.__boundListeners.get(e),i=t+r,n=s&&s[i];n&&(this._removeEventListenerFromNode(e,t,n),s[i]=null)}setScrollDirection(e,t){o(t||this,m[e]||"auto")}$$(e){return this.root.querySelector(e)}get domHost(){let e=d(this).getRootNode();return e instanceof DocumentFragment?e.host:e}distributeContent(){const e=i(this);window.ShadyDOM&&e.shadowRoot&&ShadyDOM.flush()}getEffectiveChildNodes(){return i(this).getEffectiveChildNodes()}queryDistributedElements(e){return i(this).queryDistributedElements(e)}getEffectiveChildren(){return this.getEffectiveChildNodes().filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}getEffectiveTextContent(){let e=this.getEffectiveChildNodes(),t=[];for(let r,s=0;r=e[s];s++)r.nodeType!==Node.COMMENT_NODE&&t.push(r.textContent);return t.join("")}queryEffectiveChildren(e){let t=this.queryDistributedElements(e);return t&&t[0]}queryAllEffectiveChildren(e){return this.queryDistributedElements(e)}getContentChildNodes(e){let t=this.root.querySelector(e||"slot");return t?i(t).getDistributedNodes():[]}getContentChildren(e){return this.getContentChildNodes(e).filter((function(e){return e.nodeType===Node.ELEMENT_NODE}))}isLightDescendant(e){return this!==e&&d(this).contains(e)&&d(this).getRootNode()===d(e).getRootNode()}isLocalDescendant(e){return this.root===d(e).getRootNode()}scopeSubtree(e,t=!1){return h(e,t)}getComputedStyleValue(e){return b.getComputedStyleValue(this,e)}debounce(e,t,r){return this._debouncers=this._debouncers||{},this._debouncers[e]=l.debounce(this._debouncers[e],r>0?u.after(r):a,t.bind(this))}isDebouncerActive(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];return!(!t||!t.isActive())}flushDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.flush()}cancelDebouncer(e){this._debouncers=this._debouncers||{};let t=this._debouncers[e];t&&t.cancel()}async(e,t){return t>0?u.run(e.bind(this),t):~a.run(e.bind(this))}cancelAsync(e){e<0?a.cancel(~e):u.cancel(e)}create(e,t){let r=document.createElement(e);if(t)if(r.setProperties)r.setProperties(t);else for(let e in t)r[e]=t[e];return r}elementMatches(e,t){return n(t||this,e)}toggleAttribute(e,t){let r=this;return 3===arguments.length&&(r=arguments[2]),1==arguments.length&&(t=!r.hasAttribute(e)),t?(d(r).setAttribute(e,""),!0):(d(r).removeAttribute(e),!1)}toggleClass(e,t,r){r=r||this,1==arguments.length&&(t=!r.classList.contains(e)),t?r.classList.add(e):r.classList.remove(e)}transform(e,t){(t=t||this).style.webkitTransform=e,t.style.transform=e}translate3d(e,t,r,s){s=s||this,this.transform("translate3d("+e+","+t+","+r+")",s)}arrayDelete(e,t){let r;if(Array.isArray(e)){if(r=e.indexOf(t),r>=0)return e.splice(r,1)}else{if(r=c(this,e).indexOf(t),r>=0)return this.splice(e,r,1)}return null}_logger(e,t){switch(Array.isArray(t)&&1===t.length&&Array.isArray(t[0])&&(t=t[0]),e){case"log":case"warn":case"error":console[e](...t)}}_log(...e){this._logger("log",e)}_warn(...e){this._logger("warn",e)}_error(...e){this._logger("error",e)}_logf(e,...t){return["[%s::%s]",this.is,e,...t]}}return LegacyElement.prototype.is="",LegacyElement});