const i=new WeakMap;class t{constructor(e,s){this.startPaused=!1,this.disabled=!1,this.clients=new Set,this.pendingComplete=!1,this.host=e,this.defaultOptions=s.defaultOptions||{},this.startPaused=!!s.startPaused,this.disabled=!!s.disabled,this.onComplete=s.onComplete,i.set(this.host,this)}async add(i){var e,s;this.clients.add(i),this.startPaused&&(null===(e=i.webAnimation)||void 0===e||e.pause()),this.pendingComplete=!0,await i.finished,this.pendingComplete&&!this.isAnimating&&(this.pendingComplete=!1,null===(s=this.onComplete)||void 0===s||s.call(this))}remove(i){this.clients.delete(i)}pause(){this.clients.forEach((i=>{var e;return null===(e=i.webAnimation)||void 0===e?void 0:e.pause()}))}play(){this.clients.forEach((i=>{var e;return null===(e=i.webAnimation)||void 0===e?void 0:e.play()}))}cancel(){this.clients.forEach((i=>{var e;return null===(e=i.webAnimation)||void 0===e?void 0:e.cancel()})),this.clients.clear()}finish(){this.clients.forEach((i=>{var e;return null===(e=i.webAnimation)||void 0===e?void 0:e.finish()})),this.clients.clear()}togglePlay(){this.isPlaying?this.pause():this.play()}get isAnimating(){return this.clients.size>0}get isPlaying(){return Array.from(this.clients).some((i=>{var e;return"running"===(null===(e=i.webAnimation)||void 0===e?void 0:e.playState)}))}async finished(){await Promise.all(Array.from(this.clients).map((i=>i.finished)))}}export{t as AnimateController,i as controllerMap};