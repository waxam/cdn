import{Polymer}from"../../../@polymer/polymer/polymer-legacy.js";Polymer({is:"device-location",properties:{lat:{type:Number,value:0,reflectToAttribute:!1},lon:{type:Number,value:0,reflectToAttribute:!1},centered:{type:Boolean,reflectToAttribute:!0}},observers:["_toggleCentered(centered)"],_toggleCentered:function(centered){if(centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}else{this._deleteWatch()}},detached:function(){this._deleteWatch()},attached:function(){this._deleteWatch();this._createWatch();if(this.parentNode.controls){this._map=this.parentNode._map}},ready:function(){if(this.centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}},_deleteWatch:function(){if(this._watchID){navigator.geolocation.clearWatch(this._watchID);delete this._watchID}},_createWatch:function(){if(this.centered){var self=this;this._watchID=navigator.geolocation.watchPosition(function(position){self.lat=position.coords.latitude;self.lon=position.coords.longitude;if(self.parentNode.zoomTo&&self.parentNode._map){self.parentNode.zoomTo(self.lat,self.lon,self.parentNode.zoom+1)}},null,{enableHighAccuracy:!0,timeout:5e3,maximumAge:0})}}});