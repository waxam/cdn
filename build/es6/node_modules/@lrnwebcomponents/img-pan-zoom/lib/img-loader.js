import{LitElement as e,html as t}from"../../../lit-element/lit-element.js";class ImgLoader extends e{render(){return t`
      <img
        loading="lazy"
        id="img"
        hidden=""
        src="${this.src}"
        aria-describedby="${this.describedBy||""}"
      />
    `}static get tag(){return"img-loader"}static get properties(){return{src:{type:String},loaded:{type:Boolean},loading:{type:Boolean},describedBy:{type:String,attribute:"described-by"},error:{type:Boolean}}}constructor(){super(),this.loaded=!1,this.error=!1,this.loading=!1}updated(e){e.forEach((e,t)=>{"src"==t&&this._srcChanged(this[t],e),["error","loaded","loading"].includes(t)&&this.dispatchEvent(new CustomEvent(`${t}-changed`,{detail:{value:this[t]}}))})}firstUpdated(){var e=this.shadowRoot.querySelector("#img");e.onload=()=>{this.loading=!1,this.loaded=!0,this.error=!1},e.onerror=()=>{this._reset(),this.loading=!1,this.loaded=!1,this.error=!0},this._resolvedSrc=""}_srcChanged(e,t){this._resolvedSrc=e,this._reset(),this._load(e)}_load(e){e?this.shadowRoot.querySelector("#img").src=e:this.shadowRoot.querySelector("#img").removeAttribute("src"),this.loading=!!e,this.loaded=!1,this.error=!1}_reset(){this.shadowRoot.querySelector("#img").removeAttribute("src"),this.loading=!1,this.loaded=!1,this.error=!1}}window.customElements.define(ImgLoader.tag,ImgLoader);export{ImgLoader};