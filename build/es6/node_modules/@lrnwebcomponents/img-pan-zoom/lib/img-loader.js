import{LitElement,html}from"../../../lit-element/lit-element.js";class ImgLoader extends LitElement{render(){return html`
      <img loading="lazy" id="img" hidden="" src="${this.src}" />
    `}static get tag(){return"img-loader"}static get properties(){return{src:{type:String},loaded:{type:Boolean},loading:{type:Boolean},error:{type:Boolean}}}constructor(){super(),this.loaded=!1,this.error=!1,this.loading=!1}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"src"==propName&&this._srcChanged(this[propName],oldValue),["error","loaded","loading"].includes(propName)&&this.dispatchEvent(new CustomEvent(`${propName}-changed`,{detail:{value:this[propName]}}))})}firstUpdated(){var img=this.shadowRoot.querySelector("#img");img.onload=()=>{this.loading=!1,this.loaded=!0,this.error=!1},img.onerror=()=>{this._reset(),this.loading=!1,this.loaded=!1,this.error=!0},this._resolvedSrc=""}_srcChanged(newSrc,oldSrc){this._resolvedSrc=newSrc,this._reset(),this._load(newSrc)}_load(src){src?this.shadowRoot.querySelector("#img").src=src:this.shadowRoot.querySelector("#img").removeAttribute("src"),this.loading=!!src,this.loaded=!1,this.error=!1}_reset(){this.shadowRoot.querySelector("#img").removeAttribute("src"),this.loading=!1,this.loaded=!1,this.error=!1}}window.customElements.define(ImgLoader.tag,ImgLoader);export{ImgLoader};