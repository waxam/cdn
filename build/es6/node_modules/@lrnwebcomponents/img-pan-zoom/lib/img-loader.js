import{html,PolymerElement}from"../../../@polymer/polymer/polymer-element.js";class ImgLoader extends PolymerElement{static get template(){return html`
      <img id="img" hidden="" src="[[src]]" />
    `}static get tag(){return"img-loader"}static get properties(){return{src:{observer:"_srcChanged",type:String},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1}}}ready(){super.ready();var img=this.$.img;img.onload=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))}.bind(this),img.onerror=function(){this.$.img.src===this._resolveSrc(this.src)&&(this._reset(),this._setLoading(!1),this._setLoaded(!1),this._setError(!0))}.bind(this),this._resolvedSrc=""}_srcChanged(newSrc,oldSrc){var newResolvedSrc=this._resolveSrc(newSrc);newResolvedSrc!==this._resolvedSrc&&(this._resolvedSrc=newResolvedSrc,this._reset(),this._load(newSrc))}_load(src){src?this.$.img.src=src:this.$.img.removeAttribute("src"),this._setLoading(!!src),this._setLoaded(!1),this._setError(!1)}_reset(){this.$.img.removeAttribute("src"),this._setLoading(!1),this._setLoaded(!1),this._setError(!1)}_resolveSrc(testSrc){var baseURI=this.ownerDocument.baseURI;return new URL(this.resolveUrl(testSrc,baseURI),baseURI).href}}window.customElements.define(ImgLoader.tag,ImgLoader);export{ImgLoader};