/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
export class ESGlobalBridge{constructor(){this.load=(name,location,webpack=!1)=>{let imported=window.ESGlobalBridge.imports&&window.ESGlobalBridge.imports[name];if(!(!webpack&&window.ESGlobalBridge.webpack&&window.ESGlobalBridge.webpack[name])&&!imported)return new Promise((resolve,reject)=>{const script=document.createElement("script");script.src=location,script.setAttribute("data-name",name),window.ESGlobalBridge.imports[name]=location,script.onload=()=>{resolve(window.ESGlobalBridge.imports[name]),window.ESGlobalBridge.imports[name]=!0,setTimeout(()=>{const evt=new CustomEvent(`es-bridge-${name}-loaded`,{bubbles:!0,cancelable:!0,detail:{name,location}});document.dispatchEvent(evt)},100)},script.onerror=()=>{reject(new Error(`Failed to load ${name} script with location ${location}.`)),delete window.ESGlobalBridge.imports[name],window.ESGlobalBridge.imports[name]=!1},document.documentElement.appendChild(script)})}}}window.ESGlobalBridge=window.ESGlobalBridge||{},window.ESGlobalBridge.imports=window.ESGlobalBridge.imports||{},window.ESGlobalBridge.requestAvailability=()=>{window.ESGlobalBridge.instance||(window.ESGlobalBridge.instance=new ESGlobalBridge)};