import{html,PolymerElement}from"../../../@polymer/polymer/polymer-element.js";import"../../../@polymer/iron-flex-layout/iron-flex-layout-classes.js";import{AppLocalizeBehavior}from"../../../@polymer/app-localize-behavior/app-localize-behavior.js";import{mixinBehaviors}from"../../../@polymer/polymer/lib/legacy/class.js";import"../../../@polymer/paper-input/paper-input.js";import"../../../@polymer/paper-styles/typography.js";class EcoJsonSchemaInput extends(mixinBehaviors([AppLocalizeBehavior],PolymerElement)){static get tag(){return"eco-json-schema-input"}static get template(){return html`
      <custom-style>
        <style is="custom-style" include="iron-flex iron-flex-alignment">
          :host ([hidden]) {
            display: none;
          }
        </style>
      </custom-style>
      <paper-input
        id="input"
        class="flex"
        value="{{value}}"
        auto-validate
      ></paper-input>
    `}static get properties(){return{language:{value:"en"},resources:{value:()=>({})},schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:()=>""},error:{type:String,observer:"_errorChanged",value:null}}}_schemaChanged(){var schema=this.schema,inputEl=this.$.input;schema.required&&(inputEl.required=!0),this._isSchemaNumber(schema.type)&&(inputEl.type="number",schema.multipleOf&&(inputEl.step=schema.multipleOf),isNaN(schema.maximum)||(schema.exclusiveMaximum?inputEl.max=schema.maximum-(schema.multipleOf||1):inputEl.max=schema.maximum),isNaN(schema.minimum)||(schema.exclusiveMinimum?inputEl.min=schema.minimum+(schema.multipleOf||1):inputEl.min=schema.minimum)),this._isSchemaString(schema.type)&&("date-time"===schema.format?(inputEl.type="datetime-local",inputEl.alwaysFloatLabel=!0):"date"===schema.format?inputEl.type="date":"email"===schema.format?inputEl.type="email":"hostname"===schema.format?inputEl.type="text":"ipv4"===schema.format?inputEl.type="text":"ipv6"===schema.format?inputEl.type="text":"uri"===schema.format?inputEl.type="url":inputEl.type="text",schema.maxLength&&(inputEl.maxlength=schema.maxLength),schema.minLength&&(inputEl.minlength=schema.minLength),schema.pattern&&(inputEl.pattern=schema.pattern)),schema.component&&schema.component.properties&&Object.keys(schema.component.properties).forEach(function(prop){inputEl[prop]=schema.component.properties[prop]}),inputEl.alwaysFloatLabel=!0,schema.title&&(inputEl.label=schema.title)}_errorChanged(){this.error?(this.$.input.errorMessage=this.error,this.$.input.invalid=!0):(this.$.input.invalid=!1,this.$.input.errorMessage=null)}_isSchemaValue(type){return this._isSchemaBoolean(type)||this._isSchemaNumber(type)||this._isSchemaString(type)}_isSchemaBoolean(type){return Array.isArray(type)?-1!==type.indexOf("boolean"):"boolean"===type}_isSchemaNumber(type){return Array.isArray(type)?-1!==type.indexOf("number")||-1!==type.indexOf("integer"):"number"===type||"integer"===type}_isSchemaString(type){return Array.isArray(type)?-1!==type.indexOf("string"):"string"===type}_isSchemaObject(type){return"object"===type}_isSchemaArray(type){return"array"===type}}window.customElements.define(EcoJsonSchemaInput.tag,EcoJsonSchemaInput);export{EcoJsonSchemaInput};