import{html,Polymer}from"@polymer/polymer/polymer-legacy.js";import"@polymer/iron-flex-layout/iron-flex-layout-classes.js";import{AppLocalizeBehavior}from"@polymer/app-localize-behavior/app-localize-behavior.js";import"@polymer/paper-input/paper-input.js";import"@polymer/paper-styles/typography.js";Polymer({is:"eco-json-schema-input",_template:html`
    <custom-style>
      <style is="custom-style" include="iron-flex iron-flex-alignment">
        paper-input {
          padding: 2px;
          --paper-input-container-label: {
            white-space: normal;
            position: static;
            font-size: 16px;
            color: #212121;
          }
          --paper-input-container: {
            width: 100%;
          }
          --paper-input-container-input: {
            width: 100% !important;
            background-color: transparent !important;
            border: none !important;
          }
          --paper-input-container-shared-input-style: {
            width: 100% !important;
            background-color: transparent !important;
            border: none !important;
          }
        }
      </style>
    </custom-style>
    <paper-input
      id="input"
      class="flex"
      value="{{value}}"
      auto-validate
    ></paper-input>
  `,behaviors:[AppLocalizeBehavior],properties:{language:{value:"en"},resources:{value:function(){return{}}},schema:{type:Object,observer:"_schemaChanged"},value:{type:String,notify:!0,value:function(){return""}},error:{type:String,observer:"_errorChanged",value:null}},ready:function(){},detached:function(){},_schemaChanged:function(){var a=this.schema,b=this.$.input;a.required&&(b.required=!0),this._isSchemaNumber(a.type)&&(b.type="number",a.multipleOf&&(b.step=a.multipleOf),!isNaN(a.maximum)&&(a.exclusiveMaximum?b.max=a.maximum-(a.multipleOf||1):b.max=a.maximum),!isNaN(a.minimum)&&(a.exclusiveMinimum?b.min=a.minimum+(a.multipleOf||1):b.min=a.minimum)),this._isSchemaString(a.type)&&("date-time"===a.format?(b.type="datetime-local",b.alwaysFloatLabel=!0):"date"===a.format?b.type="date":"email"===a.format?b.type="email":"hostname"===a.format?b.type="text":"ipv4"===a.format?b.type="text":"ipv6"===a.format?b.type="text":"uri"===a.format?b.type="url":b.type="text",a.maxLength&&(b.maxlength=a.maxLength),a.minLength&&(b.minlength=a.minLength),a.pattern&&(b.pattern=a.pattern)),a.component&&a.component.properties&&Object.keys(a.component.properties).forEach(function(c){b[c]=a.component.properties[c]}),b.alwaysFloatLabel=!0,a.title&&(b.label=a.title)},_errorChanged:function(){this.error?(this.$.input.errorMessage=this.error,this.$.input.invalid=!0):(this.$.input.invalid=!1,this.$.input.errorMessage=null)},_isSchemaValue:function(a){return this._isSchemaBoolean(a)||this._isSchemaNumber(a)||this._isSchemaString(a)},_isSchemaBoolean:function(a){return Array.isArray(a)?-1!==a.indexOf("boolean"):"boolean"===a},_isSchemaNumber:function(a){return Array.isArray(a)?-1!==a.indexOf("number")||-1!==a.indexOf("integer"):"number"===a||"integer"===a},_isSchemaString:function(a){return Array.isArray(a)?-1!==a.indexOf("string"):"string"===a},_isSchemaObject:function(a){return"object"===a},_isSchemaArray:function(a){return"array"===a}});