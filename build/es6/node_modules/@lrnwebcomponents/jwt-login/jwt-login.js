import{LitElement,html,css}from"../../lit-element/lit-element.js";import"../../@polymer/iron-ajax/iron-ajax.js";class JwtLogin extends LitElement{static get styles(){return[css`
      <style>
        :host {
          display: none;
        }
      </style>
      `]}constructor(){super(),this.auto=!1,this.method="GET",this.body={},this.key="jwt",this.jwt=null}render(){return html`
      <iron-ajax
        ?auto="${this.auto}"
        id="loginrequest"
        method="${this.method}"
        url="${this.url}"
        handle-as="json"
        content-type="application/json"
        @response="${this.loginResponse}"
      >
      </iron-ajax>
    `}static get tag(){return"jwt-login"}static get properties(){return{auto:{type:Boolean},url:{type:String},method:{type:String},body:{type:Object},key:{type:String},jwt:{type:String}}}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"jwt"==propName&&(this._jwtChanged(this[propName],oldValue),this.dispatchEvent(new CustomEvent("jwt-changed",{detail:{value:this[propName]}})))})}_jwtChanged(newValue,oldValue){null!=newValue&&""!=newValue&&"null"!=newValue||void 0===oldValue?newValue&&(localStorage.setItem(this.key,newValue),this.dispatchEvent(new CustomEvent("jwt-token",{bubbles:!0,cancelable:!0,composed:!0,detail:newValue})),this.dispatchEvent(new CustomEvent("jwt-logged-in",{bubbles:!0,cancelable:!0,composed:!0,detail:!0}))):(localStorage.removeItem(this.key),this.dispatchEvent(new CustomEvent("jwt-logged-in",{bubbles:!0,cancelable:!0,composed:!0,detail:!1})))}firstUpdated(changedProperties){this.jwt=localStorage.getItem(this.key)}toggleLogin(){null==this.jwt?(this.shadowRoot.querySelector("#loginrequest").body={...this.body},this.shadowRoot.querySelector("#loginrequest").generateRequest()):(this.body={},this.jwt=null)}loginResponse(e){this.jwt=e.detail.response}}window.customElements.define(JwtLogin.tag,JwtLogin);export{JwtLogin};