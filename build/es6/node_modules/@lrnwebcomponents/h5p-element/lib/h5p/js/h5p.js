var e=window.H5P=window.H5P||{};e.isFramed=window.self!==window.parent,e.$window=e.jQuery(window),e.instances=[],document.documentElement.requestFullScreen?e.fullScreenBrowserPrefix="":document.documentElement.webkitRequestFullScreen?(e.safariBrowser=navigator.userAgent.match(/version\/([.\d]+)/i),e.safariBrowser=null===e.safariBrowser?0:parseInt(e.safariBrowser[1]),(0===e.safariBrowser||e.safariBrowser>6)&&(e.fullScreenBrowserPrefix="webkit")):document.documentElement.mozRequestFullScreen?e.fullScreenBrowserPrefix="moz":document.documentElement.msRequestFullscreen&&(e.fullScreenBrowserPrefix="ms"),e.opened={},e.init=function(t){void 0===e.$body&&(e.$body=e.jQuery(document.body)),void 0===e.fullscreenSupported&&(e.fullscreenSupported=!(H5PIntegration.fullscreenDisabled||e.fullscreenDisabled||e.isFramed&&!1!==e.externalEmbed&&!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled))),void 0===e.canHasFullScreen&&(e.canHasFullScreen=e.fullscreenSupported),e.jQuery(".h5p-content:not(.h5p-initialized)",t).each((function(){var t=e.jQuery(this).addClass("h5p-initialized"),n=e.jQuery('<div class="h5p-container"></div>').appendTo(t),i=t.data("content-id"),r=H5PIntegration.contents["cid-"+i];if(void 0===r)return e.error("No data for content id "+i+". Perhaps the library is gone?");var o={library:r.library,params:JSON.parse(r.jsonContent),metadata:r.metadata};e.getUserData(i,"state",(function(t,s){if(s)o.userDatas={state:s};else if(null===s&&H5PIntegration.saveFreq){delete r.contentUserData;var c=new e.Dialog("content-user-data-reset","Data Reset","<p>"+e.t("contentChanged")+"</p><p>"+e.t("startingOver")+'</p><div class="h5p-dialog-ok-button" tabIndex="0" role="button">OK</div>',n);e.jQuery(c).on("dialog-opened",(function(t,n){var closeDialog=function(t){"click"!==t.type&&32!==t.which||(c.close(),e.deleteUserData(i,"state",0))};n.find(".h5p-dialog-ok-button").click(closeDialog).keypress(closeDialog),e.trigger(a,"resize")})).on("dialog-closed",(function(){e.trigger(a,"resize")})),c.open()}}));var a=e.newRunnable(o,i,n,!0,{standalone:!0});1==r.fullScreen&&e.fullscreenSupported&&e.jQuery('<div class="h5p-content-controls"><div role="button" tabindex="0" class="h5p-enable-fullscreen" aria-label="'+e.t("fullscreen")+'" title="'+e.t("fullscreen")+'"></div></div>').prependTo(n).children().click((function(){e.fullScreen(n,a)})).keydown((function(t){if(32===t.which||13===t.which)return e.fullScreen(n,a),!1}));var s,c=r.displayOptions,l=!1;if(c.frame){if(c.copyright){var d=e.getCopyrights(a,o.params,i,o.metadata);d||(c.copyright=!1)}var u=new e.ActionBar(c),f=u.getDOMElement();u.on("reuse",(function(){e.openReuseDialog(f,r,o,a,i),a.triggerXAPI("accessed-reuse")})),u.on("copyrights",(function(){new e.Dialog("copyrights",e.t("copyrightInformation"),d,n).open(!0),a.triggerXAPI("accessed-copyright")})),u.on("embed",(function(){e.openEmbedDialog(f,r.embedCode,r.resizeCode,{width:t.width(),height:t.height()},a),a.triggerXAPI("accessed-embed")})),u.hasActions()&&(l=!0,f.insertAfter(n))}if(t.addClass(l?"h5p-frame":"h5p-no-frame"),e.opened[i]=new Date,e.on(a,"finish",(function(t){void 0!==t.data&&e.setFinished(i,t.data.score,t.data.maxScore,t.data.time)})),e.on(a,"xAPI",e.xAPICompletedListener),!1!==H5PIntegration.saveFreq&&(a.getCurrentState instanceof Function||"function"==typeof a.getCurrentState)){var h,save=function(){var t=a.getCurrentState();void 0!==t&&e.setUserData(i,"state",t,{deleteOnChange:!0}),H5PIntegration.saveFreq&&(h=setTimeout(save,1e3*H5PIntegration.saveFreq))};H5PIntegration.saveFreq&&(h=setTimeout(save,1e3*H5PIntegration.saveFreq)),e.on(a,"xAPI",(function(e){var t=e.getVerb();"completed"!==t&&"progressed"!==t||(clearTimeout(h),h=setTimeout(save,3e3))}))}if(e.isFramed)if(!1===e.externalEmbed){var p=window.frameElement;e.on(a,"resize",(function(){clearTimeout(s),s=setTimeout((function(){!function(){if(!window.parent.H5P.isFullscreen){var e=p.parentElement.style.height;p.parentElement.style.height=p.parentElement.clientHeight+"px",p.getBoundingClientRect(),p.style.height="1px",p.style.height=p.contentDocument.body.scrollHeight+"px",p.parentElement.style.height=e}}()}),1)}))}else if(e.communicator){var g=!1;e.communicator.on("ready",(function(){e.communicator.send("hello")})),e.communicator.on("hello",(function(){g=!0,document.body.style.height="auto",document.body.style.overflow="hidden",e.trigger(a,"resize")})),e.communicator.on("resizePrepared",(function(){e.communicator.send("resize",{scrollHeight:document.body.scrollHeight})})),e.communicator.on("resize",(function(){e.trigger(a,"resize")})),e.on(a,"resize",(function(){e.isFullscreen||(clearTimeout(s),s=setTimeout((function(){g?e.communicator.send("prepareResize",{scrollHeight:document.body.scrollHeight,clientHeight:document.body.clientHeight}):e.communicator.send("hello")}),0))}))}e.isFramed&&!1!==e.externalEmbed||e.jQuery(window.parent).resize((function(){window.parent.H5P.isFullscreen,e.trigger(a,"resize")})),e.instances.push(a),e.trigger(a,"resize")})),e.jQuery("iframe.h5p-iframe:not(.h5p-initialized)",t).each((function(){var t=e.jQuery(this).addClass("h5p-initialized").data("content-id");this.contentDocument.open(),this.contentDocument.write('<!doctype html><html class="h5p-iframe"><head>'+e.getHeadTags(t)+'</head><body><div class="h5p-content" data-content-id="'+t+'"/></body></html>'),this.contentDocument.close()}))},e.getHeadTags=function(e){var createStyleTags=function(e){for(var t="",n=0;n<e.length;n++)t+='<link rel="stylesheet" href="'+e[n]+'">';return t},createScriptTags=function(e){for(var t="",n=0;n<e.length;n++)t+='<script src="'+e[n]+'"><\/script>';return t};return'<base target="_parent">'+createStyleTags(H5PIntegration.core.styles)+createStyleTags(H5PIntegration.contents["cid-"+e].styles)+createScriptTags(H5PIntegration.core.scripts)+createScriptTags(H5PIntegration.contents["cid-"+e].scripts)+"<script>H5PIntegration = window.parent.H5PIntegration; var H5P = H5P || {}; H5P.externalEmbed = false;<\/script>"},e.communicator=window.postMessage&&window.addEventListener?new function Communicator(){var e={};window.addEventListener("message",(function receiveMessage(t){window.parent===t.source&&"h5p"===t.data.context&&void 0!==e[t.data.action]&&e[t.data.action](t.data)}),!1),this.on=function(t,n){e[t]=n},this.send=function(e,t){void 0===t&&(t={}),t.context="h5p",t.action=e,window.parent.postMessage(t,"*")}}:void 0,e.semiFullScreen=function(t,n,i,r){e.fullScreen(t,n,i,r,!0)},e.fullScreen=function(t,n,i,r,o){if(void 0===e.exitFullScreen){if(e.isFramed&&!1===e.externalEmbed)return window.parent.H5P.fullScreen(t,n,i,e.$body.get(),o),e.isFullscreen=!0,e.exitFullScreen=function(){window.parent.H5P.exitFullScreen()},void e.on(n,"exitFullScreen",(function(){e.isFullscreen=!1,e.exitFullScreen=void 0}));var a,s,c,l=t;if(void 0===r)c=e.$body;else{c=e.jQuery(r),a=c.add(t.get());var d="#h5p-iframe-"+t.parent().data("content-id");t=(s=e.jQuery(d)).parent()}a=t.add(e.$body).add(a);var before=function(e){a.addClass(e),void 0!==s&&s.css("height","")},entered=function(){e.trigger(n,"resize"),e.trigger(n,"focus"),e.trigger(n,"enterFullScreen")},done=function(t){e.isFullscreen=!1,a.removeClass(t),e.trigger(n,"resize"),e.trigger(n,"focus"),e.exitFullScreen=void 0,void 0!==i&&i(),e.trigger(n,"exitFullScreen")};if(e.isFullscreen=!0,void 0===e.fullScreenBrowserPrefix||!0===o){if(e.isFramed)return;before("h5p-semi-fullscreen");var u,f,h,p=e.jQuery('<div role="button" tabindex="0" class="h5p-disable-fullscreen" title="'+e.t("disableFullscreen")+'" aria-label="'+e.t("disableFullscreen")+'"></div>').appendTo(l.find(".h5p-content-controls")),g=e.exitFullScreen=function(){f?h.content=f:b.removeChild(h),p.remove(),c.unbind("keyup",u),done("h5p-semi-fullscreen")};u=function(e){27===e.keyCode&&g()},p.click(g),c.keyup(u);for(var v=document.getElementsByTagName("meta"),m=0;m<v.length;m++)if("viewport"===v[m].name){h=v[m],f=h.content;break}if(f||((h=document.createElement("meta")).name="viewport"),h.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0",!f){var b=document.getElementsByTagName("head")[0];b.appendChild(h)}entered()}else{before("h5p-fullscreen");var y,w="ms"===e.fullScreenBrowserPrefix?"MSFullscreenChange":e.fullScreenBrowserPrefix+"fullscreenchange";if(document.addEventListener(w,(function(){if(void 0===y)return y=!1,void entered();done("h5p-fullscreen"),document.removeEventListener(w,arguments.callee,!1)})),""===e.fullScreenBrowserPrefix)t[0].requestFullScreen();else{var C="ms"===e.fullScreenBrowserPrefix?"msRequestFullscreen":e.fullScreenBrowserPrefix+"RequestFullScreen",P="webkit"===e.fullScreenBrowserPrefix&&0===e.safariBrowser?Element.ALLOW_KEYBOARD_INPUT:void 0;t[0][C](P)}e.exitFullScreen=function(){""===e.fullScreenBrowserPrefix?document.exitFullscreen():"moz"===e.fullScreenBrowserPrefix?document.mozCancelFullScreen():document[e.fullScreenBrowserPrefix+"ExitFullscreen"]()}}}},e.getPath=function(e,t){var n,hasProtocol=function(e){return e.match(/^[a-z0-9]+:\/\//i)};if(hasProtocol(e))return e;var i="#tmp"===e.substr(-4,4);if(void 0===t||i){if(void 0===window.H5PEditor)return;n=H5PEditor.filesPath}else void 0!==H5PIntegration.contents&&H5PIntegration.contents["cid-"+t]&&(n=H5PIntegration.contents["cid-"+t].contentUrl),n||(n=H5PIntegration.url+"/content/"+t);return hasProtocol(n)||(n=window.location.protocol+"//"+window.location.host+n),n+"/"+e},e.getContentPath=function(e){return H5PIntegration.url+"/content/"+e},e.classFromName=function(e){var t=e.split(".");return this[t[t.length-1]]},e.newRunnable=function(t,n,i,r,o){var a,s,c,l;try{c=(a=t.library.split(" ",2))[0],s=a[1].split(".",2)}catch(n){return e.error("Invalid library string: "+t.library)}if(t.params instanceof Object!=!0||t.params instanceof Array==!0)return e.error("Invalid library params for: "+t.library),e.error(t.params);try{a=a[0].split("."),l=window;for(var d=0;d<a.length;d++)l=l[a[d]];if("function"!=typeof l)throw null}catch(n){return e.error("Unable to find constructor for: "+t.library)}void 0===o&&(o={}),t.subContentId&&(o.subContentId=t.subContentId),t.userDatas&&t.userDatas.state&&H5PIntegration.saveFreq&&(o.previousState=t.userDatas.state),t.metadata&&(o.metadata=t.metadata);var u,f=o.standalone||!1;return l.prototype=e.jQuery.extend({},e.ContentType(f).prototype,l.prototype),void 0===(u=e.jQuery.inArray(t.library,["H5P.CoursePresentation 1.0","H5P.CoursePresentation 1.1","H5P.CoursePresentation 1.2","H5P.CoursePresentation 1.3"])>-1?new l(t.params,n):new l(t.params,n,o)).$&&(u.$=e.jQuery(u)),void 0===u.contentId&&(u.contentId=n),void 0===u.subContentId&&t.subContentId&&(u.subContentId=t.subContentId),void 0===u.parent&&o&&o.parent&&(u.parent=o.parent),void 0===u.libraryInfo&&(u.libraryInfo={versionedName:t.library,versionedNameNoSpaces:c+"-"+s[0]+"."+s[1],machineName:c,majorVersion:s[0],minorVersion:s[1]}),void 0!==i&&(i.toggleClass("h5p-standalone",f),u.attach(i),e.trigger(u,"domChanged",{$target:i,library:c,key:"newLibrary"},{bubbles:!0,external:!0}),void 0!==r&&r||e.trigger(u,"resize")),u},e.error=function(e){void 0!==window.console&&void 0!==console.error&&console.error(e.stack?e.stack:e)},e.t=function(e,t,n){if(void 0===n&&(n="H5P"),void 0===H5PIntegration.l10n[n])return'[Missing translation namespace "'+n+'"]';if(void 0===H5PIntegration.l10n[n][e])return'[Missing translation "'+e+'" in "'+n+'"]';var i=H5PIntegration.l10n[n][e];if(void 0!==t)for(var r in t)i=i.replace(r,t[r]);return i},e.Dialog=function(t,n,i,r){var o=this,a=e.jQuery('<div class="h5p-popup-dialog h5p-'+t+'-dialog">                              <div class="h5p-inner">                                <h2>'+n+'</h2>                                <div class="h5p-scroll-content">'+i+'</div>                                <div class="h5p-close" role="button" tabindex="0" aria-label="'+e.t("close")+'" title="'+e.t("close")+'"></div>                              </div>                            </div>').insertAfter(r).click((function(){o.close()})).children(".h5p-inner").click((function(){return!1})).find(".h5p-close").click((function(){o.close()})).end().find("a").click((function(e){e.stopPropagation()})).end().end();o.open=function(t){t&&a.css("height","100%"),setTimeout((function(){a.addClass("h5p-open"),e.jQuery(o).trigger("dialog-opened",[a])}),1)},o.close=function(){a.removeClass("h5p-open"),setTimeout((function(){a.remove(),e.jQuery(o).trigger("dialog-closed",[a])}),200)}},e.getCopyrights=function(t,n,i,r){var o;if(void 0!==t.getCopyrights)try{o=t.getCopyrights()}catch(e){}void 0===o&&(o=new e.ContentCopyrights,e.findCopyrights(o,n,i));var a=e.buildMetadataCopyrights(r,t.libraryInfo.machineName);return void 0!==a&&o.addMediaInFront(a),void 0!==o&&(o=o.toString()),o},e.findCopyrights=function(t,n,i,r){var o;for(var a in r&&(r.params=n,buildFromMetadata(r,r.machineName,i)),n)if(n.hasOwnProperty(a))if("overrideSettings"!==a){var s=n[a];if(s&&s.library&&"string"==typeof s.library?o=s.library.split(" ")[0]:s&&s.library&&"object"==typeof s.library&&(o=s.library.library&&"string"==typeof s.library.library?s.library.library.split(" ")[0]:o),s instanceof Array)e.findCopyrights(t,s,i);else if(s instanceof Object)if(buildFromMetadata(s,o,i),void 0===s.copyright||void 0===s.copyright.license||void 0===s.path||void 0===s.mime)e.findCopyrights(t,s,i);else{var c=new e.MediaCopyright(s.copyright);void 0!==s.width&&void 0!==s.height&&c.setThumbnail(new e.Thumbnail(e.getPath(s.path,i),s.width,s.height)),t.addMedia(c)}}else console.warn("The semantics field 'overrideSettings' is DEPRECATED and should not be used."),console.warn(n);function buildFromMetadata(n,i,r){if(n.metadata){const o=e.buildMetadataCopyrights(n.metadata,i);if(void 0!==o){if(n.params&&"Image"===n.params.contentName&&n.params.file){const t=n.params.file.path,i=n.params.file.width,a=n.params.file.height;o.setThumbnail(new e.Thumbnail(e.getPath(t,r),i,a))}t.addMedia(o)}}}},e.buildMetadataCopyrights=function(t){if(t&&void 0!==t.license&&"U"!==t.license){var n={contentType:t.contentType,title:t.title,author:t.authors&&t.authors.length>0?t.authors.map((function(e){return e.role?e.name+" ("+e.role+")":e.name})).join(", "):void 0,source:t.source,year:t.yearFrom?t.yearFrom+(t.yearTo?"-"+t.yearTo:""):void 0,license:t.license,version:t.licenseVersion,licenseExtras:t.licenseExtras,changes:t.changes&&t.changes.length>0?t.changes.map((function(e){return e.log+(e.author?", "+e.author:"")+(e.date?", "+e.date:"")})).join(" / "):void 0};return new e.MediaCopyright(n)}},e.openReuseDialog=function(t,n,i,r,o){let a="";n.displayOptions.export&&(a+='<button type="button" class="h5p-big-button h5p-download-button"><div class="h5p-button-title">Download as an .h5p file</div><div class="h5p-button-description">.h5p files may be uploaded to any web-site where H5P content may be created.</div></button>'),n.displayOptions.export&&n.displayOptions.copy&&(a+='<div class="h5p-horizontal-line-text"><span>or</span></div>'),n.displayOptions.copy&&(a+='<button type="button" class="h5p-big-button h5p-copy-button"><div class="h5p-button-title">Copy content</div><div class="h5p-button-description">Copied content may be pasted anywhere this content type is supported on this website.</div></button>');const s=new e.Dialog("reuse",e.t("reuseContent"),a,t);e.jQuery(s).on("dialog-opened",(function(t,a){e.jQuery('<a href="https://h5p.org/node/442225" target="_blank">More Info</a>').click((function(e){e.stopPropagation()})).appendTo(a.find("h2")),a.find(".h5p-download-button").click((function(){window.location.href=n.exportUrl,r.triggerXAPI("downloaded"),s.close()})),a.find(".h5p-copy-button").click((function(){const t=new e.ClipboardItem(i);t.contentId=o,e.setClipboard(t),r.triggerXAPI("copied"),s.close(),e.attachToastTo(e.jQuery(".h5p-content:first")[0],e.t("contentCopied"),{position:{horizontal:"centered",vertical:"centered",noOverflowX:!0}})})),e.trigger(r,"resize")})).on("dialog-closed",(function(){e.trigger(r,"resize")})),s.open()},e.openEmbedDialog=function(t,n,i,r,o){var a=n+i,s=new e.Dialog("embed",e.t("embed"),'<textarea class="h5p-embed-code-container" autocorrect="off" autocapitalize="off" spellcheck="false"></textarea>'+e.t("size")+': <input type="text" value="'+Math.ceil(r.width)+'" class="h5p-embed-size"/> × <input type="text" value="'+Math.ceil(r.height)+'" class="h5p-embed-size"/> px<br/><div role="button" tabindex="0" class="h5p-expander">'+e.t("showAdvanced")+'</div><div class="h5p-expander-content"><p>'+e.t("advancedHelp")+'</p><textarea class="h5p-embed-code-container" autocorrect="off" autocapitalize="off" spellcheck="false">'+i+"</textarea></div>",t);e.jQuery(s).on("dialog-opened",(function(t,n){var i=n.find(".h5p-inner").find(".h5p-scroll-content"),s=(i.outerHeight(),i.innerHeight(),function(){e.trigger(o,"resize")}),c=n.find(".h5p-embed-size:eq(0)"),l=n.find(".h5p-embed-size:eq(1)"),getNum=function(e,t){var n=parseFloat(e.val());return isNaN(n)?t:Math.ceil(n)},updateEmbed=function(){n.find(".h5p-embed-code-container:first").val(a.replace(":w",getNum(c,r.width)).replace(":h",getNum(l,r.height)))};c.change(updateEmbed),l.change(updateEmbed),updateEmbed(),n.find(".h5p-embed-code-container").each((function(){e.jQuery(this).css("height",this.scrollHeight+"px").focus((function(){e.jQuery(this).select()}))})),n.find(".h5p-embed-code-container").eq(0).select(),s();var expand=function(){var t=e.jQuery(this),i=t.next();i.is(":visible")?(t.removeClass("h5p-open").text(e.t("showAdvanced")),i.hide()):(t.addClass("h5p-open").text(e.t("hideAdvanced")),i.show()),n.find(".h5p-embed-code-container").each((function(){e.jQuery(this).css("height",this.scrollHeight+"px")})),s()};n.find(".h5p-expander").click(expand).keypress((function(e){32===e.keyCode&&expand.apply(this)}))})).on("dialog-closed",(function(){e.trigger(o,"resize")})),s.open()},e.attachToastTo=function(e,t,n){if(void 0===e||void 0===t)return;const clickHandler=function(t){-1===function(e){var t=e.composedPath&&e.composedPath()||e.path,n=e.target;return null!=t?t.indexOf(window)<0?t.concat(window):t:n===window?[window]:[n].concat(function getParents(e,t){t=t||[];var n=e.parentNode;return n?getParents(n,t.concat(n)):t}(n),window)}(t).indexOf(e)&&(clearTimeout(a),removeToast())},removeToast=function(){document.removeEventListener("click",clickHandler),i.parentNode&&i.parentNode.removeChild(i)};(n=n||{}).style=n.style||"h5p-toast",n.duration=n.duration||3e3;const i=document.createElement("div");i.setAttribute("id",n.style),i.classList.add("h5p-toast-disabled"),i.classList.add(n.style);const r=document.createElement("span");r.innerHTML=t,i.appendChild(r),document.body.appendChild(i);const o=function(e,t,n){(n=n||{}).offsetHorizontal=n.offsetHorizontal||0,n.offsetVertical=n.offsetVertical||0;const i=t.getBoundingClientRect(),r=e.getBoundingClientRect();let o=0,a=0;switch(n.horizontal){case"before":o=r.left-i.width-n.offsetHorizontal;break;case"after":o=r.left+r.width+n.offsetHorizontal;break;case"left":o=r.left+n.offsetHorizontal;break;case"right":o=r.left+r.width-i.width-n.offsetHorizontal;break;default:o=r.left+r.width/2-i.width/2+n.offsetHorizontal}switch(n.vertical){case"above":a=r.top-i.height-n.offsetVertical;break;case"below":default:a=r.top+r.height+n.offsetVertical;break;case"top":a=r.top+n.offsetVertical;break;case"bottom":a=r.top+r.height-i.height-n.offsetVertical;break;case"centered":a=r.top+r.height/2-i.height/2+n.offsetVertical}const s=document.body.getBoundingClientRect();return(n.noOverflowLeft||n.noOverflowX)&&o<s.x&&(o=s.x),(n.noOverflowRight||n.noOverflowX)&&o+i.width>s.x+s.width&&(o=s.x+s.width-i.width),(n.noOverflowTop||n.noOverflowY)&&a<s.y&&(a=s.y),(n.noOverflowBottom||n.noOverflowY)&&a+i.height>s.y+s.height&&(o=s.y+s.height-i.height),{left:o,top:a}}(e,i,n.position);i.style.left=Math.round(o.left)+"px",i.style.top=Math.round(o.top)+"px",i.classList.remove("h5p-toast-disabled");const a=setTimeout(removeToast,n.duration);document.addEventListener("click",clickHandler)},e.ContentCopyrights=function(){var e,t=[],n=[];this.setLabel=function(t){e=t},this.addMedia=function(e){void 0!==e&&t.push(e)},this.addMediaInFront=function(e){void 0!==e&&t.unshift(e)},this.addContent=function(e){void 0!==e&&n.push(e)},this.toString=function(){for(var i="",r=0;r<t.length;r++)i+=t[r];for(r=0;r<n.length;r++)i+=n[r];return""!==i&&(void 0!==e&&(i="<h3>"+e+"</h3>"+i),i='<div class="h5p-content-copyrights">'+i+"</div>"),i}},e.MediaCopyright=function(t,n,i,r){var o,a=new e.DefinitionList,getLabel=function(t){return void 0===n||void 0===n[t]?e.t(t):n[t]},humanizeLicense=function(t,n){var i,r,o=e.copyrightLicenses[t],a="";"PD"===t&&n||(a+=o.hasOwnProperty("label")?o.label:o),o.versions&&(!o.versions.default||n&&o.versions[n]||(n=o.versions.default),n&&o.versions[n]&&(i=o.versions[n])),i&&(a&&(a+=" "),a+=i.hasOwnProperty("label")?i.label:i),o.hasOwnProperty("link")?r=o.link.replace(":version",o.linkVersions?o.linkVersions[n]:n):i&&o.hasOwnProperty("link")&&(r=i.link),r&&(a='<a href="'+r+'" target="_blank">'+a+"</a>");var s="";return"PD"!==t&&"C"!==t&&(s+=t),n&&"CC0 1.0"!==n&&(s&&"GNU GPL"!==t&&(s+=" "),s+=n),s&&(a+=" ("+s+")"),"C"===t&&(a+=" &copy;"),a};if(void 0!==t){for(var s in r)r.hasOwnProperty(s)&&(t[s]=r[s]);void 0===i&&(i=["contentType","title","license","author","year","source","licenseExtras","changes"]);for(var c=0;c<i.length;c++){var l=i[c];if(void 0!==t[l]&&""!==t[l]){var d=t[l];"license"===l&&(d=humanizeLicense(t.license,t.version)),"source"===l&&(d=d?'<a href="'+d+'" target="_blank">'+d+"</a>":void 0),a.add(new e.Field(getLabel(l),d))}}}this.setThumbnail=function(e){o=e},this.undisclosed=function(){if(1===a.size()){var e=a.get(0);if(e.getLabel()===getLabel("license")&&e.getValue()===humanizeLicense("U"))return!0}return!1},this.toString=function(){var e="";return this.undisclosed()||(void 0!==o&&(e+=o),""!==(e+=a)&&(e='<div class="h5p-media-copyright">'+e+"</div>")),e}},e.Thumbnail=function(t,n,i){var r;void 0!==n&&(r=Math.round(n/i*100)),this.toString=function(){return'<img src="'+t+'" alt="'+e.t("thumbnail")+'" class="h5p-thumbnail" height="100"'+(void 0===r?"":' width="'+r+'"')+"/>"}},e.Field=function(e,t){this.getLabel=function(){return e},this.getValue=function(){return t}},e.DefinitionList=function(){var e=[];this.add=function(t){e.push(t)},this.size=function(){return e.length},this.get=function(t){return e[t]},this.toString=function(){for(var t="",n=0;n<e.length;n++){var i=e[n];t+="<dt>"+i.getLabel()+"</dt><dd>"+i.getValue()+"</dd>"}return""===t?t:'<dl class="h5p-definition-list">'+t+"</dl>"}},e.Coords=function(t,n,i,r){return this instanceof e.Coords?(this.x=0,this.y=0,this.w=1,this.h=1,"object"==typeof t?(this.x=t.x,this.y=t.y,this.w=t.w,this.h=t.h):(void 0!==t&&(this.x=t),void 0!==n&&(this.y=n),void 0!==i&&(this.w=i),void 0!==r&&(this.h=r)),this):new e.Coords(t,n,i,r)},e.libraryFromString=function(e){var t=/(.+)\s(\d+)\.(\d+)$/g.exec(e);return null!==t&&{machineName:t[1],majorVersion:parseInt(t[2]),minorVersion:parseInt(t[3])}},e.getLibraryPath=function(e){return void 0!==H5PIntegration.urlLibraries?H5PIntegration.urlLibraries+"/"+e:H5PIntegration.url+"/libraries/"+e},e.cloneObject=function(t,n){var i=t instanceof Array?[]:{};for(var r in t)t.hasOwnProperty(r)&&(void 0!==n&&n&&"object"==typeof t[r]?i[r]=e.cloneObject(t[r],n):i[r]=t[r]);return i},e.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},e.jsLoaded=function(t){return H5PIntegration.loadedJs=H5PIntegration.loadedJs||[],-1!==e.jQuery.inArray(t,H5PIntegration.loadedJs)},e.cssLoaded=function(t){return H5PIntegration.loadedCss=H5PIntegration.loadedCss||[],-1!==e.jQuery.inArray(t,H5PIntegration.loadedCss)},e.shuffleArray=function(e){if(e instanceof Array){var t,n,i,r=e.length;if(0===r)return!1;for(;--r;)t=Math.floor(Math.random()*(r+1)),n=e[r],i=e[t],e[r]=i,e[t]=n;return e}},e.setFinished=function(t,n,i,r){if(("number"==typeof n||n instanceof Number)&&!0===H5PIntegration.postUserStatistics){var toUnix=function(e){return Math.round(e.getTime()/1e3)};e.jQuery.post(H5PIntegration.ajax.setFinished,{contentId:t,score:n,maxScore:i,opened:toUnix(e.opened[t]),finished:toUnix(new Date),time:r})}},Array.prototype.indexOf||(Array.prototype.indexOf=function(e){for(var t=0;t<this.length;t++)if(this[t]===e)return t;return-1}),void 0===String.prototype.trim&&(String.prototype.trim=function(){return e.trim(this)}),e.trigger=function(e,t,n,i){void 0!==e.trigger?e.trigger(t,n,i):void 0!==e.$&&void 0!==e.$.trigger&&e.$.trigger(t)},e.on=function(e,t,n){void 0!==e.on?e.on(t,n):void 0!==e.$&&void 0!==e.$.on&&e.$.on(t,n)},e.createUUID=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))},e.createTitle=function(t,n){if(!t)return"";void 0===n&&(n=60);var i=e.jQuery("<div></div>").text(t.replace(/(<([^>]+)>)/gi,"")).text();return i.length>n&&(i=i.substr(0,n-3)+"..."),i},function(t){function contentUserDataAjax(e,n,i,r,o,a,s,c){if(void 0!==H5PIntegration.user){var l={url:H5PIntegration.ajax.contentUserData.replace(":contentId",e).replace(":dataType",n).replace(":subContentId",i||0),dataType:"json",async:void 0===c||c};void 0!==o?(l.type="POST",l.data={data:null===o?0:o,preload:a?1:0,invalidate:s?1:0}):l.type="GET",void 0!==r&&(l.error=function(e,t){r(t)},l.success=function(e){e.success?!1!==e.data&&void 0!==e.data?r(void 0,e.data):r():r(e.message)}),t.ajax(l)}else r("Not signed in.")}e.getUserData=function(e,t,n,i){i||(i=0),H5PIntegration.contents=H5PIntegration.contents||{};var r=H5PIntegration.contents["cid-"+e]||{},o=r.contentUserData;if(o&&o[i]&&void 0!==o[i][t]){if("RESET"===o[i][t])return void n(void 0,null);try{n(void 0,JSON.parse(o[i][t]))}catch(e){n(e)}}else contentUserDataAjax(e,t,i,(function(e,a){if(e||void 0===a)n(e,a);else{void 0===r.contentUserData&&(r.contentUserData=o={}),void 0===o[i]&&(o[i]={}),o[i][t]=a;try{n(void 0,JSON.parse(a))}catch(e){n(e)}}}))},e.getCrossOrigin=function(e){var t=H5PIntegration.crossorigin,n=H5PIntegration.crossoriginRegex;return t&&n&&e.match(n)?t:null},e.setUserData=function(t,n,i,r){var o=e.jQuery.extend(!0,{},{subContentId:0,preloaded:!0,deleteOnChange:!1,async:!0},r);try{i=JSON.stringify(i)}catch(e){return void(o.errorCallback&&o.errorCallback(e))}var a=H5PIntegration.contents["cid-"+t];void 0===a&&(a=H5PIntegration.contents["cid-"+t]={}),a.contentUserData||(a.contentUserData={});var s=a.contentUserData;void 0===s[o.subContentId]&&(s[o.subContentId]={}),i!==s[o.subContentId][n]&&(s[o.subContentId][n]=i,contentUserDataAjax(t,n,o.subContentId,(function(e){o.errorCallback&&e&&o.errorCallback(e)}),i,o.preloaded,o.deleteOnChange,o.async))},e.deleteUserData=function(e,t,n){n||(n=0);var i=H5PIntegration.contents["cid-"+e].contentUserData;i&&i[n]&&i[n][t]&&delete i[n][t],contentUserDataAjax(e,t,n,void 0,null)},e.getContentForInstance=function(e){var t="cid-"+e;return H5PIntegration&&H5PIntegration.contents&&H5PIntegration.contents[t]?H5PIntegration.contents[t]:void 0},e.ClipboardItem=function(e,t,n){var i=this;t||(t="action",e={action:e}),i.specific=e,t&&e[t]&&(i.generic=t),n&&(i.from=n),window.H5PEditor&&H5PEditor.contentId&&(i.contentId=H5PEditor.contentId),i.specific.width||i.specific.height||function(){if(i.generic){var e=i.specific[i.generic];e.params.file&&e.params.file.width&&e.params.file.height&&(i.width=20,i.height=e.params.file.height/e.params.file.width*i.width)}}()},e.clipboardify=function(t){t instanceof e.ClipboardItem||(t=new e.ClipboardItem(t)),e.setClipboard(t)},e.getClipboard=function(){return parseClipboard()},e.setClipboard=function(t){localStorage.setItem("h5pClipboard",JSON.stringify(t)),e.externalDispatcher.trigger("datainclipboard",{reset:!1})},e.getLibraryConfig=function(e){return H5PIntegration.libraryConfig&&H5PIntegration.libraryConfig[e]?H5PIntegration.libraryConfig[e]:{}};var parseClipboard=function(){var e=localStorage.getItem("h5pClipboard");if(e){try{e=JSON.parse(e)}catch(e){return void console.error("Unable to parse JSON from clipboard.",e)}return recursiveUpdate(e.specific,(function(t){return!("#tmp"===t.substr(-4,4))&&e.contentId?H5PEditor.contentId?"../"+e.contentId+"/"+t:(H5PEditor.contentRelUrl?H5PEditor.contentRelUrl:"../content/")+e.contentId+"/"+t:t})),e.generic&&(e.generic=e.specific[e.generic]),e}},recursiveUpdate=function(e,t){for(var n in e)if(e.hasOwnProperty(n)&&e[n]instanceof Object){var i=e[n];void 0!==i.path&&void 0!==i.mime?i.path=t(i.path):(void 0!==i.library&&void 0!==i.subContentId&&delete i.subContentId,recursiveUpdate(i,t))}};t(document).ready((function(){window.addEventListener("storage",(function(t){"h5pClipboard"===t.key&&e.externalDispatcher.trigger("datainclipboard",{reset:null===t.newValue})}));var t={default:"4.0","4.0":e.t("licenseCC40"),"3.0":e.t("licenseCC30"),2.5:e.t("licenseCC25"),"2.0":e.t("licenseCC20"),"1.0":e.t("licenseCC10")};if(e.copyrightLicenses={U:e.t("licenseU"),"CC BY":{label:e.t("licenseCCBY"),link:"http://creativecommons.org/licenses/by/:version",versions:t},"CC BY-SA":{label:e.t("licenseCCBYSA"),link:"http://creativecommons.org/licenses/by-sa/:version",versions:t},"CC BY-ND":{label:e.t("licenseCCBYND"),link:"http://creativecommons.org/licenses/by-nd/:version",versions:t},"CC BY-NC":{label:e.t("licenseCCBYNC"),link:"http://creativecommons.org/licenses/by-nc/:version",versions:t},"CC BY-NC-SA":{label:e.t("licenseCCBYNCSA"),link:"http://creativecommons.org/licenses/by-nc-sa/:version",versions:t},"CC BY-NC-ND":{label:e.t("licenseCCBYNCND"),link:"http://creativecommons.org/licenses/by-nc-nd/:version",versions:t},"CC0 1.0":{label:e.t("licenseCC010"),link:"https://creativecommons.org/publicdomain/zero/1.0/"},"GNU GPL":{label:e.t("licenseGPL"),link:"http://www.gnu.org/licenses/gpl-:version-standalone.html",linkVersions:{v3:"3.0",v2:"2.0",v1:"1.0"},versions:{default:"v3",v3:e.t("licenseV3"),v2:e.t("licenseV2"),v1:e.t("licenseV1")}},PD:{label:e.t("licensePD"),versions:{"CC0 1.0":{label:e.t("licenseCC010"),link:"https://creativecommons.org/publicdomain/zero/1.0/"},"CC PDM":{label:e.t("licensePDM"),link:"https://creativecommons.org/publicdomain/mark/1.0/"}}},"ODC PDDL":'<a href="http://opendatacommons.org/licenses/pddl/1.0/" target="_blank">Public Domain Dedication and Licence</a>',"CC PDM":{label:e.t("licensePDM"),link:"https://creativecommons.org/publicdomain/mark/1.0/"},C:e.t("licenseC")},e.isFramed&&!1===e.externalEmbed&&e.externalDispatcher.on("*",(function(e){window.parent.H5P.externalDispatcher.trigger.call(this,e)})),e.preventInit||e.init(document.body),!1!==H5PIntegration.saveFreq){var n=0,storeCurrentState=function(){var t=(new Date).getTime();if(t-n>250){n=t;for(var i=0;i<e.instances.length;i++){var r=e.instances[i];if(r.getCurrentState instanceof Function||"function"==typeof r.getCurrentState){var o=r.getCurrentState();void 0!==o&&e.setUserData(r.contentId,"state",o,{deleteOnChange:!0,async:!1})}}}};e.$window.one("beforeunload unload",(function(){e.$window.off("pagehide beforeunload unload"),storeCurrentState()})),e.$window.on("pagehide",storeCurrentState)}}))}(e.jQuery);