var e,t=t||{};e=H5P.jQuery,t.createTable=function(t){var a=e('<table class="h5p-admin-table'+(void 0!==H5PAdminIntegration.extraTableClasses?" "+H5PAdminIntegration.extraTableClasses:"")+'"></table>');if(t){var n=e("<thead></thead>"),o=e("<tr></tr>");e.each(t,(function(t,a){a instanceof Object||(a={html:a}),e("<th/>",a).appendTo(o)})),a.append(n.append(o))}return a},t.createTableRow=function(t){var a=e("<tr></tr>");return e.each(t,(function(t,n){n instanceof Object||(n={html:n}),e("<td/>",n).appendTo(a)})),a},t.createLabeledField=function(t,a){var n=e('<div class="h5p-labeled-field"></div>');return n.append('<div class="h5p-label">'+t+"</div>"),n.append('<div class="h5p-value">'+a+"</div>"),n},t.translateReplace=function(t,a){return e.each(a,(function(e,a){t=t.replace(new RegExp("\\"+e,"g"),a)})),t},t.throbber=function(t){return e("<div/>",{class:"h5p-throbber",text:t})},t.getRebuildCache=function(t){var a=e('<div class="h5p-admin-rebuild-cache"><p class="message">'+t.message+'</p><p class="progress">'+t.progress+"</p></div>"),n=e("<button>"+t.button+"</button>").appendTo(a).click((function(){var o=e("<div/>",{class:"h5p-spinner"}).replaceAll(n),r=["|","/","-","\\"],i=0,s=setInterval((function(){o.text(r[i]),++i===r.length&&(i=0)}),100),l=a.find(".progress"),build=function(){e.post(t.url,(function(e){if("0"===e)clearInterval(s),a.remove(),location.reload();else{var t=l.text().split(" ");t[0]=e,l.text(t.join(" ")),build()}}))};build()}));return a},t.Table=function(t){var a,n,o,r,i,s={};void 0!==t.table&&(s.class=t.table);var l=e("<table/>",s),c=e("<thead/>").appendTo(l),d=e("<tfoot/>").appendTo(l),p=e("<tbody/>").appendTo(l),addCol=function(t,a,s){var l={on:{}};a instanceof Object?(void 0!==a.text&&(l.text=a.text),void 0!==a.class&&(l.class=a.class),void 0!==n&&!0===a.sortable&&(l.role="button",l.tabIndex=0,void 0===r&&(r=s,i=0),r===s&&(l.class="h5p-sort",1===i&&(l.class+=" h5p-reverse")),l.on.click=function(){sort(c,s)},l.on.keypress=function(e){32===(e.charCode||e.keyCode)&&sort(c,s)})):l.text=a;var c=e("<th>",l).appendTo(t);r===s&&(o=c)},sort=function(e,t){t===r?0===i?(i=1,e.addClass("h5p-reverse")):(i=0,e.removeClass("h5p-reverse")):(o.removeClass("h5p-sort").removeClass("h5p-reverse"),o=e.addClass("h5p-sort"),r=t,i=0),n({by:r,dir:i})};this.setHeaders=function(t,o,s){a=t.length,n=o,s&&(r=s.by,i=s.dir);for(var l=e("<thead/>"),d=e("<tr/>").appendTo(l),p=0;p<t.length;p++)addCol(d,t[p],p);c.replaceWith(l),c=l},this.setRows=function(t){for(var a=e("<tbody/>"),n=0;n<t.length;n++)for(var o=e("<tr/>").appendTo(a),r=0;r<t[n].length;r++)e("<td>",{html:t[n][r]}).appendTo(o);return p.replaceWith(a),p=a},this.setBody=function(t){var n=e("<tbody/>"),o=e("<tr/>").appendTo(n);e("<td>",{colspan:a}).append(t).appendTo(o),p.replaceWith(n),p=n},this.setFoot=function(t){var n=e("<tfoot/>"),o=e("<tr/>").appendTo(n);e("<td>",{colspan:a}).append(t).appendTo(o),d.replaceWith(n)},this.appendTo=function(e){l.appendTo(e)}},t.Pagination=function(t,a,n,o){var r=0,i=Math.ceil(t/a),s=e("<button/>",{html:"&lt;",class:"button",title:o.previousPage}).click((function(){goTo(r-1)})),l=e("<span/>").click((function(){c.width(l.width()).show().val(r+1).focus(),l.hide()})),c=e("<input/>",{type:"number",min:1,max:i,on:{blur:function(){gotInput()},keyup:function(e){if(13===e.keyCode)return gotInput(),!1}}}).hide(),d=e("<button/>",{html:"&gt;",class:"button",title:o.nextPage}).click((function(){goTo(r+1)})),gotInput=function(){var e=parseInt(c.hide().val());isNaN(e)||goTo(e-1),l.show()},updateUI=function(){var e=r+1;s.attr("disabled",0===r),d.attr("disabled",e===i),l.html(o.currentPage.replace("$current",e).replace("$total",i))},goTo=function(e){e===r||e<0||e>=i||(r=e,updateUI(),n(e*a))};this.update=function(e,n){if(e!==t||n!==a){if(t=e,a=n,i=Math.ceil(t/a),c.attr("max",i),r>=i)return void goTo(i-1);updateUI()}},this.appendTo=function(e){s.add(l).add(c).add(d).appendTo(e)},updateUI()};