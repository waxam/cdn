/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
export const displayBehaviors=function(t){return class extends t{static get properties(){return{...super.properties,bordered:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},caption:{type:String,value:null,notify:!0},columnHeader:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},csvData:{type:String,value:""},condensed:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},data:{type:Array,value:[],notify:!0,observer:"_dataChanged"},dataCsv:{type:String},filter:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},footer:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},rowHeader:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},responsive:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},sort:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},striped:{type:Boolean,value:!1,reflectToAttribute:!0,notify:!0},thead:{type:Array,computed:"_getThead(data,columnHeader)"},tbody:{type:Array,computed:"_getTbody(data,columnHeader,footer)"},tfoot:{type:Array,computed:"_getTfoot(data,footer)"}}}CSVtoArray(t){let e,r="",l=[""],o=[l],n=0,i=0,a=!0;for(e in t)e=t[e],'"'===e?(a&&e===r&&(l[n]+=e),a=!a):","===e&&a?e=l[++n]="":"\n"===e&&a?("\r"===r&&(l[n]=l[n].slice(0,-1)),l=o[++i]=[e=""],n=0):l[n]+=e,r=e;return o}getTableCSV(){return this.data.map(t=>t.map(t=>(t=this._replaceBlankCell(t),this._isNumeric(t)?t.replace(/,/g,""):`"${t.replace(/"/g,'""')}"`)).join(",")).join("\n")}getTableHTML(){let getTR=(t,e="td",r="td")=>{let l=this.rowHeader?t.slice(0,1):[],o=this.rowHeader?t.slice(1):t;return`\n\t\t<tr>${l.map(t=>`\n\t\t\t<th scope="row">${this._replaceBlankCell(t)}</th>`).join("")}${o.map(t=>`\n\t\t\t<${e}>${this._replaceBlankCell(t)}</${r}>`).join("")}\n\t\t</tr>`},t=this.thead.map(t=>getTR(t,'th scope="col"',"th")),e=this.tbody.map(t=>getTR(t)),r=this.tfoot.map(t=>getTR(t));return["<table>",""!==this.caption?`\n\t<caption>\n\t\t${this.caption}\n\t</caption>`:"",t.length>0?`\n\t<thead>${t.join("")}\n\t</thead>`:"",e.length>0?`\n\t<tbody>${e.join("")}\n\t</tbody>`:"",r.length>0?`\n\t<tfoot>${r.join("")}\n\t</tfoot>`:"","\n</table>"].join("")}getTableProperties(){return{bordered:this.hideBordered?null:this.bordered,caption:this.caption,columnHeader:this.columnHeader,condensed:this.hideCondensed?null:this.condensed,data:this.data,filter:this.hideFilter?null:this.filter,footer:this.footer,rowHeader:this.rowHeader,responsive:this.hideResponsive?null:this.responsive,sort:this.hideSort?null:this.sort,striped:this.hideStriped?null:this.striped,summary:this.summary}}importHTML(t){let e=[].slice.call(t.querySelectorAll("tr")).map(t=>[].slice.call(t.querySelectorAll("th,td")).map(t=>"string"==typeof t.innerHTML?t.innerHTML.trim():t.innerHTML));e.length>0&&e[0].length>0&&this.set("data",e),this.columnHeader=this.columnHeader||t.querySelectorAll("thead").length>0,this.rowHeader=this.rowHeader||t.querySelectorAll("tbody th").length>0,this.footer=this.footer||t.querySelectorAll("tfoot").length>0,this.caption=null!==this.caption?this.caption:t.querySelectorAll("caption").length>0?t.querySelector("caption").innerHTML.trim():null}_loadExternalData(t){let e=this.CSVtoArray(this.csvData);e.length>0&&e[0].length>0&&this.set("data",e)}_getTbody(t,e,r){if(null!=t&&t.length>0&&t[0].length>0){let l=e?1:0,o=r?t.length-1:t.length;return t.slice(l,o)}}_getTfoot(t,e){return t.length>0&&t[0].length>0&&e?t.slice(t.length-1):[]}_getThead(t,e){return t.length>0&&t[0].length>0&&e?t.slice(0,1):[]}_replaceBlankCell(t){return""===String(t).trim()?"-":t}_isNumeric(t){return null!==t&&!isNaN(t.trim().replace(/\$/g,""))}}};export const cellBehaviors=function(t){return class extends t{_getLabel(t,e){if(e)return t+1;{let e="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r=this._getLetter(t).split("-").reverse(),l="";for(let t=0;t<r.length;t++)""!==r[t]&&(l+=e[r[t]]);return l}}_getLetter(t){let e=Math.floor(t/26),r="";return r+=t-26*e+"-",e>0&&e<26?r+=e-1+"-":e>=26&&(r+=this._getLetter(e-1)),r}}};