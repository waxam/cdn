define(["exports","meta","./node_modules/@polymer/polymer/polymer-legacy.js","./node_modules/@polymer/polymer/lib/utils/resolve-url.js","./node_modules/@lrnwebcomponents/hax-body-behaviors/lib/HAXWiring.js","./node_modules/@lrnwebcomponents/es-global-bridge/es-global-bridge.js"],function(a,b,c,d){"use strict";function h(){var k=babelHelpers.taggedTemplateLiteral(["\n    <style>\n      :host {\n        display: block;\n      }\n      #link {\n        visibility: hidden;\n        opacity: 0;\n      }\n    </style>\n    <qr-code\n      id=\"qr\"\n      data$=\"[[data]]\"\n      modulesize$=\"[[modulesize]]\"\n      margin$=\"[[margin]]\"\n      format$=\"[[format]]\"\n    ></qr-code>\n    <a href$=\"[[data]]\" id=\"link\">[[title]]</a>\n  "]);return h=function(){return k},k}Object.defineProperty(a,"__esModule",{value:!0}),a.QR=a.QRCodeElement=void 0,b=babelHelpers.interopRequireWildcard(b);var i=(0,c.Polymer)({_template:(0,c.html)(h()),is:"q-r",behaviors:[HAXBehaviors.PropertiesBehaviors],properties:{data:{type:String},title:{type:String},modulesize:{type:Number,value:4},margin:{type:Number,value:2},format:{type:String,value:"png"}},attached:function(){this.setHaxProperties({canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"QR Code",description:"A code to scan from a smartphone.",icon:"hardware:developer-board",color:"grey",groups:["QR"],handles:[{type:"video",source:"data",title:"title"},{type:"image",source:"data",title:"title"},{type:"link",source:"data",title:"title"}],meta:{author:"LRNWebComponents"}},settings:{quick:[{property:"data",title:"QR data",description:"Source of the data for the QR code.",inputMethod:"textfield",icon:"hardware:developer-board"},{property:"title",title:"Alternate title",description:"An alternate title to go to the source of the QR code.",inputMethod:"textfield",icon:"editor:title"},{property:"modulesize",title:"Size",description:"Size of the QR code",inputMethod:"textfield",icon:"image:photo-size-select-small"},{property:"margin",title:"Margin",description:"Wrapper to the code.",inputMethod:"textfield",icon:"icons:settings-overscan"},{property:"format",title:"Output format",description:"Format to put it out.",inputMethod:"select",options:{png:"PNG",html:"HTML",svg:"SVG"},icon:"editor:bubble-chart"}],configure:[{property:"data",title:"QR data",description:"Source of the data for the QR code.",inputMethod:"textfield",icon:"hardware:developer-board"},{property:"title",title:"Alternate title",description:"An alternate title to go to the source of the QR code.",inputMethod:"textfield",icon:"editor:title"},{property:"modulesize",title:"Size",description:"Size of the QR code",inputMethod:"number",icon:"image:photo-size-select-small"},{property:"margin",title:"Margin",description:"Wrapper to the code.",inputMethod:"number",icon:"icons:settings-overscan"},{property:"format",title:"Output format",description:"Format to put it out.",inputMethod:"select",options:{png:"PNG",html:"HTML",svg:"SVG"},icon:"editor:bubble-chart"}],advanced:[]}})}});a.QR=i;var j=function(k){function l(){var m;babelHelpers.classCallCheck(this,l),m=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(l).call(this)),m._defineProperty=m._defineProperty.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(m))),m.attachShadow({mode:"open"}),Object.keys(l.defaultAttributes).map(m._defineProperty);var n="qr",o=(0,d.pathFromUrl)(b.url),p="".concat(o,"lib/qr.js");return window.addEventListener("es-bridge-".concat(n,"-loaded"),m._qrLoaded.bind(babelHelpers.assertThisInitialized(babelHelpers.assertThisInitialized(m)))),window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.instance.load(n,p),m}return babelHelpers.inherits(l,k),babelHelpers.createClass(l,[{key:"_qrLoaded",value:function(){this.generate()}},{key:"attributeChangedCallback",value:function(n,o,p){var q=this[n+"Changed"];q&&"function"===typeof q&&q.call(this,o,p),window.ESGlobalBridge.imports.qr&&this.generate()}},{key:"_defineProperty",value:function(n){var o=this;Object.defineProperty(this,n,{get:function(){var q=o.getAttribute(n);return null===q?l.defaultAttributes[n]:q},set:function(q){o.setAttribute(n,q)}})}},{key:"getOptions",value:function(){var n=this.modulesize,o=this.margin;return{modulesize:null===n?n:parseInt(n),margin:null===o?o:parseInt(o)}}},{key:"generate",value:function(){null===this.data?this.shadowRoot.innerHTML="<div>qr-code: no data!</div>":"png"===this.format?this.generatePNG():"html"===this.format?this.generateHTML():"svg"===this.format?this.generateSVG():this.shadowRoot.innerHTML="<div>qr-code: "+this.format+" not supported!</div>"}},{key:"generatePNG",value:function(){try{var n=document.createElement("img");n.src=window.QRCode.generatePNG(this.data,this.getOptions()),this.clear(),this.shadowRoot.appendChild(n)}catch(o){this.shadowRoot.innerHTML="<div>qr-code: no canvas support!</div>"}}},{key:"generateHTML",value:function(){var n=window.QRCode.generateHTML(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(n)}},{key:"generateSVG",value:function(){var n=window.QRCode.generateSVG(this.data,this.getOptions());this.clear(),this.shadowRoot.appendChild(n)}},{key:"clear",value:function(){for(;this.shadowRoot.lastChild;)this.shadowRoot.removeChild(this.shadowRoot.lastChild)}}],[{key:"defaultAttributes",get:function(){return{data:null,format:"png",modulesize:5,margin:4}}},{key:"observedAttributes",get:function(){return Object.keys(l.defaultAttributes)}}]),l}(babelHelpers.wrapNativeSuper(HTMLElement));a.QRCodeElement=j,window.customElements.define("qr-code",j)});