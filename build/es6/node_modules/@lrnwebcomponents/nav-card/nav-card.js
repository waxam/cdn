/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as i,css as e}from"../../lit-element/lit-element.js";import{HAXWiring as n}from"../hax-body-behaviors/lib/HAXWiring.js";import"../accent-card/accent-card.js";import"../../@polymer/iron-icon/iron-icon.js";import"../../@polymer/iron-icons/iron-icons.js";class NavCard extends t{static get styles(){return[e`
        :host {
          display: block;
        }
        ::slotted([slot="linklist"]) {
          display: none;
        }
        h1,
        h2,
        h3,
        accent-card > [slot="heading"] {
          font-size: 14px;
          font-weight: normal;
          color: var(--simple-colors-default-theme-grey-7, #666);
          margin: 0;
        }
        accent-card {
          margin: var(--elmsln-studio--Margin, 20px);
          flex: 1 0 calc(50% - 2 * var(--elmsln-studio--Margin, 20px));
          --accent-card-footer-border-color: transparent;
        }
        .linklist {
          list-style-type: none;
          padding-inline-start: 0;
        }
        .linklist li {
          position: relative;
          padding: 5px 0;
          margin-bottom: 1px;
          opacity: 0.8;
        }
        .linklist li {
          padding: 5px 0;
          text-align: left;
          min-height: 25px;
          border-bottom: 1px solid
            var(--simple-colors-default-theme-grey-4, #666);
        }
        button[slot="subheading"] {
          text-decoration: underline;
        }
        button[slot="subheading"]:focus,
        button[slot="subheading"]:hover {
          text-decoration: none;
        }
        ::slotted(button),
        .linklist button {
          border: none;
          padding: 0;
          text-align: left;
          font-size: inherit;
          font-weight: inherit;
        }
        .linklist iron-icon {
          position: absolute;
          width: 24px;
          height: 24px;
          right: 0px;
          top: calc(50% - 12px);
        }
        .linklist-heading::after {
          content: " ";
          position: absolute;
          left: 0;
          right: 0;
          top: 0;
          bottom: 0;
        }
        .linklist-heading:focus {
          outline: none;
        }
        .linklist li:focus,
        .linklist li:focus-within .linklist-heading::after {
          outline: 1px solid blue;
        }
        .linklist li:hover .linklist-heading,
        .linklist li:focus .linklist-heading,
        .linklist li:focus-within .linklist-heading {
          text-decoration: underline;
        }
        .linklist-heading,
        .linklist-subheading {
          display: block;
          width: calc(100% - 24px);
        }
        .linklist-heading {
          font-weight: bold;
        }
        .linklist-subheading {
          font-size: 11px;
        }
      `]}render(){return i`
      <accent-card
        accent-color="${this.accentColor}"
        ?dark="${this.dark}"
        ?disabled="${this.disabled}"
        ?hidden="${this.hidden}"
      >
        <div slot="heading"><slot name="heading"></slot></div>
        <div slot="subheading"><slot name="subheading"></slot></div>
        <div slot="content">
          <slot name="body"></slot>
          <slot name="linklist"></slot>
          <div id="linklist"></div>
        </div>
        <div slot="footer"><slot name="footer"></slot></div>
      </accent-card>
    `}static get haxProperties(){return{canScale:!0,canPosition:!0,canEditSource:!1,gizmo:{title:"Nav card",description:"an accent card of link lists",icon:"icons:android",color:"green",groups:["Card"],handles:[{type:"todo:read-the-docs-for-usage"}],meta:{author:"nikkimk",owner:"The Pennsylvania State University"}},settings:{quick:[],configure:[{property:"hidden",description:"",inputMethod:"boolean",required:!1,icon:"icons:android"},{property:"disabled",description:"",inputMethod:"boolean",required:!1,icon:"icons:android"}],advanced:[]}}}static get properties(){return{...super.properties,dark:{attribute:"dark",type:Boolean},accentColor:{attribute:"accent-color",type:String},hidden:{attribute:"hidden",type:Boolean},linkIcon:{attribute:"link-icon",type:String},disabled:{attribute:"disabled",type:Boolean}}}tag(){return"nav-card"}constructor(){super(),this.accentColor="grey",this.dark=!1,this.disabled=!1,this.hidden=!1,this.tag=NavCard.tag,this.observer.observe(this,{attributes:!1,childList:!0,subtree:!1})}connectedCallback(){super.connectedCallback(),this.HAXWiring=new n,this.HAXWiring.setup(NavCard.haxProperties,NavCard.tag,this)}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),this.updateList()}get observer(){return new MutationObserver(()=>this.updateList())}updated(t){t.forEach((t,i)=>{"linkIcon"===i&&this.shadowRoot&&this.shadowRoot.querySelectorAll("#linklist li > iron-icon").forEach(t=>t.icon=this.linkIcon)})}updateList(){if(this.shadowRoot&&this.shadowRoot.querySelector("#linklist")){let t=this.shadowRoot.querySelector("#linklist"),i=this.querySelector('ul[slot="linklist"],ol[slot="linklist"]').cloneNode(!0);i.querySelectorAll("li").forEach((t,i)=>this._getLi(t,i)),t.innerHTML="",i&&(i.classList.add("linklist"),t.appendChild(i))}}_getLi(t,i){let e=this._getHeading(t,i),n=this._getSubheading(t);e.id=e.id||`${this.id||"nav-card"}-heading${i}`,n&&(n.id=`subheading${i}`,n.id=n.id||`${this.id||"nav-card"}-subheading${i}`,e.setAttribute("aria-describedby",n.id)),this._makeIcon(t,e)}_getHeading(t){let i=t.querySelector(".linklist-heading"),e=t.querySelector("button,a");return i||(e?i=e:(i=document.createElement("span"),i.innerHTML=t.innerHTML,t.innerHTML="",t.appendChild(i)),i.classList.add(".linklist-heading")),i}_getSubheading(t){let i=t.querySelector(".linklist-subheading");if(!i){let e=t.querySelectorAll(":not(.linklist-heading)");e&&(i=document.createElement("div"),e.forEach(t=>i.append(t)),i.classList.add(".linklist-subheading"))}return i}_makeIcon(t,i){if(t&&i){let e=document.createElement("iron-icon");e.icon=this.linkIcon,e.setAttribute("aria-hidden",!0),t.insertBefore(e,i)}}disconnectedCallback(){super.disconnectedCallback(),this.observer&&this.observer.disconnect&&this.observer.disconnect()}}customElements.define("nav-card",NavCard);export{NavCard};