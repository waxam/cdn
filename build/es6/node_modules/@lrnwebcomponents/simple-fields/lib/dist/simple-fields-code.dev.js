Object.defineProperty(exports,"__esModule",{value:!0}),exports.SimpleFieldsCode=void 0;var e=require("lit"),t=require("./simple-fields-container.js");require("@lrnwebcomponents/code-editor/code-editor.js");var n=require("@lrnwebcomponents/utils/utils.js");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _templateObject2_056a0b20feba11eb8439e3eec9305af7(){var e=_taggedTemplateLiteral(['\n      <div class="field-main" part="field-main">\n        ','\n        <code-editor\n          ?autofocus="','"\n          ?disabled="','"\n          font-size="','"\n          editor-value="','"\n          theme="','"\n          language="','"\n          mode="','"\n          ?read-only="','"\n          @value-changed="','"\n          @focused-changed="','"\n          @code-editor-focus="','"\n          @code-editor-blur="','"\n          part="editor"\n        >\n        </code-editor>\n        <input name="','" type="hidden" value="','" />\n      </div>\n    ']);return _templateObject2_056a0b20feba11eb8439e3eec9305af7=function _templateObject2_056a0b20feba11eb8439e3eec9305af7(){return e},e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _templateObject_056a0b20feba11eb8439e3eec9305af7(){var e=_taggedTemplateLiteral(["\n        #options {\n          display: var(--simple-fields-radio-option-display, flex);\n          flex-wrap: var(--simple-fields-radio-option-flex-wrap, wrap);\n        }\n        code-editor {\n          margin: 0;\n          transition: height 0.5s ease-in-out;\n          box-sizing: border-box;\n          vertical-align: bottom;\n        }\n        code-editor:focus {\n          outline: none;\n        }\n      "]);return _templateObject_056a0b20feba11eb8439e3eec9305af7=function _templateObject_056a0b20feba11eb8439e3eec9305af7(){return e},e}function _taggedTemplateLiteral(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function _get(e,t,n){return(_get="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function _get(e,t,n){var o=function _superPropBase(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_getPrototypeOf(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(n):r.value}})(e,t,n||e)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var o=function(o){function SimpleFieldsCode(){var e;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,SimpleFieldsCode),(e=_possibleConstructorReturn(this,_getPrototypeOf(SimpleFieldsCode).call(this))).autofocus=!1,e.fontSize=14,e.id=e._generateUUID(),e.language="html",e.mode="html",e.readonly=!1,e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(SimpleFieldsCode,(0,t.SimpleFieldsContainerBehaviors)(e.LitElement)),_createClass(SimpleFieldsCode,[{key:"render",value:function render(){return this.hasFieldSet?this.fieldsetTemplate:_get(_getPrototypeOf(SimpleFieldsCode.prototype),"render",this).call(this)}}],[{key:"tag",get:function get(){return"simple-fields-code"}},{key:"styles",get:function get(){return[].concat(_toConsumableArray(_get(_getPrototypeOf(SimpleFieldsCode),"styles",this)),[(0,e.css)(_templateObject_056a0b20feba11eb8439e3eec9305af7())])}},{key:"properties",get:function get(){return function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(n,!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},_get(_getPrototypeOf(SimpleFieldsCode),"properties",this),{autofocus:{type:Boolean},editorValue:{type:String,attribute:"editor-value"},focused:{type:Boolean,reflect:!0},fontSize:{type:Number,attribute:"font-size"},language:{type:String},mode:{type:Number},readonly:{type:Boolean,reflect:!0},requiredMessage:{type:String},theme:{type:String,reflect:!0},value:{reflect:!0}})}}]),_createClass(SimpleFieldsCode,[{key:"disconnectedCallback",value:function disconnectedCallback(){var e=this;this.removeEventListener("click",(function(t){return e.focus()})),_get(_getPrototypeOf(SimpleFieldsCode.prototype),"disconnectedCallback",this).call(this)}},{key:"updated",value:function updated(e){var t=this;e.forEach((function(e,n){"id"!==n||t.id||(t.id=t._generateUUID()),"field"!==n||t.field||t._updateField(),"value"===n&&t._fireValueChanged()}))}},{key:"_onChange",value:function _onChange(e){var t=(0,n.normalizeEventPath)(e)[0];t&&this.value!==t.value&&(this.value=t.value)}},{key:"validate",value:function validate(){return!this.value&&this.required&&(this.error=!0,this.errorMessage=this.requiredMessage||"required"),!this.error}},{key:"_fireValueChanged",value:function _fireValueChanged(){this.dispatchEvent(new CustomEvent("value-changed",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}},{key:"_onFocusChange",value:function _onFocusChange(e){this.focused=e.detail.focused}},{key:"_observeAndListen",value:function _observeAndListen(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];e?(this.addEventListener("click",this.focus),this.addEventListener("focusout",this._onFocusout),this.addEventListener("focusin",this._onFocusin)):(this.removeEventListener("click",this.focus),this.removeEventListener("focusout",this._onFocusout),this.removeEventListener("focusin",this._onFocusin))}},{key:"_updateField",value:function _updateField(){this.field=this.shadowRoot&&this.shadowRoot.querySelector("code-editor")?this.shadowRoot.querySelector("code-editor"):void 0}},{key:"_generateUUID",value:function _generateUUID(){return"ss-s-s-s-sss".replace(/s/g,Math.floor(65536*(1+Math.random())).toString(16).substring(1))}},{key:"fieldMainTemplate",get:function get(){var t=this;return(0,e.html)(_templateObject2_056a0b20feba11eb8439e3eec9305af7(),this.labelTemplate,this.autofocus,this.disabled,this.fontSize,this.__editorValue||"",this.theme||"auto",this.language,this.mode,this.readonly||this.disabled,this._onChange,this._onFocusChange,(function(e){return 1==t.focused}),(function(e){return 0==t.focused}),this.id,this.value)}},{key:"slottedFieldObserver",get:function get(){}}]),SimpleFieldsCode}();exports.SimpleFieldsCode=o,window.customElements.define(o.tag,o);