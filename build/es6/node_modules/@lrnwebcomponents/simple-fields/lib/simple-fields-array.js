import{LitElement as e,html as t,css as i}from"../../../lit-element/lit-element.js";import{SimpleFieldsFieldset as s}from"./simple-fields-fieldset.js";import"../../../@polymer/paper-button/paper-button.js";import"../../../@polymer/iron-icon/iron-icon.js";import"../../../@polymer/iron-icons/iron-icons.js";import"./simple-fields-array-item.js";class SimpleFieldsArray extends s{static get tag(){return"simple-fields-array"}static get styles(){return[...super.styles,i`
        fieldset {
          padding: 0 20px;
        }
        #item-fields {
          clear: both;
          margin: 10px 0;
          z-index: 3;
        }
        paper-button {
          z-index: 1;
          margin: 0;
          float: right;
          text-transform: unset;
        }
      `]}static get properties(){return{...super.properties,count:{type:Number},label:{type:String},description:{type:String},expanded:{type:Boolean}}}get fields(){return t`
      <paper-button
        id="expand"
        controls="item-fields"
        @click="${e=>this.toggle()}"
      >
        ${this.expanded?"Collapse All":"Expand All"}
        <iron-icon
          aria-hidden="true"
          icon="${this.expanded?"expand-less":"expand-more"}"
        ></iron-icon>
      </paper-button>
      <div id="item-fields" aria-live="polite">
        <slot></slot>
        <paper-button
          id="add"
          controls="item-fields"
          @click="${e=>this._handleAdd()}"
        >
          Add Item
          <iron-icon aria-hidden="true" icon="add"></iron-icon>
        </paper-button>
      </div>
    `}constructor(){super(),this.count=0,this.expanded=!1,this.disableAdd=!1}updated(e){e.forEach((e,t)=>{"expanded"===t&&this.querySelectorAll("simple-fields-array-item").forEach(e=>e.setAttribute("aria-expanded",this.expanded))})}buildItem(e){let t=document.createElement("simple-fields-array-item");return t.id=e,t.setAttribute("aria-expanded",this.expanded),t.innerHTML='\n      <slot name="sort"></slot>\n      <slot name="preview"></slot>\n      <slot></slot>',this.appendChild(t),t.addEventListener("remove",e=>this._handleRemove(e)),t}_handleAdd(){this.dispatchEvent(new CustomEvent("add",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}_handleRemove(e){e.stopPropagation(),e.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("remove",{bubbles:!0,cancelable:!0,composed:!0,detail:e.detail}))}collapse(){this.toggle(!1)}expand(){this.toggle(!0)}toggle(e=!this.expanded){this.expanded=e,this._handleToggle()}_handleToggle(){this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,cancelable:!0,composed:!0,detail:this})),this.expanded?this.dispatchEvent(new CustomEvent("expand",{bubbles:!0,cancelable:!0,composed:!0,detail:this})):this.dispatchEvent(new CustomEvent("collapse",{bubbles:!0,cancelable:!0,composed:!0,detail:this}))}}window.customElements.define(SimpleFieldsArray.tag,SimpleFieldsArray);export{SimpleFieldsArray};