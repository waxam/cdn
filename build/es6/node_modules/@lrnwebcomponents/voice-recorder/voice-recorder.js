/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as t,html as e,css as i}from"../../lit/index.js";import{record as r}from"./lib/vmsg-fork.js";import"../simple-icon/simple-icon.js";import"../simple-icon/lib/simple-icons.js";class VoiceRecorder extends t{static get styles(){return[i`
        :host {
          display: inline-flex;
        }
      `]}render(){return e`
      <button @click="${this.recordState}">
        <simple-icon icon="${this.iconState}"></simple-icon>${this.textState}
      </button>
      <slot></slot>
    `}static get properties(){return{iconState:{type:String},textState:{type:String},recording:{type:Boolean}}}static get tag(){return"voice-recorder"}constructor(){super(),this.recording=!1,setTimeout((()=>{this.addEventListener("vmsg-ready",this.vmsgReady.bind(this))}),0)}recordState(t){this.recording=!this.recording}updated(t){t.forEach(((t,e)=>{"recording"==e&&(this[e]?(this.textState="stop",this.iconState="av:stop"):(this.textState="Record",this.iconState="av:play-arrow"),this.toggleRecording(this[e],t))}))}vmsgReady(t){console.warn(t.detail.value)}toggleRecording(t,e){t&&r({wasmURL:new URL("./../../",import.meta.url).href+"node_modules/vmsg/vmsg.wasm"},this).then((t=>{this.dispatchEvent(new CustomEvent("voice-recorder-recording",{value:t}))}))}}customElements.define(VoiceRecorder.tag,VoiceRecorder);export{VoiceRecorder};