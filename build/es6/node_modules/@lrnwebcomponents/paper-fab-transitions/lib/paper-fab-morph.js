import{html as t,PolymerElement as e}from"../../../@polymer/polymer/polymer-element.js";import{microTask as o}from"../../../@polymer/polymer/lib/utils/async.js";import"../../../@polymer/iron-dropdown/iron-dropdown.js";class PaperFabMorph extends e{static get template(){return t`
      <style>
        iron-dropdown {
          @apply --paper-morph-dropdown;
        }
        .dropdown-content {
          @apply --paper-morph-content;
        }
        #morpher {
          position: fixed;
          display: none;
          background-color: var(--paper-morph-background, #fff);
        }
      </style>
      <span id="fabContainer" class="dropdown-trigger"
        ><slot name="dropdown-trigger"></slot
      ></span>
      <span id="contentContainer" class="dropdown-content"
        ><slot name="dropdown-content"></slot
      ></span>
      <paper-material id="morpher"></paper-material>
    `}static get tag(){return"paper-fab-morph"}static get properties(){return{isOverlayContent:{type:Boolean,value:!1},duration:{type:Number,value:200},horizontalAlign:{type:String,value:"left",reflectToAttribute:!0},verticalAlign:{type:String,value:"top",reflectToAttribute:!0},horizontalOffset:{type:Number,value:0,notify:!0},verticalOffset:{type:Number,value:0,notify:!0}}}static get observers(){return["_updateOverlayPosition(verticalAlign, horizontalAlign, verticalOffset, horizontalOffset)"]}ready(){if(super.ready(),this._fab=this.shadowRoot.querySelector("#fabContainer"),this._content=this.shadowRoot.querySelector("#contentContainer"),this.isOverlayContent)this._fab.addEventListener("click",function(){this._content.open()}.bind(this)),this._overlay=this._content;else{var t=document.createElement("iron-dropdown");t.appendChild(this._content),this.root.appendChild(t),this._overlay=t,this._dropdown=t,this._fab.addEventListener("click",function(){this._dropdown.open()}.bind(this)),this._updateOverlayPosition(this.verticalAlign,this.horizontalAlign,this.verticalOffset,this.horizontalOffset)}this._overlay.addEventListener("iron-overlay-opened",function(){this._morphOpen()}.bind(this)),this._overlay.addEventListener("iron-overlay-closed",function(){this._morphClose()}.bind(this))}open(){this._overlay.open()}close(){this._overlay.close()}_updateOverlayPosition(t,e,o,i){if(this._dropdown){var r=this._dropdown;r.verticalAlign=t,r.horizontalAlign=e,r.verticalOffset=o,r.horizontalOffset=i}}_morphOpen(){var t=this._fab,e=this._content,i=t.getBoundingClientRect(),r=this.shadowRoot.querySelector("#morpher"),n=r.style;n.display="block",n.top=i.top+"px",n.left=i.left+"px",n.width=i.width+"px",n.height=i.height+"px",n.borderRadius="50%",n.transitionDuration=this.duration+"ms",t.style.visibility="hidden",e.style.visibility="hidden";var s=e.getBoundingClientRect();n.top=s.top+"px",n.left=s.left+"px",n.width=s.width+"px",n.height=s.height+"px",n.borderRadius="",o.run(()=>{r.style.display="none",e.style.visibility="visible"})}_morphClose(){var t=this._fab,e=(this._content,t.getBoundingClientRect(),this.shadowRoot.querySelector("#morpher")),i=e.style;e.style.display="block",o.run(()=>{var r=t.getBoundingClientRect();i.top=r.top+"px",i.left=r.left+"px",i.width=r.width+"px",i.height=r.height+"px",i.borderRadius="50%",o.run(()=>{e.style.display="none",t.style.visibility="visible"})})}}window.customElements.define(PaperFabMorph.tag,PaperFabMorph);export{PaperFabMorph};