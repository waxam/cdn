/**
 * Copyright 2019 Penn State University
 * @license Apache-2.0, see License.md for full text.
 */
import{RichTextEditorPicker as e}from"./rich-text-editor-picker.js";import"../../../es-global-bridge/es-global-bridge.js";class RichTextEditorEmojiPicker extends e{constructor(){super(),this.label="Insert emoji",this.icon="editor:insert-emoticon"}static get properties(){return{emojiTypes:{name:"emojiTypes",type:Array,value:["emotions","people","nature","food","travel","activities","objects","symbols","flags"]},optionsSrc:{name:"optionsSrc",type:String,value:"data/emojis.js"},titleAsHtml:{name:"titleAsHtml",type:Boolean,value:!0,readOnly:!0}}}static get tag(){return"rich-text-editor-emoji-picker"}pathFromUrl(e){return e.substring(0,e.lastIndexOf("/")+1)}connectedCallback(){super.connectedCallback();const e=`${this.pathFromUrl(decodeURIComponent(import.meta.url))}${this.optionsSrc}`;window.addEventListener("es-bridge-emoji-loaded",this._setOptions.bind(this)),window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.instance.load("emoji",e)}disconnectedCallback(){window.removeEventListener("es-bridge-emoji-loaded",this._setOptions.bind(this))}_getPickerOptions(e=[],t=!1,i=null){let o=super._getPickerOptions(e,t,i);return o[0].unshift({alt:null,icon:this.icon,value:null}),o}_setOptions(){let e=[];this.emojiTypes.forEach((function(t){e=e.concat(Object.keys(emojis[t]))})),this.set("options",this._getPickerOptions(e,this.allowNull,this.icon))}_getOptionData(e){return{value:e,alt:e,icon:null,style:null}}}window.customElements.define(RichTextEditorEmojiPicker.tag,RichTextEditorEmojiPicker);export{RichTextEditorEmojiPicker};