import{html,PolymerElement}from"../../../@polymer/polymer/polymer-element.js";import{SimpleColors}from"../../simple-colors/simple-colors.js";import{ResponsiveUtility}from"../../responsive-utility/responsive-utility.js";import"../../../@polymer/iron-image/iron-image.js";import"../../../@polymer/iron-icons/iron-icons.js";import"../../../@polymer/paper-button/paper-button.js";import"../../../@polymer/paper-tooltip/paper-tooltip.js";import"./lrndesign-gallery-shared-styles.js";export{LrndesignGalleryBehaviors};class LrndesignGalleryBehaviors extends SimpleColors{static get tag(){return"lrndesign-gallery-behaviors"}static get properties(){return{anchorData:{type:Object,computed:"_getAnchorData()"},aspectRatio:{type:Number,value:"1.33333333"},extraWide:{type:Boolean,value:!1,reflectToAttribute:!0},galleryId:{type:String,value:null},grid:{type:Boolean,value:!1},items:{type:Array,computed:"_itemsLoaded(sources,sizing)"},responsiveSize:{type:String,value:"xs",reflectToAttribute:!0},selected:{type:Object,value:{},notify:!0,reflectToAttribute:!0},sizing:{type:String,value:"cover"},sources:{type:Array,value:[],reflectToAttribute:!1},title:{type:String,value:null}}}connectedCallback(){super.connectedCallback()}_addResponsiveUtility(options){let root=this;window.ResponsiveUtility.requestAvailability();window.dispatchEvent(new CustomEvent("responsive-element",{detail:options!==void 0?options:{element:root,attribute:"responsive-size",relativeToParent:!0}}))}_getAnchorData(){let temp=window.location.hash.replace("#","").split("---"),anchorGallery=0<temp.length?temp[0]:-1,selectedItemId=1<temp.length?temp[1]:-1,selectedItemIndex=this.sources.findIndex(i=>i.id===selectedItemId),selectedGallery=anchorGallery===this.galleryId,zoom=scroll&&2<temp.length&&"zoom"===temp[2];return{selectedItemId:selectedItemId,selectedItemIndex:0<selectedItemIndex?selectedItemIndex:0,selectedGallery:selectedGallery,zoom:zoom}}_getItemData(item,index,length){if(null===this.galleryId)this.galleryId="gallery-"+this._generateUUID();let anchorData=this._getAnchorData(),temp={};temp.details=item.details;temp.index=index;temp.id=this._selfOrDefault(item.id,this.galleryId+"-item-"+index);temp.src=item.src;temp.large=this._selfOrDefault(item.large,temp.src);temp.thumbnail=this._selfOrDefault(item.thumbnail,temp.src);temp.xofy=parseInt(index+1)+" of "+length;temp.next=index+1<length?index+1:-1;temp.prev=-1<index-1?index-1:-1;temp.sizing=this._selfOrDefault(item.sizing,this.sizing);temp.title=item.title;temp.tooltip=this._selfOrDefault(temp.title,"Full-Sized Image"," (Full-Sized)");temp.heading=this._selfOrDefault(temp.title,"Full-Sized Image"," (Full-Sized)");temp.zoom=anchorData.zoom&&anchorData.selectedItemId===temp.id;temp.scroll=anchorData.selectedGallery&&anchorData.selectedItemId===temp.id;temp.tooltip=this._selfOrDefault(item.title,"Zoom In"," Zoom");if(anchorData.selectedItemIndex===index){this.set("selected",temp)}return temp}_getParentOffset(node){let parent=node.parentNode;if(parent!==void 0&&null!==parent&&parent.nodeType===Node.DOCUMENT_FRAGMENT_NODE){parent=parent.host}return parent.offsetTop}_scrollIntoView(offsets=[0]){window.scrollTo({top:offsets.reduce((total,num)=>{return total+num}),behavior:"smooth"})}_isAttrSet(attr=null){return null!==attr}_isSelected(selected={},item={}){return selected.id===item.id}_itemsLoaded(sources){let root=this,img=new Image,temp=[];this.set("items",[]);if(null===this.galleryId)this.id="gallery-"+this._generateUUID();if(sources!==void 0&&0<sources.length){this._setAspectProperties(sources[0].src);for(var i in sources){temp[i]=this._getItemData(sources[i],parseInt(i),sources.length)}}return temp}_selfOrDefault(val1=null,val2=!1,append=null){let val3=val2;if(val1!==void 0&&null!==val1){if(null!==append){val3=val1+append}else{val3=val1}}return val3}_setAspectProperties(imgSrc){if(imgSrc!==void 0&&null!==imgSrc){let img=new Image;img.src=imgSrc;this.aspectRatio=0<img.naturalWidth&&0<img.naturalHeight?img.naturalWidth/img.naturalHeight:1.33333333;this.extraWide=2<this.aspectRatio}}_testAttribute(attr=null,val=!1){return attr===val}_generateUUID(){return"ss-s-s-s-sss".replace(/s/g,this._uuidPart)}_uuidPart(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}window.customElements.define(LrndesignGalleryBehaviors.tag,LrndesignGalleryBehaviors);