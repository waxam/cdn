/**
 * Copyright 2019 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
class PortalLauncher extends HTMLElement{static get tag(){return"portal-launcher"}constructor(delayRender=!1){super(),this.tag=PortalLauncher.tag,this.querySelectorAll("a")&&this.querySelectorAll("a").forEach(a=>{a.addEventListener("click",this.click.bind(this))})}click(e){let target=e.target;if("A"!==target.tagName&&e.path.forEach(item=>{"A"===item.tagName&&(target=item)}),target&&null!=target.getAttribute("href")&&"HTMLPortalElement"in window){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation();const style=document.createElement("style"),initialScale=.2;style.innerHTML=`\n          portal {\n            position:fixed;\n            width: 100%;\n            height: 100%;\n            opacity: 0;\n            box-shadow: 0 0 20px 10px #999;\n            transform: scale(${initialScale});\n            bottom: calc(20px + 50% * ${initialScale} - 50%);\n            right: calc(20px + 50% * ${initialScale} - 50%);\n            z-index: 10000;\n          }\n          .portal-transition {\n            transition:\n              transform 0.4s,\n              bottom 0.7s,\n              left 0.7s,\n              opacity 1.0s;\n          }\n          @media (prefers-reduced-motion: reduce) {\n            .portal-transition {\n              transition: all 0.001s;\n            }\n          }\n          .portal-reveal {\n            transform: scale(1.0);\n            bottom: 0px;\n            left: 0px;\n          }\n          .fade-in {\n            opacity: 1.0;\n          }\n        `;const portal=document.createElement("portal");portal.src=target.getAttribute("href"),portal.classList.add("portal-transition"),portal.addEventListener("transitionend",evt=>{"bottom"==evt.propertyName&&portal.activate()}),document.body.append(style,portal),setTimeout(_=>portal.classList.add("fade-in"),250),setTimeout(_=>portal.classList.add("portal-reveal"),500)}}}window.customElements.define(PortalLauncher.tag,PortalLauncher);export{PortalLauncher};