import"./simple-login-avatar.js";import"./simple-login-camera.js";import"../../../@polymer/paper-icon-button/paper-icon-button.js";import"../../simple-tooltip/simple-tooltip.js";class SimpleCameraSnap extends HTMLElement{constructor(a=!1){super(),import("../../../@polymer/iron-icons/image-icons.js"),this.tag=SimpleCameraSnap.tag,this.template=document.createElement("template"),this.attachShadow({mode:"open"}),a||this.render()}static get tag(){return"simple-camera-snap"}render(){this.shadowRoot.innerHTML=null,this.template.innerHTML=this.html,window.ShadyCSS&&window.ShadyCSS.prepareTemplate(this.template,this.tag),this.shadowRoot.appendChild(this.template.content.cloneNode(!0))}get html(){return'\n    <style>\n      :host {\n        /* style simple-login-camera according to simple-login-snap styles */\n        --simple-login-camera-background: var(--simple-camera-snap-color, #36bed4);\n        --simple-login-camera-error: var(--simple-camera-snap-error, red);\n        --simple-login-avatar-color: var(--simple-camera-snap-color, #36bed4);\n        --simple-login-camera-width: var(--simple-camera-snap-width, 200px);\n        --simple-login-camera-height: var(--simple-camera-snap-height, 200px);\n\n        /* style simple-login-avatar according to simple-login-snap styles */\n        --simple-login-avatar-background: var(--simple-camera-snap-background, white);\n        --simple-login-avatar-border-radius: var(--simple-camera-snap-border-radius,100%);\n        --simple-login-avatar-width: var(--simple-camera-snap-width, 200px);\n        --simple-login-avatar-height: var(--simple-camera-snap-height, 200px);\n      }\n      #selfie {\n        position: absolute;\n        margin: 0;\n        width: var(--simple-camera-snap-width, 200px);\n        height: var(--simple-camera-snap-height, 200px);\n        display: flex;\n        justify-content: center;\n      }\n      #snap {\n        color: var(--simple-camera-snap-color, #36bed4);\n        background-color: var(--simple-camera-snap-background, white);\n        border-radius: var(--simple-camera-snap-button-border-radius);\n        opacity: var(--simple-camera-snap-button-opacity);\n\n      }\n      .has-snap {\n        z-index: 3;\n      }\n      #selfie img {\n        z-index: 2;\n        position: absolute;\n        width: calc(var(--simple-camera-snap-height, 200px) * 16 / 9);\n        height: var(--simple-camera-snap-height, 200px);\n      }\n      .buttons {\n        display: flex;\n        width: var(--simple-camera-snap-width, 200px);\n        justify-content: space-evenly;\n        position: var(--simple-camera-snap-button-container-position);\n        bottom: var(--simple-camera-snap-button-container-bottom);\n        z-index: var(--simple-camera-snap-button-container-z-index);\n      }\n    </style>\n    <simple-login-avatar>\n      <div id="selfie"></div>\n      <simple-login-camera id="camera" autoplay></simple-login-camera>\n    </simple-login-avatar>\n    <div class="buttons">\n      <paper-icon-button id="snap" icon="image:camera-alt"></paper-icon-button>\n      <simple-tooltip for="snap">Take Photo</simple-tooltip>\n    </div>\n    '}connectedCallback(){navigator.mediaDevices||(this.shadowRoot.querySelector("#snap").style.display="none"),this.shadowRoot.querySelector("#snap").addEventListener("click",this.snapPhoto.bind(this))}disconnectedCallback(){this.shadowRoot.querySelector("#snap").removeEventListener("click",this.snapPhoto.bind(this))}async snapPhoto(a){const e=this.shadowRoot.querySelector("#camera");if(e.hasAttribute("autoplay")){let a=await e.takeASnap(),n=await e.takeASnap().then(e.renderImage);e.removeAttribute("autoplay");const t=this.shadowRoot.querySelector("#selfie");t.innerHTML="",t.appendChild(n),this.dispatchEvent(new CustomEvent("simple-camera-snap-image",{bubbles:!0,composed:!0,cancelable:!0,detail:{img:n,raw:a}})),t.classList.add("has-snap")}else this.clearPhoto(a)}clearPhoto(a){this.shadowRoot.querySelector("#camera").setAttribute("autoplay","autoplay");const e=this.shadowRoot.querySelector("#selfie");e.innerHTML="",e.classList.remove("has-snap")}}window.customElements.define(SimpleCameraSnap.tag,SimpleCameraSnap);export{SimpleCameraSnap};