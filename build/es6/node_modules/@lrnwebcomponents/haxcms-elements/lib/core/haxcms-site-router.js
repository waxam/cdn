import{Router as e}from"../../../../@vaadin/router/dist/vaadin-router.js";import{autorun as t}from"../../../../mobx/lib/mobx.module.js";import{store as o}from"./haxcms-site-store.js";class HAXCMSSiteRouter extends HTMLElement{get baseURI(){return this.getAttribute("base-uri")}set baseURI(e){this.setAttribute("base-uri",e)}static get tag(){return"haxcms-site-router"}constructor(){super();let i={};this.baseURI&&(i.baseUrl=this.baseURI),this.router=new e(this,i),this.__disposer=t(()=>{this._updateRouter(o.routerManifest)}),window.addEventListener("vaadin-router-location-changed",this._routerLocationChanged.bind(this))}disconnectedCallback(){this.__disposer(),window.removeEventListener("vaadin-router-location-changed",this._routerLocationChanged.bind(this)),super.disconnectedCallback()}_updateRouter(e){if(!e||void 0===e.items)return;const t=e.items.map(e=>({path:e.slug,name:e.id,component:`fake-${e.id}-e`}));this.router.setRoutes([...t,{path:"/",component:"fake-home-e",name:"home"},{path:"/(.*)",component:"fake-404-e",name:"404"}])}_routerLocationChanged(e){o.location=e.detail.location}}window.customElements.define(HAXCMSSiteRouter.tag,HAXCMSSiteRouter);export{HAXCMSSiteRouter};