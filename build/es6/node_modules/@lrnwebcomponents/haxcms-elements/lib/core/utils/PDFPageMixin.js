import{html as t}from"../../../../../lit/index.js";import{store as o}from"../haxcms-site-store.js";import"../../../../hax-iconset/lib/simple-hax-iconset.js";import{b64toBlob as e}from"../../../../utils/utils.js";import{MicroFrontendRegistry as i}from"../../../../micro-frontend-registry/micro-frontend-registry.js";import{HAXCMSI18NMixin as r}from"./HAXCMSI18NMixin.js";import{toJS as n}from"../../../../../mobx/dist/mobx.esm.js";import{enableServices as s}from"../../../../micro-frontend-registry/lib/microServices.js";export const PDFPageMixin=function(a){return class extends(r(a)){constructor(){super(),s(["core"]),this.t=this.t||{},this.t={...this.t,downloadContentPdf:"Download Content PDF"}}PDFPageButton(){return t`
      ${i.has("@core/htmlToPdf")?t`
      <div class="pdf-page-btn" part="${this.editMode?"edit-mode-active":""}">
        <simple-icon-button-lite
          part="pdf-page-btn"
          label="${this.t.downloadContentPdf}"
          icon="lrn:pdf"
          @click="${this.downloadPDFviaMicro}"
          show-text-label
          icon-position="top"
        >
        </simple-icon-button-lite>
      </div>`:""}
      `}async downloadPDFviaMicro(t){let r=n(o.activeItemContent);var s="";document.querySelector("base")&&(s=document.querySelector("base").href);const a=await i.call("@core/htmlToPdf",{base:s,html:r});if(200==a.status&&a.data){const t=document.createElement("a");t.href=window.URL.createObjectURL(e(a.data,"application/pdf")),t.download=`${n(o.activeTitle)}.pdf`,t.target="_blank",this.appendChild(t),t.click(),this.removeChild(t)}}}};