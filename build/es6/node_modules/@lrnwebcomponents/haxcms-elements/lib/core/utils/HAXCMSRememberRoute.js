import{store as e}from"../haxcms-site-store.js";import{autorun as t,toJS as s}from"../../../../../mobx/dist/mobx.esm.js";const HAXCMSRememberRoute=function(a){return class extends a{constructor(){super();const a="Resume where you left off last session?";this.menuOpen=!0,this.__evaluateRoute=!1,this.t?(this.t.resumeMessage=a,this.t.resume="Resume"):this.t={resumeMessage:a,resume:"Resume"},t((t=>{const a=s(e.location.pathname);a&&this.__evaluateRoute&&window.localStorage.setItem(`HAXCMSlastRoute-${e.manifest.metadata.site.name}`,a)}))}firstUpdated(t){super.firstUpdated&&super.firstUpdated(t),setTimeout((()=>{e&&e.location&&e.location.pathname&&window.localStorage.getItem(`HAXCMSlastRoute-${e.manifest.metadata.site.name}`)&&window.localStorage.getItem(`HAXCMSlastRoute-${e.manifest.metadata.site.name}`)!=s(e.location.pathname)&&import("../../../../simple-toast/simple-toast.js").then((()=>{window.SimpleToast.requestAvailability();let t=document.createElement("a");t.setAttribute("href",window.localStorage.getItem(`HAXCMSlastRoute-${e.manifest.metadata.site.name}`)),t.addEventListener("click",this.resumeLastRoute.bind(this)),t.innerHTML=`<button>${this.t.resume}</button>`;new URLSearchParams(window.location.search).get("format")||e.toast(this.t.resumeMessage,8e3,"capsule",null,null,t)})),this.__evaluateRoute=!0}),1e3)}resumeLastRoute(e){window.dispatchEvent(new CustomEvent("simple-toast-hide",{bubbles:!0,composed:!0,cancelable:!1,detail:!1}))}}};export{HAXCMSRememberRoute};