import{html,PolymerElement}from"../../../../../@polymer/polymer/polymer-element.js";import"../../../../jwt-login/jwt-login.js";import{store}from"../haxcms-site-store.js";import{pathFromUrl}from"../../../../../@polymer/polymer/lib/utils/resolve-url.js";class HAXCMSBackendPHP extends PolymerElement{static get tag(){return"haxcms-backend-php"}static get template(){return html`
      <jwt-login
        id="jwt"
        url="[[jwtLoginLocation]]"
        url-logout="[[jwtLogoutLocation]]"
        jwt="{{jwt}}"
      ></jwt-login>
    `}static get properties(){return{jwtLoginLocation:{type:String,value:function(){if(window.appSettings){return window.appSettings.login}}},jwtLogoutLocation:{type:String,value:function(){if(window.appSettings){return window.appSettings.logout}}},jwt:{type:String}}}constructor(){super();document.body.addEventListener("jwt-token",this._jwtTokenFired.bind(this))}disconnectedCallback(){document.body.removeEventListener("jwt-token",this._jwtTokenFired.bind(this));super.disconnectedCallback()}_jwtTokenFired(e){this.jwt=e.detail}connectedCallback(){super.connectedCallback();if(null!=this.jwt&&"string"==typeof this.jwt){try{import(pathFromUrl(decodeURIComponent(import.meta.url))+"../haxcms-site-editor.js").then(()=>{let haxCmsSiteEditorElement=document.createElement("haxcms-site-editor");haxCmsSiteEditorElement.jwt=this.jwt;haxCmsSiteEditorElement.saveNodePath=window.appSettings.saveNodePath;haxCmsSiteEditorElement.saveManifestPath=window.appSettings.saveManifestPath;haxCmsSiteEditorElement.saveOutlinePath=window.appSettings.saveOutlinePath;haxCmsSiteEditorElement.getNodeFieldsPath=window.appSettings.getNodeFieldsPath;haxCmsSiteEditorElement.getSiteFieldsPath=window.appSettings.getSiteFieldsPath;haxCmsSiteEditorElement.getFieldsToken=window.appSettings.getFieldsToken;haxCmsSiteEditorElement.publishSitePath=window.appSettings.publishSitePath;haxCmsSiteEditorElement.createNodePath=window.appSettings.createNodePath;haxCmsSiteEditorElement.deleteNodePath=window.appSettings.deleteNodePath;haxCmsSiteEditorElement.appStore=window.appSettings.appStore;store.cmsSiteEditor.instance.haxCmsSiteEditorElement=haxCmsSiteEditorElement;store.cmsSiteEditor.instance.appendTarget.appendChild(haxCmsSiteEditorElement)},()=>{})}catch(err){}}}}window.customElements.define(HAXCMSBackendPHP.tag,HAXCMSBackendPHP);export{HAXCMSBackendPHP};