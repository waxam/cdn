import{html,Polymer}from"../../../../../@polymer/polymer/polymer-legacy.js";import"../../../../jwt-login/jwt-login.js";import{pathFromUrl}from"../../../../../@polymer/polymer/lib/utils/resolve-url.js";Polymer({is:"haxcms-backend-php",_template:html`
    <style>
      :host {
        display: block;
      }
    </style>
    <jwt-login
      id="jwt"
      url="[[jwtLoginLocation]]"
      url-logout="[[jwtLogoutLocation]]"
      jwt="{{jwt}}"
    ></jwt-login>
  `,properties:{jwtLoginLocation:{type:String,value:function(){if(window.appSettings){return window.appSettings.login}}},jwtLogoutLocation:{type:String,value:function(){if(window.appSettings){return window.appSettings.logout}}},jwt:{type:String}},created:function(){document.body.addEventListener("jwt-token",this._jwtTokenFired.bind(this));document.body.addEventListener("json-outline-schema-active-item-changed",this.initialItem.bind(this));document.body.addEventListener("json-outline-schema-changed",this.initialManifest.bind(this));document.body.addEventListener("json-outline-schema-active-body-changed",this.initialBody.bind(this))},detached:function(){document.body.removeEventListener("jwt-token",this._jwtTokenFired.bind(this));document.body.removeEventListener("json-outline-schema-active-item-changed",this.initialItem.bind(this));document.body.removeEventListener("json-outline-schema-changed",this.initialManifest.bind(this));document.body.removeEventListener("json-outline-schema-active-body-changed",this.initialBody.bind(this))},initialItem:function(e){this.__item=e.detail},initialManifest:function(e){this.__manifest=e.detail},initialBody:function(e){this.__body=e.detail},_jwtTokenFired:function(e){this.jwt=e.detail},attached:function(){if(null!=this.jwt&&"string"==typeof this.jwt){try{import(pathFromUrl(decodeURIComponent(import.meta.url))+"../haxcms-site-editor.js").then(()=>{let haxCmsSiteEditorElement=document.createElement("haxcms-site-editor");haxCmsSiteEditorElement.jwt=this.jwt;haxCmsSiteEditorElement.savePagePath=window.appSettings.savePagePath;haxCmsSiteEditorElement.saveManifestPath=window.appSettings.saveManifestPath;haxCmsSiteEditorElement.saveOutlinePath=window.appSettings.saveOutlinePath;haxCmsSiteEditorElement.publishSitePath=window.appSettings.publishSitePath;haxCmsSiteEditorElement.createPagePath=window.appSettings.createPagePath;haxCmsSiteEditorElement.deletePagePath=window.appSettings.deletePagePath;haxCmsSiteEditorElement.appStore=window.appSettings.appStore;if(typeof this.__item!==typeof void 0){haxCmsSiteEditorElement.activeItem=this.__item}if(typeof this.__manifest!==typeof void 0){console.log("well it was here");haxCmsSiteEditorElement.manifest=this.__manifest}if(typeof this.__body!==typeof void 0){haxCmsSiteEditorElement.__body=this.__body}window.cmsSiteEditor.instance.haxCmsSiteEditorElement=haxCmsSiteEditorElement;window.cmsSiteEditor.instance.appendTarget.appendChild(haxCmsSiteEditorElement)},()=>{})}catch(err){}}}});