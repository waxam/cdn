import"../../simple-colors/simple-colors.js";window.HAXCMSBehaviors=window.HAXCMSBehaviors||{};window.HAXCMSBehaviors.Theme={properties:{editMode:{type:Boolean,reflectToAttribute:!0,value:!1,notify:!0},activeItem:{type:Object,notify:!0,observer:"_activeItemChanged"},manifest:{type:Object,notify:!0,observer:"_manifestChanged"}},_globalEditChanged:function(e){this.editMode=e.detail},_activeItemChanged:function(newValue){if(newValue&&typeof newValue.id!==typeof void 0){this.fire("json-outline-schema-active-item-changed",newValue);if(typeof newValue.title!==typeof void 0){document.title=this.manifest.title+" - "+newValue.title}else{document.title=this.manifest.title+" - "+this.manifest.description}}else{document.title=this.manifest.title+" - "+this.manifest.description}},_activeItemUpdate:function(e){this.set("activeItem",e.detail);this.notifyPath("activeItem.*")},setupHAXTheme:function(load=!0,injector=this.$.contentcontainer){if(load){document.body.addEventListener("haxcms-edit-mode-changed",this._globalEditChanged.bind(this));document.body.addEventListener("json-outline-schema-changed",this._manifestUpdate.bind(this));document.body.addEventListener("haxcms-active-item-changed",this._activeItemUpdate.bind(this));document.body.addEventListener("haxcms-trigger-update",this._triggerUpdate.bind(this));if(typeof window.cmsSiteEditor!==typeof void 0){window.cmsSiteEditor.requestAvailability(this,injector)}}else{document.body.removeEventListener("haxcms-active-item-changed",this._activeItemUpdate.bind(this));document.body.removeEventListener("json-outline-schema-changed",this._manifestUpdate.bind(this));document.body.removeEventListener("haxcms-edit-mode-changed",this._globalEditChanged.bind(this));document.body.removeEventListener("haxcms-trigger-update",this._triggerUpdate.bind(this))}},_triggerUpdate:function(){this.fire("json-outline-schema-active-item-changed",{})},_manifestUpdate:function(e){this.set("manifest",e.detail);this.notifyPath("manifest.*")},_manifestChanged:function(newValue){if(typeof newValue.title!==typeof void 0){document.title=this.manifest.title+" - "+this.manifest.description}if(typeof newValue.metadata!==typeof void 0&&typeof newValue.metadata.cssVariable!==typeof void 0){let color=this.manifest.metadata.cssVariable.replace("--simple-colors-",""),ary=color.split("-");if(2==ary.length){color=ary[0];this.accentColor=color}else if(3==ary.length){color=ary[0]+" "+ary[1];this.accentColor=color}let haxcmscolor="";if(window.ShadyCSS){haxcmscolor=ShadyCSS.getComputedStyleValue(this,this.manifest.metadata.cssVariable)}else{haxcmscolor=getComputedStyle(this).getPropertyValue(this.manifest.metadata.cssVariable)}document.body.style.setProperty("--haxcms-color",haxcmscolor);this.updateStyles({"--haxcms-color":haxcmscolor})}}};