import{html,Polymer}from"../../../@polymer/polymer/polymer-legacy.js";import*as async from"../../../@polymer/polymer/lib/utils/async.js";import"../../../@polymer/paper-button/paper-button.js";import"../../../@polymer/paper-dialog-scrollable/paper-dialog-scrollable.js";import"../../outline-designer/outline-designer.js";Polymer({_template:html`
    <style>
      :host {
        display: block;
      }
    </style>
    <paper-dialog-scrollable>
      <outline-designer manifest="{{manifest}}" edit-mode></outline-designer>
    </paper-dialog-scrollable>
    <div class="buttons">
      <paper-button id="save" dialog-confirm="" on-tap="_saveTap"
        >Save</paper-button
      >
      <paper-button id="cancel" dialog-dismiss="">Cancel</paper-button>
    </div>
  `,is:"haxcms-outline-editor-dialog",properties:{opened:{type:Boolean,notify:!0},manifest:{type:Object,notify:!0}},ready:function(){document.body.addEventListener("json-outline-schema-changed",this._manifestChanged.bind(this))},attached:function(){async.microTask.run(()=>{if(typeof window.cmsSiteEditor.jsonOutlineSchema!==typeof void 0){this.set("manifest",window.cmsSiteEditor.jsonOutlineSchema);this.notifyPath("manifest.*")}})},detached:function(){document.body.removeEventListener("json-outline-schema-changed",this._manifestChanged.bind(this))},_manifestChanged:function(e){if(typeof e.detail.items!==typeof void 0){this.set("manifest",[]);this.set("manifest",e.detail);this.notifyPath("manifest.*")}},_saveTap:function(){this.fire("haxcms-save-outline",this.manifest.items)}});