import{html,PolymerElement}from"../../../../../@polymer/polymer/polymer-element.js";import{store}from"../../core/haxcms-site-store.js";import{autorun,toJS}from"../../../../../mobx/lib/mobx.module.js";import"../query/site-query-menu-slice.js";import"../../../../../@polymer/polymer/lib/elements/dom-repeat.js";import"../../../../../@polymer/paper-button/paper-button.js";class SiteChildrenBlock extends PolymerElement{static get tag(){return"site-children-block"}static get template(){return html`
      <style>
        :host {
          display: block;
          --site-children-block-indent: 16px;
          --site-children-block-link-active-bg: rgba(255, 255, 255, 0.1);
        }
        .wrapper {
          @apply --site-children-block-wrapper;
        }
        .spacing {
          @apply --site-children-block-spacing;
        }
        .link {
          display: block;
          color: var(--site-children-block-link-color, #444444);
          @apply --site-children-block-link;
        }
        paper-button {
          text-transform: unset;
          min-width: unset;
          width: 100%;
          margin: 0;
          border-radius: 0;
          justify-content: flex-start;
          @apply --site-children-block-button;
        }
        paper-button:hover,
        paper-button:focus,
        paper-button:active {
          @apply --site-children-block-button-active;
        }
        .active {
          color: var(--site-children-block-link-active-color, #000000);
          background-color: var(--site-children-block-link-active-bg);
          @apply --site-children-block-link-active;
        }
        .spacing .indent {
          display: inline-flex;
        }
        .indent-1 {
          margin-left: calc(var(--site-children-block-indent) * 1);
          @apply --site-children-block-indent-1;
        }
        .indent-2 {
          margin-left: calc(var(--site-children-block-indent) * 2);
          @apply --site-children-block-indent-1;
        }
        .indent-3 {
          margin-left: calc(var(--site-children-block-indent) * 3);
          @apply --site-children-block-indent-1;
        }
        .indent-4 {
          margin-left: calc(var(--site-children-block-indent) * 4);
          @apply --site-children-block-indent-1;
        }
        .indent-5 {
          margin-left: calc(var(--site-children-block-indent) * 5);
          @apply --site-children-block-indent-1;
        }
        .indent-6 {
          margin-left: calc(var(--site-children-block-indent) * 6);
          @apply --site-children-block-indent-1;
        }
        .indent-7 {
          margin-left: calc(var(--site-children-block-indent) * 7);
          @apply --site-children-block-indent-1;
        }
        .indent-8 {
          margin-left: calc(var(--site-children-block-indent) * 8);
          @apply --site-children-block-indent-1;
        }
        .indent-9 {
          margin-left: calc(var(--site-children-block-indent) * 9);
          @apply --site-children-block-indent-1;
        }
        .indent-10 {
          margin-left: calc(var(--site-children-block-indent) * 10);
          @apply --site-children-block-indent-1;
        }
      </style>
      <div class="wrapper">
        <site-query-menu-slice
          result="{{__items}}"
          dynamic-methodology="[[dynamicMethodology]]"
          start="[[start]]"
          end="[[end]]"
          parent="[[parent]]"
          fixed-id="[[fixedId]]"
        ></site-query-menu-slice>
        <dom-repeat items="[[__items]]">
          <template>
            <div class="spacing">
              <a
                data-id$="[[item.id]]"
                class="link"
                tabindex="-1"
                href$="[[item.location]]"
              >
                <paper-button noink="[[noink]]">
                  <div class$="indent indent-[[item.indent]]"></div>
                  [[item.title]]
                </paper-button>
              </a>
            </div>
          </template>
        </dom-repeat>
      </div>
    `}static get properties(){return{dynamicMethodology:{type:String,value:"direct"},start:{type:Number,value:1},end:{type:Number,value:1e3},parent:{type:String},fixedId:{type:Boolean,value:!1},noink:{type:Boolean,value:!1},__items:{type:Array,notify:!0},activeId:{type:String,observer:"_activeIdChanged"}}}_activeIdChanged(newValue){if(newValue){let el=null;if(this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")){el=this.shadowRoot.querySelector("[data-id=\""+newValue+"\"]")}else{let tmpItem=this.manifest.items.find(i=>i.id==newValue);while(null===el&&tmpItem&&null!=tmpItem.parent){tmpItem=this.manifest.items.find(i=>i.id==tmpItem.parent);if(tmpItem&&this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")){el=this.shadowRoot.querySelector("[data-id=\""+tmpItem.id+"\"]")}}}if(this._prevEl){this._prevEl.classList.remove("active")}if(el){el.classList.add("active");this._prevEl=el}}else{if(this._prevEl){this._prevEl.classList.remove("active")}}}connectedCallback(){super.connectedCallback();this.__disposer=autorun(()=>{this.manifest=toJS(store.manifest)});setTimeout(()=>{this.__disposer2=autorun(()=>{this.activeId=toJS(store.activeId)})},50)}disconnectedCallback(){super.disconnectedCallback();this.__disposer();if(this.__disposer2){this.__disposer2()}}}window.customElements.define(SiteChildrenBlock.tag,SiteChildrenBlock);export{SiteChildrenBlock};