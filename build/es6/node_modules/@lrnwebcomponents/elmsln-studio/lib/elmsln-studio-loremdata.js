/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as s,html as e,css as t}from"../../../lit-element/lit-element.js";import{ElmslnStudioUtilities as i}from"./elmsln-studio-utilities.js";import"../../lorem-data/lorem-data.js";class ElmslnStudioLoremdata extends(i(s)){static get tag(){return"elmsln-studio-loremdata"}static get properties(){return{endDate:{type:Object},lessonData:{type:Array},lorem:{type:Object},startDate:{type:Object},lessons:{type:Object},projects:{type:Object},assignments:{type:Object},portfolios:{type:Object},submissions:{type:Object},discussions:{type:Object},profile:{type:Object},users:{type:Object},activity:{type:Array}}}constructor(){super(),this.users={ixp23:{id:"ixp23",lastName:"Instructor",firstName:"Person",instructor:!0,image:"//placekitten.com/300/400"},hxb5122:{id:"hxb5122",lastName:"Brown",firstName:"Havana"},tmn823:{id:"tmn823",lastName:"Nebelung",firstName:"Tabby"},kmk5124:{id:"kmk5124",lastName:"Korat",firstName:"Kitty",image:"//placekitten.com/g/400/300"},tjm5488:{id:"tjm5488",lastName:"Manx",firstName:"Tortie",image:"//placekitten.com/400/300"},fms9811:{id:"fms9811",lastName:"Sphinx",firstName:"Felix"},tjc5167:{id:"tjc5167",lastName:"Cat",firstName:"Tom",image:"//placekitten.com/g/400/400"},cac488:{id:"cac488",lastName:"Coe",firstName:"Callie"},srf325:{id:"srf325",lastName:"Fold",firstName:"Scott",image:"//placekitten.com/400/400"}},this.lessonData=[{id:"lesson-1",lesson:"Lesson 1",assignments:[{id:"assignment-1",assignment:"Lesson 1 Reading"},{id:"project-1",project:"Hypertext Narrative Project",assignments:[{id:"assignment-2",assignment:"Discover: Word-Pairs"},{id:"assignment-3",assignment:"Define: Synopsis"},{id:"assignment-4",assignment:"Develop: Story and Plot Elements"},{id:"assignment-5",assignment:"Develop: Characters"},{id:"assignment-6",assignment:"Deliver: Hypertext Narrative Draft"},{id:"assignment-7",assignment:"Deliver: Feedback"},{id:"assignment-8",assignment:"Deliver: Iterate"},{id:"assignment-9",assignment:"Deliver: Iterate critique"},{id:"assignment-10",assignment:"Deliver: Iterate critique"},{id:"assignment-11",assignment:"Deliver: Hypertext Narrative"}]},{id:"assignment-12",assignment:"Lesson 1 Wrap-Up"}]},{id:"lesson-2",lesson:"Lesson 2",assignments:[{id:"assignment-13",assignment:"Lesson 2 Reading"},{id:"project-2",project:"Ritual Project",assignments:[{id:"assignment-14",assignment:"Discover: Interview"},{id:"assignment-15",assignment:"Discover: Journey Map"},{id:"assignment-16",assignment:"Define: Themes & Insights"},{id:"assignment-17",assignment:"Define: HMW"},{id:"assignment-18",assignment:"Develop: Brainstorm"},{id:"assignment-19",assignment:"Develop: Storyboard"},{id:"assignment-20",assignment:"Develop: Prototype"},{id:"assignment-21",assignment:"Develop: Test and Iterate"},{id:"assignment-22",assignment:"Deliver: Final Prototype"}]},{id:"assignment-23",assignment:"Lesson 2 Wrap-Up"}]},{id:"lesson-3",lesson:"Lesson 3",assignments:[{id:"assignment-24",assignment:"Lesson 2 Reading"},{id:"project-3",project:"Open Kit Project",assignments:[{id:"assignment-25",assignment:"Discover: Toy Research"},{id:"assignment-26",assignment:"Discover: Modular Research"},{id:"assignment-27",assignment:"Discover: Resources"},{id:"assignment-28",assignment:"Define: Product Pitch"},{id:"assignment-29",assignment:"Develop: Prototyping"},{id:"assignment-30",assignment:"Develop: Instructions"},{id:"assignment-31",assignment:"Develop: Test"},{id:"assignment-32",assignment:"Develop: Iterate"},{id:"assignment-33",assignment:"Deliver: Open Toy"}]},{id:"assignment-34",assignment:"Lesson 2 Wrap-Up"}]}],this.activity=[],this.profile={},this.projects={},this.lessons={},this.assignments={},this.portfolios={},this.submissions={},this.discussions={}}static get styles(){return[t``]}render(){return e`
      <lorem-data id="lorem" .schemas="${this.schemas||[]}"></lorem-data>
    `}get students(){return Object.keys(this.users||{}).filter(s=>!this.users[s].instructor).map(s=>this.users[s])}get instructors(){return Object.keys(this.users||{}).filter(s=>this.users[s].instructor).map(s=>this.users[s])}get schemas(){return{"users.json":{type:"data",data:this.users},"profile.json":{type:"data",data:this.profile},"activity.json":{type:"data",data:this.activity},"lessons.json":{type:"data",data:this.lessons},"projects.json":{type:"data",data:this.projects},"assignments.json":{type:"data",data:this.assignments},"portfolios.json":{type:"data",data:this.portfolios},"submissions.json":{type:"data",data:this.submissions},"discussion.json":{type:"data",data:this.discussions}}}firstUpdated(s){super.firstUpdated&&super.firstUpdated(s);let e=this.shadowRoot.getElementById("lorem"),t=e.addDays(void 0,-4-3*this.lessonData.length);this.lessonData.forEach((s,i)=>{let a=t,n=s.assignments.map((t,i)=>{if(t.project){let n=this._project(t,s.id,i,a,e);return this.projects[t.id]=n,a=e.addDays(a,t.assignments.length),n}{let n=this._assignment(t,s.id,void 0,i,a,e);return a=e.addDays(a,1),n}});this.lessons[s.id]={id:s.id,order:i,lesson:s.lesson,body:e.randomParagraph(2,6),assignments:n},t=e.addWeeks(t,1)}),Object.keys(this.assignments||{}).forEach((s,t)=>{let some=s=>Math.round(.333*s.length),most=s=>Math.round(.667*s.length),i=e.randomOption(["animals","arch","nature","people","tech"]),a=e.randomOption(["links","body","sources"]);(t>most(Object.keys(this.assignments||{}))?[]:t>some(Object.keys(this.assignments||{}))?e.draw(this.students,some(this.students),most(this.students)):this.students).forEach(t=>this._submission(s,t.id,i,a,s.date,e))}),Object.keys(this.submissions).forEach(s=>{let e=this.submissions[s];e.activity="submission",this.activity.push(e)}),Object.keys(this.discussions).forEach(s=>{let e=this.discussions[s];e.activity="discussion",this.activity.push(e),e.replies.forEach(s=>{let e=s;e.activity="reply",this.activity.push(e)})}),this.activity=e.sortDates(this.activity),this.profile=JSON.parse(JSON.stringify(e.randomOption(this.students))),this.profile.submissions=e.sortDates(Object.keys(this.submissions).filter(s=>this.submissions[s].userId===this.profile.id).map(s=>this.submissions[s])),this.profile.completed=this.profile.submissions.map(s=>s.assignmentId),this.profile.due=Object.keys(this.assignments).filter(s=>!this.profile.completed.includes(s)).map(s=>this.assignments[s]),this.profile.features=this.profile.submissions.filter(s=>s.feature).map(s=>s.id),this.profile.feedback=e.sortDates(this.profile.submissions.map(s=>s.feedback).flat().map(s=>this.discussions[s])),this.profile.given=Object.keys(this.discussions).filter(s=>this.discussions[s].userId===this.profile.id),this.profile.replies=Object.keys(this.discussions).map(s=>this.discussions[s].replies.filter(s=>s.userId===this.profile.id)).flat().map(s=>s.id),this.profile.discussions=[...this.profile.given,...this.profile.replies]}_assets(s,e,t){if(t){if("body"===s)return t.randomParagraph(2,6);{let i=t.randomNumber(1,7),a=[];for(let n=0;n<i;n++)"links"===s?a.push(t.randomLink()):a.push(t.randomImageData(t.randomAspect(200,600,200,600),e));return a}}return[]}_project(s,e,t,i,a){return a?{id:s.id,order:t,lessonId:e,project:s.project,body:a.randomParagraph(2,6),assignments:s.assignments.map((t,n)=>this._assignment(t,e,s.id,n,a.addDays(i,n),a))}:void 0}_assignment(s,e,t,i,a,n){if(n){let r=n.randomNumber(3,7),o={key:["Distinguished (4)","Proficient (3)","Apprentice (2)","Novice (1)"],values:[]};for(let s=0;s<r;s++)o.values.push([`${n.randomWord()} ${n.randomWord()}`,n.randomSentence(3,6)]);return this.assignments[s.id]={id:s.id,order:i,lessonId:e,projectId:t,assignment:s.assignment,showDate:Math.random>.8?n.addWeeks(a,-2):void 0,hideDate:Math.random>.8?n.addWeeks(a,2):void 0,date:a,rubric:o,body:n.randomParagraph(2,6)},this.assignments[s.id]}}_feedback(s,e,t,i){if(i){let a=`feedback-${Object.keys(this.discussions).length+1}`,n=i.draw([...this.students,...this.instructors],0,2),r=this.users[e],o=this.submissions[s],m=this.users[o.userId],d={id:a,userId:e,firstName:r&&r.firstName?r.firstName:"",lastName:r&&r.lastName?r.lastName:"",avatar:r&&r.image?r.image:void 0,submissionId:s,portfolioId:o.portfolioId,assignment:o.assignment,creatorId:o.userId,creatorFirstName:m&&m.firstName?m.firstName:"",creatorLastName:m&&m.lastName?m.lastName:"",creatorAvatar:m&&m.image?m.image:void 0,date:t,body:i.randomParagraph(1,4),read:Math.random()<.5,like:Math.random()<.5,replies:n.map((n,m)=>{let d,l=`${a}-reply-${m+1}`;return t=i.addMinutes(t,(m+1)*i.randomNumber(1,3e3)),d={id:l,feedbackId:a,userId:n.id,firstName:n&&n.firstName?n.firstName:"",lastName:n&&n.lastName?n.lastName:"",avatar:n&&n.image?n.image:void 0,reviewerId:e,reviewerFirstName:r&&r.firstName?r.firstName:"",reviewerLastName:r&&r.lastName?r.lastName:"",reviewerAvatar:r&&r.image?r.image:void 0,submissionId:s,submissionId:s,portfolioId:o.portfolioId,date:t,body:i.randomParagraph(2,6),read:Math.random()<.5,like:Math.random()<.5},d})};return this.discussions[a]=d,a}}_submission(s,e,t,i,a,n){if(n){let r=`${s}-${e}`,o=n.randomImageData(n.randomAspect(400,1200,400,1200),t),m=n.draw(this.students.filter(s=>s.id!==e),0,5),d=Math.round()>.75?n.draw(this.instructors,1,1):[],l=n.addHours(a,n.randomNumber(-40,48)),p=this.assignments&&this.assignments[s]?this.assignments[s]:void 0,c=p&&p.projectId?p.projectId:void 0,h=p&&p.lessonId?p.lessonId:void 0,g=this.projects&&this.projects[c]?this.projects[c]:void 0,u=this.lessons&&this.lessons[h]?this.lessons[h]:void 0,f=this.users[e],y={id:r,assignment:p&&p.assignment?p.assignment:"",project:g&&g.project?g.project:"",lesson:u&&u.lesson?u.lesson:"",portfolio:c?`${c}-${e}`:r,portfolioId:c?`${c}-${e}`:r,assignmentId:s,projectId:c,lessonId:h,userId:e,firstName:f&&f.firstName?f.firstName:"",lastName:f&&f.lastName?f.lastName:"",avatar:f&&f.image?f.image:"",date:l,image:o.src,thumbnail:o.src,full:o.src,imageAlt:o.alt,imageLongdesc:o.longdesc};Math.random()<.2&&(y.feature=n.randomParagraph(2,6)),this.portfolios[y.portfolioId]=this.portfolios[y.portfolioId]||{id:y.portfolioId,projectId:c,project:g&&g.project?g.project:"",userId:e,firstName:f&&f.firstName?f.firstName:"",lastName:f&&f.lastName?f.lastName:"",avatar:f&&f.image?f.image:"",submissions:[]},y[i]=this._assets(i,t,n),this.activity.push({id:r,activity:"submission",date:y.date}),this.submissions[r]=y,this.submissions[r].feedback=n.shuffle([...m,...d]).map((s,e)=>this._feedback(r,s.id,n.addMinutes(l,64*(e+1)),n)),this.portfolios[y.portfolioId].submissions.push(y)}}}customElements.define("elmsln-studio-loremdata",ElmslnStudioLoremdata);export{ElmslnStudioLoremdata};