/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import{LitElement as e,html as t,css as i}from"../../../lit-element/lit-element.js";import"../../../@polymer/iron-ajax/iron-ajax.js";import"../../../@polymer/iron-icon/iron-icon.js";import"../../../@polymer/iron-icons/iron-icons.js";import"../../nav-card/nav-card.js";import"../../lrndesign-avatar/lrndesign-avatar.js";import{AccentCard as r}from"../../accent-card/accent-card.js";const ElmslnStudioUtilities=function(e){return class extends e{static get properties(){return{...super.properties,demoMode:{type:Boolean,attribute:"demo-mode",reflect:!0}}}constructor(){super(),this.demoMode=!1}sortDates(e,t=!1){return e.sort((e,i)=>{let r="string"==typeof e.date?Date.parse(e.date):e.date,o="string"==typeof i.date?Date.parse(i.date):i.date;return t?r-o:o-r})}addDays(e=new Date,t=0){return new Date(Date.parse(e)+864e5*t)}addWeeks(e=new Date,t=0){return new Date(Date.parse(e)+6048e5*t)}toArray(e,t){return Object.keys(e||{}).map(i=>{let r=e[i];return r.id=i,Object.keys(t||{}).forEach(e=>r[e]=t[e]),r})}_late(e){return new Date(e)<new Date}_recentArray(e){return this.sortDates(this.toArray(e))}getAncestor(e,t){if(e&&t&&t.length>0){t[0][1];let i=t[0][0],r=e[`${t[0][1]}`];return this.getAncestor(i[r],t.slice(1))}return e}fullName(e,t=!1){return e&&!t?`${e.firstName} ${e.lastName}`:e?`${e.lastName}, ${e.firstName}`:""}dateFormat(e,t){return"string"==typeof e&&(e=new Date(e)),e?"long"===t?e.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"short"===t?e.toLocaleDateString(void 0,{month:"long",day:"numeric"}):e.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}):""}accentColor(e){let t=new r,i=t&&t.colors?Object.keys(t.colors):[""],o=e&&e.charCodeAt(0)?e.charCodeAt(0):Math.floor(16*Math.random());return i[o%16+1]?i[o%16+1]:i[Math.floor(Math.random()*i.length)]}getActivityLink(e,t=!1){return"submission"===e.activity?`/portfolios/${e.portfolioId||e.id}${e.portfolioId?`?submission=${e.id}`:""}${t?"":e.portfolioId?"&comment=true":"?comment=true"}`:"discussion"===e.activity?`/portfolios/${e.portfolioId||e.submissionId}${e.portfolioId?`?submission=${e.submissionId}&`:"?"}comment=${e.id}`:`/portfolios/${e.portfolioId||e.submissionId}${e.portfolioId?`?submission=${e.submissionId}&`:"?"}comment=${e.feedbackId}`}getActivityTitle(e){return t`
        ${[e.firstName,e.lastName].join(" ")}
        ${"submission"===e.activity?` submitted ${e.assignment}`:"discussion"===e.activity?` left feedback for ${[e.creatorFirstName,e.creatorLastName].join(" ")}`:` replied to ${[e.reviewerFirstName,e.reviewerLastName].join(" ")}`}
      `}activityLink(e,t){return"submission"===t?this.submissionLink(e):"feedback"===e.activity?this.feedbackLink(e):this.replyLink(e)}activityTitle(e,t){return"submission"===t?this.submissionTitle(e):"feedback"===e.activity?this.feedbackTitle(e):this.replyTitle(e)}submissionLink(e){return`/portfolios/${e.userId}-${e.projectId}?submission=${e.id}`}submissionTitle(e){return`${e.firstName} submitted ${e.assignment}`}feedbackLink(e){return`/portfolios/${e.creator}-${e.projectId}?submission=${e.submissionId}&comment=${e.id}`}feedbackTitle(e){return`${e.firstName} left feedback on ${e.creatorFirstName}'s\n        ${e.assignment}`}replyLink(e){return`/portfolios/${e.creator}-${e.projectId}?submission=${e.submissionId}&comment=${e.id}`}replyTitle(e){return`${e.firstName} replied to ${e.feedbackFirstName}'s feedback`}_getValign(e){return e&&e.indexOf("top")>-1?"top":e&&e.indexOf("bottom")>-1?"bottom":"center"}_getAlign(e){return e&&e.indexOf("left")>-1?"left":e&&e.indexOf("right")>-1?"right":"center"}_handleLinkButton(e,t){location.href=t,this.dispatchEvent(new CustomEvent("link-button-click",{bubbles:!0,cancelable:!0,composed:!0,detail:t}))}}};export{ElmslnStudioUtilities};