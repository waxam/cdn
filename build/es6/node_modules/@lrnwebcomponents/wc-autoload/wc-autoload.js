/**
 * Copyright 2020 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */
import"../dynamic-import-registry/dynamic-import-registry.js";window.WCAutoload=window.WCAutoload||{},window.WCAutoload.requestAvailability=()=>(window.WCAutoload.instance||(window.WCAutoload.instance=document.createElement("wc-autoload"),document.body.appendChild(window.WCAutoload.instance)),window.WCAutoload.instance),window.WCAutoload.process=t=>{let o=window.WCAutoload.requestAvailability();if(o.loaded=!0,window.WCAutoloadBasePath&&(o.registry.basePath=window.WCAutoloadBasePath),window.WCAutoloadRegistry)for(var e in window.WCAutoloadRegistry)o.registry.register({tag:e,path:window.WCAutoloadRegistry[e]});try{document.querySelectorAll(":not(:defined)").forEach((t,e)=>{o.processNewElement(t)})}catch(t){[].slice.call(document.body.children).forEach((t,e)=>{o.processNewElement(t)})}},window.addEventListener("load",window.WCAutoload.process),window.WCAutoload.postLoaded=t=>{setTimeout(()=>{let o=window.WCAutoload.requestAvailability();o.loaded&&document.querySelectorAll(t.detail.tag).length>0&&o.registry.loadDefinition(t.detail.tag)},0)},window.addEventListener("dynamic-import-registry--new-registration",window.WCAutoload.postLoaded);class WcAutoload extends HTMLElement{static get tag(){return"wc-autoload"}constructor(){super(),this.loaded=!1,this.registry=window.DynamicImportRegistry.requestAvailability()}connectedCallback(){this._mutationObserver=new MutationObserver(t=>{t.forEach(t=>{t.addedNodes.forEach(t=>{t.tagName&&this.processNewElement(t)})})}),this._mutationObserver.observe(document.body,{childList:!0,subtree:!0})}disconnectedCallback(){this._mutationObserver.disconnect()}processNewElement(t){this.registry.loadDefinition(t.tagName)}}window.customElements.define(WcAutoload.tag,WcAutoload);export{WcAutoload};