/*!
 * wavesurfer.js 2.1.0 (Mon Oct 01 2018 11:34:43 GMT+0200 (Central European Summer Time))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
!function webpackUniversalModuleDefinition(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("regions",[],t):"object"==typeof exports?exports.regions=t():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.regions=t())}(window,(function(){return function(e){var t={};function __webpack_require__(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}return __webpack_require__.m=e,__webpack_require__.c=t,__webpack_require__.d=function(e,t,r){__webpack_require__.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.t=function(e,t){if(1&t&&(e=__webpack_require__(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(__webpack_require__.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)__webpack_require__.d(r,n,function(t){return e[t]}.bind(null,n));return r},__webpack_require__.n=function(e){var t=e&&e.__esModule?function getDefault(){return e.default}:function getModuleExports(){return e};return __webpack_require__.d(t,"a",t),t},__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},__webpack_require__.p="localhost:8080/dist/plugin/",__webpack_require__(__webpack_require__.s="./src/plugin/regions.js")}({"./src/plugin/regions.js":
/*!*******************************!*\
      !*** ./src/plugin/regions.js ***!
      \*******************************/
/*! no static exports found */
function(e,t,r){function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=function(){function Region(e,t){var r=this;_classCallCheck(this,Region),this.wavesurfer=t,this.wrapper=t.drawer.wrapper,this.util=t.util,this.style=this.util.style,this.id=null==e.id?t.util.getId():e.id,this.start=Number(e.start)||0,this.end=null==e.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(e.end),this.resize=void 0===e.resize||Boolean(e.resize),this.drag=void 0===e.drag||Boolean(e.drag),this.loop=Boolean(e.loop),this.color=e.color||"rgba(0, 0, 0, 0.1)",this.data=e.data||{},this.attributes=e.attributes||{},this.maxLength=e.maxLength,this.minLength=e.minLength,this._onRedraw=function(){return r.updateRender()},this.scroll=!1!==e.scroll&&t.params.scrollParent,this.scrollSpeed=e.scrollSpeed||1,this.scrollThreshold=e.scrollThreshold||10,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}return _createClass(Region,[{key:"update",value:function update(e){null!=e.start&&(this.start=Number(e.start)),null!=e.end&&(this.end=Number(e.end)),null!=e.loop&&(this.loop=Boolean(e.loop)),null!=e.color&&(this.color=e.color),null!=e.data&&(this.data=e.data),null!=e.resize&&(this.resize=Boolean(e.resize)),null!=e.drag&&(this.drag=Boolean(e.drag)),null!=e.maxLength&&(this.maxLength=Number(e.maxLength)),null!=e.minLength&&(this.minLength=Number(e.minLength)),null!=e.attributes&&(this.attributes=e.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this)}},{key:"remove",value:function remove(){this.element&&(this.wrapper.removeChild(this.element),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function play(){this.wavesurfer.play(this.start,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function playLoop(){var e=this;this.play(),this.once("out",(function(){return e.playLoop()}))}},{key:"render",value:function render(){var e=document.createElement("region");for(var t in e.className="wavesurfer-region",e.title=this.formatTime(this.start,this.end),e.setAttribute("data-id",this.id),this.attributes)e.setAttribute("data-region-"+t,this.attributes[t]);this.wrapper.scrollWidth;if(this.style(e,{position:"absolute",zIndex:2,height:"100%",top:"0px"}),this.resize){var r=e.appendChild(document.createElement("handle")),n=e.appendChild(document.createElement("handle"));r.className="wavesurfer-handle wavesurfer-handle-start",n.className="wavesurfer-handle wavesurfer-handle-end";var i={cursor:"col-resize",position:"absolute",left:"0px",top:"0px",width:"1%",maxWidth:"4px",height:"100%"};this.style(r,i),this.style(n,i),this.style(n,{left:"100%"})}this.element=this.wrapper.appendChild(e),this.updateRender(),this.bindEvents(e)}},{key:"formatTime",value:function formatTime(e,t){return(e==t?[e]:[e,t]).map((function(e){return[Math.floor(e%3600/60),("00"+Math.floor(e%60)).slice(-2)].join(":")})).join("-")}},{key:"getWidth",value:function getWidth(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function updateRender(){var e=this.wavesurfer.getDuration(),t=this.getWidth();if(this.start<0&&(this.start=0,this.end=this.end-this.start),this.end>e&&(this.end=e,this.start=e-(this.end-this.start)),null!=this.minLength&&(this.end=Math.max(this.start+this.minLength,this.end)),null!=this.maxLength&&(this.end=Math.min(this.start+this.maxLength,this.end)),null!=this.element){var r=Math.round(this.start/e*t),n=Math.round(this.end/e*t)-r;for(var i in this.style(this.element,{left:r+"px",width:n+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+i,this.attributes[i]);this.element.title=this.formatTime(this.start,this.end)}}},{key:"bindInOut",value:function bindInOut(){var e=this;this.firedIn=!1,this.firedOut=!1;var t=function onProcess(t){!e.firedOut&&e.firedIn&&(e.start>=Math.round(100*t)/100||e.end<=Math.round(100*t)/100)&&(e.firedOut=!0,e.firedIn=!1,e.fireEvent("out"),e.wavesurfer.fireEvent("region-out",e)),!e.firedIn&&e.start<=t&&e.end>t&&(e.firedIn=!0,e.firedOut=!1,e.fireEvent("in"),e.wavesurfer.fireEvent("region-in",e))};this.wavesurfer.backend.on("audioprocess",t),this.on("remove",(function(){e.wavesurfer.backend.un("audioprocess",t)})),this.on("out",(function(){e.loop&&e.wavesurfer.play(e.start)}))}},{key:"bindEvents",value:function bindEvents(){var e,t,r,n,i,s,a,o,u,l,d,h,c,f,v,p,g=this;this.element.addEventListener("mouseenter",(function(e){g.fireEvent("mouseenter",e),g.wavesurfer.fireEvent("region-mouseenter",g,e)})),this.element.addEventListener("mouseleave",(function(e){g.fireEvent("mouseleave",e),g.wavesurfer.fireEvent("region-mouseleave",g,e)})),this.element.addEventListener("click",(function(e){e.preventDefault(),g.fireEvent("click",e),g.wavesurfer.fireEvent("region-click",g,e)})),this.element.addEventListener("dblclick",(function(e){e.stopPropagation(),e.preventDefault(),g.fireEvent("dblclick",e),g.wavesurfer.fireEvent("region-dblclick",g,e)})),(this.drag||this.resize)&&(o=g.wavesurfer.drawer.container,u=g.wavesurfer.getDuration(),l=g.scrollSpeed,d=g.scrollThreshold,h=!1,c=function edgeScroll(t){if(s&&(r||i)){var a=g.wrapper.scrollLeft+l*s;g.wrapper.scrollLeft=a=Math.min(n,Math.max(0,a));var o=g.wavesurfer.drawer.handleEvent(t)*u,d=o-e;e=o,r?g.onDrag(d):g.onResize(d,i),window.requestAnimationFrame((function(){edgeScroll(t)}))}},f=function onDown(s){s.touches&&s.touches.length>1||(t=s.targetTouches?s.targetTouches[0].identifier:null,s.stopPropagation(),e=g.wavesurfer.drawer.handleEvent(s,!0)*u,n=g.wrapper.scrollWidth-g.wrapper.clientWidth,a=g.wrapper.getBoundingClientRect(),"handle"==s.target.tagName.toLowerCase()?i=s.target.classList.contains("wavesurfer-handle-start")?"start":"end":(r=!0,i=!1))},v=function onUp(e){e.touches&&e.touches.length>1||((r||i)&&(r=!1,s=null,i=!1),h&&(h=!1,g.util.preventClick(),g.fireEvent("update-end",e),g.wavesurfer.fireEvent("region-update-end",g,e)))},p=function onMove(n){if(!(n.touches&&n.touches.length>1)&&(!n.targetTouches||n.targetTouches[0].identifier==t)&&(r||i)){var l=e,f=g.wavesurfer.drawer.handleEvent(n)*u,v=f-e;if(e=f,g.drag&&r&&(h=h||!!v,g.onDrag(v)),g.resize&&i&&(h=h||!!v,g.onResize(v,i)),g.scroll&&o.clientWidth<g.wrapper.scrollWidth){if(r){var p=g.element.getBoundingClientRect(),m=p.left-a.left;f<l&&m>=0?s=-1:f>l&&m+p.width<=a.right&&(s=1),(-1===s&&m>d||1===s&&m+p.width<a.right-d)&&(s=null)}else{var w=n.clientX-a.left;s=w<=d?-1:w>=a.right-d?1:null}s&&c(n)}}},g.element.addEventListener("mousedown",f),g.element.addEventListener("touchstart",f),g.wrapper.addEventListener("mousemove",p),g.wrapper.addEventListener("touchmove",p),document.body.addEventListener("mouseup",v),document.body.addEventListener("touchend",v),g.on("remove",(function(){document.body.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v),g.wrapper.removeEventListener("mousemove",p),g.wrapper.removeEventListener("touchmove",p)})),g.wavesurfer.on("destroy",(function(){document.body.removeEventListener("mouseup",v),document.body.removeEventListener("touchend",v)})))}},{key:"onDrag",value:function onDrag(e){var t=this.wavesurfer.getDuration();this.end+e>t||this.start+e<0||this.update({start:this.start+e,end:this.end+e})}},{key:"onResize",value:function onResize(e,t){"start"==t?this.update({start:Math.min(this.start+e,this.end),end:Math.max(this.start+e,this.end)}):this.update({start:Math.min(this.end+e,this.start),end:Math.max(this.end+e,this.start)})}}]),Region}(),i=function(){function RegionsPlugin(e,t){var r=this;_classCallCheck(this,RegionsPlugin),this.params=e,this.wavesurfer=t,this.util=t.util,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((function(e){n.prototype[e]=r.util.Observer.prototype[e]})),this.wavesurfer.Region=n,this.list={},this._onReady=function(){r.wrapper=r.wavesurfer.drawer.wrapper,r.params.regions&&r.params.regions.forEach((function(e){r.add(e)})),r.params.dragSelection&&r.enableDragSelection(r.params)}}return _createClass(RegionsPlugin,null,[{key:"create",value:function create(e){return{name:"regions",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,staticProps:{initRegions:function initRegions(){console.warn('Deprecated initRegions! Use wavesurfer.initPlugins("regions") instead!'),this.initPlugin("regions")},addRegion:function addRegion(e){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(e)},clearRegions:function clearRegions(){this.regions&&this.regions.clear()},enableDragSelection:function enableDragSelection(e){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(e)},disableDragSelection:function disableDragSelection(){this.regions.disableDragSelection()}},instance:RegionsPlugin}}}]),_createClass(RegionsPlugin,[{key:"init",value:function init(){this.wavesurfer.isReady&&this._onReady(),this.wavesurfer.on("ready",this._onReady)}},{key:"destroy",value:function destroy(){this.wavesurfer.un("ready",this._onReady),this.disableDragSelection(),this.clear()}},{key:"add",value:function add(e){var t=this,r=new this.wavesurfer.Region(e,this.wavesurfer);return this.list[r.id]=r,r.on("remove",(function(){delete t.list[r.id]})),r}},{key:"clear",value:function clear(){var e=this;Object.keys(this.list).forEach((function(t){e.list[t].remove()}))}},{key:"enableDragSelection",value:function enableDragSelection(e){var t,r,n,i,s,a,o,u=this,l=e.slop||2,d=this.wavesurfer.drawer.container,h=!1!==e.scroll&&this.wavesurfer.params.scrollParent,c=e.scrollSpeed||1,f=e.scrollThreshold||10,v=this.wavesurfer.getDuration(),p=0,g=function edgeScroll(e){if(i&&a){var t=u.wrapper.scrollLeft+c*a;u.wrapper.scrollLeft=t=Math.min(r,Math.max(0,t));var s=u.wavesurfer.drawer.handleEvent(e);i.update({start:Math.min(s*v,n*v),end:Math.max(s*v,n*v)}),t<r&&t>0&&window.requestAnimationFrame((function(){edgeScroll(e)}))}},m=function eventDown(e){e.touches&&e.touches.length>1||(v=u.wavesurfer.getDuration(),s=e.targetTouches?e.targetTouches[0].identifier:null,r=u.wrapper.scrollWidth-u.wrapper.clientWidth,o=u.wrapper.getBoundingClientRect(),t=!0,n=u.wavesurfer.drawer.handleEvent(e,!0),i=null,a=null)};this.wrapper.addEventListener("mousedown",m),this.wrapper.addEventListener("touchstart",m),this.on("disable-drag-selection",(function(){u.wrapper.removeEventListener("touchstart",m),u.wrapper.removeEventListener("mousedown",m)}));var w=function eventUp(e){e.touches&&e.touches.length>1||(t=!1,p=0,a=null,i&&(u.util.preventClick(),i.fireEvent("update-end",e),u.wavesurfer.fireEvent("region-update-end",i,e)),i=null)};this.wrapper.addEventListener("mouseup",w),this.wrapper.addEventListener("touchend",w),document.body.addEventListener("mouseup",w),document.body.addEventListener("touchend",w),this.on("disable-drag-selection",(function(){document.body.removeEventListener("mouseup",w),document.body.removeEventListener("touchend",w),u.wrapper.removeEventListener("touchend",w),u.wrapper.removeEventListener("mouseup",w)}));var _=function eventMove(r){if(t&&!(++p<=l||r.touches&&r.touches.length>1||r.targetTouches&&r.targetTouches[0].identifier!=s)){i||(i=u.add(e||{}));var c=u.wavesurfer.drawer.handleEvent(r);if(i.update({start:Math.min(c*v,n*v),end:Math.max(c*v,n*v)}),h&&d.clientWidth<u.wrapper.scrollWidth){var m=r.clientX-o.left;(a=m<=f?-1:m>=o.right-f?1:null)&&g(r)}}};this.wrapper.addEventListener("mousemove",_),this.wrapper.addEventListener("touchmove",_),this.on("disable-drag-selection",(function(){u.wrapper.removeEventListener("touchmove",_),u.wrapper.removeEventListener("mousemove",_)}))}},{key:"disableDragSelection",value:function disableDragSelection(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function getCurrentRegion(){var e=this,t=this.wavesurfer.getCurrentTime(),r=null;return Object.keys(this.list).forEach((function(n){var i=e.list[n];i.start<=t&&i.end>=t&&(!r||i.end-i.start<r.end-r.start)&&(r=i)})),r}}]),RegionsPlugin}();t.default=i,e.exports=t.default}})}));