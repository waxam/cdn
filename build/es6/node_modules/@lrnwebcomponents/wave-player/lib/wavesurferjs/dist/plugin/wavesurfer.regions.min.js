/*!
 * wavesurfer.js 2.1.0 (Mon Oct 01 2018 11:34:54 GMT+0200 (Central European Summer Time))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
var a,o;a=window,o=function(){return function(a){var o={};function i(u){if(o[u])return o[u].exports;var l=o[u]={i:u,l:!1,exports:{}};return a[u].call(l.exports,l,l.exports,i),l.l=!0,l.exports}return i.m=a,i.c=o,i.d=function(a,o,u){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:u})},i.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(1&o&&(a=i(a)),8&o)return a;if(4&o&&"object"==typeof a&&a&&a.__esModule)return a;var u=Object.create(null);if(i.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:a}),2&o&&"string"!=typeof a)for(var l in a)i.d(u,l,function(o){return a[o]}.bind(null,l));return u},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="localhost:8080/dist/plugin/",i(i.s=2)}({2:function(a,o,u){function i(a,o){if(!(a instanceof o))throw new TypeError("Cannot call a class as a function")}function n(a,o){for(var u=0;u<o.length;u++){var l=o[u];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(a,l.key,l)}}function s(a,o,u){return o&&n(a.prototype,o),u&&n(a,u),a}Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var l=function(){function n(a,o){var u=this;i(this,n),this.wavesurfer=o,this.wrapper=o.drawer.wrapper,this.util=o.util,this.style=this.util.style,this.id=null==a.id?o.util.getId():a.id,this.start=Number(a.start)||0,this.end=null==a.end?this.start+4/this.wrapper.scrollWidth*this.wavesurfer.getDuration():Number(a.end),this.resize=void 0===a.resize||Boolean(a.resize),this.drag=void 0===a.drag||Boolean(a.drag),this.loop=Boolean(a.loop),this.color=a.color||"rgba(0, 0, 0, 0.1)",this.data=a.data||{},this.attributes=a.attributes||{},this.maxLength=a.maxLength,this.minLength=a.minLength,this._onRedraw=function(){return u.updateRender()},this.scroll=!1!==a.scroll&&o.params.scrollParent,this.scrollSpeed=a.scrollSpeed||1,this.scrollThreshold=a.scrollThreshold||10,this.bindInOut(),this.render(),this.wavesurfer.on("zoom",this._onRedraw),this.wavesurfer.on("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-created",this)}return s(n,[{key:"update",value:function(a){null!=a.start&&(this.start=Number(a.start)),null!=a.end&&(this.end=Number(a.end)),null!=a.loop&&(this.loop=Boolean(a.loop)),null!=a.color&&(this.color=a.color),null!=a.data&&(this.data=a.data),null!=a.resize&&(this.resize=Boolean(a.resize)),null!=a.drag&&(this.drag=Boolean(a.drag)),null!=a.maxLength&&(this.maxLength=Number(a.maxLength)),null!=a.minLength&&(this.minLength=Number(a.minLength)),null!=a.attributes&&(this.attributes=a.attributes),this.updateRender(),this.fireEvent("update"),this.wavesurfer.fireEvent("region-updated",this)}},{key:"remove",value:function(){this.element&&(this.wrapper.removeChild(this.element),this.element=null,this.fireEvent("remove"),this.wavesurfer.un("zoom",this._onRedraw),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.fireEvent("region-removed",this))}},{key:"play",value:function(){this.wavesurfer.play(this.start,this.end),this.fireEvent("play"),this.wavesurfer.fireEvent("region-play",this)}},{key:"playLoop",value:function(){var a=this;this.play(),this.once("out",(function(){return a.playLoop()}))}},{key:"render",value:function(){var a=document.createElement("region");for(var o in a.className="wavesurfer-region",a.title=this.formatTime(this.start,this.end),a.setAttribute("data-id",this.id),this.attributes)a.setAttribute("data-region-"+o,this.attributes[o]);if(this.wrapper.scrollWidth,this.style(a,{position:"absolute",zIndex:2,height:"100%",top:"0px"}),this.resize){var u=a.appendChild(document.createElement("handle")),l=a.appendChild(document.createElement("handle"));u.className="wavesurfer-handle wavesurfer-handle-start",l.className="wavesurfer-handle wavesurfer-handle-end";var d={cursor:"col-resize",position:"absolute",left:"0px",top:"0px",width:"1%",maxWidth:"4px",height:"100%"};this.style(u,d),this.style(l,d),this.style(l,{left:"100%"})}this.element=this.wrapper.appendChild(a),this.updateRender(),this.bindEvents(a)}},{key:"formatTime",value:function(a,o){return(a==o?[a]:[a,o]).map((function(a){return[Math.floor(a%3600/60),("00"+Math.floor(a%60)).slice(-2)].join(":")})).join("-")}},{key:"getWidth",value:function(){return this.wavesurfer.drawer.width/this.wavesurfer.params.pixelRatio}},{key:"updateRender",value:function(){var a=this.wavesurfer.getDuration(),o=this.getWidth();if(this.start<0&&(this.start=0,this.end=this.end-this.start),this.end>a&&(this.end=a,this.start=a-(this.end-this.start)),null!=this.minLength&&(this.end=Math.max(this.start+this.minLength,this.end)),null!=this.maxLength&&(this.end=Math.min(this.start+this.maxLength,this.end)),null!=this.element){var u=Math.round(this.start/a*o),l=Math.round(this.end/a*o)-u;for(var d in this.style(this.element,{left:u+"px",width:l+"px",backgroundColor:this.color,cursor:this.drag?"move":"default"}),this.attributes)this.element.setAttribute("data-region-"+d,this.attributes[d]);this.element.title=this.formatTime(this.start,this.end)}}},{key:"bindInOut",value:function(){var a=this;this.firedIn=!1,this.firedOut=!1;var e=function(o){!a.firedOut&&a.firedIn&&(a.start>=Math.round(100*o)/100||a.end<=Math.round(100*o)/100)&&(a.firedOut=!0,a.firedIn=!1,a.fireEvent("out"),a.wavesurfer.fireEvent("region-out",a)),!a.firedIn&&a.start<=o&&a.end>o&&(a.firedIn=!0,a.firedOut=!1,a.fireEvent("in"),a.wavesurfer.fireEvent("region-in",a))};this.wavesurfer.backend.on("audioprocess",e),this.on("remove",(function(){a.wavesurfer.backend.un("audioprocess",e)})),this.on("out",(function(){a.loop&&a.wavesurfer.play(a.start)}))}},{key:"bindEvents",value:function(){var a,o,u,l,d,h,c,f,v,p,m,g,w,y,b,E=this;this.element.addEventListener("mouseenter",(function(a){E.fireEvent("mouseenter",a),E.wavesurfer.fireEvent("region-mouseenter",E,a)})),this.element.addEventListener("mouseleave",(function(a){E.fireEvent("mouseleave",a),E.wavesurfer.fireEvent("region-mouseleave",E,a)})),this.element.addEventListener("click",(function(a){a.preventDefault(),E.fireEvent("click",a),E.wavesurfer.fireEvent("region-click",E,a)})),this.element.addEventListener("dblclick",(function(a){a.stopPropagation(),a.preventDefault(),E.fireEvent("dblclick",a),E.wavesurfer.fireEvent("region-dblclick",E,a)})),(this.drag||this.resize)&&(f=E.wavesurfer.drawer.container,v=E.wavesurfer.getDuration(),p=E.scrollSpeed,m=E.scrollThreshold,g=!1,w=function(h){h.touches&&1<h.touches.length||(o=h.targetTouches?h.targetTouches[0].identifier:null,h.stopPropagation(),a=E.wavesurfer.drawer.handleEvent(h,!0)*v,l=E.wrapper.scrollWidth-E.wrapper.clientWidth,c=E.wrapper.getBoundingClientRect(),d="handle"==h.target.tagName.toLowerCase()?h.target.classList.contains("wavesurfer-handle-start")?"start":"end":!(u=!0))},y=function(a){a.touches&&1<a.touches.length||((u||d)&&(h=null,d=u=!1),g&&(g=!1,E.util.preventClick(),E.fireEvent("update-end",a),E.wavesurfer.fireEvent("region-update-end",E,a)))},b=function(w){if(!(w.touches&&1<w.touches.length)&&(!w.targetTouches||w.targetTouches[0].identifier==o)&&(u||d)){var y=a,b=E.wavesurfer.drawer.handleEvent(w)*v,L=b-a;if(a=b,E.drag&&u&&(g=g||!!L,E.onDrag(L)),E.resize&&d&&(g=g||!!L,E.onResize(L,d)),E.scroll&&f.clientWidth<E.wrapper.scrollWidth){if(u){var k=E.element.getBoundingClientRect(),x=k.left-c.left;b<y&&0<=x?h=-1:y<b&&x+k.width<=c.right&&(h=1),(-1===h&&m<x||1===h&&x+k.width<c.right-m)&&(h=null)}else{var R=w.clientX-c.left;h=R<=m?-1:R>=c.right-m?1:null}h&&function e(o){if(h&&(u||d)){var c=E.wrapper.scrollLeft+p*h;E.wrapper.scrollLeft=c=Math.min(l,Math.max(0,c));var f=E.wavesurfer.drawer.handleEvent(o)*v,m=f-a;a=f,u?E.onDrag(m):E.onResize(m,d),window.requestAnimationFrame((function(){e(o)}))}}(w)}}},E.element.addEventListener("mousedown",w),E.element.addEventListener("touchstart",w),E.wrapper.addEventListener("mousemove",b),E.wrapper.addEventListener("touchmove",b),document.body.addEventListener("mouseup",y),document.body.addEventListener("touchend",y),E.on("remove",(function(){document.body.removeEventListener("mouseup",y),document.body.removeEventListener("touchend",y),E.wrapper.removeEventListener("mousemove",b),E.wrapper.removeEventListener("touchmove",b)})),E.wavesurfer.on("destroy",(function(){document.body.removeEventListener("mouseup",y),document.body.removeEventListener("touchend",y)})))}},{key:"onDrag",value:function(a){var o=this.wavesurfer.getDuration();this.end+a>o||this.start+a<0||this.update({start:this.start+a,end:this.end+a})}},{key:"onResize",value:function(a,o){"start"==o?this.update({start:Math.min(this.start+a,this.end),end:Math.max(this.start+a,this.end)}):this.update({start:Math.min(this.end+a,this.start),end:Math.max(this.end+a,this.start)})}}]),n}(),d=function(){function n(a,o){var u=this;i(this,n),this.params=a,this.wavesurfer=o,this.util=o.util,Object.getOwnPropertyNames(this.util.Observer.prototype).forEach((function(a){l.prototype[a]=u.util.Observer.prototype[a]})),this.wavesurfer.Region=l,this.list={},this._onReady=function(){u.wrapper=u.wavesurfer.drawer.wrapper,u.params.regions&&u.params.regions.forEach((function(a){u.add(a)})),u.params.dragSelection&&u.enableDragSelection(u.params)}}return s(n,null,[{key:"create",value:function(a){return{name:"regions",deferInit:!(!a||!a.deferInit)&&a.deferInit,params:a,staticProps:{initRegions:function(){console.warn('Deprecated initRegions! Use wavesurfer.initPlugins("regions") instead!'),this.initPlugin("regions")},addRegion:function(a){return this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.add(a)},clearRegions:function(){this.regions&&this.regions.clear()},enableDragSelection:function(a){this.initialisedPluginList.regions||this.initPlugin("regions"),this.regions.enableDragSelection(a)},disableDragSelection:function(){this.regions.disableDragSelection()}},instance:n}}}]),s(n,[{key:"init",value:function(){this.wavesurfer.isReady&&this._onReady(),this.wavesurfer.on("ready",this._onReady)}},{key:"destroy",value:function(){this.wavesurfer.un("ready",this._onReady),this.disableDragSelection(),this.clear()}},{key:"add",value:function(a){var o=this,u=new this.wavesurfer.Region(a,this.wavesurfer);return(this.list[u.id]=u).on("remove",(function(){delete o.list[u.id]})),u}},{key:"clear",value:function(){var a=this;Object.keys(this.list).forEach((function(o){a.list[o].remove()}))}},{key:"enableDragSelection",value:function(a){var o,u,l,d,h,c,f,v=this,p=a.slop||2,m=this.wavesurfer.drawer.container,g=!1!==a.scroll&&this.wavesurfer.params.scrollParent,w=a.scrollSpeed||1,y=a.scrollThreshold||10,b=this.wavesurfer.getDuration(),E=0,e=function(a){a.touches&&1<a.touches.length||(b=v.wavesurfer.getDuration(),h=a.targetTouches?a.targetTouches[0].identifier:null,u=v.wrapper.scrollWidth-v.wrapper.clientWidth,f=v.wrapper.getBoundingClientRect(),o=!0,l=v.wavesurfer.drawer.handleEvent(a,!0),c=d=null)};this.wrapper.addEventListener("mousedown",e),this.wrapper.addEventListener("touchstart",e),this.on("disable-drag-selection",(function(){v.wrapper.removeEventListener("touchstart",e),v.wrapper.removeEventListener("mousedown",e)}));var t=function(a){a.touches&&1<a.touches.length||(o=!1,E=0,c=null,d&&(v.util.preventClick(),d.fireEvent("update-end",a),v.wavesurfer.fireEvent("region-update-end",d,a)),d=null)};this.wrapper.addEventListener("mouseup",t),this.wrapper.addEventListener("touchend",t),document.body.addEventListener("mouseup",t),document.body.addEventListener("touchend",t),this.on("disable-drag-selection",(function(){document.body.removeEventListener("mouseup",t),document.body.removeEventListener("touchend",t),v.wrapper.removeEventListener("touchend",t),v.wrapper.removeEventListener("mouseup",t)}));var r=function(L){if(o&&!(++E<=p||L.touches&&1<L.touches.length||L.targetTouches&&L.targetTouches[0].identifier!=h)){d||(d=v.add(a||{}));var k=v.wavesurfer.drawer.handleEvent(L);if(d.update({start:Math.min(k*b,l*b),end:Math.max(k*b,l*b)}),g&&m.clientWidth<v.wrapper.scrollWidth){var x=L.clientX-f.left;(c=x<=y?-1:x>=f.right-y?1:null)&&function e(a){if(d&&c){var o=v.wrapper.scrollLeft+w*c;v.wrapper.scrollLeft=o=Math.min(u,Math.max(0,o));var h=v.wavesurfer.drawer.handleEvent(a);d.update({start:Math.min(h*b,l*b),end:Math.max(h*b,l*b)}),o<u&&0<o&&window.requestAnimationFrame((function(){e(a)}))}}(L)}}};this.wrapper.addEventListener("mousemove",r),this.wrapper.addEventListener("touchmove",r),this.on("disable-drag-selection",(function(){v.wrapper.removeEventListener("touchmove",r),v.wrapper.removeEventListener("mousemove",r)}))}},{key:"disableDragSelection",value:function(){this.fireEvent("disable-drag-selection")}},{key:"getCurrentRegion",value:function(){var a=this,o=this.wavesurfer.getCurrentTime(),u=null;return Object.keys(this.list).forEach((function(l){var d=a.list[l];d.start<=o&&d.end>=o&&(!u||d.end-d.start<u.end-u.start)&&(u=d)})),u}}]),n}();o.default=d,a.exports=o.default}})},"object"==typeof exports&&"object"==typeof module?module.exports=o():"function"==typeof define&&define.amd?define("regions",[],o):"object"==typeof exports?exports.regions=o():(a.WaveSurfer=a.WaveSurfer||{},a.WaveSurfer.regions=o());