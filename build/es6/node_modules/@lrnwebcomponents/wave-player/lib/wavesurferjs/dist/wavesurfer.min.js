/*!
 * wavesurfer.js 2.1.0 (Mon Oct 01 2018 11:34:49 GMT+0200 (Central European Summer Time))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
var t,m;t=window,m=function(){return function(t){var m={};function i(b){if(m[b])return m[b].exports;var g=m[b]={i:b,l:!1,exports:{}};return t[b].call(g.exports,g,g.exports,i),g.l=!0,g.exports}return i.m=t,i.c=m,i.d=function(t,m,b){i.o(t,m)||Object.defineProperty(t,m,{enumerable:!0,get:b})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,m){if(1&m&&(t=i(t)),8&m)return t;if(4&m&&"object"==typeof t&&t&&t.__esModule)return t;var b=Object.create(null);if(i.r(b),Object.defineProperty(b,"default",{enumerable:!0,value:t}),2&m&&"string"!=typeof t)for(var g in t)i.d(b,g,function(m){return t[m]}.bind(null,g));return b},i.n=function(t){var m=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(m,"a",m),m},i.o=function(t,m){return Object.prototype.hasOwnProperty.call(t,m)},i.p="",i(i.s=4)}([function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),Object.defineProperty(m,"ajax",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(m,"getId",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(m,"max",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(m,"min",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(m,"Observer",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(m,"extend",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(m,"style",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(m,"requestAnimationFrame",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(m,"frame",{enumerable:!0,get:function(){return j.default}}),Object.defineProperty(m,"debounce",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(m,"preventClick",{enumerable:!0,get:function(){return _.default}});var g=p(b(5)),k=p(b(6)),w=p(b(7)),P=p(b(8)),x=p(b(1)),C=p(b(9)),E=p(b(10)),O=p(b(2)),j=p(b(11)),R=p(b(12)),_=p(b(13));function p(t){return t&&t.__esModule?t:{default:t}}},function(t,m,b){function i(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=function(){function e(){!function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,e),this.handlers=null}var t,m;return t=e,(m=[{key:"on",value:function(t,m){var b=this;this.handlers||(this.handlers={});var g=this.handlers[t];return g||(g=this.handlers[t]=[]),g.push(m),{name:t,callback:m,un:function(t,m){return b.un(t,m)}}}},{key:"un",value:function(t,m){if(this.handlers){var b,g=this.handlers[t];if(g)if(m)for(b=g.length-1;0<=b;b--)g[b]==m&&g.splice(b,1);else g.length=0}}},{key:"unAll",value:function(){this.handlers=null}},{key:"once",value:function(t,m){var b=this;return this.on(t,(function e(){for(var g=arguments.length,k=new Array(g),w=0;w<g;w++)k[w]=arguments[w];m.apply(b,k),setTimeout((function(){b.un(t,e)}),0)}))}},{key:"fireEvent",value:function(t){for(var m=arguments.length,b=new Array(1<m?m-1:0),g=1;g<m;g++)b[g-1]=arguments[g];if(this.handlers){var k=this.handlers[t];k&&k.forEach((function(t){t.apply(void 0,b)}))}}}])&&i(t.prototype,m),e}();m.default=g,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,m){return setTimeout(t,1e3/60)}).bind(window);m.default=g,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=function(t){if(t&&t.__esModule)return t;var m={};if(null!=t)for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,b):{};g.get||g.set?Object.defineProperty(m,b,g):m[b]=t[b]}return m.default=t,m}(b(0));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,m,b){return m in t?Object.defineProperty(t,m,{value:b,enumerable:!0,configurable:!0,writable:!0}):t[m]=b,t}function s(t,m){return!m||"object"!==i(m)&&"function"!=typeof m?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):m}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}function l(t,m,b){return m&&u(t.prototype,m),b&&u(t,b),t}function c(t,m){return(c=Object.setPrototypeOf||function(t,m){return t.__proto__=m,t})(t,m)}var k="playing",w="paused",P="finished",x=function(t){function i(t){var m,b,g;return function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,i),(g=s(this,o(i).call(this))).audioContext=null,g.offlineAudioContext=null,g.stateBehaviors=(a(m={},k,{init:function(){this.addOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition+this.getPlayedTime()}}),a(m,w,{init:function(){this.removeOnAudioProcess()},getPlayedPercents:function(){var t=this.getDuration();return this.getCurrentTime()/t||0},getCurrentTime:function(){return this.startPosition}}),a(m,P,{init:function(){this.removeOnAudioProcess(),this.fireEvent("finish")},getPlayedPercents:function(){return 1},getCurrentTime:function(){return this.getDuration()}}),m),g.params=t,g.ac=t.audioContext||g.getAudioContext(),g.lastPlay=g.ac.currentTime,g.startPosition=0,g.scheduledPause=null,g.states=(a(b={},k,Object.create(g.stateBehaviors[k])),a(b,w,Object.create(g.stateBehaviors[w])),a(b,P,Object.create(g.stateBehaviors[P])),b),g.analyser=null,g.buffer=null,g.filters=[],g.gainNode=null,g.mergedPeaks=null,g.offlineAc=null,g.peaks=null,g.playbackRate=1,g.analyser=null,g.scriptNode=null,g.source=null,g.splitPeaks=[],g.state=null,g.explicitDuration=null,g}return function(t,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(m&&m.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),m&&c(t,m)}(i,g.Observer),l(i,[{key:"supportsWebAudio",value:function(){return!(!window.AudioContext&&!window.webkitAudioContext)}},{key:"getAudioContext",value:function(){return window.WaveSurferAudioContext||(window.WaveSurferAudioContext=new(window.AudioContext||window.webkitAudioContext)),window.WaveSurferAudioContext}},{key:"getOfflineAudioContext",value:function(t){return window.WaveSurferOfflineAudioContext||(window.WaveSurferOfflineAudioContext=new(window.OfflineAudioContext||window.webkitOfflineAudioContext)(1,2,t)),window.WaveSurferOfflineAudioContext}}]),l(i,[{key:"init",value:function(){this.createVolumeNode(),this.createScriptNode(),this.createAnalyserNode(),this.setState(w),this.setPlaybackRate(this.params.audioRate),this.setLength(0)}},{key:"disconnectFilters",value:function(){this.filters&&(this.filters.forEach((function(t){t&&t.disconnect()})),this.filters=null,this.analyser.connect(this.gainNode))}},{key:"setState",value:function(t){this.state!==this.states[t]&&(this.state=this.states[t],this.state.init.call(this))}},{key:"setFilter",value:function(){for(var t=arguments.length,m=new Array(t),b=0;b<t;b++)m[b]=arguments[b];this.setFilters(m)}},{key:"setFilters",value:function(t){this.disconnectFilters(),t&&t.length&&(this.filters=t,this.analyser.disconnect(),t.reduce((function(t,m){return t.connect(m),m}),this.analyser).connect(this.gainNode))}},{key:"createScriptNode",value:function(){this.params.audioScriptProcessor?this.scriptNode=this.params.audioScriptProcessor:this.ac.createScriptProcessor?this.scriptNode=this.ac.createScriptProcessor(i.scriptBufferSize):this.scriptNode=this.ac.createJavaScriptNode(i.scriptBufferSize),this.scriptNode.connect(this.ac.destination)}},{key:"addOnAudioProcess",value:function(){var t=this;this.scriptNode.onaudioprocess=function(){var m=t.getCurrentTime();m>=t.getDuration()?(t.setState(P),t.fireEvent("pause")):m>=t.scheduledPause?t.pause():t.state===t.states[k]&&t.fireEvent("audioprocess",m)}}},{key:"removeOnAudioProcess",value:function(){this.scriptNode.onaudioprocess=null}},{key:"createAnalyserNode",value:function(){this.analyser=this.ac.createAnalyser(),this.analyser.connect(this.gainNode)}},{key:"createVolumeNode",value:function(){this.ac.createGain?this.gainNode=this.ac.createGain():this.gainNode=this.ac.createGainNode(),this.gainNode.connect(this.ac.destination)}},{key:"setSinkId",value:function(t){if(t){var m=new window.Audio;if(!m.setSinkId)return Promise.reject(new Error("setSinkId is not supported in your browser"));m.autoplay=!0;var b=this.ac.createMediaStreamDestination();return this.gainNode.disconnect(),this.gainNode.connect(b),m.srcObject=b.stream,m.setSinkId(t)}return Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"setVolume",value:function(t){this.gainNode.gain.setValueAtTime(t,this.ac.currentTime)}},{key:"getVolume",value:function(){return this.gainNode.gain.value}},{key:"decodeArrayBuffer",value:function(t,m,b){this.offlineAc||(this.offlineAc=this.getOfflineAudioContext(this.ac&&this.ac.sampleRate?this.ac.sampleRate:44100)),this.offlineAc.decodeAudioData(t,(function(t){return m(t)}),b)}},{key:"setPeaks",value:function(t,m){this.explicitDuration=m,this.peaks=t}},{key:"setLength",value:function(t){if(!this.mergedPeaks||t!=2*this.mergedPeaks.length-1+2){this.splitPeaks=[],this.mergedPeaks=[];var m,b=this.buffer?this.buffer.numberOfChannels:1;for(m=0;m<b;m++)this.splitPeaks[m]=[],this.splitPeaks[m][2*(t-1)]=0,this.splitPeaks[m][2*(t-1)+1]=0;this.mergedPeaks[2*(t-1)]=0,this.mergedPeaks[2*(t-1)+1]=0}}},{key:"getPeaks",value:function(t,m,b){if(this.peaks)return this.peaks;if(m=m||0,b=b||t-1,this.setLength(t),!this.buffer.length){var g=this.createBuffer(1,4096,this.sampleRate);this.buffer=g.buffer}var k,w=this.buffer.length/t,P=~~(w/10)||1,x=this.buffer.numberOfChannels;for(k=0;k<x;k++){var C=this.splitPeaks[k],E=this.buffer.getChannelData(k),O=void 0;for(O=m;O<=b;O++){var j=~~(O*w),R=~~(j+w),_=0,S=0,M=void 0;for(M=j;M<R;M+=P){var T=E[M];S<T&&(S=T),T<_&&(_=T)}C[2*O]=S,C[2*O+1]=_,(0==k||S>this.mergedPeaks[2*O])&&(this.mergedPeaks[2*O]=S),(0==k||_<this.mergedPeaks[2*O+1])&&(this.mergedPeaks[2*O+1]=_)}}return this.params.splitChannels?this.splitPeaks:this.mergedPeaks}},{key:"getPlayedPercents",value:function(){return this.state.getPlayedPercents.call(this)}},{key:"disconnectSource",value:function(){this.source&&this.source.disconnect()}},{key:"destroy",value:function(){this.isPaused()||this.pause(),this.unAll(),this.buffer=null,this.disconnectFilters(),this.disconnectSource(),this.gainNode.disconnect(),this.scriptNode.disconnect(),this.analyser.disconnect(),this.params.closeAudioContext&&("function"==typeof this.ac.close&&"closed"!=this.ac.state&&this.ac.close(),this.ac=null,this.params.audioContext?this.params.audioContext=null:window.WaveSurferAudioContext=null,window.WaveSurferOfflineAudioContext=null)}},{key:"load",value:function(t){this.startPosition=0,this.lastPlay=this.ac.currentTime,this.buffer=t,this.createSource()}},{key:"createSource",value:function(){this.disconnectSource(),this.source=this.ac.createBufferSource(),this.source.start=this.source.start||this.source.noteGrainOn,this.source.stop=this.source.stop||this.source.noteOff,this.source.playbackRate.setValueAtTime(this.playbackRate,this.ac.currentTime),this.source.buffer=this.buffer,this.source.connect(this.analyser)}},{key:"isPaused",value:function(){return this.state!==this.states[k]}},{key:"getDuration",value:function(){return this.buffer?this.buffer.duration:this.explicitDuration?this.explicitDuration:0}},{key:"seekTo",value:function(t,m){if(this.buffer)return(this.scheduledPause=null)==t&&(t=this.getCurrentTime())>=this.getDuration()&&(t=0),null==m&&(m=this.getDuration()),this.startPosition=t,this.lastPlay=this.ac.currentTime,this.state===this.states[P]&&this.setState(w),{start:t,end:m}}},{key:"getPlayedTime",value:function(){return(this.ac.currentTime-this.lastPlay)*this.playbackRate}},{key:"play",value:function(t,m){if(this.buffer){this.createSource();var b=this.seekTo(t,m);t=b.start,m=b.end,this.scheduledPause=m,this.source.start(0,t,m-t),"suspended"==this.ac.state&&this.ac.resume&&this.ac.resume(),this.setState(k),this.fireEvent("play")}}},{key:"pause",value:function(){this.scheduledPause=null,this.startPosition+=this.getPlayedTime(),this.source&&this.source.stop(0),this.setState(w),this.fireEvent("pause")}},{key:"getCurrentTime",value:function(){return this.state.getCurrentTime.call(this)}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(t){t=t||1,this.isPaused()?this.playbackRate=t:(this.pause(),this.playbackRate=t,this.play())}}]),i}();(m.default=x).scriptBufferSize=256,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=function(t){if(t&&t.__esModule)return t;var m={};if(null!=t)for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,b):{};g.get||g.set?Object.defineProperty(m,b,g):m[b]=t[b]}return m.default=t,m}(b(0)),k=n(b(14)),w=n(b(3)),P=n(b(16)),x=n(b(17));function n(t){return t&&t.__esModule?t:{default:t}}function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,m){return!m||"object"!==l(m)&&"function"!=typeof m?d(t):m}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function f(t,m){return(f=Object.setPrototypeOf||function(t,m){return t.__proto__=m,t})(t,m)}function d(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}function y(t,m,b){return m&&v(t.prototype,m),b&&v(t,b),t}var C=function(t){function n(t){var m;if(function p(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,n),(m=c(this,h(n).call(this))).defaultParams={audioContext:null,audioRate:1,autoCenter:!0,backend:"WebAudio",barHeight:1,barGap:null,container:null,cursorColor:"#333",cursorWidth:1,dragSelection:!0,fillParent:!0,forceDecode:!1,height:128,hideScrollbar:!1,interact:!0,loopSelection:!0,maxCanvasWidth:4e3,mediaContainer:null,mediaControls:!1,mediaType:"audio",minPxPerSec:20,normalize:!1,partialRender:!1,pixelRatio:window.devicePixelRatio||screen.deviceXDPI/screen.logicalXDPI,plugins:[],progressColor:"#555",removeMediaElementOnDestroy:!0,renderer:k.default,responsive:!1,scrollParent:!1,skipLength:2,splitChannels:!1,waveColor:"#999",xhr:{}},m.backends={MediaElement:P.default,WebAudio:w.default},m.util=g,m.params=g.extend({},m.defaultParams,t),m.container="string"==typeof t.container?document.querySelector(m.params.container):m.params.container,!m.container)throw new Error("Container element not found");if(null==m.params.mediaContainer?m.mediaContainer=m.container:"string"==typeof m.params.mediaContainer?m.mediaContainer=document.querySelector(m.params.mediaContainer):m.mediaContainer=m.params.mediaContainer,!m.mediaContainer)throw new Error("Media Container element not found");if(m.params.maxCanvasWidth<=1)throw new Error("maxCanvasWidth must be greater than 1");if(m.params.maxCanvasWidth%2==1)throw new Error("maxCanvasWidth must be an even number");if(m.savedVolume=0,m.isMuted=!1,m.tmpEvents=[],m.currentAjax=null,m.arraybuffer=null,m.drawer=null,m.backend=null,m.peakCache=null,"function"!=typeof m.params.renderer)throw new Error("Renderer parameter is invalid");m.Drawer=m.params.renderer,m.Backend=m.backends[m.params.backend],m.initialisedPluginList={},m.isDestroyed=!1,m.isReady=!1;var b=0;return m._onResize=g.debounce((function(){b==m.drawer.wrapper.clientWidth||m.params.scrollParent||(b=m.drawer.wrapper.clientWidth,m.drawer.fireEvent("redraw"))}),"number"==typeof m.params.responsive?m.params.responsive:100),c(m,d(d(m)))}return function(t,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(m&&m.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),m&&f(t,m)}(n,g.Observer),y(n,null,[{key:"create",value:function(t){return new n(t).init()}}]),y(n,[{key:"init",value:function(){return this.registerPlugins(this.params.plugins),this.createDrawer(),this.createBackend(),this.createPeakCache(),this}},{key:"registerPlugins",value:function(t){var m=this;return t.forEach((function(t){return m.addPlugin(t)})),t.forEach((function(t){t.deferInit||m.initPlugin(t.name)})),this.fireEvent("plugins-registered",t),this}},{key:"addPlugin",value:function(t){var m=this;if(!t.name)throw new Error("Plugin does not have a name!");if(!t.instance)throw new Error("Plugin ".concat(t.name," does not have an instance property!"));t.staticProps&&Object.keys(t.staticProps).forEach((function(b){m[b]=t.staticProps[b]}));var b=t.instance;return Object.getOwnPropertyNames(g.Observer.prototype).forEach((function(t){b.prototype[t]=g.Observer.prototype[t]})),this[t.name]=new b(t.params||{},this),this.fireEvent("plugin-added",t.name),this}},{key:"initPlugin",value:function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet!"));return this.initialisedPluginList[t]&&this.destroyPlugin(t),this[t].init(),this.initialisedPluginList[t]=!0,this.fireEvent("plugin-initialised",t),this}},{key:"destroyPlugin",value:function(t){if(!this[t])throw new Error("Plugin ".concat(t," has not been added yet and cannot be destroyed!"));if(!this.initialisedPluginList[t])throw new Error("Plugin ".concat(t," is not active and cannot be destroyed!"));if("function"!=typeof this[t].destroy)throw new Error("Plugin ".concat(t," does not have a destroy function!"));return this[t].destroy(),delete this.initialisedPluginList[t],this.fireEvent("plugin-destroyed",t),this}},{key:"destroyAllPlugins",value:function(){var t=this;Object.keys(this.initialisedPluginList).forEach((function(m){return t.destroyPlugin(m)}))}},{key:"createDrawer",value:function(){var t=this;this.drawer=new this.Drawer(this.container,this.params),this.drawer.init(),this.fireEvent("drawer-created",this.drawer),!1!==this.params.responsive&&(window.addEventListener("resize",this._onResize,!0),window.addEventListener("orientationchange",this._onResize,!0)),this.drawer.on("redraw",(function(){t.drawBuffer(),t.drawer.progress(t.backend.getPlayedPercents())})),this.drawer.on("click",(function(m,b){setTimeout((function(){return t.seekTo(b)}),0)})),this.drawer.on("scroll",(function(m){t.params.partialRender&&t.drawBuffer(),t.fireEvent("scroll",m)}))}},{key:"createBackend",value:function(){var t=this;this.backend&&this.backend.destroy(),"AudioElement"==this.params.backend&&(this.params.backend="MediaElement"),"WebAudio"!=this.params.backend||this.Backend.prototype.supportsWebAudio.call(null)||(this.params.backend="MediaElement"),this.backend=new this.Backend(this.params),this.backend.init(),this.fireEvent("backend-created",this.backend),this.backend.on("finish",(function(){return t.fireEvent("finish")})),this.backend.on("play",(function(){return t.fireEvent("play")})),this.backend.on("pause",(function(){return t.fireEvent("pause")})),this.backend.on("audioprocess",(function(m){t.drawer.progress(t.backend.getPlayedPercents()),t.fireEvent("audioprocess",m)}))}},{key:"createPeakCache",value:function(){this.params.partialRender&&(this.peakCache=new x.default)}},{key:"getDuration",value:function(){return this.backend.getDuration()}},{key:"getCurrentTime",value:function(){return this.backend.getCurrentTime()}},{key:"setCurrentTime",value:function(t){t>=this.getDuration()?this.seekTo(1):this.seekTo(t/this.getDuration())}},{key:"play",value:function(t,m){var b=this;return this.fireEvent("interaction",(function(){return b.play(t,m)})),this.backend.play(t,m)}},{key:"pause",value:function(){if(!this.backend.isPaused())return this.backend.pause()}},{key:"playPause",value:function(){return this.backend.isPaused()?this.play():this.pause()}},{key:"isPlaying",value:function(){return!this.backend.isPaused()}},{key:"skipBackward",value:function(t){this.skip(-t||-this.params.skipLength)}},{key:"skipForward",value:function(t){this.skip(t||this.params.skipLength)}},{key:"skip",value:function(t){var m=this.getDuration()||1,b=this.getCurrentTime()||0;b=Math.max(0,Math.min(m,b+(t||0))),this.seekAndCenter(b/m)}},{key:"seekAndCenter",value:function(t){this.seekTo(t),this.drawer.recenter(t)}},{key:"seekTo",value:function(t){var m=this;if("number"!=typeof t||!isFinite(t)||t<0||1<t)return console.error("Error calling wavesurfer.seekTo, parameter must be a number between 0 and 1!");this.fireEvent("interaction",(function(){return m.seekTo(t)}));var b=this.backend.isPaused();b||this.backend.pause();var g=this.params.scrollParent;this.params.scrollParent=!1,this.backend.seekTo(t*this.getDuration()),this.drawer.progress(t),b||this.backend.play(),this.params.scrollParent=g,this.fireEvent("seek",t)}},{key:"stop",value:function(){this.pause(),this.seekTo(0),this.drawer.progress(0)}},{key:"setSinkId",value:function(t){return this.backend.setSinkId(t)}},{key:"setVolume",value:function(t){this.backend.setVolume(t),this.fireEvent("volume",t)}},{key:"getVolume",value:function(){return this.backend.getVolume()}},{key:"setPlaybackRate",value:function(t){this.backend.setPlaybackRate(t)}},{key:"getPlaybackRate",value:function(){return this.backend.getPlaybackRate()}},{key:"toggleMute",value:function(){this.setMute(!this.isMuted)}},{key:"setMute",value:function(t){t!==this.isMuted&&(t?(this.savedVolume=this.backend.getVolume(),this.backend.setVolume(0),this.isMuted=!0,this.fireEvent("volume",0)):(this.backend.setVolume(this.savedVolume),this.isMuted=!1,this.fireEvent("volume",this.savedVolume))),this.fireEvent("mute",this.isMuted)}},{key:"getMute",value:function(){return this.isMuted}},{key:"isReady",value:function(){return this.isReady}},{key:"getFilters",value:function(){return this.backend.filters||[]}},{key:"toggleScroll",value:function(){this.params.scrollParent=!this.params.scrollParent,this.drawBuffer()}},{key:"toggleInteraction",value:function(){this.params.interact=!this.params.interact}},{key:"getWaveColor",value:function(){return this.params.waveColor}},{key:"setWaveColor",value:function(t){this.params.waveColor=t,this.drawBuffer()}},{key:"getProgressColor",value:function(){return this.params.progressColor}},{key:"setProgressColor",value:function(t){this.params.progressColor=t,this.drawBuffer()}},{key:"getCursorColor",value:function(){return this.params.cursorColor}},{key:"setCursorColor",value:function(t){this.params.cursorColor=t,this.drawer.updateCursor()}},{key:"getHeight",value:function(){return this.params.height}},{key:"setHeight",value:function(t){this.params.height=t,this.drawer.setHeight(t*this.params.pixelRatio),this.drawBuffer()}},{key:"drawBuffer",value:function(){var t,m=Math.round(this.getDuration()*this.params.minPxPerSec*this.params.pixelRatio),b=this.drawer.getWidth(),g=m,k=this.drawer.getScrollX(),w=Math.max(k+b,g);if(this.params.fillParent&&(!this.params.scrollParent||m<b)&&(k=0,w=g=b),this.params.partialRender){var P,x=this.peakCache.addRangeToPeakCache(g,k,w);for(P=0;P<x.length;P++)t=this.backend.getPeaks(g,x[P][0],x[P][1]),this.drawer.drawPeaks(t,g,x[P][0],x[P][1])}else t=this.backend.getPeaks(g,k,w),this.drawer.drawPeaks(t,g,k,w);this.fireEvent("redraw",t,g)}},{key:"zoom",value:function(t){this.params.scrollParent=t?(this.params.minPxPerSec=t,!0):(this.params.minPxPerSec=this.defaultParams.minPxPerSec,!1),this.drawBuffer(),this.drawer.progress(this.backend.getPlayedPercents()),this.drawer.recenter(this.getCurrentTime()/this.getDuration()),this.fireEvent("zoom",t)}},{key:"loadArrayBuffer",value:function(t){var m=this;this.decodeArrayBuffer(t,(function(t){m.isDestroyed||m.loadDecodedBuffer(t)}))}},{key:"loadDecodedBuffer",value:function(t){this.backend.load(t),this.drawBuffer(),this.fireEvent("ready"),this.isReady=!0}},{key:"loadBlob",value:function(t){var m=this,b=new FileReader;b.addEventListener("progress",(function(t){return m.onProgress(t)})),b.addEventListener("load",(function(t){return m.loadArrayBuffer(t.target.result)})),b.addEventListener("error",(function(){return m.fireEvent("error","Error reading file")})),b.readAsArrayBuffer(t),this.empty()}},{key:"load",value:function(t,m,b,g){if(this.empty(),b){var k={"Preload is not 'auto', 'none' or 'metadata'":-1===["auto","metadata","none"].indexOf(b),"Peaks are not provided":!m,"Backend is not of type MediaElement":"MediaElement"!==this.params.backend,"Url is not of type string":"string"!=typeof t},w=Object.keys(k).filter((function(t){return k[t]}));w.length&&(console.warn("Preload parameter of wavesurfer.load will be ignored because:\n\t- "+w.join("\n\t- ")),b=null)}switch(this.params.backend){case"WebAudio":return this.loadBuffer(t,m,g);case"MediaElement":return this.loadMediaElement(t,m,b,g)}}},{key:"loadBuffer",value:function(t,m,b){var g=this,i=function(m){return m&&g.tmpEvents.push(g.once("ready",m)),g.getArrayBuffer(t,(function(t){return g.loadArrayBuffer(t)}))};if(!m)return i();this.backend.setPeaks(m,b),this.drawBuffer(),this.tmpEvents.push(this.once("interaction",i))}},{key:"loadMediaElement",value:function(t,m,b,g){var k=this,w=t;if("string"==typeof t)this.backend.load(w,this.mediaContainer,m,b);else{var P=t;this.backend.loadElt(P,m),w=P.src}this.tmpEvents.push(this.backend.once("canplay",(function(){k.drawBuffer(),k.fireEvent("ready"),k.isReady=!0})),this.backend.once("error",(function(t){return k.fireEvent("error",t)}))),m&&this.backend.setPeaks(m,g),m&&!this.params.forceDecode||!this.backend.supportsWebAudio()||this.getArrayBuffer(w,(function(t){k.decodeArrayBuffer(t,(function(t){k.backend.buffer=t,k.backend.setPeaks(null),k.drawBuffer(),k.fireEvent("waveform-ready")}))}))}},{key:"decodeArrayBuffer",value:function(t,m){var b=this;this.arraybuffer=t,this.backend.decodeArrayBuffer(t,(function(g){b.isDestroyed||b.arraybuffer!=t||(m(g),b.arraybuffer=null)}),(function(){return b.fireEvent("error","Error decoding audiobuffer")}))}},{key:"getArrayBuffer",value:function(t,m){var b=this,k=g.ajax({url:t,responseType:"arraybuffer",xhr:this.params.xhr});return this.currentAjax=k,this.tmpEvents.push(k.on("progress",(function(t){b.onProgress(t)})),k.on("success",(function(t,g){m(t),b.currentAjax=null})),k.on("error",(function(t){b.fireEvent("error","XHR error: "+t.target.statusText),b.currentAjax=null}))),k}},{key:"onProgress",value:function(t){var m;m=t.lengthComputable?t.loaded/t.total:t.loaded/(t.loaded+1e6),this.fireEvent("loading",Math.round(100*m),t.target)}},{key:"exportPCM",value:function(t,m,b,g){t=t||1024,g=g||0,m=m||1e4,b=b||!1;var k=this.backend.getPeaks(t,g),w=[].map.call(k,(function(t){return Math.round(t*m)/m})),P=JSON.stringify(w);return b||window.open("data:application/json;charset=utf-8,"+encodeURIComponent(P)),P}},{key:"exportImage",value:function(t,m){return t||(t="image/png"),m||(m=1),this.drawer.getImage(t,m)}},{key:"cancelAjax",value:function(){this.currentAjax&&(this.currentAjax.xhr.abort(),this.currentAjax=null)}},{key:"clearTmpEvents",value:function(){this.tmpEvents.forEach((function(t){return t.un()}))}},{key:"empty",value:function(){this.backend.isPaused()||(this.stop(),this.backend.disconnectSource()),this.isReady=!1,this.cancelAjax(),this.clearTmpEvents(),this.drawer.progress(0),this.drawer.setWidth(0),this.drawer.drawPeaks({length:this.drawer.getWidth()},0)}},{key:"destroy",value:function(){this.destroyAllPlugins(),this.fireEvent("destroy"),this.cancelAjax(),this.clearTmpEvents(),this.unAll(),!1!==this.params.responsive&&(window.removeEventListener("resize",this._onResize,!0),window.removeEventListener("orientationchange",this._onResize,!0)),this.backend.destroy(),this.drawer.destroy(),this.isDestroyed=!0,this.isReady=!1,this.arraybuffer=null}}]),n}();(m.default=C).VERSION="2.1.0",C.util=g,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){var m=new k.default,b=new XMLHttpRequest,g=!1;return b.open(t.method||"GET",t.url,!0),b.responseType=t.responseType||"json",t.xhr&&(t.xhr.requestHeaders&&t.xhr.requestHeaders.forEach((function(t){b.setRequestHeader(t.key,t.value)})),t.xhr.withCredentials&&(b.withCredentials=!0)),b.addEventListener("progress",(function(t){m.fireEvent("progress",t),t.lengthComputable&&t.loaded==t.total&&(g=!0)})),b.addEventListener("load",(function(t){g||m.fireEvent("progress",t),m.fireEvent("load",t),200==b.status||206==b.status?m.fireEvent("success",b.response,t):m.fireEvent("error",t)})),b.addEventListener("error",(function(t){return m.fireEvent("error",t)})),b.send(),m.xhr=b,m};var g,k=(g=b(1))&&g.__esModule?g:{default:g};t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(){return"wavesurfer_"+Math.random().toString(32).substring(2)},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){var m=-1/0;return Object.keys(t).forEach((function(b){t[b]>m&&(m=t[b])})),m},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){var m=Number(1/0);return Object.keys(t).forEach((function(b){t[b]<m&&(m=t[b])})),m},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){for(var m=arguments.length,b=new Array(1<m?m-1:0),g=1;g<m;g++)b[g-1]=arguments[g];return b.forEach((function(m){Object.keys(m).forEach((function(b){t[b]=m[b]}))})),t},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t,m){return Object.keys(m).forEach((function(b){t.style[b]!==m[b]&&(t.style[b]=m[b])})),t},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){return function(){for(var m=arguments.length,b=new Array(m),g=0;g<m;g++)b[g]=arguments[g];return(0,k.default)((function(){return t.apply(void 0,b)}))}};var g,k=(g=b(2))&&g.__esModule?g:{default:g};t.exports=m.default},function(t,m){function r(t,m,b){var g,k,w,P,x;function l(){var C=Date.now()-P;C<m&&0<=C?g=setTimeout(l,m-C):(g=null,b||(x=t.apply(w,k),w=k=null))}null==m&&(m=100);var e=function(){w=this,k=arguments,P=Date.now();var C=b&&!g;return g||(g=setTimeout(l,m)),C&&(x=t.apply(w,k),w=k=null),x};return e.clear=function(){g&&(clearTimeout(g),g=null)},e.flush=function(){g&&(x=t.apply(w,k),w=k=null,clearTimeout(g),g=null)},e}r.debounce=r,t.exports=r},function(t,m,b){function n(t){t.stopPropagation(),document.body.removeEventListener("click",n,!0)}Object.defineProperty(m,"__esModule",{value:!0}),m.default=function(t){document.body.addEventListener("click",n,!0)},t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g,k=(g=b(15))&&g.__esModule?g:{default:g},w=function(t){if(t&&t.__esModule)return t;var m={};if(null!=t)for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,b):{};g.get||g.set?Object.defineProperty(m,b,g):m[b]=t[b]}return m.default=t,m}(b(0));function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}function o(t,m){return!m||"object"!==i(m)&&"function"!=typeof m?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):m}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,m){return(l=Object.setPrototypeOf||function(t,m){return t.__proto__=m,t})(t,m)}var P=function(t){function n(t,m){var b;return function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,n),(b=o(this,u(n).call(this,t,m))).maxCanvasWidth=m.maxCanvasWidth,b.maxCanvasElementWidth=Math.round(m.maxCanvasWidth/m.pixelRatio),b.hasProgressCanvas=m.waveColor!=m.progressColor,b.halfPixel=.5/m.pixelRatio,b.canvases=[],b.progressWave=null,b}var m,b;return function(t,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(m&&m.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),m&&l(t,m)}(n,k.default),m=n,(b=[{key:"init",value:function(){this.createWrapper(),this.createElements()}},{key:"createElements",value:function(){this.progressWave=this.wrapper.appendChild(this.style(document.createElement("wave"),{position:"absolute",zIndex:3,left:0,top:0,bottom:0,overflow:"hidden",width:"0",display:"none",boxSizing:"border-box",borderRightStyle:"solid",pointerEvents:"none"})),this.addCanvas(),this.updateCursor()}},{key:"updateCursor",value:function(){this.style(this.progressWave,{borderRightWidth:this.params.cursorWidth+"px",borderRightColor:this.params.cursorColor})}},{key:"updateSize",value:function(){for(var t=this,m=Math.round(this.width/this.params.pixelRatio),b=Math.ceil(m/this.maxCanvasElementWidth);this.canvases.length<b;)this.addCanvas();for(;this.canvases.length>b;)this.removeCanvas();this.canvases.forEach((function(m,b){var g=t.maxCanvasWidth+2*Math.ceil(t.params.pixelRatio/2);b==t.canvases.length-1&&(g=t.width-t.maxCanvasWidth*(t.canvases.length-1)),t.updateDimensions(m,g,t.height),t.clearWaveForEntry(m)}))}},{key:"addCanvas",value:function(){var t={},m=this.maxCanvasElementWidth*this.canvases.length;t.wave=this.wrapper.appendChild(this.style(document.createElement("canvas"),{position:"absolute",zIndex:2,left:m+"px",top:0,bottom:0,height:"100%",pointerEvents:"none"})),t.waveCtx=t.wave.getContext("2d"),this.hasProgressCanvas&&(t.progress=this.progressWave.appendChild(this.style(document.createElement("canvas"),{position:"absolute",left:m+"px",top:0,bottom:0,height:"100%"})),t.progressCtx=t.progress.getContext("2d")),this.canvases.push(t)}},{key:"removeCanvas",value:function(){var t=this.canvases.pop();t.wave.parentElement.removeChild(t.wave),this.hasProgressCanvas&&t.progress.parentElement.removeChild(t.progress)}},{key:"updateDimensions",value:function(t,m,b){var g=Math.round(m/this.params.pixelRatio),k=Math.round(this.width/this.params.pixelRatio);t.start=t.waveCtx.canvas.offsetLeft/k||0,t.end=t.start+g/k,t.waveCtx.canvas.width=m,t.waveCtx.canvas.height=b,this.style(t.waveCtx.canvas,{width:g+"px"}),this.style(this.progressWave,{display:"block"}),this.hasProgressCanvas&&(t.progressCtx.canvas.width=m,t.progressCtx.canvas.height=b,this.style(t.progressCtx.canvas,{width:g+"px"}))}},{key:"clearWave",value:function(){var t=this;this.canvases.forEach((function(m){return t.clearWaveForEntry(m)}))}},{key:"clearWaveForEntry",value:function(t){t.waveCtx.clearRect(0,0,t.waveCtx.canvas.width,t.waveCtx.canvas.height),this.hasProgressCanvas&&t.progressCtx.clearRect(0,0,t.progressCtx.canvas.width,t.progressCtx.canvas.height)}},{key:"drawBars",value:function(t,m,b,g){var k=this;return this.prepareDraw(t,m,b,g,(function(t){var m=t.absmax,w=t.hasMinVals,P=(t.height,t.offsetY),x=t.halfH,C=t.peaks;if(void 0!==b){var E,O=w?2:1,j=C.length/O,R=k.params.barWidth*k.params.pixelRatio,_=R+(null===k.params.barGap?Math.max(k.params.pixelRatio,~~(R/2)):Math.max(k.params.pixelRatio,k.params.barGap*k.params.pixelRatio)),S=j/k.width,M=g;for(E=b;E<M;E+=_){var T=C[Math.floor(E*S*O)]||0,A=Math.round(T/m*x);k.fillRect(E+k.halfPixel,x-A+P,R+k.halfPixel,2*A)}}}))}},{key:"drawWave",value:function(t,m,b,g){var k=this;return this.prepareDraw(t,m,b,g,(function(t){var m=t.absmax,w=t.hasMinVals,P=(t.height,t.offsetY),x=t.halfH,C=t.peaks;if(!w){var E,O=[],j=C.length;for(E=0;E<j;E++)O[2*E]=C[E],O[2*E+1]=-C[E];C=O}void 0!==b&&k.drawLine(C,m,x,P,b,g),k.fillRect(0,x+P-k.halfPixel,k.width,k.halfPixel)}))}},{key:"drawLine",value:function(t,m,b,g,k,w){var P=this;this.canvases.forEach((function(x){P.setFillStyles(x),P.drawLineToContext(x,x.waveCtx,t,m,b,g,k,w),P.drawLineToContext(x,x.progressCtx,t,m,b,g,k,w)}))}},{key:"drawLineToContext",value:function(t,m,b,g,k,w,P,x){if(m){var C=b.length/2,E=this.params.fillParent&&this.width!=C?this.width/C:1,O=Math.round(C*t.start),j=Math.round(C*t.end)+1;if(!(x<O||j<P)){var R,_,S=Math.min(O,P),M=Math.max(j,x);for(m.beginPath(),m.moveTo((S-O)*E+this.halfPixel,k+w),R=S;R<M;R++){var T=b[2*R]||0,A=Math.round(T/g*k);m.lineTo((R-O)*E+this.halfPixel,k-A+w)}for(_=M-1;S<=_;_--){var W=b[2*_+1]||0,D=Math.round(W/g*k);m.lineTo((_-O)*E+this.halfPixel,k-D+w)}m.closePath(),m.fill()}}}},{key:"fillRect",value:function(t,m,b,g){var k,w=Math.floor(t/this.maxCanvasWidth),P=Math.min(Math.ceil((t+b)/this.maxCanvasWidth)+1,this.canvases.length);for(k=w;k<P;k++){var x=this.canvases[k],C=k*this.maxCanvasWidth,E={x1:Math.max(t,k*this.maxCanvasWidth),y1:m,x2:Math.min(t+b,k*this.maxCanvasWidth+x.waveCtx.canvas.width),y2:m+g};E.x1<E.x2&&(this.setFillStyles(x),this.fillRectToContext(x.waveCtx,E.x1-C,E.y1,E.x2-E.x1,E.y2-E.y1),this.fillRectToContext(x.progressCtx,E.x1-C,E.y1,E.x2-E.x1,E.y2-E.y1))}}},{key:"prepareDraw",value:function(t,m,b,g,k){var P=this;return w.frame((function(){if(t[0]instanceof Array){var x=t;if(P.params.splitChannels)return P.setHeight(x.length*P.params.height*P.params.pixelRatio),x.forEach((function(t,m){return P.prepareDraw(t,m,b,g,k)}));t=x[0]}var C=1/P.params.barHeight;if(P.params.normalize){var E=w.max(t),O=w.min(t);C=E<-O?-O:E}var j=[].some.call(t,(function(t){return t<0})),R=P.params.height*P.params.pixelRatio;return k({absmax:C,hasMinVals:j,height:R,offsetY:R*m||0,halfH:R/2,peaks:t})}))()}},{key:"fillRectToContext",value:function(t,m,b,g,k){t&&t.fillRect(m,b,g,k)}},{key:"setFillStyles",value:function(t){t.waveCtx.fillStyle=this.params.waveColor,this.hasProgressCanvas&&(t.progressCtx.fillStyle=this.params.progressColor)}},{key:"getImage",value:function(t,m){var b=this.canvases.map((function(b){return b.wave.toDataURL(t,m)}));return 1<b.length?b:b[0]}},{key:"updateProgress",value:function(t){this.style(this.progressWave,{width:t+"px"})}}])&&s(m.prototype,b),n}();m.default=P,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=function(t){if(t&&t.__esModule)return t;var m={};if(null!=t)for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,b):{};g.get||g.set?Object.defineProperty(m,b,g):m[b]=t[b]}return m.default=t,m}(b(0));function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}function o(t,m){return!m||"object"!==n(m)&&"function"!=typeof m?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):m}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,m){return(l=Object.setPrototypeOf||function(t,m){return t.__proto__=m,t})(t,m)}var k=function(t){function n(t,m){var b;return function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,n),(b=o(this,u(n).call(this))).container=t,b.params=m,b.width=0,b.height=m.height*b.params.pixelRatio,b.lastPos=0,b.wrapper=null,b}var m,b;return function(t,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(m&&m.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),m&&l(t,m)}(n,g.Observer),m=n,(b=[{key:"style",value:function(t,m){return g.style(t,m)}},{key:"createWrapper",value:function(){this.wrapper=this.container.appendChild(document.createElement("wave")),this.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:this.params.height+"px"}),(this.params.fillParent||this.params.scrollParent)&&this.style(this.wrapper,{width:"100%",overflowX:this.params.hideScrollbar?"hidden":"auto",overflowY:"hidden"}),this.setupWrapperEvents()}},{key:"handleEvent",value:function(t,m){!m&&t.preventDefault();var b,g=t.targetTouches?t.targetTouches[0].clientX:t.clientX,k=this.wrapper.getBoundingClientRect(),w=this.width,P=this.getWidth();return!this.params.fillParent&&w<P?1<(b=(g-k.left)*(this.params.pixelRatio/w)||0)&&(b=1):b=(g-k.left+this.wrapper.scrollLeft)/this.wrapper.scrollWidth||0,b}},{key:"setupWrapperEvents",value:function(){var t=this;this.wrapper.addEventListener("click",(function(m){var b=t.wrapper.offsetHeight-t.wrapper.clientHeight;if(0!=b){var g=t.wrapper.getBoundingClientRect();if(m.clientY>=g.bottom-b)return}t.params.interact&&t.fireEvent("click",m,t.handleEvent(m))})),this.wrapper.addEventListener("scroll",(function(m){return t.fireEvent("scroll",m)}))}},{key:"drawPeaks",value:function(t,m,b,g){this.setWidth(m)||this.clearWave(),this.params.barWidth?this.drawBars(t,0,b,g):this.drawWave(t,0,b,g)}},{key:"resetScroll",value:function(){null!==this.wrapper&&(this.wrapper.scrollLeft=0)}},{key:"recenter",value:function(t){var m=this.wrapper.scrollWidth*t;this.recenterOnPosition(m,!0)}},{key:"recenterOnPosition",value:function(t,m){var b=this.wrapper.scrollLeft,g=~~(this.wrapper.clientWidth/2),k=this.wrapper.scrollWidth-this.wrapper.clientWidth,w=t-g,P=w-b;0!=k&&(!m&&-g<=P&&P<g&&(w=b+(P=Math.max(-5,Math.min(5,P)))),(w=Math.max(0,Math.min(k,w)))!=b&&(this.wrapper.scrollLeft=w))}},{key:"getScrollX",value:function(){var t=this.params.pixelRatio,m=Math.round(this.wrapper.scrollLeft*t);if(this.params.scrollParent){var b=~~(this.wrapper.scrollWidth*t-this.getWidth());m=Math.min(b,Math.max(0,m))}return m}},{key:"getWidth",value:function(){return Math.round(this.container.clientWidth*this.params.pixelRatio)}},{key:"setWidth",value:function(t){return this.width!=t&&(this.width=t,this.params.fillParent||this.params.scrollParent?this.style(this.wrapper,{width:""}):this.style(this.wrapper,{width:~~(this.width/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"setHeight",value:function(t){return t!=this.height&&(this.height=t,this.style(this.wrapper,{height:~~(this.height/this.params.pixelRatio)+"px"}),this.updateSize(),!0)}},{key:"progress",value:function(t){var m=1/this.params.pixelRatio,b=Math.round(t*this.width)*m;if(b<this.lastPos||b-this.lastPos>=m){if(this.lastPos=b,this.params.scrollParent&&this.params.autoCenter){var g=~~(this.wrapper.scrollWidth*t);this.recenterOnPosition(g)}this.updateProgress(b)}}},{key:"destroy",value:function(){this.unAll(),this.wrapper&&(this.wrapper.parentNode==this.container&&this.container.removeChild(this.wrapper),this.wrapper=null)}},{key:"updateCursor",value:function(){}},{key:"updateSize",value:function(){}},{key:"drawBars",value:function(t,m,b,g){}},{key:"drawWave",value:function(t,m,b,g){}},{key:"clearWave",value:function(){}},{key:"updateProgress",value:function(t){}}])&&s(m.prototype,b),n}();m.default=k,t.exports=m.default},function(t,m,b){Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g,k=(g=b(3))&&g.__esModule?g:{default:g};function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}function o(t,m){return!m||"object"!==i(m)&&"function"!=typeof m?function(t){if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}(t):m}function u(t,m,b){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,m,b){var g=function(t,m){for(;!Object.prototype.hasOwnProperty.call(t,m)&&null!==(t=l(t)););return t}(t,m);if(g){var k=Object.getOwnPropertyDescriptor(g,m);return k.get?k.get.call(b):k.value}})(t,m,b||t)}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t,m){return(c=Object.setPrototypeOf||function(t,m){return t.__proto__=m,t})(t,m)}!function(t){if(!t||!t.__esModule){var m={};if(null!=t)for(var b in t)if(Object.prototype.hasOwnProperty.call(t,b)){var g=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(t,b):{};g.get||g.set?Object.defineProperty(m,b,g):m[b]=t[b]}m.default=t}}(b(0));var w=function(t){function n(t){var m;return function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,n),(m=o(this,l(n).call(this,t))).params=t,m.media={currentTime:0,duration:0,paused:!0,playbackRate:1,play:function(){},pause:function(){},volume:0},m.mediaType=t.mediaType.toLowerCase(),m.elementPosition=t.elementPosition,m.peaks=null,m.playbackRate=1,m.volume=1,m.buffer=null,m.onPlayEnd=null,m}var m,b;return function(t,m){if("function"!=typeof m&&null!==m)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(m&&m.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),m&&c(t,m)}(n,k.default),m=n,(b=[{key:"init",value:function(){this.setPlaybackRate(this.params.audioRate),this.createTimer()}},{key:"createTimer",value:function(){var t=this;this.on("play",(function e(){t.isPaused()||(t.fireEvent("audioprocess",t.getCurrentTime()),(window.requestAnimationFrame||window.webkitRequestAnimationFrame)(e))})),this.on("pause",(function(){t.fireEvent("audioprocess",t.getCurrentTime())}))}},{key:"load",value:function(t,m,b,g){var k=document.createElement(this.mediaType);k.controls=this.params.mediaControls,k.autoplay=this.params.autoplay||!1,k.preload=null==g?"auto":g,k.src=t,k.style.width="100%";var w=m.querySelector(this.mediaType);w&&m.removeChild(w),m.appendChild(k),this._load(k,b)}},{key:"loadElt",value:function(t,m){t.controls=this.params.mediaControls,t.autoplay=this.params.autoplay||!1,this._load(t,m)}},{key:"_load",value:function(t,m){var b=this;"function"==typeof t.load&&t.load(),t.addEventListener("error",(function(){b.fireEvent("error","Error loading media element")})),t.addEventListener("canplay",(function(){b.fireEvent("canplay")})),t.addEventListener("ended",(function(){b.fireEvent("finish")})),t.addEventListener("play",(function(){b.fireEvent("play")})),t.addEventListener("pause",(function(){b.fireEvent("pause")})),this.media=t,this.peaks=m,this.onPlayEnd=null,this.buffer=null,this.setPlaybackRate(this.playbackRate),this.setVolume(this.volume)}},{key:"isPaused",value:function(){return!this.media||this.media.paused}},{key:"getDuration",value:function(){if(this.explicitDuration)return this.explicitDuration;var t=(this.buffer||this.media).duration;return 1/0<=t&&(t=this.media.seekable.end(0)),t}},{key:"getCurrentTime",value:function(){return this.media&&this.media.currentTime}},{key:"getPlayedPercents",value:function(){return this.getCurrentTime()/this.getDuration()||0}},{key:"getPlaybackRate",value:function(){return this.playbackRate||this.media.playbackRate}},{key:"setPlaybackRate",value:function(t){this.playbackRate=t||1,this.media.playbackRate=this.playbackRate}},{key:"seekTo",value:function(t){null!=t&&(this.media.currentTime=t),this.clearPlayEnd()}},{key:"play",value:function(t,m){this.seekTo(t);var b=this.media.play();return m&&this.setPlayEnd(m),b}},{key:"pause",value:function(){var t;return this.media&&(t=this.media.pause()),this.clearPlayEnd(),t}},{key:"setPlayEnd",value:function(t){var m=this;this._onPlayEnd=function(b){t<=b&&(m.pause(),m.seekTo(t))},this.on("audioprocess",this._onPlayEnd)}},{key:"clearPlayEnd",value:function(){this._onPlayEnd&&(this.un("audioprocess",this._onPlayEnd),this._onPlayEnd=null)}},{key:"getPeaks",value:function(t,m,b){return this.buffer?u(l(n.prototype),"getPeaks",this).call(this,t,m,b):this.peaks||[]}},{key:"setSinkId",value:function(t){return t?this.media.setSinkId?this.media.setSinkId(t):Promise.reject(new Error("setSinkId is not supported in your browser")):Promise.reject(new Error("Invalid deviceId: "+t))}},{key:"getVolume",value:function(){return this.volume||this.media.volume}},{key:"setVolume",value:function(t){this.volume=t,this.media.volume=this.volume}},{key:"destroy",value:function(){this.pause(),this.unAll(),this.params.removeMediaElementOnDestroy&&this.media&&this.media.parentNode&&this.media.parentNode.removeChild(this.media),this.media=null}}])&&s(m.prototype,b),n}();m.default=w,t.exports=m.default},function(t,m,b){function i(t,m){for(var b=0;b<m.length;b++){var g=m[b];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(t,g.key,g)}}Object.defineProperty(m,"__esModule",{value:!0}),m.default=void 0;var g=function(){function e(){!function(t,m){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this,e),this.clearPeakCache()}var t,m;return t=e,(m=[{key:"clearPeakCache",value:function(){this.peakCacheRanges=[],this.peakCacheLength=-1}},{key:"addRangeToPeakCache",value:function(t,m,b){t!=this.peakCacheLength&&(this.clearPeakCache(),this.peakCacheLength=t);for(var g=[],k=0;k<this.peakCacheRanges.length&&this.peakCacheRanges[k]<m;)k++;for(k%2==0&&g.push(m);k<this.peakCacheRanges.length&&this.peakCacheRanges[k]<=b;)g.push(this.peakCacheRanges[k]),k++;k%2==0&&g.push(b),g=g.filter((function(t,m,b){return 0==m?t!=b[m+1]:m==b.length-1?t!=b[m-1]:t!=b[m-1]&&t!=b[m+1]})),this.peakCacheRanges=this.peakCacheRanges.concat(g),this.peakCacheRanges=this.peakCacheRanges.sort((function(t,m){return t-m})).filter((function(t,m,b){return 0==m?t!=b[m+1]:m==b.length-1?t!=b[m-1]:t!=b[m-1]&&t!=b[m+1]}));var w=[];for(k=0;k<g.length;k+=2)w.push([g[k],g[k+1]]);return w}},{key:"getCacheRanges",value:function(){var t,m=[];for(t=0;t<this.peakCacheRanges.length;t+=2)m.push([this.peakCacheRanges[t],this.peakCacheRanges[t+1]]);return m}}])&&i(t.prototype,m),e}();m.default=g,t.exports=m.default}])},"object"==typeof exports&&"object"==typeof module?module.exports=m():"function"==typeof define&&define.amd?define("WaveSurfer",[],m):"object"==typeof exports?exports.WaveSurfer=m():t.WaveSurfer=m();