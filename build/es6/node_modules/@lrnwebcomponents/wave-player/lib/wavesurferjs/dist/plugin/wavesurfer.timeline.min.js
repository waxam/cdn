/*!
 * wavesurfer.js 2.1.0 (Mon Oct 01 2018 11:34:54 GMT+0200 (Central European Summer Time))
 * https://github.com/katspaugh/wavesurfer.js
 * @license BSD-3-Clause
 */
var e,t;e=window,t=function(){return function(e){var t={};function n(a){if(t[a])return t[a].exports;var i=t[a]={i:a,l:!1,exports:{}};return e[a].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(a,i,function(t){return e[t]}.bind(null,i));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="localhost:8080/dist/plugin/",n(n.s=0)}([function(e,t,a){function r(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,t,a){return t&&r(e.prototype,t),a&&r(e,a),e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){function r(e,t){var a=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.call(this),this.container="string"==typeof e.container?document.querySelector(e.container):e.container,!this.container)throw new Error("No container for wavesurfer timeline");this.wavesurfer=t,this.util=t.util,this.params=this.util.extend({},{height:20,notchPercentHeight:90,labelPadding:5,unlabeledNotchColor:"#c0c0c0",primaryColor:"#000",secondaryColor:"#c0c0c0",primaryFontColor:"#000",secondaryFontColor:"#000",fontFamily:"Arial",fontSize:10,zoomDebounce:!1,formatTimeCallback:this.defaultFormatTimeCallback,timeInterval:this.defaultTimeInterval,primaryLabelInterval:this.defaultPrimaryLabelInterval,secondaryLabelInterval:this.defaultSecondaryLabelInterval},e),this.canvases=[],this.wrapper=null,this.drawer=null,this.pixelRatio=null,this.maxCanvasWidth=null,this.maxCanvasElementWidth=null,this._onZoom=this.params.zoomDebounce?this.wavesurfer.util.debounce((function(){return a.render()}),this.params.zoomDebounce):function(){return a.render()}}return n(r,null,[{key:"create",value:function(e){return{name:"timeline",deferInit:!(!e||!e.deferInit)&&e.deferInit,params:e,instance:r}}}]),n(r,[{key:"init",value:function(){this.wavesurfer.on("ready",this._onReady),this.wavesurfer.isReady&&this._onReady()}},{key:"destroy",value:function(){this.unAll(),this.wavesurfer.un("redraw",this._onRedraw),this.wavesurfer.un("zoom",this._onZoom),this.wavesurfer.un("ready",this._onReady),this.wavesurfer.drawer.wrapper.removeEventListener("scroll",this._onScroll),this.wrapper&&this.wrapper.parentNode&&(this.wrapper.removeEventListener("click",this._onWrapperClick),this.wrapper.parentNode.removeChild(this.wrapper),this.wrapper=null)}},{key:"createWrapper",value:function(){var e=this.wavesurfer.params;this.container.innerHTML="",this.wrapper=this.container.appendChild(document.createElement("timeline")),this.util.style(this.wrapper,{display:"block",position:"relative",userSelect:"none",webkitUserSelect:"none",height:"".concat(this.params.height,"px")}),(e.fillParent||e.scrollParent)&&this.util.style(this.wrapper,{width:"100%",overflowX:"hidden",overflowY:"hidden"}),this.wrapper.addEventListener("click",this._onWrapperClick)}},{key:"render",value:function(){this.wrapper||this.createWrapper(),this.updateCanvases(),this.updateCanvasesPositioning(),this.renderCanvases()}},{key:"updateCanvases",value:function(){for(var e,t,a=this,i=Math.round(this.drawer.wrapper.scrollWidth),s=Math.ceil(i/this.maxCanvasElementWidth);this.canvases.length<s;)e=a.wrapper.appendChild(document.createElement("canvas")),a.canvases.push(e),a.util.style(e,{position:"absolute",zIndex:4});for(;this.canvases.length>s;)t=void 0,(t=a.canvases.pop()).parentElement.removeChild(t)}},{key:"updateCanvasesPositioning",value:function(){var e=this,t=this.canvases.length;this.canvases.forEach((function(a,i){var s=i===t-1?e.drawer.wrapper.scrollWidth-e.maxCanvasElementWidth*(t-1):e.maxCanvasElementWidth;a.width=s*e.pixelRatio,a.height=(e.params.height+1)*e.pixelRatio,e.util.style(a,{width:"".concat(s,"px"),height:"".concat(e.params.height,"px"),left:"".concat(i*e.maxCanvasElementWidth,"px")})}))}},{key:"renderCanvases",value:function(){var e=this,t=this.wavesurfer.backend.getDuration();if(!(t<=0)){var a,i=this.wavesurfer.params,s=this.params.fontSize*i.pixelRatio,l=parseInt(t,10)+1,c=i.fillParent&&!i.scrollParent?this.drawer.getWidth():this.drawer.wrapper.scrollWidth*i.pixelRatio,u=this.params.height*this.pixelRatio,p=this.params.height*(this.params.notchPercentHeight/100)*this.pixelRatio,f=c/t,d=this.params.formatTimeCallback,h=function(e){return"function"==typeof e?e(f):e},v=h(this.params.timeInterval),m=h(this.params.primaryLabelInterval),y=h(this.params.secondaryLabelInterval),x=0,b=0,C=[];for(a=0;a<l/v;a++)C.push([a,b,x]),b+=v,x+=f*v;var w=function(e){C.forEach((function(t){e(t[0],t[1],t[2])}))};this.setFillStyles(this.params.primaryColor),this.setFonts("".concat(s,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.primaryFontColor),w((function(t,a,i){t%m==0&&(e.fillRect(i,0,1,u),e.fillText(d(a,f),i+e.params.labelPadding*e.pixelRatio,u))})),this.setFillStyles(this.params.secondaryColor),this.setFonts("".concat(s,"px ").concat(this.params.fontFamily)),this.setFillStyles(this.params.secondaryFontColor),w((function(t,a,i){t%y==0&&(e.fillRect(i,0,1,u),e.fillText(d(a,f),i+e.params.labelPadding*e.pixelRatio,u))})),this.setFillStyles(this.params.unlabeledNotchColor),w((function(t,a,i){t%y!=0&&t%m!=0&&e.fillRect(i,0,1,p)}))}}},{key:"setFillStyles",value:function(e){this.canvases.forEach((function(t){t.getContext("2d").fillStyle=e}))}},{key:"setFonts",value:function(e){this.canvases.forEach((function(t){t.getContext("2d").font=e}))}},{key:"fillRect",value:function(e,t,a,i){var s=this;this.canvases.forEach((function(l,c){var u=c*s.maxCanvasWidth,p={x1:Math.max(e,c*s.maxCanvasWidth),y1:t,x2:Math.min(e+a,c*s.maxCanvasWidth+l.width),y2:t+i};p.x1<p.x2&&l.getContext("2d").fillRect(p.x1-u,p.y1,p.x2-p.x1,p.y2-p.y1)}))}},{key:"fillText",value:function(e,t,a){var i,s=0;this.canvases.forEach((function(l){var c=l.getContext("2d"),u=c.canvas.width;t+i<s||(t<s+u&&(i=c.measureText(e).width,c.fillText(e,t-s,a)),s+=u)}))}},{key:"defaultFormatTimeCallback",value:function(e,t){if(1<e/60){var a=parseInt(e/60,10);return e=(e=parseInt(e%60,10))<10?"0"+e:e,"".concat(a,":").concat(e)}return Math.round(1e3*e)/1e3}},{key:"defaultTimeInterval",value:function(e){return 25<=e?1:25<=5*e?5:25<=15*e?15:60*Math.ceil(.5/e)}},{key:"defaultPrimaryLabelInterval",value:function(e){return 25<=e?10:25<=5*e?6:4}},{key:"defaultSecondaryLabelInterval",value:function(e){return 25<=e?5:2}}]),r}();t.default=i;var o=function(){var e=this;this._onScroll=function(){e.wrapper&&e.drawer.wrapper&&(e.wrapper.scrollLeft=e.drawer.wrapper.scrollLeft)},this._onRedraw=function(){return e.render()},this._onReady=function(){var t=e.wavesurfer;e.drawer=t.drawer,e.pixelRatio=t.drawer.params.pixelRatio,e.maxCanvasWidth=t.drawer.maxCanvasWidth||t.drawer.width,e.maxCanvasElementWidth=t.drawer.maxCanvasElementWidth||Math.round(e.maxCanvasWidth/e.pixelRatio),t.drawer.wrapper.addEventListener("scroll",e._onScroll),t.on("redraw",e._onRedraw),t.on("zoom",e._onZoom),e.render()},this._onWrapperClick=function(t){t.preventDefault();var a="offsetX"in t?t.offsetX:t.layerX;e.fireEvent("click",a/e.wrapper.scrollWidth||0)}};e.exports=t.default}])},"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("timeline",[],t):"object"==typeof exports?exports.timeline=t():(e.WaveSurfer=e.WaveSurfer||{},e.WaveSurfer.timeline=t());