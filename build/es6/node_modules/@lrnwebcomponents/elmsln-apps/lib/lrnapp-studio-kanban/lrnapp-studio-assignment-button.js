import{html,PolymerElement}from"../../../../@polymer/polymer/polymer-element.js";import"../../../../@polymer/iron-ajax/iron-ajax.js";import"../../../../@polymer/paper-toast/paper-toast.js";import"../../../../@polymer/polymer/lib/elements/dom-if.js";import"../../../lrnsys-button/lrnsys-button.js";/*
`lrnapp-studio-assignment-button`
Allows users to either start a assignment or link to a assignment.

Usage:
```
<lrnapp-studio-assignment-button assignment-id="[[id]]" assignment-id="{{assignmentId}}" end-point="[[endPoint]]" csrf-token=[[csrfToken]]></lrnapp-studio-assignment-button>
*/class LrnappStudioAssignmentButton extends PolymerElement{static get template(){return html`
      <style>
        :host {
          display: block;
        }
      </style>
      <lrnsys-button
        on-tap="_createAssignment"
        icon-class="[[iconClass]]"
        alt="[[alt]]"
        class\$="[[classes]]"
        button-class\$="[[classes]]"
        hover-class="[[hoverClass]]"
        icon="[[icon]]"
      ></lrnsys-button>
      <iron-ajax
        id="ajaxCreateStub"
        url="[[endPoint]]/api/assignments/create-stub?token=[[csrfToken]]"
        method="POST"
        body="[[projectId]]"
        handle-as="json"
        on-response="_ajaxCreateStubHandler"
      ></iron-ajax>
      <template is="dom-if" if="[[displayErrors]]">
        <paper-toast id="toast"></paper-toast>
      </template>
    `}static get tag(){return"lrnapp-studio-assignment-button"}static get properties(){return{elmslnCourse:{type:String},elmslnSection:{type:String},basePath:{type:String,notify:!0},csrfToken:{type:String,notify:!0,reflectToAttribute:!0},endPoint:{type:String,notify:!0,reflectToAttribute:!0},auto:{type:Boolean,reflectToAttribute:!0,value:!1,notify:!0},displayErrors:{type:Boolean,value:!0},projectId:{type:String},iconClass:{type:String,value:null},alt:{type:String,value:null},classes:{type:String,value:null},hoverClass:{type:String,value:null},icon:{type:String,value:null}}}_createAssignment(){this.shadowRoot.querySelector("#ajaxCreateStub").generateRequest()}_ajaxCreateStubHandler(e){var status=e.detail.response.status,response=e.detail.response;if(201===status){var assignment=e.detail.response.data;if(assignment){this.dispatchEvent(new CustomEvent("assignment-created",{bubbles:!0,cancelable:!0,composed:!0,detail:{assignment:assignment}}))}}// if we have errors to display
if("undefined"!==typeof response.errors){var ul=document.createElement("ul"),text="";response.errors.forEach(function(error){text=text+" "+error});this.shadowRoot.querySelector("#toast").show(text)}}}window.customElements.define(LrnappStudioAssignmentButton.tag,LrnappStudioAssignmentButton);export{LrnappStudioAssignmentButton};