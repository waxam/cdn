import{storiesOf as e}from"../../@storybook/polymer/dist/client/index.js";import*as o from"../../@storybook/addon-knobs/polymer.js";import"../simple-colors/lib/simple-colors-polymer.js";import"../es-global-bridge/es-global-bridge.js";
/**
 * Copyright 2018 The Pennsylvania State University
 * @license Apache-2.0, see License.md for full text.
 */export class StorybookUtilities{cleanHTML(e,o=[]){var t=/<body[^>]*>((.|[\n\r])*)<\/body>/im.exec(e);return e=t[1],o.forEach(o=>{e=e.replace(new RegExp(o.find,"g"),o.replace)}),e=e.replace(/=\\"\\"/g,"").replace(/\\"/g,'"')}addPattern(o){let t=this.cleanHTML(o.file,o.replacements);return o.before=o.before||"",o.after=o.after||"",o.demo=e(o.of,module),o.demo.add(o.name,()=>`${o.before}${t}${o.after}`),[o.before,t,o.after]}getBindings(e){let t={};return Object.keys(e).sort().forEach(i=>{if(!1===i.startsWith("__")&&(void 0===e[i].computed||"undefined"===e[i].computed)&&!0!==e[i].readOnly){let a=e[i].type.name||e[i].type;if(a){let l=a.toLowerCase(),r=JSON.stringify(e[i].value||""),s=i.replace(/[A-Z\u00C0-\u00D6\u00D8-\u00DE]/g,(function(e){return"-"+e.toLowerCase()}));t[i]={id:s,value:"select"===l?o.select(i,e[i].options||[],e[i].value):"number"===l?o.number(i,void 0!==e[i].value&&null!==e[i].value?parseFloat(e[i].value):""):"boolean"===l?o.boolean(i,e[i].value):"date"===l?o.date(i,new Date(e[i].value)):"files"===l?o.files(i,e[i].options||{},e[i].value||""):"radios"===l?o.radios(i,e[i].options||{},e[i].value||""):"object"===l?o.text(i,r||"{}"):"array"===l?o.text(i,r||"[]"):"options"===l?o.radios(i,e[i].valuesObj||{},e[i].value||"",e[i].options||{}):o.text(i,e[i].value||"")}}}}),t}getSimpleColorsPolymer(e="blue"){return{accentColor:{name:"accentColor",type:"Select",value:e,options:Object.keys(window.SimpleColorsStyles.colors)},dark:{name:"dark",type:"Boolean",value:!1}}}addLiveDemo(t,i=!1){t.alias=void 0!==t.alias?t.alias:t.name,t.before=void 0!==t.before?t.before:"",t.after=void 0!==t.after?t.after:"",t.attr=void 0!==t.attr?t.attr:"",t.slotted=void 0!==t.slotted?t.slotted:"",t.slots=void 0!==t.slots?t.slots:{},t.props=void 0!==t.props?t.props:{},t.demo=e(t.of,module),t.demo.addDecorator(o.withKnobs),t.demo.add(t.alias,()=>(t.attrBindings="",Object.values(this.getBindings(t.props)).forEach(e=>{!1!==e.value&&""!==e.value&&(t.attrBindings+="string"!=typeof e.value?` ${e.id}="${e.value}"`:` ${e.id}="${e.value.replace(/'/g,"&apos;").replace(/"/g,"&quot;")}"`)}),t.slotBindings="",Object.values(this.getBindings(t.slots)).forEach(e=>{t.slotBindings+="slot"!==e.id?`<div slot="${e.id}">${e.value}</div>`:`${e.value}`}),`\n        <h1>${t.alias}</h1>\n        ${t.before}\n        <${t.name}${t.attrBindings}${t.attr}>\n          ${t.slotBindings}\n          ${t.slotted}\n        </${t.name}>\n        ${t.after}\n      `),{knobs:{escapeHTML:i}})}addGlobalScript(e,o){window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.webpack||(window.ESGlobalBridge.webpack={}),window.ESGlobalBridge.webpack[e]=!0,window.ESGlobalBridge.instance.load(e,o,!0)}}window.StorybookUtilities=window.StorybookUtilities||{},window.StorybookUtilities.requestAvailability=()=>{window.StorybookUtilities.instance||(window.StorybookUtilities.instance=new StorybookUtilities)};