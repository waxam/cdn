import{LitElement as t,html as e,css as i}from"../../lit-element/lit-element.js";import"../cms-hax/cms-hax.js";class WysiwygHax extends t{static get styles(){return[i`
        :host {
          display: block;
        }
      `]}render(){return e`
      <textarea
        class="${this.fieldClass}"
        id="${this.fieldId}"
        name="${this.fieldName}"
        hidden=""
      >
      ${this.bodyValue}
      </textarea
      >
      <cms-hax
        hide-message=""
        redirect-location="${this.redirectLocation}"
        update-page-data="${this.updatePageData}"
        .end-point="${this.endPoint}"
        app-store-connection="${this.appStoreConnection}"
        offset-margin="${this.offsetMargin}"
        .allowed-tags="${this.allowedTags}"
        ?open-default="${this.openDefault}"
        ?sync-body="${this.syncBody}"
        ?hide-panel-ops="${this.hidePanelOps}"
        ?hide-preferences-button="${this.hidePreferencesButton}"
        element-align="${this.elementAlign}"
      >
      </cms-hax>
    `}static get tag(){return"wysiwyg-hax"}constructor(){super();let t=this.querySelector("template");t&&(this.__importContent=t.innerHTML),this.openDefault=!1,this.elementAlign="right",this.fieldId="textarea-input-field",this.fieldName="data[content]",this.endPoint=null,this.allowedTags=[],this.__imported=!1,this.redirectLocation="",this.updatePageData=""}updated(t){t.forEach((t,e)=>{"activeHaxBody"==e&&this._activeHaxBodyUpdated(this[e]),"saveButtonSelector"==e&&this[e].tagName&&this.saveButtonSelector.addEventListener("click",this.__saveClicked.bind(this))})}static get properties(){return{openDefault:{type:Boolean,attribute:"open-default"},redirectLocation:{type:String,attribute:"redirect-location"},hidePanelOps:{type:Boolean,attribute:"hide-panel-ops"},hidePreferencesButton:{type:Boolean,attribute:"hide-preferences-button"},elementAlign:{type:String,attribute:"element-align"},offsetMargin:{type:String,attribute:"offset-margin"},bodyValue:{type:String,attribute:"body-value"},allowedTags:{type:Array,attribute:"allowed-tags"},appStoreConnection:{type:String,attribute:"app-store-connection"},saveButtonSelector:{type:Object},fieldClass:{type:String,attribute:"field-class"},fieldId:{type:String,attribute:"field-id"},fieldName:{type:String,attribute:"field-name"},syncBody:{type:Boolean,attribute:"sync-body",reflect:!0},editMode:{type:Boolean,reflect:!0,attribute:"edit-mode"},endPoint:{type:String,attribute:"end-point"},updatePageData:{type:String,attribute:"update-page-data"},activeHaxBody:{type:Object},__imported:{type:Boolean}}}createRenderRoot(){return this}_activeHaxBodyUpdated(t){null==t||this.__imported||(this.__imported=!0,this.__importContent&&t.importContent(this.__importContent))}connectedCallback(){super.connectedCallback(),window.addEventListener("hax-save",this._bodyContentUpdated.bind(this)),window.addEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this))}disconnectedCallback(){window.removeEventListener("hax-save",this._bodyContentUpdated.bind(this)),window.removeEventListener("hax-store-property-updated",this._haxStorePropertyUpdated.bind(this)),this.saveButtonSelector&&this.saveButtonSelector.tagName&&this.saveButtonSelector.removeEventListener("click",this.__saveClicked.bind(this)),super.disconnectedCallback()}__saveClicked(t){this.bodyValue=window.HaxStore.instance.activeHaxBody.haxToContent()}_haxStorePropertyUpdated(t){t.detail&&void 0!==t.detail.value&&t.detail.property&&("object"==typeof t.detail.value&&(this[t.detail.property]=null),this[t.detail.property]=t.detail.value)}_bodyContentUpdated(t){this.bodyValue=window.HaxStore.instance.activeHaxBody.haxToContent(),setTimeout(()=>{this.saveButtonSelector&&this.saveButtonSelector.click()},100)}}window.customElements.define(WysiwygHax.tag,WysiwygHax);export{WysiwygHax};