import{Observable}from"../Observable.js";import{from}from"./from.js";import{EMPTY}from"./empty.js";export function using(resourceFactory,observableFactory){return new Observable(function(subscriber){var resource;try{resource=resourceFactory()}catch(err){subscriber.error(err);return}var result;try{result=observableFactory(resource)}catch(err){subscriber.error(err);return}var source=result?from(result):EMPTY,subscription=source.subscribe(subscriber);return function(){subscription.unsubscribe();if(resource){resource.unsubscribe()}}})}