import{ResizeObserverBoxOptions as e}from"../ResizeObserverBoxOptions.js";import{DOMRectReadOnly as t}from"../DOMRectReadOnly.js";import{isSVG as i,isHidden as o}from"../utils/element.js";import{global as r}from"../utils/global.js";var n=new WeakMap,d=/auto|scroll/,c=/^tb|vertical/,a=/msie|trident/i.test(r.navigator&&r.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})},s=Object.freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new t(0,0,0,0)}),calculateBoxSizes=function(e,r){if(void 0===r&&(r=!1),n.has(e)&&!r)return n.get(e);if(o(e))return n.set(e,s),s;var l=getComputedStyle(e),f=i(e)&&e.ownerSVGElement&&e.getBBox(),h=!a&&"border-box"===l.boxSizing,u=c.test(l.writingMode||""),g=!f&&d.test(l.overflowY||""),x=!f&&d.test(l.overflowX||""),v=f?0:parseDimension(l.paddingTop),b=f?0:parseDimension(l.paddingRight),B=f?0:parseDimension(l.paddingBottom),z=f?0:parseDimension(l.paddingLeft),p=f?0:parseDimension(l.borderTopWidth),m=f?0:parseDimension(l.borderRightWidth),S=f?0:parseDimension(l.borderBottomWidth),O=z+b,R=v+B,w=(f?0:parseDimension(l.borderLeftWidth))+m,j=p+S,W=x?e.offsetHeight-j-e.clientHeight:0,C=g?e.offsetWidth-w-e.clientWidth:0,E=h?O+w:0,P=h?R+j:0,M=f?f.width:parseDimension(l.width)-E-C,T=f?f.height:parseDimension(l.height)-P-W,X=M+O+C+w,_=T+R+W+j,D=Object.freeze({devicePixelContentBoxSize:size(Math.round(M*devicePixelRatio),Math.round(T*devicePixelRatio),u),borderBoxSize:size(X,_,u),contentBoxSize:size(M,T,u),contentRect:new t(z,v,M,T)});return n.set(e,D),D},calculateBoxSize=function(t,i,o){var r=calculateBoxSizes(t,o),n=r.borderBoxSize,d=r.contentBoxSize,c=r.devicePixelContentBoxSize;switch(i){case e.DEVICE_PIXEL_CONTENT_BOX:return c;case e.BORDER_BOX:return n;default:return d}};export{calculateBoxSize,calculateBoxSizes};