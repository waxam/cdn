import{ResizeObserverBoxOptions as e}from"../ResizeObserverBoxOptions.js";import{DOMRectReadOnly as t}from"../DOMRectReadOnly.js";import{isSVG as i,isHidden as o}from"../utils/element.js";import{global as r}from"../utils/global.js";var n=new Map,d=/auto|scroll/,c=/^tb|vertical/,a=/msie|trident/i.test(r.navigator&&r.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})},s=Object.freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new t(0,0,0,0)}),calculateBoxSizes=function(e){if(n.has(e))return n.get(e);if(o(e))return n.set(e,s),s;var r=getComputedStyle(e),l=i(e)&&e.ownerSVGElement&&e.getBBox(),f=!a&&"border-box"===r.boxSizing,h=c.test(r.writingMode||""),u=!l&&d.test(r.overflowY||""),g=!l&&d.test(r.overflowX||""),x=l?0:parseDimension(r.paddingTop),b=l?0:parseDimension(r.paddingRight),v=l?0:parseDimension(r.paddingBottom),B=l?0:parseDimension(r.paddingLeft),z=l?0:parseDimension(r.borderTopWidth),p=l?0:parseDimension(r.borderRightWidth),m=l?0:parseDimension(r.borderBottomWidth),S=B+b,O=x+v,R=(l?0:parseDimension(r.borderLeftWidth))+p,w=z+m,j=g?e.offsetHeight-w-e.clientHeight:0,C=u?e.offsetWidth-R-e.clientWidth:0,E=f?S+R:0,P=f?O+w:0,W=l?l.width:parseDimension(r.width)-E-C,M=l?l.height:parseDimension(r.height)-P-j,T=W+S+C+R,X=M+O+j+w,_=Object.freeze({devicePixelContentBoxSize:size(Math.round(W*devicePixelRatio),Math.round(M*devicePixelRatio),h),borderBoxSize:size(T,X,h),contentBoxSize:size(W,M,h),contentRect:new t(B,x,W,M)});return n.set(e,_),_},calculateBoxSize=function(t,i){var o=calculateBoxSizes(t),r=o.borderBoxSize,n=o.contentBoxSize,d=o.devicePixelContentBoxSize;switch(i){case e.DEVICE_PIXEL_CONTENT_BOX:return d;case e.BORDER_BOX:return r;default:return n}};export{calculateBoxSize,calculateBoxSizes,n as cache};