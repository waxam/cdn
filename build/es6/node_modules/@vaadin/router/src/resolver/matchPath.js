import t from"./path-to-regexp.js";const{hasOwnProperty:e}=Object.prototype,n=new Map;function decodeParam(t){try{return decodeURIComponent(t)}catch(e){return t}}n.set("|false",{keys:[],pattern:/(?:)/});export default function matchPath(r,a,o,c,s){const p=`${r}|${o=!!o}`;let d=n.get(p);if(!d){const e=[];d={keys:e,pattern:t(r,e,{end:o,strict:""===r})},n.set(p,d)}const i=d.pattern.exec(a);if(!i)return null;const l=Object.assign({},s);for(let t=1;t<i.length;t++){const n=d.keys[t-1],r=n.name,a=i[t];void 0===a&&e.call(l,r)||(n.repeat?l[r]=a?a.split(n.delimiter).map(decodeParam):[]:l[r]=a?decodeParam(a):a)}return{path:i[0],keys:(c||[]).concat(d.keys),params:l}}