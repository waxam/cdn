!function(f,d){"object"==typeof exports&&"undefined"!=typeof module?d(exports):"function"==typeof define&&define.amd?define(["exports"],d):d((f=f||self).Vaadin=f.Vaadin||{})}(this,(function(f){function t(f){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(f){return typeof f}:function(f){return f&&"function"==typeof Symbol&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f})(f)}function n(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function r(f,d){for(var p=0;p<d.length;p++){var C=d[p];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(f,C.key,C)}}function o(f,d,p){return d&&r(f.prototype,d),p&&r(f,p),f}function a(f){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(f){return f.__proto__||Object.getPrototypeOf(f)})(f)}function i(f,d){return(i=Object.setPrototypeOf||function(f,d){return f.__proto__=d,f})(f,d)}function c(f){if(void 0===f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return f}function u(f,d,p){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(f,d,p){var C=function(f,d){for(;!Object.prototype.hasOwnProperty.call(f,d)&&null!==(f=a(f)););return f}(f,d);if(C){var O=Object.getOwnPropertyDescriptor(C,d);return O.get?O.get.call(p):O.value}})(f,d,p||f)}function l(f){return function(f){if(Array.isArray(f)){for(var d=0,p=new Array(f.length);d<f.length;d++)p[d]=f[d];return p}}(f)||function(f){if(Symbol.iterator in Object(f)||"[object Arguments]"===Object.prototype.toString.call(f))return Array.from(f)}(f)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(f){return f=f||[],Array.isArray(f)?f:[f]}function h(f){return"[Vaadin.Router] ".concat(f)}var d="module",p="nomodule",C=[d,p];function v(f){if(!f.match(/.+\.[m]?js$/))throw new Error(h('Unsupported type for bundle "'.concat(f,'": .js or .mjs expected.')))}function _(f){if(!f||!E(f.path))throw new Error(h('Expected route config to be an object with a "path" string property, or an array of such objects'));var O=f.bundle,A=["component","redirect","bundle"];if(!(b(f.action)||Array.isArray(f.children)||b(f.children)||w(O)||A.some((function(d){return E(f[d])}))))throw new Error(h('Expected route config "'.concat(f.path,'" to include either "').concat(A.join('", "'),'" ')+'or "action" function but none found.'));if(O)if(E(O))v(O);else{if(!C.some((function(f){return f in O})))throw new Error(h('Expected route bundle to include either "'+p+'" or "'+d+'" keys, or both'));C.forEach((function(f){return f in O&&v(O[f])}))}f.redirect&&["bundle","component"].forEach((function(d){d in f&&console.warn(h('Route config "'.concat(f.path,'" has both "redirect" and "').concat(d,'" properties, ')+'and "redirect" will always override the latter. Did you mean to only use "'.concat(d,'"?')))}))}function m(f){s(f).forEach((function(f){return _(f)}))}function g(f,C){var O=document.head.querySelector('script[src="'+f+'"][async]');return O||((O=document.createElement("script")).setAttribute("src",f),C===d?O.setAttribute("type",d):C===p&&O.setAttribute(p,""),O.async=!0),new Promise((function(f,d){O.onreadystatechange=O.onload=function(d){O.__dynamicImportLoaded=!0,f(d)},O.onerror=function(f){O.parentNode&&O.parentNode.removeChild(O),d(f)},null===O.parentNode?document.head.appendChild(O):O.__dynamicImportLoaded&&f()}))}function y(f,d){return!window.dispatchEvent(new CustomEvent("vaadin-router-".concat(f),{cancelable:"go"===f,detail:d}))}function w(f){return"object"===t(f)&&!!f}function b(f){return"function"==typeof f}function E(f){return"string"==typeof f}function k(f){var d=new Error(h("Page not found (".concat(f.pathname,")")));return d.context=f,d.code=404,d}var O=new function e(){n(this,e)};function x(f){if(!f.defaultPrevented&&0===f.button&&!(f.shiftKey||f.ctrlKey||f.altKey||f.metaKey)){for(var d=f.target,p=f.composedPath?f.composedPath():f.path||[],C=0;C<p.length;C++){var O=p[C];if(O.nodeName&&"a"===O.nodeName.toLowerCase()){d=O;break}}for(;d&&"a"!==d.nodeName.toLowerCase();)d=d.parentNode;if(d&&"a"===d.nodeName.toLowerCase()&&!(d.target&&"_self"!==d.target.toLowerCase()||d.hasAttribute("download")||d.hasAttribute("router-ignore")||d.pathname===window.location.pathname&&""!==d.hash||(d.origin||function(f){var d=f.port,p=f.protocol,C="http:"===p&&"80"===d||"https:"===p&&"443"===d?f.hostname:f.host;return"".concat(p,"//").concat(C)}(d))!==window.location.origin)){var A=d;y("go",{pathname:A.pathname,search:A.search,hash:A.hash})&&f.preventDefault()}}}var A={activate:function(){window.document.addEventListener("click",x)},inactivate:function(){window.document.removeEventListener("click",x)}};function R(f){if("vaadin-router-ignore"!==f.state){var d=window.location;y("go",{pathname:d.pathname,search:d.search,hash:d.hash})}}/Trident/.test(navigator.userAgent)&&!b(window.PopStateEvent)&&(window.PopStateEvent=function(f,d){d=d||{};var p=document.createEvent("Event");return p.initEvent(f,Boolean(d.bubbles),Boolean(d.cancelable)),p.state=d.state||null,p},window.PopStateEvent.prototype=window.Event.prototype);var j={activate:function(){window.addEventListener("popstate",R)},inactivate:function(){window.removeEventListener("popstate",R)}},P=function D(f,d,p){return f instanceof RegExp?function(f,d){if(!d)return f;var p=f.source.match(/\((?!\?)/g);if(p)for(var C=0;C<p.length;C++)d.push({name:C,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return f}(f,d):Array.isArray(f)?function(f,d,p){for(var C=[],O=0;O<f.length;O++)C.push(D(f[O],d,p).source);return new RegExp("(?:"+C.join("|")+")",H(p))}(f,d,p):function(f,d,p){return $(N(f,p),d,p)}(f,d,p)},L=N,U=M,I=$,T=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function N(f,d){for(var p,C=[],O=0,A=0,j="",P=d&&d.delimiter||"/",L=d&&d.delimiters||"./",U=!1;null!==(p=T.exec(f));){var I=p[0],B=p[1],S=p.index;if(j+=f.slice(A,S),A=S+I.length,B)j+=B[1],U=!0;else{var K="",W=f[A],J=p[2],G=p[3],X=p[4],te=p[5];if(!U&&j.length){var re=j.length-1;L.indexOf(j[re])>-1&&(K=j[re],j=j.slice(0,re))}j&&(C.push(j),j="",U=!1);var oe=""!==K&&void 0!==W&&W!==K,pe="+"===te||"*"===te,ve="?"===te||"*"===te,_e=K||P,ge=G||X;C.push({name:J||O++,prefix:K,delimiter:_e,optional:ve,repeat:pe,partial:oe,pattern:ge?F(ge):"[^"+V(_e)+"]+?"})}}return(j||A<f.length)&&C.push(j+f.substr(A)),C}function M(f){for(var d=new Array(f.length),p=0;p<f.length;p++)"object"===t(f[p])&&(d[p]=new RegExp("^(?:"+f[p].pattern+")$"));return function(p,C){for(var O="",A=C&&C.encode||encodeURIComponent,j=0;j<f.length;j++){var P=f[j];if("string"!=typeof P){var L,U=p?p[P.name]:void 0;if(Array.isArray(U)){if(!P.repeat)throw new TypeError('Expected "'+P.name+'" to not repeat, but got array');if(0===U.length){if(P.optional)continue;throw new TypeError('Expected "'+P.name+'" to not be empty')}for(var I=0;I<U.length;I++){if(L=A(U[I],P),!d[j].test(L))throw new TypeError('Expected all "'+P.name+'" to match "'+P.pattern+'"');O+=(0===I?P.prefix:P.delimiter)+L}}else if("string"!=typeof U&&"number"!=typeof U&&"boolean"!=typeof U){if(!P.optional)throw new TypeError('Expected "'+P.name+'" to be '+(P.repeat?"an array":"a string"));P.partial&&(O+=P.prefix)}else{if(L=A(String(U),P),!d[j].test(L))throw new TypeError('Expected "'+P.name+'" to match "'+P.pattern+'", but got "'+L+'"');O+=P.prefix+L}}else O+=P}return O}}function V(f){return f.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function F(f){return f.replace(/([=!:$/()])/g,"\\$1")}function H(f){return f&&f.sensitive?"":"i"}function $(f,d,p){for(var C=(p=p||{}).strict,O=!1!==p.start,A=!1!==p.end,j=V(p.delimiter||"/"),P=p.delimiters||"./",L=[].concat(p.endsWith||[]).map(V).concat("$").join("|"),U=O?"^":"",I=0===f.length,T=0;T<f.length;T++){var B=f[T];if("string"==typeof B)U+=V(B),I=T===f.length-1&&P.indexOf(B[B.length-1])>-1;else{var S=B.repeat?"(?:"+B.pattern+")(?:"+V(B.delimiter)+"(?:"+B.pattern+"))*":B.pattern;d&&d.push(B),B.optional?B.partial?U+=V(B.prefix)+"("+S+")?":U+="(?:"+V(B.prefix)+"("+S+"))?":U+=V(B.prefix)+"("+S+")"}}return A?(C||(U+="(?:"+j+")?"),U+="$"===L?"$":"(?="+L+")"):(C||(U+="(?:"+j+"(?="+L+"))?"),I||(U+="(?="+j+"|"+L+")")),new RegExp(U,H(p))}P.parse=L,P.compile=function(f,d){return M(N(f,d))},P.tokensToFunction=U,P.tokensToRegExp=I;var B=Object.prototype.hasOwnProperty,S=new Map;function q(f){try{return decodeURIComponent(f)}catch(d){return f}}function Q(f){if(b(f.route.action))return f.route.action(f)}S.set("|false",{keys:[],pattern:/(?:)/});var K=function(){function e(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(n(this,e),Object(f)!==f)throw new TypeError("Invalid routes");this.baseUrl=d.baseUrl||"",this.errorHandler=d.errorHandler,this.resolveRoute=d.resolveRoute||Q,this.context=Object.assign({resolver:this},d.context),this.root=Array.isArray(f)?{path:"",__children:f,parent:null,__synthetic:!0}:f,this.root.parent=null}return o(e,[{key:"getRoutes",value:function(){return l(this.root.__children)}},{key:"setRoutes",value:function(f){m(f);var d=l(s(f));this.root.__children=d}},{key:"addRoutes",value:function(f){var d;return m(f),(d=this.root.__children).push.apply(d,l(s(f))),this.getRoutes()}},{key:"removeRoutes",value:function(){this.setRoutes([])}},{key:"resolve",value:function(f){var d=this,p=Object.assign({},this.context,E(f)?{pathname:f}:f),C=function z(f,d,p,C,O){var A,j,L=0,U=f.path||"";return"/"===U.charAt(0)&&(p&&(U=U.substr(1)),p=!0),{next:function(I){if(f===I)return{done:!0};var T=f.__children=f.__children||f.children;if(!A&&(A=function(f,d,p,C,O){p=!!p;var A="".concat(f,"|").concat(p),j=S.get(A);if(!j){var L=[];j={keys:L,pattern:P(f,L,{end:p,strict:""===f})},S.set(A,j)}var U=j.pattern.exec(d);if(!U)return null;for(var I=Object.assign({},O),T=1;T<U.length;T++){var K=j.keys[T-1],W=K.name,J=U[T];void 0===J&&B.call(I,W)||(K.repeat?I[W]=J?J.split(K.delimiter).map(q):[]:I[W]=J?q(J):J)}return{path:U[0],keys:(C||[]).concat(j.keys),params:I}}(U,d,!T,C,O)))return{done:!1,value:{route:f,keys:A.keys,params:A.params,path:A.path}};if(A&&T)for(;L<T.length;){if(!j){var K=T[L];K.parent=f;var W=A.path.length;W>0&&"/"===d.charAt(W)&&(W+=1),j=z(K,d.substr(W),p,A.keys,A.params)}var J=j.next(I);if(!J.done)return{done:!1,value:J.value};j=null,L++}return{done:!0}}}}(this.root,this.__normalizePathname(p.pathname),this.baseUrl),A=this.resolveRoute,j=null,L=null,U=p;function u(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.value.route,P=null===(arguments.length>2?arguments[2]:void 0)&&j.value.route;return j=L||C.next(P),L=null,f||!j.done&&function(f,d){for(var p=d;p;)if((p=p.parent)===f)return!0;return!1}(d,j.value.route)?j.done?Promise.reject(k(p)):(function(f,d){var p=d.route,C=d.path;if(p&&!p.__synthetic){var O={path:C,route:p};if(f.chain){if(p.parent)for(var A=f.chain.length;A--&&f.chain[A].route&&f.chain[A].route!==p.parent;)f.chain.pop()}else f.chain=[];f.chain.push(O)}}(U=Object.assign(U?{chain:U.chain?U.chain.slice(0):[]}:{},p,j.value),j.value),Promise.resolve(A(U)).then((function(p){return null!=p&&p!==O?(U.result=p.result||p,U):u(f,d,p)}))):(L=j,Promise.resolve(O))}return p.next=u,Promise.resolve().then((function(){return u(!0,d.root)})).catch((function(f){var p=function(f){var d="Path '".concat(f.pathname,"' is not properly resolved due to an error."),p=(f.route||{}).path;return p&&(d+=" Resolution had failed on route: '".concat(p,"'")),d}(U);if(f?console.warn(p):f=new Error(p),f.context=f.context||U,f instanceof DOMException||(f.code=f.code||500),d.errorHandler)return U.result=d.errorHandler(f),U;throw f}))}},{key:"__normalizePathname",value:function(f){if(!this.baseUrl)return f;var d=this.__effectiveBaseUrl,p=this.constructor.__createUrl(f,d).href;return p.slice(0,d.length)===d?p.slice(d.length):void 0}},{key:"__effectiveBaseUrl",get:function(){return this.baseUrl?this.constructor.__createUrl(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}}],[{key:"__createUrl",value:function(f,d){return new URL(f,d)}}]),e}();K.pathToRegexp=P;var W=K.pathToRegexp,J=new Map;function Y(f,d){var p=f.get(d);if(p&&p.length>1)throw new Error('Duplicate route with name "'.concat(d,'".')+" Try seting unique 'name' route properties.");return p&&p[0]}function Z(f){var d=f.path;return void 0!==(d=Array.isArray(d)?d[0]:d)?d:""}var G=[];function ne(f){G.forEach((function(f){return f.inactivate()})),f.forEach((function(f){return f.activate()})),G=f}function ae(f,d){return f.classList.add(d),new Promise((function(p){if(function(f){var d=getComputedStyle(f).getPropertyValue("animation-name");return d&&"none"!==d}(f)){var C=f.getBoundingClientRect(),O="height: ".concat(C.bottom-C.top,"px; width: ").concat(C.right-C.left,"px");f.setAttribute("style","position: absolute; ".concat(O)),function(f,d){f.addEventListener("animationend",(function n(){f.removeEventListener("animationend",n),d()}))}(f,(function(){f.classList.remove(d),f.removeAttribute("style"),p()}))}else f.classList.remove(d),p()}))}function ie(f){return null!=f}function ce(f,d){var p=f.pathname,C=void 0===p?"":p,O=f.search,A=void 0===O?"":O,j=f.hash,P=void 0===j?"":j,L=f.chain,U=void 0===L?[]:L,I=f.params,T=void 0===I?{}:I,B=f.redirectFrom,S=f.resolver,K=U.map((function(f){return f.route}));return{baseUrl:S&&S.baseUrl||"",pathname:C,search:A,hash:P,routes:K,route:d||K.length&&K[K.length-1]||null,params:T,redirectFrom:B,getUrl:function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return fe(X.pathToRegexp.compile(de(K))(Object.assign({},T,f)),S)}}}function ue(f,d){var p=Object.assign({},f.params);return{redirect:{pathname:d,from:f.pathname,params:p}}}function le(f,d,p){if(b(f))return f.apply(p,d)}function se(f,d,p){return function(C){return C&&(C.cancel||C.redirect)?C:p?le(p[f],d,p):void 0}}function he(f){if(f&&f.length)for(var d=f[0].parentNode,p=0;p<f.length;p++)d.removeChild(f[p])}function fe(f,d){var p=d.__effectiveBaseUrl;return p?d.constructor.__createUrl(f.replace(/^\//,""),p).pathname:f}function de(f){return f.map((function(f){return f.path})).reduce((function(f,d){return d.length?f.replace(/\/$/,"")+"/"+d.replace(/^\//,""):f}),"")}var X=function(f){function r(f,d){var p;n(this,r);var C,O=document.head.querySelector("base"),A=O&&O.getAttribute("href");C=a(r).call(this,[],Object.assign({baseUrl:A&&K.__createUrl(A,document.URL).pathname.replace(/[^\/]*$/,"")},d)),(p=!C||"object"!=typeof C&&"function"!=typeof C?c(this):C).resolveRoute=function(f){return p.__resolveRoute(f)};var j=r.NavigationTrigger;return r.setTriggers.apply(r,Object.keys(j).map((function(f){return j[f]}))),p.baseUrl,p.ready,p.ready=Promise.resolve(f),p.location,p.location=ce({resolver:c(p)}),p.__lastStartedRenderId=0,p.__navigationEventHandler=p.__onNavigationEvent.bind(c(p)),p.setOutlet(f),p.subscribe(),p.__createdByRouter=new WeakMap,p.__addedByRouter=new WeakMap,p}return function(f,d){if("function"!=typeof d&&null!==d)throw new TypeError("Super expression must either be null or a function");f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,writable:!0,configurable:!0}}),d&&i(f,d)}(r,K),o(r,[{key:"__resolveRoute",value:function(f){var d=this,p=f.route,A=Promise.resolve();b(p.children)&&(A=A.then((function(){return p.children(function(f){var d=Object.assign({},f);return delete d.next,d}(f))})).then((function(f){ie(f)||b(p.children)||(f=p.children),function(f,d){if(!Array.isArray(f)&&!w(f))throw new Error(h('Incorrect "children" value for the route '.concat(d.path,": expected array or object, but got ").concat(f)));d.__children=[];for(var p=s(f),C=0;C<p.length;C++)_(p[C]),d.__children.push(p[C])}(f,p)})));var j={redirect:function(d){return ue(f,d)},component:function(f){var p=document.createElement(f);return d.__createdByRouter.set(p,!0),p}};return A.then((function(){if(d.__isLatestRender(f))return le(p.action,[f,j],p)})).then((function(f){return ie(f)&&(f instanceof HTMLElement||f.redirect||f===O)?f:E(p.redirect)?j.redirect(p.redirect):p.bundle?(d=p.bundle,E(d)?g(d):Promise.race(C.filter((function(f){return f in d})).map((function(f){return g(d[f],f)})))).then((function(){}),(function(){throw new Error(h("Bundle not found: ".concat(p.bundle,". Check if the file name is correct")))})):void 0;var d})).then((function(f){return ie(f)?f:E(p.component)?j.component(p.component):void 0}))}},{key:"setOutlet",value:function(f){f&&this.__ensureOutlet(f),this.__outlet=f}},{key:"getOutlet",value:function(){return this.__outlet}},{key:"setRoutes",value:function(f){var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.__previousContext=void 0,this.__urlForName=void 0,u(a(r.prototype),"setRoutes",this).call(this,f),d||this.__onNavigationEvent(),this.ready}},{key:"render",value:function(f,d){var p=this,C=++this.__lastStartedRenderId,O=Object.assign({search:"",hash:""},E(f)?{pathname:f}:f,{__renderId:C});return this.ready=this.resolve(O).then((function(f){return p.__fullyResolveChain(f)})).then((function(f){if(p.__isLatestRender(f)){var O=p.__previousContext;if(f===O)return p.__updateBrowserHistory(O,!0),p.location;if(p.location=ce(f),d&&p.__updateBrowserHistory(f,1===C),y("location-changed",{router:p,location:p.location}),f.__skipAttach)return p.__copyUnchangedElements(f,O),p.__previousContext=f,p.location;p.__addAppearingContent(f,O);var A=p.__animateIfNeeded(f);return p.__runOnAfterEnterCallbacks(f),p.__runOnAfterLeaveCallbacks(f,O),A.then((function(){if(p.__isLatestRender(f))return p.__removeDisappearingContent(),p.__previousContext=f,p.location}))}})).catch((function(f){if(C===p.__lastStartedRenderId)throw d&&p.__updateBrowserHistory(O),he(p.__outlet&&p.__outlet.children),p.location=ce(Object.assign(O,{resolver:p})),y("error",Object.assign({router:p,error:f},O)),f})),this.ready}},{key:"__fullyResolveChain",value:function(f){var d=this,p=arguments.length>1&&void 0!==arguments[1]?arguments[1]:f;return this.__findComponentContextAfterAllRedirects(p).then((function(C){var A=C!==p?C:f,j=fe(de(C.chain),C.resolver)===C.pathname;return function e(f,d){var p=void 0;return void 0===d?d=f.route:p=null,f.next(void 0,d,p).then((function(d){return null===d||d===O?j?f:e(f,f.route.parent):d}))}(C).then((function(f){if(null===f||f===O)throw k(A);return f&&f!==O&&f!==C?d.__fullyResolveChain(A,f):d.__amendWithOnBeforeCallbacks(C)}))}))}},{key:"__findComponentContextAfterAllRedirects",value:function(f){var d=this,p=f.result;return p instanceof HTMLElement?(function(f,d){d.location=ce(f);var p=f.chain.map((function(f){return f.route})).indexOf(f.route);f.chain[p].element=d}(f,p),Promise.resolve(f)):p.redirect?this.__redirect(p.redirect,f.__redirectCount,f.__renderId).then((function(f){return d.__findComponentContextAfterAllRedirects(f)})):p instanceof Error?Promise.reject(p):Promise.reject(new Error(h('Invalid route resolution result for path "'.concat(f.pathname,'". ')+'Expected redirect object or HTML element, but got: "'.concat(function(f){if("object"!==t(f))return String(f);var d=Object.prototype.toString.call(f).match(/ (.*)\]$/)[1];return"Object"===d||"Array"===d?"".concat(d," ").concat(JSON.stringify(f)):d}(p),'". ')+"Double check the action return value for the route.")))}},{key:"__amendWithOnBeforeCallbacks",value:function(f){var d=this;return this.__runOnBeforeCallbacks(f).then((function(p){return p===d.__previousContext||p===f?p:d.__fullyResolveChain(p)}))}},{key:"__runOnBeforeCallbacks",value:function(f){var d=this,p=this.__previousContext||{},C=p.chain||[],O=f.chain,A=Promise.resolve(),i=function(){return{cancel:!0}},c=function(d){return ue(f,d)};if(f.__divergedChainIndex=0,f.__skipAttach=!1,C.length){for(var j=0;j<Math.min(C.length,O.length)&&C[j].route===O[j].route&&(C[j].path===O[j].path||C[j].element===O[j].element)&&this.__isReusableElement(C[j].element,O[j].element);j=++f.__divergedChainIndex);if(f.__skipAttach=O.length===C.length&&f.__divergedChainIndex==O.length&&this.__isReusableElement(f.result,p.result),f.__skipAttach){for(var P=O.length-1;P>=0;P--)C[P].path===O[P].path&&f.search===p.search||(A=this.__runOnBeforeLeaveCallbacks(A,f,{prevent:i},C[P]));for(var L=0;L<O.length;L++)C[L].path===O[L].path&&f.search===p.search||(A=this.__runOnBeforeEnterCallbacks(A,f,{prevent:i,redirect:c},O[L])),C[L].element.location=ce(f,C[L].route)}else for(var U=C.length-1;U>=f.__divergedChainIndex;U--)A=this.__runOnBeforeLeaveCallbacks(A,f,{prevent:i},C[U])}for(var I=f.__divergedChainIndex;!f.__skipAttach&&I<O.length;I++)A=this.__runOnBeforeEnterCallbacks(A,f,{prevent:i,redirect:c},O[I]);return A.then((function(p){if(p){if(p.cancel)return d.__previousContext.__renderId=f.__renderId,d.__previousContext;if(p.redirect)return d.__redirect(p.redirect,f.__redirectCount,f.__renderId)}return f}))}},{key:"__runOnBeforeLeaveCallbacks",value:function(f,d,p,C){var O=this,A=ce(d);return f.then((function(f){if(O.__isLatestRender(d))return se("onBeforeLeave",[A,p,O],C.element)(f)})).then((function(f){if(!(f||{}).redirect)return f}))}},{key:"__runOnBeforeEnterCallbacks",value:function(f,d,p,C){var O=this,A=ce(d,C.route);return f.then((function(f){if(O.__isLatestRender(d))return se("onBeforeEnter",[A,p,O],C.element)(f)}))}},{key:"__isReusableElement",value:function(f,d){return!(!f||!d)&&(this.__createdByRouter.get(f)&&this.__createdByRouter.get(d)?f.localName===d.localName:f===d)}},{key:"__isLatestRender",value:function(f){return f.__renderId===this.__lastStartedRenderId}},{key:"__redirect",value:function(f,d,p){if(d>256)throw new Error(h("Too many redirects when rendering ".concat(f.from)));return this.resolve({pathname:this.urlForPath(f.pathname,f.params),redirectFrom:f.from,__redirectCount:(d||0)+1,__renderId:p})}},{key:"__ensureOutlet",value:function(){var f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__outlet;if(!(f instanceof Node))throw new TypeError(h("Expected router outlet to be a valid DOM Node (but got ".concat(f,")")))}},{key:"__updateBrowserHistory",value:function(f,d){var p=f.pathname,C=f.search,O=void 0===C?"":C,A=f.hash,j=void 0===A?"":A;if(window.location.pathname!==p||window.location.search!==O||window.location.hash!==j){var P=d?"replaceState":"pushState";window.history[P](null,document.title,p+O+j),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}},{key:"__copyUnchangedElements",value:function(f,d){for(var p=this.__outlet,C=0;C<f.__divergedChainIndex;C++){var O=d&&d.chain[C].element;if(O){if(O.parentNode!==p)break;f.chain[C].element=O,p=O}}return p}},{key:"__addAppearingContent",value:function(f,d){var p=this;this.__ensureOutlet(),this.__removeAppearingContent();var C=this.__copyUnchangedElements(f,d);this.__appearingContent=[],this.__disappearingContent=Array.from(C.children).filter((function(d){return p.__addedByRouter.get(d)&&d!==f.result}));for(var O=C,A=f.__divergedChainIndex;A<f.chain.length;A++){var j=f.chain[A].element;j&&(O.appendChild(j),this.__addedByRouter.set(j,!0),O===C&&this.__appearingContent.push(j),O=j)}}},{key:"__removeDisappearingContent",value:function(){this.__disappearingContent&&he(this.__disappearingContent),this.__disappearingContent=null,this.__appearingContent=null}},{key:"__removeAppearingContent",value:function(){this.__disappearingContent&&this.__appearingContent&&(he(this.__appearingContent),this.__disappearingContent=null,this.__appearingContent=null)}},{key:"__runOnAfterLeaveCallbacks",value:function(f,d){if(d)for(var p=d.chain.length-1;p>=f.__divergedChainIndex&&this.__isLatestRender(f);p--){var C=d.chain[p].element;if(C)try{var O=ce(f);le(C.onAfterLeave,[O,{},d.resolver],C)}finally{this.__disappearingContent.indexOf(C)>-1&&he(C.children)}}}},{key:"__runOnAfterEnterCallbacks",value:function(f){for(var d=f.__divergedChainIndex;d<f.chain.length&&this.__isLatestRender(f);d++){var p=f.chain[d].element||{},C=ce(f,f.chain[d].route);le(p.onAfterEnter,[C,{},f.resolver],p)}}},{key:"__animateIfNeeded",value:function(f){for(var d,p=(this.__disappearingContent||[])[0],C=(this.__appearingContent||[])[0],O=[],A=f.chain,j=A.length;j>0;j--)if(A[j-1].route.animate){d=A[j-1].route.animate;break}if(p&&C&&d){var P=w(d)&&d.leave||"leaving",L=w(d)&&d.enter||"entering";O.push(ae(p,P)),O.push(ae(C,L))}return Promise.all(O).then((function(){return f}))}},{key:"subscribe",value:function(){window.addEventListener("vaadin-router-go",this.__navigationEventHandler)}},{key:"unsubscribe",value:function(){window.removeEventListener("vaadin-router-go",this.__navigationEventHandler)}},{key:"__onNavigationEvent",value:function(f){var d=f?f.detail:window.location,p=d.pathname,C=d.search,O=d.hash;E(this.__normalizePathname(p))&&(f&&f.preventDefault&&f.preventDefault(),this.render({pathname:p,search:C,hash:O},!0))}},{key:"urlForName",value:function(f,d){return this.__urlForName||(this.__urlForName=function ee(f){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(f instanceof K))throw new TypeError("An instance of Resolver is expected");var p=new Map;return function(C,O){var A=Y(p,C);if(!(A||(p.clear(),function e(f,d,p){var C=d.name||d.component;if(C&&(f.has(C)?f.get(C).push(d):f.set(C,[d])),Array.isArray(p))for(var O=0;O<p.length;O++){var A=p[O];A.parent=d,e(f,A,A.__children||A.children)}}(p,f.root,f.root.__children),A=Y(p,C))))throw new Error('Route "'.concat(C,'" not found'));var j=J.get(A.fullPath);if(!j){for(var P=Z(A),L=A.parent;L;){var U=Z(L);U&&(P=U.replace(/\/$/,"")+"/"+P.replace(/^\//,"")),L=L.parent}for(var I=W.parse(P),T=W.tokensToFunction(I),B=Object.create(null),S=0;S<I.length;S++)E(I[S])||(B[I[S].name]=!0);j={toPath:T,keys:B},J.set(P,j),A.fullPath=P}var K=j.toPath(O,d)||"/";if(d.stringifyQueryParams&&O){for(var G={},X=Object.keys(O),te=0;te<X.length;te++){var re=X[te];j.keys[re]||(G[re]=O[re])}var oe=d.stringifyQueryParams(G);oe&&(K+="?"===oe.charAt(0)?oe:"?".concat(oe))}return K}}(this)),fe(this.__urlForName(f,d),this)}},{key:"urlForPath",value:function(f,d){return fe(r.pathToRegexp.compile(f)(d),this)}}],[{key:"setTriggers",value:function(){for(var f=arguments.length,d=new Array(f),p=0;p<f;p++)d[p]=arguments[p];ne(d)}},{key:"go",value:function(f){var d=E(f)?this.__createUrl(f,"http://a"):f;return y("go",{pathname:d.pathname,search:d.search,hash:d.hash})}}]),r}(),te=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i,re=window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients;function me(f,d){if("function"==typeof f){var p=te.exec(f.toString());if(p)try{f=new Function(p[1])}catch(f){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",f)}return f(d)}}window.Vaadin=window.Vaadin||{};var oe,pe,ve,_e;void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return!!localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&(re?!function(){if(re&&Object.keys(re).map((function(f){return re[f]})).filter((function(f){return f.productionMode})).length>0)return!0;return!1}():!me((function(){return!0})))}catch(f){return!1}}()),window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.7.0"}),function(f,d){if(window.Vaadin.developmentMode)me(f,d)}((function ye(){})),X.NavigationTrigger={POPSTATE:j,CLICK:A},K.__ensureUrlAvailableOrPolyfilled=function(){if(void 0===oe){try{var f=new URL("b","http://a");f.pathname="c",oe="http://a/c"===f.href}catch(f){oe=!1}if(!oe&&(pe=document.implementation.createHTMLDocument("url"),ve=pe.createElement("base"),pe.head.appendChild(ve),!(_e=pe.createElement("a")).origin)){Object.defineProperty(_e,"origin",{get:function(){var f=_e.protocol,d=_e.port,p="http:"===f&&"80"===d||"https:"===f&&"443"===d?_e.hostname:_e.host;return"".concat(f,"//").concat(p)}});var d=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(_e),"pathname").get;Object.defineProperty(_e,"pathname",{get:function(){var f=d.apply(_e);return"/"!==f.charAt(0)?"/"+f:f}})}}},K.__createUrl=function(f,d){return K.__ensureUrlAvailableOrPolyfilled(),oe?new URL(f,d):(ve.href=d,_e.href=f.replace(/ /g,"%20"),_e.href=_e.href,_e)},f.Resolver=K,f.Router=X,Object.defineProperty(f,"__esModule",{value:!0})}));