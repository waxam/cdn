export default(function(){function peg$SyntaxError(e,t,r,a){this.message=e,this.expected=t,this.found=r,this.location=a,this.name="SyntaxError","function"==typeof Error.captureStackTrace&&Error.captureStackTrace(this,peg$SyntaxError)}return function peg$subclass(e,t){function ctor(){this.constructor=e}ctor.prototype=t.prototype,e.prototype=new ctor}(peg$SyntaxError,Error),{SyntaxError:peg$SyntaxError,parse:function peg$parse(e){var t,r=arguments.length>1?arguments[1]:{},a={},n={start:peg$parsestart},p=peg$parsestart,peg$c0=function(e){return{type:"messageFormatPattern",elements:e,location:location()}},peg$c1=function(e){var t,r,a,n,p,s="";for(t=0,a=e.length;t<a;t+=1)for(r=0,p=(n=e[t]).length;r<p;r+=1)s+=n[r];return s},peg$c2=function(e){return{type:"messageTextElement",value:e,location:location()}},s=/^[^ \t\n\r,.+={}#]/,i={type:"class",value:"[^ \\t\\n\\r,.+={}#]",description:"[^ \\t\\n\\r,.+={}#]"},o="{",l={type:"literal",value:"{",description:'"{"'},u=",",c={type:"literal",value:",",description:'","'},g="}",f={type:"literal",value:"}",description:'"}"'},peg$c11=function(e,t){return{type:"argumentElement",id:e,format:t&&t[2],location:location()}},$="number",m={type:"literal",value:"number",description:'"number"'},h="date",d={type:"literal",value:"date",description:'"date"'},v="time",y={type:"literal",value:"time",description:'"time"'},peg$c18=function(e,t){return{type:e+"Format",style:t&&t[2],location:location()}},x="plural",F={type:"literal",value:"plural",description:'"plural"'},peg$c21=function(e){return{type:e.type,ordinal:!1,offset:e.offset||0,options:e.options,location:location()}},b="selectordinal",A={type:"literal",value:"selectordinal",description:'"selectordinal"'},peg$c24=function(e){return{type:e.type,ordinal:!0,offset:e.offset||0,options:e.options,location:location()}},E="select",C={type:"literal",value:"select",description:'"select"'},peg$c27=function(e){return{type:"selectFormat",options:e,location:location()}},_="=",S={type:"literal",value:"=",description:'"="'},peg$c30=function(e,t){return{type:"optionalFormatPattern",selector:e,value:t,location:location()}},P="offset:",w={type:"literal",value:"offset:",description:'"offset:"'},peg$c33=function(e){return e},peg$c34=function(e,t){return{type:"pluralFormat",offset:e,options:t,location:location()}},R={type:"other",description:"whitespace"},D=/^[ \t\n\r]/,T={type:"class",value:"[ \\t\\n\\r]",description:"[ \\t\\n\\r]"},L={type:"other",description:"optionalWhitespace"},j=/^[0-9]/,k={type:"class",value:"[0-9]",description:"[0-9]"},I=/^[0-9a-f]/i,O={type:"class",value:"[0-9a-f]i",description:"[0-9a-f]i"},B="0",M={type:"literal",value:"0",description:'"0"'},U=/^[1-9]/,W={type:"class",value:"[1-9]",description:"[1-9]"},peg$c47=function(e){return parseInt(e,10)},q=/^[^{}\\\0-\x1F \t\n\r]/,z={type:"class",value:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]",description:"[^{}\\\\\\0-\\x1F\\x7f \\t\\n\\r]"},G="\\\\",H={type:"literal",value:"\\\\",description:'"\\\\\\\\"'},peg$c52=function(){return"\\"},J="\\#",K={type:"literal",value:"\\#",description:'"\\\\#"'},peg$c55=function(){return"\\#"},N="\\{",Q={type:"literal",value:"\\{",description:'"\\\\{"'},peg$c58=function(){return"{"},V="\\}",X={type:"literal",value:"\\}",description:'"\\\\}"'},peg$c61=function(){return"}"},Y="\\u",Z={type:"literal",value:"\\u",description:'"\\\\u"'},peg$c64=function(e){return String.fromCharCode(parseInt(e,16))},peg$c65=function(e){return e.join("")},ee=0,te=0,re=[{line:1,column:1,seenCR:!1}],ae=0,ne=[],pe=0;if("startRule"in r){if(!(r.startRule in n))throw new Error("Can't start parsing from rule \""+r.startRule+'".');p=n[r.startRule]}function location(){return peg$computeLocation(te,ee)}function peg$computePosDetails(t){var r,a,n=re[t];if(n)return n;for(r=t-1;!re[r];)r--;for(n={line:(n=re[r]).line,column:n.column,seenCR:n.seenCR};r<t;)"\n"===(a=e.charAt(r))?(n.seenCR||n.line++,n.column=1,n.seenCR=!1):"\r"===a||"\u2028"===a||"\u2029"===a?(n.line++,n.column=1,n.seenCR=!0):(n.column++,n.seenCR=!1),r++;return re[t]=n,n}function peg$computeLocation(e,t){var r=peg$computePosDetails(e),a=peg$computePosDetails(t);return{start:{offset:e,line:r.line,column:r.column},end:{offset:t,line:a.line,column:a.column}}}function peg$fail(e){ee<ae||(ee>ae&&(ae=ee,ne=[]),ne.push(e))}function peg$buildException(e,t,r,a){return null!==t&&function cleanupExpected(e){var t=1;for(e.sort((function(e,t){return e.description<t.description?-1:e.description>t.description?1:0}));t<e.length;)e[t-1]===e[t]?e.splice(t,1):t++}(t),new peg$SyntaxError(null!==e?e:function buildMessage(e,t){var r,a=new Array(e.length);for(r=0;r<e.length;r++)a[r]=e[r].description;return"Expected "+(e.length>1?a.slice(0,-1).join(", ")+" or "+a[e.length-1]:a[0])+" but "+(t?'"'+function stringEscape(e){function hex(e){return e.charCodeAt(0).toString(16).toUpperCase()}return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\x08/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/[\x00-\x07\x0B\x0E\x0F]/g,(function(e){return"\\x0"+hex(e)})).replace(/[\x10-\x1F\x80-\xFF]/g,(function(e){return"\\x"+hex(e)})).replace(/[\u0100-\u0FFF]/g,(function(e){return"\\u0"+hex(e)})).replace(/[\u1000-\uFFFF]/g,(function(e){return"\\u"+hex(e)}))}(t)+'"':"end of input")+" found."}(t,r),t,r,a)}function peg$parsestart(){return peg$parsemessageFormatPattern()}function peg$parsemessageFormatPattern(){var e,t,r;for(e=ee,t=[],r=peg$parsemessageFormatElement();r!==a;)t.push(r),r=peg$parsemessageFormatElement();return t!==a&&(te=e,t=peg$c0(t)),e=t}function peg$parsemessageFormatElement(){var e;return(e=peg$parsemessageTextElement())===a&&(e=peg$parseargumentElement()),e}function peg$parsemessageText(){var t,r,n,p,s,i;if(t=ee,r=[],n=ee,(p=peg$parse_())!==a&&(s=peg$parsechars())!==a&&(i=peg$parse_())!==a?n=p=[p,s,i]:(ee=n,n=a),n!==a)for(;n!==a;)r.push(n),n=ee,(p=peg$parse_())!==a&&(s=peg$parsechars())!==a&&(i=peg$parse_())!==a?n=p=[p,s,i]:(ee=n,n=a);else r=a;return r!==a&&(te=t,r=peg$c1(r)),(t=r)===a&&(t=ee,t=(r=peg$parsews())!==a?e.substring(t,ee):r),t}function peg$parsemessageTextElement(){var e,t;return e=ee,(t=peg$parsemessageText())!==a&&(te=e,t=peg$c2(t)),e=t}function peg$parseargument(){var t,r,n;if((t=peg$parsenumber())===a){if(t=ee,r=[],s.test(e.charAt(ee))?(n=e.charAt(ee),ee++):(n=a,0===pe&&peg$fail(i)),n!==a)for(;n!==a;)r.push(n),s.test(e.charAt(ee))?(n=e.charAt(ee),ee++):(n=a,0===pe&&peg$fail(i));else r=a;t=r!==a?e.substring(t,ee):r}return t}function peg$parseargumentElement(){var t,r,n,p,s,i,$;return t=ee,123===e.charCodeAt(ee)?(r=o,ee++):(r=a,0===pe&&peg$fail(l)),r!==a&&peg$parse_()!==a&&(n=peg$parseargument())!==a&&peg$parse_()!==a?(p=ee,44===e.charCodeAt(ee)?(s=u,ee++):(s=a,0===pe&&peg$fail(c)),s!==a&&(i=peg$parse_())!==a&&($=peg$parseelementFormat())!==a?p=s=[s,i,$]:(ee=p,p=a),p===a&&(p=null),p!==a&&(s=peg$parse_())!==a?(125===e.charCodeAt(ee)?(i=g,ee++):(i=a,0===pe&&peg$fail(f)),i!==a?(te=t,t=r=peg$c11(n,p)):(ee=t,t=a)):(ee=t,t=a)):(ee=t,t=a),t}function peg$parseelementFormat(){var e;return(e=peg$parsesimpleFormat())===a&&(e=peg$parsepluralFormat())===a&&(e=peg$parseselectOrdinalFormat())===a&&(e=peg$parseselectFormat()),e}function peg$parsesimpleFormat(){var t,r,n,p,s,i;return t=ee,e.substr(ee,6)===$?(r=$,ee+=6):(r=a,0===pe&&peg$fail(m)),r===a&&(e.substr(ee,4)===h?(r=h,ee+=4):(r=a,0===pe&&peg$fail(d)),r===a&&(e.substr(ee,4)===v?(r=v,ee+=4):(r=a,0===pe&&peg$fail(y)))),r!==a&&peg$parse_()!==a?(n=ee,44===e.charCodeAt(ee)?(p=u,ee++):(p=a,0===pe&&peg$fail(c)),p!==a&&(s=peg$parse_())!==a&&(i=peg$parsechars())!==a?n=p=[p,s,i]:(ee=n,n=a),n===a&&(n=null),n!==a?(te=t,t=r=peg$c18(r,n)):(ee=t,t=a)):(ee=t,t=a),t}function peg$parsepluralFormat(){var t,r,n,p;return t=ee,e.substr(ee,6)===x?(r=x,ee+=6):(r=a,0===pe&&peg$fail(F)),r!==a&&peg$parse_()!==a?(44===e.charCodeAt(ee)?(n=u,ee++):(n=a,0===pe&&peg$fail(c)),n!==a&&peg$parse_()!==a&&(p=peg$parsepluralStyle())!==a?(te=t,t=r=peg$c21(p)):(ee=t,t=a)):(ee=t,t=a),t}function peg$parseselectOrdinalFormat(){var t,r,n,p;return t=ee,e.substr(ee,13)===b?(r=b,ee+=13):(r=a,0===pe&&peg$fail(A)),r!==a&&peg$parse_()!==a?(44===e.charCodeAt(ee)?(n=u,ee++):(n=a,0===pe&&peg$fail(c)),n!==a&&peg$parse_()!==a&&(p=peg$parsepluralStyle())!==a?(te=t,t=r=peg$c24(p)):(ee=t,t=a)):(ee=t,t=a),t}function peg$parseselectFormat(){var t,r,n,p,s;if(t=ee,e.substr(ee,6)===E?(r=E,ee+=6):(r=a,0===pe&&peg$fail(C)),r!==a)if(peg$parse_()!==a)if(44===e.charCodeAt(ee)?(n=u,ee++):(n=a,0===pe&&peg$fail(c)),n!==a)if(peg$parse_()!==a){if(p=[],(s=peg$parseoptionalFormatPattern())!==a)for(;s!==a;)p.push(s),s=peg$parseoptionalFormatPattern();else p=a;p!==a?(te=t,t=r=peg$c27(p)):(ee=t,t=a)}else ee=t,t=a;else ee=t,t=a;else ee=t,t=a;else ee=t,t=a;return t}function peg$parseselector(){var t,r,n,p;return t=ee,r=ee,61===e.charCodeAt(ee)?(n=_,ee++):(n=a,0===pe&&peg$fail(S)),n!==a&&(p=peg$parsenumber())!==a?r=n=[n,p]:(ee=r,r=a),(t=r!==a?e.substring(t,ee):r)===a&&(t=peg$parsechars()),t}function peg$parseoptionalFormatPattern(){var t,r,n,p,s;return t=ee,peg$parse_()!==a&&(r=peg$parseselector())!==a&&peg$parse_()!==a?(123===e.charCodeAt(ee)?(n=o,ee++):(n=a,0===pe&&peg$fail(l)),n!==a&&peg$parse_()!==a&&(p=peg$parsemessageFormatPattern())!==a&&peg$parse_()!==a?(125===e.charCodeAt(ee)?(s=g,ee++):(s=a,0===pe&&peg$fail(f)),s!==a?(te=t,t=peg$c30(r,p)):(ee=t,t=a)):(ee=t,t=a)):(ee=t,t=a),t}function peg$parseoffset(){var t,r,n;return t=ee,e.substr(ee,7)===P?(r=P,ee+=7):(r=a,0===pe&&peg$fail(w)),r!==a&&peg$parse_()!==a&&(n=peg$parsenumber())!==a?(te=t,t=r=peg$c33(n)):(ee=t,t=a),t}function peg$parsepluralStyle(){var e,t,r,n;if(e=ee,(t=peg$parseoffset())===a&&(t=null),t!==a)if(peg$parse_()!==a){if(r=[],(n=peg$parseoptionalFormatPattern())!==a)for(;n!==a;)r.push(n),n=peg$parseoptionalFormatPattern();else r=a;r!==a?(te=e,e=t=peg$c34(t,r)):(ee=e,e=a)}else ee=e,e=a;else ee=e,e=a;return e}function peg$parsews(){var t,r;if(pe++,t=[],D.test(e.charAt(ee))?(r=e.charAt(ee),ee++):(r=a,0===pe&&peg$fail(T)),r!==a)for(;r!==a;)t.push(r),D.test(e.charAt(ee))?(r=e.charAt(ee),ee++):(r=a,0===pe&&peg$fail(T));else t=a;return pe--,t===a&&(r=a,0===pe&&peg$fail(R)),t}function peg$parse_(){var t,r,n;for(pe++,t=ee,r=[],n=peg$parsews();n!==a;)r.push(n),n=peg$parsews();return t=r!==a?e.substring(t,ee):r,pe--,t===a&&(r=a,0===pe&&peg$fail(L)),t}function peg$parsedigit(){var t;return j.test(e.charAt(ee))?(t=e.charAt(ee),ee++):(t=a,0===pe&&peg$fail(k)),t}function peg$parsehexDigit(){var t;return I.test(e.charAt(ee))?(t=e.charAt(ee),ee++):(t=a,0===pe&&peg$fail(O)),t}function peg$parsenumber(){var t,r,n,p,s,i;if(t=ee,48===e.charCodeAt(ee)?(r=B,ee++):(r=a,0===pe&&peg$fail(M)),r===a){if(r=ee,n=ee,U.test(e.charAt(ee))?(p=e.charAt(ee),ee++):(p=a,0===pe&&peg$fail(W)),p!==a){for(s=[],i=peg$parsedigit();i!==a;)s.push(i),i=peg$parsedigit();s!==a?n=p=[p,s]:(ee=n,n=a)}else ee=n,n=a;r=n!==a?e.substring(r,ee):n}return r!==a&&(te=t,r=peg$c47(r)),t=r}function peg$parsechar(){var t,r,n,p,s,i,o,l;return q.test(e.charAt(ee))?(t=e.charAt(ee),ee++):(t=a,0===pe&&peg$fail(z)),t===a&&(t=ee,e.substr(ee,2)===G?(r=G,ee+=2):(r=a,0===pe&&peg$fail(H)),r!==a&&(te=t,r=peg$c52()),(t=r)===a&&(t=ee,e.substr(ee,2)===J?(r=J,ee+=2):(r=a,0===pe&&peg$fail(K)),r!==a&&(te=t,r=peg$c55()),(t=r)===a&&(t=ee,e.substr(ee,2)===N?(r=N,ee+=2):(r=a,0===pe&&peg$fail(Q)),r!==a&&(te=t,r=peg$c58()),(t=r)===a&&(t=ee,e.substr(ee,2)===V?(r=V,ee+=2):(r=a,0===pe&&peg$fail(X)),r!==a&&(te=t,r=peg$c61()),(t=r)===a&&(t=ee,e.substr(ee,2)===Y?(r=Y,ee+=2):(r=a,0===pe&&peg$fail(Z)),r!==a?(n=ee,p=ee,(s=peg$parsehexDigit())!==a&&(i=peg$parsehexDigit())!==a&&(o=peg$parsehexDigit())!==a&&(l=peg$parsehexDigit())!==a?p=s=[s,i,o,l]:(ee=p,p=a),(n=p!==a?e.substring(n,ee):p)!==a?(te=t,t=r=peg$c64(n)):(ee=t,t=a)):(ee=t,t=a)))))),t}function peg$parsechars(){var e,t,r;if(e=ee,t=[],(r=peg$parsechar())!==a)for(;r!==a;)t.push(r),r=peg$parsechar();else t=a;return t!==a&&(te=e,t=peg$c65(t)),e=t}if((t=p())!==a&&ee===e.length)return t;throw t!==a&&ee<e.length&&peg$fail({type:"end",description:"end of input"}),peg$buildException(null,ne,ae<e.length?e.charAt(ae):null,ae<e.length?peg$computeLocation(ae,ae+1):peg$computeLocation(ae,ae))}}}());