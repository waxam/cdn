define(["exports","../ResizeObserverBoxOptions.js","../DOMRectReadOnly.js","../utils/element.js","../utils/global.js"],(function(e,t,i,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cache=e.calculateBoxSizes=e.calculateBoxSize=void 0;var r=new Map;e.cache=r;var d=/auto|scroll/,c=/^tb|vertical/,a=/msie|trident/i.test(n.global.navigator&&n.global.navigator.userAgent),parseDimension=function(e){return parseFloat(e||"0")},size=function(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?t:e)||0,blockSize:(i?e:t)||0})},l=Object.freeze({devicePixelContentBoxSize:size(),borderBoxSize:size(),contentBoxSize:size(),contentRect:new i.DOMRectReadOnly(0,0,0,0)}),calculateBoxSizes=function(e){if(r.has(e))return r.get(e);if((0,o.isHidden)(e))return r.set(e,l),l;var t=getComputedStyle(e),n=(0,o.isSVG)(e)&&e.ownerSVGElement&&e.getBBox(),s=!a&&"border-box"===t.boxSizing,u=c.test(t.writingMode||""),x=!n&&d.test(t.overflowY||""),B=!n&&d.test(t.overflowX||""),b=n?0:parseDimension(t.paddingTop),h=n?0:parseDimension(t.paddingRight),v=n?0:parseDimension(t.paddingBottom),z=n?0:parseDimension(t.paddingLeft),f=n?0:parseDimension(t.borderTopWidth),g=n?0:parseDimension(t.borderRightWidth),O=n?0:parseDimension(t.borderBottomWidth),S=z+h,R=b+v,p=(n?0:parseDimension(t.borderLeftWidth))+g,w=f+O,j=B?e.offsetHeight-w-e.clientHeight:0,M=x?e.offsetWidth-p-e.clientWidth:0,P=s?S+p:0,m=s?R+w:0,C=n?n.width:parseDimension(t.width)-P-M,E=n?n.height:parseDimension(t.height)-m-j,W=C+S+M+p,_=E+R+j+w,y=Object.freeze({devicePixelContentBoxSize:size(Math.round(C*devicePixelRatio),Math.round(E*devicePixelRatio),u),borderBoxSize:size(W,_,u),contentBoxSize:size(C,E,u),contentRect:new i.DOMRectReadOnly(z,b,C,E)});return r.set(e,y),y};e.calculateBoxSizes=calculateBoxSizes;e.calculateBoxSize=function(e,i){var o=calculateBoxSizes(e),n=o.borderBoxSize,r=o.contentBoxSize,d=o.devicePixelContentBoxSize;switch(i){case t.ResizeObserverBoxOptions.DEVICE_PIXEL_CONTENT_BOX:return d;case t.ResizeObserverBoxOptions.BORDER_BOX:return n;default:return r}}}));