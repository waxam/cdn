define(["exports","./process.js","./global.js","./queueResizeObserver.js"],(function(e,t,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCount=e.scheduler=void 0;var s=0,n={attributes:!0,characterData:!0,childList:!0,subtree:!0},i=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],u=!1,a=new(function(){function Scheduler(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return Scheduler.prototype.run=function(e){var r=this;u||(u=!0,(0,o.queueResizeObserver)((function(){var o=!1;try{o=(0,t.process)()}finally{if(u=!1,!s)return;o?r.run(60):e?r.run(e-1):r.start()}})))},Scheduler.prototype.schedule=function(){this.stop(),this.run(12)},Scheduler.prototype.observe=function(){var e=this,cb=function(){return e.observer&&e.observer.observe(document.body,n)};document.body?cb():r.global.addEventListener("DOMContentLoaded",cb)},Scheduler.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),i.forEach((function(t){return r.global.addEventListener(t,e.listener,!0)})))},Scheduler.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),i.forEach((function(t){return r.global.removeEventListener(t,e.listener,!0)})),this.stopped=!0)},Scheduler}());e.scheduler=a;e.updateCount=function(e){!s&&e>0&&a.start(),!(s+=e)&&a.stop()}}));