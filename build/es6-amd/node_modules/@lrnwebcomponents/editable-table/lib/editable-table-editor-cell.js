define(["exports","../../../@polymer/polymer/polymer-element.js","../../../@polymer/iron-autogrow-textarea/iron-autogrow-textarea.js","../../../@polymer/iron-a11y-keys/iron-a11y-keys.js","./editable-table-behaviors.js"],function(_exports,_polymerElement,_ironAutogrowTextarea,_ironA11yKeys,_editableTableBehaviors){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.EditableTableEditorCell=void 0;class EditableTableEditorCell extends((0,_editableTableBehaviors.cellBehaviors)(_polymerElement.PolymerElement)){static get template(){return _polymerElement.html`
      <style is="custom-style">
        :host {
          padding: 0;
          margin: 0;
          width: calc(
            100% - var(--editable-table-row-horizontal-padding) -
              var(--editable-table-row-horizontal-padding)
          );
          min-width: unset;
          display: inline-flex;
          justify-content: space-between;
          align-items: center;
          align-content: stretch;
        }
        :host iron-autogrow-textarea {
          width: 100%;
          padding: 0;
          border: none;
          font-weight: unset;
          resize: none;
          -webkit-appearance: none;
          -mozilla-appearance: none;
          flex-grow: 1;
          --iron-autogrow-textarea: {
            padding: 0;
            font-weight: unset;
            border: none;
            resize: none;
            flex-direction: column;
            -webkit-flex-direction: column;
            -webkit-appearance: none;
            -mozilla-appearance: none;
          }
        }
        :host iron-autogrow-textarea > * {
          padding: 0;
          font-weight: unset;
          border: none;
          resize: none;
          flex-direction: column;
          -webkit-flex-direction: column;
          -webkit-appearance: none;
          -mozilla-appearance: none;
        }
      </style>
      <iron-autogrow-textarea
        autofocus
        id="cell"
        label$="[[label]]"
        on-value-changed="_onValueChanged"
        value$="{{value}}"
      >
      </iron-autogrow-textarea>
      <div id="icons"><slot></slot></div>
    `}static get tag(){return"editable-table-editor-cell"}static get properties(){return{row:{type:Number,value:null},column:{type:Number,value:null},label:{type:String,computed:"_getCellLabel(column,row)"},value:{type:String,value:!1}}}ready(){super.ready(),this.cell=this.shadowRoot.querySelector("#cell")}focus(){this.cell.textarea.focus()}_getCellLabel(column,row){return this._getLabel(column,!1)+this._getLabel(row,!0)+"(editable table cell)"}_onValueChanged(e){this.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0,composed:!0,detail:{row:this.row,column:this.column,value:e.detail.value}}))}getCaretPosition(){var caret=0;if(document.selection){this.shadowRoot.querySelector("#cell").focus();var sel=document.selection.createRange();sel.moveStart("character",-this.shadowRoot.querySelector("#cell").value.length),caret=sel.text.length}else(this.shadowRoot.querySelector("#cell").shadowRoot.querySelector("textarea").selectionStart||"0"==this.shadowRoot.querySelector("#cell").shadowRoot.querySelector("textarea").selectionStart)&&(caret=this.shadowRoot.querySelector("#cell").shadowRoot.querySelector("textarea").selectionStart);return caret}setCaretPosition(start,end){let textarea=this.shadowRoot.querySelector("#cell").shadowRoot.querySelector("textarea");if(textarea.focus(),textarea.createTextRange){let range=textarea.createTextRange();range.collapse(!0),range.moveEnd("character",end),range.moveStart("character",start),range.select()}else textarea.setSelectionRange&&(textarea.setSelectionRange(start,end),textarea.selectionStart=start,textarea.selectionEnd=end)}setFocus(start,end){this.shadowRoot.querySelector("#cell").shadowRoot.querySelector("textarea").focus(),void 0!==start&&void 0!==end?this.setCaretPosition(start,this.getCaretPosition()-end):void 0!==start&&start>-1?this.setCaretPosition(start,start):-1==start&&void 0!==end?this.setCaretPosition(start,this.getCaretPosition()-end):this.setCaretPosition(0,0)}_onCellLeft(){this.dispatchEvent(new CustomEvent("cell-move",{bubbles:!0,cancelable:!0,composed:!0,detail:{cell:this.parentNode,direction:"left"}}))}_onCellRight(){this.dispatchEvent(new CustomEvent("cell-move",{bubbles:!0,cancelable:!0,composed:!0,detail:{cell:this.parentNode,direction:"right"}}))}_onCellAbove(){this.dispatchEvent(new CustomEvent("cell-move",{bubbles:!0,cancelable:!0,composed:!0,detail:{cell:this.parentNode,direction:"up"}}))}_onCellBelow(){this.dispatchEvent(new CustomEvent("cell-move",{bubbles:!0,cancelable:!0,composed:!0,detail:{cell:this.parentNode,direction:"down"}}))}}_exports.EditableTableEditorCell=EditableTableEditorCell,window.customElements.define(EditableTableEditorCell.tag,EditableTableEditorCell)});