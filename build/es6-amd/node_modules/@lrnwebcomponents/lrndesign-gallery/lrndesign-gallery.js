define(["exports","../../lit-element/lit-element.js","./lib/lrndesign-gallery-behaviors.js","../responsive-utility/responsive-utility.js","./lib/lrndesign-gallery-carousel.js","./lib/lrndesign-gallery-grid.js"],(function(e,t,i,s,l,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LrndesignGallery=void 0;
/**
   * Copyright 2020 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class LrndesignGallery extends i.LrndesignGalleryBehaviors{static get styles(){return[t.css``]}render(){return t.html`
      <div id="gallery">
        ${this.grid?t.html`
              <lrndesign-gallery-grid
                accent-color="${this.accentColor}"
                .aspect-ratio="${this.aspect}"
                .extra-wide="${this.extra}"
                ?dark="${this.dark}"
                .gallery-id="${this.id}"
                @item-changed="${e=>this.goToItem(e.detail)}"
                responsive-size="${this.responsiveSize}"
                .selected="${this.selected}"
                sizing="${this.sizing}"
                .sources="${this.items}"
                gallery-title="${this.galleryTitle}"
              >
                <slot></slot>
              </lrndesign-gallery-grid>
            `:t.html`
              <lrndesign-gallery-carousel
                accent-color="${this.accentColor}"
                .aspect-ratio="${this.aspect}"
                .extra-wide="${this.extra}"
                ?dark="${this.dark}"
                .gallery-id="${this.id}"
                @item-changed="${e=>this.goToItem(e.detail)}"
                responsive-size="${this.responsiveSize}"
                .selected="${this.selected}"
                sizing="${this.sizing}"
                .sources="${this.items}"
                gallery-title="${this.galleryTitle}"
              >
                <slot></slot>
              </lrndesign-gallery-carousel>
            `}
      </div>
    `}static get properties(){return{...super.properties,id:{type:String,reflect:!0,attribute:"id"}}}tag(){return"lrndesign-gallery"}constructor(){super()}connectedCallback(){super.connectedCallback(),window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:{element:this,attribute:"responsive-size",relativeToParent:!0}}))}firstUpdated(){super.firstUpdated(),this.anchorData=this._getAnchorData(),this.anchorData.gallery===this.id?this.goToItem(this.anchorData.id):this.goToItem()}updated(e){super.updated(e),e.forEach((e,t)=>{"id"!==t||this.id||(this.id=`gallery-${this._generateUUID()}`)})}get aspect(){let e=(this.items||[]).filter(e=>e.src&&""!=e.src),t=!(!e||!e[0])&&e[0].src;if(t){let e=new Image;return e.src=t,e.naturalWidth>0&&e.naturalHeight>0?e.naturalWidth/e.naturalHeight:1.33333333}return 1.33333333}get extra(){return this.aspect>2}get items(){let e=this.sources||[],t="string"==typeof e?JSON.parse(e):e,i=t.length;return(t||[]).map((e,t)=>({details:e.details,index:t,id:e.id||`gallery-${this.id}-item-${t}`,src:e.src,large:e.large&&""!==e.large?e.large:e.src,thumbnail:e.thumbnail&&""!=e.thumbnail?e.thumbnail:e.src,xofy:`${t+1} of ${i}`,next:t+1<i?t+1:-1,prev:t-1>-1?t-1:-1,sizing:e.sizing&&""!=e.sizing?e.sizing:this.sizing,title:e.title,tooltip:`${e.title||`Image ${t}`} (Zoom In)`,heading:`${e.title||`Image ${t}`} (Full-Sized)`}))}goToItem(e){let t=this.items[0]||{};if("number"==typeof e&&e>=0&&e<this.items.length)this.selected=this.items[e]||t;else{let i=this.items.filter(t=>t.id===e);this.selected=i.length>0?i[0]:t}}_getAnchorData(){let e=null!==window.location.hash&&""!==window.location.hash&&window.location.hash.replace("#",""),t=e?e.split("---"):[];return{id:t.length>1?t[1]:-1,gallery:t.length>0?t[0]:-1,zoom:scroll&&t.length>2&&"zoom"===t[2]}}}e.LrndesignGallery=LrndesignGallery,customElements.define("lrndesign-gallery",LrndesignGallery)}));