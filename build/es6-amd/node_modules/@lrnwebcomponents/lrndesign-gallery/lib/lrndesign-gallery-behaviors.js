define(["exports","../../../@polymer/polymer/polymer-element.js","../../simple-colors/lib/simple-colors-polymer.js","../../responsive-utility/responsive-utility.js","../../../@polymer/iron-image/iron-image.js","../../../@polymer/iron-icons/iron-icons.js","../../../@polymer/paper-button/paper-button.js","../../simple-tooltip/simple-tooltip.js","./lrndesign-gallery-shared-styles.js"],(function(e,t,l,i,s,r,n,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LrndesignGalleryBehaviors=void 0;
/**
   * Copyright 2018 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class LrndesignGalleryBehaviors extends l.SimpleColorsPolymer{static get tag(){return"lrndesign-gallery-behaviors"}static get properties(){return{anchorData:{type:Object,computed:"_getAnchorData()"},aspectRatio:{type:Number,value:"1.33333333"},extraWide:{type:Boolean,value:!1,reflectToAttribute:!0},galleryId:{type:String,value:null},grid:{type:Boolean,value:!1},items:{type:Array,computed:"_itemsLoaded(sources,sizing)"},responsiveSize:{type:String,value:"xs",reflectToAttribute:!0},selected:{type:Object,value:{},notify:!0,reflectToAttribute:!0},sizing:{type:String,value:"cover"},sources:{type:Array,value:[],reflectToAttribute:!1},title:{type:String,value:null}}}connectedCallback(){super.connectedCallback()}_addResponsiveUtility(e){window.ResponsiveUtility.requestAvailability(),window.dispatchEvent(new CustomEvent("responsive-element",{detail:void 0!==e?e:{element:this,attribute:"responsive-size",relativeToParent:!0}}))}_getAnchorData(){let e=null!==window.location.hash&&""!==window.location.hash?window.location.hash.replace("#","").split("---"):[],t=e.length>0?e[0]:-1,l=e.length>1?e[1]:-1,i=null!==this.sources?this.sources.findIndex(e=>e.id===l):1,s=t===this.galleryId,r=scroll&&e.length>2&&"zoom"===e[2];return{selectedItemId:l,selectedItemIndex:i>0?i:0,selectedGallery:s,zoom:r}}_getItemData(e,t,l){null===this.galleryId&&(this.galleryId="gallery-"+this._generateUUID());let i=this._getAnchorData(),s={};return s.details=e.details,s.index=t,s.id=this._selfOrDefault(e.id,this.galleryId+"-item-"+t),s.src=e.src,s.large=this._selfOrDefault(e.large,s.src),s.thumbnail=this._selfOrDefault(e.thumbnail,s.src),s.xofy=parseInt(t+1)+" of "+l,s.next=t+1<l?t+1:-1,s.prev=t-1>-1?t-1:-1,s.sizing=this._selfOrDefault(e.sizing,this.sizing),s.title=e.title,s.tooltip=this._selfOrDefault(s.title,"Full-Sized Image"," (Full-Sized)"),s.heading=this._selfOrDefault(s.title,"Full-Sized Image"," (Full-Sized)"),s.zoom=i.zoom&&i.selectedItemId===s.id,s.scroll=i.selectedGallery&&i.selectedItemId===s.id,s.tooltip=this._selfOrDefault(e.title,"Zoom In"," Zoom"),i.selectedItemIndex===t&&this.set("selected",s),s}_getParentOffset(e){let t=e.parentNode;return null!=t&&t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&(t=t.host),t.offsetTop}_scrollIntoView(e=[0]){window.scrollTo({top:e.reduce((e,t)=>e+t),behavior:"smooth"})}_isAttrSet(e=null){return null!==e}_isSelected(e={},t={}){return e.id===t.id}_itemsLoaded(e,t){new Image;let l=[];if(this.set("items",[]),null===this.galleryId&&(this.id="gallery-"+this._generateUUID()),null!=e&&e.length>0)for(var i in this._setAspectProperties(e[0].src),e)l[i]=this._getItemData(e[i],parseInt(i),e.length);return l}_selfOrDefault(e=null,t=!1,l=null){let i=t;return null!=e&&(i=null!==l?e+l:e),i}_setAspectProperties(e){if(null!=e){let t=new Image;t.src=e,this.aspectRatio=t.naturalWidth>0&&t.naturalHeight>0?t.naturalWidth/t.naturalHeight:1.33333333,this.extraWide=this.aspectRatio>2}}_testAttribute(e=null,t=!1){return e===t}_generateUUID(){return"ss-s-s-s-sss".replace(/s/g,this._uuidPart)}_uuidPart(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}}e.LrndesignGalleryBehaviors=LrndesignGalleryBehaviors,window.customElements.define(LrndesignGalleryBehaviors.tag,LrndesignGalleryBehaviors)}));