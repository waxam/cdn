define(["exports","../../../@polymer/polymer/polymer-element.js"],function(_exports,_polymerElement){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.A11yMediaYoutube=void 0,window.A11yMediaYoutube=window.A11yMediaYoutube||{},window.A11yMediaYoutube.requestAvailability=()=>(window.A11yMediaYoutube.instance||(window.A11yMediaYoutube.instance=document.createElement("a11y-media-youtube"),document.body.appendChild(window.A11yMediaYoutube.instance)),window.A11yMediaYoutube.instance);class A11yMediaYoutube extends _polymerElement.PolymerElement{static get tag(){return"a11y-media-youtube"}static get properties(){return{apiReady:{type:Boolean,value:void 0!==window.YT},counter:{type:Number,value:0}}}connectedCallback(){super.connectedCallback();let root=this,api=document.createElement("script");api.setAttribute("src","https://www.youtube.com/iframe_api"),api.setAttribute("type","text/javascript"),document.body.appendChild(api),window.onYouTubeIframeAPIReady=()=>{var event=new CustomEvent("youtube-api-ready");root.apiReady=!0,document.dispatchEvent(event)}}initYoutubePlayer(options){let temp="a11y-media-yt-",div=document.createElement("div"),vdata=options.videoId.split(/[\?&]/),vid=vdata[0],start=null,end=null,cue={videoId:vid};this.counter++,temp+=this.counter,document.body.appendChild(div),div.setAttribute("id",temp);let iframe=new YT.Player(temp,{width:options.width,height:options.height,events:{onReady:e=>{for(let i=1;i<vdata.length;i++){let param=vdata[i].split("=");if("t"===param[0]){let hh=param[1].match(/(\d)+h/),mm=param[1].match(/(\d)+m/),ss=param[1].replace(/\d+h/,"").replace(/\d+m/,"").replace(/s/,"").match(/(\d)+/),h=null!==hh&&hh.length>1?360*parseInt(hh[1]):0,m=null!==mm&&mm.length>1?60*parseInt(mm[1]):0,s=null!==ss&&ss.length>1?parseInt(ss[1]):0;start=parseInt(h+m+s)}else"start"===param[0]?start=parseInt(param[1]):"end"===param[0]&&(end=parseInt(param[1]))}null!==start?(start=Math.max(0,start),cue.startSeconds=start):start=0,null!==end&&(end=null!==start?Math.max(start,end):Math.max(0,end),cue.endSeconds=end),e.target.cueVideoById(cue)}},playerVars:{color:"white",controls:0,autoplay:options.autoplay,disablekb:1,enablejsapi:1,iv_load_policy:3,modestbranding:1,showinfo:0,rel:0}});return iframe.tracks=[],iframe.duration=0,iframe.seekable={length:1,start:index=>{iframe.seekable.start=index=>start||0},end:index=>{iframe.seekable.end=index=>null!==end?Math.min(end,iframe.duration):iframe.duration}},iframe.paused=!0,iframe.timeupdate,iframe.play=()=>{void 0!==iframe.playVideo&&iframe.playVideo()},iframe.addEventListener("onStateChange",()=>{iframe.paused=1!==iframe.getPlayerState(),iframe.paused?clearInterval(iframe.timeupdate):iframe.timeupdate=setInterval(()=>{document.dispatchEvent(new CustomEvent("timeupdate",{detail:iframe}))},1)}),iframe.pause=()=>{void 0!==iframe.pauseVideo&&iframe.pauseVideo()},iframe.seek=(time=0)=>{void 0!==iframe.seekTo&&(iframe.seekTo(time),iframe.paused&&(iframe.seekupdate=setInterval(()=>{Math.abs(iframe.getCurrentTime()-time)<1&&(document.dispatchEvent(new CustomEvent("timeupdate",{detail:iframe})),clearInterval(iframe.seekupdate))},1)))},iframe.setMute=mode=>{void 0!==iframe.mute&&(mode?iframe.mute():iframe.unMute())},iframe}}_exports.A11yMediaYoutube=A11yMediaYoutube,window.customElements.define(A11yMediaYoutube.tag,A11yMediaYoutube)});