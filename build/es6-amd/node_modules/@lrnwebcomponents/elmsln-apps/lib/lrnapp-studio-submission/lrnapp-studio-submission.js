define(["exports","../../../../@polymer/polymer/polymer-element.js","../../../../@polymer/polymer/lib/utils/render-status.js","../../../secure-request/secure-request.js","../../../../@polymer/app-route/app-location.js","../../../../@polymer/app-route/app-route.js","../../../../@polymer/polymer/lib/elements/dom-if.js","../../../../@polymer/paper-toast/paper-toast.js","./lrnapp-studio-submission-page.js","./lrnapp-studio-submission-button.js"],(function(e,t,s,i,n,a,o,r,p,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LrnappStudioSubmission=void 0;class LrnappStudioSubmission extends((0,i.SecureRequestXhr)(t.PolymerElement)){static get template(){return t.html`
      <style>
        :host {
          display: block;
        }
        paper-button {
          padding: 0;
          margin: 0;
          min-width: 1rem;
        }
      </style>
      <app-location route="{{route}}"></app-location>
      <app-route
        route="{{route}}"
        pattern="[[endPoint]]/submissions/:submission"
        data="{{data}}"
        tail="{{tail}}"
      >
      </app-route>

      <template is="dom-if" if="[[data.submission]]">
        <lrnapp-studio-submission-page
          base-path="{{basePath}}"
          route="{{tail}}"
          id="[[data.submission]]"
          end-point="[[endPoint]]"
          csrf-token="[[csrfToken]]"
          data="{{data}}"
        ></lrnapp-studio-submission-page>
      </template>
      <template is="dom-if" if="[[!data.submission]]">
        This is the lrnapp-studio-submission page.
      </template>

      <paper-toast id="toast"></paper-toast>
    `}static get tag(){return"lrnapp-studio-submission"}static get properties(){return{elmslnCourse:{type:String},elmslnSection:{type:String},basePath:{type:String},csrfToken:{type:String},endPoint:{type:String},activePage:{type:String},basePath:{type:String},endPoint:{type:String},csrfToken:{type:String}}}static get observers(){return["_routeChanged(route, endPoint)","_updateCookies(endPoint, csrfToken)"]}connectedCallback(){super.connectedCallback(),(0,s.afterNextRender)(this,(function(){this.addEventListener("submissionDeleted",this._handleSubmissionDeletion.bind(this)),this.addEventListener("displaymessage",this._handleDisplayMessage.bind(this))}))}disconnectedCallback(){this.removeEventListener("submissionDeleted",this._handleSubmissionDeletion.bind(this)),this.removeEventListener("displaymessage",this._handleDisplayMessage.bind(this)),super.disconnectedCallback()}_handleRouteChange(e){var t=e.detail.path;t&&(this.set("route.path",t),this.notifyPath("route.path"))}_routeChanged(e,t){if("string"==typeof e.path){if("string"==typeof t&&e.path.startsWith(t))return;window.location.reload()}}_handleSubmissionDeletion(e){e.detail.submission&&(this.set("route.path",this.endPoint),this.notifyPath("route.path"),this.$.toast.show("Submission has been deleted."))}_updateCookies(e,t){e&&t&&this.setCookies(e,t)}_handleDisplayMessage(e,t){void 0!==e.detail.messsage&&this.$.toast.show(e.detail.message)}_toArray(e){return null==e?[]:Object.keys(e).map((function(t){return e[t]}))}}e.LrnappStudioSubmission=LrnappStudioSubmission,window.customElements.define(LrnappStudioSubmission.tag,LrnappStudioSubmission)}));