define(["exports","../../@polymer/polymer/polymer-element.js","../../@polymer/polymer/lib/utils/flattened-nodes-observer.js","../../@polymer/iron-form-element-behavior/iron-form-element-behavior.js","../../@polymer/iron-validatable-behavior/iron-validatable-behavior.js","../../@polymer/polymer/lib/legacy/class.js"],function(_exports,_polymerElement,_flattenedNodesObserver,_ironFormElementBehavior,_ironValidatableBehavior,_class){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.matchesSelector=_exports.MtzMarkedEditor=void 0;class MtzMarkedEditor extends((0,_class.mixinBehaviors)([_ironFormElementBehavior.IronFormElementBehavior,_ironValidatableBehavior.IronValidatableBehavior],_polymerElement.PolymerElement)){static get template(){return _polymerElement.html`
      <style>
        :host {
          display: block;
        }
      </style>
      <slot name="controls"></slot> <slot name="textarea"></slot>
      <slot name="footer"></slot>
    `}static get tag(){return"mtz-marked-editor"}static get properties(){return{...super.properties,autofocus:Boolean,readonly:Boolean,textareaSelector:{type:String,value:"textarea"},__textarea:Object}}constructor(){super(),this.addEventListener("register-control",this.__bindControlToEditor.bind(this))}connectedCallback(){super.connectedCallback(),this.__textarea=this.queryDistributedElements('[slot="textarea"]')[0]}queryDistributedElements(selector){let c$=_flattenedNodesObserver.FlattenedNodesObserver.getFlattenedNodes(this),list=[];for(let c,i=0,l=c$.length;i<l&&(c=c$[i]);i++)c.nodeType===Node.ELEMENT_NODE&&matchesSelector(c,selector)&&list.push(c);return list}disconnectedCallback(){this.removeEventListener("register-control",this.__bindControlToEditor),super.disconnectedCallback()}getTextarea(){return this.__textarea}getLines(){return this.getContent().split(/(?=\n|\r\n)$/gm)}getContent(){return void 0!==this.getTextarea()?this.getTextarea().value:""}setContent(content){this.getTextarea().value=content}getSelection(textarea=this.getTextarea()){const start=textarea.selectionStart,end=textarea.selectionEnd;return{start:start,end:end,length:end-start,text:textarea.value.substring(start,end)}}setSelection(start,end,textarea=this.getTextarea()){textarea.selectionStart=start,textarea.selectionEnd=end}replaceSelection(text,textarea=this.getTextarea(),selection=this.getSelection()){const val=textarea.value;textarea.value=`${val.substr(0,selection.start)}${text}${val.substr(selection.end,val.length)}`}__bindControlToEditor(e){e.stopPropagation(),e.target.__editor=this}}_exports.MtzMarkedEditor=MtzMarkedEditor,window.customElements.define(MtzMarkedEditor.tag,MtzMarkedEditor);const p=Element.prototype,normalizedMatchesSelector=p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector,matchesSelector=function(node,selector){return normalizedMatchesSelector.call(node,selector)};_exports.matchesSelector=matchesSelector});