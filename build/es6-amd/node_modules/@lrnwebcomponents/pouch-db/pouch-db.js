define(["exports","../../@polymer/polymer/polymer-element.js","./lib/pouchdb.min.js"],(function(e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PouchDb=void 0,
/**
   * Copyright 2019
   * @license Apache-2.0, see License.md for full text.
   */
window.PouchDb=window.PouchDb||{},window.PouchDb.requestAvailability=()=>(window.PouchDb.instance||(window.PouchDb.instance=document.createElement("pouch-db"),document.body.appendChild(window.PouchDb.instance)),window.PouchDb.instance);class PouchDb extends t.PolymerElement{static get template(){return t.html`
      <style>
        :host {
          display: block;
        }

        :host([hidden]) {
          display: none;
        }
      </style>
      <slot></slot>
    `}static get properties(){return{...super.properties,title:{name:"title",type:String,value:"pouch-db-default-value",reflectToAttribute:!1,observer:!1}}}static get tag(){return"pouch-db"}connectedCallback(){super.connectedCallback(),window.addEventListener("user-engagement",this.userEngagmentFunction.bind(this)),window.addEventListener("get-data",this.getDataFunction.bind(this))}userEngagmentFunction(e){var t=e.detail;switch(event.target.tagName){case"MULTIPLE-CHOICE":var n="xapistatements",s=t.activityDisplay,a="http://adlnet.gov/expapi/verbs/"+s,i="http://haxcms.psu.edu/haxQuiz",o=t.objectName,c="HAX Quiz",u=1,l=0,d=100,r=100,p=t.resultSuccess,b=!0,m="sample",h="sample"}var w=new PouchDB(n),g={actor:{mbox:"mailto:dave@gmail.com",name:"Dave Fusco",objectType:"Agent"},verb:{id:a,display:{"en-US":s}},object:{id:i,definition:{name:{"en-US":o},description:{"en-US":c}},objectType:"Activity"},result:{score:{scaled:u,min:l,max:d,raw:r},success:p,completion:b,response:m,duration:h}},v={_id:(new Date).toISOString(),title:JSON.stringify(g),completed:!1};w.put(v,(function callback(e,t){e||console.log("Successfully posted a statement!")})),w.allDocs({include_docs:!0,descending:!0},(function(e,t){console.log(t.rows)}))}getDataFunction(e){var t=e.detail;event.target.tagName;switch(t.queryRequest){case"all-quizzes":var n="xapistatements";break;case"single-quiz":n="xapistatements",t.objectName;break;case"future-query":n="xapistatements",t.activityDisplay,t.objectName,t.resultSuccess,t.resultCompletion;break;default:n="xapistatements"}new PouchDB(n).allDocs({include_docs:!0,descending:!0},(function(e,t){!function processxAPI(e,t){var n=[];e.forEach((function(e){var t=JSON.parse(e.doc.title).object.definition.name["en-US"];n.push(t)})),t(n)}(t.rows,(function displayxAPI(e){!function processItems(e,t){var n={};e.forEach((function(e){n[e]=(n[e]||0)+1})),t(n)}(e,(function display(e){var t=[],n=[];for(let a of Object.keys(e))t.push(a);for(let a of Object.values(e))n.push(a);let s=[""];s={labels:t,series:[n]},window.dispatchEvent(new CustomEvent("show-data",{bubbles:!0,composed:!0,cancelable:!1,detail:s}))}))}))}))}disconnectedCallback(){window.removeEventListener("user-engagement",this.userEngagmentFunction.bind(this)),window.removeEventListener("get-data",this.getDataFunction.bind(this)),super.disconnectedCallback()}}e.PouchDb=PouchDb,window.customElements.define(PouchDb.tag,PouchDb)}));