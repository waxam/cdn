define(["exports","meta","require","../../lit-element/lit-element.js","./lib/vmsg-fork.js"],(function(e,t,r,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VoiceRecorder=void 0,t=babelHelpers.interopRequireWildcard(t),r=babelHelpers.interopRequireWildcard(r);
/**
   * Copyright 2019 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class VoiceRecorder extends i.LitElement{static get styles(){return[i.css`
        :host {
          display: inline-flex;
        }
      `]}render(){return i.html`
      <button @click="${this.recordState}">
        <iron-icon icon="${this.iconState}"></iron-icon>${this.textState}
      </button>
      <slot></slot>
    `}static get properties(){return{iconState:{type:String},textState:{type:String},recording:{type:Boolean}}}static get tag(){return"voice-recorder"}constructor(){super(),this.recording=!1,setTimeout(()=>{new Promise((e,t)=>r.default(["../../@polymer/iron-icon/iron-icon.js"],e,t)),new Promise((e,t)=>r.default(["../../@polymer/iron-icons/av-icons.js"],e,t)),this.addEventListener("vmsg-ready",this.vmsgReady.bind(this))},0)}recordState(e){this.recording=!this.recording}updated(e){e.forEach((e,t)=>{"recording"==t&&(this[t]?(this.textState="stop",this.iconState="av:stop"):(this.textState="Record",this.iconState="av:play-arrow"),this.toggleRecording(this[t],e))})}vmsgReady(e){console.log(e.detail.value)}toggleRecording(e,r){e&&(0,o.record)({wasmURL:this.pathFromUrl(decodeURIComponent(t.url))+"../../node_modules/vmsg/vmsg.wasm"},this).then(e=>{this.dispatchEvent(new CustomEvent("voice-recorder-recording",{value:e}))})}pathFromUrl(e){return e.substring(0,e.lastIndexOf("/")+1)}}e.VoiceRecorder=VoiceRecorder,customElements.define(VoiceRecorder.tag,VoiceRecorder)}));