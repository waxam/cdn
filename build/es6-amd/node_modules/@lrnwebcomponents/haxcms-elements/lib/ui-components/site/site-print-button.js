define(["exports","require","../../../../../lit-element/lit-element.js","../../core/haxcms-site-store.js","../../../../../@polymer/polymer/lib/elements/custom-style.js"],(function(t,e,n,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SitePrintButton=void 0,e=babelHelpers.interopRequireWildcard(e);
/**
   * Copyright 2019 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class SitePrintButton extends n.LitElement{static get styles(){return[n.css`
        :host {
          display: block;
          text-rendering: optimizelegibility;
          position: relative;
        }
      `]}static get tag(){return"site-print-button"}constructor(){super(),this.icon="icons:print",this.position="bottom",this.type="page",new Promise((t,n)=>e.default(["../../../../simple-tooltip/simple-tooltip.js"],t,n)),new Promise((t,n)=>e.default(["../../../../../@polymer/paper-icon-button/paper-icon-button.js"],t,n))}render(){return n.html`
      <custom-style>
        <style>
          paper-icon-button {
            @apply --site-print-button-button;
          }
          paper-icon-button:hover,
          paper-icon-button:focus,
          paper-icon-button:active {
            @apply --site-print-button-button-hover;
          }
          simple-tooltip {
            @apply --site-print-button-tooltip;
          }
        </style>
      </custom-style>
      <paper-icon-button
        id="btn"
        icon="${this.icon}"
        @click="${this.print}"
        .title="${this.label}"
        ?disabled="${this.disabled}"
      ></paper-icon-button>
      <simple-tooltip for="btn" position="${this.position}" offset="14">
        ${this.label}
      </simple-tooltip>
    `}updated(t){t.forEach((t,e)=>{"type"==e&&this._typeChanged(this[e],t)})}static get properties(){return{icon:{type:String},disabled:{type:Boolean,reflect:!0},label:{type:String},position:{type:String},type:{type:String}}}_typeChanged(t){void 0===this.label&&(this.label="page"===t||"site"===t?`Print ${t}`:"Print outline")}async print(t){new Promise((t,n)=>e.default(["../layout/site-footer.js"],t,n));const n=this.type;let o="";if("page"===n)o=`\n      <h1>${i.store.activeItem.title}</h1>\n      <div>${i.store.activeItemContent}</div>`;else if("parent"===n){const t=i.store.computeItems(1,100,i.store.activeId,"parent",i.store.routerManifest,!0);for(var s in t)o+=await fetch("pages/"+t[s].location+"/index.html").then((function(t){return t.text()})).then((function(e){let n=t[s].indent+1;return n>6&&(n=6),`<h${n}>${t[s].title}</h${n}>\n              ${e}`}))}else if("ancestor"===n){const t=i.store.computeItems(1,100,i.store.activeId,"ancestor",i.store.routerManifest,!0);for(var s in t)o+=await fetch("pages/"+t[s].location+"/index.html").then((function(t){return t.text()})).then((function(e){let n=t[s].indent+1;return n>6&&(n=6),`<h${n}>${t[s].title}</h${n}>\n              ${e}`}))}else if("site"===n){const t=i.store.routerManifest.items;for(var s in t)o+=await fetch("pages/"+t[s].location+"/index.html").then((function(t){return t.text()})).then((function(e){let n=t[s].indent+1;return n>6&&(n=6),`<h${n}>${t[s].title}</h${n}>\n              ${e}`}))}var r=new Date,l="Printed on: "+r.getDate()+"/"+(r.getMonth()+1)+"/"+r.getFullYear()+" at "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds();let a=document.createElement("div");a.innerHTML=`\n<style>\n  @media print {\n    body {\n      padding: 0 15px 5px;\n      color: #000;\n      background-color: #ffffff;\n      border-top: 1px solid #aaa;\n    }\n  }\n</style>\n<h1>${i.store.siteTitle}</h1>\n<site-footer></site-footer>\n<p>${l}</p>\n${o}`;let p=window.open("","","left=0,top=0,width=800,height=800,toolbar=0,scrollbars=0,status =0");if(document.head.getElementsByTagName("base")){let t=document.createElement("base");t.href=document.head.getElementsByTagName("base")[0].getAttribute("href"),p.document.head.appendChild(t)}p.document.body.appendChild(a),p.document.close(),p.focus(),p.print(),p.close()}}t.SitePrintButton=SitePrintButton,window.customElements.define(SitePrintButton.tag,SitePrintButton)}));