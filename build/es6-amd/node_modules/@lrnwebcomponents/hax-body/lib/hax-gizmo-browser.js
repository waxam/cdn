define(["exports","require","../../../lit-element/lit-element.js","../../grafitto-filter/grafitto-filter.js","../../utils/utils.js"],(function(_exports,_require,_litElement,_grafittoFilter,_utils){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.HaxGizmoBrowser=void 0,_require=babelHelpers.interopRequireWildcard(_require);class HaxGizmoBrowser extends((0,_utils.winEventsElement)(_litElement.LitElement)){static get styles(){return[_litElement.css`
        :host {
          display: block;
        }
        .toolbar-inner {
          padding: 0;
          position: sticky;
          background-color: white;
          width: 100%;
          top: 0;
          z-index: 1;
        }
        .item-wrapper {
          text-align: center;
        }
      `]}constructor(){super(),this.__winEvents={"hax-store-property-updated":"_haxStorePropertyUpdated"},this.__gizmoList=[],this.filtered=[],new Promise((res,rej)=>_require.default(["../../../@polymer/paper-input/paper-input.js"],res,rej))}render(){return _litElement.html`
      <custom-style>
        <style>
          paper-input {
            --paper-input-container-label: {
              font-size: 11px;
            }
            --paper-input-container: {
              padding: 2px;
            }
          }
        </style>
      </custom-style>
      <div class="toolbar-inner">
        <paper-input
          label="Filter"
          id="inputfilter"
          aria-controls="filter"
          @value-changed="${this.inputfilterChanged}"
          value=""
        ></paper-input>
      </div>
      <grafitto-filter
        id="filter"
        .items="${this.__gizmoList}"
        like=""
        where="title"
        like=""
        @filtered-changed="${this.filteredChanged}"
        ><template></template
      ></grafitto-filter>
      <div class="item-wrapper">
        ${this.filtered.map(gizmo=>_litElement.html`
            <hax-tray-button
              draggable="true"
              @dragstart="${this._dragStart}"
              @dragend="${this._dragEnd}"
              index="${gizmo.index}"
              label="${gizmo.title}"
              event-name="insert-tag"
              event-data="${gizmo.tag}"
              icon="${gizmo.icon}"
              color="${gizmo.color}"
              drag-color="${gizmo.color}"
            ></hax-tray-button>
          `)}
      </div>
    `}static get tag(){return"hax-gizmo-browser"}static get properties(){return{filtered:{type:Array},__gizmoList:{type:Array}}}_dragStart(e){let target=document.createElement(e.target.eventData);if(window.HaxStore.instance.__dragTarget=target,e.dataTransfer&&(this.crt=target.cloneNode(!0),this.crt.style.position="absolute",this.crt.style.top="-1000px",this.crt.style.right="-1000px",this.crt.style.transform="scale(0.25)",this.crt.style.opacity=".8",this.crt.style.backgroundColor=e.target.getAttribute("drag-color"),e.dataTransfer.dropEffect="move",document.body.appendChild(this.crt),e.dataTransfer.setDragImage(this.crt,0,0)),e.stopPropagation(),e.stopImmediatePropagation(),!window.HaxStore.instance.activeHaxBody.openDrawer&&window.HaxStore.instance.editMode){let children=window.HaxStore.instance.activeHaxBody.children;for(var i in children)children[i].classList&&target!==children[i]&&children[i].classList.add("hax-mover")}}_dragEnd(e){this.crt.remove();let children=window.HaxStore.instance.activeHaxBody.children;for(var i in children)void 0!==children[i].classList&&children[i].classList.remove("hax-mover","hax-hovered","hax-moving","grid-plate-active-item")}filteredChanged(e){this.filtered=[...e.detail.value]}inputfilterChanged(e){this.shadowRoot.querySelector("#filter").like=e.target.value}firstUpdated(changedProperties){this.resetBrowser()}updated(changedProperties){changedProperties.forEach((oldValue,propName)=>{"activeApp"==propName&&this._activeAppChanged(this[propName],oldValue),"filtered"==propName&&this.requestUpdate()})}_haxStorePropertyUpdated(e){e.detail&&void 0!==e.detail.value&&e.detail.property&&(this[e.detail.property]=e.detail.value)}resetBrowser(){this.__gizmoList=window.HaxStore.instance.gizmoList.filter((gizmo,i)=>!gizmo.meta||!gizmo.meta.inlineOnly&&!gizmo.meta.hidden),this.filtered=[...this.__gizmoList],this.shadowRoot.querySelector("#inputfilter").value="",this.shadowRoot.querySelector("#filter").value="",this.shadowRoot.querySelector("#filter").filter(),this.shadowRoot.querySelector("#filter").where="title",this.shadowRoot.querySelector("#filter").like=""}}_exports.HaxGizmoBrowser=HaxGizmoBrowser,window.customElements.define(HaxGizmoBrowser.tag,HaxGizmoBrowser)}));