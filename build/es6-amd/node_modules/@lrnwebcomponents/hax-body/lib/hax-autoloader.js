define(["exports","meta","require","../../../lit-element/lit-element.js","../../hax-body-behaviors/hax-body-behaviors.js","../../utils/utils.js"],(function(e,t,s,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HaxAutoloader=void 0,t=babelHelpers.interopRequireWildcard(t),s=babelHelpers.interopRequireWildcard(s);class HaxAutoloader extends((0,r.HAXElement)(o.LitElement)){static get styles(){return[o.css`
        :host {
          display: none;
        }
      `]}render(){return o.html`
      <slot></slot>
    `}static get tag(){return"hax-autoloader"}pathFromUrl(e){return e.substring(0,e.lastIndexOf("/")+1)}static get properties(){return{...super.properties,processedList:{type:Object}}}constructor(){super(),this.processedList={}}firstUpdated(e){this.dispatchEvent(new CustomEvent("hax-register-core-piece",{bubbles:!0,cancelable:!0,composed:!0,detail:{piece:"haxAutoloader",object:this}}))}connectedCallback(){super.connectedCallback(),this.observer=new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{this.processNewElements(e)})})}),this.observer.observe(this,{childList:!0})}disconnectedCallback(){this.observer.disconnect(),super.disconnectedCallback()}processNewElements(e){let o=this.childNodes;for(var r=0;r<o.length;r++){if(void 0!==o[r].tagName&&void 0===this.processedList[o[r].tagName])try{let e=o[r].tagName.toLowerCase();if("function"==typeof o[r].getHaxProperties){const t=new CustomEvent("hax-register-properties",{bubbles:!0,composed:!0,cancelable:!0,detail:{tag:e,properties:o[r].getHaxProperties(),polymer:!0}});context.dispatchEvent(t)}else if("function"==typeof o[r].HAXWiring){const t=new CustomEvent("hax-register-properties",{bubbles:!0,cancelable:!0,composed:!0,detail:{tag:e,properties:o[r].HAXWiring.getHaxProperties(),polymer:!1}});context.dispatchEvent(t)}else{const o=this.pathFromUrl(decodeURIComponent(t.url));if(window.customElements.get(e)){let t=window.customElements.get(e);t?"function"==typeof t.getHaxProperties?this.setHaxProperties(t.getHaxProperties(),e):"function"==typeof t.HAXWiring?this.setHaxProperties(t.HAXWiring.getHaxProperties(),e):t.haxProperties?this.setHaxProperties(t.haxProperties,e):console.warn(`${e} didn't have hax wiring in the end`):console.error(`${e} was not a valid custom element yet a load was attempted`)}else{let t=(0,i.varGet)(window.HaxStore,"instance.__appStoreData.autoloader."+e,`@lrnwebcomponents/${e}/${e}.js`);new Promise((e,r)=>s.default([`${o}../../../${t}`],e,r)).then(t=>{let s=window.customElements.get(e);s?"function"==typeof s.getHaxProperties?this.setHaxProperties(s.getHaxProperties(),e):"function"==typeof s.HAXWiring?this.setHaxProperties(s.HAXWiring.getHaxProperties(),e):s.haxProperties?this.setHaxProperties(s.haxProperties,e):console.warn(`${e} didn't have hax wiring in the end`):console.error(`${e} was not a valid custom element yet a load was attempted`)}).catch(e=>{console.warn(e)})}}this.processedList[e]=e}catch(a){}o[r].remove()}}}e.HaxAutoloader=HaxAutoloader,window.customElements.define(HaxAutoloader.tag,HaxAutoloader)}));