define(["exports","meta","require","../../@polymer/polymer/polymer-element.js","../../@polymer/polymer/lib/utils/flattened-nodes-observer.js","../../@polymer/polymer/lib/legacy/polymer.dom.js","../../@polymer/polymer/lib/utils/render-status.js","../schema-behaviors/schema-behaviors.js"],function(_exports,meta,_require,_polymerElement,_flattenedNodesObserver,_polymerDom,_renderStatus,_schemaBehaviors){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.CodeEditor=void 0,meta=babelHelpers.interopRequireWildcard(meta),_require=babelHelpers.interopRequireWildcard(_require);class CodeEditor extends((0,_schemaBehaviors.SchemaBehaviors)(_polymerElement.PolymerElement)){constructor(){super(),this.__libPath=decodeURIComponent(meta.url)+"/../../../monaco-editor/min/vs",new Promise((res,rej)=>_require.default(["./lib/monaco-element/monaco-element.js"],res,rej)),new Promise((res,rej)=>_require.default(["./lib/code-pen-button.js"],res,rej)),this.addEventListener("monaco-element-ready",this.editorReady.bind(this))}static get template(){return _polymerElement.html`
      <style>
        :host {
          display: block;
          padding: 16px;
          font-family: unset;
        }
        :host([hidden]) {
          display: none !important;
        }
        .code-pen-container:not([hidden]) {
          width: 100%;
          display: flex;
          background-color: var(--code-pen-button-color, #222222);
          color: white;
          height: 40px;
          justify-content: flex-end;
          align-items: center;
        }
        .code-pen-container span {
          display: inline-flex;
          line-height: 16px;
          font-size: 16px;
          padding: 12px;
        }
        code-pen-button {
          float: right;
          height: 40px;
        }
        label {
          color: var(--code-editor-label-color, #888);
          transition: all 0.5s;
          @apply --code-editor-label;
        }

        :host([focused]) label {
          color: var(
            --code-editor-float-label-active-color,
            var(--code-editor-label-color, #000)
          );
          @apply --code-editor-focus-label;
        }

        #codeeditor {
          height: 100%;
          display: flex;
          @apply --code-editor-code;
        }

        :host([focused]) #codeeditor {
          @apply --code-editor-focus-code;
        }
      </style>
      <label for="codeeditor" hidden$="[[!title]]">[[title]]</label>
      <monaco-element
        id="codeeditor"
        autofocus$="[[autofocus]]"
        hide-line-numbers$="[[hideLineNumbers]]"
        lib-path="[[__libPath]]"
        language="[[language]]"
        theme="[[theme]]"
        on-value-changed="_editorDataChanged"
        font-size$="[[fontSize]]"
        read-only$="[[readOnly]]"
        on-code-editor-focus="_handleFocus"
        on-code-editor-blur="_handleBlur"
      >
      </monaco-element>
      <div class="code-pen-container" hidden$="[[!showCodePen]]">
        <span>Check it out on code pen: </span
        ><code-pen-button data="[[codePenData]]"></code-pen-button>
      </div>
    `}static get tag(){return"code-editor"}static get properties(){let props={title:{type:String},showCodePen:{type:Boolean,value:!1,reflectToAttribute:!0},readOnly:{type:Boolean,value:!1,reflectToAttribute:!0},codePenData:{type:Object,computed:"_computeCodePenData(title, value)"},editorValue:{type:String,observer:"_editorValueChanged"},value:{type:String,notify:!0},theme:{type:String,value:"vs-dark"},mode:{type:String,observer:"_modeChanged"},language:{type:String,value:"javascript"},fontSize:{type:Number,value:16},autofocus:{type:Boolean,value:!1,reflectToAttribute:!0},hideLineNumbers:{type:Boolean,value:!1},focused:{type:Boolean,value:!1,reflectToAttribute:!0}};return super.properties&&(props=Object.assign(props,super.properties)),props}_computeCodePenData(title,editorValue){return{title:title,html:editorValue}}_handleFocus(e){this.focused=!0}_handleBlur(e){this.focused=!1}_modeChanged(newValue){this.language=this.mode}_editorDataChanged(e){this.value=e.detail}updateEditorValue(node){if(node){var content="",children=node;if("TEMPLATE"!==node.tagName){if(console.warn("code-editor works best with a template tag provided in light dom"),(children=(0,_polymerDom.dom)(this).getEffectiveChildNodes()).length>0)for(var j=0,len2=children.length;j<len2;j++)void 0!==children[j].tagName?content+=children[j].outerHTML:content+=children[j].textContent}else content=children.innerHTML;content&&(this.shadowRoot.querySelector("#codeeditor").value=content.trim())}}_editorValueChanged(newValue){newValue&&(this.shadowRoot.querySelector("#codeeditor").value=newValue)}preProcessHaxNodeToContent(clone){return clone.editorValue=null,clone.codePenData=null,clone.value=null,clone.removeAttribute("value"),clone.removeAttribute("code-pen-data"),clone}connectedCallback(){super.connectedCallback();(0,_renderStatus.afterNextRender)(this,function(){this._observer=new _flattenedNodesObserver.FlattenedNodesObserver(this,info=>{info.addedNodes.length>0&&info.addedNodes.map(node=>{node.tagName&&this.updateEditorValue(node)}),info.removedNodes.length>0&&info.removedNodes.map(node=>{node.tagName&&this.updateEditorValue(node)})})})}disconnectedCallback(){this.removeEventListener("monaco-element-ready",this.editorReady.bind(this)),super.disconnectedCallback()}editorReady(e){this.editorValue&&(this.shadowRoot.querySelector("#codeeditor").value=this.editorValue)}}_exports.CodeEditor=CodeEditor,window.customElements.define(CodeEditor.tag,CodeEditor)});