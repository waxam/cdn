define(["exports","meta","../../lit-element/lit-element.js","../es-global-bridge/es-global-bridge.js"],(function(e,t,n,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hal9000=void 0,t=babelHelpers.interopRequireWildcard(t);
/**
   * Copyright 2019 The Pennsylvania State University
   * @license Apache-2.0, see License.md for full text.
   */
class Hal9000 extends n.LitElement{static get styles(){return[n.css`
        :host {
          display: block;
        }
      `]}render(){return n.html`
      <slot></slot>
    `}static get properties(){return{...super.properties,commands:{name:"commands",type:Object},respondsTo:{name:"respondsTo",type:String,attribute:"responds-to"},debug:{name:"debug",type:Boolean},auto:{name:"auto",type:Boolean,reflect:!0},enabled:{name:"enabled",type:Boolean,reflect:!0},pitch:{name:"pitch",type:Number,reflect:!0},rate:{name:"rate",type:Number,reflect:!0},language:{name:"language",type:String,reflect:!0}}}static get tag(){return"hal-9000"}pathFromUrl(e){return e.substring(0,e.lastIndexOf("/")+1)}constructor(){super(),this.commands={},this.respondsTo="(hal)",this.debug=!1,this.pitch=.9,this.rate=.9,this.language="en-US",window.Hal9000=window.Hal9000||{},window.Hal9000.instance=this;const e=`${this.pathFromUrl(decodeURIComponent(t.url))}lib/annyang/annyang.min.js`;if(window.addEventListener("es-bridge-annyang-loaded",this._annyangLoaded.bind(this)),window.ESGlobalBridge.requestAvailability(),window.ESGlobalBridge.instance.load("annyang",e),void 0!==window.speechSynthesis){this.synth=window.speechSynthesis,this.voices=this.synth.getVoices();for(var n=0;n<this.voices.length;n++)this.voices[n].default&&(this.defaultVoice=this.voices[n].name)}}clickObject(e){this.__text=e,this.commands[e].object.click(),this.commands[e].object.focus()}_commandsChanged(e){this.addCommands(e)}addCommands(e){this.annyang&&this.annyang.addCommands(e)}speak(e){this.__text=e,this.synth?(this.utter=new SpeechSynthesisUtterance(this.__text),this.utter.pitch=this.pitch,this.utter.rate=this.rate,this.utter.lang=this.language,this.utter.voice=this.defaultVoice,this.synth.speak(this.utter)):console.warn("I have no voice...")}_annyangLoaded(){if(this.annyang=window.annyang,this.annyang){this.annyang.addCommands(this.commands),this.annyang.debug(this.debug),this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.enabled&&this.annyang.start();const e=new CustomEvent("hal-9000-online",{bubbles:!0,cancelable:!1,detail:!0});this.dispatchEvent(e)}}_respondsToChanged(e,t){this.annyang&&this.annyang.removeCommands();var n={};for(var a in this.commands)a.replace(t,e)!==a?n[a.replace(t,e)]=this.commands[a]:n[a]=this.commands[a];n.length>0&&(this.commands={...n})}_autoChanged(e){this.enabled=e}_enabledChanged(e){this.annyang&&(e?this.auto?this.annyang.start({autoRestart:!0,continuous:!0}):this.annyang.start():this.annyang.abort())}_debugChanged(e,t){this.annyang&&this.annyang.debug(e)}updated(e){e.forEach((e,t)=>{"commands"==t&&this._commandsChanged(this[t],e),"respondsTo"==t&&this._respondsToChanged(this[t],e),"debug"==t&&this._debugChanged(this[t],e),"auto"==t&&this._autoChanged(this[t],e),"enabled"==t&&this._enabledChanged(this[t],e)})}disconnectedCallback(){window.removeEventListener("es-bridge-annyang-loaded",this._annyangLoaded.bind(this)),super.disconnectedCallback()}}e.Hal9000=Hal9000,window.customElements.define(Hal9000.tag,Hal9000),window.Hal9000=window.Hal9000||{},window.Hal9000.requestAvailability=()=>{window.Hal9000.instance||(window.Hal9000.instance=new Hal9000)}}));