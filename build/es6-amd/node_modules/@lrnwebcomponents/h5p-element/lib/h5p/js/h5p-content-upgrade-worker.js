var libraryLoadedCallback,H5P=H5P||{};importScripts("h5p-version.js","h5p-content-upgrade-process.js");var messageHandlers={newJob:function(a){new H5P.ContentUpgradeProcess(a.name,new H5P.Version(a.oldVersion),new H5P.Version(a.newVersion),a.params,a.id,(function loadLibrary(a,r,e){postMessage({action:"loadLibrary",name:a,version:r.toString()}),libraryLoadedCallback=e}),(function done(r,e){r?postMessage({action:"error",id:a.id,err:r.message?r.message:r}):postMessage({action:"done",id:a.id,params:e})}))},libraryLoaded:function(a){var r=a.library;if(r.upgradesScript)try{importScripts(r.upgradesScript)}catch(e){return void libraryLoadedCallback(e)}libraryLoadedCallback(null,a.library)}};onmessage=function(a){void 0!==a.data.action&&messageHandlers[a.data.action]&&messageHandlers[a.data.action].call(this,a.data)};