var H5P=window.H5P=window.H5P||{};H5P.Event=function(t,e,n){this.type=t,this.data=e;var i=!1,r=!1,o=!1;void 0===n&&(n={}),!0===n.bubbles&&(i=!0),!0===n.external&&(r=!0),this.preventBubbling=function(){i=!1},this.getBubbles=function(){return i},this.scheduleForExternal=function(){return!(!r||o)&&(o=!0,!0)}},H5P.EventDispatcher=function EventDispatcher(){var t=this,e={};this.on=function(n,i,r){if("function"!=typeof i)throw TypeError("listener must be a function");t.trigger("newListener",{type:n,listener:i});var o={listener:i,thisArg:r};e[n]?e[n].push(o):e[n]=[o]},this.once=function(e,n,i){if(!(n instanceof Function))throw TypeError("listener must be a function");var once=function(e){t.off(e.type,once),n.call(this,e)};t.on(e,once,i)},this.off=function(n,i){if(void 0!==i&&!(i instanceof Function))throw TypeError("listener must be a function");if(void 0!==e[n]){if(void 0===i)return delete e[n],void t.trigger("removeListener",n);for(var r=0;r<e[n].length;r++)if(e[n][r].listener===i){e[n].splice(r,1),t.trigger("removeListener",n,{listener:i});break}e[n].length||delete e[n]}};var call=function(t,n){if(void 0!==e[t])for(var i=e[t].slice(),r=0;r<i.length;r++){var o=i[r],s=o.thisArg?o.thisArg:this;o.listener.call(s,n)}};this.trigger=function(e,n,i){if(void 0!==e){e instanceof String||"string"==typeof e?e=new H5P.Event(e,n,i):void 0!==n&&(e.data=n);var r=e.scheduleForExternal();call.call(this,e.type,e),call.call(this,"*",e),e.getBubbles()&&t.parent instanceof H5P.EventDispatcher&&(t.parent.trigger instanceof Function||"function"==typeof t.parent.trigger)&&t.parent.trigger(e),r&&H5P.externalDispatcher.trigger.call(this,e)}}};