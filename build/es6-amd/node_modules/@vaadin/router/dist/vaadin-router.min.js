define(["exports"],function(_exports){function t(t){return t=t||[],Array.isArray(t)?t:[t]}function e(t){return`[Vaadin.Router] ${t}`}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.Resolver=_exports.Router=void 0;const n="module",r="nomodule",o=[n,r];function i(t){if(!t.match(/.+\.[m]?js$/))throw new Error(e(`Unsupported type for bundle "${t}": .js or .mjs expected.`))}function s(t){if(!t||!h(t.path))throw new Error(e('Expected route config to be an object with a "path" string property, or an array of such objects'));const s=t.bundle,u=["component","redirect","bundle"];if(!(l(t.action)||Array.isArray(t.children)||l(t.children)||f(s)||u.some(e=>h(t[e]))))throw new Error(e(`Expected route config "${t.path}" to include either "${u.join('", "')}" `+'or "action" function but none found.'));if(s)if(h(s))i(s);else{if(!o.some(t=>t in s))throw new Error(e('Expected route bundle to include either "'+r+'" or "'+n+'" keys, or both'));o.forEach(t=>t in s&&i(s[t]))}t.redirect&&["bundle","component"].forEach(n=>{n in t&&console.warn(e(`Route config "${t.path}" has both "redirect" and "${n}" properties, `+`and "redirect" will always override the latter. Did you mean to only use "${n}"?`))})}function u(e){t(e).forEach(t=>s(t))}function c(t,e){let o=document.head.querySelector('script[src="'+t+'"][async]');return o||((o=document.createElement("script")).setAttribute("src",t),e===n?o.setAttribute("type",n):e===r&&o.setAttribute(r,""),o.async=!0),new Promise((t,e)=>{o.onreadystatechange=o.onload=e=>{o.t=!0,t(e)},o.onerror=t=>{o.parentNode&&o.parentNode.removeChild(o),e(t)},null===o.parentNode?document.head.appendChild(o):o.t&&t()})}function a(t,e){return!window.dispatchEvent(new CustomEvent(`vaadin-router-${t}`,{cancelable:"go"===t,detail:e}))}function f(t){return"object"==typeof t&&!!t}function l(t){return"function"==typeof t}function h(t){return"string"==typeof t}function d(t){const n=new Error(e(`Page not found (${t.pathname})`));return n.context=t,n.code=404,n}const w=new class{};function p(t){if(t.defaultPrevented)return;if(0!==t.button)return;if(t.shiftKey||t.ctrlKey||t.altKey||t.metaKey)return;let e=t.target;const n=t.composedPath?t.composedPath():t.path||[];for(let t=0;t<n.length;t++){const r=n[t];if(r.nodeName&&"a"===r.nodeName.toLowerCase()){e=r;break}}for(;e&&"a"!==e.nodeName.toLowerCase();)e=e.parentNode;e&&"a"===e.nodeName.toLowerCase()&&(e.target&&"_self"!==e.target.toLowerCase()||e.hasAttribute("download")||e.pathname===window.location.pathname&&""!==e.hash||(e.origin||function(t){const e=t.port,n=t.protocol;return`${n}//${"http:"===n&&"80"===e||"https:"===n&&"443"===e?t.hostname:t.host}`}(e))===window.location.origin&&a("go",{pathname:e.pathname})&&t.preventDefault())}const m={activate(){window.document.addEventListener("click",p)},inactivate(){window.document.removeEventListener("click",p)}};function v(t){"vaadin-router-ignore"!==t.state&&a("go",{pathname:window.location.pathname})}/Trident/.test(navigator.userAgent)&&!l(window.PopStateEvent)&&(window.PopStateEvent=function(t,e){e=e||{};var n=document.createEvent("Event");return n.initEvent(t,Boolean(e.bubbles),Boolean(e.cancelable)),n.state=e.state||null,n},window.PopStateEvent.prototype=window.Event.prototype);const y={activate(){window.addEventListener("popstate",v)},inactivate(){window.removeEventListener("popstate",v)}};var b=function S(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var r=[],o=0;o<t.length;o++)r.push(S(t[o],e,n).source);return new RegExp("(?:"+r.join("|")+")",k(n))}(t,e,n):function(t,e,n){return C(R(t,n),e,n)}(t,e,n)},g=R,$=P,_=C,O="/",x="./",j=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function R(t,e){for(var n,r=[],o=0,i=0,s="",u=e&&e.delimiter||O,c=e&&e.delimiters||x,a=!1;null!==(n=j.exec(t));){var f=n[0],l=n[1],h=n.index;if(s+=t.slice(i,h),i=h+f.length,l)s+=l[1],a=!0;else{var d="",w=t[i],p=n[2],m=n[3],v=n[4],y=n[5];if(!a&&s.length){var b=s.length-1;c.indexOf(s[b])>-1&&(d=s[b],s=s.slice(0,b))}s&&(r.push(s),s="",a=!1);var g=""!==d&&void 0!==w&&w!==d,E="+"===y||"*"===y,$="?"===y||"*"===y,_=d||u,R=m||v;r.push({name:p||o++,prefix:d,delimiter:_,optional:$,repeat:E,partial:g,pattern:R?T(R):"[^"+A(_)+"]+?"})}}return(s||i<t.length)&&r.push(s+t.substr(i)),r}function P(t){for(var e=new Array(t.length),n=0;n<t.length;n++)"object"==typeof t[n]&&(e[n]=new RegExp("^(?:"+t[n].pattern+")$"));return function(n,r){for(var o="",i=r&&r.encode||encodeURIComponent,s=0;s<t.length;s++){var u=t[s];if("string"!=typeof u){var c,a=n?n[u.name]:void 0;if(Array.isArray(a)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===a.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var f=0;f<a.length;f++){if(c=i(a[f],u),!e[s].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');o+=(0===f?u.prefix:u.delimiter)+c}}else if("string"!=typeof a&&"number"!=typeof a&&"boolean"!=typeof a){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"));u.partial&&(o+=u.prefix)}else{if(c=i(String(a),u),!e[s].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');o+=u.prefix+c}}else o+=u}return o}}function A(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function T(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function k(t){return t&&t.sensitive?"":"i"}function C(t,e,n){for(var r=(n=n||{}).strict,o=!1!==n.end,i=A(n.delimiter||O),s=n.delimiters||x,u=[].concat(n.endsWith||[]).map(A).concat("$").join("|"),c="",a=0===t.length,f=0;f<t.length;f++){var l=t[f];if("string"==typeof l)c+=A(l),a=f===t.length-1&&s.indexOf(l[l.length-1])>-1;else{var h=A(l.prefix),d=l.repeat?"(?:"+l.pattern+")(?:"+h+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),l.optional?l.partial?c+=h+"("+d+")?":c+="(?:"+h+"("+d+"))?":c+=h+"("+d+")"}}return o?(r||(c+="(?:"+i+")?"),c+="$"===u?"$":"(?="+u+")"):(r||(c+="(?:"+i+"(?="+u+"))?"),a||(c+="(?="+i+"|"+u+")")),new RegExp("^"+c,k(n))}b.parse=g,b.compile=function(t,e){return P(R(t,e))},b.tokensToFunction=$,b.tokensToRegExp=_;const{hasOwnProperty:B}=Object.prototype,M=new Map;function U(t){try{return decodeURIComponent(t)}catch(e){return t}}function L(t){if(l(t.route.action))return t.route.action(t)}M.set("|false",{keys:[],pattern:/(?:)/});class D{constructor(t,e={}){if(Object(t)!==t)throw new TypeError("Invalid routes");this.baseUrl=e.baseUrl||"",this.errorHandler=e.errorHandler,this.resolveRoute=e.resolveRoute||L,this.context=Object.assign({resolver:this},e.context),this.root=Array.isArray(t)?{path:"",o:t,parent:null,i:!0}:t,this.root.parent=null}getRoutes(){return[...this.root.o]}setRoutes(e){u(e);const n=[...t(e)];this.root.o=n}addRoutes(e){return u(e),this.root.o.push(...t(e)),this.getRoutes()}removeRoutes(){this.setRoutes([])}resolve(t){const e=Object.assign({},this.context,h(t)?{pathname:t}:t),n=function I(t,e,n,r,o){let i,s,u=0,c=t.path||"";return"/"===c.charAt(0)&&(n&&(c=c.substr(1)),n=!0),{next(a){if(t===a)return{done:!0};const f=t.o=t.o||t.children;if(!i&&(i=function(t,e,n,r,o){const i=`${t}|${n=!!n}`;let s=M.get(i);if(!s){const e=[];s={keys:e,pattern:b(t,e,{end:n,strict:""===t})},M.set(i,s)}const u=s.pattern.exec(e);if(!u)return null;const c=Object.assign({},o);for(let t=1;t<u.length;t++){const e=s.keys[t-1],n=e.name,r=u[t];void 0===r&&B.call(c,n)||(e.repeat?c[n]=r?r.split(e.delimiter).map(U):[]:c[n]=r?U(r):r)}return{path:u[0],keys:(r||[]).concat(s.keys),params:c}}(c,e,!f,r,o)))return{done:!1,value:{route:t,keys:i.keys,params:i.params,path:i.path}};if(i&&f)for(;u<f.length;){if(!s){const r=f[u];r.parent=t;let o=i.path.length;o>0&&"/"===e.charAt(o)&&(o+=1),s=I(r,e.substr(o),n,i.keys,i.params)}const r=s.next(a);if(!r.done)return{done:!1,value:r.value};s=null,u++}return{done:!0}}}}(this.root,this.s(e.pathname),this.baseUrl),r=this.resolveRoute;let o=null,i=null,s=e;function u(t,c=o.value.route,a){const f=null===a&&o.value.route;return o=i||n.next(f),i=null,t||!o.done&&function(t,e){let n=o.value.route;for(;n;)if((n=n.parent)===t)return!0;return!1}(c)?o.done?Promise.reject(d(e)):(function(t,e){const{route:n,path:r}=e;if(n&&!n.i){const e={path:r,route:n};!function(t,e){return!e.parent||!t||!t.length||t[t.length-1].route!==e.parent}(t.chain,n)?t.chain.push(e):t.chain=[e]}}(e,o.value),s=Object.assign({},e,o.value),Promise.resolve(r(s)).then(e=>null!=e&&e!==w?(s.result=e.result||e,s):u(t,c,e))):(i=o,Promise.resolve(w))}return e.next=u,Promise.resolve().then(()=>u(!0,this.root)).catch(t=>{const e=function(t){let e=`Path '${t.pathname}' is not properly resolved due to an error.`;const n=(t.route||{}).path;return n&&(e+=` Resolution had failed on route: '${n}'`),e}(s);if(t?console.warn(e):t=new Error(e),t.context=t.context||s,t instanceof DOMException||(t.code=t.code||500),this.errorHandler)return s.result=this.errorHandler(t),s;throw t})}static u(t,e){return new URL(t,e)}get l(){return this.baseUrl?this.constructor.u(this.baseUrl,document.baseURI||document.URL).href.replace(/[^\/]*$/,""):""}s(t){if(!this.baseUrl)return t;const e=this.l,n=this.constructor.u(t,e).href;return n.slice(0,e.length)===e?n.slice(e.length):void 0}}_exports.Resolver=D,D.pathToRegexp=b;const{pathToRegexp:F}=D,N=new Map;function H(t,e){const n=t.get(e);if(n&&n.length>1)throw new Error(`Duplicate route with name "${e}".`+" Try seting unique 'name' route properties.");return n&&n[0]}function W(t){let e=t.path;return void 0!==(e=Array.isArray(e)?e[0]:e)?e:""}let z=[];const K=t=>{const e=getComputedStyle(t).getPropertyValue("animation-name");return e&&"none"!==e},V=(t,e)=>{const n=()=>{t.removeEventListener("animationend",n),e()};t.addEventListener("animationend",n)};function G(t,e){return t.classList.add(e),new Promise(n=>{if(K(t)){const r=t.getBoundingClientRect(),o=`height: ${r.bottom-r.top}px; width: ${r.right-r.left}px`;t.setAttribute("style",`position: absolute; ${o}`),V(t,()=>{t.classList.remove(e),t.removeAttribute("style"),n()})}else t.classList.remove(e),n()})}const Q=256;function X(t){return null!=t}function Y({pathname:t="",chain:e=[],params:n={},redirectFrom:r,resolver:o},i){const s=e.map(t=>t.route);return{baseUrl:o&&o.baseUrl||"",pathname:t,routes:s,route:i||s.length&&s[s.length-1]||null,params:n,redirectFrom:r,getUrl:(t={})=>rt(it.pathToRegexp.compile(ot(s))(Object.assign({},n,t)),o)}}function Z(t,e){const n=Object.assign({},t.params);return{redirect:{pathname:e,from:t.pathname,params:n}}}function tt(t,e,n){if(l(t))return t.apply(n,e)}function et(t,e,n){return r=>r&&(r.cancel||r.redirect)?r:n?tt(n[t],e,n):void 0}function nt(t){if(t&&t.length){const e=t[0].parentNode;for(let n=0;n<t.length;n++)e.removeChild(t[n])}}function rt(t,e){const n=e.l;return n?e.constructor.u(t.replace(/^\//,""),n).pathname:t}function ot(t){return t.map(t=>t.path).reduce((t,e)=>e.length?t.replace(/\/$/,"")+"/"+e.replace(/^\//,""):t,"")}class it extends D{constructor(t,e){const n=document.head.querySelector("base");super([],Object.assign({baseUrl:n&&n.getAttribute("href")},e)),this.resolveRoute=t=>this.h(t);const r=it.NavigationTrigger;it.setTriggers.apply(it,Object.keys(r).map(t=>r[t])),this.baseUrl,this.ready,this.ready=Promise.resolve(t),this.location,this.location=Y({resolver:this}),this.p=0,this.m=this.v.bind(this),this.setOutlet(t),this.subscribe()}h(n){const r=n.route;let i=Promise.resolve();l(r.children)&&(i=i.then(()=>r.children(function(t){const e=Object.assign({},t);return delete e.next,e}(n))).then(n=>{X(n)||l(r.children)||(n=r.children),function(n,r){if(!Array.isArray(n)&&!f(n))throw new Error(e(`Incorrect "children" value for the route ${r.path}: expected array or object, but got ${n}`));r.o=[];const o=t(n);for(let t=0;t<o.length;t++)s(o[t]),r.o.push(o[t])}(n,r)}));const u={redirect:t=>Z(n,t),component:t=>(function(t,e){const n=document.createElement(e);n.location=Y(t);const r=t.chain.map(t=>t.route).indexOf(t.route);return t.chain[r].element=n,n})(n,t)};return i.then(()=>tt(r.action,[n,u],r)).then(t=>X(t)&&(t instanceof HTMLElement||t.redirect||t===w)?t:h(r.redirect)?u.redirect(r.redirect):r.bundle?(a=r.bundle,h(a)?c(a):Promise.race(o.filter(t=>t in a).map(t=>c(a[t],t)))).then(()=>{},()=>{throw new Error(e(`Bundle not found: ${r.bundle}. Check if the file name is correct`))}):void 0).then(t=>X(t)?t:h(r.component)?u.component(r.component):void 0);var a}setOutlet(t){t&&this.g(t),this.$=t}getOutlet(){return this.$}setRoutes(t){this._=void 0,super.setRoutes(t),this.v()}render(t,e){const n=++this.p,r=t.pathname||t;return this.ready=this.resolve(t).then(t=>this.O(t)).then(t=>{if(n===this.p){const r=this.j;if(t===r)return this.location;this.location=Y(t),a("location-changed",{router:this,location:this.location}),e&&this.R(t.pathname,t.redirectFrom),this.P(t,r);const o=this.A(t);return this.T(t),this.k(t,r),o.then(()=>{if(n===this.p)return this.C(),this.j=t,this.location})}}).catch(t=>{if(n===this.p)throw e&&this.R(r),nt(this.$&&this.$.children),this.location=Y({pathname:r,resolver:this}),a("error",{router:this,error:t,pathname:r}),t}),this.ready}O(t,e=t){return this.S(e).then(n=>{const r=n!==e?n:t;return n.next().then(t=>{if((null===t||t===w)&&rt(ot(n.chain),n.resolver)!==n.pathname)throw d(r);return t&&t!==w?this.O(r,t):this.B(r)})})}S(t){const n=t.result;return n instanceof HTMLElement?Promise.resolve(t):n.redirect?this.M(n.redirect,t.U).then(t=>this.S(t)):n instanceof Error?Promise.reject(n):Promise.reject(new Error(e(`Invalid route resolution result for path "${t.pathname}". `+`Expected redirect object or HTML element, but got: "${function(t){if("object"!=typeof t)return String(t);const e=Object.prototype.toString.call(t).match(/ (.*)\]$/)[1];return"Object"===e||"Array"===e?`${e} ${JSON.stringify(t)}`:e}(n)}". `+"Double check the action return value for the route.")))}B(t){return this.I(t).then(e=>e===this.j||e===t?e:this.O(e))}I(t){const e=(this.j||{}).chain||[],n=t.chain;let r=Promise.resolve();const o=()=>({cancel:!0}),i=e=>Z(t,e);if(t.L=0,e.length){for(let r=0;r<Math.min(e.length,n.length)&&e[r].route===n[r].route&&e[r].path===n[r].path&&(e[r].element&&e[r].element.localName)===(n[r].element&&n[r].element.localName);r=++t.L);for(let n=e.length-1;n>=t.L;n--){const i=Y(t);r=r.then(et("onBeforeLeave",[i,{prevent:o},this],e[n].element)).then(t=>{if(!(t||{}).redirect)return t})}}for(let e=t.L;e<n.length;e++){const s=Y(t,n[e].route);r=r.then(et("onBeforeEnter",[s,{prevent:o,redirect:i},this],n[e].element))}return r.then(e=>{if(e){if(e.cancel)return this.j;if(e.redirect)return this.M(e.redirect,t.U)}return t})}M(t,n){if(n>Q)throw new Error(e(`Too many redirects when rendering ${t.from}`));return this.resolve({pathname:this.urlForPath(t.pathname,t.params),redirectFrom:t.from,U:(n||0)+1})}g(t=this.$){if(!(t instanceof Node))throw new TypeError(e(`Expected router outlet to be a valid DOM Node (but got ${t})`))}R(t,e){if(window.location.pathname!==t){const n=e?"replaceState":"pushState";window.history[n](null,document.title,t),window.dispatchEvent(new PopStateEvent("popstate",{state:"vaadin-router-ignore"}))}}P(t,e){this.g(),this.D();let n=this.$;for(let r=0;r<t.L;r++){const o=e&&e.chain[r].element;if(o){if(o.parentNode!==n)break;t.chain[r].element=o,n=o}}this.F=Array.from(n.children),this.N=[];let r=n;for(let e=t.L;e<t.chain.length;e++){const o=t.chain[e].element;o&&(r.appendChild(o),r===n&&this.N.push(o),r=o)}}C(){this.F&&nt(this.F),this.F=null,this.N=null}D(){this.F&&this.N&&(nt(this.N),this.F=null,this.N=null)}k(t,e){if(e)for(let n=e.chain.length-1;n>=t.L;n--){const r=e.chain[n].element;if(r)try{const n=Y(t);tt(r.onAfterLeave,[n,{},e.resolver],r)}finally{nt(r.children)}}}T(t){for(let e=t.L;e<t.chain.length;e++){const n=t.chain[e].element||{},r=Y(t,t.chain[e].route);tt(n.onAfterEnter,[r,{},t.resolver],n)}}A(t){const e=(this.F||[])[0],n=(this.N||[])[0],r=[],o=t.chain;let i;for(let t=o.length;t>0;t--)if(o[t-1].route.animate){i=o[t-1].route.animate;break}if(e&&n&&i){const t=f(i)&&i.leave||"leaving",o=f(i)&&i.enter||"entering";r.push(G(e,t)),r.push(G(n,o))}return Promise.all(r).then(()=>t)}subscribe(){window.addEventListener("vaadin-router-go",this.m)}unsubscribe(){window.removeEventListener("vaadin-router-go",this.m)}v(t){const e=t?t.detail.pathname:window.location.pathname;h(this.s(e))&&(t&&t.preventDefault&&t.preventDefault(),this.render(e,!0))}static setTriggers(...t){!function J(t){z.forEach(t=>t.inactivate()),t.forEach(t=>t.activate()),z=t}(t)}urlForName(t,e){return this._||(this._=function q(t,e={}){if(!(t instanceof D))throw new TypeError("An instance of Resolver is expected");const n=new Map;return(r,o)=>{let i=H(n,r);if(!(i||(n.clear(),function t(e,n,r){const o=n.name||n.component;if(o&&(e.has(o)?e.get(o).push(n):e.set(o,[n])),Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];i.parent=n,t(e,i,i.o||i.children)}}(n,t.root,t.root.o),i=H(n,r))))throw new Error(`Route "${r}" not found`);let s=N.get(i.fullPath);if(!s){let t=W(i),e=i.parent;for(;e;){const n=W(e);n&&(t=n.replace(/\/$/,"")+"/"+t.replace(/^\//,"")),e=e.parent}const n=F.parse(t),r=F.tokensToFunction(n),o=Object.create(null);for(let t=0;t<n.length;t++)h(n[t])||(o[n[t].name]=!0);s={toPath:r,keys:o},N.set(t,s),i.fullPath=t}let u=s.toPath(o,e)||"/";if(e.stringifyQueryParams&&o){const t={},n=Object.keys(o);for(let e=0;e<n.length;e++){const r=n[e];s.keys[r]||(t[r]=o[r])}const r=e.stringifyQueryParams(t);r&&(u+="?"===r.charAt(0)?r:`?${r}`)}return u}}(this)),rt(this._(t,e),this)}urlForPath(t,e){return rt(it.pathToRegexp.compile(t)(e),this)}static go(t){return a("go",{pathname:t})}}_exports.Router=it;const st=/\/\*\*\s+vaadin-dev-mode:start([\s\S]*)vaadin-dev-mode:end\s+\*\*\//i;function ut(t,e){if("function"!=typeof t)return;const n=st.exec(t.toString());if(n)try{t=new Function(n[1])}catch(t){console.log("vaadin-development-mode-detector: uncommentAndRun() failed",t)}return t(e)}window.Vaadin=window.Vaadin||{};void 0===window.Vaadin.developmentMode&&(window.Vaadin.developmentMode=function(){try{return localStorage.getItem("vaadin.developmentmode.force")||["localhost","127.0.0.1"].indexOf(window.location.hostname)>=0&&!ut(function(){return!0})&&!function(){if(window.Vaadin&&window.Vaadin.Flow&&window.Vaadin.Flow.clients){if(Object.keys(window.Vaadin.Flow.clients).map(t=>window.Vaadin.Flow.clients[t]).filter(t=>t.productionMode).length>0)return!0}return!1}()}catch(t){return!1}}()),window.Vaadin=window.Vaadin||{},window.Vaadin.registrations=window.Vaadin.registrations||[],window.Vaadin.registrations.push({is:"@vaadin/router",version:"1.2.0"}),function(t,e){if(window.Vaadin.developmentMode)ut(t,e)}(function at(){}),it.NavigationTrigger={POPSTATE:y,CLICK:m}});