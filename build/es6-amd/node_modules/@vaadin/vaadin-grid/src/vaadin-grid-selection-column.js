define(["exports","../../../@polymer/polymer/polymer-legacy.js","./vaadin-grid-column.js","../../vaadin-checkbox/src/vaadin-checkbox.js","../../../@polymer/polymer/lib/utils/html-tag.js"],function(_exports,_polymerLegacy,_vaadinGridColumn,_vaadinCheckbox,_htmlTag){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.GridSelectionColumnElement=void 0;class GridSelectionColumnElement extends _vaadinGridColumn.GridColumnElement{static get template(){return _htmlTag.html`
    <template class="header" id="defaultHeaderTemplate">
      <vaadin-checkbox class="vaadin-grid-select-all-checkbox" aria-label="Select All" hidden\$="[[_selectAllHidden]]" on-checked-changed="_onSelectAllCheckedChanged" checked="[[_isChecked(selectAll, _indeterminate)]]" indeterminate="[[_indeterminate]]"></vaadin-checkbox>
    </template>
    <template id="defaultBodyTemplate">
      <vaadin-checkbox aria-label="Select Row" checked="{{selected}}"></vaadin-checkbox>
    </template>
`}static get is(){return"vaadin-grid-selection-column"}static get properties(){return{width:{type:String,value:"58px"},flexGrow:{type:Number,value:0},selectAll:{type:Boolean,value:!1,notify:!0},autoSelect:{type:Boolean,value:!1},_indeterminate:Boolean,_previousActiveItem:Object,_selectAllHidden:Boolean}}static get observers(){return["_onSelectAllChanged(selectAll)"]}_pathOrHeaderChanged(path,header,headerCell,footerCell,cells,renderer,headerRenderer,bodyTemplate,headerTemplate){!cells.value||void 0===path&&void 0===renderer||(this._bodyTemplate=bodyTemplate=void 0,this.__cleanCellsOfTemplateProperties(cells.value)),!headerCell||void 0===header&&void 0===headerRenderer||(this._headerTemplate=headerTemplate=void 0,this.__cleanCellsOfTemplateProperties([headerCell])),super._pathOrHeaderChanged(path,header,headerCell,footerCell,cells,renderer,headerRenderer,bodyTemplate,headerTemplate)}__cleanCellsOfTemplateProperties(cells){cells.forEach(cell=>{cell._content.innerHTML="",delete cell._instance,delete cell._template})}_prepareHeaderTemplate(){const headerTemplate=this._prepareTemplatizer(this._findTemplate(!0)||this.$.defaultHeaderTemplate);return headerTemplate.templatizer.dataHost=headerTemplate===this.$.defaultHeaderTemplate?this:this.dataHost,headerTemplate}_prepareBodyTemplate(){const template=this._prepareTemplatizer(this._findTemplate()||this.$.defaultBodyTemplate);return template.templatizer.dataHost=template===this.$.defaultBodyTemplate?this:this.dataHost,template}constructor(){super(),this._boundOnActiveItemChanged=this._onActiveItemChanged.bind(this),this._boundOnDataProviderChanged=this._onDataProviderChanged.bind(this),this._boundOnSelectedItemsChanged=this._onSelectedItemsChanged.bind(this)}disconnectedCallback(){if(this._grid.removeEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.removeEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.removeEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.removeEventListener("selected-items-changed",this._boundOnSelectedItemsChanged),/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&window.ShadyDOM&&this.parentElement){const parent=this.parentElement,nextSibling=this.nextElementSibling;parent.removeChild(this),nextSibling?parent.insertBefore(this,nextSibling):parent.appendChild(this)}super.disconnectedCallback()}connectedCallback(){super.connectedCallback(),this._grid&&(this._grid.addEventListener("active-item-changed",this._boundOnActiveItemChanged),this._grid.addEventListener("data-provider-changed",this._boundOnDataProviderChanged),this._grid.addEventListener("filter-changed",this._boundOnSelectedItemsChanged),this._grid.addEventListener("selected-items-changed",this._boundOnSelectedItemsChanged))}_onSelectAllChanged(selectAll){void 0!==selectAll&&this._grid&&(this._selectAllChangeLock||(this._grid.selectedItems=selectAll&&Array.isArray(this._grid.items)?this._grid._filter(this._grid.items):[]))}_arrayContains(a,b){for(var i=0;a&&b&&b[i]&&a.indexOf(b[i])>=0;i++);return i==b.length}_onSelectAllCheckedChanged(e){this.selectAll=this._indeterminate||e.target.checked}_isChecked(selectAll,indeterminate){return indeterminate||selectAll}_onActiveItemChanged(e){const activeItem=e.detail.value;if(this.autoSelect){const item=activeItem||this._previousActiveItem;item&&this._grid._toggleItem(item)}this._previousActiveItem=activeItem}_onSelectedItemsChanged(e){this._selectAllChangeLock=!0,Array.isArray(this._grid.items)&&(this._grid.selectedItems.length?this._arrayContains(this._grid.selectedItems,this._grid._filter(this._grid.items))?(this.selectAll=!0,this._indeterminate=!1):(this.selectAll=!1,this._indeterminate=!0):(this.selectAll=!1,this._indeterminate=!1)),this._selectAllChangeLock=!1}_onDataProviderChanged(e){this._selectAllHidden=!Array.isArray(this._grid.items)}}_exports.GridSelectionColumnElement=GridSelectionColumnElement,customElements.define(GridSelectionColumnElement.is,GridSelectionColumnElement)});