define(["exports","../../../@polymer/polymer/polymer-element.js","../../../@polymer/polymer/lib/utils/templatize.js"],(function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Templatizer=void 0;
/**
  @license
  Copyright (c) 2017 Vaadin Ltd.
  This program is available under Apache License Version 2.0, available at https://vaadin.com/license/
  */
class GridTemplatizer extends class extends t.PolymerElement{}{static get is(){return"vaadin-grid-templatizer"}static get properties(){return{dataHost:Object,template:Object,_templateInstances:{type:Array,value:function(){return[]}},_parentPathValues:{value:function(){return{}}},_grid:Object}}static get observers(){return["_templateInstancesChanged(_templateInstances.*, _parentPathValues.*)"]}constructor(){super(),this._instanceProps={detailsOpened:!0,index:!0,item:!0,selected:!0,expanded:!0,level:!0}}createInstance(){this._ensureTemplatized();const e=new this._TemplateClass({});return this.addInstance(e),e}addInstance(e){-1===this._templateInstances.indexOf(e)&&(this._templateInstances.push(e),requestAnimationFrame(()=>this.notifyPath("_templateInstances.*",this._templateInstances)))}removeInstance(e){const t=this._templateInstances.indexOf(e);this.splice("_templateInstances",t,1)}_ensureTemplatized(){this._TemplateClass||(this._TemplateClass=(0,s.templatize)(this.template,this,{instanceProps:this._instanceProps,parentModel:!0,forwardHostProp:function(e,t){this._forwardParentProp(e,t),this._templateInstances&&this._templateInstances.forEach(s=>s.notifyPath(e,t))},notifyInstanceProp:function(e,t,s){if("index"===t||"item"===t)return;const a=`__${t}__`;if(e[a]===s)return;e[a]=s;const n=Array.from(this._grid.$.items.children).filter(t=>this._grid._itemsEqual(t._item,e.item))[0];n&&Array.from(n.children).forEach(e=>{e._instance&&(e._instance[a]=s,e._instance.notifyPath(t,s))});if(Array.isArray(this._grid.items)&&0===t.indexOf("item.")){const a=this._grid.items.indexOf(e.item),n=t.slice("item.".length);this._grid.notifyPath(`items.${a}.${n}`,s)}const i=`_${t}InstanceChangedCallback`;this._grid&&this._grid[i]&&this._grid[i](e,s)}}))}_forwardParentProp(e,t){this._parentPathValues[e]=t,this._templateInstances.forEach(s=>s.notifyPath(e,t))}_templateInstancesChanged(e,t){let s,a;if("_templateInstances"===e.path)s=0,a=this._templateInstances.length;else{if("_templateInstances.splices"!==e.path)return;s=e.value.index,a=e.value.addedCount}Object.keys(this._parentPathValues||{}).forEach(e=>{for(var t=s;t<s+a;t++)this._templateInstances[t].set(e,this._parentPathValues[e])})}}e.Templatizer=GridTemplatizer,customElements.define(GridTemplatizer.is,GridTemplatizer)}));