define(["exports","../../../@polymer/polymer/polymer-legacy.js"],(function(e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayDataProviderMixin=void 0;e.ArrayDataProviderMixin=e=>class ArrayDataProviderMixin extends e{static get properties(){return{items:Array}}static get observers(){return["_itemsChanged(items, items.*, isAttached)"]}_itemsChanged(e,t,r){if(r){if(!Array.isArray(e))return null==e&&(this.size=0),void(this.dataProvider===this._arrayDataProvider&&(this.dataProvider=void 0));this.size=e.length,this.dataProvider=this.dataProvider||this._arrayDataProvider,this.clearCache(),this._ensureFirstPageLoaded()}}_arrayDataProvider(e,t){let r=(Array.isArray(this.items)?this.items:[]).slice(0);this._filters&&this._checkPaths(this._filters,"filtering",r)&&(r=this._filter(r)),this.size=r.length,e.sortOrders.length&&this._checkPaths(this._sorters,"sorting",r)&&(r=r.sort(this._multiSort.bind(this)));const i=e.page*e.pageSize,s=i+e.pageSize;t(r.slice(i,s),r.length)}_checkPaths(e,r,i){if(!i.length)return!1;let s=!0;for(var a in e){const o=e[a].path;if(!o||-1===o.indexOf("."))continue;const n=o.replace(/\.[^\.]*$/,"");void 0===t.Base.get(n,i[0])&&(console.warn(`Path "${o}" used for ${r} does not exist in all of the items, ${r} is disabled.`),s=!1)}return s}_multiSort(e,r){return this._sorters.map(i=>"asc"===i.direction?this._compare(t.Base.get(i.path,e),t.Base.get(i.path,r)):"desc"===i.direction?this._compare(t.Base.get(i.path,r),t.Base.get(i.path,e)):0).reduce((e,t)=>e||t,0)}_normalizeEmptyValue(e){return[void 0,null].indexOf(e)>=0?"":isNaN(e)?e.toString():e}_compare(e,t){return(e=this._normalizeEmptyValue(e))<(t=this._normalizeEmptyValue(t))?-1:e>t?1:0}_filter(e){return e.filter((e,r)=>0===this._filters.filter(r=>{const i=this._normalizeEmptyValue(t.Base.get(r.path,e)),s=this._normalizeEmptyValue(r.value).toString().toLowerCase();return-1===i.toString().toLowerCase().indexOf(s)}).length)}}}));