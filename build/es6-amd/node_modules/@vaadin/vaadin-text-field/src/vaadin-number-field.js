define(["exports","../../../@polymer/polymer/polymer-element.js","../../../@polymer/polymer/lib/elements/custom-style.js","./vaadin-text-field.js","../../../@polymer/polymer/lib/elements/dom-module.js"],function(_exports,_polymerElement,_customStyle,_vaadinTextField,_domModule){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.NumberFieldElement=void 0;const $_documentContainer=document.createElement("template");let memoizedTemplate;$_documentContainer.innerHTML='<dom-module id="vaadin-number-field-template">\n  <template>\n    <style>\n      :host([readonly]) {\n        pointer-events: none;\n      }\n\n      [part="decrease-button"]::before {\n        content: "âˆ’";\n      }\n\n      [part="increase-button"]::before {\n        content: "+";\n      }\n\n      [part="decrease-button"],\n      [part="increase-button"] {\n        -webkit-user-select: none;\n        -moz-user-select: none;\n        -ms-user-select: none;\n        user-select: none;\n      }\n\n      /* Hide the native arrow icons */\n      [part="value"]::-webkit-outer-spin-button,\n      [part="value"]::-webkit-inner-spin-button {\n        -webkit-appearance: none;\n        margin: 0;\n      }\n\n      [part="value"] {\n        /* Older Firefox versions (v47.0) requires !important */\n        -moz-appearance: textfield !important;\n      }\n    </style>\n\n    <div disabled$="[[!_allowed(-1, value, min, max, step)]]" part="decrease-button" on-click="_decreaseValue" on-touchend="_decreaseButtonTouchend" hidden$="[[!hasControls]]">\n    </div>\n\n    <div disabled$="[[!_allowed(1, value, min, max, step)]]" part="increase-button" on-click="_increaseValue" on-touchend="_increaseButtonTouchend" hidden$="[[!hasControls]]">\n    </div>\n  </template>\n\n  \n</dom-module>',document.head.appendChild($_documentContainer.content);class NumberFieldElement extends _vaadinTextField.TextFieldElement{static get is(){return"vaadin-number-field"}static get version(){return"2.3.7"}static get properties(){return{hasControls:{type:Boolean,value:!1,reflectToAttribute:!0},min:{type:Number,reflectToAttribue:!0},max:{type:Number,reflectToAttribue:!0,observer:"_maxChanged"},step:{type:Number,reflectToAttribue:!0,value:1}}}static get observers(){return["_stepOrMinChanged(step, min)"]}ready(){super.ready(),this.__previousValidInput=this.value||"",this.inputElement.type="number",this.inputElement.addEventListener("keydown",this.__onKeyDown.bind(this)),this.inputElement.addEventListener("change",this.__onInputChange.bind(this))}_decreaseButtonTouchend(e){e.preventDefault(),this._decreaseValue()}_increaseButtonTouchend(e){e.preventDefault(),this._increaseValue()}static get template(){if(!memoizedTemplate){memoizedTemplate=super.template.cloneNode(!0);const thisTemplate=_domModule.DomModule.import(this.is+"-template","template"),decreaseButton=thisTemplate.content.querySelector('[part="decrease-button"]'),increaseButton=thisTemplate.content.querySelector('[part="increase-button"]'),styles=thisTemplate.content.querySelector("style"),inputField=memoizedTemplate.content.querySelector('[part="input-field"]'),prefixSlot=memoizedTemplate.content.querySelector('[name="prefix"]');inputField.insertBefore(decreaseButton,prefixSlot),inputField.appendChild(increaseButton),memoizedTemplate.content.appendChild(styles)}return memoizedTemplate}_decreaseValue(){this._incrementValue(-1)}_increaseValue(){this._incrementValue(1)}_incrementValue(incr){if(this.disabled)return;let value=parseFloat(this.value);this.value?value<this.min?(incr=0,value=this.min):value>this.max&&(incr=0,value=this.max):0==this.min&&incr<0||0==this.max&&incr>0||0==this.max&&0==this.min?(incr=0,value=0):(null==this.max||this.max>=0)&&(null==this.min||this.min<=0)?value=0:this.min>0?(value=this.min,this.max<0&&incr<0&&(value=this.max),incr=0):this.max<0&&(value=this.max,incr<0?incr=0:this._getIncrement(1,value-this.step)>this.max?value-=2*this.step:value-=this.step);const newValue=this._getIncrement(incr,value);this.value&&0!=incr&&!this._incrementIsInsideTheLimits(incr,value)||this._setValue(newValue)}_setValue(value){this.value=this.inputElement.value=parseFloat(value).toFixed(this.__decimals),this.dispatchEvent(new CustomEvent("change",{bubbles:!0}))}_getIncrement(incr,currentValue){let step=this.step||1,min=this.min||0;const multiplier=Math.max(this._getMultiplier(currentValue),this._getMultiplier(step),this._getMultiplier(min)),margin=((currentValue*=multiplier)-(min*=multiplier))%(step*=multiplier);return incr>0?(currentValue-margin+step)/multiplier:incr<0?(currentValue-(margin||step))/multiplier:currentValue/multiplier}_getMultiplier(number){if(!isNaN(number)){let multiplier=1;for(;Math.floor(number*multiplier)!==number*multiplier;)multiplier*=10;return multiplier}}_incrementIsInsideTheLimits(incr,value){return incr<0?null==this.min||this._getIncrement(incr,value)>=this.min:incr>0?null==this.max||this._getIncrement(incr,value)<=this.max:this._getIncrement(incr,value)<=this.max&&this._getIncrement(incr,value)>=this.min}_allowed(sign){const incr=sign*(this.step||1),value=parseFloat(this.value);return!this.value||!this.disabled&&this._incrementIsInsideTheLimits(incr,value)}_maxChanged(){this.inputElement.max=this.max}_valueChanged(newVal,oldVal){newVal&&isNaN(parseFloat(newVal).toFixed(this.__decimals))?this.value="":"string"!=typeof this.value&&(this.value=String(this.value)),super._valueChanged(this.value,oldVal)}__onKeyDown(e){38==e.keyCode?(e.preventDefault(),this._increaseValue()):40==e.keyCode&&(e.preventDefault(),this._decreaseValue())}__onInputChange(){this.checkValidity()}_stepOrMinChanged(step,min){this.inputElement.step=step,this.inputElement.min=this.min;const countDecimalPlaces=number=>number?String(Math.abs(number)).replace(/^\d*\.?(.*)?$/,"$1").length:0;this.__decimals=Math.max(countDecimalPlaces(step),countDecimalPlaces(min))}checkValidity(){return(void 0!==this.min||void 0!==this.max||this.step)&&(this.invalid=!this.inputElement.checkValidity()),super.checkValidity()}}_exports.NumberFieldElement=NumberFieldElement,window.customElements.define(NumberFieldElement.is,NumberFieldElement)});