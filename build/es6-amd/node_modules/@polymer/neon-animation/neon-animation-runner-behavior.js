define(["exports","../polymer/polymer-legacy.js","./neon-animatable-behavior.js"],(function(_exports,_polymerLegacy,_neonAnimatableBehavior){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.NeonAnimationRunnerBehavior=_exports.NeonAnimationRunnerBehaviorImpl=void 0;
/**
  @license
  Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at
  http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
  http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
  found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
  part of the polymer project is also subject to an additional IP rights grant
  found at http://polymer.github.io/PATENTS.txt
  */
const NeonAnimationRunnerBehaviorImpl={_configureAnimations:function(configs){var results=[],resultsToPlay=[];if(configs.length>0)for(let config,index=0;config=configs[index];index++){let neonAnimation=document.createElement(config.name);if(neonAnimation.isNeonAnimation){let result=null;neonAnimation.configure||(neonAnimation.configure=function(config){return null}),result=neonAnimation.configure(config),resultsToPlay.push({result:result,config:config,neonAnimation:neonAnimation})}else console.warn(this.is+":",config.name,"not found!")}for(var i=0;i<resultsToPlay.length;i++){let result=resultsToPlay[i].result,config=resultsToPlay[i].config,neonAnimation=resultsToPlay[i].neonAnimation;try{"function"!=typeof result.cancel&&(result=document.timeline.play(result))}catch(e){result=null,console.warn("Couldnt play","(",config.name,").",e)}result&&results.push({neonAnimation:neonAnimation,config:config,animation:result})}return results},_shouldComplete:function(activeEntries){for(var finished=!0,i=0;i<activeEntries.length;i++)if("finished"!=activeEntries[i].animation.playState){finished=!1;break}return finished},_complete:function(activeEntries){for(var i=0;i<activeEntries.length;i++)activeEntries[i].neonAnimation.complete(activeEntries[i].config);for(i=0;i<activeEntries.length;i++)activeEntries[i].animation.cancel()},playAnimation:function(type,cookie){var configs=this.getAnimationConfig(type);if(configs){this._active=this._active||{},this._active[type]&&(this._complete(this._active[type]),delete this._active[type]);var activeEntries=this._configureAnimations(configs);if(0!=activeEntries.length){this._active[type]=activeEntries;for(var i=0;i<activeEntries.length;i++)activeEntries[i].animation.onfinish=function(){this._shouldComplete(activeEntries)&&(this._complete(activeEntries),delete this._active[type],this.fire("neon-animation-finish",cookie,{bubbles:!1}))}.bind(this)}else this.fire("neon-animation-finish",cookie,{bubbles:!1})}},cancelAnimation:function(){for(var k in this._active){var entries=this._active[k];for(var j in entries)entries[j].animation.cancel()}this._active={}}};_exports.NeonAnimationRunnerBehaviorImpl=NeonAnimationRunnerBehaviorImpl;const NeonAnimationRunnerBehavior=[_neonAnimatableBehavior.NeonAnimatableBehavior,NeonAnimationRunnerBehaviorImpl];_exports.NeonAnimationRunnerBehavior=NeonAnimationRunnerBehavior}));