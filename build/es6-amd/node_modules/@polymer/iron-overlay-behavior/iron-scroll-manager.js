define(["exports","../polymer/polymer-legacy.js","../polymer/lib/legacy/polymer.dom.js"],(function(_exports,_polymerLegacy,_polymerDom){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.elementIsScrollLocked=function elementIsScrollLocked(element){var scrollLocked,lockingElement=currentLockingElement;if(void 0===lockingElement)return!1;if(_hasCachedLockedElement(element))return!0;if(_hasCachedUnlockedElement(element))return!1;(scrollLocked=!!lockingElement&&lockingElement!==element&&!_composedTreeContains(lockingElement,element))?_lockedElementCache.push(element):_unlockedElementCache.push(element);return scrollLocked},_exports.pushScrollLock=function pushScrollLock(element){if(_lockingElements.indexOf(element)>=0)return;0===_lockingElements.length&&_lockScrollInteractions();_lockingElements.push(element),_exports.currentLockingElement=currentLockingElement=_lockingElements[_lockingElements.length-1],_exports._lockedElementCache=_lockedElementCache=[],_exports._unlockedElementCache=_unlockedElementCache=[]},_exports.removeScrollLock=function removeScrollLock(element){var index=_lockingElements.indexOf(element);if(-1===index)return;_lockingElements.splice(index,1),_exports.currentLockingElement=currentLockingElement=_lockingElements[_lockingElements.length-1],_exports._lockedElementCache=_lockedElementCache=[],_exports._unlockedElementCache=_unlockedElementCache=[],0===_lockingElements.length&&_unlockScrollInteractions()},_exports._hasCachedLockedElement=_hasCachedLockedElement,_exports._hasCachedUnlockedElement=_hasCachedUnlockedElement,_exports._composedTreeContains=_composedTreeContains,_exports._scrollInteractionHandler=_scrollInteractionHandler,_exports._lockScrollInteractions=_lockScrollInteractions,_exports._unlockScrollInteractions=_unlockScrollInteractions,_exports._shouldPreventScrolling=_shouldPreventScrolling,_exports._getScrollableNodes=_getScrollableNodes,_exports._getScrollingNode=_getScrollingNode,_exports._getScrollInfo=_getScrollInfo,_exports._boundScrollHandler=_exports._unlockedElementCache=_exports._lockedElementCache=_exports._lockingElements=_exports.currentLockingElement=void 0;
/**
  @license
  Copyright (c) 2017 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at
  http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
  http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
  found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
  part of the polymer project is also subject to an additional IP rights grant
  found at http://polymer.github.io/PATENTS.txt
  */
var _boundScrollHandler,currentLockingElement,lastTouchPosition={pageX:0,pageY:0},lastRootTarget=null,lastScrollableNodes=[],scrollEvents=["wheel","mousewheel","DOMMouseScroll","touchstart","touchmove"];_exports._boundScrollHandler=_boundScrollHandler,_exports.currentLockingElement=currentLockingElement;const _lockingElements=[];_exports._lockingElements=_lockingElements;let _lockedElementCache=null;_exports._lockedElementCache=_lockedElementCache;let _unlockedElementCache=null;function _hasCachedLockedElement(element){return _lockedElementCache.indexOf(element)>-1}function _hasCachedUnlockedElement(element){return _unlockedElementCache.indexOf(element)>-1}function _composedTreeContains(element,child){var contentElements,distributedNodes,contentIndex,nodeIndex;if(element.contains(child))return!0;for(contentElements=(0,_polymerDom.dom)(element).querySelectorAll("content,slot"),contentIndex=0;contentIndex<contentElements.length;++contentIndex)for(distributedNodes=(0,_polymerDom.dom)(contentElements[contentIndex]).getDistributedNodes(),nodeIndex=0;nodeIndex<distributedNodes.length;++nodeIndex)if(distributedNodes[nodeIndex].nodeType===Node.ELEMENT_NODE&&_composedTreeContains(distributedNodes[nodeIndex],child))return!0;return!1}function _scrollInteractionHandler(event){if(event.cancelable&&_shouldPreventScrolling(event)&&event.preventDefault(),event.targetTouches){var touch=event.targetTouches[0];lastTouchPosition.pageX=touch.pageX,lastTouchPosition.pageY=touch.pageY}}function _lockScrollInteractions(){_exports._boundScrollHandler=_boundScrollHandler=_boundScrollHandler||_scrollInteractionHandler.bind(void 0);for(var i=0,l=scrollEvents.length;i<l;i++)document.addEventListener(scrollEvents[i],_boundScrollHandler,{capture:!0,passive:!1})}function _unlockScrollInteractions(){for(var i=0,l=scrollEvents.length;i<l;i++)document.removeEventListener(scrollEvents[i],_boundScrollHandler,{capture:!0,passive:!1})}function _shouldPreventScrolling(event){var target=(0,_polymerDom.dom)(event).rootTarget;if("touchmove"!==event.type&&lastRootTarget!==target&&(lastRootTarget=target,lastScrollableNodes=_getScrollableNodes((0,_polymerDom.dom)(event).path)),!lastScrollableNodes.length)return!0;if("touchstart"===event.type)return!1;var info=_getScrollInfo(event);return!_getScrollingNode(lastScrollableNodes,info.deltaX,info.deltaY)}function _getScrollableNodes(nodes){for(var scrollables=[],lockingIndex=nodes.indexOf(currentLockingElement),i=0;i<=lockingIndex;i++)if(nodes[i].nodeType===Node.ELEMENT_NODE){var node=nodes[i],style=node.style;"scroll"!==style.overflow&&"auto"!==style.overflow&&(style=window.getComputedStyle(node)),"scroll"!==style.overflow&&"auto"!==style.overflow||scrollables.push(node)}return scrollables}function _getScrollingNode(nodes,deltaX,deltaY){if(deltaX||deltaY)for(var verticalScroll=Math.abs(deltaY)>=Math.abs(deltaX),i=0;i<nodes.length;i++){var node=nodes[i];if(verticalScroll?deltaY<0?node.scrollTop>0:node.scrollTop<node.scrollHeight-node.clientHeight:deltaX<0?node.scrollLeft>0:node.scrollLeft<node.scrollWidth-node.clientWidth)return node}}function _getScrollInfo(event){var info={deltaX:event.deltaX,deltaY:event.deltaY};if("deltaX"in event);else if("wheelDeltaX"in event&&"wheelDeltaY"in event)info.deltaX=-event.wheelDeltaX,info.deltaY=-event.wheelDeltaY;else if("wheelDelta"in event)info.deltaX=0,info.deltaY=-event.wheelDelta;else if("axis"in event)info.deltaX=1===event.axis?event.detail:0,info.deltaY=2===event.axis?event.detail:0;else if(event.targetTouches){var touch=event.targetTouches[0];info.deltaX=lastTouchPosition.pageX-touch.pageX,info.deltaY=lastTouchPosition.pageY-touch.pageY}return info}_exports._unlockedElementCache=_unlockedElementCache}));