define(["exports","../polymer/polymer-legacy.js","../polymer/lib/legacy/polymer.dom.js"],(function(_exports,_polymerLegacy,_polymerDom){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.IronFocusablesHelper=void 0;
/**
  @license
  Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at
  http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
  http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
  found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
  part of the polymer project is also subject to an additional IP rights grant
  found at http://polymer.github.io/PATENTS.txt
  */
var p=Element.prototype,matches=p.matches||p.matchesSelector||p.mozMatchesSelector||p.msMatchesSelector||p.oMatchesSelector||p.webkitMatchesSelector;const IronFocusablesHelper=new class IronFocusablesHelperClass{getTabbableNodes(node){var result=[];return this._collectTabbableNodes(node,result)?this._sortByTabIndex(result):result}isFocusable(element){return matches.call(element,"input, select, textarea, button, object")?matches.call(element,":not([disabled])"):matches.call(element,"a[href], area[href], iframe, [tabindex], [contentEditable]")}isTabbable(element){return this.isFocusable(element)&&matches.call(element,':not([tabindex="-1"])')&&this._isVisible(element)}_normalizedTabIndex(element){if(this.isFocusable(element)){var tabIndex=element.getAttribute("tabindex")||0;return Number(tabIndex)}return-1}_collectTabbableNodes(node,result){if(node.nodeType!==Node.ELEMENT_NODE)return!1;var element=node;if(!this._isVisible(element))return!1;var children,tabIndex=this._normalizedTabIndex(element),needsSort=tabIndex>0;tabIndex>=0&&result.push(element),children="content"===element.localName||"slot"===element.localName?(0,_polymerDom.dom)(element).getDistributedNodes():(0,_polymerDom.dom)(element.root||element).children;for(var i=0;i<children.length;i++)needsSort=this._collectTabbableNodes(children[i],result)||needsSort;return needsSort}_isVisible(element){var style=element.style;return"hidden"!==style.visibility&&"none"!==style.display&&("hidden"!==(style=window.getComputedStyle(element)).visibility&&"none"!==style.display)}_sortByTabIndex(tabbables){var len=tabbables.length;if(len<2)return tabbables;var pivot=Math.ceil(len/2),left=this._sortByTabIndex(tabbables.slice(0,pivot)),right=this._sortByTabIndex(tabbables.slice(pivot));return this._mergeSortByTabIndex(left,right)}_mergeSortByTabIndex(left,right){for(var result=[];left.length>0&&right.length>0;)this._hasLowerTabOrder(left[0],right[0])?result.push(right.shift()):result.push(left.shift());return result.concat(left,right)}_hasLowerTabOrder(a,b){var ati=Math.max(a.tabIndex,0),bti=Math.max(b.tabIndex,0);return 0===ati||0===bti?bti>ati:ati>bti}};_exports.IronFocusablesHelper=IronFocusablesHelper}));