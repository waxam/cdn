define(["exports","../elements/dom-module.js","./resolve-url.js"],(function(e,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stylesFromModules=stylesFromModules,e.stylesFromModule=stylesFromModule,e.stylesFromTemplate=stylesFromTemplate,e.stylesFromModuleImports=function stylesFromModuleImports(e){let t=importModule(e);return t?_stylesFromModuleImports(t):[]},e.cssFromModules=function cssFromModules(e){let t=e.trim().split(/\s+/),s="";for(let o=0;o<t.length;o++)s+=cssFromModule(t[o]);return s},e.cssFromModule=cssFromModule,e.cssFromTemplate=cssFromTemplate,e.cssFromModuleImports=function cssFromModuleImports(e){let t=importModule(e);return t?_cssFromModuleImports(t):""};function importModule(e){return t.DomModule.import(e)}function styleForImport(e){let t=e.body?e.body:e;const o=(0,s.resolveCss)(t.textContent,e.baseURI),l=document.createElement("style");return l.textContent=o,l}function stylesFromModules(e){const t=e.trim().split(/\s+/),s=[];for(let o=0;o<t.length;o++)s.push(...stylesFromModule(t[o]));return s}function stylesFromModule(e){const t=importModule(e);if(!t)return console.warn("Could not find style data in module named",e),[];if(void 0===t._styles){const e=[];e.push(..._stylesFromModuleImports(t));const s=t.querySelector("template");s&&e.push(...stylesFromTemplate(s,t.assetpath)),t._styles=e}return t._styles}function stylesFromTemplate(e,t){if(!e._styles){const o=[],l=e.content.querySelectorAll("style");for(let e=0;e<l.length;e++){let r=l[e],n=r.getAttribute("include");n&&o.push(...stylesFromModules(n).filter((function(e,t,s){return s.indexOf(e)===t}))),t&&(r.textContent=(0,s.resolveCss)(r.textContent,t)),o.push(r)}e._styles=o}return e._styles}function _stylesFromModuleImports(e){const t=[],s=e.querySelectorAll("link[rel=import][type~=css]");for(let o=0;o<s.length;o++){let e=s[o];if(e.import){const s=e.import,o=e.hasAttribute("shady-unscoped");if(o&&!s._unscopedStyle){const e=styleForImport(s);e.setAttribute("shady-unscoped",""),s._unscopedStyle=e}else s._style||(s._style=styleForImport(s));t.push(o?s._unscopedStyle:s._style)}}return t}function cssFromModule(e){let t=importModule(e);if(t&&void 0===t._cssText){let e=_cssFromModuleImports(t),s=t.querySelector("template");s&&(e+=cssFromTemplate(s,t.assetpath)),t._cssText=e||null}return t||console.warn("Could not find style data in module named",e),t&&t._cssText||""}function cssFromTemplate(e,t){let s="";const o=stylesFromTemplate(e,t);for(let l=0;l<o.length;l++){let e=o[l];e.parentNode&&e.parentNode.removeChild(e),s+=e.textContent}return s}function _cssFromModuleImports(e){let t="",s=_stylesFromModuleImports(e);for(let o=0;o<s.length;o++)t+=s[o].textContent;return t}}));