define(["exports","../utils/boot.js","../utils/settings.js","../utils/mixin.js","../utils/style-gather.js","../utils/resolve-url.js","../elements/dom-module.js","./property-effects.js","./properties-mixin.js","../utils/wrap.js"],(function(t,e,r,o,s,i,a,n,l,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateStyles=t.ElementMixin=t.version=void 0;t.version="3.3.1";const h=window.ShadyCSS&&window.ShadyCSS.cssBuild,c=(0,o.dedupingMixin)(t=>{const e=(0,l.PropertiesMixin)((0,n.PropertyEffects)(t));return class PolymerElement extends e{static get polymerElementVersion(){return"3.3.1"}static _finalizeClass(){e._finalizeClass.call(this);const t=function ownObservers(t){return t.hasOwnProperty(JSCompiler_renameProperty("__ownObservers",t))||(t.__ownObservers=t.hasOwnProperty(JSCompiler_renameProperty("observers",t))?t.observers:null),t.__ownObservers}(this);t&&this.createObservers(t,this._properties),this._prepareTemplate()}static _prepareTemplate(){let t=this.template;t&&("string"==typeof t?(console.error("template getter must return HTMLTemplateElement"),t=null):r.legacyOptimizations||(t=t.cloneNode(!0))),this.prototype._template=t}static createProperties(t){for(let i in t)e=this.prototype,r=i,o=t[i],s=t,o.computed&&(o.readOnly=!0),o.computed&&(e._hasReadOnlyEffect(r)?console.warn(`Cannot redefine computed property '${r}'.`):e._createComputedProperty(r,o.computed,s)),o.readOnly&&!e._hasReadOnlyEffect(r)?e._createReadOnlyProperty(r,!o.computed):!1===o.readOnly&&e._hasReadOnlyEffect(r)&&console.warn(`Cannot make readOnly property '${r}' non-readOnly.`),o.reflectToAttribute&&!e._hasReflectEffect(r)?e._createReflectedProperty(r):!1===o.reflectToAttribute&&e._hasReflectEffect(r)&&console.warn(`Cannot make reflected property '${r}' non-reflected.`),o.notify&&!e._hasNotifyEffect(r)?e._createNotifyingProperty(r):!1===o.notify&&e._hasNotifyEffect(r)&&console.warn(`Cannot make notify property '${r}' non-notify.`),o.observer&&e._createPropertyObserver(r,o.observer,s[o.observer]),e._addPropertyToAttributeMap(r);var e,r,o,s}static createObservers(t,e){const r=this.prototype;for(let o=0;o<t.length;o++)r._createMethodObserver(t[o],e)}static get template(){return this.hasOwnProperty(JSCompiler_renameProperty("_template",this))||(this._template=this.prototype.hasOwnProperty(JSCompiler_renameProperty("_template",this.prototype))?this.prototype._template:function getTemplateFromDomModule(t){let e=null;if(t&&(!r.strictTemplatePolicy||r.allowTemplateFromDomModule)&&(e=a.DomModule.import(t,"template"),r.strictTemplatePolicy&&!e))throw new Error(`strictTemplatePolicy: expecting dom-module or null template for ${t}`);return e}(this.is)||Object.getPrototypeOf(this.prototype).constructor.template),this._template}static set template(t){this._template=t}static get importPath(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_importPath",this))){const t=this.importMeta;if(t)this._importPath=(0,i.pathFromUrl)(t.url);else{const t=a.DomModule.import(this.is);this._importPath=t&&t.assetpath||Object.getPrototypeOf(this.prototype).constructor.importPath}}return this._importPath}constructor(){super(),this._template,this._importPath,this.rootPath,this.importPath,this.root,this.$}_initializeProperties(){this.constructor.finalize(),this.constructor._finalizeTemplate(this.localName),super._initializeProperties(),this.rootPath=r.rootPath,this.importPath=this.constructor.importPath;let t=function propertyDefaults(t){if(!t.hasOwnProperty(JSCompiler_renameProperty("__propertyDefaults",t))){t.__propertyDefaults=null;let e=t._properties;for(let r in e){let o=e[r];"value"in o&&(t.__propertyDefaults=t.__propertyDefaults||{},t.__propertyDefaults[r]=o)}}return t.__propertyDefaults}(this.constructor);if(t)for(let e in t){let r=t[e];if(!this.hasOwnProperty(e)){let t="function"==typeof r.value?r.value.call(this):r.value;this._hasAccessor(e)?this._setPendingProperty(e,t,!0):this[e]=t}}}static _processStyleText(t,e){return(0,i.resolveCss)(t,e)}static _finalizeTemplate(t){const e=this.prototype._template;if(e&&!e.__polymerFinalized){e.__polymerFinalized=!0;const r=this.importPath;!function processElementStyles(t,e,r,o){if(!h){const i=e.content.querySelectorAll("style"),a=(0,s.stylesFromTemplate)(e),n=(0,s.stylesFromModuleImports)(r),l=e.content.firstElementChild;for(let r=0;r<n.length;r++){let s=n[r];s.textContent=t._processStyleText(s.textContent,o),e.content.insertBefore(s,l)}let p=0;for(let e=0;e<a.length;e++){let r=a[e],s=i[p];s!==r?(r=r.cloneNode(!0),s.parentNode.insertBefore(r,s)):p++,r.textContent=t._processStyleText(r.textContent,o)}}window.ShadyCSS&&window.ShadyCSS.prepareTemplate(e,r)}(this,e,t,r?(0,i.resolveUrl)(r):""),this.prototype._bindTemplate(e)}}connectedCallback(){window.ShadyCSS&&this._template&&window.ShadyCSS.styleElement(this),super.connectedCallback()}ready(){this._template&&(this.root=this._stampTemplate(this._template),this.$=this.root.$),super.ready()}_readyClients(){this._template&&(this.root=this._attachDom(this.root)),super._readyClients()}_attachDom(t){const e=(0,p.wrap)(this);if(e.attachShadow)return t?(e.shadowRoot||(e.attachShadow({mode:"open",shadyUpgradeFragment:t}),e.shadowRoot.appendChild(t)),r.syncInitialRender&&window.ShadyDOM&&window.ShadyDOM.flushInitial(e.shadowRoot),e.shadowRoot):null;throw new Error("ShadowDOM not available. PolymerElement can create dom as children instead of in ShadowDOM by setting `this.root = this;` before `ready`.")}updateStyles(t){window.ShadyCSS&&window.ShadyCSS.styleSubtree(this,t)}resolveUrl(t,e){return!e&&this.importPath&&(e=(0,i.resolveUrl)(this.importPath)),(0,i.resolveUrl)(t,e)}static _parseTemplateContent(t,r,o){return r.dynamicFns=r.dynamicFns||this._properties,e._parseTemplateContent.call(this,t,r,o)}static _addTemplatePropertyEffect(t,o,s){return!r.legacyOptimizations||o in this._properties||console.warn(`Property '${o}' used in template but not declared in 'properties'; `+"attribute will not be observed."),e._addTemplatePropertyEffect.call(this,t,o,s)}}});t.ElementMixin=c;t.updateStyles=function(t){window.ShadyCSS&&window.ShadyCSS.styleDocument(t)}}));