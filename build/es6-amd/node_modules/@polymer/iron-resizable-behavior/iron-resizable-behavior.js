define(["exports","../polymer/polymer-legacy.js","../polymer/lib/legacy/polymer.dom.js","../polymer/lib/utils/settings.js"],(function(_exports,_polymerLegacy,_polymerDom,_settings){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.IronResizableBehavior=void 0;
/**
  @license
  Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
  This code may only be used under the BSD style license found at
  http://polymer.github.io/LICENSE.txt The complete set of authors may be found at
  http://polymer.github.io/AUTHORS.txt The complete set of contributors may be
  found at http://polymer.github.io/CONTRIBUTORS.txt Code distributed by Google as
  part of the polymer project is also subject to an additional IP rights grant
  found at http://polymer.github.io/PATENTS.txt
  */
var ORPHANS=new Set;const IronResizableBehavior={properties:{_parentResizable:{type:Object,observer:"_parentResizableChanged"},_notifyingDescendant:{type:Boolean,value:!1}},listeners:{"iron-request-resize-notifications":"_onIronRequestResizeNotifications"},created:function(){this._interestedResizables=[],this._boundNotifyResize=this.notifyResize.bind(this),this._boundOnDescendantIronResize=this._onDescendantIronResize.bind(this)},attached:function(){this._requestResizeNotifications()},detached:function(){this._parentResizable?this._parentResizable.stopResizeNotificationsFor(this):(ORPHANS.delete(this),window.removeEventListener("resize",this._boundNotifyResize)),this._parentResizable=null},notifyResize:function(){this.isAttached&&(this._interestedResizables.forEach((function(resizable){this.resizerShouldNotify(resizable)&&this._notifyDescendant(resizable)}),this),this._fireResize())},assignParentResizable:function(parentResizable){this._parentResizable&&this._parentResizable.stopResizeNotificationsFor(this),this._parentResizable=parentResizable,parentResizable&&-1===parentResizable._interestedResizables.indexOf(this)&&(parentResizable._interestedResizables.push(this),parentResizable._subscribeIronResize(this))},stopResizeNotificationsFor:function(target){var index=this._interestedResizables.indexOf(target);index>-1&&(this._interestedResizables.splice(index,1),this._unsubscribeIronResize(target))},_subscribeIronResize:function(target){target.addEventListener("iron-resize",this._boundOnDescendantIronResize)},_unsubscribeIronResize:function(target){target.removeEventListener("iron-resize",this._boundOnDescendantIronResize)},resizerShouldNotify:function(element){return!0},_onDescendantIronResize:function(event){this._notifyingDescendant?event.stopPropagation():_settings.useShadow||this._fireResize()},_fireResize:function(){this.fire("iron-resize",null,{node:this,bubbles:!1})},_onIronRequestResizeNotifications:function(event){var target=(0,_polymerDom.dom)(event).rootTarget;target!==this&&(target.assignParentResizable(this),this._notifyDescendant(target),event.stopPropagation())},_parentResizableChanged:function(parentResizable){parentResizable&&window.removeEventListener("resize",this._boundNotifyResize)},_notifyDescendant:function(descendant){this.isAttached&&(this._notifyingDescendant=!0,descendant.notifyResize(),this._notifyingDescendant=!1)},_requestResizeNotifications:function(){if(this.isAttached)if("loading"===document.readyState){var _requestResizeNotifications=this._requestResizeNotifications.bind(this);document.addEventListener("readystatechange",(function readystatechanged(){document.removeEventListener("readystatechange",readystatechanged),_requestResizeNotifications()}))}else this._findParent(),this._parentResizable?this._parentResizable._interestedResizables.forEach((function(resizable){resizable!==this&&resizable._findParent()}),this):(ORPHANS.forEach((function(orphan){orphan!==this&&orphan._findParent()}),this),window.addEventListener("resize",this._boundNotifyResize),this.notifyResize())},_findParent:function(){this.assignParentResizable(null),this.fire("iron-request-resize-notifications",null,{node:this,bubbles:!0,cancelable:!0}),this._parentResizable?ORPHANS.delete(this):ORPHANS.add(this)}};_exports.IronResizableBehavior=IronResizableBehavior}));